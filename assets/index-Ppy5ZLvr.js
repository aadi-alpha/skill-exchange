(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var Jp={exports:{}},Iu={};var pS;function O1(){if(pS)return Iu;pS=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:n,type:s,key:c,ref:a!==void 0?a:null,props:l}}return Iu.Fragment=e,Iu.jsx=t,Iu.jsxs=t,Iu}var gS;function D1(){return gS||(gS=1,Jp.exports=O1()),Jp.exports}var V=D1(),Zp={exports:{}},Ce={};var _S;function M1(){if(_S)return Ce;_S=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function R(M){return M===null||typeof M!="object"?null:(M=S&&M[S]||M["@@iterator"],typeof M=="function"?M:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K=Object.assign,q={};function ne(M,H,W){this.props=M,this.context=H,this.refs=q,this.updater=W||k}ne.prototype.isReactComponent={},ne.prototype.setState=function(M,H){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,H,"setState")},ne.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function ee(){}ee.prototype=ne.prototype;function re(M,H,W){this.props=M,this.context=H,this.refs=q,this.updater=W||k}var Ee=re.prototype=new ee;Ee.constructor=re,K(Ee,ne.prototype),Ee.isPureReactComponent=!0;var Ae=Array.isArray;function Re(){}var N={H:null,A:null,T:null,S:null},b=Object.prototype.hasOwnProperty;function A(M,H,W){var le=W.ref;return{$$typeof:n,type:M,key:H,ref:le!==void 0?le:null,props:W}}function P(M,H){return A(M.type,H,M.props)}function D(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function U(M){var H={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(W){return H[W]})}var I=/\/+/g;function Ze(M,H){return typeof M=="object"&&M!==null&&M.key!=null?U(""+M.key):H.toString(36)}function De(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(Re,Re):(M.status="pending",M.then(function(H){M.status==="pending"&&(M.status="fulfilled",M.value=H)},function(H){M.status==="pending"&&(M.status="rejected",M.reason=H)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function X(M,H,W,le,ge){var _e=typeof M;(_e==="undefined"||_e==="boolean")&&(M=null);var Me=!1;if(M===null)Me=!0;else switch(_e){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(M.$$typeof){case n:case e:Me=!0;break;case y:return Me=M._init,X(Me(M._payload),H,W,le,ge)}}if(Me)return ge=ge(M),Me=le===""?"."+Ze(M,0):le,Ae(ge)?(W="",Me!=null&&(W=Me.replace(I,"$&/")+"/"),X(ge,H,W,"",function(ai){return ai})):ge!=null&&(D(ge)&&(ge=P(ge,W+(ge.key==null||M&&M.key===ge.key?"":(""+ge.key).replace(I,"$&/")+"/")+Me)),H.push(ge)),1;Me=0;var lt=le===""?".":le+":";if(Ae(M))for(var Xe=0;Xe<M.length;Xe++)le=M[Xe],_e=lt+Ze(le,Xe),Me+=X(le,H,W,_e,ge);else if(Xe=R(M),typeof Xe=="function")for(M=Xe.call(M),Xe=0;!(le=M.next()).done;)le=le.value,_e=lt+Ze(le,Xe++),Me+=X(le,H,W,_e,ge);else if(_e==="object"){if(typeof M.then=="function")return X(De(M),H,W,le,ge);throw H=String(M),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return Me}function ie(M,H,W){if(M==null)return M;var le=[],ge=0;return X(M,le,"","",function(_e){return H.call(W,_e,ge++)}),le}function ce(M){if(M._status===-1){var H=M._result;H=H(),H.then(function(W){(M._status===0||M._status===-1)&&(M._status=1,M._result=W)},function(W){(M._status===0||M._status===-1)&&(M._status=2,M._result=W)}),M._status===-1&&(M._status=0,M._result=H)}if(M._status===1)return M._result.default;throw M._result}var xe=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Pe={map:ie,forEach:function(M,H,W){ie(M,function(){H.apply(this,arguments)},W)},count:function(M){var H=0;return ie(M,function(){H++}),H},toArray:function(M){return ie(M,function(H){return H})||[]},only:function(M){if(!D(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Ce.Activity=E,Ce.Children=Pe,Ce.Component=ne,Ce.Fragment=t,Ce.Profiler=a,Ce.PureComponent=re,Ce.StrictMode=s,Ce.Suspense=p,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(M){return N.H.useMemoCache(M)}},Ce.cache=function(M){return function(){return M.apply(null,arguments)}},Ce.cacheSignal=function(){return null},Ce.cloneElement=function(M,H,W){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var le=K({},M.props),ge=M.key;if(H!=null)for(_e in H.key!==void 0&&(ge=""+H.key),H)!b.call(H,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&H.ref===void 0||(le[_e]=H[_e]);var _e=arguments.length-2;if(_e===1)le.children=W;else if(1<_e){for(var Me=Array(_e),lt=0;lt<_e;lt++)Me[lt]=arguments[lt+2];le.children=Me}return A(M.type,ge,le)},Ce.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},Ce.createElement=function(M,H,W){var le,ge={},_e=null;if(H!=null)for(le in H.key!==void 0&&(_e=""+H.key),H)b.call(H,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(ge[le]=H[le]);var Me=arguments.length-2;if(Me===1)ge.children=W;else if(1<Me){for(var lt=Array(Me),Xe=0;Xe<Me;Xe++)lt[Xe]=arguments[Xe+2];ge.children=lt}if(M&&M.defaultProps)for(le in Me=M.defaultProps,Me)ge[le]===void 0&&(ge[le]=Me[le]);return A(M,_e,ge)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(M){return{$$typeof:d,render:M}},Ce.isValidElement=D,Ce.lazy=function(M){return{$$typeof:y,_payload:{_status:-1,_result:M},_init:ce}},Ce.memo=function(M,H){return{$$typeof:g,type:M,compare:H===void 0?null:H}},Ce.startTransition=function(M){var H=N.T,W={};N.T=W;try{var le=M(),ge=N.S;ge!==null&&ge(W,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(Re,xe)}catch(_e){xe(_e)}finally{H!==null&&W.types!==null&&(H.types=W.types),N.T=H}},Ce.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Ce.use=function(M){return N.H.use(M)},Ce.useActionState=function(M,H,W){return N.H.useActionState(M,H,W)},Ce.useCallback=function(M,H){return N.H.useCallback(M,H)},Ce.useContext=function(M){return N.H.useContext(M)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(M,H){return N.H.useDeferredValue(M,H)},Ce.useEffect=function(M,H){return N.H.useEffect(M,H)},Ce.useEffectEvent=function(M){return N.H.useEffectEvent(M)},Ce.useId=function(){return N.H.useId()},Ce.useImperativeHandle=function(M,H,W){return N.H.useImperativeHandle(M,H,W)},Ce.useInsertionEffect=function(M,H){return N.H.useInsertionEffect(M,H)},Ce.useLayoutEffect=function(M,H){return N.H.useLayoutEffect(M,H)},Ce.useMemo=function(M,H){return N.H.useMemo(M,H)},Ce.useOptimistic=function(M,H){return N.H.useOptimistic(M,H)},Ce.useReducer=function(M,H,W){return N.H.useReducer(M,H,W)},Ce.useRef=function(M){return N.H.useRef(M)},Ce.useState=function(M){return N.H.useState(M)},Ce.useSyncExternalStore=function(M,H,W){return N.H.useSyncExternalStore(M,H,W)},Ce.useTransition=function(){return N.H.useTransition()},Ce.version="19.2.0",Ce}var yS;function m_(){return yS||(yS=1,Zp.exports=M1()),Zp.exports}var z=m_(),eg={exports:{}},Nu={},tg={exports:{}},ng={};var vS;function x1(){return vS||(vS=1,(function(n){function e(X,ie){var ce=X.length;X.push(ie);e:for(;0<ce;){var xe=ce-1>>>1,Pe=X[xe];if(0<a(Pe,ie))X[xe]=ie,X[ce]=Pe,ce=xe;else break e}}function t(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var ie=X[0],ce=X.pop();if(ce!==ie){X[0]=ce;e:for(var xe=0,Pe=X.length,M=Pe>>>1;xe<M;){var H=2*(xe+1)-1,W=X[H],le=H+1,ge=X[le];if(0>a(W,ce))le<Pe&&0>a(ge,W)?(X[xe]=ge,X[le]=ce,xe=le):(X[xe]=W,X[H]=ce,xe=H);else if(le<Pe&&0>a(ge,ce))X[xe]=ge,X[le]=ce,xe=le;else break e}}return ie}function a(X,ie){var ce=X.sortIndex-ie.sortIndex;return ce!==0?ce:X.id-ie.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],g=[],y=1,E=null,S=3,R=!1,k=!1,K=!1,q=!1,ne=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;function Ee(X){for(var ie=t(g);ie!==null;){if(ie.callback===null)s(g);else if(ie.startTime<=X)s(g),ie.sortIndex=ie.expirationTime,e(p,ie);else break;ie=t(g)}}function Ae(X){if(K=!1,Ee(X),!k)if(t(p)!==null)k=!0,Re||(Re=!0,U());else{var ie=t(g);ie!==null&&De(Ae,ie.startTime-X)}}var Re=!1,N=-1,b=5,A=-1;function P(){return q?!0:!(n.unstable_now()-A<b)}function D(){if(q=!1,Re){var X=n.unstable_now();A=X;var ie=!0;try{e:{k=!1,K&&(K=!1,ee(N),N=-1),R=!0;var ce=S;try{t:{for(Ee(X),E=t(p);E!==null&&!(E.expirationTime>X&&P());){var xe=E.callback;if(typeof xe=="function"){E.callback=null,S=E.priorityLevel;var Pe=xe(E.expirationTime<=X);if(X=n.unstable_now(),typeof Pe=="function"){E.callback=Pe,Ee(X),ie=!0;break t}E===t(p)&&s(p),Ee(X)}else s(p);E=t(p)}if(E!==null)ie=!0;else{var M=t(g);M!==null&&De(Ae,M.startTime-X),ie=!1}}break e}finally{E=null,S=ce,R=!1}ie=void 0}}finally{ie?U():Re=!1}}}var U;if(typeof re=="function")U=function(){re(D)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Ze=I.port2;I.port1.onmessage=D,U=function(){Ze.postMessage(null)}}else U=function(){ne(D,0)};function De(X,ie){N=ne(function(){X(n.unstable_now())},ie)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(X){switch(S){case 1:case 2:case 3:var ie=3;break;default:ie=S}var ce=S;S=ie;try{return X()}finally{S=ce}},n.unstable_requestPaint=function(){q=!0},n.unstable_runWithPriority=function(X,ie){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ce=S;S=X;try{return ie()}finally{S=ce}},n.unstable_scheduleCallback=function(X,ie,ce){var xe=n.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?xe+ce:xe):ce=xe,X){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=ce+Pe,X={id:y++,callback:ie,priorityLevel:X,startTime:ce,expirationTime:Pe,sortIndex:-1},ce>xe?(X.sortIndex=ce,e(g,X),t(p)===null&&X===t(g)&&(K?(ee(N),N=-1):K=!0,De(Ae,ce-xe))):(X.sortIndex=Pe,e(p,X),k||R||(k=!0,Re||(Re=!0,U()))),X},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(X){var ie=S;return function(){var ce=S;S=ie;try{return X.apply(this,arguments)}finally{S=ce}}}})(ng)),ng}var ES;function P1(){return ES||(ES=1,tg.exports=x1()),tg.exports}var ig={exports:{}},fn={};var TS;function k1(){if(TS)return fn;TS=1;var n=m_();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,g,y){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:p,containerInfo:g,implementation:y}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return fn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,fn.createPortal=function(p,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,y)},fn.flushSync=function(p){var g=c.T,y=s.p;try{if(c.T=null,s.p=2,p)return p()}finally{c.T=g,s.p=y,s.d.f()}},fn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},fn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},fn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var y=g.as,E=d(y,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,R=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:R}):y==="script"&&s.d.X(p,{crossOrigin:E,integrity:S,fetchPriority:R,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},fn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=d(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},fn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,E=d(y,g.crossOrigin);s.d.L(p,y,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},fn.preloadModule=function(p,g){if(typeof p=="string")if(g){var y=d(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},fn.requestFormReset=function(p){s.d.r(p)},fn.unstable_batchedUpdates=function(p,g){return p(g)},fn.useFormState=function(p,g,y){return c.H.useFormState(p,g,y)},fn.useFormStatus=function(){return c.H.useHostTransitionStatus()},fn.version="19.2.0",fn}var SS;function V1(){if(SS)return ig.exports;SS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ig.exports=k1(),ig.exports}var wS;function L1(){if(wS)return Nu;wS=1;var n=P1(),e=m_(),t=V1();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,o=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(o=r.return),i=r.return;while(i)}return r.tag===3?o:null}function c(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function p(i){if(l(i)!==i)throw Error(s(188))}function g(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var o=i,u=r;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return p(f),i;if(m===u)return p(f),r;m=m.sibling}throw Error(s(188))}if(o.return!==u.return)o=f,u=m;else{for(var v=!1,w=f.child;w;){if(w===o){v=!0,o=f,u=m;break}if(w===u){v=!0,u=f,o=m;break}w=w.sibling}if(!v){for(w=m.child;w;){if(w===o){v=!0,o=m,u=f;break}if(w===u){v=!0,u=m,o=f;break}w=w.sibling}if(!v)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?i:r}function y(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=y(i),r!==null)return r;i=i.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),ee=Symbol.for("react.consumer"),re=Symbol.for("react.context"),Ee=Symbol.for("react.forward_ref"),Ae=Symbol.for("react.suspense"),Re=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function U(i){return i===null||typeof i!="object"?null:(i=D&&i[D]||i["@@iterator"],typeof i=="function"?i:null)}var I=Symbol.for("react.client.reference");function Ze(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===I?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case K:return"Fragment";case ne:return"Profiler";case q:return"StrictMode";case Ae:return"Suspense";case Re:return"SuspenseList";case A:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case k:return"Portal";case re:return i.displayName||"Context";case ee:return(i._context.displayName||"Context")+".Consumer";case Ee:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case N:return r=i.displayName||null,r!==null?r:Ze(i.type)||"Memo";case b:r=i._payload,i=i._init;try{return Ze(i(r))}catch{}}return null}var De=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},xe=[],Pe=-1;function M(i){return{current:i}}function H(i){0>Pe||(i.current=xe[Pe],xe[Pe]=null,Pe--)}function W(i,r){Pe++,xe[Pe]=i.current,i.current=r}var le=M(null),ge=M(null),_e=M(null),Me=M(null);function lt(i,r){switch(W(_e,r),W(ge,i),W(le,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?UT(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=UT(r),i=zT(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}H(le),W(le,i)}function Xe(){H(le),H(ge),H(_e)}function ai(i){i.memoizedState!==null&&W(Me,i);var r=le.current,o=zT(r,i.type);r!==o&&(W(ge,i),W(le,o))}function Hn(i){ge.current===i&&(H(le),H(ge)),Me.current===i&&(H(Me),Cu._currentValue=ce)}var Ri,Ja;function Ii(i){if(Ri===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);Ri=r&&r[1]||"",Ja=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ri+i+Ja}var Cl=!1;function Zr(i,r){if(!i||Cl)return"";Cl=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(Q){var G=Q}Reflect.construct(i,[],Z)}else{try{Z.call()}catch(Q){G=Q}i.call(Z.prototype)}}else{try{throw Error()}catch(Q){G=Q}(Z=i())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(Q){if(Q&&G&&typeof Q.stack=="string")return[Q.stack,G.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),v=m[0],w=m[1];if(v&&w){var O=v.split(`
`),F=w.split(`
`);for(f=u=0;u<O.length&&!O[u].includes("DetermineComponentFrameRoot");)u++;for(;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;if(u===O.length||f===F.length)for(u=O.length-1,f=F.length-1;1<=u&&0<=f&&O[u]!==F[f];)f--;for(;1<=u&&0<=f;u--,f--)if(O[u]!==F[f]){if(u!==1||f!==1)do if(u--,f--,0>f||O[u]!==F[f]){var $=`
`+O[u].replace(" at new "," at ");return i.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",i.displayName)),$}while(1<=u&&0<=f);break}}}finally{Cl=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?Ii(o):""}function bl(i,r){switch(i.tag){case 26:case 27:case 5:return Ii(i.type);case 16:return Ii("Lazy");case 13:return i.child!==r&&r!==null?Ii("Suspense Fallback"):Ii("Suspense");case 19:return Ii("SuspenseList");case 0:case 15:return Zr(i.type,!1);case 11:return Zr(i.type.render,!1);case 1:return Zr(i.type,!0);case 31:return Ii("Activity");default:return""}}function Al(i){try{var r="",o=null;do r+=bl(i,o),o=i,i=i.return;while(i);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var It=Object.prototype.hasOwnProperty,Bt=n.unstable_scheduleCallback,Ks=n.unstable_cancelCallback,em=n.unstable_shouldYield,Fc=n.unstable_requestPaint,yn=n.unstable_now,ea=n.unstable_getCurrentPriorityLevel,Rl=n.unstable_ImmediatePriority,Il=n.unstable_UserBlockingPriority,Qs=n.unstable_NormalPriority,tm=n.unstable_LowPriority,Hc=n.unstable_IdlePriority,qc=n.log,Gc=n.unstable_setDisableYieldValue,oi=null,tn=null;function qn(i){if(typeof qc=="function"&&Gc(i),tn&&typeof tn.setStrictMode=="function")try{tn.setStrictMode(oi,i)}catch{}}var wt=Math.clz32?Math.clz32:Kc,Yc=Math.log,Za=Math.LN2;function Kc(i){return i>>>=0,i===0?32:31-(Yc(i)/Za|0)|0}var Ni=256,ta=262144,Nt=4194304;function Oi(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Di(i,r,o){var u=i.pendingLanes;if(u===0)return 0;var f=0,m=i.suspendedLanes,v=i.pingedLanes;i=i.warmLanes;var w=u&134217727;return w!==0?(u=w&~m,u!==0?f=Oi(u):(v&=w,v!==0?f=Oi(v):o||(o=w&~i,o!==0&&(f=Oi(o))))):(w=u&~m,w!==0?f=Oi(w):v!==0?f=Oi(v):o||(o=u&~i,o!==0&&(f=Oi(o)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,o=r&-r,m>=o||m===32&&(o&4194048)!==0)?r:f}function li(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function nm(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qc(){var i=Nt;return Nt<<=1,(Nt&62914560)===0&&(Nt=4194304),i}function Mi(i){for(var r=[],o=0;31>o;o++)r.push(i);return r}function na(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function im(i,r,o,u,f,m){var v=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var w=i.entanglements,O=i.expirationTimes,F=i.hiddenUpdates;for(o=v&~o;0<o;){var $=31-wt(o),Z=1<<$;w[$]=0,O[$]=-1;var G=F[$];if(G!==null)for(F[$]=null,$=0;$<G.length;$++){var Q=G[$];Q!==null&&(Q.lane&=-536870913)}o&=~Z}u!==0&&ia(i,u,0),m!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=m&~(v&~r))}function ia(i,r,o){i.pendingLanes|=r,i.suspendedLanes&=~r;var u=31-wt(r);i.entangledLanes|=r,i.entanglements[u]=i.entanglements[u]|1073741824|o&261930}function Nl(i,r){var o=i.entangledLanes|=r;for(i=i.entanglements;o;){var u=31-wt(o),f=1<<u;f&r|i[u]&r&&(i[u]|=r),o&=~f}}function Ol(i,r){var o=r&-r;return o=(o&42)!==0?1:sa(o),(o&(i.suspendedLanes|r))!==0?0:o}function sa(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function cs(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Wc(){var i=ie.p;return i!==0?i:(i=window.event,i===void 0?32:lS(i.type))}function ui(i,r){var o=ie.p;try{return ie.p=i,r()}finally{ie.p=o}}var ci=Math.random().toString(36).slice(2),Ot="__reactFiber$"+ci,Kt="__reactProps$"+ci,xi="__reactContainer$"+ci,eo="__reactEvents$"+ci,sm="__reactListeners$"+ci,Xc="__reactHandles$"+ci,$c="__reactResources$"+ci,Pi="__reactMarker$"+ci;function to(i){delete i[Ot],delete i[Kt],delete i[eo],delete i[sm],delete i[Xc]}function ki(i){var r=i[Ot];if(r)return r;for(var o=i.parentNode;o;){if(r=o[xi]||o[Ot]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(i=YT(i);i!==null;){if(o=i[Ot])return o;i=YT(i)}return r}i=o,o=i.parentNode}return null}function Gn(i){if(i=i[Ot]||i[xi]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function xn(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function Vi(i){var r=i[$c];return r||(r=i[$c]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Dt(i){i[Pi]=!0}var Dl=new Set,Ml={};function Li(i,r){Ui(i,r),Ui(i+"Capture",r)}function Ui(i,r){for(Ml[i]=r,i=0;i<r.length;i++)Dl.add(r[i])}var xl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pl={},kl={};function Jc(i){return It.call(kl,i)?!0:It.call(Pl,i)?!1:xl.test(i)?kl[i]=!0:(Pl[i]=!0,!1)}function no(i,r,o){if(Jc(r))if(o===null)i.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+o)}}function Pn(i,r,o){if(o===null)i.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+o)}}function Mt(i,r,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(r,o,""+u)}}function Qt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ws(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Vl(i,r,o){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,m=u.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return f.call(this)},set:function(v){o=""+v,m.call(this,v)}}),Object.defineProperty(i,r,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function tt(i){if(!i._valueTracker){var r=Ws(i)?"checked":"value";i._valueTracker=Vl(i,r,""+i[r])}}function ra(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return i&&(u=Ws(i)?i.checked?"true":"false":i.value),i=u,i!==o?(r.setValue(i),!0):!1}function zi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var aa=/[\n"\\]/g;function Sn(i){return i.replace(aa,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function io(i,r,o,u,f,m,v,w){i.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?i.type=v:i.removeAttribute("type"),r!=null?v==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+Qt(r)):i.value!==""+Qt(r)&&(i.value=""+Qt(r)):v!=="submit"&&v!=="reset"||i.removeAttribute("value"),r!=null?Ll(i,v,Qt(r)):o!=null?Ll(i,v,Qt(o)):u!=null&&i.removeAttribute("value"),f==null&&m!=null&&(i.defaultChecked=!!m),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.name=""+Qt(w):i.removeAttribute("name")}function Zc(i,r,o,u,f,m,v,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(i.type=m),r!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){tt(i);return}o=o!=null?""+Qt(o):"",r=r!=null?""+Qt(r):o,w||r===i.value||(i.value=r),i.defaultValue=r}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=w?i.checked:!!u,i.defaultChecked=!!u,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.name=v),tt(i)}function Ll(i,r,o){r==="number"&&zi(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function Xs(i,r,o,u){if(i=i.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<i.length;o++)f=r.hasOwnProperty("$"+i[o].value),i[o].selected!==f&&(i[o].selected=f),f&&u&&(i[o].defaultSelected=!0)}else{for(o=""+Qt(o),r=null,f=0;f<i.length;f++){if(i[f].value===o){i[f].selected=!0,u&&(i[f].defaultSelected=!0);return}r!==null||i[f].disabled||(r=i[f])}r!==null&&(r.selected=!0)}}function eh(i,r,o){if(r!=null&&(r=""+Qt(r),r!==i.value&&(i.value=r),o==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=o!=null?""+Qt(o):""}function $s(i,r,o,u){if(r==null){if(u!=null){if(o!=null)throw Error(s(92));if(De(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),r=o}o=Qt(r),i.defaultValue=o,u=i.textContent,u===o&&u!==""&&u!==null&&(i.value=u),tt(i)}function wn(i,r){if(r){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=r;return}}i.textContent=r}var th=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ul(i,r,o){var u=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":u?i.setProperty(r,o):typeof o!="number"||o===0||th.has(r)?r==="float"?i.cssFloat=o:i[r]=(""+o).trim():i[r]=o+"px"}function zl(i,r,o){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var f in r)u=r[f],r.hasOwnProperty(f)&&o[f]!==u&&Ul(i,f,u)}else for(var m in r)r.hasOwnProperty(m)&&Ul(i,m,r[m])}function so(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Js=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ro(i){return Js.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function hi(){}var jl=null;function Yn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Zs=null,ji=null;function oa(i){var r=Gn(i);if(r&&(i=r.stateNode)){var o=i[Kt]||null;e:switch(i=r.stateNode,r.type){case"input":if(io(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Sn(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==i&&u.form===i.form){var f=u[Kt]||null;if(!f)throw Error(s(90));io(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)u=o[r],u.form===i.form&&ra(u)}break e;case"textarea":eh(i,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&Xs(i,!!o.multiple,r,!1)}}}var ao=!1;function er(i,r,o){if(ao)return i(r,o);ao=!0;try{var u=i(r);return u}finally{if(ao=!1,(Zs!==null||ji!==null)&&(Wh(),Zs&&(r=Zs,i=ji,ji=Zs=null,oa(r),i)))for(r=0;r<i.length;r++)oa(i[r])}}function fi(i,r){var o=i.stateNode;if(o===null)return null;var u=o[Kt]||null;if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(s(231,r,typeof o));return o}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),la=!1;if(Kn)try{var st={};Object.defineProperty(st,"passive",{get:function(){la=!0}}),window.addEventListener("test",st,st),window.removeEventListener("test",st,st)}catch{la=!1}var Bi=null,Bl=null,ua=null;function Fl(){if(ua)return ua;var i,r=Bl,o=r.length,u,f="value"in Bi?Bi.value:Bi.textContent,m=f.length;for(i=0;i<o&&r[i]===f[i];i++);var v=o-i;for(u=1;u<=v&&r[o-u]===f[m-u];u++);return ua=f.slice(i,1<u?1-u:void 0)}function ca(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function hs(){return!0}function di(){return!1}function nn(i){function r(o,u,f,m,v){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var w in i)i.hasOwnProperty(w)&&(o=i[w],this[w]=o?o(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?hs:di,this.isPropagationStopped=di,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=hs)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=hs)},persist:function(){},isPersistent:hs}),r}var fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fi=nn(fs),tr=E({},fs,{view:0,detail:0}),Hl=nn(tr),nr,oo,Hi,lo=E({},tr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ir,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Hi&&(Hi&&i.type==="mousemove"?(nr=i.screenX-Hi.screenX,oo=i.screenY-Hi.screenY):oo=nr=0,Hi=i),nr)},movementY:function(i){return"movementY"in i?i.movementY:oo}}),ql=nn(lo),ha=E({},lo,{dataTransfer:0}),ih=nn(ha),sh=E({},tr,{relatedTarget:0}),fa=nn(sh),Gl=E({},fs,{animationName:0,elapsedTime:0,pseudoElement:0}),rh=nn(Gl),uo=E({},fs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),ah=nn(uo),oh=E({},fs,{data:0}),qi=nn(oh),lh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ch={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hh(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=ch[i])?!!r[i]:!1}function ir(){return hh}var vn=E({},tr,{key:function(i){if(i.key){var r=lh[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=ca(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?uh[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ir,charCode:function(i){return i.type==="keypress"?ca(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ca(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),fh=nn(vn),dh=E({},lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ds=nn(dh),h=E({},tr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ir}),_=nn(h),T=E({},fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=nn(T),j=E({},lo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=nn(j),oe=E({},fs,{newState:0,oldState:0}),Ie=nn(oe),Ct=[9,13,27,32],$e=Kn&&"CompositionEvent"in window,gt=null;Kn&&"documentMode"in document&&(gt=document.documentMode);var Qn=Kn&&"TextEvent"in window&&!gt,Gi=Kn&&(!$e||gt&&8<gt&&11>=gt),mi=" ",pi=!1;function da(i,r){switch(i){case"keyup":return Ct.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function co(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ho=!1;function eI(i,r){switch(i){case"compositionend":return co(r);case"keypress":return r.which!==32?null:(pi=!0,mi);case"textInput":return i=r.data,i===mi&&pi?null:i;default:return null}}function tI(i,r){if(ho)return i==="compositionend"||!$e&&da(i,r)?(i=Fl(),ua=Bl=Bi=null,ho=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Gi&&r.locale!=="ko"?null:r.data;default:return null}}var nI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wy(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!nI[i.type]:r==="textarea"}function Xy(i,r,o,u){Zs?ji?ji.push(u):ji=[u]:Zs=u,r=nf(r,"onChange"),0<r.length&&(o=new Fi("onChange","change",null,o,u),i.push({event:o,listeners:r}))}var Yl=null,Kl=null;function iI(i){MT(i,0)}function mh(i){var r=xn(i);if(ra(r))return i}function $y(i,r){if(i==="change")return r}var Jy=!1;if(Kn){var rm;if(Kn){var am="oninput"in document;if(!am){var Zy=document.createElement("div");Zy.setAttribute("oninput","return;"),am=typeof Zy.oninput=="function"}rm=am}else rm=!1;Jy=rm&&(!document.documentMode||9<document.documentMode)}function ev(){Yl&&(Yl.detachEvent("onpropertychange",tv),Kl=Yl=null)}function tv(i){if(i.propertyName==="value"&&mh(Kl)){var r=[];Xy(r,Kl,i,Yn(i)),er(iI,r)}}function sI(i,r,o){i==="focusin"?(ev(),Yl=r,Kl=o,Yl.attachEvent("onpropertychange",tv)):i==="focusout"&&ev()}function rI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return mh(Kl)}function aI(i,r){if(i==="click")return mh(r)}function oI(i,r){if(i==="input"||i==="change")return mh(r)}function lI(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var kn=typeof Object.is=="function"?Object.is:lI;function Ql(i,r){if(kn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var o=Object.keys(i),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!It.call(r,f)||!kn(i[f],r[f]))return!1}return!0}function nv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function iv(i,r){var o=nv(i);i=0;for(var u;o;){if(o.nodeType===3){if(u=i+o.textContent.length,i<=r&&u>=r)return{node:o,offset:r-i};i=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=nv(o)}}function sv(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?sv(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function rv(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=zi(i.document);r instanceof i.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)i=r.contentWindow;else break;r=zi(i.document)}return r}function om(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var uI=Kn&&"documentMode"in document&&11>=document.documentMode,fo=null,lm=null,Wl=null,um=!1;function av(i,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;um||fo==null||fo!==zi(u)||(u=fo,"selectionStart"in u&&om(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Wl&&Ql(Wl,u)||(Wl=u,u=nf(lm,"onSelect"),0<u.length&&(r=new Fi("onSelect","select",null,r,o),i.push({event:r,listeners:u}),r.target=fo)))}function ma(i,r){var o={};return o[i.toLowerCase()]=r.toLowerCase(),o["Webkit"+i]="webkit"+r,o["Moz"+i]="moz"+r,o}var mo={animationend:ma("Animation","AnimationEnd"),animationiteration:ma("Animation","AnimationIteration"),animationstart:ma("Animation","AnimationStart"),transitionrun:ma("Transition","TransitionRun"),transitionstart:ma("Transition","TransitionStart"),transitioncancel:ma("Transition","TransitionCancel"),transitionend:ma("Transition","TransitionEnd")},cm={},ov={};Kn&&(ov=document.createElement("div").style,"AnimationEvent"in window||(delete mo.animationend.animation,delete mo.animationiteration.animation,delete mo.animationstart.animation),"TransitionEvent"in window||delete mo.transitionend.transition);function pa(i){if(cm[i])return cm[i];if(!mo[i])return i;var r=mo[i],o;for(o in r)if(r.hasOwnProperty(o)&&o in ov)return cm[i]=r[o];return i}var lv=pa("animationend"),uv=pa("animationiteration"),cv=pa("animationstart"),cI=pa("transitionrun"),hI=pa("transitionstart"),fI=pa("transitioncancel"),hv=pa("transitionend"),fv=new Map,hm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hm.push("scrollEnd");function gi(i,r){fv.set(i,r),Li(r,[i])}var ph=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Wn=[],po=0,fm=0;function gh(){for(var i=po,r=fm=po=0;r<i;){var o=Wn[r];Wn[r++]=null;var u=Wn[r];Wn[r++]=null;var f=Wn[r];Wn[r++]=null;var m=Wn[r];if(Wn[r++]=null,u!==null&&f!==null){var v=u.pending;v===null?f.next=f:(f.next=v.next,v.next=f),u.pending=f}m!==0&&dv(o,f,m)}}function _h(i,r,o,u){Wn[po++]=i,Wn[po++]=r,Wn[po++]=o,Wn[po++]=u,fm|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function dm(i,r,o,u){return _h(i,r,o,u),yh(i)}function ga(i,r){return _h(i,null,null,r),yh(i)}function dv(i,r,o){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=i.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(i=m.stateNode,i===null||i._visibility&1||(f=!0)),i=m,m=m.return;return i.tag===3?(m=i.stateNode,f&&r!==null&&(f=31-wt(o),i=m.hiddenUpdates,u=i[f],u===null?i[f]=[r]:u.push(r),r.lane=o|536870912),m):null}function yh(i){if(50<_u)throw _u=0,Sp=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var go={};function dI(i,r,o,u){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(i,r,o,u){return new dI(i,r,o,u)}function mm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ms(i,r){var o=i.alternate;return o===null?(o=Vn(i.tag,r,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=r,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,r=i.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function mv(i,r){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,r=o.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function vh(i,r,o,u,f,m){var v=0;if(u=i,typeof i=="function")mm(i)&&(v=1);else if(typeof i=="string")v=y1(i,o,le.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case A:return i=Vn(31,o,r,f),i.elementType=A,i.lanes=m,i;case K:return _a(o.children,f,m,r);case q:v=8,f|=24;break;case ne:return i=Vn(12,o,r,f|2),i.elementType=ne,i.lanes=m,i;case Ae:return i=Vn(13,o,r,f),i.elementType=Ae,i.lanes=m,i;case Re:return i=Vn(19,o,r,f),i.elementType=Re,i.lanes=m,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case re:v=10;break e;case ee:v=9;break e;case Ee:v=11;break e;case N:v=14;break e;case b:v=16,u=null;break e}v=29,o=Error(s(130,i===null?"null":typeof i,"")),u=null}return r=Vn(v,o,r,f),r.elementType=i,r.type=u,r.lanes=m,r}function _a(i,r,o,u){return i=Vn(7,i,u,r),i.lanes=o,i}function pm(i,r,o){return i=Vn(6,i,null,r),i.lanes=o,i}function pv(i){var r=Vn(18,null,null,0);return r.stateNode=i,r}function gm(i,r,o){return r=Vn(4,i.children!==null?i.children:[],i.key,r),r.lanes=o,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var gv=new WeakMap;function Xn(i,r){if(typeof i=="object"&&i!==null){var o=gv.get(i);return o!==void 0?o:(r={value:i,source:r,stack:Al(r)},gv.set(i,r),r)}return{value:i,source:r,stack:Al(r)}}var _o=[],yo=0,Eh=null,Xl=0,$n=[],Jn=0,sr=null,Yi=1,Ki="";function ps(i,r){_o[yo++]=Xl,_o[yo++]=Eh,Eh=i,Xl=r}function _v(i,r,o){$n[Jn++]=Yi,$n[Jn++]=Ki,$n[Jn++]=sr,sr=i;var u=Yi;i=Ki;var f=32-wt(u)-1;u&=~(1<<f),o+=1;var m=32-wt(r)+f;if(30<m){var v=f-f%5;m=(u&(1<<v)-1).toString(32),u>>=v,f-=v,Yi=1<<32-wt(r)+f|o<<f|u,Ki=m+i}else Yi=1<<m|o<<f|u,Ki=i}function _m(i){i.return!==null&&(ps(i,1),_v(i,1,0))}function ym(i){for(;i===Eh;)Eh=_o[--yo],_o[yo]=null,Xl=_o[--yo],_o[yo]=null;for(;i===sr;)sr=$n[--Jn],$n[Jn]=null,Ki=$n[--Jn],$n[Jn]=null,Yi=$n[--Jn],$n[Jn]=null}function yv(i,r){$n[Jn++]=Yi,$n[Jn++]=Ki,$n[Jn++]=sr,Yi=r.id,Ki=r.overflow,sr=i}var sn=null,ft=null,Ge=!1,rr=null,Zn=!1,vm=Error(s(519));function ar(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $l(Xn(r,i)),vm}function vv(i){var r=i.stateNode,o=i.type,u=i.memoizedProps;switch(r[Ot]=i,r[Kt]=u,o){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(o=0;o<vu.length;o++)Le(vu[o],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":Le("invalid",r),Zc(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Le("invalid",r);break;case"textarea":Le("invalid",r),$s(r,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||u.suppressHydrationWarning===!0||VT(r.textContent,o)?(u.popover!=null&&(Le("beforetoggle",r),Le("toggle",r)),u.onScroll!=null&&Le("scroll",r),u.onScrollEnd!=null&&Le("scrollend",r),u.onClick!=null&&(r.onclick=hi),r=!0):r=!1,r||ar(i,!0)}function Ev(i){for(sn=i.return;sn;)switch(sn.tag){case 5:case 31:case 13:Zn=!1;return;case 27:case 3:Zn=!0;return;default:sn=sn.return}}function vo(i){if(i!==sn)return!1;if(!Ge)return Ev(i),Ge=!0,!1;var r=i.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||Lp(i.type,i.memoizedProps)),o=!o),o&&ft&&ar(i),Ev(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));ft=GT(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));ft=GT(i)}else r===27?(r=ft,Er(i.type)?(i=Fp,Fp=null,ft=i):ft=r):ft=sn?ti(i.stateNode.nextSibling):null;return!0}function ya(){ft=sn=null,Ge=!1}function Em(){var i=rr;return i!==null&&(Rn===null?Rn=i:Rn.push.apply(Rn,i),rr=null),i}function $l(i){rr===null?rr=[i]:rr.push(i)}var Tm=M(null),va=null,gs=null;function or(i,r,o){W(Tm,r._currentValue),r._currentValue=o}function _s(i){i._currentValue=Tm.current,H(Tm)}function Sm(i,r,o){for(;i!==null;){var u=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),i===o)break;i=i.return}}function wm(i,r,o,u){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var m=f.dependencies;if(m!==null){var v=f.child;m=m.firstContext;e:for(;m!==null;){var w=m;m=f;for(var O=0;O<r.length;O++)if(w.context===r[O]){m.lanes|=o,w=m.alternate,w!==null&&(w.lanes|=o),Sm(m.return,o,i),u||(v=null);break e}m=w.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(s(341));v.lanes|=o,m=v.alternate,m!==null&&(m.lanes|=o),Sm(v,o,i),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===i){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function Eo(i,r,o,u){i=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var w=f.type;kn(f.pendingProps.value,v.value)||(i!==null?i.push(w):i=[w])}}else if(f===Me.current){if(v=f.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push(Cu):i=[Cu])}f=f.return}i!==null&&wm(r,i,o,u),r.flags|=262144}function Th(i){for(i=i.firstContext;i!==null;){if(!kn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ea(i){va=i,gs=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function rn(i){return Tv(va,i)}function Sh(i,r){return va===null&&Ea(i),Tv(i,r)}function Tv(i,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},gs===null){if(i===null)throw Error(s(308));gs=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else gs=gs.next=r;return o}var mI=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(o,u){i.push(u)}};this.abort=function(){r.aborted=!0,i.forEach(function(o){return o()})}},pI=n.unstable_scheduleCallback,gI=n.unstable_NormalPriority,xt={$$typeof:re,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Cm(){return{controller:new mI,data:new Map,refCount:0}}function Jl(i){i.refCount--,i.refCount===0&&pI(gI,function(){i.controller.abort()})}var Zl=null,bm=0,To=0,So=null;function _I(i,r){if(Zl===null){var o=Zl=[];bm=0,To=Ip(),So={status:"pending",value:void 0,then:function(u){o.push(u)}}}return bm++,r.then(Sv,Sv),r}function Sv(){if(--bm===0&&Zl!==null){So!==null&&(So.status="fulfilled");var i=Zl;Zl=null,To=0,So=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function yI(i,r){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return i.then(function(){u.status="fulfilled",u.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var wv=X.S;X.S=function(i,r){aT=yn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&_I(i,r),wv!==null&&wv(i,r)};var Ta=M(null);function Am(){var i=Ta.current;return i!==null?i:ut.pooledCache}function wh(i,r){r===null?W(Ta,Ta.current):W(Ta,r.pool)}function Cv(){var i=Am();return i===null?null:{parent:xt._currentValue,pool:i}}var wo=Error(s(460)),Rm=Error(s(474)),Ch=Error(s(542)),bh={then:function(){}};function bv(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Av(i,r,o){switch(o=i[o],o===void 0?i.push(r):o!==r&&(r.then(hi,hi),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Iv(i),i;default:if(typeof r.status=="string")r.then(hi,hi);else{if(i=ut,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(u){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=u}},function(u){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Iv(i),i}throw wa=r,wo}}function Sa(i){try{var r=i._init;return r(i._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(wa=o,wo):o}}var wa=null;function Rv(){if(wa===null)throw Error(s(459));var i=wa;return wa=null,i}function Iv(i){if(i===wo||i===Ch)throw Error(s(483))}var Co=null,eu=0;function Ah(i){var r=eu;return eu+=1,Co===null&&(Co=[]),Av(Co,i,r)}function tu(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function Rh(i,r){throw r.$$typeof===S?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Nv(i){function r(L,x){if(i){var B=L.deletions;B===null?(L.deletions=[x],L.flags|=16):B.push(x)}}function o(L,x){if(!i)return null;for(;x!==null;)r(L,x),x=x.sibling;return null}function u(L){for(var x=new Map;L!==null;)L.key!==null?x.set(L.key,L):x.set(L.index,L),L=L.sibling;return x}function f(L,x){return L=ms(L,x),L.index=0,L.sibling=null,L}function m(L,x,B){return L.index=B,i?(B=L.alternate,B!==null?(B=B.index,B<x?(L.flags|=67108866,x):B):(L.flags|=67108866,x)):(L.flags|=1048576,x)}function v(L){return i&&L.alternate===null&&(L.flags|=67108866),L}function w(L,x,B,J){return x===null||x.tag!==6?(x=pm(B,L.mode,J),x.return=L,x):(x=f(x,B),x.return=L,x)}function O(L,x,B,J){var pe=B.type;return pe===K?$(L,x,B.props.children,J,B.key):x!==null&&(x.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===b&&Sa(pe)===x.type)?(x=f(x,B.props),tu(x,B),x.return=L,x):(x=vh(B.type,B.key,B.props,null,L.mode,J),tu(x,B),x.return=L,x)}function F(L,x,B,J){return x===null||x.tag!==4||x.stateNode.containerInfo!==B.containerInfo||x.stateNode.implementation!==B.implementation?(x=gm(B,L.mode,J),x.return=L,x):(x=f(x,B.children||[]),x.return=L,x)}function $(L,x,B,J,pe){return x===null||x.tag!==7?(x=_a(B,L.mode,J,pe),x.return=L,x):(x=f(x,B),x.return=L,x)}function Z(L,x,B){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=pm(""+x,L.mode,B),x.return=L,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case R:return B=vh(x.type,x.key,x.props,null,L.mode,B),tu(B,x),B.return=L,B;case k:return x=gm(x,L.mode,B),x.return=L,x;case b:return x=Sa(x),Z(L,x,B)}if(De(x)||U(x))return x=_a(x,L.mode,B,null),x.return=L,x;if(typeof x.then=="function")return Z(L,Ah(x),B);if(x.$$typeof===re)return Z(L,Sh(L,x),B);Rh(L,x)}return null}function G(L,x,B,J){var pe=x!==null?x.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return pe!==null?null:w(L,x,""+B,J);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case R:return B.key===pe?O(L,x,B,J):null;case k:return B.key===pe?F(L,x,B,J):null;case b:return B=Sa(B),G(L,x,B,J)}if(De(B)||U(B))return pe!==null?null:$(L,x,B,J,null);if(typeof B.then=="function")return G(L,x,Ah(B),J);if(B.$$typeof===re)return G(L,x,Sh(L,B),J);Rh(L,B)}return null}function Q(L,x,B,J,pe){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return L=L.get(B)||null,w(x,L,""+J,pe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case R:return L=L.get(J.key===null?B:J.key)||null,O(x,L,J,pe);case k:return L=L.get(J.key===null?B:J.key)||null,F(x,L,J,pe);case b:return J=Sa(J),Q(L,x,B,J,pe)}if(De(J)||U(J))return L=L.get(B)||null,$(x,L,J,pe,null);if(typeof J.then=="function")return Q(L,x,B,Ah(J),pe);if(J.$$typeof===re)return Q(L,x,B,Sh(x,J),pe);Rh(x,J)}return null}function fe(L,x,B,J){for(var pe=null,Ke=null,de=x,Oe=x=0,Be=null;de!==null&&Oe<B.length;Oe++){de.index>Oe?(Be=de,de=null):Be=de.sibling;var Qe=G(L,de,B[Oe],J);if(Qe===null){de===null&&(de=Be);break}i&&de&&Qe.alternate===null&&r(L,de),x=m(Qe,x,Oe),Ke===null?pe=Qe:Ke.sibling=Qe,Ke=Qe,de=Be}if(Oe===B.length)return o(L,de),Ge&&ps(L,Oe),pe;if(de===null){for(;Oe<B.length;Oe++)de=Z(L,B[Oe],J),de!==null&&(x=m(de,x,Oe),Ke===null?pe=de:Ke.sibling=de,Ke=de);return Ge&&ps(L,Oe),pe}for(de=u(de);Oe<B.length;Oe++)Be=Q(de,L,Oe,B[Oe],J),Be!==null&&(i&&Be.alternate!==null&&de.delete(Be.key===null?Oe:Be.key),x=m(Be,x,Oe),Ke===null?pe=Be:Ke.sibling=Be,Ke=Be);return i&&de.forEach(function(br){return r(L,br)}),Ge&&ps(L,Oe),pe}function ve(L,x,B,J){if(B==null)throw Error(s(151));for(var pe=null,Ke=null,de=x,Oe=x=0,Be=null,Qe=B.next();de!==null&&!Qe.done;Oe++,Qe=B.next()){de.index>Oe?(Be=de,de=null):Be=de.sibling;var br=G(L,de,Qe.value,J);if(br===null){de===null&&(de=Be);break}i&&de&&br.alternate===null&&r(L,de),x=m(br,x,Oe),Ke===null?pe=br:Ke.sibling=br,Ke=br,de=Be}if(Qe.done)return o(L,de),Ge&&ps(L,Oe),pe;if(de===null){for(;!Qe.done;Oe++,Qe=B.next())Qe=Z(L,Qe.value,J),Qe!==null&&(x=m(Qe,x,Oe),Ke===null?pe=Qe:Ke.sibling=Qe,Ke=Qe);return Ge&&ps(L,Oe),pe}for(de=u(de);!Qe.done;Oe++,Qe=B.next())Qe=Q(de,L,Oe,Qe.value,J),Qe!==null&&(i&&Qe.alternate!==null&&de.delete(Qe.key===null?Oe:Qe.key),x=m(Qe,x,Oe),Ke===null?pe=Qe:Ke.sibling=Qe,Ke=Qe);return i&&de.forEach(function(N1){return r(L,N1)}),Ge&&ps(L,Oe),pe}function ot(L,x,B,J){if(typeof B=="object"&&B!==null&&B.type===K&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case R:e:{for(var pe=B.key;x!==null;){if(x.key===pe){if(pe=B.type,pe===K){if(x.tag===7){o(L,x.sibling),J=f(x,B.props.children),J.return=L,L=J;break e}}else if(x.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===b&&Sa(pe)===x.type){o(L,x.sibling),J=f(x,B.props),tu(J,B),J.return=L,L=J;break e}o(L,x);break}else r(L,x);x=x.sibling}B.type===K?(J=_a(B.props.children,L.mode,J,B.key),J.return=L,L=J):(J=vh(B.type,B.key,B.props,null,L.mode,J),tu(J,B),J.return=L,L=J)}return v(L);case k:e:{for(pe=B.key;x!==null;){if(x.key===pe)if(x.tag===4&&x.stateNode.containerInfo===B.containerInfo&&x.stateNode.implementation===B.implementation){o(L,x.sibling),J=f(x,B.children||[]),J.return=L,L=J;break e}else{o(L,x);break}else r(L,x);x=x.sibling}J=gm(B,L.mode,J),J.return=L,L=J}return v(L);case b:return B=Sa(B),ot(L,x,B,J)}if(De(B))return fe(L,x,B,J);if(U(B)){if(pe=U(B),typeof pe!="function")throw Error(s(150));return B=pe.call(B),ve(L,x,B,J)}if(typeof B.then=="function")return ot(L,x,Ah(B),J);if(B.$$typeof===re)return ot(L,x,Sh(L,B),J);Rh(L,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,x!==null&&x.tag===6?(o(L,x.sibling),J=f(x,B),J.return=L,L=J):(o(L,x),J=pm(B,L.mode,J),J.return=L,L=J),v(L)):o(L,x)}return function(L,x,B,J){try{eu=0;var pe=ot(L,x,B,J);return Co=null,pe}catch(de){if(de===wo||de===Ch)throw de;var Ke=Vn(29,de,null,L.mode);return Ke.lanes=J,Ke.return=L,Ke}finally{}}}var Ca=Nv(!0),Ov=Nv(!1),lr=!1;function Im(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nm(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ur(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function cr(i,r,o){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Je&2)!==0){var f=u.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),u.pending=r,r=yh(i),dv(i,null,o),r}return _h(i,u,r,o),yh(i)}function nu(i,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var u=r.lanes;u&=i.pendingLanes,o|=u,r.lanes=o,Nl(i,o)}}function Om(i,r){var o=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=v:m=m.next=v,o=o.next}while(o!==null);m===null?f=m=r:m=m.next=r}else f=m=r;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=r:i.next=r,o.lastBaseUpdate=r}var Dm=!1;function iu(){if(Dm){var i=So;if(i!==null)throw i}}function su(i,r,o,u){Dm=!1;var f=i.updateQueue;lr=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var O=w,F=O.next;O.next=null,v===null?m=F:v.next=F,v=O;var $=i.alternate;$!==null&&($=$.updateQueue,w=$.lastBaseUpdate,w!==v&&(w===null?$.firstBaseUpdate=F:w.next=F,$.lastBaseUpdate=O))}if(m!==null){var Z=f.baseState;v=0,$=F=O=null,w=m;do{var G=w.lane&-536870913,Q=G!==w.lane;if(Q?(je&G)===G:(u&G)===G){G!==0&&G===To&&(Dm=!0),$!==null&&($=$.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var fe=i,ve=w;G=r;var ot=o;switch(ve.tag){case 1:if(fe=ve.payload,typeof fe=="function"){Z=fe.call(ot,Z,G);break e}Z=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=ve.payload,G=typeof fe=="function"?fe.call(ot,Z,G):fe,G==null)break e;Z=E({},Z,G);break e;case 2:lr=!0}}G=w.callback,G!==null&&(i.flags|=64,Q&&(i.flags|=8192),Q=f.callbacks,Q===null?f.callbacks=[G]:Q.push(G))}else Q={lane:G,tag:w.tag,payload:w.payload,callback:w.callback,next:null},$===null?(F=$=Q,O=Z):$=$.next=Q,v|=G;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;Q=w,w=Q.next,Q.next=null,f.lastBaseUpdate=Q,f.shared.pending=null}}while(!0);$===null&&(O=Z),f.baseState=O,f.firstBaseUpdate=F,f.lastBaseUpdate=$,m===null&&(f.shared.lanes=0),pr|=v,i.lanes=v,i.memoizedState=Z}}function Dv(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function Mv(i,r){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)Dv(o[i],r)}var bo=M(null),Ih=M(0);function xv(i,r){i=As,W(Ih,i),W(bo,r),As=i|r.baseLanes}function Mm(){W(Ih,As),W(bo,bo.current)}function xm(){As=Ih.current,H(bo),H(Ih)}var Ln=M(null),ei=null;function hr(i){var r=i.alternate;W(bt,bt.current&1),W(Ln,i),ei===null&&(r===null||bo.current!==null||r.memoizedState!==null)&&(ei=i)}function Pm(i){W(bt,bt.current),W(Ln,i),ei===null&&(ei=i)}function Pv(i){i.tag===22?(W(bt,bt.current),W(Ln,i),ei===null&&(ei=i)):fr()}function fr(){W(bt,bt.current),W(Ln,Ln.current)}function Un(i){H(Ln),ei===i&&(ei=null),H(bt)}var bt=M(0);function Nh(i){for(var r=i;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||jp(o)||Bp(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ys=0,Ne=null,rt=null,Pt=null,Oh=!1,Ao=!1,ba=!1,Dh=0,ru=0,Ro=null,vI=0;function Et(){throw Error(s(321))}function km(i,r){if(r===null)return!1;for(var o=0;o<r.length&&o<i.length;o++)if(!kn(i[o],r[o]))return!1;return!0}function Vm(i,r,o,u,f,m){return ys=m,Ne=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,X.H=i===null||i.memoizedState===null?_E:$m,ba=!1,m=o(u,f),ba=!1,Ao&&(m=Vv(r,o,u,f)),kv(i),m}function kv(i){X.H=lu;var r=rt!==null&&rt.next!==null;if(ys=0,Pt=rt=Ne=null,Oh=!1,ru=0,Ro=null,r)throw Error(s(300));i===null||kt||(i=i.dependencies,i!==null&&Th(i)&&(kt=!0))}function Vv(i,r,o,u){Ne=i;var f=0;do{if(Ao&&(Ro=null),ru=0,Ao=!1,25<=f)throw Error(s(301));if(f+=1,Pt=rt=null,i.updateQueue!=null){var m=i.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}X.H=yE,m=r(o,u)}while(Ao);return m}function EI(){var i=X.H,r=i.useState()[0];return r=typeof r.then=="function"?au(r):r,i=i.useState()[0],(rt!==null?rt.memoizedState:null)!==i&&(Ne.flags|=1024),r}function Lm(){var i=Dh!==0;return Dh=0,i}function Um(i,r,o){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~o}function zm(i){if(Oh){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Oh=!1}ys=0,Pt=rt=Ne=null,Ao=!1,ru=Dh=0,Ro=null}function En(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?Ne.memoizedState=Pt=i:Pt=Pt.next=i,Pt}function At(){if(rt===null){var i=Ne.alternate;i=i!==null?i.memoizedState:null}else i=rt.next;var r=Pt===null?Ne.memoizedState:Pt.next;if(r!==null)Pt=r,rt=i;else{if(i===null)throw Ne.alternate===null?Error(s(467)):Error(s(310));rt=i,i={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},Pt===null?Ne.memoizedState=Pt=i:Pt=Pt.next=i}return Pt}function Mh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function au(i){var r=ru;return ru+=1,Ro===null&&(Ro=[]),i=Av(Ro,i,r),r=Ne,(Pt===null?r.memoizedState:Pt.next)===null&&(r=r.alternate,X.H=r===null||r.memoizedState===null?_E:$m),i}function xh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return au(i);if(i.$$typeof===re)return rn(i)}throw Error(s(438,String(i)))}function jm(i){var r=null,o=Ne.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var u=Ne.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=Mh(),Ne.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(i),u=0;u<i;u++)o[u]=P;return r.index++,o}function vs(i,r){return typeof r=="function"?r(i):r}function Ph(i){var r=At();return Bm(r,rt,i)}function Bm(i,r,o){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var f=i.baseQueue,m=u.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}r.baseQueue=f=m,u.pending=null}if(m=i.baseState,f===null)i.memoizedState=m;else{r=f.next;var w=v=null,O=null,F=r,$=!1;do{var Z=F.lane&-536870913;if(Z!==F.lane?(je&Z)===Z:(ys&Z)===Z){var G=F.revertLane;if(G===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),Z===To&&($=!0);else if((ys&G)===G){F=F.next,G===To&&($=!0);continue}else Z={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},O===null?(w=O=Z,v=m):O=O.next=Z,Ne.lanes|=G,pr|=G;Z=F.action,ba&&o(m,Z),m=F.hasEagerState?F.eagerState:o(m,Z)}else G={lane:Z,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},O===null?(w=O=G,v=m):O=O.next=G,Ne.lanes|=Z,pr|=Z;F=F.next}while(F!==null&&F!==r);if(O===null?v=m:O.next=w,!kn(m,i.memoizedState)&&(kt=!0,$&&(o=So,o!==null)))throw o;i.memoizedState=m,i.baseState=v,i.baseQueue=O,u.lastRenderedState=m}return f===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function Fm(i){var r=At(),o=r.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=i;var u=o.dispatch,f=o.pending,m=r.memoizedState;if(f!==null){o.pending=null;var v=f=f.next;do m=i(m,v.action),v=v.next;while(v!==f);kn(m,r.memoizedState)||(kt=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),o.lastRenderedState=m}return[m,u]}function Lv(i,r,o){var u=Ne,f=At(),m=Ge;if(m){if(o===void 0)throw Error(s(407));o=o()}else o=r();var v=!kn((rt||f).memoizedState,o);if(v&&(f.memoizedState=o,kt=!0),f=f.queue,Gm(jv.bind(null,u,f,i),[i]),f.getSnapshot!==r||v||Pt!==null&&Pt.memoizedState.tag&1){if(u.flags|=2048,Io(9,{destroy:void 0},zv.bind(null,u,f,o,r),null),ut===null)throw Error(s(349));m||(ys&127)!==0||Uv(u,r,o)}return o}function Uv(i,r,o){i.flags|=16384,i={getSnapshot:r,value:o},r=Ne.updateQueue,r===null?(r=Mh(),Ne.updateQueue=r,r.stores=[i]):(o=r.stores,o===null?r.stores=[i]:o.push(i))}function zv(i,r,o,u){r.value=o,r.getSnapshot=u,Bv(r)&&Fv(i)}function jv(i,r,o){return o(function(){Bv(r)&&Fv(i)})}function Bv(i){var r=i.getSnapshot;i=i.value;try{var o=r();return!kn(i,o)}catch{return!0}}function Fv(i){var r=ga(i,2);r!==null&&In(r,i,2)}function Hm(i){var r=En();if(typeof i=="function"){var o=i;if(i=o(),ba){qn(!0);try{o()}finally{qn(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:i},r}function Hv(i,r,o,u){return i.baseState=o,Bm(i,rt,typeof u=="function"?u:vs)}function TI(i,r,o,u,f){if(Lh(i))throw Error(s(485));if(i=r.action,i!==null){var m={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};X.T!==null?o(!0):m.isTransition=!1,u(m),o=r.pending,o===null?(m.next=r.pending=m,qv(r,m)):(m.next=o.next,r.pending=o.next=m)}}function qv(i,r){var o=r.action,u=r.payload,f=i.state;if(r.isTransition){var m=X.T,v={};X.T=v;try{var w=o(f,u),O=X.S;O!==null&&O(v,w),Gv(i,r,w)}catch(F){qm(i,r,F)}finally{m!==null&&v.types!==null&&(m.types=v.types),X.T=m}}else try{m=o(f,u),Gv(i,r,m)}catch(F){qm(i,r,F)}}function Gv(i,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Yv(i,r,u)},function(u){return qm(i,r,u)}):Yv(i,r,o)}function Yv(i,r,o){r.status="fulfilled",r.value=o,Kv(r),i.state=o,r=i.pending,r!==null&&(o=r.next,o===r?i.pending=null:(o=o.next,r.next=o,qv(i,o)))}function qm(i,r,o){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=o,Kv(r),r=r.next;while(r!==u)}i.action=null}function Kv(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function Qv(i,r){return r}function Wv(i,r){if(Ge){var o=ut.formState;if(o!==null){e:{var u=Ne;if(Ge){if(ft){t:{for(var f=ft,m=Zn;f.nodeType!==8;){if(!m){f=null;break t}if(f=ti(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){ft=ti(f.nextSibling),u=f.data==="F!";break e}}ar(u)}u=!1}u&&(r=o[0])}}return o=En(),o.memoizedState=o.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qv,lastRenderedState:r},o.queue=u,o=mE.bind(null,Ne,u),u.dispatch=o,u=Hm(!1),m=Xm.bind(null,Ne,!1,u.queue),u=En(),f={state:r,dispatch:null,action:i,pending:null},u.queue=f,o=TI.bind(null,Ne,f,m,o),f.dispatch=o,u.memoizedState=i,[r,o,!1]}function Xv(i){var r=At();return $v(r,rt,i)}function $v(i,r,o){if(r=Bm(i,r,Qv)[0],i=Ph(vs)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=au(r)}catch(v){throw v===wo?Ch:v}else u=r;r=At();var f=r.queue,m=f.dispatch;return o!==r.memoizedState&&(Ne.flags|=2048,Io(9,{destroy:void 0},SI.bind(null,f,o),null)),[u,m,i]}function SI(i,r){i.action=r}function Jv(i){var r=At(),o=rt;if(o!==null)return $v(r,o,i);At(),r=r.memoizedState,o=At();var u=o.queue.dispatch;return o.memoizedState=i,[r,u,!1]}function Io(i,r,o,u){return i={tag:i,create:o,deps:u,inst:r,next:null},r=Ne.updateQueue,r===null&&(r=Mh(),Ne.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=i.next=i:(u=o.next,o.next=i,i.next=u,r.lastEffect=i),i}function Zv(){return At().memoizedState}function kh(i,r,o,u){var f=En();Ne.flags|=i,f.memoizedState=Io(1|r,{destroy:void 0},o,u===void 0?null:u)}function Vh(i,r,o,u){var f=At();u=u===void 0?null:u;var m=f.memoizedState.inst;rt!==null&&u!==null&&km(u,rt.memoizedState.deps)?f.memoizedState=Io(r,m,o,u):(Ne.flags|=i,f.memoizedState=Io(1|r,m,o,u))}function eE(i,r){kh(8390656,8,i,r)}function Gm(i,r){Vh(2048,8,i,r)}function wI(i){Ne.flags|=4;var r=Ne.updateQueue;if(r===null)r=Mh(),Ne.updateQueue=r,r.events=[i];else{var o=r.events;o===null?r.events=[i]:o.push(i)}}function tE(i){var r=At().memoizedState;return wI({ref:r,nextImpl:i}),function(){if((Je&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function nE(i,r){return Vh(4,2,i,r)}function iE(i,r){return Vh(4,4,i,r)}function sE(i,r){if(typeof r=="function"){i=i();var o=r(i);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function rE(i,r,o){o=o!=null?o.concat([i]):null,Vh(4,4,sE.bind(null,r,i),o)}function Ym(){}function aE(i,r){var o=At();r=r===void 0?null:r;var u=o.memoizedState;return r!==null&&km(r,u[1])?u[0]:(o.memoizedState=[i,r],i)}function oE(i,r){var o=At();r=r===void 0?null:r;var u=o.memoizedState;if(r!==null&&km(r,u[1]))return u[0];if(u=i(),ba){qn(!0);try{i()}finally{qn(!1)}}return o.memoizedState=[u,r],u}function Km(i,r,o){return o===void 0||(ys&1073741824)!==0&&(je&261930)===0?i.memoizedState=r:(i.memoizedState=o,i=lT(),Ne.lanes|=i,pr|=i,o)}function lE(i,r,o,u){return kn(o,r)?o:bo.current!==null?(i=Km(i,o,u),kn(i,r)||(kt=!0),i):(ys&42)===0||(ys&1073741824)!==0&&(je&261930)===0?(kt=!0,i.memoizedState=o):(i=lT(),Ne.lanes|=i,pr|=i,r)}function uE(i,r,o,u,f){var m=ie.p;ie.p=m!==0&&8>m?m:8;var v=X.T,w={};X.T=w,Xm(i,!1,r,o);try{var O=f(),F=X.S;if(F!==null&&F(w,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var $=yI(O,u);ou(i,r,$,Bn(i))}else ou(i,r,u,Bn(i))}catch(Z){ou(i,r,{then:function(){},status:"rejected",reason:Z},Bn())}finally{ie.p=m,v!==null&&w.types!==null&&(v.types=w.types),X.T=v}}function CI(){}function Qm(i,r,o,u){if(i.tag!==5)throw Error(s(476));var f=cE(i).queue;uE(i,f,r,ce,o===null?CI:function(){return hE(i),o(u)})}function cE(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:ce},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:o},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function hE(i){var r=cE(i);r.next===null&&(r=i.alternate.memoizedState),ou(i,r.next.queue,{},Bn())}function Wm(){return rn(Cu)}function fE(){return At().memoizedState}function dE(){return At().memoizedState}function bI(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var o=Bn();i=ur(o);var u=cr(r,i,o);u!==null&&(In(u,r,o),nu(u,r,o)),r={cache:Cm()},i.payload=r;return}r=r.return}}function AI(i,r,o){var u=Bn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Lh(i)?pE(r,o):(o=dm(i,r,o,u),o!==null&&(In(o,i,u),gE(o,r,u)))}function mE(i,r,o){var u=Bn();ou(i,r,o,u)}function ou(i,r,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Lh(i))pE(r,f);else{var m=i.alternate;if(i.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var v=r.lastRenderedState,w=m(v,o);if(f.hasEagerState=!0,f.eagerState=w,kn(w,v))return _h(i,r,f,0),ut===null&&gh(),!1}catch{}finally{}if(o=dm(i,r,f,u),o!==null)return In(o,i,u),gE(o,r,u),!0}return!1}function Xm(i,r,o,u){if(u={lane:2,revertLane:Ip(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Lh(i)){if(r)throw Error(s(479))}else r=dm(i,o,u,2),r!==null&&In(r,i,2)}function Lh(i){var r=i.alternate;return i===Ne||r!==null&&r===Ne}function pE(i,r){Ao=Oh=!0;var o=i.pending;o===null?r.next=r:(r.next=o.next,o.next=r),i.pending=r}function gE(i,r,o){if((o&4194048)!==0){var u=r.lanes;u&=i.pendingLanes,o|=u,r.lanes=o,Nl(i,o)}}var lu={readContext:rn,use:xh,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useLayoutEffect:Et,useInsertionEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useSyncExternalStore:Et,useId:Et,useHostTransitionStatus:Et,useFormState:Et,useActionState:Et,useOptimistic:Et,useMemoCache:Et,useCacheRefresh:Et};lu.useEffectEvent=Et;var _E={readContext:rn,use:xh,useCallback:function(i,r){return En().memoizedState=[i,r===void 0?null:r],i},useContext:rn,useEffect:eE,useImperativeHandle:function(i,r,o){o=o!=null?o.concat([i]):null,kh(4194308,4,sE.bind(null,r,i),o)},useLayoutEffect:function(i,r){return kh(4194308,4,i,r)},useInsertionEffect:function(i,r){kh(4,2,i,r)},useMemo:function(i,r){var o=En();r=r===void 0?null:r;var u=i();if(ba){qn(!0);try{i()}finally{qn(!1)}}return o.memoizedState=[u,r],u},useReducer:function(i,r,o){var u=En();if(o!==void 0){var f=o(r);if(ba){qn(!0);try{o(r)}finally{qn(!1)}}}else f=r;return u.memoizedState=u.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},u.queue=i,i=i.dispatch=AI.bind(null,Ne,i),[u.memoizedState,i]},useRef:function(i){var r=En();return i={current:i},r.memoizedState=i},useState:function(i){i=Hm(i);var r=i.queue,o=mE.bind(null,Ne,r);return r.dispatch=o,[i.memoizedState,o]},useDebugValue:Ym,useDeferredValue:function(i,r){var o=En();return Km(o,i,r)},useTransition:function(){var i=Hm(!1);return i=uE.bind(null,Ne,i.queue,!0,!1),En().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,o){var u=Ne,f=En();if(Ge){if(o===void 0)throw Error(s(407));o=o()}else{if(o=r(),ut===null)throw Error(s(349));(je&127)!==0||Uv(u,r,o)}f.memoizedState=o;var m={value:o,getSnapshot:r};return f.queue=m,eE(jv.bind(null,u,m,i),[i]),u.flags|=2048,Io(9,{destroy:void 0},zv.bind(null,u,m,o,r),null),o},useId:function(){var i=En(),r=ut.identifierPrefix;if(Ge){var o=Ki,u=Yi;o=(u&~(1<<32-wt(u)-1)).toString(32)+o,r="_"+r+"R_"+o,o=Dh++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=vI++,r="_"+r+"r_"+o.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:Wm,useFormState:Wv,useActionState:Wv,useOptimistic:function(i){var r=En();r.memoizedState=r.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Xm.bind(null,Ne,!0,o),o.dispatch=r,[i,r]},useMemoCache:jm,useCacheRefresh:function(){return En().memoizedState=bI.bind(null,Ne)},useEffectEvent:function(i){var r=En(),o={impl:i};return r.memoizedState=o,function(){if((Je&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},$m={readContext:rn,use:xh,useCallback:aE,useContext:rn,useEffect:Gm,useImperativeHandle:rE,useInsertionEffect:nE,useLayoutEffect:iE,useMemo:oE,useReducer:Ph,useRef:Zv,useState:function(){return Ph(vs)},useDebugValue:Ym,useDeferredValue:function(i,r){var o=At();return lE(o,rt.memoizedState,i,r)},useTransition:function(){var i=Ph(vs)[0],r=At().memoizedState;return[typeof i=="boolean"?i:au(i),r]},useSyncExternalStore:Lv,useId:fE,useHostTransitionStatus:Wm,useFormState:Xv,useActionState:Xv,useOptimistic:function(i,r){var o=At();return Hv(o,rt,i,r)},useMemoCache:jm,useCacheRefresh:dE};$m.useEffectEvent=tE;var yE={readContext:rn,use:xh,useCallback:aE,useContext:rn,useEffect:Gm,useImperativeHandle:rE,useInsertionEffect:nE,useLayoutEffect:iE,useMemo:oE,useReducer:Fm,useRef:Zv,useState:function(){return Fm(vs)},useDebugValue:Ym,useDeferredValue:function(i,r){var o=At();return rt===null?Km(o,i,r):lE(o,rt.memoizedState,i,r)},useTransition:function(){var i=Fm(vs)[0],r=At().memoizedState;return[typeof i=="boolean"?i:au(i),r]},useSyncExternalStore:Lv,useId:fE,useHostTransitionStatus:Wm,useFormState:Jv,useActionState:Jv,useOptimistic:function(i,r){var o=At();return rt!==null?Hv(o,rt,i,r):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:jm,useCacheRefresh:dE};yE.useEffectEvent=tE;function Jm(i,r,o,u){r=i.memoizedState,o=o(u,r),o=o==null?r:E({},r,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var Zm={enqueueSetState:function(i,r,o){i=i._reactInternals;var u=Bn(),f=ur(u);f.payload=r,o!=null&&(f.callback=o),r=cr(i,f,u),r!==null&&(In(r,i,u),nu(r,i,u))},enqueueReplaceState:function(i,r,o){i=i._reactInternals;var u=Bn(),f=ur(u);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=cr(i,f,u),r!==null&&(In(r,i,u),nu(r,i,u))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var o=Bn(),u=ur(o);u.tag=2,r!=null&&(u.callback=r),r=cr(i,u,o),r!==null&&(In(r,i,o),nu(r,i,o))}};function vE(i,r,o,u,f,m,v){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,m,v):r.prototype&&r.prototype.isPureReactComponent?!Ql(o,u)||!Ql(f,m):!0}function EE(i,r,o,u){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==i&&Zm.enqueueReplaceState(r,r.state,null)}function Aa(i,r){var o=r;if("ref"in r){o={};for(var u in r)u!=="ref"&&(o[u]=r[u])}if(i=i.defaultProps){o===r&&(o=E({},o));for(var f in i)o[f]===void 0&&(o[f]=i[f])}return o}function TE(i){ph(i)}function SE(i){console.error(i)}function wE(i){ph(i)}function Uh(i,r){try{var o=i.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function CE(i,r,o){try{var u=i.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function ep(i,r,o){return o=ur(o),o.tag=3,o.payload={element:null},o.callback=function(){Uh(i,r)},o}function bE(i){return i=ur(i),i.tag=3,i}function AE(i,r,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;i.payload=function(){return f(m)},i.callback=function(){CE(r,o,u)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(i.callback=function(){CE(r,o,u),typeof f!="function"&&(gr===null?gr=new Set([this]):gr.add(this));var w=u.stack;this.componentDidCatch(u.value,{componentStack:w!==null?w:""})})}function RI(i,r,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=o.alternate,r!==null&&Eo(r,o,f,!0),o=Ln.current,o!==null){switch(o.tag){case 31:case 13:return ei===null?Xh():o.alternate===null&&Tt===0&&(Tt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===bh?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([u]):r.add(u),bp(i,u,f)),!1;case 22:return o.flags|=65536,u===bh?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([u]):o.add(u)),bp(i,u,f)),!1}throw Error(s(435,o.tag))}return bp(i,u,f),Xh(),!1}if(Ge)return r=Ln.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,u!==vm&&(i=Error(s(422),{cause:u}),$l(Xn(i,o)))):(u!==vm&&(r=Error(s(423),{cause:u}),$l(Xn(r,o))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,u=Xn(u,o),f=ep(i.stateNode,u,f),Om(i,f),Tt!==4&&(Tt=2)),!1;var m=Error(s(520),{cause:u});if(m=Xn(m,o),gu===null?gu=[m]:gu.push(m),Tt!==4&&(Tt=2),r===null)return!0;u=Xn(u,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,i=f&-f,o.lanes|=i,i=ep(o.stateNode,u,i),Om(o,i),!1;case 1:if(r=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(gr===null||!gr.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=bE(f),AE(f,i,o,u),Om(o,f),!1}o=o.return}while(o!==null);return!1}var tp=Error(s(461)),kt=!1;function an(i,r,o,u){r.child=i===null?Ov(r,null,o,u):Ca(r,i.child,o,u)}function RE(i,r,o,u,f){o=o.render;var m=r.ref;if("ref"in u){var v={};for(var w in u)w!=="ref"&&(v[w]=u[w])}else v=u;return Ea(r),u=Vm(i,r,o,v,m,f),w=Lm(),i!==null&&!kt?(Um(i,r,f),Es(i,r,f)):(Ge&&w&&_m(r),r.flags|=1,an(i,r,u,f),r.child)}function IE(i,r,o,u,f){if(i===null){var m=o.type;return typeof m=="function"&&!mm(m)&&m.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=m,NE(i,r,m,u,f)):(i=vh(o.type,null,u,r,r.mode,f),i.ref=r.ref,i.return=r,r.child=i)}if(m=i.child,!up(i,f)){var v=m.memoizedProps;if(o=o.compare,o=o!==null?o:Ql,o(v,u)&&i.ref===r.ref)return Es(i,r,f)}return r.flags|=1,i=ms(m,u),i.ref=r.ref,i.return=r,r.child=i}function NE(i,r,o,u,f){if(i!==null){var m=i.memoizedProps;if(Ql(m,u)&&i.ref===r.ref)if(kt=!1,r.pendingProps=u=m,up(i,f))(i.flags&131072)!==0&&(kt=!0);else return r.lanes=i.lanes,Es(i,r,f)}return np(i,r,o,u,f)}function OE(i,r,o,u){var f=u.children,m=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,i!==null){for(u=r.child=i.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~m}else u=0,r.child=null;return DE(i,r,m,o,u)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&wh(r,m!==null?m.cachePool:null),m!==null?xv(r,m):Mm(),Pv(r);else return u=r.lanes=536870912,DE(i,r,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(wh(r,m.cachePool),xv(r,m),fr(),r.memoizedState=null):(i!==null&&wh(r,null),Mm(),fr());return an(i,r,f,o),r.child}function uu(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function DE(i,r,o,u,f){var m=Am();return m=m===null?null:{parent:xt._currentValue,pool:m},r.memoizedState={baseLanes:o,cachePool:m},i!==null&&wh(r,null),Mm(),Pv(r),i!==null&&Eo(i,r,u,!0),r.childLanes=f,null}function zh(i,r){return r=Bh({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function ME(i,r,o){return Ca(r,i.child,null,o),i=zh(r,r.pendingProps),i.flags|=2,Un(r),r.memoizedState=null,i}function II(i,r,o){var u=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(Ge){if(u.mode==="hidden")return i=zh(r,u),r.lanes=536870912,uu(null,i);if(Pm(r),(i=ft)?(i=qT(i,Zn),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:sr!==null?{id:Yi,overflow:Ki}:null,retryLane:536870912,hydrationErrors:null},o=pv(i),o.return=r,r.child=o,sn=r,ft=null)):i=null,i===null)throw ar(r);return r.lanes=536870912,null}return zh(r,u)}var m=i.memoizedState;if(m!==null){var v=m.dehydrated;if(Pm(r),f)if(r.flags&256)r.flags&=-257,r=ME(i,r,o);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(kt||Eo(i,r,o,!1),f=(o&i.childLanes)!==0,kt||f){if(u=ut,u!==null&&(v=Ol(u,o),v!==0&&v!==m.retryLane))throw m.retryLane=v,ga(i,v),In(u,i,v),tp;Xh(),r=ME(i,r,o)}else i=m.treeContext,ft=ti(v.nextSibling),sn=r,Ge=!0,rr=null,Zn=!1,i!==null&&yv(r,i),r=zh(r,u),r.flags|=4096;return r}return i=ms(i.child,{mode:u.mode,children:u.children}),i.ref=r.ref,r.child=i,i.return=r,i}function jh(i,r){var o=r.ref;if(o===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(i===null||i.ref!==o)&&(r.flags|=4194816)}}function np(i,r,o,u,f){return Ea(r),o=Vm(i,r,o,u,void 0,f),u=Lm(),i!==null&&!kt?(Um(i,r,f),Es(i,r,f)):(Ge&&u&&_m(r),r.flags|=1,an(i,r,o,f),r.child)}function xE(i,r,o,u,f,m){return Ea(r),r.updateQueue=null,o=Vv(r,u,o,f),kv(i),u=Lm(),i!==null&&!kt?(Um(i,r,m),Es(i,r,m)):(Ge&&u&&_m(r),r.flags|=1,an(i,r,o,m),r.child)}function PE(i,r,o,u,f){if(Ea(r),r.stateNode===null){var m=go,v=o.contextType;typeof v=="object"&&v!==null&&(m=rn(v)),m=new o(u,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Zm,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=u,m.state=r.memoizedState,m.refs={},Im(r),v=o.contextType,m.context=typeof v=="object"&&v!==null?rn(v):go,m.state=r.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(Jm(r,o,v,u),m.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&Zm.enqueueReplaceState(m,m.state,null),su(r,u,m,f),iu(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(i===null){m=r.stateNode;var w=r.memoizedProps,O=Aa(o,w);m.props=O;var F=m.context,$=o.contextType;v=go,typeof $=="object"&&$!==null&&(v=rn($));var Z=o.getDerivedStateFromProps;$=typeof Z=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,$||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||F!==v)&&EE(r,m,u,v),lr=!1;var G=r.memoizedState;m.state=G,su(r,u,m,f),iu(),F=r.memoizedState,w||G!==F||lr?(typeof Z=="function"&&(Jm(r,o,Z,u),F=r.memoizedState),(O=lr||vE(r,o,O,u,G,F,v))?($||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=F),m.props=u,m.state=F,m.context=v,u=O):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{m=r.stateNode,Nm(i,r),v=r.memoizedProps,$=Aa(o,v),m.props=$,Z=r.pendingProps,G=m.context,F=o.contextType,O=go,typeof F=="object"&&F!==null&&(O=rn(F)),w=o.getDerivedStateFromProps,(F=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==Z||G!==O)&&EE(r,m,u,O),lr=!1,G=r.memoizedState,m.state=G,su(r,u,m,f),iu();var Q=r.memoizedState;v!==Z||G!==Q||lr||i!==null&&i.dependencies!==null&&Th(i.dependencies)?(typeof w=="function"&&(Jm(r,o,w,u),Q=r.memoizedState),($=lr||vE(r,o,$,u,G,Q,O)||i!==null&&i.dependencies!==null&&Th(i.dependencies))?(F||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,Q,O),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,Q,O)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===i.memoizedProps&&G===i.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===i.memoizedProps&&G===i.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=Q),m.props=u,m.state=Q,m.context=O,u=$):(typeof m.componentDidUpdate!="function"||v===i.memoizedProps&&G===i.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===i.memoizedProps&&G===i.memoizedState||(r.flags|=1024),u=!1)}return m=u,jh(i,r),u=(r.flags&128)!==0,m||u?(m=r.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,i!==null&&u?(r.child=Ca(r,i.child,null,f),r.child=Ca(r,null,o,f)):an(i,r,o,f),r.memoizedState=m.state,i=r.child):i=Es(i,r,f),i}function kE(i,r,o,u){return ya(),r.flags|=256,an(i,r,o,u),r.child}var ip={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sp(i){return{baseLanes:i,cachePool:Cv()}}function rp(i,r,o){return i=i!==null?i.childLanes&~o:0,r&&(i|=jn),i}function VE(i,r,o){var u=r.pendingProps,f=!1,m=(r.flags&128)!==0,v;if((v=m)||(v=i!==null&&i.memoizedState===null?!1:(bt.current&2)!==0),v&&(f=!0,r.flags&=-129),v=(r.flags&32)!==0,r.flags&=-33,i===null){if(Ge){if(f?hr(r):fr(),(i=ft)?(i=qT(i,Zn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:sr!==null?{id:Yi,overflow:Ki}:null,retryLane:536870912,hydrationErrors:null},o=pv(i),o.return=r,r.child=o,sn=r,ft=null)):i=null,i===null)throw ar(r);return Bp(i)?r.lanes=32:r.lanes=536870912,null}var w=u.children;return u=u.fallback,f?(fr(),f=r.mode,w=Bh({mode:"hidden",children:w},f),u=_a(u,f,o,null),w.return=r,u.return=r,w.sibling=u,r.child=w,u=r.child,u.memoizedState=sp(o),u.childLanes=rp(i,v,o),r.memoizedState=ip,uu(null,u)):(hr(r),ap(r,w))}var O=i.memoizedState;if(O!==null&&(w=O.dehydrated,w!==null)){if(m)r.flags&256?(hr(r),r.flags&=-257,r=op(i,r,o)):r.memoizedState!==null?(fr(),r.child=i.child,r.flags|=128,r=null):(fr(),w=u.fallback,f=r.mode,u=Bh({mode:"visible",children:u.children},f),w=_a(w,f,o,null),w.flags|=2,u.return=r,w.return=r,u.sibling=w,r.child=u,Ca(r,i.child,null,o),u=r.child,u.memoizedState=sp(o),u.childLanes=rp(i,v,o),r.memoizedState=ip,r=uu(null,u));else if(hr(r),Bp(w)){if(v=w.nextSibling&&w.nextSibling.dataset,v)var F=v.dgst;v=F,u=Error(s(419)),u.stack="",u.digest=v,$l({value:u,source:null,stack:null}),r=op(i,r,o)}else if(kt||Eo(i,r,o,!1),v=(o&i.childLanes)!==0,kt||v){if(v=ut,v!==null&&(u=Ol(v,o),u!==0&&u!==O.retryLane))throw O.retryLane=u,ga(i,u),In(v,i,u),tp;jp(w)||Xh(),r=op(i,r,o)}else jp(w)?(r.flags|=192,r.child=i.child,r=null):(i=O.treeContext,ft=ti(w.nextSibling),sn=r,Ge=!0,rr=null,Zn=!1,i!==null&&yv(r,i),r=ap(r,u.children),r.flags|=4096);return r}return f?(fr(),w=u.fallback,f=r.mode,O=i.child,F=O.sibling,u=ms(O,{mode:"hidden",children:u.children}),u.subtreeFlags=O.subtreeFlags&65011712,F!==null?w=ms(F,w):(w=_a(w,f,o,null),w.flags|=2),w.return=r,u.return=r,u.sibling=w,r.child=u,uu(null,u),u=r.child,w=i.child.memoizedState,w===null?w=sp(o):(f=w.cachePool,f!==null?(O=xt._currentValue,f=f.parent!==O?{parent:O,pool:O}:f):f=Cv(),w={baseLanes:w.baseLanes|o,cachePool:f}),u.memoizedState=w,u.childLanes=rp(i,v,o),r.memoizedState=ip,uu(i.child,u)):(hr(r),o=i.child,i=o.sibling,o=ms(o,{mode:"visible",children:u.children}),o.return=r,o.sibling=null,i!==null&&(v=r.deletions,v===null?(r.deletions=[i],r.flags|=16):v.push(i)),r.child=o,r.memoizedState=null,o)}function ap(i,r){return r=Bh({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function Bh(i,r){return i=Vn(22,i,null,r),i.lanes=0,i}function op(i,r,o){return Ca(r,i.child,null,o),i=ap(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function LE(i,r,o){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r),Sm(i.return,r,o)}function lp(i,r,o,u,f,m){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:m}:(v.isBackwards=r,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=o,v.tailMode=f,v.treeForkCount=m)}function UE(i,r,o){var u=r.pendingProps,f=u.revealOrder,m=u.tail;u=u.children;var v=bt.current,w=(v&2)!==0;if(w?(v=v&1|2,r.flags|=128):v&=1,W(bt,v),an(i,r,u,o),u=Ge?Xl:0,!w&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&LE(i,o,r);else if(i.tag===19)LE(i,o,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(f){case"forwards":for(o=r.child,f=null;o!==null;)i=o.alternate,i!==null&&Nh(i)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),lp(r,!1,f,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(i=f.alternate,i!==null&&Nh(i)===null){r.child=f;break}i=f.sibling,f.sibling=o,o=f,f=i}lp(r,!0,o,null,m,u);break;case"together":lp(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function Es(i,r,o){if(i!==null&&(r.dependencies=i.dependencies),pr|=r.lanes,(o&r.childLanes)===0)if(i!==null){if(Eo(i,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,o=ms(i,i.pendingProps),r.child=o,o.return=r;i.sibling!==null;)i=i.sibling,o=o.sibling=ms(i,i.pendingProps),o.return=r;o.sibling=null}return r.child}function up(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Th(i)))}function NI(i,r,o){switch(r.tag){case 3:lt(r,r.stateNode.containerInfo),or(r,xt,i.memoizedState.cache),ya();break;case 27:case 5:ai(r);break;case 4:lt(r,r.stateNode.containerInfo);break;case 10:or(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Pm(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(hr(r),r.flags|=128,null):(o&r.child.childLanes)!==0?VE(i,r,o):(hr(r),i=Es(i,r,o),i!==null?i.sibling:null);hr(r);break;case 19:var f=(i.flags&128)!==0;if(u=(o&r.childLanes)!==0,u||(Eo(i,r,o,!1),u=(o&r.childLanes)!==0),f){if(u)return UE(i,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),W(bt,bt.current),u)break;return null;case 22:return r.lanes=0,OE(i,r,o,r.pendingProps);case 24:or(r,xt,i.memoizedState.cache)}return Es(i,r,o)}function zE(i,r,o){if(i!==null)if(i.memoizedProps!==r.pendingProps)kt=!0;else{if(!up(i,o)&&(r.flags&128)===0)return kt=!1,NI(i,r,o);kt=(i.flags&131072)!==0}else kt=!1,Ge&&(r.flags&1048576)!==0&&_v(r,Xl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var u=r.pendingProps;if(i=Sa(r.elementType),r.type=i,typeof i=="function")mm(i)?(u=Aa(i,u),r.tag=1,r=PE(null,r,i,u,o)):(r.tag=0,r=np(null,r,i,u,o));else{if(i!=null){var f=i.$$typeof;if(f===Ee){r.tag=11,r=RE(null,r,i,u,o);break e}else if(f===N){r.tag=14,r=IE(null,r,i,u,o);break e}}throw r=Ze(i)||i,Error(s(306,r,""))}}return r;case 0:return np(i,r,r.type,r.pendingProps,o);case 1:return u=r.type,f=Aa(u,r.pendingProps),PE(i,r,u,f,o);case 3:e:{if(lt(r,r.stateNode.containerInfo),i===null)throw Error(s(387));u=r.pendingProps;var m=r.memoizedState;f=m.element,Nm(i,r),su(r,u,null,o);var v=r.memoizedState;if(u=v.cache,or(r,xt,u),u!==m.cache&&wm(r,[xt],o,!0),iu(),u=v.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:v.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=kE(i,r,u,o);break e}else if(u!==f){f=Xn(Error(s(424)),r),$l(f),r=kE(i,r,u,o);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ft=ti(i.firstChild),sn=r,Ge=!0,rr=null,Zn=!0,o=Ov(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(ya(),u===f){r=Es(i,r,o);break e}an(i,r,u,o)}r=r.child}return r;case 26:return jh(i,r),i===null?(o=XT(r.type,null,r.pendingProps,null))?r.memoizedState=o:Ge||(o=r.type,i=r.pendingProps,u=sf(_e.current).createElement(o),u[Ot]=r,u[Kt]=i,on(u,o,i),Dt(u),r.stateNode=u):r.memoizedState=XT(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return ai(r),i===null&&Ge&&(u=r.stateNode=KT(r.type,r.pendingProps,_e.current),sn=r,Zn=!0,f=ft,Er(r.type)?(Fp=f,ft=ti(u.firstChild)):ft=f),an(i,r,r.pendingProps.children,o),jh(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&Ge&&((f=u=ft)&&(u=r1(u,r.type,r.pendingProps,Zn),u!==null?(r.stateNode=u,sn=r,ft=ti(u.firstChild),Zn=!1,f=!0):f=!1),f||ar(r)),ai(r),f=r.type,m=r.pendingProps,v=i!==null?i.memoizedProps:null,u=m.children,Lp(f,m)?u=null:v!==null&&Lp(f,v)&&(r.flags|=32),r.memoizedState!==null&&(f=Vm(i,r,EI,null,null,o),Cu._currentValue=f),jh(i,r),an(i,r,u,o),r.child;case 6:return i===null&&Ge&&((i=o=ft)&&(o=a1(o,r.pendingProps,Zn),o!==null?(r.stateNode=o,sn=r,ft=null,i=!0):i=!1),i||ar(r)),null;case 13:return VE(i,r,o);case 4:return lt(r,r.stateNode.containerInfo),u=r.pendingProps,i===null?r.child=Ca(r,null,u,o):an(i,r,u,o),r.child;case 11:return RE(i,r,r.type,r.pendingProps,o);case 7:return an(i,r,r.pendingProps,o),r.child;case 8:return an(i,r,r.pendingProps.children,o),r.child;case 12:return an(i,r,r.pendingProps.children,o),r.child;case 10:return u=r.pendingProps,or(r,r.type,u.value),an(i,r,u.children,o),r.child;case 9:return f=r.type._context,u=r.pendingProps.children,Ea(r),f=rn(f),u=u(f),r.flags|=1,an(i,r,u,o),r.child;case 14:return IE(i,r,r.type,r.pendingProps,o);case 15:return NE(i,r,r.type,r.pendingProps,o);case 19:return UE(i,r,o);case 31:return II(i,r,o);case 22:return OE(i,r,o,r.pendingProps);case 24:return Ea(r),u=rn(xt),i===null?(f=Am(),f===null&&(f=ut,m=Cm(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),r.memoizedState={parent:u,cache:f},Im(r),or(r,xt,f)):((i.lanes&o)!==0&&(Nm(i,r),su(r,null,null,o),iu()),f=i.memoizedState,m=r.memoizedState,f.parent!==u?(f={parent:u,cache:u},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),or(r,xt,u)):(u=m.cache,or(r,xt,u),u!==f.cache&&wm(r,[xt],o,!0))),an(i,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Ts(i){i.flags|=4}function cp(i,r,o,u,f){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(f&335544128)===f)if(i.stateNode.complete)i.flags|=8192;else if(fT())i.flags|=8192;else throw wa=bh,Rm}else i.flags&=-16777217}function jE(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!tS(r))if(fT())i.flags|=8192;else throw wa=bh,Rm}function Fh(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Qc():536870912,i.lanes|=r,Mo|=r)}function cu(i,r){if(!Ge)switch(i.tailMode){case"hidden":r=i.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function dt(i){var r=i.alternate!==null&&i.alternate.child===i.child,o=0,u=0;if(r)for(var f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=u,i.childLanes=o,r}function OI(i,r,o){var u=r.pendingProps;switch(ym(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(r),null;case 1:return dt(r),null;case 3:return o=r.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),_s(xt),Xe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(vo(r)?Ts(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Em())),dt(r),null;case 26:var f=r.type,m=r.memoizedState;return i===null?(Ts(r),m!==null?(dt(r),jE(r,m)):(dt(r),cp(r,f,null,u,o))):m?m!==i.memoizedState?(Ts(r),dt(r),jE(r,m)):(dt(r),r.flags&=-16777217):(i=i.memoizedProps,i!==u&&Ts(r),dt(r),cp(r,f,i,u,o)),null;case 27:if(Hn(r),o=_e.current,f=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&Ts(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return dt(r),null}i=le.current,vo(r)?vv(r):(i=KT(f,u,o),r.stateNode=i,Ts(r))}return dt(r),null;case 5:if(Hn(r),f=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&Ts(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return dt(r),null}if(m=le.current,vo(r))vv(r);else{var v=sf(_e.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?v.createElement("select",{is:u.is}):v.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?v.createElement(f,{is:u.is}):v.createElement(f)}}m[Ot]=r,m[Kt]=u;e:for(v=r.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===r)break e;for(;v.sibling===null;){if(v.return===null||v.return===r)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}r.stateNode=m;e:switch(on(m,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Ts(r)}}return dt(r),cp(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,o),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==u&&Ts(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(s(166));if(i=_e.current,vo(r)){if(i=r.stateNode,o=r.memoizedProps,u=null,f=sn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}i[Ot]=r,i=!!(i.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||VT(i.nodeValue,o)),i||ar(r,!0)}else i=sf(i).createTextNode(u),i[Ot]=r,r.stateNode=i}return dt(r),null;case 31:if(o=r.memoizedState,i===null||i.memoizedState!==null){if(u=vo(r),o!==null){if(i===null){if(!u)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[Ot]=r}else ya(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;dt(r),i=!1}else o=Em(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=o),i=!0;if(!i)return r.flags&256?(Un(r),r):(Un(r),null);if((r.flags&128)!==0)throw Error(s(558))}return dt(r),null;case 13:if(u=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=vo(r),u!==null&&u.dehydrated!==null){if(i===null){if(!f)throw Error(s(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Ot]=r}else ya(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;dt(r),f=!1}else f=Em(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Un(r),r):(Un(r),null)}return Un(r),(r.flags&128)!==0?(r.lanes=o,r):(o=u!==null,i=i!==null&&i.memoizedState!==null,o&&(u=r.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)),o!==i&&o&&(r.child.flags|=8192),Fh(r,r.updateQueue),dt(r),null);case 4:return Xe(),i===null&&Mp(r.stateNode.containerInfo),dt(r),null;case 10:return _s(r.type),dt(r),null;case 19:if(H(bt),u=r.memoizedState,u===null)return dt(r),null;if(f=(r.flags&128)!==0,m=u.rendering,m===null)if(f)cu(u,!1);else{if(Tt!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(m=Nh(i),m!==null){for(r.flags|=128,cu(u,!1),i=m.updateQueue,r.updateQueue=i,Fh(r,i),r.subtreeFlags=0,i=o,o=r.child;o!==null;)mv(o,i),o=o.sibling;return W(bt,bt.current&1|2),Ge&&ps(r,u.treeForkCount),r.child}i=i.sibling}u.tail!==null&&yn()>Kh&&(r.flags|=128,f=!0,cu(u,!1),r.lanes=4194304)}else{if(!f)if(i=Nh(m),i!==null){if(r.flags|=128,f=!0,i=i.updateQueue,r.updateQueue=i,Fh(r,i),cu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!Ge)return dt(r),null}else 2*yn()-u.renderingStartTime>Kh&&o!==536870912&&(r.flags|=128,f=!0,cu(u,!1),r.lanes=4194304);u.isBackwards?(m.sibling=r.child,r.child=m):(i=u.last,i!==null?i.sibling=m:r.child=m,u.last=m)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=yn(),i.sibling=null,o=bt.current,W(bt,f?o&1|2:o&1),Ge&&ps(r,u.treeForkCount),i):(dt(r),null);case 22:case 23:return Un(r),xm(),u=r.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(o&536870912)!==0&&(r.flags&128)===0&&(dt(r),r.subtreeFlags&6&&(r.flags|=8192)):dt(r),o=r.updateQueue,o!==null&&Fh(r,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==o&&(r.flags|=2048),i!==null&&H(Ta),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),_s(xt),dt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function DI(i,r){switch(ym(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return _s(xt),Xe(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return Hn(r),null;case 31:if(r.memoizedState!==null){if(Un(r),r.alternate===null)throw Error(s(340));ya()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(Un(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));ya()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return H(bt),null;case 4:return Xe(),null;case 10:return _s(r.type),null;case 22:case 23:return Un(r),xm(),i!==null&&H(Ta),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return _s(xt),null;case 25:return null;default:return null}}function BE(i,r){switch(ym(r),r.tag){case 3:_s(xt),Xe();break;case 26:case 27:case 5:Hn(r);break;case 4:Xe();break;case 31:r.memoizedState!==null&&Un(r);break;case 13:Un(r);break;case 19:H(bt);break;case 10:_s(r.type);break;case 22:case 23:Un(r),xm(),i!==null&&H(Ta);break;case 24:_s(xt)}}function hu(i,r){try{var o=r.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&i)===i){u=void 0;var m=o.create,v=o.inst;u=m(),v.destroy=u}o=o.next}while(o!==f)}}catch(w){it(r,r.return,w)}}function dr(i,r,o){try{var u=r.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&i)===i){var v=u.inst,w=v.destroy;if(w!==void 0){v.destroy=void 0,f=r;var O=o,F=w;try{F()}catch($){it(f,O,$)}}}u=u.next}while(u!==m)}}catch($){it(r,r.return,$)}}function FE(i){var r=i.updateQueue;if(r!==null){var o=i.stateNode;try{Mv(r,o)}catch(u){it(i,i.return,u)}}}function HE(i,r,o){o.props=Aa(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(u){it(i,r,u)}}function fu(i,r){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof o=="function"?i.refCleanup=o(u):o.current=u}}catch(f){it(i,r,f)}}function Qi(i,r){var o=i.ref,u=i.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){it(i,r,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){it(i,r,f)}else o.current=null}function qE(i){var r=i.type,o=i.memoizedProps,u=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){it(i,i.return,f)}}function hp(i,r,o){try{var u=i.stateNode;ZI(u,i.type,o,r),u[Kt]=r}catch(f){it(i,i.return,f)}}function GE(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Er(i.type)||i.tag===4}function fp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||GE(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Er(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function dp(i,r,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(i),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=hi));else if(u!==4&&(u===27&&Er(i.type)&&(o=i.stateNode,r=null),i=i.child,i!==null))for(dp(i,r,o),i=i.sibling;i!==null;)dp(i,r,o),i=i.sibling}function Hh(i,r,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?o.insertBefore(i,r):o.appendChild(i);else if(u!==4&&(u===27&&Er(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(Hh(i,r,o),i=i.sibling;i!==null;)Hh(i,r,o),i=i.sibling}function YE(i){var r=i.stateNode,o=i.memoizedProps;try{for(var u=i.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);on(r,u,o),r[Ot]=i,r[Kt]=o}catch(m){it(i,i.return,m)}}var Ss=!1,Vt=!1,mp=!1,KE=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function MI(i,r){if(i=i.containerInfo,kp=hf,i=rv(i),om(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else e:{o=(o=i.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var v=0,w=-1,O=-1,F=0,$=0,Z=i,G=null;t:for(;;){for(var Q;Z!==o||f!==0&&Z.nodeType!==3||(w=v+f),Z!==m||u!==0&&Z.nodeType!==3||(O=v+u),Z.nodeType===3&&(v+=Z.nodeValue.length),(Q=Z.firstChild)!==null;)G=Z,Z=Q;for(;;){if(Z===i)break t;if(G===o&&++F===f&&(w=v),G===m&&++$===u&&(O=v),(Q=Z.nextSibling)!==null)break;Z=G,G=Z.parentNode}Z=Q}o=w===-1||O===-1?null:{start:w,end:O}}else o=null}o=o||{start:0,end:0}}else o=null;for(Vp={focusedElem:i,selectionRange:o},hf=!1,Wt=r;Wt!==null;)if(r=Wt,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Wt=i;else for(;Wt!==null;){switch(r=Wt,m=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(o=0;o<i.length;o++)f=i[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&m!==null){i=void 0,o=r,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var fe=Aa(o.type,f);i=u.getSnapshotBeforeUpdate(fe,m),u.__reactInternalSnapshotBeforeUpdate=i}catch(ve){it(o,o.return,ve)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,o=i.nodeType,o===9)zp(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":zp(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Wt=i;break}Wt=r.return}}function QE(i,r,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Cs(i,o),u&4&&hu(5,o);break;case 1:if(Cs(i,o),u&4)if(i=o.stateNode,r===null)try{i.componentDidMount()}catch(v){it(o,o.return,v)}else{var f=Aa(o.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(f,r,i.__reactInternalSnapshotBeforeUpdate)}catch(v){it(o,o.return,v)}}u&64&&FE(o),u&512&&fu(o,o.return);break;case 3:if(Cs(i,o),u&64&&(i=o.updateQueue,i!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{Mv(i,r)}catch(v){it(o,o.return,v)}}break;case 27:r===null&&u&4&&YE(o);case 26:case 5:Cs(i,o),r===null&&u&4&&qE(o),u&512&&fu(o,o.return);break;case 12:Cs(i,o);break;case 31:Cs(i,o),u&4&&$E(i,o);break;case 13:Cs(i,o),u&4&&JE(i,o),u&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=BI.bind(null,o),o1(i,o))));break;case 22:if(u=o.memoizedState!==null||Ss,!u){r=r!==null&&r.memoizedState!==null||Vt,f=Ss;var m=Vt;Ss=u,(Vt=r)&&!m?bs(i,o,(o.subtreeFlags&8772)!==0):Cs(i,o),Ss=f,Vt=m}break;case 30:break;default:Cs(i,o)}}function WE(i){var r=i.alternate;r!==null&&(i.alternate=null,WE(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&to(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var _t=null,Cn=!1;function ws(i,r,o){for(o=o.child;o!==null;)XE(i,r,o),o=o.sibling}function XE(i,r,o){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(oi,o)}catch{}switch(o.tag){case 26:Vt||Qi(o,r),ws(i,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Vt||Qi(o,r);var u=_t,f=Cn;Er(o.type)&&(_t=o.stateNode,Cn=!1),ws(i,r,o),Tu(o.stateNode),_t=u,Cn=f;break;case 5:Vt||Qi(o,r);case 6:if(u=_t,f=Cn,_t=null,ws(i,r,o),_t=u,Cn=f,_t!==null)if(Cn)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(o.stateNode)}catch(m){it(o,r,m)}else try{_t.removeChild(o.stateNode)}catch(m){it(o,r,m)}break;case 18:_t!==null&&(Cn?(i=_t,FT(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),jo(i)):FT(_t,o.stateNode));break;case 4:u=_t,f=Cn,_t=o.stateNode.containerInfo,Cn=!0,ws(i,r,o),_t=u,Cn=f;break;case 0:case 11:case 14:case 15:dr(2,o,r),Vt||dr(4,o,r),ws(i,r,o);break;case 1:Vt||(Qi(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"&&HE(o,r,u)),ws(i,r,o);break;case 21:ws(i,r,o);break;case 22:Vt=(u=Vt)||o.memoizedState!==null,ws(i,r,o),Vt=u;break;default:ws(i,r,o)}}function $E(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{jo(i)}catch(o){it(r,r.return,o)}}}function JE(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{jo(i)}catch(o){it(r,r.return,o)}}function xI(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new KE),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new KE),r;default:throw Error(s(435,i.tag))}}function qh(i,r){var o=xI(i);r.forEach(function(u){if(!o.has(u)){o.add(u);var f=FI.bind(null,i,u);u.then(f,f)}})}function bn(i,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=i,v=r,w=v;e:for(;w!==null;){switch(w.tag){case 27:if(Er(w.type)){_t=w.stateNode,Cn=!1;break e}break;case 5:_t=w.stateNode,Cn=!1;break e;case 3:case 4:_t=w.stateNode.containerInfo,Cn=!0;break e}w=w.return}if(_t===null)throw Error(s(160));XE(m,v,f),_t=null,Cn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)ZE(r,i),r=r.sibling}var _i=null;function ZE(i,r){var o=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:bn(r,i),An(i),u&4&&(dr(3,i,i.return),hu(3,i),dr(5,i,i.return));break;case 1:bn(r,i),An(i),u&512&&(Vt||o===null||Qi(o,o.return)),u&64&&Ss&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=_i;if(bn(r,i),An(i),u&512&&(Vt||o===null||Qi(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=i.memoizedState,o===null)if(u===null)if(i.stateNode===null){e:{u=i.type,o=i.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Pi]||m[Ot]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),on(m,u,o),m[Ot]=i,Dt(m),u=m;break e;case"link":var v=ZT("link","href",f).get(u+(o.href||""));if(v){for(var w=0;w<v.length;w++)if(m=v[w],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(w,1);break t}}m=f.createElement(u),on(m,u,o),f.head.appendChild(m);break;case"meta":if(v=ZT("meta","content",f).get(u+(o.content||""))){for(w=0;w<v.length;w++)if(m=v[w],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(w,1);break t}}m=f.createElement(u),on(m,u,o),f.head.appendChild(m);break;default:throw Error(s(468,u))}m[Ot]=i,Dt(m),u=m}i.stateNode=u}else eS(f,i.type,i.stateNode);else i.stateNode=JT(f,u,i.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?eS(f,i.type,i.stateNode):JT(f,u,i.memoizedProps)):u===null&&i.stateNode!==null&&hp(i,i.memoizedProps,o.memoizedProps)}break;case 27:bn(r,i),An(i),u&512&&(Vt||o===null||Qi(o,o.return)),o!==null&&u&4&&hp(i,i.memoizedProps,o.memoizedProps);break;case 5:if(bn(r,i),An(i),u&512&&(Vt||o===null||Qi(o,o.return)),i.flags&32){f=i.stateNode;try{wn(f,"")}catch(fe){it(i,i.return,fe)}}u&4&&i.stateNode!=null&&(f=i.memoizedProps,hp(i,f,o!==null?o.memoizedProps:f)),u&1024&&(mp=!0);break;case 6:if(bn(r,i),An(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,o=i.stateNode;try{o.nodeValue=u}catch(fe){it(i,i.return,fe)}}break;case 3:if(of=null,f=_i,_i=rf(r.containerInfo),bn(r,i),_i=f,An(i),u&4&&o!==null&&o.memoizedState.isDehydrated)try{jo(r.containerInfo)}catch(fe){it(i,i.return,fe)}mp&&(mp=!1,eT(i));break;case 4:u=_i,_i=rf(i.stateNode.containerInfo),bn(r,i),An(i),_i=u;break;case 12:bn(r,i),An(i);break;case 31:bn(r,i),An(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,qh(i,u)));break;case 13:bn(r,i),An(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Yh=yn()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,qh(i,u)));break;case 22:f=i.memoizedState!==null;var O=o!==null&&o.memoizedState!==null,F=Ss,$=Vt;if(Ss=F||f,Vt=$||O,bn(r,i),Vt=$,Ss=F,An(i),u&8192)e:for(r=i.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||O||Ss||Vt||Ra(i)),o=null,r=i;;){if(r.tag===5||r.tag===26){if(o===null){O=o=r;try{if(m=O.stateNode,f)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{w=O.stateNode;var Z=O.memoizedProps.style,G=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;w.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(fe){it(O,O.return,fe)}}}else if(r.tag===6){if(o===null){O=r;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(fe){it(O,O.return,fe)}}}else if(r.tag===18){if(o===null){O=r;try{var Q=O.stateNode;f?HT(Q,!0):HT(O.stateNode,!1)}catch(fe){it(O,O.return,fe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=i.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,qh(i,o))));break;case 19:bn(r,i),An(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,qh(i,u)));break;case 30:break;case 21:break;default:bn(r,i),An(i)}}function An(i){var r=i.flags;if(r&2){try{for(var o,u=i.return;u!==null;){if(GE(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var f=o.stateNode,m=fp(i);Hh(i,m,f);break;case 5:var v=o.stateNode;o.flags&32&&(wn(v,""),o.flags&=-33);var w=fp(i);Hh(i,w,v);break;case 3:case 4:var O=o.stateNode.containerInfo,F=fp(i);dp(i,F,O);break;default:throw Error(s(161))}}catch($){it(i,i.return,$)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function eT(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;eT(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function Cs(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)QE(i,r.alternate,r),r=r.sibling}function Ra(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:dr(4,r,r.return),Ra(r);break;case 1:Qi(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&HE(r,r.return,o),Ra(r);break;case 27:Tu(r.stateNode);case 26:case 5:Qi(r,r.return),Ra(r);break;case 22:r.memoizedState===null&&Ra(r);break;case 30:Ra(r);break;default:Ra(r)}i=i.sibling}}function bs(i,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,f=i,m=r,v=m.flags;switch(m.tag){case 0:case 11:case 15:bs(f,m,o),hu(4,m);break;case 1:if(bs(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(F){it(u,u.return,F)}if(u=m,f=u.updateQueue,f!==null){var w=u.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)Dv(O[f],w)}catch(F){it(u,u.return,F)}}o&&v&64&&FE(m),fu(m,m.return);break;case 27:YE(m);case 26:case 5:bs(f,m,o),o&&u===null&&v&4&&qE(m),fu(m,m.return);break;case 12:bs(f,m,o);break;case 31:bs(f,m,o),o&&v&4&&$E(f,m);break;case 13:bs(f,m,o),o&&v&4&&JE(f,m);break;case 22:m.memoizedState===null&&bs(f,m,o),fu(m,m.return);break;case 30:break;default:bs(f,m,o)}r=r.sibling}}function pp(i,r){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&Jl(o))}function gp(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Jl(i))}function yi(i,r,o,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)tT(i,r,o,u),r=r.sibling}function tT(i,r,o,u){var f=r.flags;switch(r.tag){case 0:case 11:case 15:yi(i,r,o,u),f&2048&&hu(9,r);break;case 1:yi(i,r,o,u);break;case 3:yi(i,r,o,u),f&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Jl(i)));break;case 12:if(f&2048){yi(i,r,o,u),i=r.stateNode;try{var m=r.memoizedProps,v=m.id,w=m.onPostCommit;typeof w=="function"&&w(v,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(O){it(r,r.return,O)}}else yi(i,r,o,u);break;case 31:yi(i,r,o,u);break;case 13:yi(i,r,o,u);break;case 23:break;case 22:m=r.stateNode,v=r.alternate,r.memoizedState!==null?m._visibility&2?yi(i,r,o,u):du(i,r):m._visibility&2?yi(i,r,o,u):(m._visibility|=2,No(i,r,o,u,(r.subtreeFlags&10256)!==0||!1)),f&2048&&pp(v,r);break;case 24:yi(i,r,o,u),f&2048&&gp(r.alternate,r);break;default:yi(i,r,o,u)}}function No(i,r,o,u,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=i,v=r,w=o,O=u,F=v.flags;switch(v.tag){case 0:case 11:case 15:No(m,v,w,O,f),hu(8,v);break;case 23:break;case 22:var $=v.stateNode;v.memoizedState!==null?$._visibility&2?No(m,v,w,O,f):du(m,v):($._visibility|=2,No(m,v,w,O,f)),f&&F&2048&&pp(v.alternate,v);break;case 24:No(m,v,w,O,f),f&&F&2048&&gp(v.alternate,v);break;default:No(m,v,w,O,f)}r=r.sibling}}function du(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=i,u=r,f=u.flags;switch(u.tag){case 22:du(o,u),f&2048&&pp(u.alternate,u);break;case 24:du(o,u),f&2048&&gp(u.alternate,u);break;default:du(o,u)}r=r.sibling}}var mu=8192;function Oo(i,r,o){if(i.subtreeFlags&mu)for(i=i.child;i!==null;)nT(i,r,o),i=i.sibling}function nT(i,r,o){switch(i.tag){case 26:Oo(i,r,o),i.flags&mu&&i.memoizedState!==null&&v1(o,_i,i.memoizedState,i.memoizedProps);break;case 5:Oo(i,r,o);break;case 3:case 4:var u=_i;_i=rf(i.stateNode.containerInfo),Oo(i,r,o),_i=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=mu,mu=16777216,Oo(i,r,o),mu=u):Oo(i,r,o));break;default:Oo(i,r,o)}}function iT(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function pu(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];Wt=u,rT(u,i)}iT(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)sT(i),i=i.sibling}function sT(i){switch(i.tag){case 0:case 11:case 15:pu(i),i.flags&2048&&dr(9,i,i.return);break;case 3:pu(i);break;case 12:pu(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Gh(i)):pu(i);break;default:pu(i)}}function Gh(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];Wt=u,rT(u,i)}iT(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:dr(8,r,r.return),Gh(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Gh(r));break;default:Gh(r)}i=i.sibling}}function rT(i,r){for(;Wt!==null;){var o=Wt;switch(o.tag){case 0:case 11:case 15:dr(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Jl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Wt=u;else e:for(o=i;Wt!==null;){u=Wt;var f=u.sibling,m=u.return;if(WE(u),u===o){Wt=null;break e}if(f!==null){f.return=m,Wt=f;break e}Wt=m}}}var PI={getCacheForType:function(i){var r=rn(xt),o=r.data.get(i);return o===void 0&&(o=i(),r.data.set(i,o)),o},cacheSignal:function(){return rn(xt).controller.signal}},kI=typeof WeakMap=="function"?WeakMap:Map,Je=0,ut=null,Ve=null,je=0,nt=0,zn=null,mr=!1,Do=!1,_p=!1,As=0,Tt=0,pr=0,Ia=0,yp=0,jn=0,Mo=0,gu=null,Rn=null,vp=!1,Yh=0,aT=0,Kh=1/0,Qh=null,gr=null,Ft=0,_r=null,xo=null,Rs=0,Ep=0,Tp=null,oT=null,_u=0,Sp=null;function Bn(){return(Je&2)!==0&&je!==0?je&-je:X.T!==null?Ip():Wc()}function lT(){if(jn===0)if((je&536870912)===0||Ge){var i=ta;ta<<=1,(ta&3932160)===0&&(ta=262144),jn=i}else jn=536870912;return i=Ln.current,i!==null&&(i.flags|=32),jn}function In(i,r,o){(i===ut&&(nt===2||nt===9)||i.cancelPendingCommit!==null)&&(Po(i,0),yr(i,je,jn,!1)),na(i,o),((Je&2)===0||i!==ut)&&(i===ut&&((Je&2)===0&&(Ia|=o),Tt===4&&yr(i,je,jn,!1)),Wi(i))}function uT(i,r,o){if((Je&6)!==0)throw Error(s(327));var u=!o&&(r&127)===0&&(r&i.expiredLanes)===0||li(i,r),f=u?UI(i,r):Cp(i,r,!0),m=u;do{if(f===0){Do&&!u&&yr(i,r,0,!1);break}else{if(o=i.current.alternate,m&&!VI(o)){f=Cp(i,r,!1),m=!1;continue}if(f===2){if(m=r,i.errorRecoveryDisabledLanes&m)var v=0;else v=i.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){r=v;e:{var w=i;f=gu;var O=w.current.memoizedState.isDehydrated;if(O&&(Po(w,v).flags|=256),v=Cp(w,v,!1),v!==2){if(_p&&!O){w.errorRecoveryDisabledLanes|=m,Ia|=m,f=4;break e}m=Rn,Rn=f,m!==null&&(Rn===null?Rn=m:Rn.push.apply(Rn,m))}f=v}if(m=!1,f!==2)continue}}if(f===1){Po(i,0),yr(i,r,0,!0);break}e:{switch(u=i,m=f,m){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:yr(u,r,jn,!mr);break e;case 2:Rn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(f=Yh+300-yn(),10<f)){if(yr(u,r,jn,!mr),Di(u,0,!0)!==0)break e;Rs=r,u.timeoutHandle=jT(cT.bind(null,u,o,Rn,Qh,vp,r,jn,Ia,Mo,mr,m,"Throttled",-0,0),f);break e}cT(u,o,Rn,Qh,vp,r,jn,Ia,Mo,mr,m,null,-0,0)}}break}while(!0);Wi(i)}function cT(i,r,o,u,f,m,v,w,O,F,$,Z,G,Q){if(i.timeoutHandle=-1,Z=r.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:hi},nT(r,m,Z);var fe=(m&62914560)===m?Yh-yn():(m&4194048)===m?aT-yn():0;if(fe=E1(Z,fe),fe!==null){Rs=m,i.cancelPendingCommit=fe(yT.bind(null,i,r,m,o,u,f,v,w,O,$,Z,null,G,Q)),yr(i,m,v,!F);return}}yT(i,r,m,o,u,f,v,w,O)}function VI(i){for(var r=i;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!kn(m(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function yr(i,r,o,u){r&=~yp,r&=~Ia,i.suspendedLanes|=r,i.pingedLanes&=~r,u&&(i.warmLanes|=r),u=i.expirationTimes;for(var f=r;0<f;){var m=31-wt(f),v=1<<m;u[m]=-1,f&=~v}o!==0&&ia(i,o,r)}function Wh(){return(Je&6)===0?(yu(0),!1):!0}function wp(){if(Ve!==null){if(nt===0)var i=Ve.return;else i=Ve,gs=va=null,zm(i),Co=null,eu=0,i=Ve;for(;i!==null;)BE(i.alternate,i),i=i.return;Ve=null}}function Po(i,r){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,n1(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),Rs=0,wp(),ut=i,Ve=o=ms(i.current,null),je=r,nt=0,zn=null,mr=!1,Do=li(i,r),_p=!1,Mo=jn=yp=Ia=pr=Tt=0,Rn=gu=null,vp=!1,(r&8)!==0&&(r|=r&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=r;0<u;){var f=31-wt(u),m=1<<f;r|=i[f],u&=~m}return As=r,gh(),o}function hT(i,r){Ne=null,X.H=lu,r===wo||r===Ch?(r=Rv(),nt=3):r===Rm?(r=Rv(),nt=4):nt=r===tp?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,zn=r,Ve===null&&(Tt=1,Uh(i,Xn(r,i.current)))}function fT(){var i=Ln.current;return i===null?!0:(je&4194048)===je?ei===null:(je&62914560)===je||(je&536870912)!==0?i===ei:!1}function dT(){var i=X.H;return X.H=lu,i===null?lu:i}function mT(){var i=X.A;return X.A=PI,i}function Xh(){Tt=4,mr||(je&4194048)!==je&&Ln.current!==null||(Do=!0),(pr&134217727)===0&&(Ia&134217727)===0||ut===null||yr(ut,je,jn,!1)}function Cp(i,r,o){var u=Je;Je|=2;var f=dT(),m=mT();(ut!==i||je!==r)&&(Qh=null,Po(i,r)),r=!1;var v=Tt;e:do try{if(nt!==0&&Ve!==null){var w=Ve,O=zn;switch(nt){case 8:wp(),v=6;break e;case 3:case 2:case 9:case 6:Ln.current===null&&(r=!0);var F=nt;if(nt=0,zn=null,ko(i,w,O,F),o&&Do){v=0;break e}break;default:F=nt,nt=0,zn=null,ko(i,w,O,F)}}LI(),v=Tt;break}catch($){hT(i,$)}while(!0);return r&&i.shellSuspendCounter++,gs=va=null,Je=u,X.H=f,X.A=m,Ve===null&&(ut=null,je=0,gh()),v}function LI(){for(;Ve!==null;)pT(Ve)}function UI(i,r){var o=Je;Je|=2;var u=dT(),f=mT();ut!==i||je!==r?(Qh=null,Kh=yn()+500,Po(i,r)):Do=li(i,r);e:do try{if(nt!==0&&Ve!==null){r=Ve;var m=zn;t:switch(nt){case 1:nt=0,zn=null,ko(i,r,m,1);break;case 2:case 9:if(bv(m)){nt=0,zn=null,gT(r);break}r=function(){nt!==2&&nt!==9||ut!==i||(nt=7),Wi(i)},m.then(r,r);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:bv(m)?(nt=0,zn=null,gT(r)):(nt=0,zn=null,ko(i,r,m,7));break;case 5:var v=null;switch(Ve.tag){case 26:v=Ve.memoizedState;case 5:case 27:var w=Ve;if(v?tS(v):w.stateNode.complete){nt=0,zn=null;var O=w.sibling;if(O!==null)Ve=O;else{var F=w.return;F!==null?(Ve=F,$h(F)):Ve=null}break t}}nt=0,zn=null,ko(i,r,m,5);break;case 6:nt=0,zn=null,ko(i,r,m,6);break;case 8:wp(),Tt=6;break e;default:throw Error(s(462))}}zI();break}catch($){hT(i,$)}while(!0);return gs=va=null,X.H=u,X.A=f,Je=o,Ve!==null?0:(ut=null,je=0,gh(),Tt)}function zI(){for(;Ve!==null&&!em();)pT(Ve)}function pT(i){var r=zE(i.alternate,i,As);i.memoizedProps=i.pendingProps,r===null?$h(i):Ve=r}function gT(i){var r=i,o=r.alternate;switch(r.tag){case 15:case 0:r=xE(o,r,r.pendingProps,r.type,void 0,je);break;case 11:r=xE(o,r,r.pendingProps,r.type.render,r.ref,je);break;case 5:zm(r);default:BE(o,r),r=Ve=mv(r,As),r=zE(o,r,As)}i.memoizedProps=i.pendingProps,r===null?$h(i):Ve=r}function ko(i,r,o,u){gs=va=null,zm(r),Co=null,eu=0;var f=r.return;try{if(RI(i,f,r,o,je)){Tt=1,Uh(i,Xn(o,i.current)),Ve=null;return}}catch(m){if(f!==null)throw Ve=f,m;Tt=1,Uh(i,Xn(o,i.current)),Ve=null;return}r.flags&32768?(Ge||u===1?i=!0:Do||(je&536870912)!==0?i=!1:(mr=i=!0,(u===2||u===9||u===3||u===6)&&(u=Ln.current,u!==null&&u.tag===13&&(u.flags|=16384))),_T(r,i)):$h(r)}function $h(i){var r=i;do{if((r.flags&32768)!==0){_T(r,mr);return}i=r.return;var o=OI(r.alternate,r,As);if(o!==null){Ve=o;return}if(r=r.sibling,r!==null){Ve=r;return}Ve=r=i}while(r!==null);Tt===0&&(Tt=5)}function _T(i,r){do{var o=DI(i.alternate,i);if(o!==null){o.flags&=32767,Ve=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(i=i.sibling,i!==null)){Ve=i;return}Ve=i=o}while(i!==null);Tt=6,Ve=null}function yT(i,r,o,u,f,m,v,w,O){i.cancelPendingCommit=null;do Jh();while(Ft!==0);if((Je&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(m=r.lanes|r.childLanes,m|=fm,im(i,o,m,v,w,O),i===ut&&(Ve=ut=null,je=0),xo=r,_r=i,Rs=o,Ep=m,Tp=f,oT=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,HI(Qs,function(){return wT(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=X.T,X.T=null,f=ie.p,ie.p=2,v=Je,Je|=4;try{MI(i,r,o)}finally{Je=v,ie.p=f,X.T=u}}Ft=1,vT(),ET(),TT()}}function vT(){if(Ft===1){Ft=0;var i=_r,r=xo,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=X.T,X.T=null;var u=ie.p;ie.p=2;var f=Je;Je|=4;try{ZE(r,i);var m=Vp,v=rv(i.containerInfo),w=m.focusedElem,O=m.selectionRange;if(v!==w&&w&&w.ownerDocument&&sv(w.ownerDocument.documentElement,w)){if(O!==null&&om(w)){var F=O.start,$=O.end;if($===void 0&&($=F),"selectionStart"in w)w.selectionStart=F,w.selectionEnd=Math.min($,w.value.length);else{var Z=w.ownerDocument||document,G=Z&&Z.defaultView||window;if(G.getSelection){var Q=G.getSelection(),fe=w.textContent.length,ve=Math.min(O.start,fe),ot=O.end===void 0?ve:Math.min(O.end,fe);!Q.extend&&ve>ot&&(v=ot,ot=ve,ve=v);var L=iv(w,ve),x=iv(w,ot);if(L&&x&&(Q.rangeCount!==1||Q.anchorNode!==L.node||Q.anchorOffset!==L.offset||Q.focusNode!==x.node||Q.focusOffset!==x.offset)){var B=Z.createRange();B.setStart(L.node,L.offset),Q.removeAllRanges(),ve>ot?(Q.addRange(B),Q.extend(x.node,x.offset)):(B.setEnd(x.node,x.offset),Q.addRange(B))}}}}for(Z=[],Q=w;Q=Q.parentNode;)Q.nodeType===1&&Z.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<Z.length;w++){var J=Z[w];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}hf=!!kp,Vp=kp=null}finally{Je=f,ie.p=u,X.T=o}}i.current=r,Ft=2}}function ET(){if(Ft===2){Ft=0;var i=_r,r=xo,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=X.T,X.T=null;var u=ie.p;ie.p=2;var f=Je;Je|=4;try{QE(i,r.alternate,r)}finally{Je=f,ie.p=u,X.T=o}}Ft=3}}function TT(){if(Ft===4||Ft===3){Ft=0,Fc();var i=_r,r=xo,o=Rs,u=oT;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ft=5:(Ft=0,xo=_r=null,ST(i,i.pendingLanes));var f=i.pendingLanes;if(f===0&&(gr=null),cs(o),r=r.stateNode,tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(oi,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=X.T,f=ie.p,ie.p=2,X.T=null;try{for(var m=i.onRecoverableError,v=0;v<u.length;v++){var w=u[v];m(w.value,{componentStack:w.stack})}}finally{X.T=r,ie.p=f}}(Rs&3)!==0&&Jh(),Wi(i),f=i.pendingLanes,(o&261930)!==0&&(f&42)!==0?i===Sp?_u++:(_u=0,Sp=i):_u=0,yu(0)}}function ST(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,Jl(r)))}function Jh(){return vT(),ET(),TT(),wT()}function wT(){if(Ft!==5)return!1;var i=_r,r=Ep;Ep=0;var o=cs(Rs),u=X.T,f=ie.p;try{ie.p=32>o?32:o,X.T=null,o=Tp,Tp=null;var m=_r,v=Rs;if(Ft=0,xo=_r=null,Rs=0,(Je&6)!==0)throw Error(s(331));var w=Je;if(Je|=4,sT(m.current),tT(m,m.current,v,o),Je=w,yu(0,!1),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(oi,m)}catch{}return!0}finally{ie.p=f,X.T=u,ST(i,r)}}function CT(i,r,o){r=Xn(o,r),r=ep(i.stateNode,r,2),i=cr(i,r,2),i!==null&&(na(i,2),Wi(i))}function it(i,r,o){if(i.tag===3)CT(i,i,o);else for(;r!==null;){if(r.tag===3){CT(r,i,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(gr===null||!gr.has(u))){i=Xn(o,i),o=bE(2),u=cr(r,o,2),u!==null&&(AE(o,u,r,i),na(u,2),Wi(u));break}}r=r.return}}function bp(i,r,o){var u=i.pingCache;if(u===null){u=i.pingCache=new kI;var f=new Set;u.set(r,f)}else f=u.get(r),f===void 0&&(f=new Set,u.set(r,f));f.has(o)||(_p=!0,f.add(o),i=jI.bind(null,i,r,o),r.then(i,i))}function jI(i,r,o){var u=i.pingCache;u!==null&&u.delete(r),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,ut===i&&(je&o)===o&&(Tt===4||Tt===3&&(je&62914560)===je&&300>yn()-Yh?(Je&2)===0&&Po(i,0):yp|=o,Mo===je&&(Mo=0)),Wi(i)}function bT(i,r){r===0&&(r=Qc()),i=ga(i,r),i!==null&&(na(i,r),Wi(i))}function BI(i){var r=i.memoizedState,o=0;r!==null&&(o=r.retryLane),bT(i,o)}function FI(i,r){var o=0;switch(i.tag){case 31:case 13:var u=i.stateNode,f=i.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(r),bT(i,o)}function HI(i,r){return Bt(i,r)}var Zh=null,Vo=null,Ap=!1,ef=!1,Rp=!1,vr=0;function Wi(i){i!==Vo&&i.next===null&&(Vo===null?Zh=Vo=i:Vo=Vo.next=i),ef=!0,Ap||(Ap=!0,GI())}function yu(i,r){if(!Rp&&ef){Rp=!0;do for(var o=!1,u=Zh;u!==null;){if(i!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var v=u.suspendedLanes,w=u.pingedLanes;m=(1<<31-wt(42|i)+1)-1,m&=f&~(v&~w),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,NT(u,m))}else m=je,m=Di(u,u===ut?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||li(u,m)||(o=!0,NT(u,m));u=u.next}while(o);Rp=!1}}function qI(){AT()}function AT(){ef=Ap=!1;var i=0;vr!==0&&t1()&&(i=vr);for(var r=yn(),o=null,u=Zh;u!==null;){var f=u.next,m=RT(u,r);m===0?(u.next=null,o===null?Zh=f:o.next=f,f===null&&(Vo=o)):(o=u,(i!==0||(m&3)!==0)&&(ef=!0)),u=f}Ft!==0&&Ft!==5||yu(i),vr!==0&&(vr=0)}function RT(i,r){for(var o=i.suspendedLanes,u=i.pingedLanes,f=i.expirationTimes,m=i.pendingLanes&-62914561;0<m;){var v=31-wt(m),w=1<<v,O=f[v];O===-1?((w&o)===0||(w&u)!==0)&&(f[v]=nm(w,r)):O<=r&&(i.expiredLanes|=w),m&=~w}if(r=ut,o=je,o=Di(i,i===r?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,o===0||i===r&&(nt===2||nt===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&Ks(u),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||li(i,o)){if(r=o&-o,r===i.callbackPriority)return r;switch(u!==null&&Ks(u),cs(o)){case 2:case 8:o=Il;break;case 32:o=Qs;break;case 268435456:o=Hc;break;default:o=Qs}return u=IT.bind(null,i),o=Bt(o,u),i.callbackPriority=r,i.callbackNode=o,r}return u!==null&&u!==null&&Ks(u),i.callbackPriority=2,i.callbackNode=null,2}function IT(i,r){if(Ft!==0&&Ft!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(Jh()&&i.callbackNode!==o)return null;var u=je;return u=Di(i,i===ut?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(uT(i,u,r),RT(i,yn()),i.callbackNode!=null&&i.callbackNode===o?IT.bind(null,i):null)}function NT(i,r){if(Jh())return null;uT(i,r,!0)}function GI(){i1(function(){(Je&6)!==0?Bt(Rl,qI):AT()})}function Ip(){if(vr===0){var i=To;i===0&&(i=Ni,Ni<<=1,(Ni&261888)===0&&(Ni=256)),vr=i}return vr}function OT(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:ro(""+i)}function DT(i,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,i.id&&o.setAttribute("form",i.id),r.parentNode.insertBefore(o,r),i=new FormData(i),o.parentNode.removeChild(o),i}function YI(i,r,o,u,f){if(r==="submit"&&o&&o.stateNode===f){var m=OT((f[Kt]||null).action),v=u.submitter;v&&(r=(r=v[Kt]||null)?OT(r.formAction):v.getAttribute("formAction"),r!==null&&(m=r,v=null));var w=new Fi("action","action",null,u,f);i.push({event:w,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(vr!==0){var O=v?DT(f,v):new FormData(f);Qm(o,{pending:!0,data:O,method:f.method,action:m},null,O)}}else typeof m=="function"&&(w.preventDefault(),O=v?DT(f,v):new FormData(f),Qm(o,{pending:!0,data:O,method:f.method,action:m},m,O))},currentTarget:f}]})}}for(var Np=0;Np<hm.length;Np++){var Op=hm[Np],KI=Op.toLowerCase(),QI=Op[0].toUpperCase()+Op.slice(1);gi(KI,"on"+QI)}gi(lv,"onAnimationEnd"),gi(uv,"onAnimationIteration"),gi(cv,"onAnimationStart"),gi("dblclick","onDoubleClick"),gi("focusin","onFocus"),gi("focusout","onBlur"),gi(cI,"onTransitionRun"),gi(hI,"onTransitionStart"),gi(fI,"onTransitionCancel"),gi(hv,"onTransitionEnd"),Ui("onMouseEnter",["mouseout","mouseover"]),Ui("onMouseLeave",["mouseout","mouseover"]),Ui("onPointerEnter",["pointerout","pointerover"]),Ui("onPointerLeave",["pointerout","pointerover"]),Li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Li("onBeforeInput",["compositionend","keypress","textInput","paste"]),Li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vu));function MT(i,r){r=(r&4)!==0;for(var o=0;o<i.length;o++){var u=i[o],f=u.event;u=u.listeners;e:{var m=void 0;if(r)for(var v=u.length-1;0<=v;v--){var w=u[v],O=w.instance,F=w.currentTarget;if(w=w.listener,O!==m&&f.isPropagationStopped())break e;m=w,f.currentTarget=F;try{m(f)}catch($){ph($)}f.currentTarget=null,m=O}else for(v=0;v<u.length;v++){if(w=u[v],O=w.instance,F=w.currentTarget,w=w.listener,O!==m&&f.isPropagationStopped())break e;m=w,f.currentTarget=F;try{m(f)}catch($){ph($)}f.currentTarget=null,m=O}}}}function Le(i,r){var o=r[eo];o===void 0&&(o=r[eo]=new Set);var u=i+"__bubble";o.has(u)||(xT(r,i,2,!1),o.add(u))}function Dp(i,r,o){var u=0;r&&(u|=4),xT(o,i,u,r)}var tf="_reactListening"+Math.random().toString(36).slice(2);function Mp(i){if(!i[tf]){i[tf]=!0,Dl.forEach(function(o){o!=="selectionchange"&&(WI.has(o)||Dp(o,!1,i),Dp(o,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[tf]||(r[tf]=!0,Dp("selectionchange",!1,r))}}function xT(i,r,o,u){switch(lS(r)){case 2:var f=w1;break;case 8:f=C1;break;default:f=Kp}o=f.bind(null,r,o,i),f=void 0,!la||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),u?f!==void 0?i.addEventListener(r,o,{capture:!0,passive:f}):i.addEventListener(r,o,!0):f!==void 0?i.addEventListener(r,o,{passive:f}):i.addEventListener(r,o,!1)}function xp(i,r,o,u,f){var m=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var w=u.stateNode.containerInfo;if(w===f)break;if(v===4)for(v=u.return;v!==null;){var O=v.tag;if((O===3||O===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;w!==null;){if(v=ki(w),v===null)return;if(O=v.tag,O===5||O===6||O===26||O===27){u=m=v;continue e}w=w.parentNode}}u=u.return}er(function(){var F=m,$=Yn(o),Z=[];e:{var G=fv.get(i);if(G!==void 0){var Q=Fi,fe=i;switch(i){case"keypress":if(ca(o)===0)break e;case"keydown":case"keyup":Q=fh;break;case"focusin":fe="focus",Q=fa;break;case"focusout":fe="blur",Q=fa;break;case"beforeblur":case"afterblur":Q=fa;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=ql;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=ih;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=_;break;case lv:case uv:case cv:Q=rh;break;case hv:Q=C;break;case"scroll":case"scrollend":Q=Hl;break;case"wheel":Q=Y;break;case"copy":case"cut":case"paste":Q=ah;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=ds;break;case"toggle":case"beforetoggle":Q=Ie}var ve=(r&4)!==0,ot=!ve&&(i==="scroll"||i==="scrollend"),L=ve?G!==null?G+"Capture":null:G;ve=[];for(var x=F,B;x!==null;){var J=x;if(B=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||B===null||L===null||(J=fi(x,L),J!=null&&ve.push(Eu(x,J,B))),ot)break;x=x.return}0<ve.length&&(G=new Q(G,fe,null,o,$),Z.push({event:G,listeners:ve}))}}if((r&7)===0){e:{if(G=i==="mouseover"||i==="pointerover",Q=i==="mouseout"||i==="pointerout",G&&o!==jl&&(fe=o.relatedTarget||o.fromElement)&&(ki(fe)||fe[xi]))break e;if((Q||G)&&(G=$.window===$?$:(G=$.ownerDocument)?G.defaultView||G.parentWindow:window,Q?(fe=o.relatedTarget||o.toElement,Q=F,fe=fe?ki(fe):null,fe!==null&&(ot=l(fe),ve=fe.tag,fe!==ot||ve!==5&&ve!==27&&ve!==6)&&(fe=null)):(Q=null,fe=F),Q!==fe)){if(ve=ql,J="onMouseLeave",L="onMouseEnter",x="mouse",(i==="pointerout"||i==="pointerover")&&(ve=ds,J="onPointerLeave",L="onPointerEnter",x="pointer"),ot=Q==null?G:xn(Q),B=fe==null?G:xn(fe),G=new ve(J,x+"leave",Q,o,$),G.target=ot,G.relatedTarget=B,J=null,ki($)===F&&(ve=new ve(L,x+"enter",fe,o,$),ve.target=B,ve.relatedTarget=ot,J=ve),ot=J,Q&&fe)t:{for(ve=XI,L=Q,x=fe,B=0,J=L;J;J=ve(J))B++;J=0;for(var pe=x;pe;pe=ve(pe))J++;for(;0<B-J;)L=ve(L),B--;for(;0<J-B;)x=ve(x),J--;for(;B--;){if(L===x||x!==null&&L===x.alternate){ve=L;break t}L=ve(L),x=ve(x)}ve=null}else ve=null;Q!==null&&PT(Z,G,Q,ve,!1),fe!==null&&ot!==null&&PT(Z,ot,fe,ve,!0)}}e:{if(G=F?xn(F):window,Q=G.nodeName&&G.nodeName.toLowerCase(),Q==="select"||Q==="input"&&G.type==="file")var Ke=$y;else if(Wy(G))if(Jy)Ke=oI;else{Ke=rI;var de=sI}else Q=G.nodeName,!Q||Q.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&so(F.elementType)&&(Ke=$y):Ke=aI;if(Ke&&(Ke=Ke(i,F))){Xy(Z,Ke,o,$);break e}de&&de(i,G,F),i==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&Ll(G,"number",G.value)}switch(de=F?xn(F):window,i){case"focusin":(Wy(de)||de.contentEditable==="true")&&(fo=de,lm=F,Wl=null);break;case"focusout":Wl=lm=fo=null;break;case"mousedown":um=!0;break;case"contextmenu":case"mouseup":case"dragend":um=!1,av(Z,o,$);break;case"selectionchange":if(uI)break;case"keydown":case"keyup":av(Z,o,$)}var Oe;if($e)e:{switch(i){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else ho?da(i,o)&&(Be="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(Be="onCompositionStart");Be&&(Gi&&o.locale!=="ko"&&(ho||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&ho&&(Oe=Fl()):(Bi=$,Bl="value"in Bi?Bi.value:Bi.textContent,ho=!0)),de=nf(F,Be),0<de.length&&(Be=new qi(Be,i,null,o,$),Z.push({event:Be,listeners:de}),Oe?Be.data=Oe:(Oe=co(o),Oe!==null&&(Be.data=Oe)))),(Oe=Qn?eI(i,o):tI(i,o))&&(Be=nf(F,"onBeforeInput"),0<Be.length&&(de=new qi("onBeforeInput","beforeinput",null,o,$),Z.push({event:de,listeners:Be}),de.data=Oe)),YI(Z,i,F,o,$)}MT(Z,r)})}function Eu(i,r,o){return{instance:i,listener:r,currentTarget:o}}function nf(i,r){for(var o=r+"Capture",u=[];i!==null;){var f=i,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=fi(i,o),f!=null&&u.unshift(Eu(i,f,m)),f=fi(i,r),f!=null&&u.push(Eu(i,f,m))),i.tag===3)return u;i=i.return}return[]}function XI(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function PT(i,r,o,u,f){for(var m=r._reactName,v=[];o!==null&&o!==u;){var w=o,O=w.alternate,F=w.stateNode;if(w=w.tag,O!==null&&O===u)break;w!==5&&w!==26&&w!==27||F===null||(O=F,f?(F=fi(o,m),F!=null&&v.unshift(Eu(o,F,O))):f||(F=fi(o,m),F!=null&&v.push(Eu(o,F,O)))),o=o.return}v.length!==0&&i.push({event:r,listeners:v})}var $I=/\r\n?/g,JI=/\u0000|\uFFFD/g;function kT(i){return(typeof i=="string"?i:""+i).replace($I,`
`).replace(JI,"")}function VT(i,r){return r=kT(r),kT(i)===r}function at(i,r,o,u,f,m){switch(o){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||wn(i,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&wn(i,""+u);break;case"className":Pn(i,"class",u);break;case"tabIndex":Pn(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Pn(i,o,u);break;case"style":zl(i,u,m);break;case"data":if(r!=="object"){Pn(i,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||o!=="href")){i.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=ro(""+u),i.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(r!=="input"&&at(i,r,"name",f.name,f,null),at(i,r,"formEncType",f.formEncType,f,null),at(i,r,"formMethod",f.formMethod,f,null),at(i,r,"formTarget",f.formTarget,f,null)):(at(i,r,"encType",f.encType,f,null),at(i,r,"method",f.method,f,null),at(i,r,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=ro(""+u),i.setAttribute(o,u);break;case"onClick":u!=null&&(i.onclick=hi);break;case"onScroll":u!=null&&Le("scroll",i);break;case"onScrollEnd":u!=null&&Le("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(s(60));i.innerHTML=o}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}o=ro(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""+u):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":u===!0?i.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,u):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(o,u):i.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(o):i.setAttribute(o,u);break;case"popover":Le("beforetoggle",i),Le("toggle",i),no(i,"popover",u);break;case"xlinkActuate":Mt(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Mt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Mt(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Mt(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Mt(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Mt(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Mt(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Mt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Mt(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":no(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=nh.get(o)||o,no(i,o,u))}}function Pp(i,r,o,u,f,m){switch(o){case"style":zl(i,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(s(60));i.innerHTML=o}}break;case"children":typeof u=="string"?wn(i,u):(typeof u=="number"||typeof u=="bigint")&&wn(i,""+u);break;case"onScroll":u!=null&&Le("scroll",i);break;case"onScrollEnd":u!=null&&Le("scrollend",i);break;case"onClick":u!=null&&(i.onclick=hi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ml.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),m=i[Kt]||null,m=m!=null?m[o]:null,typeof m=="function"&&i.removeEventListener(r,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(r,u,f);break e}o in i?i[o]=u:u===!0?i.setAttribute(o,""):no(i,o,u)}}}function on(i,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",i),Le("load",i);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var v=o[m];if(v!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:at(i,r,m,v,o,null)}}f&&at(i,r,"srcSet",o.srcSet,o,null),u&&at(i,r,"src",o.src,o,null);return;case"input":Le("invalid",i);var w=m=v=f=null,O=null,F=null;for(u in o)if(o.hasOwnProperty(u)){var $=o[u];if($!=null)switch(u){case"name":f=$;break;case"type":v=$;break;case"checked":O=$;break;case"defaultChecked":F=$;break;case"value":m=$;break;case"defaultValue":w=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,r));break;default:at(i,r,u,$,o,null)}}Zc(i,m,w,O,F,v,f,!1);return;case"select":Le("invalid",i),u=v=m=null;for(f in o)if(o.hasOwnProperty(f)&&(w=o[f],w!=null))switch(f){case"value":m=w;break;case"defaultValue":v=w;break;case"multiple":u=w;default:at(i,r,f,w,o,null)}r=m,o=v,i.multiple=!!u,r!=null?Xs(i,!!u,r,!1):o!=null&&Xs(i,!!u,o,!0);return;case"textarea":Le("invalid",i),m=f=u=null;for(v in o)if(o.hasOwnProperty(v)&&(w=o[v],w!=null))switch(v){case"value":u=w;break;case"defaultValue":f=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:at(i,r,v,w,o,null)}$s(i,u,f,m);return;case"option":for(O in o)if(o.hasOwnProperty(O)&&(u=o[O],u!=null))switch(O){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:at(i,r,O,u,o,null)}return;case"dialog":Le("beforetoggle",i),Le("toggle",i),Le("cancel",i),Le("close",i);break;case"iframe":case"object":Le("load",i);break;case"video":case"audio":for(u=0;u<vu.length;u++)Le(vu[u],i);break;case"image":Le("error",i),Le("load",i);break;case"details":Le("toggle",i);break;case"embed":case"source":case"link":Le("error",i),Le("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in o)if(o.hasOwnProperty(F)&&(u=o[F],u!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:at(i,r,F,u,o,null)}return;default:if(so(r)){for($ in o)o.hasOwnProperty($)&&(u=o[$],u!==void 0&&Pp(i,r,$,u,o,void 0));return}}for(w in o)o.hasOwnProperty(w)&&(u=o[w],u!=null&&at(i,r,w,u,o,null))}function ZI(i,r,o,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,v=null,w=null,O=null,F=null,$=null;for(Q in o){var Z=o[Q];if(o.hasOwnProperty(Q)&&Z!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":O=Z;default:u.hasOwnProperty(Q)||at(i,r,Q,null,u,Z)}}for(var G in u){var Q=u[G];if(Z=o[G],u.hasOwnProperty(G)&&(Q!=null||Z!=null))switch(G){case"type":m=Q;break;case"name":f=Q;break;case"checked":F=Q;break;case"defaultChecked":$=Q;break;case"value":v=Q;break;case"defaultValue":w=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,r));break;default:Q!==Z&&at(i,r,G,Q,u,Z)}}io(i,v,w,O,F,$,m,f);return;case"select":Q=v=w=G=null;for(m in o)if(O=o[m],o.hasOwnProperty(m)&&O!=null)switch(m){case"value":break;case"multiple":Q=O;default:u.hasOwnProperty(m)||at(i,r,m,null,u,O)}for(f in u)if(m=u[f],O=o[f],u.hasOwnProperty(f)&&(m!=null||O!=null))switch(f){case"value":G=m;break;case"defaultValue":w=m;break;case"multiple":v=m;default:m!==O&&at(i,r,f,m,u,O)}r=w,o=v,u=Q,G!=null?Xs(i,!!o,G,!1):!!u!=!!o&&(r!=null?Xs(i,!!o,r,!0):Xs(i,!!o,o?[]:"",!1));return;case"textarea":Q=G=null;for(w in o)if(f=o[w],o.hasOwnProperty(w)&&f!=null&&!u.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:at(i,r,w,null,u,f)}for(v in u)if(f=u[v],m=o[v],u.hasOwnProperty(v)&&(f!=null||m!=null))switch(v){case"value":G=f;break;case"defaultValue":Q=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==m&&at(i,r,v,f,u,m)}eh(i,G,Q);return;case"option":for(var fe in o)if(G=o[fe],o.hasOwnProperty(fe)&&G!=null&&!u.hasOwnProperty(fe))switch(fe){case"selected":i.selected=!1;break;default:at(i,r,fe,null,u,G)}for(O in u)if(G=u[O],Q=o[O],u.hasOwnProperty(O)&&G!==Q&&(G!=null||Q!=null))switch(O){case"selected":i.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:at(i,r,O,G,u,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in o)G=o[ve],o.hasOwnProperty(ve)&&G!=null&&!u.hasOwnProperty(ve)&&at(i,r,ve,null,u,G);for(F in u)if(G=u[F],Q=o[F],u.hasOwnProperty(F)&&G!==Q&&(G!=null||Q!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,r));break;default:at(i,r,F,G,u,Q)}return;default:if(so(r)){for(var ot in o)G=o[ot],o.hasOwnProperty(ot)&&G!==void 0&&!u.hasOwnProperty(ot)&&Pp(i,r,ot,void 0,u,G);for($ in u)G=u[$],Q=o[$],!u.hasOwnProperty($)||G===Q||G===void 0&&Q===void 0||Pp(i,r,$,G,u,Q);return}}for(var L in o)G=o[L],o.hasOwnProperty(L)&&G!=null&&!u.hasOwnProperty(L)&&at(i,r,L,null,u,G);for(Z in u)G=u[Z],Q=o[Z],!u.hasOwnProperty(Z)||G===Q||G==null&&Q==null||at(i,r,Z,G,u,Q)}function LT(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function e1(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],m=f.transferSize,v=f.initiatorType,w=f.duration;if(m&&w&&LT(v)){for(v=0,w=f.responseEnd,u+=1;u<o.length;u++){var O=o[u],F=O.startTime;if(F>w)break;var $=O.transferSize,Z=O.initiatorType;$&&LT(Z)&&(O=O.responseEnd,v+=$*(O<w?1:(w-F)/(O-F)))}if(--u,r+=8*(m+v)/(f.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var kp=null,Vp=null;function sf(i){return i.nodeType===9?i:i.ownerDocument}function UT(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zT(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function Lp(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Up=null;function t1(){var i=window.event;return i&&i.type==="popstate"?i===Up?!1:(Up=i,!0):(Up=null,!1)}var jT=typeof setTimeout=="function"?setTimeout:void 0,n1=typeof clearTimeout=="function"?clearTimeout:void 0,BT=typeof Promise=="function"?Promise:void 0,i1=typeof queueMicrotask=="function"?queueMicrotask:typeof BT<"u"?function(i){return BT.resolve(null).then(i).catch(s1)}:jT;function s1(i){setTimeout(function(){throw i})}function Er(i){return i==="head"}function FT(i,r){var o=r,u=0;do{var f=o.nextSibling;if(i.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){i.removeChild(f),jo(r);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Tu(i.ownerDocument.documentElement);else if(o==="head"){o=i.ownerDocument.head,Tu(o);for(var m=o.firstChild;m;){var v=m.nextSibling,w=m.nodeName;m[Pi]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=v}}else o==="body"&&Tu(i.ownerDocument.body);o=f}while(o);jo(r)}function HT(i,r){var o=i;i=0;do{var u=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(i===0)break;i--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||i++;o=u}while(o)}function zp(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":zp(o),to(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function r1(i,r,o,u){for(;i.nodeType===1;){var f=o;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Pi])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(m=i.getAttribute("rel"),m==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(m!==f.rel||i.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(m=i.getAttribute("src"),(m!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===m)return i}else return i;if(i=ti(i.nextSibling),i===null)break}return null}function a1(i,r,o){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=ti(i.nextSibling),i===null))return null;return i}function qT(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=ti(i.nextSibling),i===null))return null;return i}function jp(i){return i.data==="$?"||i.data==="$~"}function Bp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function o1(i,r){var o=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||o.readyState!=="loading")r();else{var u=function(){r(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function ti(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var Fp=null;function GT(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var o=i.data;if(o==="/$"||o==="/&"){if(r===0)return ti(i.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}i=i.nextSibling}return null}function YT(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return i;r--}else o!=="/$"&&o!=="/&"||r++}i=i.previousSibling}return null}function KT(i,r,o){switch(r=sf(o),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Tu(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);to(i)}var ni=new Map,QT=new Set;function rf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Is=ie.d;ie.d={f:l1,r:u1,D:c1,C:h1,L:f1,m:d1,X:p1,S:m1,M:g1};function l1(){var i=Is.f(),r=Wh();return i||r}function u1(i){var r=Gn(i);r!==null&&r.tag===5&&r.type==="form"?hE(r):Is.r(i)}var Lo=typeof document>"u"?null:document;function WT(i,r,o){var u=Lo;if(u&&typeof r=="string"&&r){var f=Sn(r);f='link[rel="'+i+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),QT.has(f)||(QT.add(f),i={rel:i,crossOrigin:o,href:r},u.querySelector(f)===null&&(r=u.createElement("link"),on(r,"link",i),Dt(r),u.head.appendChild(r)))}}function c1(i){Is.D(i),WT("dns-prefetch",i,null)}function h1(i,r){Is.C(i,r),WT("preconnect",i,r)}function f1(i,r,o){Is.L(i,r,o);var u=Lo;if(u&&i&&r){var f='link[rel="preload"][as="'+Sn(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Sn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Sn(o.imageSizes)+'"]')):f+='[href="'+Sn(i)+'"]';var m=f;switch(r){case"style":m=Uo(i);break;case"script":m=zo(i)}ni.has(m)||(i=E({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:i,as:r},o),ni.set(m,i),u.querySelector(f)!==null||r==="style"&&u.querySelector(Su(m))||r==="script"&&u.querySelector(wu(m))||(r=u.createElement("link"),on(r,"link",i),Dt(r),u.head.appendChild(r)))}}function d1(i,r){Is.m(i,r);var o=Lo;if(o&&i){var u=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+Sn(u)+'"][href="'+Sn(i)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=zo(i)}if(!ni.has(m)&&(i=E({rel:"modulepreload",href:i},r),ni.set(m,i),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(wu(m)))return}u=o.createElement("link"),on(u,"link",i),Dt(u),o.head.appendChild(u)}}}function m1(i,r,o){Is.S(i,r,o);var u=Lo;if(u&&i){var f=Vi(u).hoistableStyles,m=Uo(i);r=r||"default";var v=f.get(m);if(!v){var w={loading:0,preload:null};if(v=u.querySelector(Su(m)))w.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":r},o),(o=ni.get(m))&&Hp(i,o);var O=v=u.createElement("link");Dt(O),on(O,"link",i),O._p=new Promise(function(F,$){O.onload=F,O.onerror=$}),O.addEventListener("load",function(){w.loading|=1}),O.addEventListener("error",function(){w.loading|=2}),w.loading|=4,af(v,r,u)}v={type:"stylesheet",instance:v,count:1,state:w},f.set(m,v)}}}function p1(i,r){Is.X(i,r);var o=Lo;if(o&&i){var u=Vi(o).hoistableScripts,f=zo(i),m=u.get(f);m||(m=o.querySelector(wu(f)),m||(i=E({src:i,async:!0},r),(r=ni.get(f))&&qp(i,r),m=o.createElement("script"),Dt(m),on(m,"link",i),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function g1(i,r){Is.M(i,r);var o=Lo;if(o&&i){var u=Vi(o).hoistableScripts,f=zo(i),m=u.get(f);m||(m=o.querySelector(wu(f)),m||(i=E({src:i,async:!0,type:"module"},r),(r=ni.get(f))&&qp(i,r),m=o.createElement("script"),Dt(m),on(m,"link",i),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function XT(i,r,o,u){var f=(f=_e.current)?rf(f):null;if(!f)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=Uo(o.href),o=Vi(f).hoistableStyles,u=o.get(r),u||(u={type:"style",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=Uo(o.href);var m=Vi(f).hoistableStyles,v=m.get(i);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(i,v),(m=f.querySelector(Su(i)))&&!m._p&&(v.instance=m,v.state.loading=5),ni.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ni.set(i,o),m||_1(f,i,o,v.state))),r&&u===null)throw Error(s(528,""));return v}if(r&&u!==null)throw Error(s(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=zo(o),o=Vi(f).hoistableScripts,u=o.get(r),u||(u={type:"script",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Uo(i){return'href="'+Sn(i)+'"'}function Su(i){return'link[rel="stylesheet"]['+i+"]"}function $T(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function _1(i,r,o,u){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=i.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),on(r,"link",o),Dt(r),i.head.appendChild(r))}function zo(i){return'[src="'+Sn(i)+'"]'}function wu(i){return"script[async]"+i}function JT(i,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var u=i.querySelector('style[data-href~="'+Sn(o.href)+'"]');if(u)return r.instance=u,Dt(u),u;var f=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Dt(u),on(u,"style",f),af(u,o.precedence,i),r.instance=u;case"stylesheet":f=Uo(o.href);var m=i.querySelector(Su(f));if(m)return r.state.loading|=4,r.instance=m,Dt(m),m;u=$T(o),(f=ni.get(f))&&Hp(u,f),m=(i.ownerDocument||i).createElement("link"),Dt(m);var v=m;return v._p=new Promise(function(w,O){v.onload=w,v.onerror=O}),on(m,"link",u),r.state.loading|=4,af(m,o.precedence,i),r.instance=m;case"script":return m=zo(o.src),(f=i.querySelector(wu(m)))?(r.instance=f,Dt(f),f):(u=o,(f=ni.get(m))&&(u=E({},o),qp(u,f)),i=i.ownerDocument||i,f=i.createElement("script"),Dt(f),on(f,"link",u),i.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,af(u,o.precedence,i));return r.instance}function af(i,r,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,v=0;v<u.length;v++){var w=u[v];if(w.dataset.precedence===r)m=w;else if(m!==f)break}m?m.parentNode.insertBefore(i,m.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(i,r.firstChild))}function Hp(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function qp(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var of=null;function ZT(i,r,o){if(of===null){var u=new Map,f=of=new Map;f.set(o,u)}else f=of,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(i))return u;for(u.set(i,null),o=o.getElementsByTagName(i),f=0;f<o.length;f++){var m=o[f];if(!(m[Pi]||m[Ot]||i==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(r)||"";v=i+v;var w=u.get(v);w?w.push(m):u.set(v,[m])}}return u}function eS(i,r,o){i=i.ownerDocument||i,i.head.insertBefore(o,r==="title"?i.querySelector("head > title"):null)}function y1(i,r,o){if(o===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function tS(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function v1(i,r,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=Uo(u.href),m=r.querySelector(Su(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=lf.bind(i),r.then(i,i)),o.state.loading|=4,o.instance=m,Dt(m);return}m=r.ownerDocument||r,u=$T(u),(f=ni.get(f))&&Hp(u,f),m=m.createElement("link"),Dt(m);var v=m;v._p=new Promise(function(w,O){v.onload=w,v.onerror=O}),on(m,"link",u),o.instance=m}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(i.count++,o=lf.bind(i),r.addEventListener("load",o),r.addEventListener("error",o))}}var Gp=0;function E1(i,r){return i.stylesheets&&i.count===0&&cf(i,i.stylesheets),0<i.count||0<i.imgCount?function(o){var u=setTimeout(function(){if(i.stylesheets&&cf(i,i.stylesheets),i.unsuspend){var m=i.unsuspend;i.unsuspend=null,m()}},6e4+r);0<i.imgBytes&&Gp===0&&(Gp=62500*e1());var f=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&cf(i,i.stylesheets),i.unsuspend)){var m=i.unsuspend;i.unsuspend=null,m()}},(i.imgBytes>Gp?50:800)+r);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function lf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)cf(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var uf=null;function cf(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,uf=new Map,r.forEach(T1,i),uf=null,lf.call(i))}function T1(i,r){if(!(r.state.loading&4)){var o=uf.get(i);if(o)var u=o.get(null);else{o=new Map,uf.set(i,o);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var v=f[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),u=v)}u&&o.set(null,u)}f=r.instance,v=f.getAttribute("data-precedence"),m=o.get(v)||u,m===u&&o.set(null,f),o.set(v,f),this.count++,u=lf.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),r.state.loading|=4}}var Cu={$$typeof:re,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function S1(i,r,o,u,f,m,v,w,O){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mi(0),this.hiddenUpdates=Mi(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function nS(i,r,o,u,f,m,v,w,O,F,$,Z){return i=new S1(i,r,o,v,O,F,$,Z,w),r=1,m===!0&&(r|=24),m=Vn(3,null,null,r),i.current=m,m.stateNode=i,r=Cm(),r.refCount++,i.pooledCache=r,r.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:r},Im(m),i}function iS(i){return i?(i=go,i):go}function sS(i,r,o,u,f,m){f=iS(f),u.context===null?u.context=f:u.pendingContext=f,u=ur(r),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=cr(i,u,r),o!==null&&(In(o,i,r),nu(o,i,r))}function rS(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<r?o:r}}function Yp(i,r){rS(i,r),(i=i.alternate)&&rS(i,r)}function aS(i){if(i.tag===13||i.tag===31){var r=ga(i,67108864);r!==null&&In(r,i,67108864),Yp(i,67108864)}}function oS(i){if(i.tag===13||i.tag===31){var r=Bn();r=sa(r);var o=ga(i,r);o!==null&&In(o,i,r),Yp(i,r)}}var hf=!0;function w1(i,r,o,u){var f=X.T;X.T=null;var m=ie.p;try{ie.p=2,Kp(i,r,o,u)}finally{ie.p=m,X.T=f}}function C1(i,r,o,u){var f=X.T;X.T=null;var m=ie.p;try{ie.p=8,Kp(i,r,o,u)}finally{ie.p=m,X.T=f}}function Kp(i,r,o,u){if(hf){var f=Qp(u);if(f===null)xp(i,r,u,ff,o),uS(i,u);else if(A1(f,i,r,o,u))u.stopPropagation();else if(uS(i,u),r&4&&-1<b1.indexOf(i)){for(;f!==null;){var m=Gn(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Oi(m.pendingLanes);if(v!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;v;){var O=1<<31-wt(v);w.entanglements[1]|=O,v&=~O}Wi(m),(Je&6)===0&&(Kh=yn()+500,yu(0))}}break;case 31:case 13:w=ga(m,2),w!==null&&In(w,m,2),Wh(),Yp(m,2)}if(m=Qp(u),m===null&&xp(i,r,u,ff,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else xp(i,r,u,null,o)}}function Qp(i){return i=Yn(i),Wp(i)}var ff=null;function Wp(i){if(ff=null,i=ki(i),i!==null){var r=l(i);if(r===null)i=null;else{var o=r.tag;if(o===13){if(i=c(r),i!==null)return i;i=null}else if(o===31){if(i=d(r),i!==null)return i;i=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return ff=i,null}function lS(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ea()){case Rl:return 2;case Il:return 8;case Qs:case tm:return 32;case Hc:return 268435456;default:return 32}default:return 32}}var Xp=!1,Tr=null,Sr=null,wr=null,bu=new Map,Au=new Map,Cr=[],b1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function uS(i,r){switch(i){case"focusin":case"focusout":Tr=null;break;case"dragenter":case"dragleave":Sr=null;break;case"mouseover":case"mouseout":wr=null;break;case"pointerover":case"pointerout":bu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Au.delete(r.pointerId)}}function Ru(i,r,o,u,f,m){return i===null||i.nativeEvent!==m?(i={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},r!==null&&(r=Gn(r),r!==null&&aS(r)),i):(i.eventSystemFlags|=u,r=i.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),i)}function A1(i,r,o,u,f){switch(r){case"focusin":return Tr=Ru(Tr,i,r,o,u,f),!0;case"dragenter":return Sr=Ru(Sr,i,r,o,u,f),!0;case"mouseover":return wr=Ru(wr,i,r,o,u,f),!0;case"pointerover":var m=f.pointerId;return bu.set(m,Ru(bu.get(m)||null,i,r,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,Au.set(m,Ru(Au.get(m)||null,i,r,o,u,f)),!0}return!1}function cS(i){var r=ki(i.target);if(r!==null){var o=l(r);if(o!==null){if(r=o.tag,r===13){if(r=c(o),r!==null){i.blockedOn=r,ui(i.priority,function(){oS(o)});return}}else if(r===31){if(r=d(o),r!==null){i.blockedOn=r,ui(i.priority,function(){oS(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function df(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var o=Qp(i.nativeEvent);if(o===null){o=i.nativeEvent;var u=new o.constructor(o.type,o);jl=u,o.target.dispatchEvent(u),jl=null}else return r=Gn(o),r!==null&&aS(r),i.blockedOn=o,!1;r.shift()}return!0}function hS(i,r,o){df(i)&&o.delete(r)}function R1(){Xp=!1,Tr!==null&&df(Tr)&&(Tr=null),Sr!==null&&df(Sr)&&(Sr=null),wr!==null&&df(wr)&&(wr=null),bu.forEach(hS),Au.forEach(hS)}function mf(i,r){i.blockedOn===r&&(i.blockedOn=null,Xp||(Xp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,R1)))}var pf=null;function fS(i){pf!==i&&(pf=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){pf===i&&(pf=null);for(var r=0;r<i.length;r+=3){var o=i[r],u=i[r+1],f=i[r+2];if(typeof u!="function"){if(Wp(u||o)===null)continue;break}var m=Gn(o);m!==null&&(i.splice(r,3),r-=3,Qm(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function jo(i){function r(O){return mf(O,i)}Tr!==null&&mf(Tr,i),Sr!==null&&mf(Sr,i),wr!==null&&mf(wr,i),bu.forEach(r),Au.forEach(r);for(var o=0;o<Cr.length;o++){var u=Cr[o];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Cr.length&&(o=Cr[0],o.blockedOn===null);)cS(o),o.blockedOn===null&&Cr.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],v=f[Kt]||null;if(typeof m=="function")v||fS(o);else if(v){var w=null;if(m&&m.hasAttribute("formAction")){if(f=m,v=m[Kt]||null)w=v.formAction;else if(Wp(f)!==null)continue}else w=v.action;typeof w=="function"?o[u+1]=w:(o.splice(u,3),u-=3),fS(o)}}}function dS(){function i(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function $p(i){this._internalRoot=i}gf.prototype.render=$p.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var o=r.current,u=Bn();sS(o,u,i,r,null,null)},gf.prototype.unmount=$p.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;sS(i.current,2,null,i,null,null),Wh(),r[xi]=null}};function gf(i){this._internalRoot=i}gf.prototype.unstable_scheduleHydration=function(i){if(i){var r=Wc();i={blockedOn:null,target:i,priority:r};for(var o=0;o<Cr.length&&r!==0&&r<Cr[o].priority;o++);Cr.splice(o,0,i),o===0&&cS(i)}};var mS=e.version;if(mS!=="19.2.0")throw Error(s(527,mS,"19.2.0"));ie.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=g(r),i=i!==null?y(i):null,i=i===null?null:i.stateNode,i};var I1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_f.isDisabled&&_f.supportsFiber)try{oi=_f.inject(I1),tn=_f}catch{}}return Nu.createRoot=function(i,r){if(!a(i))throw Error(s(299));var o=!1,u="",f=TE,m=SE,v=wE;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError)),r=nS(i,1,!1,null,null,o,u,null,f,m,v,dS),i[xi]=r.current,Mp(i),new $p(r)},Nu.hydrateRoot=function(i,r,o){if(!a(i))throw Error(s(299));var u=!1,f="",m=TE,v=SE,w=wE,O=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.formState!==void 0&&(O=o.formState)),r=nS(i,1,!0,r,o??null,u,f,O,m,v,w,dS),r.context=iS(null),o=r.current,u=Bn(),u=sa(u),f=ur(u),f.callback=null,cr(o,f,u),o=u,r.current.lanes=o,na(r,o),Wi(r),i[xi]=r.current,Mp(i),new gf(r)},Nu.version="19.2.0",Nu}var CS;function U1(){if(CS)return eg.exports;CS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),eg.exports=L1(),eg.exports}var z1=U1();var bS="popstate";function j1(n={}){function e(s,a){let{pathname:l,search:c,hash:d}=s.location;return Ng("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(s,a){return typeof a=="string"?a:tc(a)}return F1(e,t,null,n)}function vt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function bi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function B1(){return Math.random().toString(36).substring(2,10)}function AS(n,e){return{usr:n.state,key:n.key,idx:e}}function Ng(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ml(e):e,state:t,key:e&&e.key||s||B1()}}function tc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ml(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function F1(n,e,t,s={}){let{window:a=document.defaultView,v5Compat:l=!1}=s,c=a.history,d="POP",p=null,g=y();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function y(){return(c.state||{idx:null}).idx}function E(){d="POP";let q=y(),ne=q==null?null:q-g;g=q,p&&p({action:d,location:K.location,delta:ne})}function S(q,ne){d="PUSH";let ee=Ng(K.location,q,ne);g=y()+1;let re=AS(ee,g),Ee=K.createHref(ee);try{c.pushState(re,"",Ee)}catch(Ae){if(Ae instanceof DOMException&&Ae.name==="DataCloneError")throw Ae;a.location.assign(Ee)}l&&p&&p({action:d,location:K.location,delta:1})}function R(q,ne){d="REPLACE";let ee=Ng(K.location,q,ne);g=y();let re=AS(ee,g),Ee=K.createHref(ee);c.replaceState(re,"",Ee),l&&p&&p({action:d,location:K.location,delta:0})}function k(q){return H1(q)}let K={get action(){return d},get location(){return n(a,c)},listen(q){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(bS,E),p=q,()=>{a.removeEventListener(bS,E),p=null}},createHref(q){return e(a,q)},createURL:k,encodeLocation(q){let ne=k(q);return{pathname:ne.pathname,search:ne.search,hash:ne.hash}},push:S,replace:R,go(q){return c.go(q)}};return K}function H1(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),vt(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:tc(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function zw(n,e,t="/"){return q1(n,e,t,!1)}function q1(n,e,t,s){let a=typeof e=="string"?ml(e):e,l=Ls(a.pathname||"/",t);if(l==null)return null;let c=jw(n);G1(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let g=nN(l);d=eN(c[p],g,s)}return d}function jw(n,e=[],t=[],s="",a=!1){let l=(c,d,p=a,g)=>{let y={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(s)&&p)return;vt(y.relativePath.startsWith(s),`Absolute route path "${y.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(s.length)}let E=xs([s,y.relativePath]),S=t.concat(y);c.children&&c.children.length>0&&(vt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),jw(c.children,e,S,E,p)),!(c.path==null&&!c.index)&&e.push({path:E,score:J1(E,c.index),routesMeta:S})};return n.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let p of Bw(c.path))l(c,d,!0,p)}),e}function Bw(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let c=Bw(s.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),a&&d.push(...c),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function G1(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Z1(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var Y1=/^:[\w-]+$/,K1=3,Q1=2,W1=1,X1=10,$1=-2,RS=n=>n==="*";function J1(n,e){let t=n.split("/"),s=t.length;return t.some(RS)&&(s+=$1),e&&(s+=Q1),t.filter(a=>!RS(a)).reduce((a,l)=>a+(Y1.test(l)?K1:l===""?W1:X1),s)}function Z1(n,e){return n.length===e.length&&n.slice(0,-1).every((s,a)=>s===e[a])?n[n.length-1]-e[e.length-1]:0}function eN(n,e,t=!1){let{routesMeta:s}=n,a={},l="/",c=[];for(let d=0;d<s.length;++d){let p=s[d],g=d===s.length-1,y=l==="/"?e:e.slice(l.length)||"/",E=jf({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},y),S=p.route;if(!E&&g&&t&&!s[s.length-1].route.index&&(E=jf({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},y)),!E)return null;Object.assign(a,E.params),c.push({params:a,pathname:xs([l,E.pathname]),pathnameBase:oN(xs([l,E.pathnameBase])),route:S}),E.pathnameBase!=="/"&&(l=xs([l,E.pathnameBase]))}return c}function jf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=tN(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:s.reduce((g,{paramName:y,isOptional:E},S)=>{if(y==="*"){let k=d[S]||"";c=l.slice(0,l.length-k.length).replace(/(.)\/+$/,"$1")}const R=d[S];return E&&!R?g[y]=void 0:g[y]=(R||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function tN(n,e=!1,t=!0){bi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(s.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(s.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function nN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ls(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}var iN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sN=n=>iN.test(n);function rN(n,e="/"){let{pathname:t,search:s="",hash:a=""}=typeof n=="string"?ml(n):n,l;if(t)if(sN(t))l=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),bi(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?l=IS(t.substring(1),"/"):l=IS(t,e)}else l=e;return{pathname:l,search:lN(s),hash:uN(a)}}function IS(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function sg(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function aN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Fw(n){let e=aN(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function Hw(n,e,t,s=!1){let a;typeof n=="string"?a=ml(n):(a={...n},vt(!a.pathname||!a.pathname.includes("?"),sg("?","pathname","search",a)),vt(!a.pathname||!a.pathname.includes("#"),sg("#","pathname","hash",a)),vt(!a.search||!a.search.includes("#"),sg("#","search","hash",a)));let l=n===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let E=e.length-1;if(!s&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),E-=1;a.pathname=S.join("/")}d=E>=0?e[E]:"/"}let p=rN(a,d),g=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||y)&&(p.pathname+="/"),p}var xs=n=>n.join("/").replace(/\/\/+/g,"/"),oN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),lN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,uN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function cN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var qw=["POST","PUT","PATCH","DELETE"];new Set(qw);var hN=["GET",...qw];new Set(hN);var pl=z.createContext(null);pl.displayName="DataRouter";var Td=z.createContext(null);Td.displayName="DataRouterState";z.createContext(!1);var Gw=z.createContext({isTransitioning:!1});Gw.displayName="ViewTransition";var fN=z.createContext(new Map);fN.displayName="Fetchers";var dN=z.createContext(null);dN.displayName="Await";var os=z.createContext(null);os.displayName="Navigation";var Sc=z.createContext(null);Sc.displayName="Location";var ls=z.createContext({outlet:null,matches:[],isDataRoute:!1});ls.displayName="Route";var p_=z.createContext(null);p_.displayName="RouteError";function mN(n,{relative:e}={}){vt(wc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=z.useContext(os),{hash:a,pathname:l,search:c}=Cc(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:xs([t,l])),s.createHref({pathname:d,search:c,hash:a})}function wc(){return z.useContext(Sc)!=null}function qa(){return vt(wc(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(Sc).location}var Yw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Kw(n){z.useContext(os).static||z.useLayoutEffect(n)}function Qw(){let{isDataRoute:n}=z.useContext(ls);return n?IN():pN()}function pN(){vt(wc(),"useNavigate() may be used only in the context of a <Router> component.");let n=z.useContext(pl),{basename:e,navigator:t}=z.useContext(os),{matches:s}=z.useContext(ls),{pathname:a}=qa(),l=JSON.stringify(Fw(s)),c=z.useRef(!1);return Kw(()=>{c.current=!0}),z.useCallback((p,g={})=>{if(bi(c.current,Yw),!c.current)return;if(typeof p=="number"){t.go(p);return}let y=Hw(p,JSON.parse(l),a,g.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:xs([e,y.pathname])),(g.replace?t.replace:t.push)(y,g.state,g)},[e,t,l,a,n])}z.createContext(null);function gN(){let{matches:n}=z.useContext(ls),e=n[n.length-1];return e?e.params:{}}function Cc(n,{relative:e}={}){let{matches:t}=z.useContext(ls),{pathname:s}=qa(),a=JSON.stringify(Fw(t));return z.useMemo(()=>Hw(n,JSON.parse(a),s,e==="path"),[n,a,s,e])}function _N(n,e){return Ww(n,e)}function Ww(n,e,t,s,a){vt(wc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=z.useContext(os),{matches:c}=z.useContext(ls),d=c[c.length-1],p=d?d.params:{},g=d?d.pathname:"/",y=d?d.pathnameBase:"/",E=d&&d.route;{let ee=E&&E.path||"";Xw(g,!E||ee.endsWith("*")||ee.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${ee}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ee}"> to <Route path="${ee==="/"?"*":`${ee}/*`}">.`)}let S=qa(),R;if(e){let ee=typeof e=="string"?ml(e):e;vt(y==="/"||ee.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${ee.pathname}" was given in the \`location\` prop.`),R=ee}else R=S;let k=R.pathname||"/",K=k;if(y!=="/"){let ee=y.replace(/^\//,"").split("/");K="/"+k.replace(/^\//,"").split("/").slice(ee.length).join("/")}let q=zw(n,{pathname:K});bi(E||q!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),bi(q==null||q[q.length-1].route.element!==void 0||q[q.length-1].route.Component!==void 0||q[q.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ne=SN(q&&q.map(ee=>Object.assign({},ee,{params:Object.assign({},p,ee.params),pathname:xs([y,l.encodeLocation?l.encodeLocation(ee.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ee.pathname]),pathnameBase:ee.pathnameBase==="/"?y:xs([y,l.encodeLocation?l.encodeLocation(ee.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ee.pathnameBase])})),c,t,s,a);return e&&ne?z.createElement(Sc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},ne):ne}function yN(){let n=RN(),e=cN(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=z.createElement(z.Fragment,null,z.createElement("p",null," Hey developer "),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:l},"ErrorBoundary")," or"," ",z.createElement("code",{style:l},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),t?z.createElement("pre",{style:a},t):null,c)}var vN=z.createElement(yN,null),EN=class extends z.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?z.createElement(ls.Provider,{value:this.props.routeContext},z.createElement(p_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function TN({routeContext:n,match:e,children:t}){let s=z.useContext(pl);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),z.createElement(ls.Provider,{value:n},t)}function SN(n,e=[],t=null,s=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t?.errors;if(c!=null){let y=l.findIndex(E=>E.route.id&&c?.[E.route.id]!==void 0);vt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let d=!1,p=-1;if(t)for(let y=0;y<l.length;y++){let E=l[y];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(p=y),E.route.id){let{loaderData:S,errors:R}=t,k=E.route.loader&&!S.hasOwnProperty(E.route.id)&&(!R||R[E.route.id]===void 0);if(E.route.lazy||k){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let g=t&&s?(y,E)=>{s(y,{location:t.location,params:t.matches?.[0]?.params??{},errorInfo:E})}:void 0;return l.reduceRight((y,E,S)=>{let R,k=!1,K=null,q=null;t&&(R=c&&E.route.id?c[E.route.id]:void 0,K=E.route.errorElement||vN,d&&(p<0&&S===0?(Xw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,q=null):p===S&&(k=!0,q=E.route.hydrateFallbackElement||null)));let ne=e.concat(l.slice(0,S+1)),ee=()=>{let re;return R?re=K:k?re=q:E.route.Component?re=z.createElement(E.route.Component,null):E.route.element?re=E.route.element:re=y,z.createElement(TN,{match:E,routeContext:{outlet:y,matches:ne,isDataRoute:t!=null},children:re})};return t&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?z.createElement(EN,{location:t.location,revalidation:t.revalidation,component:K,error:R,children:ee(),routeContext:{outlet:null,matches:ne,isDataRoute:!0},onError:g}):ee()},null)}function g_(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wN(n){let e=z.useContext(pl);return vt(e,g_(n)),e}function CN(n){let e=z.useContext(Td);return vt(e,g_(n)),e}function bN(n){let e=z.useContext(ls);return vt(e,g_(n)),e}function __(n){let e=bN(n),t=e.matches[e.matches.length-1];return vt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function AN(){return __("useRouteId")}function RN(){let n=z.useContext(p_),e=CN("useRouteError"),t=__("useRouteError");return n!==void 0?n:e.errors?.[t]}function IN(){let{router:n}=wN("useNavigate"),e=__("useNavigate"),t=z.useRef(!1);return Kw(()=>{t.current=!0}),z.useCallback(async(a,l={})=>{bi(t.current,Yw),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var NS={};function Xw(n,e,t){!e&&!NS[n]&&(NS[n]=!0,bi(!1,t))}z.memo(NN);function NN({routes:n,future:e,state:t,unstable_onError:s}){return Ww(n,void 0,t,s,e)}function Na(n){vt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ON({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:a,static:l=!1}){vt(!wc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),d=z.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=ml(t));let{pathname:p="/",search:g="",hash:y="",state:E=null,key:S="default"}=t,R=z.useMemo(()=>{let k=Ls(p,c);return k==null?null:{location:{pathname:k,search:g,hash:y,state:E,key:S},navigationType:s}},[c,p,g,y,E,S,s]);return bi(R!=null,`<Router basename="${c}"> is not able to match the URL "${p}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:z.createElement(os.Provider,{value:d},z.createElement(Sc.Provider,{children:e,value:R}))}function DN({children:n,location:e}){return _N(Og(n),e)}function Og(n,e=[]){let t=[];return z.Children.forEach(n,(s,a)=>{if(!z.isValidElement(s))return;let l=[...e,a];if(s.type===z.Fragment){t.push.apply(t,Og(s.props.children,l));return}vt(s.type===Na,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),vt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=Og(s.props.children,l)),t.push(c)}),t}var Rf="get",If="application/x-www-form-urlencoded";function Sd(n){return n!=null&&typeof n.tagName=="string"}function MN(n){return Sd(n)&&n.tagName.toLowerCase()==="button"}function xN(n){return Sd(n)&&n.tagName.toLowerCase()==="form"}function PN(n){return Sd(n)&&n.tagName.toLowerCase()==="input"}function kN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function VN(n,e){return n.button===0&&(!e||e==="_self")&&!kN(n)}var yf=null;function LN(){if(yf===null)try{new FormData(document.createElement("form"),0),yf=!1}catch{yf=!0}return yf}var UN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rg(n){return n!=null&&!UN.has(n)?(bi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${If}"`),null):n}function zN(n,e){let t,s,a,l,c;if(xN(n)){let d=n.getAttribute("action");s=d?Ls(d,e):null,t=n.getAttribute("method")||Rf,a=rg(n.getAttribute("enctype"))||If,l=new FormData(n)}else if(MN(n)||PN(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||d.getAttribute("action");if(s=p?Ls(p,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||Rf,a=rg(n.getAttribute("formenctype"))||rg(d.getAttribute("enctype"))||If,l=new FormData(d,n),!LN()){let{name:g,type:y,value:E}=n;if(y==="image"){let S=g?`${g}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else g&&l.append(g,E)}}else{if(Sd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Rf,s=null,a=If,c=n}return l&&a==="text/plain"&&(c=l,l=void 0),{action:s,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function y_(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function jN(n,e,t){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return s.pathname==="/"?s.pathname=`_root.${t}`:e&&Ls(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${t}`,s}async function BN(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function FN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function HN(n,e,t){let s=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await BN(l,t);return c.links?c.links():[]}return[]}));return KN(s.flat(1).filter(FN).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function OS(n,e,t,s,a,l){let c=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,d=(p,g)=>t[g].pathname!==p.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==p.params["*"];return l==="assets"?e.filter((p,g)=>c(p,g)||d(p,g)):l==="data"?e.filter((p,g)=>{let y=s.routes[p.route.id];if(!y||!y.hasLoader)return!1;if(c(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let E=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function qN(n,e,{includeHydrateFallback:t}={}){return GN(n.map(s=>{let a=e.routes[s.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function GN(n){return[...new Set(n)]}function YN(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function KN(n,e){let t=new Set;return new Set(e),n.reduce((s,a)=>{let l=JSON.stringify(YN(a));return t.has(l)||(t.add(l),s.push({key:l,link:a})),s},[])}function $w(){let n=z.useContext(pl);return y_(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function QN(){let n=z.useContext(Td);return y_(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var v_=z.createContext(void 0);v_.displayName="FrameworkContext";function Jw(){let n=z.useContext(v_);return y_(n,"You must render this element inside a <HydratedRouter> element"),n}function WN(n,e){let t=z.useContext(v_),[s,a]=z.useState(!1),[l,c]=z.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:y,onTouchStart:E}=e,S=z.useRef(null);z.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let K=ne=>{ne.forEach(ee=>{c(ee.isIntersecting)})},q=new IntersectionObserver(K,{threshold:.5});return S.current&&q.observe(S.current),()=>{q.disconnect()}}},[n]),z.useEffect(()=>{if(s){let K=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(K)}}},[s]);let R=()=>{a(!0)},k=()=>{a(!1),c(!1)};return t?n!=="intent"?[l,S,{}]:[l,S,{onFocus:Ou(d,R),onBlur:Ou(p,k),onMouseEnter:Ou(g,R),onMouseLeave:Ou(y,k),onTouchStart:Ou(E,R)}]:[!1,S,{}]}function Ou(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function XN({page:n,...e}){let{router:t}=$w(),s=z.useMemo(()=>zw(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?z.createElement(JN,{page:n,matches:s,...e}):null}function $N(n){let{manifest:e,routeModules:t}=Jw(),[s,a]=z.useState([]);return z.useEffect(()=>{let l=!1;return HN(n,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[n,e,t]),s}function JN({page:n,matches:e,...t}){let s=qa(),{manifest:a,routeModules:l}=Jw(),{basename:c}=$w(),{loaderData:d,matches:p}=QN(),g=z.useMemo(()=>OS(n,e,p,a,s,"data"),[n,e,p,a,s]),y=z.useMemo(()=>OS(n,e,p,a,s,"assets"),[n,e,p,a,s]),E=z.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let k=new Set,K=!1;if(e.forEach(ne=>{let ee=a.routes[ne.route.id];!ee||!ee.hasLoader||(!g.some(re=>re.route.id===ne.route.id)&&ne.route.id in d&&l[ne.route.id]?.shouldRevalidate||ee.hasClientLoader?K=!0:k.add(ne.route.id))}),k.size===0)return[];let q=jN(n,c,"data");return K&&k.size>0&&q.searchParams.set("_routes",e.filter(ne=>k.has(ne.route.id)).map(ne=>ne.route.id).join(",")),[q.pathname+q.search]},[c,d,s,a,g,e,n,l]),S=z.useMemo(()=>qN(y,a),[y,a]),R=$N(y);return z.createElement(z.Fragment,null,E.map(k=>z.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...t})),S.map(k=>z.createElement("link",{key:k,rel:"modulepreload",href:k,...t})),R.map(({key:k,link:K})=>z.createElement("link",{key:k,nonce:t.nonce,...K})))}function ZN(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Zw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Zw&&(window.__reactRouterVersion="7.9.6")}catch{}function eO({basename:n,children:e,window:t}){let s=z.useRef();s.current==null&&(s.current=j1({window:t,v5Compat:!0}));let a=s.current,[l,c]=z.useState({action:a.action,location:a.location}),d=z.useCallback(p=>{z.startTransition(()=>c(p))},[c]);return z.useLayoutEffect(()=>a.listen(d),[a,d]),z.createElement(ON,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a})}var eC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nc=z.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:a,reloadDocument:l,replace:c,state:d,target:p,to:g,preventScrollReset:y,viewTransition:E,...S},R){let{basename:k}=z.useContext(os),K=typeof g=="string"&&eC.test(g),q,ne=!1;if(typeof g=="string"&&K&&(q=g,Zw))try{let A=new URL(window.location.href),P=g.startsWith("//")?new URL(A.protocol+g):new URL(g),D=Ls(P.pathname,k);P.origin===A.origin&&D!=null?g=D+P.search+P.hash:ne=!0}catch{bi(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ee=mN(g,{relative:a}),[re,Ee,Ae]=WN(s,S),Re=sO(g,{replace:c,state:d,target:p,preventScrollReset:y,relative:a,viewTransition:E});function N(A){e&&e(A),A.defaultPrevented||Re(A)}let b=z.createElement("a",{...S,...Ae,href:q||ee,onClick:ne||l?e:N,ref:ZN(R,Ee),target:p,"data-discover":!K&&t==="render"?"true":void 0});return re&&!K?z.createElement(z.Fragment,null,b,z.createElement(XN,{page:ee})):b});nc.displayName="Link";var tO=z.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:a=!1,style:l,to:c,viewTransition:d,children:p,...g},y){let E=Cc(c,{relative:g.relative}),S=qa(),R=z.useContext(Td),{navigator:k,basename:K}=z.useContext(os),q=R!=null&&uO(E)&&d===!0,ne=k.encodeLocation?k.encodeLocation(E).pathname:E.pathname,ee=S.pathname,re=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;t||(ee=ee.toLowerCase(),re=re?re.toLowerCase():null,ne=ne.toLowerCase()),re&&K&&(re=Ls(re,K)||re);const Ee=ne!=="/"&&ne.endsWith("/")?ne.length-1:ne.length;let Ae=ee===ne||!a&&ee.startsWith(ne)&&ee.charAt(Ee)==="/",Re=re!=null&&(re===ne||!a&&re.startsWith(ne)&&re.charAt(ne.length)==="/"),N={isActive:Ae,isPending:Re,isTransitioning:q},b=Ae?e:void 0,A;typeof s=="function"?A=s(N):A=[s,Ae?"active":null,Re?"pending":null,q?"transitioning":null].filter(Boolean).join(" ");let P=typeof l=="function"?l(N):l;return z.createElement(nc,{...g,"aria-current":b,className:A,ref:y,style:P,to:c,viewTransition:d},typeof p=="function"?p(N):p)});tO.displayName="NavLink";var nO=z.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:a,state:l,method:c=Rf,action:d,onSubmit:p,relative:g,preventScrollReset:y,viewTransition:E,...S},R)=>{let k=oO(),K=lO(d,{relative:g}),q=c.toLowerCase()==="get"?"get":"post",ne=typeof d=="string"&&eC.test(d),ee=re=>{if(p&&p(re),re.defaultPrevented)return;re.preventDefault();let Ee=re.nativeEvent.submitter,Ae=Ee?.getAttribute("formmethod")||c;k(Ee||re.currentTarget,{fetcherKey:e,method:Ae,navigate:t,replace:a,state:l,relative:g,preventScrollReset:y,viewTransition:E})};return z.createElement("form",{ref:R,method:q,action:K,onSubmit:s?p:ee,...S,"data-discover":!ne&&n==="render"?"true":void 0})});nO.displayName="Form";function iO(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tC(n){let e=z.useContext(pl);return vt(e,iO(n)),e}function sO(n,{target:e,replace:t,state:s,preventScrollReset:a,relative:l,viewTransition:c}={}){let d=Qw(),p=qa(),g=Cc(n,{relative:l});return z.useCallback(y=>{if(VN(y,e)){y.preventDefault();let E=t!==void 0?t:tc(p)===tc(g);d(n,{replace:E,state:s,preventScrollReset:a,relative:l,viewTransition:c})}},[p,d,g,t,s,e,n,a,l,c])}var rO=0,aO=()=>`__${String(++rO)}__`;function oO(){let{router:n}=tC("useSubmit"),{basename:e}=z.useContext(os),t=AN();return z.useCallback(async(s,a={})=>{let{action:l,method:c,encType:d,formData:p,body:g}=zN(s,e);if(a.navigate===!1){let y=a.fetcherKey||aO();await n.fetch(y,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:p,body:g,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await n.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:p,body:g,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function lO(n,{relative:e}={}){let{basename:t}=z.useContext(os),s=z.useContext(ls);vt(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),l={...Cc(n||".",{relative:e})},c=qa();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(y=>y==="")){d.delete("index"),p.filter(E=>E).forEach(E=>d.append("index",E));let y=d.toString();l.search=y?`?${y}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:xs([t,l.pathname])),tc(l)}function uO(n,{relative:e}={}){let t=z.useContext(Gw);vt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=tC("useViewTransitionState"),a=Cc(n,{relative:e});if(!t.isTransitioning)return!1;let l=Ls(t.currentLocation.pathname,s)||t.currentLocation.pathname,c=Ls(t.nextLocation.pathname,s)||t.nextLocation.pathname;return jf(a.pathname,c)!=null||jf(a.pathname,l)!=null}const wd="/skill-exchange/assets/logo-CZvJbn1G.png",cO=()=>{};var DS={};const nC={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const ae=function(n,e){if(!n)throw gl(e)},gl=function(n){return new Error("Firebase Database ("+nC.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};const iC=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let a=n.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},hO=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const a=n[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],d=n[t++],p=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},E_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,d=c?n[a+1]:0,p=a+2<n.length,g=p?n[a+2]:0,y=l>>2,E=(l&3)<<4|d>>4;let S=(d&15)<<2|g>>6,R=g&63;p||(R=64,c||(S=64)),s.push(t[y],t[E],t[S],t[R])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(iC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):hO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],d=a<n.length?t[n.charAt(a)]:0;++a;const g=a<n.length?t[n.charAt(a)]:64;++a;const E=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||d==null||g==null||E==null)throw new fO;const S=l<<2|d>>4;if(s.push(S),g!==64){const R=d<<4&240|g>>2;if(s.push(R),E!==64){const k=g<<6&192|E;s.push(k)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class fO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sC=function(n){const e=iC(n);return E_.encodeByteArray(e,!0)},Bf=function(n){return sC(n).replace(/\./g,"")},Ff=function(n){try{return E_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function dO(n){return rC(void 0,n)}function rC(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!mO(t)||(n[t]=rC(n[t],e[t]));return n}function mO(n){return n!=="__proto__"}function pO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const gO=()=>pO().__FIREBASE_DEFAULTS__,_O=()=>{if(typeof process>"u"||typeof DS>"u")return;const n=DS.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},yO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Ff(n[1]);return e&&JSON.parse(e)},Cd=()=>{try{return cO()||gO()||_O()||yO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},aC=n=>Cd()?.emulatorHosts?.[n],oC=n=>{const e=aC(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},lC=()=>Cd()?.config,uC=n=>Cd()?.[`_${n}`];class bd{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function $r(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function T_(n){return(await fetch(n,{credentials:"include"})).ok}function cC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Bf(JSON.stringify(t)),Bf(JSON.stringify(c)),""].join(".")}const ju={};function vO(){const n={prod:[],emulator:[]};for(const e of Object.keys(ju))ju[e]?n.emulator.push(e):n.prod.push(e);return n}function EO(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let MS=!1;function S_(n,e){if(typeof window>"u"||typeof document>"u"||!$r(window.location.host)||ju[n]===e||ju[n]||MS)return;ju[n]=e;function t(S){return`__firebase__banner__${S}`}const s="__firebase__banner",l=vO().prod.length>0;function c(){const S=document.getElementById(s);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,R){S.setAttribute("width","24"),S.setAttribute("id",R),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{MS=!0,c()},S}function y(S,R){S.setAttribute("id",R),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=EO(s),R=t("text"),k=document.getElementById(R)||document.createElement("span"),K=t("learnmore"),q=document.getElementById(K)||document.createElement("a"),ne=t("preprendIcon"),ee=document.getElementById(ne)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const re=S.element;d(re),y(q,K);const Ee=g();p(ee,ne),re.append(ee,k,q,Ee),document.body.appendChild(re)}l?(k.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function _n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function w_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_n())}function TO(){const n=Cd()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function SO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function wO(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function hC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CO(){const n=_n();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function bO(){return nC.NODE_ADMIN===!0}function AO(){return!TO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function RO(){try{return typeof indexedDB=="object"}catch{return!1}}function IO(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const NO="FirebaseError";class qs extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=NO,Object.setPrototypeOf(this,qs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bc.prototype.create)}}class bc{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?OO(l,s):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new qs(a,d,s)}}function OO(n,e){return n.replace(DO,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const DO=/\{\$([^}]+)}/g;function ic(n){return JSON.parse(n)}function Ht(n){return JSON.stringify(n)}const fC=function(n){let e={},t={},s={},a="";try{const l=n.split(".");e=ic(Ff(l[0])||""),t=ic(Ff(l[1])||""),a=l[2],s=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:s,signature:a}},MO=function(n){const e=fC(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},xO=function(n){const e=fC(n).claims;return typeof e=="object"&&e.admin===!0};function Gs(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function el(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function Dg(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Hf(n,e,t){const s={};for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=e.call(t,n[a],a,n));return s}function jr(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const l=n[a],c=e[a];if(xS(l)&&xS(c)){if(!jr(l,c))return!1}else if(l!==c)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function xS(n){return n!==null&&typeof n=="object"}function Ga(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}class PO{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const s=this.W_;if(typeof e=="string")for(let E=0;E<16;E++)s[E]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let E=0;E<16;E++)s[E]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let E=16;E<80;E++){const S=s[E-3]^s[E-8]^s[E-14]^s[E-16];s[E]=(S<<1|S>>>31)&4294967295}let a=this.chain_[0],l=this.chain_[1],c=this.chain_[2],d=this.chain_[3],p=this.chain_[4],g,y;for(let E=0;E<80;E++){E<40?E<20?(g=d^l&(c^d),y=1518500249):(g=l^c^d,y=1859775393):E<60?(g=l&c|d&(l|c),y=2400959708):(g=l^c^d,y=3395469782);const S=(a<<5|a>>>27)+g+p+y+s[E]&4294967295;p=d,d=c,c=(l<<30|l>>>2)&4294967295,l=a,a=S}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+d&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const s=t-this.blockSize;let a=0;const l=this.buf_;let c=this.inbuf_;for(;a<t;){if(c===0)for(;a<=s;)this.compress_(e,a),a+=this.blockSize;if(typeof e=="string"){for(;a<t;)if(l[c]=e.charCodeAt(a),++c,++a,c===this.blockSize){this.compress_(l),c=0;break}}else for(;a<t;)if(l[c]=e[a],++c,++a,c===this.blockSize){this.compress_(l),c=0;break}}this.inbuf_=c,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let a=this.blockSize-1;a>=56;a--)this.buf_[a]=t&255,t/=256;this.compress_(this.buf_);let s=0;for(let a=0;a<5;a++)for(let l=24;l>=0;l-=8)e[s]=this.chain_[a]>>l&255,++s;return e}}function kO(n,e){const t=new VO(n,e);return t.subscribe.bind(t)}class VO{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");LO(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=ag),a.error===void 0&&(a.error=ag),a.complete===void 0&&(a.complete=ag);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function LO(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ag(){}function C_(n,e){return`${n} failed: ${e} argument `}const UO=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let a=n.charCodeAt(s);if(a>=55296&&a<=56319){const l=a-55296;s++,ae(s<n.length,"Surrogate pair missing trail surrogate.");const c=n.charCodeAt(s)-56320;a=65536+(l<<10)+c}a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):a<65536?(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},Ad=function(n){let e=0;for(let t=0;t<n.length;t++){const s=n.charCodeAt(t);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,t++):e+=3}return e};function cn(n){return n&&n._delegate?n._delegate:n}class Br{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Oa="[DEFAULT]";class zO{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new bd;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(BO(e))try{this.getOrInitializeService({instanceIdentifier:Oa})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=Oa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oa){return this.instances.has(e)}getOptions(e=Oa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&c.resolve(a)}return a}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:jO(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Oa){return this.component?this.component.multipleInstances?e:Oa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jO(n){return n===Oa?void 0:n}function BO(n){return n.instantiationMode==="EAGER"}class FO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new zO(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ue;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ue||(Ue={}));const HO={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},qO=Ue.INFO,GO={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},YO=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),a=GO[e];if(a)console[a](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rd{constructor(e){this.name=e,this._logLevel=qO,this._logHandler=YO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const KO=(n,e)=>e.some(t=>n instanceof t);let PS,kS;function QO(){return PS||(PS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WO(){return kS||(kS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dC=new WeakMap,Mg=new WeakMap,mC=new WeakMap,og=new WeakMap,b_=new WeakMap;function XO(n){const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Mr(n.result)),a()},c=()=>{s(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&dC.set(t,n)}).catch(()=>{}),b_.set(e,n),e}function $O(n){if(Mg.has(n))return;const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Mg.set(n,e)}let xg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Mg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||mC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Mr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function JO(n){xg=n(xg)}function ZO(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(lg(this),e,...t);return mC.set(s,e.sort?e.sort():[e]),Mr(s)}:WO().includes(n)?function(...e){return n.apply(lg(this),e),Mr(dC.get(this))}:function(...e){return Mr(n.apply(lg(this),e))}}function eD(n){return typeof n=="function"?ZO(n):(n instanceof IDBTransaction&&$O(n),KO(n,QO())?new Proxy(n,xg):n)}function Mr(n){if(n instanceof IDBRequest)return XO(n);if(og.has(n))return og.get(n);const e=eD(n);return e!==n&&(og.set(n,e),b_.set(e,n)),e}const lg=n=>b_.get(n);function tD(n,e,{blocked:t,upgrade:s,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),d=Mr(c);return s&&c.addEventListener("upgradeneeded",p=>{s(Mr(c.result),p.oldVersion,p.newVersion,Mr(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const nD=["get","getKey","getAll","getAllKeys","count"],iD=["put","add","delete","clear"],ug=new Map;function VS(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ug.get(e))return ug.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=iD.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||nD.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,a?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&p.done]))[0]};return ug.set(e,l),l}JO(n=>({...n,get:(e,t,s)=>VS(e,t)||n.get(e,t,s),has:(e,t)=>!!VS(e,t)||n.has(e,t)}));class sD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(rD(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function rD(n){return n.getComponent()?.type==="VERSION"}const Pg="@firebase/app",LS="0.14.6";const Us=new Rd("@firebase/app"),aD="@firebase/app-compat",oD="@firebase/analytics-compat",lD="@firebase/analytics",uD="@firebase/app-check-compat",cD="@firebase/app-check",hD="@firebase/auth",fD="@firebase/auth-compat",dD="@firebase/database",mD="@firebase/data-connect",pD="@firebase/database-compat",gD="@firebase/functions",_D="@firebase/functions-compat",yD="@firebase/installations",vD="@firebase/installations-compat",ED="@firebase/messaging",TD="@firebase/messaging-compat",SD="@firebase/performance",wD="@firebase/performance-compat",CD="@firebase/remote-config",bD="@firebase/remote-config-compat",AD="@firebase/storage",RD="@firebase/storage-compat",ID="@firebase/firestore",ND="@firebase/ai",OD="@firebase/firestore-compat",DD="firebase",MD="12.6.0";const kg="[DEFAULT]",xD={[Pg]:"fire-core",[aD]:"fire-core-compat",[lD]:"fire-analytics",[oD]:"fire-analytics-compat",[cD]:"fire-app-check",[uD]:"fire-app-check-compat",[hD]:"fire-auth",[fD]:"fire-auth-compat",[dD]:"fire-rtdb",[mD]:"fire-data-connect",[pD]:"fire-rtdb-compat",[gD]:"fire-fn",[_D]:"fire-fn-compat",[yD]:"fire-iid",[vD]:"fire-iid-compat",[ED]:"fire-fcm",[TD]:"fire-fcm-compat",[SD]:"fire-perf",[wD]:"fire-perf-compat",[CD]:"fire-rc",[bD]:"fire-rc-compat",[AD]:"fire-gcs",[RD]:"fire-gcs-compat",[ID]:"fire-fst",[OD]:"fire-fst-compat",[ND]:"fire-vertex","fire-js":"fire-js",[DD]:"fire-js-all"};const qf=new Map,PD=new Map,Vg=new Map;function US(n,e){try{n.container.addComponent(e)}catch(t){Us.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function La(n){const e=n.name;if(Vg.has(e))return Us.debug(`There were multiple attempts to register component ${e}.`),!1;Vg.set(e,n);for(const t of qf.values())US(t,n);for(const t of PD.values())US(t,n);return!0}function Id(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ii(n){return n==null?!1:n.settings!==void 0}const kD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xr=new bc("app","Firebase",kD);class VD{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Br("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xr.create("app-deleted",{appName:this._name})}}const Ya=MD;function pC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:kg,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw xr.create("bad-app-name",{appName:String(a)});if(t||(t=lC()),!t)throw xr.create("no-options");const l=qf.get(a);if(l){if(jr(t,l.options)&&jr(s,l.config))return l;throw xr.create("duplicate-app",{appName:a})}const c=new FO(a);for(const p of Vg.values())c.addComponent(p);const d=new VD(t,s,c);return qf.set(a,d),d}function A_(n=kg){const e=qf.get(n);if(!e&&n===kg&&lC())return pC();if(!e)throw xr.create("no-app",{appName:n});return e}function $i(n,e,t){let s=xD[n]??n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${s}" with version "${e}":`];a&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Us.warn(c.join(" "));return}La(new Br(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const LD="firebase-heartbeat-database",UD=1,sc="firebase-heartbeat-store";let cg=null;function gC(){return cg||(cg=tD(LD,UD,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(sc)}catch(t){console.warn(t)}}}}).catch(n=>{throw xr.create("idb-open",{originalErrorMessage:n.message})})),cg}async function zD(n){try{const t=(await gC()).transaction(sc),s=await t.objectStore(sc).get(_C(n));return await t.done,s}catch(e){if(e instanceof qs)Us.warn(e.message);else{const t=xr.create("idb-get",{originalErrorMessage:e?.message});Us.warn(t.message)}}}async function zS(n,e){try{const s=(await gC()).transaction(sc,"readwrite");await s.objectStore(sc).put(e,_C(n)),await s.done}catch(t){if(t instanceof qs)Us.warn(t.message);else{const s=xr.create("idb-set",{originalErrorMessage:t?.message});Us.warn(s.message)}}}function _C(n){return`${n.name}!${n.options.appId}`}const jD=1024,BD=30;class FD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new qD(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=jS();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>BD){const a=GD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Us.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=jS(),{heartbeatsToSend:t,unsentEntries:s}=HD(this._heartbeatsCache.heartbeats),a=Bf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Us.warn(e),""}}}function jS(){return new Date().toISOString().substring(0,10)}function HD(n,e=jD){const t=[];let s=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),BS(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),BS(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class qD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RO()?IO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await zD(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return zS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return zS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function BS(n){return Bf(JSON.stringify({version:2,heartbeats:n})).length}function GD(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}function YD(n){La(new Br("platform-logger",e=>new sD(e),"PRIVATE")),La(new Br("heartbeat",e=>new FD(e),"PRIVATE")),$i(Pg,LS,n),$i(Pg,LS,"esm2020"),$i("fire-js","")}YD("");var KD="firebase",QD="12.6.0";$i(KD,QD,"app");function yC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WD=yC,vC=new bc("auth","Firebase",yC());const Gf=new Rd("@firebase/auth");function XD(n,...e){Gf.logLevel<=Ue.WARN&&Gf.warn(`Auth (${Ya}): ${n}`,...e)}function Nf(n,...e){Gf.logLevel<=Ue.ERROR&&Gf.error(`Auth (${Ya}): ${n}`,...e)}function zs(n,...e){throw R_(n,...e)}function Fn(n,...e){return R_(n,...e)}function EC(n,e,t){const s={...WD(),[e]:t};return new bc("auth","Firebase",s).create(e,{appName:n.name})}function Pr(n){return EC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function R_(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return vC.create(n,...e)}function he(n,e,...t){if(!n)throw R_(e,...t)}function Os(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Nf(e),new Error(e)}function js(n,e){n||Os(e)}function Lg(){return typeof self<"u"&&self.location?.href||""}function TC(){return FS()==="http:"||FS()==="https:"}function FS(){return typeof self<"u"&&self.location?.protocol||null}function $D(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TC()||wO()||"connection"in navigator)?navigator.onLine:!0}function JD(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Ac{constructor(e,t){this.shortDelay=e,this.longDelay=t,js(t>e,"Short delay should be less than long delay!"),this.isMobile=w_()||hC()}get(){return $D()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function I_(n,e){js(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class SC{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Os("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Os("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Os("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ZD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const eM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tM=new Ac(3e4,6e4);function us(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ai(n,e,t,s,a={}){return wC(n,a,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const d=Ga({key:n.config.apiKey,...c}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:p,...l};return SO()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&$r(n.emulatorConfig.host)&&(g.credentials="include"),SC.fetch()(await CC(n,n.config.apiHost,t,d),g)})}async function wC(n,e,t){n._canInitEmulator=!1;const s={...ZD,...e};try{const a=new iM(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw ku(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw ku(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw ku(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw ku(n,"user-disabled",c);const y=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw EC(n,y,g);zs(n,y)}}catch(a){if(a instanceof qs)throw a;zs(n,"network-request-failed",{message:String(a)})}}async function Nd(n,e,t,s,a={}){const l=await Ai(n,e,t,s,a);return"mfaPendingCredential"in l&&zs(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function CC(n,e,t,s){const a=`${e}${t}?${s}`,l=n,c=l.config.emulator?I_(n.config,a):`${n.config.apiScheme}://${a}`;return eM.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function nM(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class iM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Fn(this.auth,"network-request-failed")),tM.get())})}}function ku(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=Fn(n,e,s);return a.customData._tokenResponse=t,a}function HS(n){return n!==void 0&&n.getResponse!==void 0}function qS(n){return n!==void 0&&n.enterprise!==void 0}class bC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return nM(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function sM(n){return(await Ai(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function AC(n,e){return Ai(n,"GET","/v2/recaptchaConfig",us(n,e))}async function rM(n,e){return Ai(n,"POST","/v1/accounts:delete",e)}async function Yf(n,e){return Ai(n,"POST","/v1/accounts:lookup",e)}function Bu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function aM(n,e=!1){const t=cn(n),s=await t.getIdToken(e),a=N_(s);he(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:s,authTime:Bu(hg(a.auth_time)),issuedAtTime:Bu(hg(a.iat)),expirationTime:Bu(hg(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function hg(n){return Number(n)*1e3}function N_(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return Nf("JWT malformed, contained fewer than 3 sections"),null;try{const a=Ff(t);return a?JSON.parse(a):(Nf("Failed to decode base64 JWT payload"),null)}catch(a){return Nf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function GS(n){const e=N_(n);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function rc(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof qs&&oM(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function oM({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class lM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Ug{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bu(this.lastLoginAt),this.creationTime=Bu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Kf(n){const e=n.auth,t=await n.getIdToken(),s=await rc(n,Yf(e,{idToken:t}));he(s?.users.length,e,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const l=a.providerUserInfo?.length?RC(a.providerUserInfo):[],c=cM(n.providerData,l),d=n.isAnonymous,p=!(n.email&&a.passwordHash)&&!c?.length,g=d?p:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Ug(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(n,y)}async function uM(n){const e=cn(n);await Kf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cM(n,e){return[...n.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function RC(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function hM(n,e){const t=await wC(n,{},async()=>{const s=Ga({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await CC(n,a,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:s};return n.emulatorConfig&&$r(n.emulatorConfig.host)&&(p.credentials="include"),SC.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function fM(n,e){return Ai(n,"POST","/v2/accounts:revokeToken",us(n,e))}class Qo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):GS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){he(e.length!==0,"internal-error");const t=GS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:l}=await hM(e,t);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:l}=t,c=new Qo;return s&&(he(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),a&&(he(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(he(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qo,this.toJSON())}_performRefresh(){return Os("not implemented")}}function Ar(n,e){he(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ei{constructor({uid:e,auth:t,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new lM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Ug(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await rc(this,this.stsTokenManager.getToken(this.auth,e));return he(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return aM(this,e)}reload(){return uM(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ei({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Kf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ii(this.auth.app))return Promise.reject(Pr(this.auth));const e=await this.getIdToken();return await rc(this,rM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:R,providerData:k,stsTokenManager:K}=t;he(E&&K,e,"internal-error");const q=Qo.fromJSON(this.name,K);he(typeof E=="string",e,"internal-error"),Ar(s,e.name),Ar(a,e.name),he(typeof S=="boolean",e,"internal-error"),he(typeof R=="boolean",e,"internal-error"),Ar(l,e.name),Ar(c,e.name),Ar(d,e.name),Ar(p,e.name),Ar(g,e.name),Ar(y,e.name);const ne=new Ei({uid:E,auth:e,email:a,emailVerified:S,displayName:s,isAnonymous:R,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:q,createdAt:g,lastLoginAt:y});return k&&Array.isArray(k)&&(ne.providerData=k.map(ee=>({...ee}))),p&&(ne._redirectEventId=p),ne}static async _fromIdTokenResponse(e,t,s=!1){const a=new Qo;a.updateFromServerResponse(t);const l=new Ei({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await Kf(l),l}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];he(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?RC(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new Qo;d.updateFromIdToken(s);const p=new Ei({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Ug(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(p,g),p}}const YS=new Map;function Ds(n){js(n instanceof Function,"Expected a class definition");let e=YS.get(n);return e?(js(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,YS.set(n,e),e)}class IC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}IC.type="NONE";const KS=IC;function Of(n,e,t){return`firebase:${n}:${e}:${t}`}class Wo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=Of(this.userKey,a.apiKey,l),this.fullPersistenceKey=Of("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Yf(this.auth,{idToken:e}).catch(()=>{});return t?Ei._fromGetAccountInfoResponse(this.auth,t,e):null}return Ei._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Wo(Ds(KS),e,s);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||Ds(KS);const c=Of(s,e.config.apiKey,e.name);let d=null;for(const g of t)try{const y=await g._get(c);if(y){let E;if(typeof y=="string"){const S=await Yf(e,{idToken:y}).catch(()=>{});if(!S)break;E=await Ei._fromGetAccountInfoResponse(e,S,y)}else E=Ei._fromJSON(e,y);g!==l&&(d=E),l=g;break}}catch{}const p=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Wo(l,e,s):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Wo(l,e,s))}}function QS(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(MC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(NC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(PC(e))return"Blackberry";if(kC(e))return"Webos";if(OC(e))return"Safari";if((e.includes("chrome/")||DC(e))&&!e.includes("edge/"))return"Chrome";if(xC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if(s?.length===2)return s[1]}return"Other"}function NC(n=_n()){return/firefox\//i.test(n)}function OC(n=_n()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function DC(n=_n()){return/crios\//i.test(n)}function MC(n=_n()){return/iemobile/i.test(n)}function xC(n=_n()){return/android/i.test(n)}function PC(n=_n()){return/blackberry/i.test(n)}function kC(n=_n()){return/webos/i.test(n)}function O_(n=_n()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function dM(n=_n()){return O_(n)&&!!window.navigator?.standalone}function mM(){return CO()&&document.documentMode===10}function VC(n=_n()){return O_(n)||xC(n)||kC(n)||PC(n)||/windows phone/i.test(n)||MC(n)}function LC(n,e=[]){let t;switch(n){case"Browser":t=QS(_n());break;case"Worker":t=`${QS(_n())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ya}/${s}`}class pM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function gM(n,e={}){return Ai(n,"GET","/v2/passwordPolicy",us(n,e))}const _M=6;class yM{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??_M,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class vM{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new WS(this),this.idTokenSubscription=new WS(this),this.beforeStateQueue=new pM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ds(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Wo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Yf(this,{idToken:e}),s=await Ei._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ii(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=s?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&d?.user&&(s=d.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Kf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=JD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ii(this.app))return Promise.reject(Pr(this));const t=e?cn(e):null;return t&&he(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ii(this.app)?Promise.reject(Pr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ii(this.app)?Promise.reject(Pr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gM(this),t=new yM(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new bc("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await fM(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ds(e)||this._popupRedirectResolver;he(t,this,"argument-error"),this.redirectPersistenceManager=await Wo.create(this,[Ds(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,a);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=LC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(ii(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&XD(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Jr(n){return cn(n)}class WS{constructor(e){this.auth=e,this.observer=null,this.addObserver=kO(t=>this.observer=t)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Rc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function EM(n){Rc=n}function D_(n){return Rc.loadJS(n)}function TM(){return Rc.recaptchaV2Script}function SM(){return Rc.recaptchaEnterpriseScript}function wM(){return Rc.gapiScript}function UC(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const CM=500,bM=6e4,vf=1e12;class AM{constructor(e){this.auth=e,this.counter=vf,this._widgets=new Map}render(e,t){const s=this.counter;return this._widgets.set(s,new NM(e,this.auth.name,t||{})),this.counter++,s}reset(e){const t=e||vf;this._widgets.get(t)?.delete(),this._widgets.delete(t)}getResponse(e){const t=e||vf;return this._widgets.get(t)?.getResponse()||""}async execute(e){const t=e||vf;return this._widgets.get(t)?.execute(),""}}class RM{constructor(){this.enterprise=new IM}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class IM{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class NM{constructor(e,t,s){this.params=s,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const a=typeof e=="string"?document.getElementById(e):e;he(a,"argument-error",{appName:t}),this.container=a,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=OM(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},bM)},CM))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function OM(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let s=0;s<n;s++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const DM="recaptcha-enterprise",Fu="NO_RECAPTCHA";class zC{constructor(e){this.type=DM,this.auth=Jr(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{AC(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new bC(p);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(p=>{d(p)})})}function a(l,c,d){const p=window.grecaptcha;qS(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(Fu)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new RM().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{s(this.auth).then(d=>{if(!t&&qS(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=SM();p.length!==0&&(p+=d),D_(p).then(()=>{a(d,l,c)}).catch(g=>{c(g)})}}).catch(d=>{c(d)})})}}async function fg(n,e,t,s=!1,a=!1){const l=new zC(n);let c;if(a)c=Fu;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return s?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function dg(n,e,t,s,a){if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const l=await fg(n,e,t);return s(n,l).catch(async c=>{if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const d=await fg(n,e,t,!1,!0);return s(n,d)}return Promise.reject(c)})}else{const l=await fg(n,e,t,!1,!0);return s(n,l)}}async function MM(n){const e=Jr(n),t=await AC(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),s=new bC(t);e.tenantId==null?e._agentRecaptchaConfig=s:e._tenantRecaptchaConfigs[e.tenantId]=s,s.isAnyProviderEnabled()&&new zC(e).verify()}function xM(n,e){const t=Id(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(jr(l,e??{}))return a;zs(a,"already-initialized")}return t.initialize({options:e})}function PM(n,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Ds);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e?.popupRedirectResolver)}function kM(n,e,t){const s=Jr(n);he(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,l=jC(e),{host:c,port:d}=VM(e),p=d===null?"":`:${d}`,g={url:`${l}//${c}${p}/`},y=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){he(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),he(jr(g,s.config.emulator)&&jr(y,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=y,s.settings.appVerificationDisabledForTesting=!0,$r(c)?(T_(`${l}//${c}${p}`),S_("Auth",!0)):LM()}function jC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function VM(n){const e=jC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:XS(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:XS(c)}}}function XS(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function LM(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class M_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Os("not implemented")}_getIdTokenResponse(e){return Os("not implemented")}_linkToIdToken(e,t){return Os("not implemented")}_getReauthenticationResolver(e){return Os("not implemented")}}async function Xo(n,e){return Nd(n,"POST","/v1/accounts:signInWithIdp",us(n,e))}const UM="http://localhost";class Ua extends M_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ua(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):zs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...l}=t;if(!s||!a)return null;const c=new Ua(s,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Xo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Xo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Xo(e,t)}buildRequest(){const e={requestUri:UM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ga(t)}return e}}async function $S(n,e){return Ai(n,"POST","/v1/accounts:sendVerificationCode",us(n,e))}async function zM(n,e){return Nd(n,"POST","/v1/accounts:signInWithPhoneNumber",us(n,e))}async function jM(n,e){const t=await Nd(n,"POST","/v1/accounts:signInWithPhoneNumber",us(n,e));if(t.temporaryProof)throw ku(n,"account-exists-with-different-credential",t);return t}const BM={USER_NOT_FOUND:"user-not-found"};async function FM(n,e){const t={...e,operation:"REAUTH"};return Nd(n,"POST","/v1/accounts:signInWithPhoneNumber",us(n,t),BM)}class Hu extends M_{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Hu({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Hu({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return zM(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return jM(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return FM(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:s,verificationCode:a}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:s,code:a}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:s,phoneNumber:a,temporaryProof:l}=e;return!s&&!t&&!a&&!l?null:new Hu({verificationId:t,verificationCode:s,phoneNumber:a,temporaryProof:l})}}class BC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ic extends BC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Rr extends Ic{constructor(){super("facebook.com")}static credential(e){return Ua._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rr.credential(e.oauthAccessToken)}catch{return null}}}Rr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Rr.PROVIDER_ID="facebook.com";class Ir extends Ic{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ua._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Ir.credential(t,s)}catch{return null}}}Ir.GOOGLE_SIGN_IN_METHOD="google.com";Ir.PROVIDER_ID="google.com";class Nr extends Ic{constructor(){super("github.com")}static credential(e){return Ua._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nr.credential(e.oauthAccessToken)}catch{return null}}}Nr.GITHUB_SIGN_IN_METHOD="github.com";Nr.PROVIDER_ID="github.com";class Or extends Ic{constructor(){super("twitter.com")}static credential(e,t){return Ua._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Or.credential(t,s)}catch{return null}}}Or.TWITTER_SIGN_IN_METHOD="twitter.com";Or.PROVIDER_ID="twitter.com";class tl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const l=await Ei._fromIdTokenResponse(e,s,a),c=JS(s);return new tl({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=JS(s);return new tl({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function JS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Qf extends qs{constructor(e,t,s,a){super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,Qf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new Qf(e,t,s,a)}}function FC(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Qf._fromErrorAndOperation(n,l,e,s):l})}async function HM(n,e,t=!1){const s=await rc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return tl._forOperation(n,"link",s)}async function qM(n,e,t=!1){const{auth:s}=n;if(ii(s.app))return Promise.reject(Pr(s));const a="reauthenticate";try{const l=await rc(n,FC(s,a,e,n),t);he(l.idToken,s,"internal-error");const c=N_(l.idToken);he(c,s,"internal-error");const{sub:d}=c;return he(n.uid===d,s,"user-mismatch"),tl._forOperation(n,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&zs(s,"user-mismatch"),l}}async function HC(n,e,t=!1){if(ii(n.app))return Promise.reject(Pr(n));const s="signIn",a=await FC(n,s,e),l=await tl._fromIdTokenResponse(n,s,a);return t||await n._updateCurrentUser(l.user),l}async function GM(n,e){return HC(Jr(n),e)}function YM(n,e,t,s){return cn(n).onIdTokenChanged(e,t,s)}function KM(n,e,t){return cn(n).beforeAuthStateChanged(e,t)}function ZS(n,e){return Ai(n,"POST","/v2/accounts/mfaEnrollment:start",us(n,e))}const Wf="__sak";class qC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Wf,"1"),this.storage.removeItem(Wf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const QM=1e3,WM=10;class GC extends qC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);mM()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,WM):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},QM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}GC.type="LOCAL";const XM=GC;class YC extends qC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}YC.type="SESSION";const KC=YC;function $M(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Od{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new Od(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const d=Array.from(c).map(async g=>g(t.origin,l)),p=await $M(d);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Od.receivers=[];function x_(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}class JM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const g=x_("",20);a.port1.start();const y=setTimeout(()=>{p(new Error("unsupported_event"))},s);c={messageChannel:a,onMessage(E){const S=E;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(y),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Ut(){return window}function ZM(n){Ut().location.href=n}function P_(){return typeof Ut().WorkerGlobalScope<"u"&&typeof Ut().importScripts=="function"}async function ex(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tx(){return navigator?.serviceWorker?.controller||null}function nx(){return P_()?self:null}const QC="firebaseLocalStorageDb",ix=1,Xf="firebaseLocalStorage",WC="fbase_key";class Nc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Dd(n,e){return n.transaction([Xf],e?"readwrite":"readonly").objectStore(Xf)}function sx(){const n=indexedDB.deleteDatabase(QC);return new Nc(n).toPromise()}function zg(){const n=indexedDB.open(QC,ix);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Xf,{keyPath:WC})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Xf)?e(s):(s.close(),await sx(),e(await zg()))})})}async function e0(n,e,t){const s=Dd(n,!0).put({[WC]:e,value:t});return new Nc(s).toPromise()}async function rx(n,e){const t=Dd(n,!1).get(e),s=await new Nc(t).toPromise();return s===void 0?null:s.value}function t0(n,e){const t=Dd(n,!0).delete(e);return new Nc(t).toPromise()}const ax=800,ox=3;class XC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>ox)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return P_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Od._getInstance(nx()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await ex(),!this.activeServiceWorker)return;this.sender=new JM(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zg();return await e0(e,Wf,"1"),await t0(e,Wf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>e0(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>rx(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>t0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Dd(a,!1).getAll();return new Nc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ax)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}XC.type="LOCAL";const lx=XC;function n0(n,e){return Ai(n,"POST","/v2/accounts/mfaSignIn:start",us(n,e))}const mg=UC("rcb"),ux=new Ac(3e4,6e4);class cx{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Ut().grecaptcha?.render}load(e,t=""){return he(hx(t),e,"argument-error"),this.shouldResolveImmediately(t)&&HS(Ut().grecaptcha)?Promise.resolve(Ut().grecaptcha):new Promise((s,a)=>{const l=Ut().setTimeout(()=>{a(Fn(e,"network-request-failed"))},ux.get());Ut()[mg]=()=>{Ut().clearTimeout(l),delete Ut()[mg];const d=Ut().grecaptcha;if(!d||!HS(d)){a(Fn(e,"internal-error"));return}const p=d.render;d.render=(g,y)=>{const E=p(g,y);return this.counter++,E},this.hostLanguage=t,s(d)};const c=`${TM()}?${Ga({onload:mg,render:"explicit",hl:t})}`;D_(c).catch(()=>{clearTimeout(l),a(Fn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!Ut().grecaptcha?.render&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function hx(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class fx{async load(e){return new AM(e)}clearedOneInstance(){}}const qu="recaptcha",dx={theme:"light",type:"image"};class k_{constructor(e,t,s={...dx}){this.parameters=s,this.type=qu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Jr(e),this.isInvisible=this.parameters.size==="invisible",he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const a=typeof t=="string"?document.getElementById(t):t;he(a,this.auth,"argument-error"),this.container=a,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new fx:new cx,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),s=t.getResponse(e);return s||new Promise(a=>{const l=c=>{c&&(this.tokenChangeListeners.delete(l),a(c))};this.tokenChangeListeners.add(l),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){he(!this.parameters.sitekey,this.auth,"argument-error"),he(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(s=>s(t)),typeof e=="function")e(t);else if(typeof e=="string"){const s=Ut()[e];typeof s=="function"&&s(t)}}}assertNotDestroyed(){he(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){he(TC()&&!P_(),this.auth,"internal-error"),await mx(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await sM(this.auth);he(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return he(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function mx(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}class px{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Hu._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function V_(n,e,t){if(ii(n.app))return Promise.reject(Pr(n));const s=Jr(n),a=await gx(s,e,cn(t));return new px(a,l=>GM(s,l))}async function gx(n,e,t){if(!n._getRecaptchaConfig())try{await MM(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const a=s.session;if("phoneNumber"in s){he(a.type==="enroll",n,"internal-error");const l={idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await dg(n,l,"mfaSmsEnrollment",async(g,y)=>{if(y.phoneEnrollmentInfo.captchaResponse===Fu){he(t?.type===qu,g,"argument-error");const E=await pg(g,y,t);return ZS(g,E)}return ZS(g,y)},"PHONE_PROVIDER").catch(g=>Promise.reject(g))).phoneSessionInfo.sessionInfo}else{he(a.type==="signin",n,"internal-error");const l=s.multiFactorHint?.uid||s.multiFactorUid;he(l,n,"missing-multi-factor-info");const c={mfaPendingCredential:a.credential,mfaEnrollmentId:l,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await dg(n,c,"mfaSmsSignIn",async(y,E)=>{if(E.phoneSignInInfo.captchaResponse===Fu){he(t?.type===qu,y,"argument-error");const S=await pg(y,E,t);return n0(y,S)}return n0(y,E)},"PHONE_PROVIDER").catch(y=>Promise.reject(y))).phoneResponseInfo.sessionInfo}}else{const a={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await dg(n,a,"sendVerificationCode",async(p,g)=>{if(g.captchaResponse===Fu){he(t?.type===qu,p,"argument-error");const y=await pg(p,g,t);return $S(p,y)}return $S(p,g)},"PHONE_PROVIDER").catch(p=>Promise.reject(p))).sessionInfo}}finally{t?._reset()}}async function pg(n,e,t){he(t.type===qu,n,"argument-error");const s=await t.verify();he(typeof s=="string",n,"argument-error");const a={...e};if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.captchaResponse,d=a.phoneEnrollmentInfo.clientType,p=a.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:s,captchaResponse:c,clientType:d,recaptchaVersion:p}}),a}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.captchaResponse,c=a.phoneSignInInfo.clientType,d=a.phoneSignInInfo.recaptchaVersion;return Object.assign(a,{phoneSignInInfo:{recaptchaToken:s,captchaResponse:l,clientType:c,recaptchaVersion:d}}),a}else return Object.assign(a,{recaptchaToken:s}),a}function _x(n,e){return e?Ds(e):(he(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class L_ extends M_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Xo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Xo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function yx(n){return HC(n.auth,new L_(n),n.bypassAuthState)}function vx(n){const{auth:e,user:t}=n;return he(t,e,"internal-error"),qM(t,new L_(n),n.bypassAuthState)}async function Ex(n){const{auth:e,user:t}=n;return he(t,e,"internal-error"),HM(t,new L_(n),n.bypassAuthState)}class $C{constructor(e,t,s,a,l=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yx;case"linkViaPopup":case"linkViaRedirect":return Ex;case"reauthViaPopup":case"reauthViaRedirect":return vx;default:zs(this.auth,"internal-error")}}resolve(e){js(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){js(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Tx=new Ac(2e3,1e4);class Yo extends $C{constructor(e,t,s,a,l){super(e,t,a,l),this.provider=s,this.authWindow=null,this.pollId=null,Yo.currentPopupAction&&Yo.currentPopupAction.cancel(),Yo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){js(this.filter.length===1,"Popup operations only handle one event");const e=x_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Tx.get())};e()}}Yo.currentPopupAction=null;const Sx="pendingRedirect",Df=new Map;class wx extends $C{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Df.get(this.auth._key());if(!e){try{const s=await Cx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Df.set(this.auth._key(),e)}return this.bypassAuthState||Df.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Cx(n,e){const t=Rx(e),s=Ax(n);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function bx(n,e){Df.set(n._key(),e)}function Ax(n){return Ds(n._redirectPersistence)}function Rx(n){return Of(Sx,n.config.apiKey,n.name)}async function Ix(n,e,t=!1){if(ii(n.app))return Promise.reject(Pr(n));const s=Jr(n),a=_x(s,e),c=await new wx(s,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}const Nx=600*1e3;class Ox{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Dx(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!JC(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Fn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Nx&&this.cachedEventUids.clear(),this.cachedEventUids.has(i0(e))}saveEventToCache(e){this.cachedEventUids.add(i0(e)),this.lastProcessedEventTime=Date.now()}}function i0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function JC({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Dx(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JC(n);default:return!1}}async function Mx(n,e={}){return Ai(n,"GET","/v1/projects",e)}const xx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Px=/^https?/;async function kx(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Mx(n);for(const t of e)try{if(Vx(t))return}catch{}zs(n,"unauthorized-domain")}function Vx(n){const e=Lg(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!Px.test(t))return!1;if(xx.test(n))return s===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}const Lx=new Ac(3e4,6e4);function s0(){const n=Ut().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Ux(n){return new Promise((e,t)=>{function s(){s0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{s0(),t(Fn(n,"network-request-failed"))},timeout:Lx.get()})}if(Ut().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ut().gapi?.load)s();else{const a=UC("iframefcb");return Ut()[a]=()=>{gapi.load?s():t(Fn(n,"network-request-failed"))},D_(`${wM()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Mf=null,e})}let Mf=null;function zx(n){return Mf=Mf||Ux(n),Mf}const jx=new Ac(5e3,15e3),Bx="__/auth/iframe",Fx="emulator/auth/iframe",Hx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Gx(n){const e=n.config;he(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?I_(e,Fx):`https://${n.config.authDomain}/${Bx}`,s={apiKey:e.apiKey,appName:n.name,v:Ya},a=qx.get(n.config.apiHost);a&&(s.eid=a);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Ga(s).slice(1)}`}async function Yx(n){const e=await zx(n),t=Ut().gapi;return he(t,n,"internal-error"),e.open({where:document.body,url:Gx(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Hx,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const c=Fn(n,"network-request-failed"),d=Ut().setTimeout(()=>{l(c)},jx.get());function p(){Ut().clearTimeout(d),a(s)}s.ping(p).then(p,()=>{l(c)})}))}const Kx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Qx=500,Wx=600,Xx="_blank",$x="http://localhost";class r0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Jx(n,e,t,s=Qx,a=Wx){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const p={...Kx,width:s.toString(),height:a.toString(),top:l,left:c},g=_n().toLowerCase();t&&(d=DC(g)?Xx:t),NC(g)&&(e=e||$x,p.scrollbars="yes");const y=Object.entries(p).reduce((S,[R,k])=>`${S}${R}=${k},`,"");if(dM(g)&&d!=="_self")return Zx(e||"",d),new r0(null);const E=window.open(e||"",d,y);he(E,n,"popup-blocked");try{E.focus()}catch{}return new r0(E)}function Zx(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const e2="__/auth/handler",t2="emulator/auth/handler",n2=encodeURIComponent("fac");async function a0(n,e,t,s,a,l){he(n.config.authDomain,n,"auth-domain-config-required"),he(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Ya,eventId:a};if(e instanceof BC){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",Dg(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,E]of Object.entries({}))c[y]=E}if(e instanceof Ic){const y=e.getScopes().filter(E=>E!=="");y.length>0&&(c.scopes=y.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const p=await n._getAppCheckToken(),g=p?`#${n2}=${encodeURIComponent(p)}`:"";return`${i2(n)}?${Ga(d).slice(1)}${g}`}function i2({config:n}){return n.emulator?I_(n,t2):`https://${n.authDomain}/${e2}`}const gg="webStorageSupport";class s2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=KC,this._completeRedirectFn=Ix,this._overrideRedirectResult=bx}async _openPopup(e,t,s,a){js(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await a0(e,t,s,Lg(),a);return Jx(e,l,x_())}async _openRedirect(e,t,s,a){await this._originValidation(e);const l=await a0(e,t,s,Lg(),a);return ZM(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(js(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await Yx(e),s=new Ox(e);return t.register("authEvent",a=>(he(a?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(gg,{type:gg},a=>{const l=a?.[0]?.[gg];l!==void 0&&t(!!l),zs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=kx(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return VC()||OC()||O_()}}const r2=s2;var o0="@firebase/auth",l0="1.11.1";class a2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function o2(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function l2(n){La(new Br("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=s.options;he(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LC(n)},g=new vM(s,a,l,p);return PM(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),La(new Br("auth-internal",e=>{const t=Jr(e.getProvider("auth").getImmediate());return(s=>new a2(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),$i(o0,l0,o2(n)),$i(o0,l0,"esm2020")}const u2=300,c2=uC("authIdTokenMaxAge")||u2;let u0=null;const h2=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>c2)return;const a=t?.token;u0!==a&&(u0=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function f2(n=A_()){const e=Id(n,"auth");if(e.isInitialized())return e.getImmediate();const t=xM(n,{popupRedirectResolver:r2,persistence:[lx,XM,KC]}),s=uC("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=h2(l.toString());KM(t,c,()=>c(t.currentUser)),YM(t,d=>c(d))}}const a=aC("auth");return a&&kM(t,`http://${a}`),t}function d2(){return document.getElementsByTagName("head")?.[0]??document}EM({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=a=>{const l=Fn("internal-error");l.customData=a,t(l)},s.type="text/javascript",s.charset="UTF-8",d2().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});l2("Browser");var c0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var kr,ZC;(function(){var n;function e(N,b){function A(){}A.prototype=b.prototype,N.F=b.prototype,N.prototype=new A,N.prototype.constructor=N,N.D=function(P,D,U){for(var I=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)I[Ze-2]=arguments[Ze];return b.prototype[D].apply(P,I)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(N,b,A){A||(A=0);const P=Array(16);if(typeof b=="string")for(var D=0;D<16;++D)P[D]=b.charCodeAt(A++)|b.charCodeAt(A++)<<8|b.charCodeAt(A++)<<16|b.charCodeAt(A++)<<24;else for(D=0;D<16;++D)P[D]=b[A++]|b[A++]<<8|b[A++]<<16|b[A++]<<24;b=N.g[0],A=N.g[1],D=N.g[2];let U=N.g[3],I;I=b+(U^A&(D^U))+P[0]+3614090360&4294967295,b=A+(I<<7&4294967295|I>>>25),I=U+(D^b&(A^D))+P[1]+3905402710&4294967295,U=b+(I<<12&4294967295|I>>>20),I=D+(A^U&(b^A))+P[2]+606105819&4294967295,D=U+(I<<17&4294967295|I>>>15),I=A+(b^D&(U^b))+P[3]+3250441966&4294967295,A=D+(I<<22&4294967295|I>>>10),I=b+(U^A&(D^U))+P[4]+4118548399&4294967295,b=A+(I<<7&4294967295|I>>>25),I=U+(D^b&(A^D))+P[5]+1200080426&4294967295,U=b+(I<<12&4294967295|I>>>20),I=D+(A^U&(b^A))+P[6]+2821735955&4294967295,D=U+(I<<17&4294967295|I>>>15),I=A+(b^D&(U^b))+P[7]+4249261313&4294967295,A=D+(I<<22&4294967295|I>>>10),I=b+(U^A&(D^U))+P[8]+1770035416&4294967295,b=A+(I<<7&4294967295|I>>>25),I=U+(D^b&(A^D))+P[9]+2336552879&4294967295,U=b+(I<<12&4294967295|I>>>20),I=D+(A^U&(b^A))+P[10]+4294925233&4294967295,D=U+(I<<17&4294967295|I>>>15),I=A+(b^D&(U^b))+P[11]+2304563134&4294967295,A=D+(I<<22&4294967295|I>>>10),I=b+(U^A&(D^U))+P[12]+1804603682&4294967295,b=A+(I<<7&4294967295|I>>>25),I=U+(D^b&(A^D))+P[13]+4254626195&4294967295,U=b+(I<<12&4294967295|I>>>20),I=D+(A^U&(b^A))+P[14]+2792965006&4294967295,D=U+(I<<17&4294967295|I>>>15),I=A+(b^D&(U^b))+P[15]+1236535329&4294967295,A=D+(I<<22&4294967295|I>>>10),I=b+(D^U&(A^D))+P[1]+4129170786&4294967295,b=A+(I<<5&4294967295|I>>>27),I=U+(A^D&(b^A))+P[6]+3225465664&4294967295,U=b+(I<<9&4294967295|I>>>23),I=D+(b^A&(U^b))+P[11]+643717713&4294967295,D=U+(I<<14&4294967295|I>>>18),I=A+(U^b&(D^U))+P[0]+3921069994&4294967295,A=D+(I<<20&4294967295|I>>>12),I=b+(D^U&(A^D))+P[5]+3593408605&4294967295,b=A+(I<<5&4294967295|I>>>27),I=U+(A^D&(b^A))+P[10]+38016083&4294967295,U=b+(I<<9&4294967295|I>>>23),I=D+(b^A&(U^b))+P[15]+3634488961&4294967295,D=U+(I<<14&4294967295|I>>>18),I=A+(U^b&(D^U))+P[4]+3889429448&4294967295,A=D+(I<<20&4294967295|I>>>12),I=b+(D^U&(A^D))+P[9]+568446438&4294967295,b=A+(I<<5&4294967295|I>>>27),I=U+(A^D&(b^A))+P[14]+3275163606&4294967295,U=b+(I<<9&4294967295|I>>>23),I=D+(b^A&(U^b))+P[3]+4107603335&4294967295,D=U+(I<<14&4294967295|I>>>18),I=A+(U^b&(D^U))+P[8]+1163531501&4294967295,A=D+(I<<20&4294967295|I>>>12),I=b+(D^U&(A^D))+P[13]+2850285829&4294967295,b=A+(I<<5&4294967295|I>>>27),I=U+(A^D&(b^A))+P[2]+4243563512&4294967295,U=b+(I<<9&4294967295|I>>>23),I=D+(b^A&(U^b))+P[7]+1735328473&4294967295,D=U+(I<<14&4294967295|I>>>18),I=A+(U^b&(D^U))+P[12]+2368359562&4294967295,A=D+(I<<20&4294967295|I>>>12),I=b+(A^D^U)+P[5]+4294588738&4294967295,b=A+(I<<4&4294967295|I>>>28),I=U+(b^A^D)+P[8]+2272392833&4294967295,U=b+(I<<11&4294967295|I>>>21),I=D+(U^b^A)+P[11]+1839030562&4294967295,D=U+(I<<16&4294967295|I>>>16),I=A+(D^U^b)+P[14]+4259657740&4294967295,A=D+(I<<23&4294967295|I>>>9),I=b+(A^D^U)+P[1]+2763975236&4294967295,b=A+(I<<4&4294967295|I>>>28),I=U+(b^A^D)+P[4]+1272893353&4294967295,U=b+(I<<11&4294967295|I>>>21),I=D+(U^b^A)+P[7]+4139469664&4294967295,D=U+(I<<16&4294967295|I>>>16),I=A+(D^U^b)+P[10]+3200236656&4294967295,A=D+(I<<23&4294967295|I>>>9),I=b+(A^D^U)+P[13]+681279174&4294967295,b=A+(I<<4&4294967295|I>>>28),I=U+(b^A^D)+P[0]+3936430074&4294967295,U=b+(I<<11&4294967295|I>>>21),I=D+(U^b^A)+P[3]+3572445317&4294967295,D=U+(I<<16&4294967295|I>>>16),I=A+(D^U^b)+P[6]+76029189&4294967295,A=D+(I<<23&4294967295|I>>>9),I=b+(A^D^U)+P[9]+3654602809&4294967295,b=A+(I<<4&4294967295|I>>>28),I=U+(b^A^D)+P[12]+3873151461&4294967295,U=b+(I<<11&4294967295|I>>>21),I=D+(U^b^A)+P[15]+530742520&4294967295,D=U+(I<<16&4294967295|I>>>16),I=A+(D^U^b)+P[2]+3299628645&4294967295,A=D+(I<<23&4294967295|I>>>9),I=b+(D^(A|~U))+P[0]+4096336452&4294967295,b=A+(I<<6&4294967295|I>>>26),I=U+(A^(b|~D))+P[7]+1126891415&4294967295,U=b+(I<<10&4294967295|I>>>22),I=D+(b^(U|~A))+P[14]+2878612391&4294967295,D=U+(I<<15&4294967295|I>>>17),I=A+(U^(D|~b))+P[5]+4237533241&4294967295,A=D+(I<<21&4294967295|I>>>11),I=b+(D^(A|~U))+P[12]+1700485571&4294967295,b=A+(I<<6&4294967295|I>>>26),I=U+(A^(b|~D))+P[3]+2399980690&4294967295,U=b+(I<<10&4294967295|I>>>22),I=D+(b^(U|~A))+P[10]+4293915773&4294967295,D=U+(I<<15&4294967295|I>>>17),I=A+(U^(D|~b))+P[1]+2240044497&4294967295,A=D+(I<<21&4294967295|I>>>11),I=b+(D^(A|~U))+P[8]+1873313359&4294967295,b=A+(I<<6&4294967295|I>>>26),I=U+(A^(b|~D))+P[15]+4264355552&4294967295,U=b+(I<<10&4294967295|I>>>22),I=D+(b^(U|~A))+P[6]+2734768916&4294967295,D=U+(I<<15&4294967295|I>>>17),I=A+(U^(D|~b))+P[13]+1309151649&4294967295,A=D+(I<<21&4294967295|I>>>11),I=b+(D^(A|~U))+P[4]+4149444226&4294967295,b=A+(I<<6&4294967295|I>>>26),I=U+(A^(b|~D))+P[11]+3174756917&4294967295,U=b+(I<<10&4294967295|I>>>22),I=D+(b^(U|~A))+P[2]+718787259&4294967295,D=U+(I<<15&4294967295|I>>>17),I=A+(U^(D|~b))+P[9]+3951481745&4294967295,N.g[0]=N.g[0]+b&4294967295,N.g[1]=N.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,N.g[2]=N.g[2]+D&4294967295,N.g[3]=N.g[3]+U&4294967295}s.prototype.v=function(N,b){b===void 0&&(b=N.length);const A=b-this.blockSize,P=this.C;let D=this.h,U=0;for(;U<b;){if(D==0)for(;U<=A;)a(this,N,U),U+=this.blockSize;if(typeof N=="string"){for(;U<b;)if(P[D++]=N.charCodeAt(U++),D==this.blockSize){a(this,P),D=0;break}}else for(;U<b;)if(P[D++]=N[U++],D==this.blockSize){a(this,P),D=0;break}}this.h=D,this.o+=b},s.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var b=1;b<N.length-8;++b)N[b]=0;b=this.o*8;for(var A=N.length-8;A<N.length;++A)N[A]=b&255,b/=256;for(this.v(N),N=Array(16),b=0,A=0;A<4;++A)for(let P=0;P<32;P+=8)N[b++]=this.g[A]>>>P&255;return N};function l(N,b){var A=d;return Object.prototype.hasOwnProperty.call(A,N)?A[N]:A[N]=b(N)}function c(N,b){this.h=b;const A=[];let P=!0;for(let D=N.length-1;D>=0;D--){const U=N[D]|0;P&&U==b||(A[D]=U,P=!1)}this.g=A}var d={};function p(N){return-128<=N&&N<128?l(N,function(b){return new c([b|0],b<0?-1:0)}):new c([N|0],N<0?-1:0)}function g(N){if(isNaN(N)||!isFinite(N))return E;if(N<0)return q(g(-N));const b=[];let A=1;for(let P=0;N>=A;P++)b[P]=N/A|0,A*=4294967296;return new c(b,0)}function y(N,b){if(N.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(N.charAt(0)=="-")return q(y(N.substring(1),b));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=g(Math.pow(b,8));let P=E;for(let U=0;U<N.length;U+=8){var D=Math.min(8,N.length-U);const I=parseInt(N.substring(U,U+D),b);D<8?(D=g(Math.pow(b,D)),P=P.j(D).add(g(I))):(P=P.j(A),P=P.add(g(I)))}return P}var E=p(0),S=p(1),R=p(16777216);n=c.prototype,n.m=function(){if(K(this))return-q(this).m();let N=0,b=1;for(let A=0;A<this.g.length;A++){const P=this.i(A);N+=(P>=0?P:4294967296+P)*b,b*=4294967296}return N},n.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(k(this))return"0";if(K(this))return"-"+q(this).toString(N);const b=g(Math.pow(N,6));var A=this;let P="";for(;;){const D=Ee(A,b).g;A=ne(A,D.j(b));let U=((A.g.length>0?A.g[0]:A.h)>>>0).toString(N);if(A=D,k(A))return U+P;for(;U.length<6;)U="0"+U;P=U+P}},n.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function k(N){if(N.h!=0)return!1;for(let b=0;b<N.g.length;b++)if(N.g[b]!=0)return!1;return!0}function K(N){return N.h==-1}n.l=function(N){return N=ne(this,N),K(N)?-1:k(N)?0:1};function q(N){const b=N.g.length,A=[];for(let P=0;P<b;P++)A[P]=~N.g[P];return new c(A,~N.h).add(S)}n.abs=function(){return K(this)?q(this):this},n.add=function(N){const b=Math.max(this.g.length,N.g.length),A=[];let P=0;for(let D=0;D<=b;D++){let U=P+(this.i(D)&65535)+(N.i(D)&65535),I=(U>>>16)+(this.i(D)>>>16)+(N.i(D)>>>16);P=I>>>16,U&=65535,I&=65535,A[D]=I<<16|U}return new c(A,A[A.length-1]&-2147483648?-1:0)};function ne(N,b){return N.add(q(b))}n.j=function(N){if(k(this)||k(N))return E;if(K(this))return K(N)?q(this).j(q(N)):q(q(this).j(N));if(K(N))return q(this.j(q(N)));if(this.l(R)<0&&N.l(R)<0)return g(this.m()*N.m());const b=this.g.length+N.g.length,A=[];for(var P=0;P<2*b;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(let D=0;D<N.g.length;D++){const U=this.i(P)>>>16,I=this.i(P)&65535,Ze=N.i(D)>>>16,De=N.i(D)&65535;A[2*P+2*D]+=I*De,ee(A,2*P+2*D),A[2*P+2*D+1]+=U*De,ee(A,2*P+2*D+1),A[2*P+2*D+1]+=I*Ze,ee(A,2*P+2*D+1),A[2*P+2*D+2]+=U*Ze,ee(A,2*P+2*D+2)}for(N=0;N<b;N++)A[N]=A[2*N+1]<<16|A[2*N];for(N=b;N<2*b;N++)A[N]=0;return new c(A,0)};function ee(N,b){for(;(N[b]&65535)!=N[b];)N[b+1]+=N[b]>>>16,N[b]&=65535,b++}function re(N,b){this.g=N,this.h=b}function Ee(N,b){if(k(b))throw Error("division by zero");if(k(N))return new re(E,E);if(K(N))return b=Ee(q(N),b),new re(q(b.g),q(b.h));if(K(b))return b=Ee(N,q(b)),new re(q(b.g),b.h);if(N.g.length>30){if(K(N)||K(b))throw Error("slowDivide_ only works with positive integers.");for(var A=S,P=b;P.l(N)<=0;)A=Ae(A),P=Ae(P);var D=Re(A,1),U=Re(P,1);for(P=Re(P,2),A=Re(A,2);!k(P);){var I=U.add(P);I.l(N)<=0&&(D=D.add(A),U=I),P=Re(P,1),A=Re(A,1)}return b=ne(N,D.j(b)),new re(D,b)}for(D=E;N.l(b)>=0;){for(A=Math.max(1,Math.floor(N.m()/b.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),U=g(A),I=U.j(b);K(I)||I.l(N)>0;)A-=P,U=g(A),I=U.j(b);k(U)&&(U=S),D=D.add(U),N=ne(N,I)}return new re(D,N)}n.B=function(N){return Ee(this,N).h},n.and=function(N){const b=Math.max(this.g.length,N.g.length),A=[];for(let P=0;P<b;P++)A[P]=this.i(P)&N.i(P);return new c(A,this.h&N.h)},n.or=function(N){const b=Math.max(this.g.length,N.g.length),A=[];for(let P=0;P<b;P++)A[P]=this.i(P)|N.i(P);return new c(A,this.h|N.h)},n.xor=function(N){const b=Math.max(this.g.length,N.g.length),A=[];for(let P=0;P<b;P++)A[P]=this.i(P)^N.i(P);return new c(A,this.h^N.h)};function Ae(N){const b=N.g.length+1,A=[];for(let P=0;P<b;P++)A[P]=N.i(P)<<1|N.i(P-1)>>>31;return new c(A,N.h)}function Re(N,b){const A=b>>5;b%=32;const P=N.g.length-A,D=[];for(let U=0;U<P;U++)D[U]=b>0?N.i(U+A)>>>b|N.i(U+A+1)<<32-b:N.i(U+A);return new c(D,N.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,ZC=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=y,kr=c}).apply(typeof c0<"u"?c0:typeof self<"u"?self:typeof window<"u"?window:{});var Ef=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var eb,Vu,tb,xf,jg,nb,ib,sb;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ef=="object"&&Ef];for(var _=0;_<h.length;++_){var T=h[_];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var s=t(this);function a(h,_){if(_)e:{var T=s;h=h.split(".");for(var C=0;C<h.length-1;C++){var j=h[C];if(!(j in T))break e;T=T[j]}h=h[h.length-1],C=T[h],_=_(C),_!=C&&_!=null&&e(T,h,{configurable:!0,writable:!0,value:_})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(_){var T=[],C;for(C in _)Object.prototype.hasOwnProperty.call(_,C)&&T.push([C,_[C]]);return T}});var l=l||{},c=this||self;function d(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function p(h,_,T){return h.call.apply(h.bind,arguments)}function g(h,_,T){return g=p,g.apply(null,arguments)}function y(h,_){var T=Array.prototype.slice.call(arguments,1);return function(){var C=T.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function E(h,_){function T(){}T.prototype=_.prototype,h.Z=_.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(C,j,Y){for(var oe=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)oe[Ie-2]=arguments[Ie];return _.prototype[j].apply(C,oe)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function R(h){const _=h.length;if(_>0){const T=Array(_);for(let C=0;C<_;C++)T[C]=h[C];return T}return[]}function k(h,_){for(let C=1;C<arguments.length;C++){const j=arguments[C];var T=typeof j;if(T=T!="object"?T:j?Array.isArray(j)?"array":T:"null",T=="array"||T=="object"&&typeof j.length=="number"){T=h.length||0;const Y=j.length||0;h.length=T+Y;for(let oe=0;oe<Y;oe++)h[T+oe]=j[oe]}else h.push(j)}}class K{constructor(_,T){this.i=_,this.j=T,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function q(h){c.setTimeout(()=>{throw h},0)}function ne(){var h=N;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class ee{constructor(){this.h=this.g=null}add(_,T){const C=re.get();C.set(_,T),this.h?this.h.next=C:this.g=C,this.h=C}}var re=new K(()=>new Ee,h=>h.reset());class Ee{constructor(){this.next=this.g=this.h=null}set(_,T){this.h=_,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let Ae,Re=!1,N=new ee,b=()=>{const h=Promise.resolve(void 0);Ae=()=>{h.then(A)}};function A(){for(var h;h=ne();){try{h.h.call(h.g)}catch(T){q(T)}var _=re;_.j(h),_.h<100&&(_.h++,h.next=_.g,_.g=h)}Re=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};c.addEventListener("test",T,_),c.removeEventListener("test",T,_)}catch{}return h})();function I(h){return/^[\s\xa0]*$/.test(h)}function Ze(h,_){D.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,_)}E(Ze,D),Ze.prototype.init=function(h,_){const T=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget,_||(T=="mouseover"?_=h.fromElement:T=="mouseout"&&(_=h.toElement)),this.relatedTarget=_,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ze.Z.h.call(this)},Ze.prototype.h=function(){Ze.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var De="closure_listenable_"+(Math.random()*1e6|0),X=0;function ie(h,_,T,C,j){this.listener=h,this.proxy=null,this.src=_,this.type=T,this.capture=!!C,this.ha=j,this.key=++X,this.da=this.fa=!1}function ce(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function xe(h,_,T){for(const C in h)_.call(T,h[C],C,h)}function Pe(h,_){for(const T in h)_.call(void 0,h[T],T,h)}function M(h){const _={};for(const T in h)_[T]=h[T];return _}const H="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function W(h,_){let T,C;for(let j=1;j<arguments.length;j++){C=arguments[j];for(T in C)h[T]=C[T];for(let Y=0;Y<H.length;Y++)T=H[Y],Object.prototype.hasOwnProperty.call(C,T)&&(h[T]=C[T])}}function le(h){this.src=h,this.g={},this.h=0}le.prototype.add=function(h,_,T,C,j){const Y=h.toString();h=this.g[Y],h||(h=this.g[Y]=[],this.h++);const oe=_e(h,_,C,j);return oe>-1?(_=h[oe],T||(_.fa=!1)):(_=new ie(_,this.src,Y,!!C,j),_.fa=T,h.push(_)),_};function ge(h,_){const T=_.type;if(T in h.g){var C=h.g[T],j=Array.prototype.indexOf.call(C,_,void 0),Y;(Y=j>=0)&&Array.prototype.splice.call(C,j,1),Y&&(ce(_),h.g[T].length==0&&(delete h.g[T],h.h--))}}function _e(h,_,T,C){for(let j=0;j<h.length;++j){const Y=h[j];if(!Y.da&&Y.listener==_&&Y.capture==!!T&&Y.ha==C)return j}return-1}var Me="closure_lm_"+(Math.random()*1e6|0),lt={};function Xe(h,_,T,C,j){if(Array.isArray(_)){for(let Y=0;Y<_.length;Y++)Xe(h,_[Y],T,C,j);return null}return T=Al(T),h&&h[De]?h.J(_,T,d(C)?!!C.capture:!1,j):ai(h,_,T,!1,C,j)}function ai(h,_,T,C,j,Y){if(!_)throw Error("Invalid event type");const oe=d(j)?!!j.capture:!!j;let Ie=Zr(h);if(Ie||(h[Me]=Ie=new le(h)),T=Ie.add(_,T,C,oe,Y),T.proxy)return T;if(C=Hn(),T.proxy=C,C.src=h,C.listener=T,h.addEventListener)U||(j=oe),j===void 0&&(j=!1),h.addEventListener(_.toString(),C,j);else if(h.attachEvent)h.attachEvent(Ii(_.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Hn(){function h(T){return _.call(h.src,h.listener,T)}const _=Cl;return h}function Ri(h,_,T,C,j){if(Array.isArray(_))for(var Y=0;Y<_.length;Y++)Ri(h,_[Y],T,C,j);else C=d(C)?!!C.capture:!!C,T=Al(T),h&&h[De]?(h=h.i,Y=String(_).toString(),Y in h.g&&(_=h.g[Y],T=_e(_,T,C,j),T>-1&&(ce(_[T]),Array.prototype.splice.call(_,T,1),_.length==0&&(delete h.g[Y],h.h--)))):h&&(h=Zr(h))&&(_=h.g[_.toString()],h=-1,_&&(h=_e(_,T,C,j)),(T=h>-1?_[h]:null)&&Ja(T))}function Ja(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[De])ge(_.i,h);else{var T=h.type,C=h.proxy;_.removeEventListener?_.removeEventListener(T,C,h.capture):_.detachEvent?_.detachEvent(Ii(T),C):_.addListener&&_.removeListener&&_.removeListener(C),(T=Zr(_))?(ge(T,h),T.h==0&&(T.src=null,_[Me]=null)):ce(h)}}}function Ii(h){return h in lt?lt[h]:lt[h]="on"+h}function Cl(h,_){if(h.da)h=!0;else{_=new Ze(_,this);const T=h.listener,C=h.ha||h.src;h.fa&&Ja(h),h=T.call(C,_)}return h}function Zr(h){return h=h[Me],h instanceof le?h:null}var bl="__closure_events_fn_"+(Math.random()*1e9>>>0);function Al(h){return typeof h=="function"?h:(h[bl]||(h[bl]=function(_){return h.handleEvent(_)}),h[bl])}function It(){P.call(this),this.i=new le(this),this.M=this,this.G=null}E(It,P),It.prototype[De]=!0,It.prototype.removeEventListener=function(h,_,T,C){Ri(this,h,_,T,C)};function Bt(h,_){var T,C=h.G;if(C)for(T=[];C;C=C.G)T.push(C);if(h=h.M,C=_.type||_,typeof _=="string")_=new D(_,h);else if(_ instanceof D)_.target=_.target||h;else{var j=_;_=new D(C,h),W(_,j)}j=!0;let Y,oe;if(T)for(oe=T.length-1;oe>=0;oe--)Y=_.g=T[oe],j=Ks(Y,C,!0,_)&&j;if(Y=_.g=h,j=Ks(Y,C,!0,_)&&j,j=Ks(Y,C,!1,_)&&j,T)for(oe=0;oe<T.length;oe++)Y=_.g=T[oe],j=Ks(Y,C,!1,_)&&j}It.prototype.N=function(){if(It.Z.N.call(this),this.i){var h=this.i;for(const _ in h.g){const T=h.g[_];for(let C=0;C<T.length;C++)ce(T[C]);delete h.g[_],h.h--}}this.G=null},It.prototype.J=function(h,_,T,C){return this.i.add(String(h),_,!1,T,C)},It.prototype.K=function(h,_,T,C){return this.i.add(String(h),_,!0,T,C)};function Ks(h,_,T,C){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();let j=!0;for(let Y=0;Y<_.length;++Y){const oe=_[Y];if(oe&&!oe.da&&oe.capture==T){const Ie=oe.listener,Ct=oe.ha||oe.src;oe.fa&&ge(h.i,oe),j=Ie.call(Ct,C)!==!1&&j}}return j&&!C.defaultPrevented}function em(h,_){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:c.setTimeout(h,_||0)}function Fc(h){h.g=em(()=>{h.g=null,h.i&&(h.i=!1,Fc(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class yn extends P{constructor(_,T){super(),this.m=_,this.l=T,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Fc(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ea(h){P.call(this),this.h=h,this.g={}}E(ea,P);var Rl=[];function Il(h){xe(h.g,function(_,T){this.g.hasOwnProperty(T)&&Ja(_)},h),h.g={}}ea.prototype.N=function(){ea.Z.N.call(this),Il(this)},ea.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qs=c.JSON.stringify,tm=c.JSON.parse,Hc=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function qc(){}function Gc(){}var oi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function tn(){D.call(this,"d")}E(tn,D);function qn(){D.call(this,"c")}E(qn,D);var wt={},Yc=null;function Za(){return Yc=Yc||new It}wt.Ia="serverreachability";function Kc(h){D.call(this,wt.Ia,h)}E(Kc,D);function Ni(h){const _=Za();Bt(_,new Kc(_))}wt.STAT_EVENT="statevent";function ta(h,_){D.call(this,wt.STAT_EVENT,h),this.stat=_}E(ta,D);function Nt(h){const _=Za();Bt(_,new ta(_,h))}wt.Ja="timingevent";function Oi(h,_){D.call(this,wt.Ja,h),this.size=_}E(Oi,D);function Di(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},_)}function li(){this.g=!0}li.prototype.ua=function(){this.g=!1};function nm(h,_,T,C,j,Y){h.info(function(){if(h.g)if(Y){var oe="",Ie=Y.split("&");for(let $e=0;$e<Ie.length;$e++){var Ct=Ie[$e].split("=");if(Ct.length>1){const gt=Ct[0];Ct=Ct[1];const Qn=gt.split("_");oe=Qn.length>=2&&Qn[1]=="type"?oe+(gt+"="+Ct+"&"):oe+(gt+"=redacted&")}}}else oe=null;else oe=Y;return"XMLHTTP REQ ("+C+") [attempt "+j+"]: "+_+`
`+T+`
`+oe})}function Qc(h,_,T,C,j,Y,oe){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+j+"]: "+_+`
`+T+`
`+Y+" "+oe})}function Mi(h,_,T,C){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+im(h,T)+(C?" "+C:"")})}function na(h,_){h.info(function(){return"TIMEOUT: "+_})}li.prototype.info=function(){};function im(h,_){if(!h.g)return _;if(!_)return null;try{const Y=JSON.parse(_);if(Y){for(h=0;h<Y.length;h++)if(Array.isArray(Y[h])){var T=Y[h];if(!(T.length<2)){var C=T[1];if(Array.isArray(C)&&!(C.length<1)){var j=C[0];if(j!="noop"&&j!="stop"&&j!="close")for(let oe=1;oe<C.length;oe++)C[oe]=""}}}}return Qs(Y)}catch{return _}}var ia={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Nl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ol;function sa(){}E(sa,qc),sa.prototype.g=function(){return new XMLHttpRequest},Ol=new sa;function cs(h){return encodeURIComponent(String(h))}function Wc(h){var _=1;h=h.split(":");const T=[];for(;_>0&&h.length;)T.push(h.shift()),_--;return h.length&&T.push(h.join(":")),T}function ui(h,_,T,C){this.j=h,this.i=_,this.l=T,this.S=C||1,this.V=new ea(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ci}function ci(){this.i=null,this.g="",this.h=!1}var Ot={},Kt={};function xi(h,_,T){h.M=1,h.A=ra(Mt(_)),h.u=T,h.R=!0,eo(h,null)}function eo(h,_){h.F=Date.now(),Pi(h),h.B=Mt(h.A);var T=h.B,C=h.S;Array.isArray(C)||(C=[String(C)]),so(T.i,"t",C),h.C=0,T=h.j.L,h.h=new ci,h.g=ch(h.j,T?_:null,!h.u),h.P>0&&(h.O=new yn(g(h.Y,h,h.g),h.P)),_=h.V,T=h.g,C=h.ba;var j="readystatechange";Array.isArray(j)||(j&&(Rl[0]=j.toString()),j=Rl);for(let Y=0;Y<j.length;Y++){const oe=Xe(T,j[Y],C||_.handleEvent,!1,_.h||_);if(!oe)break;_.g[oe.key]=oe}_=h.J?M(h.J):{},h.u?(h.v||(h.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,_)):(h.v="GET",h.g.ea(h.B,h.v,null,_)),Ni(),nm(h.i,h.v,h.B,h.l,h.S,h.u)}ui.prototype.ba=function(h){h=h.target;const _=this.O;_&&di(h)==3?_.j():this.Y(h)},ui.prototype.Y=function(h){try{if(h==this.g)e:{const Ie=di(this.g),Ct=this.g.ya(),$e=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||nn(this.g)))){this.K||Ie!=4||Ct==7||(Ct==8||$e<=0?Ni(3):Ni(2)),ki(this);var _=this.g.ca();this.X=_;var T=sm(this);if(this.o=_==200,Qc(this.i,this.v,this.B,this.l,this.S,Ie,_),this.o){if(this.U&&!this.L){t:{if(this.g){var C,j=this.g;if((C=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(C)){var Y=C;break t}}Y=null}if(h=Y)Mi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Vi(this,h);else{this.o=!1,this.m=3,Nt(12),xn(this),Gn(this);break e}}if(this.R){h=!0;let gt;for(;!this.K&&this.C<T.length;)if(gt=$c(this,T),gt==Kt){Ie==4&&(this.m=4,Nt(14),h=!1),Mi(this.i,this.l,null,"[Incomplete Response]");break}else if(gt==Ot){this.m=4,Nt(15),Mi(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else Mi(this.i,this.l,gt,null),Vi(this,gt);if(Xc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||T.length!=0||this.h.h||(this.m=1,Nt(16),h=!1),this.o=this.o&&h,!h)Mi(this.i,this.l,T,"[Invalid Chunked Response]"),xn(this),Gn(this);else if(T.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Gl(oe),oe.P=!0,Nt(11))}}else Mi(this.i,this.l,T,null),Vi(this,T);Ie==4&&xn(this),this.o&&!this.K&&(Ie==4?ah(this.j,this):(this.o=!1,Pi(this)))}else fs(this.g),_==400&&T.indexOf("Unknown SID")>0?(this.m=3,Nt(12)):(this.m=0,Nt(13)),xn(this),Gn(this)}}}catch{}finally{}};function sm(h){if(!Xc(h))return h.g.la();const _=nn(h.g);if(_==="")return"";let T="";const C=_.length,j=di(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return xn(h),Gn(h),"";h.h.i=new c.TextDecoder}for(let Y=0;Y<C;Y++)h.h.h=!0,T+=h.h.i.decode(_[Y],{stream:!(j&&Y==C-1)});return _.length=0,h.h.g+=T,h.C=0,h.h.g}function Xc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function $c(h,_){var T=h.C,C=_.indexOf(`
`,T);return C==-1?Kt:(T=Number(_.substring(T,C)),isNaN(T)?Ot:(C+=1,C+T>_.length?Kt:(_=_.slice(C,C+T),h.C=C+T,_)))}ui.prototype.cancel=function(){this.K=!0,xn(this)};function Pi(h){h.T=Date.now()+h.H,to(h,h.H)}function to(h,_){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Di(g(h.aa,h),_)}function ki(h){h.D&&(c.clearTimeout(h.D),h.D=null)}ui.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(na(this.i,this.B),this.M!=2&&(Ni(),Nt(17)),xn(this),this.m=2,Gn(this)):to(this,this.T-h)};function Gn(h){h.j.I==0||h.K||ah(h.j,h)}function xn(h){ki(h);var _=h.O;_&&typeof _.dispose=="function"&&_.dispose(),h.O=null,Il(h.V),h.g&&(_=h.g,h.g=null,_.abort(),_.dispose())}function Vi(h,_){try{var T=h.j;if(T.I!=0&&(T.g==h||Ui(T.h,h))){if(!h.L&&Ui(T.h,h)&&T.I==3){try{var C=T.Ba.g.parse(_)}catch{C=null}if(Array.isArray(C)&&C.length==3){var j=C;if(j[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)uo(T),nr(T);else break e;fa(T),Nt(18)}}else T.xa=j[1],0<T.xa-T.K&&j[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=Di(g(T.Va,T),6e3));Li(T.h)<=1&&T.ta&&(T.ta=void 0)}else qi(T,11)}else if((h.L||T.g==h)&&uo(T),!I(_))for(j=T.Ba.g.parse(_),_=0;_<j.length;_++){let $e=j[_];const gt=$e[0];if(!(gt<=T.K))if(T.K=gt,$e=$e[1],T.I==2)if($e[0]=="c"){T.M=$e[1],T.ba=$e[2];const Qn=$e[3];Qn!=null&&(T.ka=Qn,T.j.info("VER="+T.ka));const Gi=$e[4];Gi!=null&&(T.za=Gi,T.j.info("SVER="+T.za));const mi=$e[5];mi!=null&&typeof mi=="number"&&mi>0&&(C=1.5*mi,T.O=C,T.j.info("backChannelRequestTimeoutMs_="+C)),C=T;const pi=h.g;if(pi){const da=pi.g?pi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(da){var Y=C.h;Y.g||da.indexOf("spdy")==-1&&da.indexOf("quic")==-1&&da.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(xl(Y,Y.h),Y.h=null))}if(C.G){const co=pi.g?pi.g.getResponseHeader("X-HTTP-Session-Id"):null;co&&(C.wa=co,tt(C.J,C.G,co))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),C=T;var oe=h;if(C.na=uh(C,C.L?C.ba:null,C.W),oe.L){Pl(C.h,oe);var Ie=oe,Ct=C.O;Ct&&(Ie.H=Ct),Ie.D&&(ki(Ie),Pi(Ie)),C.g=oe}else sh(C);T.i.length>0&&Hi(T)}else $e[0]!="stop"&&$e[0]!="close"||qi(T,7);else T.I==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?qi(T,7):Hl(T):$e[0]!="noop"&&T.l&&T.l.qa($e),T.A=0)}}Ni(4)}catch{}}var Dt=class{constructor(h,_){this.g=h,this.map=_}};function Dl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ml(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Li(h){return h.h?1:h.g?h.g.size:0}function Ui(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function xl(h,_){h.g?h.g.add(_):h.h=_}function Pl(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Dl.prototype.cancel=function(){if(this.i=kl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function kl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const T of h.g.values())_=_.concat(T.G);return _}return R(h.i)}var Jc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function no(h,_){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const C=h[T].indexOf("=");let j,Y=null;C>=0?(j=h[T].substring(0,C),Y=h[T].substring(C+1)):j=h[T],_(j,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Pn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;h instanceof Pn?(this.l=h.l,Qt(this,h.j),this.o=h.o,this.g=h.g,Ws(this,h.u),this.h=h.h,Vl(this,nh(h.i)),this.m=h.m):h&&(_=String(h).match(Jc))?(this.l=!1,Qt(this,_[1]||"",!0),this.o=zi(_[2]||""),this.g=zi(_[3]||"",!0),Ws(this,_[4]),this.h=zi(_[5]||"",!0),Vl(this,_[6]||"",!0),this.m=zi(_[7]||"")):(this.l=!1,this.i=new $s(null,this.l))}Pn.prototype.toString=function(){const h=[];var _=this.j;_&&h.push(aa(_,io,!0),":");var T=this.g;return(T||_=="file")&&(h.push("//"),(_=this.o)&&h.push(aa(_,io,!0),"@"),h.push(cs(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(aa(T,T.charAt(0)=="/"?Ll:Zc,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",aa(T,eh)),h.join("")},Pn.prototype.resolve=function(h){const _=Mt(this);let T=!!h.j;T?Qt(_,h.j):T=!!h.o,T?_.o=h.o:T=!!h.g,T?_.g=h.g:T=h.u!=null;var C=h.h;if(T)Ws(_,h.u);else if(T=!!h.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var j=_.h.lastIndexOf("/");j!=-1&&(C=_.h.slice(0,j+1)+C)}if(j=C,j==".."||j==".")C="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){C=j.lastIndexOf("/",0)==0,j=j.split("/");const Y=[];for(let oe=0;oe<j.length;){const Ie=j[oe++];Ie=="."?C&&oe==j.length&&Y.push(""):Ie==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),C&&oe==j.length&&Y.push("")):(Y.push(Ie),C=!0)}C=Y.join("/")}else C=j}return T?_.h=C:T=h.i.toString()!=="",T?Vl(_,nh(h.i)):T=!!h.m,T&&(_.m=h.m),_};function Mt(h){return new Pn(h)}function Qt(h,_,T){h.j=T?zi(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Ws(h,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);h.u=_}else h.u=null}function Vl(h,_,T){_ instanceof $s?(h.i=_,ro(h.i,h.l)):(T||(_=aa(_,Xs)),h.i=new $s(_,h.l))}function tt(h,_,T){h.i.set(_,T)}function ra(h){return tt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function zi(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function aa(h,_,T){return typeof h=="string"?(h=encodeURI(h).replace(_,Sn),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Sn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var io=/[#\/\?@]/g,Zc=/[#\?:]/g,Ll=/[#\?]/g,Xs=/[#\?@]/g,eh=/#/g;function $s(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function wn(h){h.g||(h.g=new Map,h.h=0,h.i&&no(h.i,function(_,T){h.add(decodeURIComponent(_.replace(/\+/g," ")),T)}))}n=$s.prototype,n.add=function(h,_){wn(this),this.i=null,h=Js(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(_),this.h+=1,this};function th(h,_){wn(h),_=Js(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Ul(h,_){return wn(h),_=Js(h,_),h.g.has(_)}n.forEach=function(h,_){wn(this),this.g.forEach(function(T,C){T.forEach(function(j){h.call(_,j,C,this)},this)},this)};function zl(h,_){wn(h);let T=[];if(typeof _=="string")Ul(h,_)&&(T=T.concat(h.g.get(Js(h,_))));else for(h=Array.from(h.g.values()),_=0;_<h.length;_++)T=T.concat(h[_]);return T}n.set=function(h,_){return wn(this),this.i=null,h=Js(this,h),Ul(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=zl(this,h),h.length>0?String(h[0]):_):_};function so(h,_,T){th(h,_),T.length>0&&(h.i=null,h.g.set(Js(h,_),R(T)),h.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(let C=0;C<_.length;C++){var T=_[C];const j=cs(T);T=zl(this,T);for(let Y=0;Y<T.length;Y++){let oe=j;T[Y]!==""&&(oe+="="+cs(T[Y])),h.push(oe)}}return this.i=h.join("&")};function nh(h){const _=new $s;return _.i=h.i,h.g&&(_.g=new Map(h.g),_.h=h.h),_}function Js(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function ro(h,_){_&&!h.j&&(wn(h),h.i=null,h.g.forEach(function(T,C){const j=C.toLowerCase();C!=j&&(th(this,C),so(this,j,T))},h)),h.j=_}function hi(h,_){const T=new li;if(c.Image){const C=new Image;C.onload=y(Yn,T,"TestLoadImage: loaded",!0,_,C),C.onerror=y(Yn,T,"TestLoadImage: error",!1,_,C),C.onabort=y(Yn,T,"TestLoadImage: abort",!1,_,C),C.ontimeout=y(Yn,T,"TestLoadImage: timeout",!1,_,C),c.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else _(!1)}function jl(h,_){const T=new li,C=new AbortController,j=setTimeout(()=>{C.abort(),Yn(T,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:C.signal}).then(Y=>{clearTimeout(j),Y.ok?Yn(T,"TestPingServer: ok",!0,_):Yn(T,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(j),Yn(T,"TestPingServer: error",!1,_)})}function Yn(h,_,T,C,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),C(T)}catch{}}function Zs(){this.g=new Hc}function ji(h){this.i=h.Sb||null,this.h=h.ab||!1}E(ji,qc),ji.prototype.g=function(){return new oa(this.i,this.h)};function oa(h,_){It.call(this),this.H=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(oa,It),n=oa.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=_,this.readyState=1,fi(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(_.body=h),(this.H||c).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,er(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,fi(this)),this.g&&(this.readyState=3,fi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ao(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function ao(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?er(this):fi(this),this.readyState==3&&ao(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,er(this))},n.Na=function(h){this.g&&(this.response=h,er(this))},n.ga=function(){this.g&&er(this)};function er(h){h.readyState=4,h.l=null,h.j=null,h.B=null,fi(h)}n.setRequestHeader=function(h,_){this.A.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var T=_.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=_.next();return h.join(`\r
`)};function fi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(oa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Kn(h){let _="";return xe(h,function(T,C){_+=C,_+=":",_+=T,_+=`\r
`}),_}function la(h,_,T){e:{for(C in T){var C=!1;break e}C=!0}C||(T=Kn(T),typeof h=="string"?T!=null&&cs(T):tt(h,_,T))}function st(h){It.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(st,It);var Bi=/^https?$/i,Bl=["POST","PUT"];n=st.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,_,T,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ol.g(),this.g.onreadystatechange=S(g(this.Ca,this));try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(Y){ua(this,Y);return}if(h=T||"",T=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var j in C)T.set(j,C[j]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const Y of C.keys())T.set(Y,C.get(Y));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(T.keys()).find(Y=>Y.toLowerCase()=="content-type"),j=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Bl,_,void 0)>=0)||C||j||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,oe]of T)this.g.setRequestHeader(Y,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Y){ua(this,Y)}};function ua(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.o=5,Fl(h),hs(h)}function Fl(h){h.A||(h.A=!0,Bt(h,"complete"),Bt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Bt(this,"complete"),Bt(this,"abort"),hs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hs(this,!0)),st.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ca(this):this.Xa())},n.Xa=function(){ca(this)};function ca(h){if(h.h&&typeof l<"u"){if(h.v&&di(h)==4)setTimeout(h.Ca.bind(h),0);else if(Bt(h,"readystatechange"),di(h)==4){h.h=!1;try{const Y=h.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var T;if(!(T=_)){var C;if(C=Y===0){let oe=String(h.D).match(Jc)[1]||null;!oe&&c.self&&c.self.location&&(oe=c.self.location.protocol.slice(0,-1)),C=!Bi.test(oe?oe.toLowerCase():"")}T=C}if(T)Bt(h,"complete"),Bt(h,"success");else{h.o=6;try{var j=di(h)>2?h.g.statusText:""}catch{j=""}h.l=j+" ["+h.ca()+"]",Fl(h)}}finally{hs(h)}}}}function hs(h,_){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,_||Bt(h,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function di(h){return h.g?h.g.readyState:0}n.ca=function(){try{return di(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),tm(_)}};function nn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function fs(h){const _={};h=(h.g&&di(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(I(h[C]))continue;var T=Wc(h[C]);const j=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const Y=_[j]||[];_[j]=Y,Y.push(T)}Pe(_,function(C){return C.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fi(h,_,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||_}function tr(h){this.za=0,this.i=[],this.j=new li,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Fi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Fi("baseRetryDelayMs",5e3,h),this.Za=Fi("retryDelaySeedMs",1e4,h),this.Ta=Fi("forwardChannelMaxRetries",2,h),this.va=Fi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Dl(h&&h.concurrentRequestLimit),this.Ba=new Zs,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=tr.prototype,n.ka=8,n.I=1,n.connect=function(h,_,T,C){Nt(0),this.W=h,this.H=_||{},T&&C!==void 0&&(this.H.OSID=T,this.H.OAID=C),this.F=this.X,this.J=uh(this,null,this.W),Hi(this)};function Hl(h){if(oo(h),h.I==3){var _=h.V++,T=Mt(h.J);if(tt(T,"SID",h.M),tt(T,"RID",_),tt(T,"TYPE","terminate"),ha(h,T),_=new ui(h,h.j,_),_.M=2,_.A=ra(Mt(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(_.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=_.A,T=!0),T||(_.g=ch(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Pi(_)}lh(h)}function nr(h){h.g&&(Gl(h),h.g.cancel(),h.g=null)}function oo(h){nr(h),h.v&&(c.clearTimeout(h.v),h.v=null),uo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Hi(h){if(!Ml(h.h)&&!h.m){h.m=!0;var _=h.Ea;Ae||b(),Re||(Ae(),Re=!0),N.add(_,h),h.D=0}}function lo(h,_){return Li(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=_.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Di(g(h.Ea,h,_),oh(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const j=new ui(this,this.j,h);let Y=this.o;if(this.U&&(Y?(Y=M(Y),W(Y,this.U)):Y=this.U),this.u!==null||this.R||(j.J=Y,Y=null),this.S)e:{for(var _=0,T=0;T<this.i.length;T++){t:{var C=this.i[T];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(_+=C,_>4096){_=T;break e}if(_===4096||T===this.i.length-1){_=T+1;break e}}_=1e3}else _=1e3;_=ih(this,j,_),T=Mt(this.J),tt(T,"RID",h),tt(T,"CVER",22),this.G&&tt(T,"X-HTTP-Session-Id",this.G),ha(this,T),Y&&(this.R?_="headers="+cs(Kn(Y))+"&"+_:this.u&&la(T,this.u,Y)),xl(this.h,j),this.Ra&&tt(T,"TYPE","init"),this.S?(tt(T,"$req",_),tt(T,"SID","null"),j.U=!0,xi(j,T,null)):xi(j,T,_),this.I=2}}else this.I==3&&(h?ql(this,h):this.i.length==0||Ml(this.h)||ql(this))};function ql(h,_){var T;_?T=_.l:T=h.V++;const C=Mt(h.J);tt(C,"SID",h.M),tt(C,"RID",T),tt(C,"AID",h.K),ha(h,C),h.u&&h.o&&la(C,h.u,h.o),T=new ui(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),_&&(h.i=_.G.concat(h.i)),_=ih(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),xl(h.h,T),xi(T,C,_)}function ha(h,_){h.H&&xe(h.H,function(T,C){tt(_,C,T)}),h.l&&xe({},function(T,C){tt(_,C,T)})}function ih(h,_,T){T=Math.min(h.i.length,T);const C=h.l?g(h.l.Ka,h.l,h):null;e:{var j=h.i;let Ie=-1;for(;;){const Ct=["count="+T];Ie==-1?T>0?(Ie=j[0].g,Ct.push("ofs="+Ie)):Ie=0:Ct.push("ofs="+Ie);let $e=!0;for(let gt=0;gt<T;gt++){var Y=j[gt].g;const Qn=j[gt].map;if(Y-=Ie,Y<0)Ie=Math.max(0,j[gt].g-100),$e=!1;else try{Y="req"+Y+"_"||"";try{var oe=Qn instanceof Map?Qn:Object.entries(Qn);for(const[Gi,mi]of oe){let pi=mi;d(mi)&&(pi=Qs(mi)),Ct.push(Y+Gi+"="+encodeURIComponent(pi))}}catch(Gi){throw Ct.push(Y+"type="+encodeURIComponent("_badmap")),Gi}}catch{C&&C(Qn)}}if($e){oe=Ct.join("&");break e}}oe=void 0}return h=h.i.splice(0,T),_.G=h,oe}function sh(h){if(!h.g&&!h.v){h.Y=1;var _=h.Da;Ae||b(),Re||(Ae(),Re=!0),N.add(_,h),h.A=0}}function fa(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Di(g(h.Da,h),oh(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,rh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Di(g(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Nt(10),nr(this),rh(this))};function Gl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function rh(h){h.g=new ui(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var _=Mt(h.na);tt(_,"RID","rpc"),tt(_,"SID",h.M),tt(_,"AID",h.K),tt(_,"CI",h.F?"0":"1"),!h.F&&h.ia&&tt(_,"TO",h.ia),tt(_,"TYPE","xmlhttp"),ha(h,_),h.u&&h.o&&la(_,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=ra(Mt(_)),T.u=null,T.R=!0,eo(T,h)}n.Va=function(){this.C!=null&&(this.C=null,nr(this),fa(this),Nt(19))};function uo(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function ah(h,_){var T=null;if(h.g==_){uo(h),Gl(h),h.g=null;var C=2}else if(Ui(h.h,_))T=_.G,Pl(h.h,_),C=1;else return;if(h.I!=0){if(_.o)if(C==1){T=_.u?_.u.length:0,_=Date.now()-_.F;var j=h.D;C=Za(),Bt(C,new Oi(C,T)),Hi(h)}else sh(h);else if(j=_.m,j==3||j==0&&_.X>0||!(C==1&&lo(h,_)||C==2&&fa(h)))switch(T&&T.length>0&&(_=h.h,_.i=_.i.concat(T)),j){case 1:qi(h,5);break;case 4:qi(h,10);break;case 3:qi(h,6);break;default:qi(h,2)}}}function oh(h,_){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*_}function qi(h,_){if(h.j.info("Error code "+_),_==2){var T=g(h.bb,h),C=h.Ua;const j=!C;C=new Pn(C||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Qt(C,"https"),ra(C),j?hi(C.toString(),T):jl(C.toString(),T)}else Nt(2);h.I=0,h.l&&h.l.pa(_),lh(h),oo(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Nt(2)):(this.j.info("Failed to ping google.com"),Nt(1))};function lh(h){if(h.I=0,h.ja=[],h.l){const _=kl(h.h);(_.length!=0||h.i.length!=0)&&(k(h.ja,_),k(h.ja,h.i),h.h.i.length=0,R(h.i),h.i.length=0),h.l.oa()}}function uh(h,_,T){var C=T instanceof Pn?Mt(T):new Pn(T);if(C.g!="")_&&(C.g=_+"."+C.g),Ws(C,C.u);else{var j=c.location;C=j.protocol,_=_?_+"."+j.hostname:j.hostname,j=+j.port;const Y=new Pn(null);C&&Qt(Y,C),_&&(Y.g=_),j&&Ws(Y,j),T&&(Y.h=T),C=Y}return T=h.G,_=h.wa,T&&_&&tt(C,T,_),tt(C,"VER",h.ka),ha(h,C),C}function ch(h,_,T){if(_&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Aa&&!h.ma?new st(new ji({ab:T})):new st(h.ma),_.Fa(h.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function hh(){}n=hh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ir(){}ir.prototype.g=function(h,_){return new vn(h,_)};function vn(h,_){It.call(this),this.g=new tr(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(h?h["X-WebChannel-Client-Profile"]=_.sa:h={"X-WebChannel-Client-Profile":_.sa}),this.g.U=h,(h=_&&_.Qb)&&!I(h)&&(this.g.u=h),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!I(_)&&(this.g.G=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new ds(this)}E(vn,It),vn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){Hl(this.g)},vn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=Qs(h),h=T);_.i.push(new Dt(_.Ya++,h)),_.I==3&&Hi(_)},vn.prototype.N=function(){this.g.l=null,delete this.j,Hl(this.g),delete this.g,vn.Z.N.call(this)};function fh(h){tn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const T in _){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}E(fh,tn);function dh(){qn.call(this),this.status=1}E(dh,qn);function ds(h){this.g=h}E(ds,hh),ds.prototype.ra=function(){Bt(this.g,"a")},ds.prototype.qa=function(h){Bt(this.g,new fh(h))},ds.prototype.pa=function(h){Bt(this.g,new dh)},ds.prototype.oa=function(){Bt(this.g,"b")},ir.prototype.createWebChannel=ir.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,sb=function(){return new ir},ib=function(){return Za()},nb=wt,jg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ia.NO_ERROR=0,ia.TIMEOUT=8,ia.HTTP_ERROR=6,xf=ia,Nl.COMPLETE="complete",tb=Nl,Gc.EventType=oi,oi.OPEN="a",oi.CLOSE="b",oi.ERROR="c",oi.MESSAGE="d",It.prototype.listen=It.prototype.J,Vu=Gc,st.prototype.listenOnce=st.prototype.K,st.prototype.getLastError=st.prototype.Ha,st.prototype.getLastErrorCode=st.prototype.ya,st.prototype.getStatus=st.prototype.ca,st.prototype.getResponseJson=st.prototype.La,st.prototype.getResponseText=st.prototype.la,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Fa,eb=st}).apply(typeof Ef<"u"?Ef:typeof self<"u"?self:typeof window<"u"?window:{});const h0="@firebase/firestore",f0="4.9.2";class mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");let _l="12.3.0";const za=new Rd("@firebase/firestore");function Fo(){return za.logLevel}function ue(n,...e){if(za.logLevel<=Ue.DEBUG){const t=e.map(U_);za.debug(`Firestore (${_l}): ${n}`,...t)}}function Bs(n,...e){if(za.logLevel<=Ue.ERROR){const t=e.map(U_);za.error(`Firestore (${_l}): ${n}`,...t)}}function nl(n,...e){if(za.logLevel<=Ue.WARN){const t=e.map(U_);za.warn(`Firestore (${_l}): ${n}`,...t)}}function U_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Se(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,rb(n,s,t)}function rb(n,e,t){let s=`FIRESTORE (${_l}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Bs(s),new Error(s)}function et(n,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,n||rb(e,a,s)}function be(n,e){return n}const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends qs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Vr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class ab{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class m2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(mn.UNAUTHENTICATED)))}shutdown(){}}class p2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class g2{constructor(e){this.t=e,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){et(this.o===void 0,42304);let s=this.i;const a=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new Vr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Vr,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},d=p=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Vr)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(et(typeof s.accessToken=="string",31837,{l:s}),new ab(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string",2055,{h:e}),new mn(e)}}class _2{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class y2{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new _2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class d0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class v2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ii(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){et(this.o===void 0,3512);const s=l=>{l.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ue("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const a=l=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new d0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(et(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new d0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function E2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}class z_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=E2(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%62))}return s}}function Fe(n,e){return n<e?-1:n>e?1:0}function Bg(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const a=n.charAt(s),l=e.charAt(s);if(a!==l)return _g(a)===_g(l)?Fe(a,l):_g(a)?1:-1}return Fe(n.length,e.length)}const T2=55296,S2=57343;function _g(n){const e=n.charCodeAt(0);return e>=T2&&e<=S2}function il(n,e,t){return n.length===e.length&&n.every(((s,a)=>t(s,e[a])))}const m0="__name__";class Xi{constructor(e,t,s){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Se(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Xi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=Xi.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Fe(e.length,t.length)}static compareSegments(e,t){const s=Xi.isNumericId(e),a=Xi.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?Xi.extractNumericId(e).compare(Xi.extractNumericId(t)):Bg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return kr.fromString(e.substring(4,e.length-2))}}class yt extends Xi{construct(e,t,s){return new yt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new me(se.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((a=>a.length>0)))}return new yt(t)}static emptyPath(){return new yt([])}}const w2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class un extends Xi{construct(e,t,s){return new un(e,t,s)}static isValidIdentifier(e){return w2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),un.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===m0}static keyField(){return new un([m0])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(s.length===0)throw new me(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new me(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new me(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(s+=d,a++):(l(),a++)}if(l(),c)throw new me(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new un(t)}static emptyPath(){return new un([])}}class ye{constructor(e){this.path=e}static fromPath(e){return new ye(yt.fromString(e))}static fromName(e){return new ye(yt.fromString(e).popFirst(5))}static empty(){return new ye(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new yt(e.slice()))}}function C2(n,e,t){if(!t)throw new me(se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function b2(n,e,t,s){if(e===!0&&s===!0)throw new me(se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function p0(n){if(!ye.isDocumentKey(n))throw new me(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ob(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function j_(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Se(12329,{type:typeof n})}function ac(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new me(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=j_(n);throw new me(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function zt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Oc(n,e){if(!ob(n))throw new me(se.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(a&&typeof c!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new me(se.INVALID_ARGUMENT,t);return!0}const g0=-62135596800,_0=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*_0);return new pt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new me(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new me(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<g0)throw new me(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_0}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Oc(e,pt._jsonSchema))return new pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-g0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:zt("string",pt._jsonSchemaVersion),seconds:zt("number"),nanoseconds:zt("number")};class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new pt(0,0))}static max(){return new we(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const oc=-1;function A2(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=we.fromTimestamp(s===1e9?new pt(t+1,0):new pt(t,s));return new Fr(a,ye.empty(),e)}function R2(n){return new Fr(n.readTime,n.key,oc)}class Fr{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Fr(we.min(),ye.empty(),oc)}static max(){return new Fr(we.max(),ye.empty(),oc)}}function I2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(n.documentKey,e.documentKey),t!==0?t:Fe(n.largestBatchId,e.largestBatchId))}const N2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class O2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function yl(n){if(n.code!==se.FAILED_PRECONDITION||n.message!==N2)throw n;ue("LocalStore","Unexpectedly lost primary lease")}class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te(((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):te.reject(t)}static resolve(e){return new te(((t,s)=>{t(e)}))}static reject(e){return new te(((t,s)=>{s(e)}))}static waitFor(e){return new te(((t,s)=>{let a=0,l=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++l,c&&l===a&&t()}),(p=>s(p)))})),c=!0,l===a&&t()}))}static or(e){let t=te.resolve(!1);for(const s of e)t=t.next((a=>a?te.resolve(a):s()));return t}static forEach(e,t){const s=[];return e.forEach(((a,l)=>{s.push(t.call(this,a,l))})),this.waitFor(s)}static mapArray(e,t){return new te(((s,a)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((y=>{c[g]=y,++d,d===l&&s(c)}),(y=>a(y)))}}))}static doWhile(e,t){return new te(((s,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):s()};l()}))}}function D2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function vl(n){return n.name==="IndexedDbTransactionError"}class Md{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Md.ce=-1;const B_=-1;function xd(n){return n==null}function $f(n){return n===0&&1/n==-1/0}function M2(n){return typeof n=="number"&&Number.isInteger(n)&&!$f(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const lb="";function x2(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=y0(e)),e=P2(n.get(t),e);return y0(e)}function P2(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case lb:t+="";break;default:t+=l}}return t}function y0(n){return n+lb+""}function v0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ka(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ub(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}let jt=class Fg{constructor(e,t){this.comparator=e,this.root=t||Lr.EMPTY}insert(e,t){return new Fg(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Lr.BLACK,null,null))}remove(e){return new Fg(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tf(this.root,e,this.comparator,!0)}},Tf=class{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Lr=class Ns{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??Ns.RED,this.left=a??Ns.EMPTY,this.right=l??Ns.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new Ns(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Ns.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Ns.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ns.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ns.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}};Lr.EMPTY=null,Lr.RED=!0,Lr.BLACK=!1;Lr.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,s,a,l){return this}insert(e,t,s){return new Lr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Yt{constructor(e){this.comparator=e,this.data=new jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new E0(this.data.getIterator())}getIteratorFrom(e){return new E0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Yt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Yt(this.comparator);return t.data=e,t}}class E0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ti{constructor(e){this.fields=e,e.sort(un.comparator)}static empty(){return new Ti([])}unionWith(e){let t=new Yt(un.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Ti(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return il(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class cb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new cb("Invalid base64 string: "+l):l}})(e);return new hn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new hn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const k2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hr(n){if(et(!!n,39018),typeof n=="string"){let e=0;const t=k2.exec(n);if(et(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Rt(n.seconds),nanos:Rt(n.nanos)}}function Rt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function qr(n){return typeof n=="string"?hn.fromBase64String(n):hn.fromUint8Array(n)}const hb="server_timestamp",fb="__type__",db="__previous_value__",mb="__local_write_time__";function F_(n){return(n?.mapValue?.fields||{})[fb]?.stringValue===hb}function Pd(n){const e=n.mapValue.fields[db];return F_(e)?Pd(e):e}function lc(n){const e=Hr(n.mapValue.fields[mb].timestampValue);return new pt(e.seconds,e.nanos)}class V2{constructor(e,t,s,a,l,c,d,p,g,y){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=y}}const Jf="(default)";class uc{constructor(e,t){this.projectId=e,this.database=t||Jf}static empty(){return new uc("","")}get isDefaultDatabase(){return this.database===Jf}isEqual(e){return e instanceof uc&&e.projectId===this.projectId&&e.database===this.database}}const pb="__type__",L2="__max__",Sf={mapValue:{}},gb="__vector__",Zf="value";function Gr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?F_(n)?4:z2(n)?9007199254740991:U2(n)?10:11:Se(28295,{value:n})}function ss(n,e){if(n===e)return!0;const t=Gr(n);if(t!==Gr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return lc(n).isEqual(lc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Hr(a.timestampValue),d=Hr(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return qr(a.bytesValue).isEqual(qr(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return Rt(a.geoPointValue.latitude)===Rt(l.geoPointValue.latitude)&&Rt(a.geoPointValue.longitude)===Rt(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Rt(a.integerValue)===Rt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Rt(a.doubleValue),d=Rt(l.doubleValue);return c===d?$f(c)===$f(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return il(n.arrayValue.values||[],e.arrayValue.values||[],ss);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(v0(c)!==v0(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!ss(c[p],d[p])))return!1;return!0})(n,e);default:return Se(52216,{left:n})}}function cc(n,e){return(n.values||[]).find((t=>ss(t,e)))!==void 0}function sl(n,e){if(n===e)return 0;const t=Gr(n),s=Gr(e);if(t!==s)return Fe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Fe(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=Rt(l.integerValue||l.doubleValue),p=Rt(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return T0(n.timestampValue,e.timestampValue);case 4:return T0(lc(n),lc(e));case 5:return Bg(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=qr(l),p=qr(c);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const y=Fe(d[g],p[g]);if(y!==0)return y}return Fe(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Fe(Rt(l.latitude),Rt(c.latitude));return d!==0?d:Fe(Rt(l.longitude),Rt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return S0(n.arrayValue,e.arrayValue);case 10:return(function(l,c){const d=l.fields||{},p=c.fields||{},g=d[Zf]?.arrayValue,y=p[Zf]?.arrayValue,E=Fe(g?.values?.length||0,y?.values?.length||0);return E!==0?E:S0(g,y)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Sf.mapValue&&c===Sf.mapValue)return 0;if(l===Sf.mapValue)return 1;if(c===Sf.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=c.fields||{},y=Object.keys(g);p.sort(),y.sort();for(let E=0;E<p.length&&E<y.length;++E){const S=Bg(p[E],y[E]);if(S!==0)return S;const R=sl(d[p[E]],g[y[E]]);if(R!==0)return R}return Fe(p.length,y.length)})(n.mapValue,e.mapValue);default:throw Se(23264,{he:t})}}function T0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Fe(n,e);const t=Hr(n),s=Hr(e),a=Fe(t.seconds,s.seconds);return a!==0?a:Fe(t.nanos,s.nanos)}function S0(n,e){const t=n.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const l=sl(t[a],s[a]);if(l)return l}return Fe(t.length,s.length)}function rl(n){return Hg(n)}function Hg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Hr(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return qr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ye.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",a=!0;for(const l of t.values||[])a?a=!1:s+=",",s+=Hg(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of s)l?l=!1:a+=",",a+=`${c}:${Hg(t.fields[c])}`;return a+"}"})(n.mapValue):Se(61005,{value:n})}function Pf(n){switch(Gr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pd(n);return e?16+Pf(e):16;case 5:return 2*n.stringValue.length;case 6:return qr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,l)=>a+Pf(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let a=0;return Ka(s.fields,((l,c)=>{a+=l.length+Pf(c)})),a})(n.mapValue);default:throw Se(13486,{value:n})}}function qg(n){return!!n&&"integerValue"in n}function H_(n){return!!n&&"arrayValue"in n}function w0(n){return!!n&&"nullValue"in n}function C0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function kf(n){return!!n&&"mapValue"in n}function U2(n){return(n?.mapValue?.fields||{})[pb]?.stringValue===gb}function Gu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ka(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Gu(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Gu(n.arrayValue.values[t]);return e}return{...n}}function z2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===L2}class si{constructor(e){this.value=e}static empty(){return new si({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!kf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gu(t)}setAll(e){let t=un.emptyPath(),s={},a=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,s,a),s={},a=[],t=d.popLast()}c?s[d.lastSegment()]=Gu(c):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());kf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ss(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];kf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Ka(t,((a,l)=>e[a]=l));for(const a of s)delete e[a]}clone(){return new si(Gu(this.value))}}function _b(n){const e=[];return Ka(n.fields,((t,s)=>{const a=new un([t]);if(kf(s)){const l=_b(s.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new Ti(e)}class pn{constructor(e,t,s,a,l,c,d){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new pn(e,0,we.min(),we.min(),we.min(),si.empty(),0)}static newFoundDocument(e,t,s,a){return new pn(e,1,t,we.min(),s,a,0)}static newNoDocument(e,t){return new pn(e,2,t,we.min(),we.min(),si.empty(),0)}static newUnknownDocument(e,t){return new pn(e,3,t,we.min(),we.min(),si.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=si.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=si.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ed{constructor(e,t){this.position=e,this.inclusive=t}}function b0(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?s=ye.comparator(ye.fromName(c.referenceValue),t.key):s=sl(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function A0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ss(n.position[t],e.position[t]))return!1;return!0}class td{constructor(e,t="asc"){this.field=e,this.dir=t}}function j2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class yb{}class qt extends yb{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new F2(e,t,s):t==="array-contains"?new G2(e,s):t==="in"?new Y2(e,s):t==="not-in"?new K2(e,s):t==="array-contains-any"?new Q2(e,s):new qt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new H2(e,s):new q2(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(sl(t,this.value)):t!==null&&Gr(this.value)===Gr(t)&&this.matchesComparison(sl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rs extends yb{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new rs(e,t)}matches(e){return vb(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function vb(n){return n.op==="and"}function Eb(n){return B2(n)&&vb(n)}function B2(n){for(const e of n.filters)if(e instanceof rs)return!1;return!0}function Gg(n){if(n instanceof qt)return n.field.canonicalString()+n.op.toString()+rl(n.value);if(Eb(n))return n.filters.map((e=>Gg(e))).join(",");{const e=n.filters.map((t=>Gg(t))).join(",");return`${n.op}(${e})`}}function Tb(n,e){return n instanceof qt?(function(s,a){return a instanceof qt&&s.op===a.op&&s.field.isEqual(a.field)&&ss(s.value,a.value)})(n,e):n instanceof rs?(function(s,a){return a instanceof rs&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((l,c,d)=>l&&Tb(c,a.filters[d])),!0):!1})(n,e):void Se(19439)}function Sb(n){return n instanceof qt?(function(t){return`${t.field.canonicalString()} ${t.op} ${rl(t.value)}`})(n):n instanceof rs?(function(t){return t.op.toString()+" {"+t.getFilters().map(Sb).join(" ,")+"}"})(n):"Filter"}class F2 extends qt{constructor(e,t,s){super(e,t,s),this.key=ye.fromName(s.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class H2 extends qt{constructor(e,t){super(e,"in",t),this.keys=wb("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class q2 extends qt{constructor(e,t){super(e,"not-in",t),this.keys=wb("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function wb(n,e){return(e.arrayValue?.values||[]).map((t=>ye.fromName(t.referenceValue)))}class G2 extends qt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return H_(t)&&cc(t.arrayValue,this.value)}}class Y2 extends qt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&cc(this.value.arrayValue,t)}}class K2 extends qt{constructor(e,t){super(e,"not-in",t)}matches(e){if(cc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!cc(this.value.arrayValue,t)}}class Q2 extends qt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!H_(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>cc(this.value.arrayValue,s)))}}class W2{constructor(e,t=null,s=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function R0(n,e=null,t=[],s=[],a=null,l=null,c=null){return new W2(n,e,t,s,a,l,c)}function q_(n){const e=be(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Gg(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),xd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>rl(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>rl(s))).join(",")),e.Te=t}return e.Te}function G_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!j2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Tb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!A0(n.startAt,e.startAt)&&A0(n.endAt,e.endAt)}function Yg(n){return ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class kd{constructor(e,t=null,s=[],a=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function X2(n,e,t,s,a,l,c,d){return new kd(n,e,t,s,a,l,c,d)}function Y_(n){return new kd(n)}function I0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function $2(n){return n.collectionGroup!==null}function Yu(n){const e=be(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Yt(un.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new td(l,s))})),t.has(un.keyField().canonicalString())||e.Ie.push(new td(un.keyField(),s))}return e.Ie}function Ji(n){const e=be(n);return e.Ee||(e.Ee=J2(e,Yu(n))),e.Ee}function J2(n,e){if(n.limitType==="F")return R0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new td(a.field,l)}));const t=n.endAt?new ed(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new ed(n.startAt.position,n.startAt.inclusive):null;return R0(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Kg(n,e,t){return new kd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Vd(n,e){return G_(Ji(n),Ji(e))&&n.limitType===e.limitType}function Cb(n){return`${q_(Ji(n))}|lt:${n.limitType}`}function Ho(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((a=>Sb(a))).join(", ")}]`),xd(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>rl(a))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>rl(a))).join(",")),`Target(${s})`})(Ji(n))}; limitType=${n.limitType})`}function Ld(n,e){return e.isFoundDocument()&&(function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):ye.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,a){for(const l of Yu(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(s,a){return!(s.startAt&&!(function(c,d,p){const g=b0(c,d,p);return c.inclusive?g<=0:g<0})(s.startAt,Yu(s),a)||s.endAt&&!(function(c,d,p){const g=b0(c,d,p);return c.inclusive?g>=0:g>0})(s.endAt,Yu(s),a))})(n,e)}function Z2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function bb(n){return(e,t)=>{let s=!1;for(const a of Yu(n)){const l=eP(a,e,t);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function eP(n,e,t){const s=n.field.isKeyField()?ye.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),g=d.data.field(l);return p!==null&&g!==null?sl(p,g):Se(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Se(19790,{direction:n.dir})}}class Qa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ka(this.inner,((t,s)=>{for(const[a,l]of s)e(a,l)}))}isEmpty(){return ub(this.inner)}size(){return this.innerSize}}const tP=new jt(ye.comparator);function Fs(){return tP}const Ab=new jt(ye.comparator);function Lu(...n){let e=Ab;for(const t of n)e=e.insert(t.key,t);return e}function Rb(n){let e=Ab;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Ma(){return Ku()}function Ib(){return Ku()}function Ku(){return new Qa((n=>n.toString()),((n,e)=>n.isEqual(e)))}const nP=new jt(ye.comparator),iP=new Yt(ye.comparator);function qe(...n){let e=iP;for(const t of n)e=e.add(t);return e}const sP=new Yt(Fe);function rP(){return sP}function K_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$f(e)?"-0":e}}function Nb(n){return{integerValue:""+n}}function aP(n,e){return M2(e)?Nb(e):K_(n,e)}class Ud{constructor(){this._=void 0}}function oP(n,e,t){return n instanceof nd?(function(a,l){const c={fields:{[fb]:{stringValue:hb},[mb]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&F_(l)&&(l=Pd(l)),l&&(c.fields[db]=l),{mapValue:c}})(t,e):n instanceof hc?Db(n,e):n instanceof fc?Mb(n,e):(function(a,l){const c=Ob(a,l),d=N0(c)+N0(a.Ae);return qg(c)&&qg(a.Ae)?Nb(d):K_(a.serializer,d)})(n,e)}function lP(n,e,t){return n instanceof hc?Db(n,e):n instanceof fc?Mb(n,e):t}function Ob(n,e){return n instanceof id?(function(s){return qg(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class nd extends Ud{}class hc extends Ud{constructor(e){super(),this.elements=e}}function Db(n,e){const t=xb(e);for(const s of n.elements)t.some((a=>ss(a,s)))||t.push(s);return{arrayValue:{values:t}}}class fc extends Ud{constructor(e){super(),this.elements=e}}function Mb(n,e){let t=xb(e);for(const s of n.elements)t=t.filter((a=>!ss(a,s)));return{arrayValue:{values:t}}}class id extends Ud{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function N0(n){return Rt(n.integerValue||n.doubleValue)}function xb(n){return H_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function uP(n,e){return n.field.isEqual(e.field)&&(function(s,a){return s instanceof hc&&a instanceof hc||s instanceof fc&&a instanceof fc?il(s.elements,a.elements,ss):s instanceof id&&a instanceof id?ss(s.Ae,a.Ae):s instanceof nd&&a instanceof nd})(n.transform,e.transform)}class cP{constructor(e,t){this.version=e,this.transformResults=t}}class Ps{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ps}static exists(e){return new Ps(void 0,e)}static updateTime(e){return new Ps(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class zd{}function Pb(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Vb(n.key,Ps.none()):new Dc(n.key,n.data,Ps.none());{const t=n.data,s=si.empty();let a=new Yt(un.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),a=a.add(l)}return new Wa(n.key,s,new Ti(a.toArray()),Ps.none())}}function hP(n,e,t){n instanceof Dc?(function(a,l,c){const d=a.value.clone(),p=D0(a.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Wa?(function(a,l,c){if(!Vf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=D0(a.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(kb(a)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Qu(n,e,t,s){return n instanceof Dc?(function(l,c,d,p){if(!Vf(l.precondition,c))return d;const g=l.value.clone(),y=M0(l.fieldTransforms,p,c);return g.setAll(y),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,s):n instanceof Wa?(function(l,c,d,p){if(!Vf(l.precondition,c))return d;const g=M0(l.fieldTransforms,p,c),y=c.data;return y.setAll(kb(l)),y.setAll(g),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,s):(function(l,c,d){return Vf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function fP(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),l=Ob(s.transform,a||null);l!=null&&(t===null&&(t=si.empty()),t.set(s.field,l))}return t||null}function O0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&il(s,a,((l,c)=>uP(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Dc extends zd{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Wa extends zd{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function kb(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function D0(n,e,t){const s=new Map;et(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,d=e.data.field(l.field);s.set(l.field,lP(c,d,t[a]))}return s}function M0(n,e,t){const s=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);s.set(a.field,oP(l,c,e))}return s}class Vb extends zd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dP extends zd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class mP{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&hP(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Qu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Qu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Ib();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const p=Pb(c,d);p!==null&&s.set(a.key,p),c.isValidDocument()||c.convertToNoDocument(we.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),qe())}isEqual(e){return this.batchId===e.batchId&&il(this.mutations,e.mutations,((t,s)=>O0(t,s)))&&il(this.baseMutations,e.baseMutations,((t,s)=>O0(t,s)))}}class Q_{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){et(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=(function(){return nP})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,s[c].version);return new Q_(e,t,s,a)}}class pP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class gP{constructor(e,t){this.count=e,this.unchangedNames=t}}var Lt,Ye;function _P(n){switch(n){case se.OK:return Se(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return Se(15467,{code:n})}}function Lb(n){if(n===void 0)return Bs("GRPC error has no .code"),se.UNKNOWN;switch(n){case Lt.OK:return se.OK;case Lt.CANCELLED:return se.CANCELLED;case Lt.UNKNOWN:return se.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return se.INTERNAL;case Lt.UNAVAILABLE:return se.UNAVAILABLE;case Lt.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Lt.NOT_FOUND:return se.NOT_FOUND;case Lt.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Lt.ABORTED:return se.ABORTED;case Lt.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Lt.DATA_LOSS:return se.DATA_LOSS;default:return Se(39323,{code:n})}}(Ye=Lt||(Lt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";function yP(){return new TextEncoder}const vP=new kr([4294967295,4294967295],0);function x0(n){const e=yP().encode(n),t=new ZC;return t.update(e),new Uint8Array(t.digest())}function P0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new kr([t,s],0),new kr([a,l],0)]}class W_{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Uu(`Invalid padding: ${t}`);if(s<0)throw new Uu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Uu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Uu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=kr.fromNumber(this.ge)}ye(e,t,s){let a=e.add(t.multiply(kr.fromNumber(s)));return a.compare(vP)===1&&(a=new kr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=x0(e),[s,a]=P0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,a,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new W_(l,a,t);return s.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=x0(e),[s,a]=P0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Uu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class jd{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,Mc.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new jd(we.min(),a,new jt(Fe),Fs(),qe())}}class Mc{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Mc(s,t,qe(),qe(),qe())}}class Lf{constructor(e,t,s,a){this.be=e,this.removedTargetIds=t,this.key=s,this.De=a}}class Ub{constructor(e,t){this.targetId=e,this.Ce=t}}class zb{constructor(e,t,s=hn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class k0{constructor(){this.ve=0,this.Fe=V0(),this.Me=hn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=qe(),t=qe(),s=qe();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Se(38017,{changeType:l})}})),new Mc(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=V0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,et(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class EP{constructor(e){this.Ge=e,this.ze=new Map,this.je=Fs(),this.Je=wf(),this.He=wf(),this.Ye=new jt(Fe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,s=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Yg(l))if(s===0){const c=new ye(l.path);this.et(t,c,pn.newNoDocument(c,we.min()))}else et(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=qr(s).toUint8Array()}catch(p){if(p instanceof cb)return nl("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new W_(c,a,l)}catch(p){return nl(p instanceof Uu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let a=0;return s.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Yg(d.target)){const p=new ye(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,pn.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let s=qe();this.He.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new jd(e,t,this.Ye,this.je,s);return this.je=Fs(),this.Je=wf(),this.He=wf(),this.Ye=new jt(Fe),a}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new k0,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Yt(Fe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Yt(Fe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new k0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function wf(){return new jt(ye.comparator)}function V0(){return new jt(ye.comparator)}const TP={asc:"ASCENDING",desc:"DESCENDING"},SP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wP={and:"AND",or:"OR"};class CP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Qg(n,e){return n.useProto3Json||xd(e)?e:{value:e}}function sd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jb(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function bP(n,e){return sd(n,e.toTimestamp())}function Zi(n){return et(!!n,49232),we.fromTimestamp((function(t){const s=Hr(t);return new pt(s.seconds,s.nanos)})(n))}function X_(n,e){return Wg(n,e).canonicalString()}function Wg(n,e){const t=(function(a){return new yt(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Bb(n){const e=yt.fromString(n);return et(Yb(e),10190,{key:e.toString()}),e}function Xg(n,e){return X_(n.databaseId,e.path)}function yg(n,e){const t=Bb(e);if(t.get(1)!==n.databaseId.projectId)throw new me(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new me(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye(Hb(t))}function Fb(n,e){return X_(n.databaseId,e)}function AP(n){const e=Bb(n);return e.length===4?yt.emptyPath():Hb(e)}function $g(n){return new yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Hb(n){return et(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function L0(n,e,t){return{name:Xg(n,e),fields:t.value.mapValue.fields}}function RP(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Se(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,y){return g.useProto3Json?(et(y===void 0||typeof y=="string",58123),hn.fromBase64String(y||"")):(et(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),hn.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const y=g.code===void 0?se.UNKNOWN:Lb(g.code);return new me(y,g.message||"")})(c);t=new zb(s,a,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=yg(n,s.document.name),l=Zi(s.document.updateTime),c=s.document.createTime?Zi(s.document.createTime):we.min(),d=new si({mapValue:{fields:s.document.fields}}),p=pn.newFoundDocument(a,l,c,d),g=s.targetIds||[],y=s.removedTargetIds||[];t=new Lf(g,y,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=yg(n,s.document),l=s.readTime?Zi(s.readTime):we.min(),c=pn.newNoDocument(a,l),d=s.removedTargetIds||[];t=new Lf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=yg(n,s.document),l=s.removedTargetIds||[];t=new Lf([],l,a,null)}else{if(!("filter"in e))return Se(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,c=new gP(a,l),d=s.targetId;t=new Ub(d,c)}}return t}function IP(n,e){let t;if(e instanceof Dc)t={update:L0(n,e.key,e.value)};else if(e instanceof Vb)t={delete:Xg(n,e.key)};else if(e instanceof Wa)t={update:L0(n,e.key,e.data),updateMask:LP(e.fieldMask)};else{if(!(e instanceof dP))return Se(16599,{Vt:e.type});t={verify:Xg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const d=c.transform;if(d instanceof nd)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof hc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof fc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof id)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Se(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:bP(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Se(27497)})(n,e.precondition)),t}function NP(n,e){return n&&n.length>0?(et(e!==void 0,14353),n.map((t=>(function(a,l){let c=a.updateTime?Zi(a.updateTime):Zi(l);return c.isEqual(we.min())&&(c=Zi(l)),new cP(c,a.transformResults||[])})(t,e)))):[]}function OP(n,e){return{documents:[Fb(n,e.path)]}}function DP(n,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Fb(n,a);const l=(function(g){if(g.length!==0)return Gb(rs.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((y=>(function(S){return{field:qo(S.field),direction:PP(S.dir)}})(y)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Qg(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function MP(n){let e=AP(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){et(s===1,65062);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=(function(E){const S=qb(E);return S instanceof rs&&Eb(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((S=>(function(k){return new td(Go(k.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,xd(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(E){const S=!!E.before,R=E.values||[];return new ed(R,S)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const S=!E.before,R=E.values||[];return new ed(R,S)})(t.endAt)),X2(e,a,c,l,d,"F",p,g)}function xP(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function qb(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Go(t.unaryFilter.field);return qt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Go(t.unaryFilter.field);return qt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Go(t.unaryFilter.field);return qt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Go(t.unaryFilter.field);return qt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(n):n.fieldFilter!==void 0?(function(t){return qt.create(Go(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return rs.create(t.compositeFilter.filters.map((s=>qb(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(t.compositeFilter.op))})(n):Se(30097,{filter:n})}function PP(n){return TP[n]}function kP(n){return SP[n]}function VP(n){return wP[n]}function qo(n){return{fieldPath:n.canonicalString()}}function Go(n){return un.fromServerFormat(n.fieldPath)}function Gb(n){return n instanceof qt?(function(t){if(t.op==="=="){if(C0(t.value))return{unaryFilter:{field:qo(t.field),op:"IS_NAN"}};if(w0(t.value))return{unaryFilter:{field:qo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(C0(t.value))return{unaryFilter:{field:qo(t.field),op:"IS_NOT_NAN"}};if(w0(t.value))return{unaryFilter:{field:qo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qo(t.field),op:kP(t.op),value:t.value}}})(n):n instanceof rs?(function(t){const s=t.getFilters().map((a=>Gb(a)));return s.length===1?s[0]:{compositeFilter:{op:VP(t.op),filters:s}}})(n):Se(54877,{filter:n})}function LP(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Yb(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Dr{constructor(e,t,s,a,l=we.min(),c=we.min(),d=hn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Dr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class UP{constructor(e){this.yt=e}}function zP(n){const e=MP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Kg(e,e.limit,"L"):e}class jP{constructor(){this.Cn=new BP}addToCollectionParentIndex(e,t){return this.Cn.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(Fr.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(Fr.min())}updateCollectionGroup(e,t,s){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class BP{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new Yt(yt.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Yt(yt.comparator)).toArray()}}const U0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Kb=41943040;class Nn{static withCacheSize(e){return new Nn(e,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(Kb,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);class al{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new al(0)}static cr(){return new al(-1)}}const z0="LruGarbageCollector",FP=1048576;function j0([n,e],[t,s]){const a=Fe(n,t);return a===0?Fe(e,s):a}class HP{constructor(e){this.Ir=e,this.buffer=new Yt(j0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();j0(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qP{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(z0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){vl(t)?ue(z0,"Ignoring IndexedDB error during garbage collection: ",t):await yl(t)}await this.Vr(3e5)}))}}class GP{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return te.resolve(Md.ce);const s=new HP(t);return this.mr.forEachTarget(e,(a=>s.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>s.Ar(a))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(U0)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),U0):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,a,l,c,d,p,g;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,c=Date.now(),this.nthSequenceNumber(e,a)))).next((E=>(s=E,d=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(g=Date.now(),Fo()<=Ue.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(g-p)+`ms
Total Duration: ${g-y}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E}))))}}function YP(n,e){return new GP(n,e)}class KP{constructor(){this.changes=new Qa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?te.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class QP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class WP{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(s!==null&&Qu(s.mutation,a,Ti.empty(),pt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,qe()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=qe()){const a=Ma();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,s).next((l=>{let c=Lu();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=Ma();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,qe())))}populateOverlays(e,t,s){const a=[];return s.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,s,a){let l=Fs();const c=Ku(),d=(function(){return Ku()})();return t.forEach(((p,g)=>{const y=s.get(g.key);a.has(g.key)&&(y===void 0||y.mutation instanceof Wa)?l=l.insert(g.key,g):y!==void 0?(c.set(g.key,y.mutation.getFieldMask()),Qu(y.mutation,g,y.mutation.getFieldMask(),pt.now())):c.set(g.key,Ti.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,y)=>c.set(g,y))),t.forEach(((g,y)=>d.set(g,new QP(y,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const s=Ku();let a=new jt(((c,d)=>c-d)),l=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let y=s.get(p)||Ti.empty();y=d.applyToLocalView(g,y),s.set(p,y);const E=(a.get(d.batchId)||qe()).add(p);a=a.insert(d.batchId,E)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,y=p.value,E=Ib();y.forEach((S=>{if(!l.has(S)){const R=Pb(t.get(S),s.get(S));R!==null&&E.set(S,R),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return te.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,a){return(function(c){return ye.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):$2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):te.resolve(Ma());let d=oc,p=l;return c.next((g=>te.forEach(g,((y,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(y)?te.resolve():this.remoteDocumentCache.getEntry(e,y).next((S=>{p=p.insert(y,S)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,qe()))).next((y=>({batchId:d,changes:Rb(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((s=>{let a=Lu();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const l=t.collectionGroup;let c=Lu();return this.indexManager.getCollectionParents(e,l).next((d=>te.forEach(d,(p=>{const g=(function(E,S){return new kd(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,s,a).next((y=>{y.forEach(((E,S)=>{c=c.insert(E,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,a)))).next((c=>{l.forEach(((p,g)=>{const y=g.getKey();c.get(y)===null&&(c=c.insert(y,pn.newInvalidDocument(y)))}));let d=Lu();return c.forEach(((p,g)=>{const y=l.get(p);y!==void 0&&Qu(y.mutation,g,Ti.empty(),pt.now()),Ld(t,g)&&(d=d.insert(p,g))})),d}))}}class XP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return te.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Zi(a.createTime)}})(t)),te.resolve()}getNamedQuery(e,t){return te.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:zP(a.bundledQuery),readTime:Zi(a.readTime)}})(t)),te.resolve()}}class $P{constructor(){this.overlays=new jt(ye.comparator),this.qr=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ma();return te.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&s.set(a,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((a,l)=>{this.St(e,t,l)})),te.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),te.resolve()}getOverlaysForCollection(e,t,s){const a=Ma(),l=t.length+1,c=new ye(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>s&&a.set(p.getKey(),p)}return te.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new jt(((g,y)=>g-y));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>s){let y=l.get(g.largestBatchId);y===null&&(y=Ma(),l=l.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const d=Ma(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,y)=>d.set(g,y))),!(d.size()>=a)););return te.resolve(d)}St(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new pP(t,s));let l=this.qr.get(t);l===void 0&&(l=qe(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}class JP{constructor(){this.sessionToken=hn.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,te.resolve()}}class $_{constructor(){this.Qr=new Yt($t.$r),this.Ur=new Yt($t.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new $t(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new $t(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new ye(new yt([])),s=new $t(t,e),a=new $t(t,e+1),l=[];return this.Ur.forEachInRange([s,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ye(new yt([])),s=new $t(t,e),a=new $t(t,e+1);let l=qe();return this.Ur.forEachInRange([s,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new $t(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class $t{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ye.comparator(e.key,t.key)||Fe(e.Yr,t.Yr)}static Kr(e,t){return Fe(e.Yr,t.Yr)||ye.comparator(e.key,t.key)}}class ZP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Yt($t.$r)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new mP(l,t,s,a);this.mutationQueue.push(c);for(const d of a)this.Zr=this.Zr.add(new $t(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return te.resolve(c)}lookupMutationBatch(e,t){return te.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.ei(s),l=a<0?0:a;return te.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?B_:this.tr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new $t(t,0),a=new $t(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,a],(c=>{const d=this.Xr(c.Yr);l.push(d)})),te.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Yt(Fe);return t.forEach((a=>{const l=new $t(a,0),c=new $t(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(d=>{s=s.add(d.Yr)}))})),te.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;ye.isDocumentKey(l)||(l=l.child(""));const c=new $t(new ye(l),0);let d=new Yt(Fe);return this.Zr.forEachWhile((p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===a&&(d=d.add(p.Yr)),!0)}),c),te.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((s=>{const a=this.Xr(s);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){et(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return te.forEach(t.mutations,(a=>{const l=new $t(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new $t(t,0),a=this.Zr.firstAfterOrEqual(s);return te.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ek{constructor(e){this.ri=e,this.docs=(function(){return new jt(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return te.resolve(s?s.document.mutableCopy():pn.newInvalidDocument(t))}getEntries(e,t){let s=Fs();return t.forEach((a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():pn.newInvalidDocument(a))})),te.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=Fs();const c=t.path,d=new ye(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:y}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||I2(R2(y),s)<=0||(a.has(y.key)||Ld(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return te.resolve(l)}getAllFromCollectionGroup(e,t,s,a){Se(9500)}ii(e,t){return te.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new tk(this)}getSize(e){return te.resolve(this.size)}}class tk extends KP{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)})),te.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class nk{constructor(e){this.persistence=e,this.si=new Qa((t=>q_(t)),G_),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.oi=0,this._i=new $_,this.targetCount=0,this.ai=al.ur()}forEachTarget(e,t){return this.si.forEach(((s,a)=>t(a))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),te.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new al(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.Pr(t),te.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),te.waitFor(l).next((()=>a))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return te.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),te.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),te.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),te.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return te.resolve(s)}containsKey(e,t){return te.resolve(this._i.containsKey(t))}}class Qb{constructor(e,t){this.ui={},this.overlays={},this.ci=new Md(0),this.li=!1,this.li=!0,this.hi=new JP,this.referenceDelegate=e(this),this.Pi=new nk(this),this.indexManager=new jP,this.remoteDocumentCache=(function(a){return new ek(a)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new UP(t),this.Ii=new XP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $P,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new ZP(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ue("MemoryPersistence","Starting transaction:",e);const a=new ik(this.ci.next());return this.referenceDelegate.Ei(),s(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return te.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class ik extends O2{constructor(e){super(),this.currentSequenceNumber=e}}class J_{constructor(e){this.persistence=e,this.Ri=new $_,this.Vi=null}static mi(e){return new J_(e)}get fi(){if(this.Vi)return this.Vi;throw Se(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),te.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),te.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.fi,(s=>{const a=ye.fromPath(s);return this.gi(e,a).next((l=>{l||t.removeEntry(a,we.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return te.or([()=>te.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class rd{constructor(e,t){this.persistence=e,this.pi=new Qa((s=>x2(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=YP(this,t)}static mi(e,t){return new rd(e,t)}Ei(){}di(e){return te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((a=>s+a))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return te.forEach(this.pi,((s,a)=>this.br(e,s,a).next((l=>l?te.resolve():t(a)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((d=>{d||(s++,l.removeEntry(c,we.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),te.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),te.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),te.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Pf(e.data.value)),t}br(e,t,s){return te.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return te.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Z_{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=a}static As(e,t){let s=qe(),a=qe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Z_(e,t.fromCache,s,a)}}class sk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class rk{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return AO()?8:D2(_n())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new sk;return this.Ss(e,t,c).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>l.result))}bs(e,t,s,a){return s.documentReadCount<this.fs?(Fo()<=Ue.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Ho(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),te.resolve()):(Fo()<=Ue.DEBUG&&ue("QueryEngine","Query:",Ho(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(Fo()<=Ue.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Ho(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ji(t))):te.resolve())}ys(e,t){if(I0(t))return te.resolve(null);let s=Ji(t);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Kg(t,null,"F"),s=Ji(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=qe(...l);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,s).next((p=>{const g=this.Ds(t,d);return this.Cs(t,g,c,p.readTime)?this.ys(e,Kg(t,null,"F")):this.vs(e,g,t,p)}))))})))))}ws(e,t,s,a){return I0(t)||a.isEqual(we.min())?te.resolve(null):this.ps.getDocuments(e,s).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,s,a)?te.resolve(null):(Fo()<=Ue.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ho(t)),this.vs(e,c,t,A2(a,oc)).next((d=>d)))}))}Ds(e,t){let s=new Yt(bb(e));return t.forEach(((a,l)=>{Ld(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,s){return Fo()<=Ue.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Ho(t)),this.ps.getDocumentsMatchingQuery(e,t,Fr.min(),s)}vs(e,t,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const ey="LocalStore",ak=3e8;class ok{constructor(e,t,s,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new jt(Fe),this.xs=new Qa((l=>q_(l)),G_),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function lk(n,e,t,s){return new ok(n,e,t,s)}async function Wb(n,e){const t=be(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],d=[];let p=qe();for(const g of a){c.push(g.batchId);for(const y of g.mutations)p=p.add(y.key)}for(const g of l){d.push(g.batchId);for(const y of g.mutations)p=p.add(y.key)}return t.localDocuments.getDocuments(s,p).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function uk(n,e){const t=be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,p,g,y){const E=g.batch,S=E.keys();let R=te.resolve();return S.forEach((k=>{R=R.next((()=>y.getEntry(p,k))).next((K=>{const q=g.docVersions.get(k);et(q!==null,48541),K.version.compareTo(q)<0&&(E.applyToRemoteDocument(K,g),K.isValidDocument()&&(K.setReadTime(g.commitVersion),y.addEntry(K)))}))})),R.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(d){let p=qe();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(s,a)))}))}function Xb(n){const e=be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function ck(n,e){const t=be(n),s=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const d=[];e.targetChanges.forEach(((y,E)=>{const S=a.get(E);if(!S)return;d.push(t.Pi.removeMatchingKeys(l,y.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,y.addedDocuments,E))));let R=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?R=R.withResumeToken(hn.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):y.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(y.resumeToken,s)),a=a.insert(E,R),(function(K,q,ne){return K.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=ak?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0})(S,R,y)&&d.push(t.Pi.updateTargetData(l,R))}));let p=Fs(),g=qe();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))})),d.push(hk(l,c,e.documentUpdates).next((y=>{p=y.ks,g=y.qs}))),!s.isEqual(we.min())){const y=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));d.push(y)}return te.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.Ms=a,l)))}function hk(n,e,t){let s=qe(),a=qe();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=Fs();return t.forEach(((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),p.isNoDocument()&&p.version.isEqual(we.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):ue(ey,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)})),{ks:c,qs:a}}))}function fk(n,e){const t=be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=B_),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function dk(n,e){const t=be(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return t.Pi.getTargetData(s,e).next((l=>l?(a=l,te.resolve(a)):t.Pi.allocateTargetId(s).next((c=>(a=new Dr(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=t.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Jg(n,e,t){const s=be(n),a=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!vl(c))throw c;ue(ey,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function B0(n,e,t){const s=be(n);let a=we.min(),l=qe();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,y){const E=be(p),S=E.xs.get(y);return S!==void 0?te.resolve(E.Ms.get(S)):E.Pi.getTargetData(g,y)})(s,c,Ji(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?a:we.min(),t?l:qe()))).next((d=>(mk(s,Z2(e),d),{documents:d,Qs:l})))))}function mk(n,e,t){let s=n.Os.get(e)||we.min();t.forEach(((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class F0{constructor(){this.activeTargetIds=rP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pk{constructor(){this.Mo=new F0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new F0,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class gk{Oo(e){}shutdown(){}}const H0="ConnectivityMonitor";class q0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(H0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(H0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Cf=null;function Zg(){return Cf===null?Cf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Cf++,"0x"+Cf.toString(16)}const vg="RestConnection",_k={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yk{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===Jf?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,t,s,a,l){const c=Zg(),d=this.zo(e,t.toUriEncodedString());ue(vg,`Sending RPC '${e}' ${c}:`,d,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,a,l);const{host:g}=new URL(d),y=$r(g);return this.Jo(e,d,p,s,y).then((E=>(ue(vg,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw nl(vg,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",s),E}))}Ho(e,t,s,a,l,c){return this.Go(e,t,s,a,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+_l})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),s&&s.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const s=_k[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}class vk{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const dn="WebChannelConnection";class Ek extends yk{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,a,l){const c=Zg();return new Promise(((d,p)=>{const g=new eb;g.setWithCredentials(!0),g.listenOnce(tb.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case xf.NO_ERROR:const E=g.getResponseJson();ue(dn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case xf.TIMEOUT:ue(dn,`RPC '${e}' ${c} timed out`),p(new me(se.DEADLINE_EXCEEDED,"Request time out"));break;case xf.HTTP_ERROR:const S=g.getStatus();if(ue(dn,`RPC '${e}' ${c} failed with status:`,S,"response text:",g.getResponseText()),S>0){let R=g.getResponseJson();Array.isArray(R)&&(R=R[0]);const k=R?.error;if(k&&k.status&&k.message){const K=(function(ne){const ee=ne.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(ee)>=0?ee:se.UNKNOWN})(k.status);p(new me(K,k.message))}else p(new me(se.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new me(se.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{ue(dn,`RPC '${e}' ${c} completed.`)}}));const y=JSON.stringify(a);ue(dn,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",y,s,15)}))}T_(e,t,s){const a=Zg(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=sb(),d=ib(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const y=l.join("");ue(dn,`Creating RPC '${e}' stream ${a}: ${y}`,p);const E=c.createWebChannel(y,p);this.I_(E);let S=!1,R=!1;const k=new vk({Yo:q=>{R?ue(dn,`Not sending because RPC '${e}' stream ${a} is closed:`,q):(S||(ue(dn,`Opening RPC '${e}' stream ${a} transport.`),E.open(),S=!0),ue(dn,`RPC '${e}' stream ${a} sending:`,q),E.send(q))},Zo:()=>E.close()}),K=(q,ne,ee)=>{q.listen(ne,(re=>{try{ee(re)}catch(Ee){setTimeout((()=>{throw Ee}),0)}}))};return K(E,Vu.EventType.OPEN,(()=>{R||(ue(dn,`RPC '${e}' stream ${a} transport opened.`),k.o_())})),K(E,Vu.EventType.CLOSE,(()=>{R||(R=!0,ue(dn,`RPC '${e}' stream ${a} transport closed`),k.a_(),this.E_(E))})),K(E,Vu.EventType.ERROR,(q=>{R||(R=!0,nl(dn,`RPC '${e}' stream ${a} transport errored. Name:`,q.name,"Message:",q.message),k.a_(new me(se.UNAVAILABLE,"The operation could not be completed")))})),K(E,Vu.EventType.MESSAGE,(q=>{if(!R){const ne=q.data[0];et(!!ne,16349);const ee=ne,re=ee?.error||ee[0]?.error;if(re){ue(dn,`RPC '${e}' stream ${a} received error:`,re);const Ee=re.status;let Ae=(function(b){const A=Lt[b];if(A!==void 0)return Lb(A)})(Ee),Re=re.message;Ae===void 0&&(Ae=se.INTERNAL,Re="Unknown error status: "+Ee+" with message "+re.message),R=!0,k.a_(new me(Ae,Re)),E.close()}else ue(dn,`RPC '${e}' stream ${a} received:`,ne),k.u_(ne)}})),K(d,nb.STAT_EVENT,(q=>{q.stat===jg.PROXY?ue(dn,`RPC '${e}' stream ${a} detected buffering proxy`):q.stat===jg.NOPROXY&&ue(dn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Eg(){return typeof document<"u"?document:null}function Bd(n){return new CP(n,!0)}class $b{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-s);a>0&&ue("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const G0="PersistentStream";class Jb{constructor(e,t,s,a,l,c,d,p){this.Mi=e,this.S_=s,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $b(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(Bs(t.toString()),Bs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===t&&this.G_(s,a)}),(s=>{e((()=>{const a=new me(se.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(G0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ue(G0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Tk extends Jb{constructor(e,t,s,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=RP(this.serializer,e),s=(function(l){if(!("targetChange"in l))return we.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?we.min():c.readTime?Zi(c.readTime):we.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=$g(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=Yg(p)?{documents:OP(l,p)}:{query:DP(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=jb(l,c.resumeToken);const g=Qg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(we.min())>0){d.readTime=sd(l,c.snapshotVersion.toTimestamp());const g=Qg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const s=xP(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=$g(this.serializer),t.removeTarget=e,this.q_(t)}}class Sk extends Jb{constructor(e,t,s,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=NP(e.writeResults,e.commitTime),s=Zi(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=$g(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>IP(this.serializer,s)))};this.q_(t)}}class wk{}class Ck extends wk{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new me(se.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Wg(t,s),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new me(se.UNKNOWN,l.toString())}))}Ho(e,t,s,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,Wg(t,s),a,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new me(se.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class bk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Bs(t),this.aa=!1):ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ja="RemoteStore";class Ak{constructor(e,t,s,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{Xa(this)&&(ue(ja,"Restarting streams for network reachability change."),await(async function(p){const g=be(p);g.Ea.add(4),await xc(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Fd(g)})(this))}))})),this.Ra=new bk(s,a)}}async function Fd(n){if(Xa(n))for(const e of n.da)await e(!0)}async function xc(n){for(const e of n.da)await e(!1)}function Zb(n,e){const t=be(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),sy(t)?iy(t):El(t).O_()&&ny(t,e))}function ty(n,e){const t=be(n),s=El(t);t.Ia.delete(e),s.O_()&&eA(t,e),t.Ia.size===0&&(s.O_()?s.L_():Xa(t)&&t.Ra.set("Unknown"))}function ny(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}El(n).Y_(e)}function eA(n,e){n.Va.Ue(e),El(n).Z_(e)}function iy(n){n.Va=new EP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),El(n).start(),n.Ra.ua()}function sy(n){return Xa(n)&&!El(n).x_()&&n.Ia.size>0}function Xa(n){return be(n).Ea.size===0}function tA(n){n.Va=void 0}async function Rk(n){n.Ra.set("Online")}async function Ik(n){n.Ia.forEach(((e,t)=>{ny(n,e)}))}async function Nk(n,e){tA(n),sy(n)?(n.Ra.ha(e),iy(n)):n.Ra.set("Unknown")}async function Ok(n,e,t){if(n.Ra.set("Online"),e instanceof zb&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.Va.removeTarget(d))})(n,e)}catch(s){ue(ja,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await ad(n,s)}else if(e instanceof Lf?n.Va.Ze(e):e instanceof Ub?n.Va.st(e):n.Va.tt(e),!t.isEqual(we.min()))try{const s=await Xb(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const y=l.Ia.get(g);y&&l.Ia.set(g,y.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,g)=>{const y=l.Ia.get(p);if(!y)return;l.Ia.set(p,y.withResumeToken(hn.EMPTY_BYTE_STRING,y.snapshotVersion)),eA(l,p);const E=new Dr(y.target,p,g,y.sequenceNumber);ny(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(s){ue(ja,"Failed to raise snapshot:",s),await ad(n,s)}}async function ad(n,e,t){if(!vl(e))throw e;n.Ea.add(1),await xc(n),n.Ra.set("Offline"),t||(t=()=>Xb(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ue(ja,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Fd(n)}))}function nA(n,e){return e().catch((t=>ad(n,t,e)))}async function Hd(n){const e=be(n),t=Yr(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:B_;for(;Dk(e);)try{const a=await fk(e.localStore,s);if(a===null){e.Ta.length===0&&t.L_();break}s=a.batchId,Mk(e,a)}catch(a){await ad(e,a)}iA(e)&&sA(e)}function Dk(n){return Xa(n)&&n.Ta.length<10}function Mk(n,e){n.Ta.push(e);const t=Yr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function iA(n){return Xa(n)&&!Yr(n).x_()&&n.Ta.length>0}function sA(n){Yr(n).start()}async function xk(n){Yr(n).ra()}async function Pk(n){const e=Yr(n);for(const t of n.Ta)e.ea(t.mutations)}async function kk(n,e,t){const s=n.Ta.shift(),a=Q_.from(s,e,t);await nA(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await Hd(n)}async function Vk(n,e){e&&Yr(n).X_&&await(async function(s,a){if((function(c){return _P(c)&&c!==se.ABORTED})(a.code)){const l=s.Ta.shift();Yr(s).B_(),await nA(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Hd(s)}})(n,e),iA(n)&&sA(n)}async function Y0(n,e){const t=be(n);t.asyncQueue.verifyOperationInProgress(),ue(ja,"RemoteStore received new credentials");const s=Xa(t);t.Ea.add(3),await xc(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Fd(t)}async function Lk(n,e){const t=be(n);e?(t.Ea.delete(2),await Fd(t)):e||(t.Ea.add(2),await xc(t),t.Ra.set("Unknown"))}function El(n){return n.ma||(n.ma=(function(t,s,a){const l=be(t);return l.sa(),new Tk(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:Rk.bind(null,n),t_:Ik.bind(null,n),r_:Nk.bind(null,n),H_:Ok.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),sy(n)?iy(n):n.Ra.set("Unknown")):(await n.ma.stop(),tA(n))}))),n.ma}function Yr(n){return n.fa||(n.fa=(function(t,s,a){const l=be(t);return l.sa(),new Sk(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:xk.bind(null,n),r_:Vk.bind(null,n),ta:Pk.bind(null,n),na:kk.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Hd(n)):(await n.fa.stop(),n.Ta.length>0&&(ue(ja,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class ry{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new Vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,l){const c=Date.now()+s,d=new ry(e,t,c,a,l);return d.start(s),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ay(n,e){if(Bs("AsyncQueue",`${e}: ${n}`),vl(n))return new me(se.UNAVAILABLE,`${e}: ${n}`);throw n}class $o{static emptySet(e){return new $o(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ye.comparator(t.key,s.key):(t,s)=>ye.comparator(t.key,s.key),this.keyedMap=Lu(),this.sortedSet=new jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $o)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new $o;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class K0{constructor(){this.ga=new jt(ye.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Se(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class ol{constructor(e,t,s,a,l,c,d,p,g){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,s,a,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new ol(e,t,$o.emptySet(t),c,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class Uk{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class zk{constructor(){this.queries=Q0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const a=be(t),l=a.queries;a.queries=Q0(),l.forEach(((c,d)=>{for(const p of d.Sa)p.onError(s)}))})(this,new me(se.ABORTED,"Firestore shutting down"))}}function Q0(){return new Qa((n=>Cb(n)),Vd)}async function jk(n,e){const t=be(n);let s=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(s=2):(l=new Uk,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=ay(c,`Initialization of query '${Ho(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&oy(t)}async function Bk(n,e){const t=be(n),s=e.query;let a=3;const l=t.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function Fk(n,e){const t=be(n);let s=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(a)&&(s=!0);c.wa=a}}s&&oy(t)}function Hk(n,e,t){const s=be(n),a=s.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);s.queries.delete(e)}function oy(n){n.Ca.forEach((e=>{e.next()}))}var e_,W0;(W0=e_||(e_={})).Ma="default",W0.Cache="cache";class qk{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new ol(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ol.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==e_.Cache}}class rA{constructor(e){this.key=e}}class aA{constructor(e){this.key=e}}class Gk{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=qe(),this.mutatedKeys=qe(),this.eu=bb(e),this.tu=new $o(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new K0,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((y,E)=>{const S=a.get(y),R=Ld(this.query,E)?E:null,k=!!S&&this.mutatedKeys.has(S.key),K=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let q=!1;S&&R?S.data.isEqual(R.data)?k!==K&&(s.track({type:3,doc:R}),q=!0):this.su(S,R)||(s.track({type:2,doc:R}),q=!0,(p&&this.eu(R,p)>0||g&&this.eu(R,g)<0)&&(d=!0)):!S&&R?(s.track({type:0,doc:R}),q=!0):S&&!R&&(s.track({type:1,doc:S}),q=!0,(p||g)&&(d=!0)),q&&(R?(c=c.add(R),l=K?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),s.track({type:1,doc:y})}return{tu:c,iu:s,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((y,E)=>(function(R,k){const K=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Rt:q})}};return K(R)-K(k)})(y.type,E.type)||this.eu(y.doc,E.doc))),this.ou(s),a=a??!1;const d=t&&!a?this._u():[],p=this.Xa.size===0&&this.current&&!a?1:0,g=p!==this.Za;return this.Za=p,c.length!==0||g?{snapshot:new ol(this.query,e.tu,l,c,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new K0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=qe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new aA(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new rA(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=qe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ol.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ly="SyncEngine";class Yk{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Kk{constructor(e){this.key=e,this.hu=!1}}class Qk{constructor(e,t,s,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Qa((d=>Cb(d)),Vd),this.Iu=new Map,this.Eu=new Set,this.du=new jt(ye.comparator),this.Au=new Map,this.Ru=new $_,this.Vu={},this.mu=new Map,this.fu=al.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Wk(n,e,t=!0){const s=fA(n);let a;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await oA(s,e,t,!0),a}async function Xk(n,e){const t=fA(n);await oA(t,e,!0,!1)}async function oA(n,e,t,s){const a=await dk(n.localStore,Ji(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return s&&(d=await $k(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&Zb(n.remoteStore,a),d}async function $k(n,e,t,s,a){n.pu=(E,S,R)=>(async function(K,q,ne,ee){let re=q.view.ru(ne);re.Cs&&(re=await B0(K.localStore,q.query,!1).then((({documents:N})=>q.view.ru(N,re))));const Ee=ee&&ee.targetChanges.get(q.targetId),Ae=ee&&ee.targetMismatches.get(q.targetId)!=null,Re=q.view.applyChanges(re,K.isPrimaryClient,Ee,Ae);return $0(K,q.targetId,Re.au),Re.snapshot})(n,E,S,R);const l=await B0(n.localStore,e,!0),c=new Gk(e,l.Qs),d=c.ru(l.documents),p=Mc.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",a),g=c.applyChanges(d,n.isPrimaryClient,p);$0(n,t,g.au);const y=new Yk(e,t,c);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function Jk(n,e,t){const s=be(n),a=s.Tu.get(e),l=s.Iu.get(a.targetId);if(l.length>1)return s.Iu.set(a.targetId,l.filter((c=>!Vd(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Jg(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),t&&ty(s.remoteStore,a.targetId),t_(s,a.targetId)})).catch(yl)):(t_(s,a.targetId),await Jg(s.localStore,a.targetId,!0))}async function Zk(n,e){const t=be(n),s=t.Tu.get(e),a=t.Iu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),ty(t.remoteStore,s.targetId))}async function eV(n,e,t){const s=oV(n);try{const a=await(function(c,d){const p=be(c),g=pt.now(),y=d.reduce(((R,k)=>R.add(k.key)),qe());let E,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let k=Fs(),K=qe();return p.Ns.getEntries(R,y).next((q=>{k=q,k.forEach(((ne,ee)=>{ee.isValidDocument()||(K=K.add(ne))}))})).next((()=>p.localDocuments.getOverlayedDocuments(R,k))).next((q=>{E=q;const ne=[];for(const ee of d){const re=fP(ee,E.get(ee.key).overlayedDocument);re!=null&&ne.push(new Wa(ee.key,re,_b(re.value.mapValue),Ps.exists(!0)))}return p.mutationQueue.addMutationBatch(R,g,ne,d)})).next((q=>{S=q;const ne=q.applyToLocalDocumentSet(E,K);return p.documentOverlayCache.saveOverlays(R,q.batchId,ne)}))})).then((()=>({batchId:S.batchId,changes:Rb(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(c,d,p){let g=c.Vu[c.currentUser.toKey()];g||(g=new jt(Fe)),g=g.insert(d,p),c.Vu[c.currentUser.toKey()]=g})(s,a.batchId,t),await Pc(s,a.changes),await Hd(s.remoteStore)}catch(a){const l=ay(a,"Failed to persist write");t.reject(l)}}async function lA(n,e){const t=be(n);try{const s=await ck(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(et(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?et(c.hu,14607):a.removedDocuments.size>0&&(et(c.hu,42227),c.hu=!1))})),await Pc(t,s,e)}catch(s){await yl(s)}}function X0(n,e,t){const s=be(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const p=be(c);p.onlineState=d;let g=!1;p.queries.forEach(((y,E)=>{for(const S of E.Sa)S.va(d)&&(g=!0)})),g&&oy(p)})(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function tV(n,e,t){const s=be(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Au.get(e),l=a&&a.key;if(l){let c=new jt(ye.comparator);c=c.insert(l,pn.newNoDocument(l,we.min()));const d=qe().add(l),p=new jd(we.min(),new Map,new jt(Fe),c,d);await lA(s,p),s.du=s.du.remove(l),s.Au.delete(e),uy(s)}else await Jg(s.localStore,e,!1).then((()=>t_(s,e,t))).catch(yl)}async function nV(n,e){const t=be(n),s=e.batch.batchId;try{const a=await uk(t.localStore,e);cA(t,s,null),uA(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Pc(t,a)}catch(a){await yl(a)}}async function iV(n,e,t){const s=be(n);try{const a=await(function(c,d){const p=be(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let y;return p.mutationQueue.lookupMutationBatch(g,d).next((E=>(et(E!==null,37113),y=E.keys(),p.mutationQueue.removeMutationBatch(g,E)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,y,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y))).next((()=>p.localDocuments.getDocuments(g,y)))}))})(s.localStore,e);cA(s,e,t),uA(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Pc(s,a)}catch(a){await yl(a)}}function uA(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function cA(n,e,t){const s=be(n);let a=s.Vu[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function t_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||hA(n,s)}))}function hA(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(ty(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),uy(n))}function $0(n,e,t){for(const s of t)s instanceof rA?(n.Ru.addReference(s.key,e),sV(n,s)):s instanceof aA?(ue(ly,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||hA(n,s.key)):Se(19791,{wu:s})}function sV(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(ue(ly,"New document in limbo: "+t),n.Eu.add(s),uy(n))}function uy(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ye(yt.fromString(e)),s=n.fu.next();n.Au.set(s,new Kk(t)),n.du=n.du.insert(t,s),Zb(n.remoteStore,new Dr(Ji(Y_(t.path)),s,"TargetPurposeLimboResolution",Md.ce))}}async function Pc(n,e,t){const s=be(n),a=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((d,p)=>{c.push(s.pu(p,e,t).then((g=>{if((g||t)&&s.isPrimaryClient){const y=g?!g.fromCache:t?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,y?"current":"not-current")}if(g){a.push(g);const y=Z_.As(p.targetId,g);l.push(y)}})))})),await Promise.all(c),s.Pu.H_(a),await(async function(p,g){const y=be(p);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>te.forEach(g,(S=>te.forEach(S.Es,(R=>y.persistence.referenceDelegate.addReference(E,S.targetId,R))).next((()=>te.forEach(S.ds,(R=>y.persistence.referenceDelegate.removeReference(E,S.targetId,R)))))))))}catch(E){if(!vl(E))throw E;ue(ey,"Failed to update sequence numbers: "+E)}for(const E of g){const S=E.targetId;if(!E.fromCache){const R=y.Ms.get(S),k=R.snapshotVersion,K=R.withLastLimboFreeSnapshotVersion(k);y.Ms=y.Ms.insert(S,K)}}})(s.localStore,l))}async function rV(n,e){const t=be(n);if(!t.currentUser.isEqual(e)){ue(ly,"User change. New user:",e.toKey());const s=await Wb(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((p=>{p.reject(new me(se.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Pc(t,s.Ls)}}function aV(n,e){const t=be(n),s=t.Au.get(e);if(s&&s.hu)return qe().add(s.key);{let a=qe();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const d=t.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}function fA(n){const e=be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=lA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tV.bind(null,e),e.Pu.H_=Fk.bind(null,e.eventManager),e.Pu.yu=Hk.bind(null,e.eventManager),e}function oV(n){const e=be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iV.bind(null,e),e}class od{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return lk(this.persistence,new rk,e.initialUser,this.serializer)}Cu(e){return new Qb(J_.mi,this.serializer)}Du(e){return new pk}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}od.provider={build:()=>new od};class lV extends od{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){et(this.persistence.referenceDelegate instanceof rd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new qP(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new Qb((s=>rd.mi(s,t)),this.serializer)}}class n_{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>X0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=rV.bind(null,this.syncEngine),await Lk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new zk})()}createDatastore(e){const t=Bd(e.databaseInfo.databaseId),s=(function(l){return new Ek(l)})(e.databaseInfo);return(function(l,c,d,p){return new Ck(l,c,d,p)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,a,l,c,d){return new Ak(s,a,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>X0(this.syncEngine,t,0)),(function(){return q0.v()?new q0:new gk})())}createSyncEngine(e,t){return(function(a,l,c,d,p,g,y){const E=new Qk(a,l,c,d,p,g);return y&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=be(t);ue(ja,"RemoteStore shutting down."),s.Ea.add(5),await xc(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}n_.provider={build:()=>new n_};class uV{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Bs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Kr="FirestoreClient";class cV{constructor(e,t,s,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=mn.UNAUTHENTICATED,this.clientId=z_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{ue(Kr,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(ue(Kr,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=ay(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Tg(n,e){n.asyncQueue.verifyOperationInProgress(),ue(Kr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async a=>{s.isEqual(a)||(await Wb(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function J0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await hV(n);ue(Kr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>Y0(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,a)=>Y0(e.remoteStore,a))),n._onlineComponents=e}async function hV(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue(Kr,"Using user provided OfflineComponentProvider");try{await Tg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===se.FAILED_PRECONDITION||a.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;nl("Error using user provided cache. Falling back to memory cache: "+t),await Tg(n,new od)}}else ue(Kr,"Using default OfflineComponentProvider"),await Tg(n,new lV(void 0));return n._offlineComponents}async function dA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue(Kr,"Using user provided OnlineComponentProvider"),await J0(n,n._uninitializedComponentsProvider._online)):(ue(Kr,"Using default OnlineComponentProvider"),await J0(n,new n_))),n._onlineComponents}function fV(n){return dA(n).then((e=>e.syncEngine))}async function dV(n){const e=await dA(n),t=e.eventManager;return t.onListen=Wk.bind(null,e.syncEngine),t.onUnlisten=Jk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Xk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Zk.bind(null,e.syncEngine),t}function mV(n,e,t={}){const s=new Vr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const y=new uV({next:S=>{y.Nu(),c.enqueueAndForget((()=>Bk(l,E)));const R=S.docs.has(d);!R&&S.fromCache?g.reject(new me(se.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&S.fromCache&&p&&p.source==="server"?g.reject(new me(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),E=new qk(Y_(d.path),y,{includeMetadataChanges:!0,qa:!0});return jk(l,E)})(await dV(n),n.asyncQueue,e,t,s))),s.promise}function mA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const Z0=new Map;const pA="firestore.googleapis.com",ew=!0;class tw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new me(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pA,this.ssl=ew}else this.host=e.host,this.ssl=e.ssl??ew;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Kb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FP)throw new me(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}b2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mA(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new me(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new me(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new me(se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cy{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new m2;switch(s.type){case"firstParty":return new y2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new me(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=Z0.get(t);s&&(ue("ComponentProvider","Removing Datastore"),Z0.delete(t),s.terminate())})(this),Promise.resolve()}}function pV(n,e,t,s={}){n=ac(n,cy);const a=$r(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;a&&(T_(`https://${d}`),S_("Firestore",!0)),l.host!==pA&&l.host!==d&&nl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:d,ssl:a,emulatorOptions:s};if(!jr(p,c)&&(n._setSettings(p),s.mockUserToken)){let g,y;if(typeof s.mockUserToken=="string")g=s.mockUserToken,y=mn.MOCK_USER;else{g=cC(s.mockUserToken,n._app?.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new me(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new mn(E)}n._authCredentials=new p2(new ab(g,y))}}class hy{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new hy(this.firestore,e,this._query)}}class en{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new en(this.firestore,e,this._key)}toJSON(){return{type:en._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Oc(t,en._jsonSchema))return new en(e,s||null,new ye(yt.fromString(t.referencePath)))}}en._jsonSchemaVersion="firestore/documentReference/1.0",en._jsonSchema={type:zt("string",en._jsonSchemaVersion),referencePath:zt("string")};class dc extends hy{constructor(e,t,s){super(e,t,Y_(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new en(this.firestore,null,new ye(e))}withConverter(e){return new dc(this.firestore,e,this._path)}}function ll(n,e,...t){if(n=cn(n),arguments.length===1&&(e=z_.newId()),C2("doc","path",e),n instanceof cy){const s=yt.fromString(e,...t);return p0(s),new en(n,null,new ye(s))}{if(!(n instanceof en||n instanceof dc))throw new me(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(yt.fromString(e,...t));return p0(s),new en(n.firestore,n instanceof dc?n.converter:null,new ye(s))}}const nw="AsyncQueue";class iw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $b(this,"async_queue_retry"),this._c=()=>{const s=Eg();s&&ue(nw,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Eg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Eg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Vr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!vl(e))throw e;ue(nw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Bs("INTERNAL UNHANDLED ERROR: ",sw(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=ry.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Se(47125,{Pc:sw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function sw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class fy extends cy{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new iw,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new iw(e),this._firestoreClient=void 0,await e}}}function gV(n,e){const t=typeof n=="object"?n:A_(),s=typeof n=="string"?n:Jf,a=Id(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=oC("firestore");l&&pV(a,...l)}return a}function gA(n){if(n._terminated)throw new me(se.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||_V(n),n._firestoreClient}function _V(n){const e=n._freezeSettings(),t=(function(a,l,c,d){return new V2(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,mA(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new cV(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(n._componentsProvider))}class ri{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ri(hn.fromBase64String(e))}catch(t){throw new me(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ri(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ri._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Oc(e,ri._jsonSchema))return ri.fromBase64String(e.bytes)}}ri._jsonSchemaVersion="firestore/bytes/1.0",ri._jsonSchema={type:zt("string",ri._jsonSchemaVersion),bytes:zt("string")};class dy{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new me(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _A{constructor(e){this._methodName=e}}class es{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new me(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new me(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:es._jsonSchemaVersion}}static fromJSON(e){if(Oc(e,es._jsonSchema))return new es(e.latitude,e.longitude)}}es._jsonSchemaVersion="firestore/geoPoint/1.0",es._jsonSchema={type:zt("string",es._jsonSchemaVersion),latitude:zt("number"),longitude:zt("number")};class ts{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ts._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Oc(e,ts._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ts(e.vectorValues);throw new me(se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ts._jsonSchemaVersion="firestore/vectorValue/1.0",ts._jsonSchema={type:zt("string",ts._jsonSchemaVersion),vectorValues:zt("object")};const yV=/^__.*__$/;class vV{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Wa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Dc(e,this.data,t,this.fieldTransforms)}}function yA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ac:n})}}class my{constructor(e,t,s,a,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new my({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ld(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(yA(this.Ac)&&yV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class EV{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Bd(e)}Cc(e,t,s,a=!1){return new my({Ac:e,methodName:t,Dc:s,path:un.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function TV(n){const e=n._freezeSettings(),t=Bd(n._databaseId);return new EV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function SV(n,e,t,s,a,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);SA("Data must be an object, but it was:",c,s);const d=EA(s,c);let p,g;if(l.merge)p=new Ti(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const E of l.mergeFields){const S=wV(e,E,t);if(!c.contains(S))throw new me(se.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);bV(y,S)||y.push(S)}p=new Ti(y),g=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,g=c.fieldTransforms;return new vV(new si(d),p,g)}function vA(n,e){if(TA(n=cn(n)))return SA("Unsupported field value:",e,n),EA(n,e);if(n instanceof _A)return(function(s,a){if(!yA(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,a){const l=[];let c=0;for(const d of s){let p=vA(d,a.wc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,a){if((s=cn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return aP(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=pt.fromDate(s);return{timestampValue:sd(a.serializer,l)}}if(s instanceof pt){const l=new pt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:sd(a.serializer,l)}}if(s instanceof es)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ri)return{bytesValue:jb(a.serializer,s._byteString)};if(s instanceof en){const l=a.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:X_(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof ts)return(function(c,d){return{mapValue:{fields:{[pb]:{stringValue:gb},[Zf]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw d.Sc("VectorValues must only contain numeric values.");return K_(d.serializer,g)}))}}}}}})(s,a);throw a.Sc(`Unsupported field value: ${j_(s)}`)})(n,e)}function EA(n,e){const t={};return ub(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ka(n,((s,a)=>{const l=vA(a,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function TA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof pt||n instanceof es||n instanceof ri||n instanceof en||n instanceof _A||n instanceof ts)}function SA(n,e,t){if(!TA(t)||!ob(t)){const s=j_(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function wV(n,e,t){if((e=cn(e))instanceof dy)return e._internalPath;if(typeof e=="string")return wA(n,e);throw ld("Field path arguments must be of type string or ",n,!1,void 0,t)}const CV=new RegExp("[~\\*/\\[\\]]");function wA(n,e,t){if(e.search(CV)>=0)throw ld(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new dy(...e.split("."))._internalPath}catch{throw ld(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ld(n,e,t,s,a){const l=s&&!s.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${s}`),c&&(p+=` in document ${a}`),p+=")"),new me(se.INVALID_ARGUMENT,d+n+p)}function bV(n,e){return n.some((t=>t.isEqual(e)))}class CA{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new en(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(bA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class AV extends CA{data(){return super.data()}}function bA(n,e){return typeof e=="string"?wA(n,e):e instanceof dy?e._internalPath:e._delegate._internalPath}class RV{convertValue(e,t="none"){switch(Gr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ka(e,((a,l)=>{s[a]=this.convertValue(l,t)})),s}convertVectorValue(e){const t=e.fields?.[Zf].arrayValue?.values?.map((s=>Rt(s.doubleValue)));return new ts(t)}convertGeoPoint(e){return new es(Rt(e.latitude),Rt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Pd(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(lc(e));default:return null}}convertTimestamp(e){const t=Hr(e);return new pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=yt.fromString(e);et(Yb(s),9688,{name:e});const a=new uc(s.get(1),s.get(3)),l=new ye(s.popFirst(5));return a.isEqual(t)||Bs(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function IV(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class zu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ka extends CA{constructor(e,t,s,a,l,c){super(e,t,s,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Uf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(bA("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new me(se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ka._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ka._jsonSchemaVersion="firestore/documentSnapshot/1.0",ka._jsonSchema={type:zt("string",ka._jsonSchemaVersion),bundleSource:zt("string","DocumentSnapshot"),bundleName:zt("string"),bundle:zt("string")};class Uf extends ka{data(e={}){return super.data(e)}}class Wu{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new zu(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Uf(this._firestore,this._userDataWriter,s.key,s,new zu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new me(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const p=new Uf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new zu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new Uf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new zu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,y=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:NV(d.type),doc:p,oldIndex:g,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new me(se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Wu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=z_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function NV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:n})}}function py(n){n=ac(n,en);const e=ac(n.firestore,fy);return mV(gA(e),n._key).then((t=>MV(e,n,t)))}Wu._jsonSchemaVersion="firestore/querySnapshot/1.0",Wu._jsonSchema={type:zt("string",Wu._jsonSchemaVersion),bundleSource:zt("string","QuerySnapshot"),bundleName:zt("string"),bundle:zt("string")};class OV extends RV{constructor(e){super(),this.firestore=e}convertBytes(e){return new ri(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new en(this.firestore,null,t)}}function gy(n,e,t){n=ac(n,en);const s=ac(n.firestore,fy),a=IV(n.converter,e);return DV(s,[SV(TV(s),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Ps.none())])}function DV(n,e){return(function(s,a){const l=new Vr;return s.asyncQueue.enqueueAndForget((async()=>eV(await fV(s),a,l))),l.promise})(gA(n),e)}function MV(n,e,t){const s=t.docs.get(e._key),a=new OV(n);return new ka(n,a,e._key,s,new zu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){_l=a})(Ya),La(new Br("firestore",((s,{instanceIdentifier:a,options:l})=>{const c=s.getProvider("app").getImmediate(),d=new fy(new g2(s.getProvider("auth-internal")),new v2(c,s.getProvider("app-check-internal")),(function(g,y){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new me(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uc(g.options.projectId,y)})(c,a),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),$i(h0,f0,e),$i(h0,f0,"esm2020")})();var rw={};const aw="@firebase/database",ow="1.1.0";let AA="";function xV(n){AA=n}class PV{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ht(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:ic(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class kV{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Gs(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const RA=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new PV(e)}}catch{}return new kV},xa=RA("localStorage"),VV=RA("sessionStorage");const Jo=new Rd("@firebase/database"),LV=(function(){let n=1;return function(){return n++}})(),IA=function(n){const e=UO(n),t=new PO;t.update(e);const s=t.digest();return E_.encodeByteArray(s)},kc=function(...n){let e="";for(let t=0;t<n.length;t++){const s=n[t];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=kc.apply(null,s):typeof s=="object"?e+=Ht(s):e+=s,e+=" "}return e};let Xu=null,lw=!0;const UV=function(n,e){ae(!0,"Can't turn on custom loggers persistently."),Jo.logLevel=Ue.VERBOSE,Xu=Jo.log.bind(Jo)},gn=function(...n){if(lw===!0&&(lw=!1,Xu===null&&VV.get("logging_enabled")===!0&&UV()),Xu){const e=kc.apply(null,n);Xu(e)}},Vc=function(n){return function(...e){gn(n,...e)}},i_=function(...n){const e="FIREBASE INTERNAL ERROR: "+kc(...n);Jo.error(e)},Hs=function(...n){const e=`FIREBASE FATAL ERROR: ${kc(...n)}`;throw Jo.error(e),new Error(e)},Dn=function(...n){const e="FIREBASE WARNING: "+kc(...n);Jo.warn(e)},zV=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Dn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},NA=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},jV=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},ul="[MIN_NAME]",Ba="[MAX_NAME]",Tl=function(n,e){if(n===e)return 0;if(n===ul||e===Ba)return-1;if(e===ul||n===Ba)return 1;{const t=uw(n),s=uw(e);return t!==null?s!==null?t-s===0?n.length-e.length:t-s:-1:s!==null?1:n<e?-1:1}},BV=function(n,e){return n===e?0:n<e?-1:1},Du=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Ht(e))},_y=function(n){if(typeof n!="object"||n===null)return Ht(n);const e=[];for(const s in n)e.push(s);e.sort();let t="{";for(let s=0;s<e.length;s++)s!==0&&(t+=","),t+=Ht(e[s]),t+=":",t+=_y(n[e[s]]);return t+="}",t},OA=function(n,e){const t=n.length;if(t<=e)return[n];const s=[];for(let a=0;a<t;a+=e)a+e>t?s.push(n.substring(a,t)):s.push(n.substring(a,a+e));return s};function Mn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const DA=function(n){ae(!NA(n),"Invalid JSON number");const e=11,t=52,s=(1<<e-1)-1;let a,l,c,d,p;n===0?(l=0,c=0,a=1/n===-1/0?1:0):(a=n<0,n=Math.abs(n),n>=Math.pow(2,1-s)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),s),l=d+s,c=Math.round(n*Math.pow(2,t-d)-Math.pow(2,t))):(l=0,c=Math.round(n/Math.pow(2,1-s-t))));const g=[];for(p=t;p;p-=1)g.push(c%2?1:0),c=Math.floor(c/2);for(p=e;p;p-=1)g.push(l%2?1:0),l=Math.floor(l/2);g.push(a?1:0),g.reverse();const y=g.join("");let E="";for(p=0;p<64;p+=8){let S=parseInt(y.substr(p,8),2).toString(16);S.length===1&&(S="0"+S),E=E+S}return E.toLowerCase()},FV=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},HV=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function qV(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const s=new Error(n+" at "+e._path.toString()+": "+t);return s.code=n.toUpperCase(),s}const GV=new RegExp("^-?(0*)\\d{1,10}$"),YV=-2147483648,KV=2147483647,uw=function(n){if(GV.test(n)){const e=Number(n);if(e>=YV&&e<=KV)return e}return null},Sl=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Dn("Exception was thrown by user callback.",t),e},Math.floor(0))}},QV=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},$u=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};class WV{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,ii(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,s):t(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){Dn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class XV{constructor(e,t,s){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(a=>this.auth_=a)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(gn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,s):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Dn(e)}}class zf{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}zf.OWNER="owner";const yy="5",MA="v",xA="s",PA="r",kA="f",VA=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,LA="ls",UA="p",s_="ac",zA="websocket",jA="long_polling";class BA{constructor(e,t,s,a,l=!1,c="",d=!1,p=!1,g=null){this.secure=t,this.namespace=s,this.webSocketOnly=a,this.nodeAdmin=l,this.persistenceKey=c,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=p,this.emulatorOptions=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=xa.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&xa.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function $V(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function FA(n,e,t){ae(typeof e=="string","typeof type must == string"),ae(typeof t=="object","typeof params must == object");let s;if(e===zA)s=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===jA)s=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);$V(n)&&(t.ns=n.namespace);const a=[];return Mn(t,(l,c)=>{a.push(l+"="+c)}),s+a.join("&")}class JV{constructor(){this.counters_={}}incrementCounter(e,t=1){Gs(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return dO(this.counters_)}}const Sg={},wg={};function vy(n){const e=n.toString();return Sg[e]||(Sg[e]=new JV),Sg[e]}function ZV(n,e){const t=n.toString();return wg[t]||(wg[t]=e()),wg[t]}class eL{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<s.length;++a)s[a]&&Sl(()=>{this.onMessage_(s[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const cw="start",tL="close",nL="pLPCommand",iL="pRTLPCB",HA="id",qA="pw",GA="ser",sL="cb",rL="seg",aL="ts",oL="d",lL="dframe",YA=1870,KA=30,uL=YA-KA,cL=25e3,hL=3e4;class Ko{constructor(e,t,s,a,l,c,d){this.connId=e,this.repoInfo=t,this.applicationId=s,this.appCheckToken=a,this.authToken=l,this.transportSessionId=c,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Vc(e),this.stats_=vy(t),this.urlFn=p=>(this.appCheckToken&&(p[s_]=this.appCheckToken),FA(t,jA,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new eL(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(hL)),jV(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ey((...l)=>{const[c,d,p,g,y]=l;if(this.incrementIncomingBytes_(l),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===cw)this.id=d,this.password=p;else if(c===tL)d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...l)=>{const[c,d]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(c,d)},()=>{this.onClosed_()},this.urlFn);const s={};s[cw]="t",s[GA]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[sL]=this.scriptTagHolder.uniqueCallbackIdentifier),s[MA]=yy,this.transportSessionId&&(s[xA]=this.transportSessionId),this.lastSessionId&&(s[LA]=this.lastSessionId),this.applicationId&&(s[UA]=this.applicationId),this.appCheckToken&&(s[s_]=this.appCheckToken),typeof location<"u"&&location.hostname&&VA.test(location.hostname)&&(s[PA]=kA);const a=this.urlFn(s);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ko.forceAllow_=!0}static forceDisallow(){Ko.forceDisallow_=!0}static isAvailable(){return Ko.forceAllow_?!0:!Ko.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!FV()&&!HV()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Ht(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const s=sC(t),a=OA(s,uL);for(let l=0;l<a.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[l]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const s={};s[lL]="t",s[HA]=e,s[qA]=t,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Ht(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Ey{constructor(e,t,s,a){this.onDisconnect=s,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=LV(),window[nL+this.uniqueCallbackIdentifier]=e,window[iL+this.uniqueCallbackIdentifier]=t,this.myIFrame=Ey.createIFrame_();let l="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(l='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(d){gn("frame writing exception"),d.stack&&gn(d.stack),gn(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||gn("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[HA]=this.myID,e[qA]=this.myPW,e[GA]=this.currentSerial;let t=this.urlFn(e),s="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+KA+s.length<=YA;){const c=this.pendingSegs.shift();s=s+"&"+rL+a+"="+c.seg+"&"+aL+a+"="+c.ts+"&"+oL+a+"="+c.d,a++}return t=t+s,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,s){this.pendingSegs.push({seg:e,ts:t,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const s=()=>{this.outstandingRequests.delete(t),this.newRequest_()},a=setTimeout(s,Math.floor(cL)),l=()=>{clearTimeout(a),s()};this.addTag(e,l)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const a=s.readyState;(!a||a==="loaded"||a==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),t())},s.onerror=()=>{gn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}const fL=16384,dL=45e3;let ud=null;typeof MozWebSocket<"u"?ud=MozWebSocket:typeof WebSocket<"u"&&(ud=WebSocket);class vi{constructor(e,t,s,a,l,c,d){this.connId=e,this.applicationId=s,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Vc(this.connId),this.stats_=vy(t),this.connURL=vi.connectionURL_(t,c,d,a,s),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,s,a,l){const c={};return c[MA]=yy,typeof location<"u"&&location.hostname&&VA.test(location.hostname)&&(c[PA]=kA),t&&(c[xA]=t),s&&(c[LA]=s),a&&(c[s_]=a),l&&(c[UA]=l),FA(e,zA,c)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,xa.set("previous_websocket_failure",!0);try{let s;bO(),this.mySock=new ud(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const a=s.message||s.data;a&&this.log_(a),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const a=s.message||s.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){vi.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(t);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&ud!==null&&!vi.forceDisallow_}static previouslyFailed(){return xa.isInMemoryStorage||xa.get("previous_websocket_failure")===!0}markConnectionHealthy(){xa.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const s=ic(t);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ae(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const s=this.extractFrameCount_(t);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const t=Ht(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const s=OA(t,fL);s.length>1&&this.sendString_(String(s.length));for(let a=0;a<s.length;a++)this.sendString_(s[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(dL))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}vi.responsesRequiredToBeHealthy=2;vi.healthyTimeout=3e4;class mc{static get ALL_TRANSPORTS(){return[Ko,vi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=vi&&vi.isAvailable();let s=t&&!vi.previouslyFailed();if(e.webSocketOnly&&(t||Dn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[vi];else{const a=this.transports_=[];for(const l of mc.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);mc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}mc.globalTransportInitialized_=!1;const mL=6e4,pL=5e3,gL=10*1024,_L=100*1024,Cg="t",hw="d",yL="s",fw="r",vL="e",dw="o",mw="a",pw="n",gw="p",EL="h";class TL{constructor(e,t,s,a,l,c,d,p,g,y){this.id=e,this.repoInfo_=t,this.applicationId_=s,this.appCheckToken_=a,this.authToken_=l,this.onMessage_=c,this.onReady_=d,this.onDisconnect_=p,this.onKill_=g,this.lastSessionId=y,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Vc("c:"+this.id+":"),this.transportManager_=new mc(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,s)},Math.floor(0));const a=e.healthyTimeout||0;a>0&&(this.healthyTimeout_=$u(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>_L?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>gL?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Cg in e){const t=e[Cg];t===mw?this.upgradeIfSecondaryHealthy_():t===fw?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===dw&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Du("t",e),s=Du("d",e);if(t==="c")this.onSecondaryControl_(s);else if(t==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:gw,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:mw,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:pw,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Du("t",e),s=Du("d",e);t==="c"?this.onControl_(s):t==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Du(Cg,e);if(hw in e){const s=e[hw];if(t===EL){const a={...s};this.repoInfo_.isUsingEmulator&&(a.h=this.repoInfo_.host),this.onHandshake_(a)}else if(t===pw){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===yL?this.onConnectionShutdown_(s):t===fw?this.onReset_(s):t===vL?i_("Server Error: "+s):t===dw?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):i_("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,s=e.v,a=e.h;this.sessionId=e.s,this.repoInfo_.host=a,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),yy!==s&&Dn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,s),$u(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(mL))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$u(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(pL))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:gw,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(xa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class QA{put(e,t,s,a){}merge(e,t,s,a){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,s){}onDisconnectMerge(e,t,s){}onDisconnectCancel(e,t){}reportStats(e){}}class WA{constructor(e){this.allowedEvents_=e,this.listeners_={},ae(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let a=0;a<s.length;a++)s[a].callback.apply(s[a].context,t)}}on(e,t,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:s});const a=this.getInitialEvent(e);a&&t.apply(s,a)}off(e,t,s){this.validateEventType_(e);const a=this.listeners_[e]||[];for(let l=0;l<a.length;l++)if(a[l].callback===t&&(!s||s===a[l].context)){a.splice(l,1);return}}validateEventType_(e){ae(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class cd extends WA{static getInstance(){return new cd}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!w_()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ae(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const _w=32,yw=768;class ct{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let s=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[s]=this.pieces_[a],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function We(){return new ct("")}function He(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Qr(n){return n.pieces_.length-n.pieceNum_}function ht(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new ct(n.pieces_,e)}function XA(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function SL(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function $A(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function JA(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new ct(e,0)}function Gt(n,e){const t=[];for(let s=n.pieceNum_;s<n.pieces_.length;s++)t.push(n.pieces_[s]);if(e instanceof ct)for(let s=e.pieceNum_;s<e.pieces_.length;s++)t.push(e.pieces_[s]);else{const s=e.split("/");for(let a=0;a<s.length;a++)s[a].length>0&&t.push(s[a])}return new ct(t,0)}function ze(n){return n.pieceNum_>=n.pieces_.length}function Tn(n,e){const t=He(n),s=He(e);if(t===null)return e;if(t===s)return Tn(ht(n),ht(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function ZA(n,e){if(Qr(n)!==Qr(e))return!1;for(let t=n.pieceNum_,s=e.pieceNum_;t<=n.pieces_.length;t++,s++)if(n.pieces_[t]!==e.pieces_[s])return!1;return!0}function Si(n,e){let t=n.pieceNum_,s=e.pieceNum_;if(Qr(n)>Qr(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[s])return!1;++t,++s}return!0}class wL{constructor(e,t){this.errorPrefix_=t,this.parts_=$A(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=Ad(this.parts_[s]);eR(this)}}function CL(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Ad(e),eR(n)}function bL(n){const e=n.parts_.pop();n.byteLength_-=Ad(e),n.parts_.length>0&&(n.byteLength_-=1)}function eR(n){if(n.byteLength_>yw)throw new Error(n.errorPrefix_+"has a key path longer than "+yw+" bytes ("+n.byteLength_+").");if(n.parts_.length>_w)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+_w+") or object contains a cycle "+Da(n))}function Da(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}class Ty extends WA{static getInstance(){return new Ty}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return ae(e==="visible","Unknown event type: "+e),[this.visible_]}}const Mu=1e3,AL=300*1e3,vw=30*1e3,RL=1.3,IL=3e4,NL="server_kill",Ew=3;class ks extends QA{constructor(e,t,s,a,l,c,d,p){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=s,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=c,this.appCheckTokenProvider_=d,this.authOverride_=p,this.id=ks.nextPersistentConnectionId_++,this.log_=Vc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Mu,this.maxReconnectDelay_=AL,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,p)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ty.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&cd.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,s){const a=++this.requestNumber_,l={r:a,a:e,b:t};this.log_(Ht(l)),ae(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),s&&(this.requestCBHash_[a]=s)}get(e){this.initConnection_();const t=new bd,a={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:c=>{const d=c.d;c.s==="ok"?t.resolve(d):t.reject(d)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(l),t.promise}listen(e,t,s,a){this.initConnection_();const l=e._queryIdentifier,c=e._path.toString();this.log_("Listen called for "+c+" "+l),this.listens.has(c)||this.listens.set(c,new Map),ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ae(!this.listens.get(c).has(l),"listen() called twice for same path/queryId.");const d={onComplete:a,hashFn:t,query:e,tag:s};this.listens.get(c).set(l,d),this.connected_&&this.sendListen_(d)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(s)})}sendListen_(e){const t=e.query,s=t._path.toString(),a=t._queryIdentifier;this.log_("Listen on "+s+" for "+a);const l={p:s},c="q";e.tag&&(l.q=t._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest(c,l,d=>{const p=d.d,g=d.s;ks.warnOnListenWarnings_(p,t),(this.listens.get(s)&&this.listens.get(s).get(a))===e&&(this.log_("listen response",d),g!=="ok"&&this.removeListen_(s,a),e.onComplete&&e.onComplete(g,p))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Gs(e,"w")){const s=el(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const a='".indexOn": "'+t._queryParams.getIndex().toString()+'"',l=t._path.toString();Dn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||xO(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=vw)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=MO(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(t,s,a=>{const l=a.s,c=a.d||"error";this.authToken_===e&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,s=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,s)})}unlisten(e,t){const s=e._path.toString(),a=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+a),ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,a)&&this.connected_&&this.sendUnlisten_(s,a,e._queryObject,t)}sendUnlisten_(e,t,s,a){this.log_("Unlisten on "+e+" for "+t);const l={p:e},c="n";a&&(l.q=s,l.t=a),this.sendRequest(c,l)}onDisconnectPut(e,t,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:s})}onDisconnectMerge(e,t,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:s})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,s,a){const l={p:t,d:s};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,c=>{a&&setTimeout(()=>{a(c.s,c.d)},Math.floor(0))})}put(e,t,s,a){this.putInternal("p",e,t,s,a)}merge(e,t,s,a){this.putInternal("m",e,t,s,a)}putInternal(e,t,s,a,l){this.initConnection_();const c={p:t,d:s};l!==void 0&&(c.h=l),this.outstandingPuts_.push({action:e,request:c,onComplete:a}),this.outstandingPutCount_++;const d=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(d):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,a=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,s,l=>{this.log_(t+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,s=>{if(s.s!=="ok"){const l=s.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ht(e));const t=e.r,s=this.requestCBHash_[t];s&&(delete this.requestCBHash_[t],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):i_("Unrecognized action received from server: "+Ht(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ae(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Mu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Mu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>IL&&(this.reconnectDelay_=Mu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*RL)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+ks.nextConnectionId_++,l=this.lastSessionId;let c=!1,d=null;const p=function(){d?d.close():(c=!0,s())},g=function(E){ae(d,"sendRequest call when we're not connected not allowed."),d.sendRequest(E)};this.realtime_={close:p,sendRequest:g};const y=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[E,S]=await Promise.all([this.authTokenProvider_.getToken(y),this.appCheckTokenProvider_.getToken(y)]);c?gn("getToken() completed but was canceled"):(gn("getToken() completed. Creating connection."),this.authToken_=E&&E.accessToken,this.appCheckToken_=S&&S.token,d=new TL(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,s,R=>{Dn(R+" ("+this.repoInfo_.toString()+")"),this.interrupt(NL)},l))}catch(E){this.log_("Failed to get token: "+E),c||(this.repoInfo_.nodeAdmin&&Dn(E),p())}}}interrupt(e){gn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){gn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Dg(this.interruptReasons_)&&(this.reconnectDelay_=Mu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let s;t?s=t.map(l=>_y(l)).join("$"):s="default";const a=this.removeListen_(e,s);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(e,t){const s=new ct(e).toString();let a;if(this.listens.has(s)){const l=this.listens.get(s);a=l.get(t),l.delete(t),l.size===0&&this.listens.delete(s)}else a=void 0;return a}onAuthRevoked_(e,t){gn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Ew&&(this.reconnectDelay_=vw,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){gn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Ew&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+AA.replace(/\./g,"-")]=1,w_()?e["framework.cordova"]=1:hC()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=cd.getInstance().currentlyOnline();return Dg(this.interruptReasons_)&&e}}ks.nextPersistentConnectionId_=0;ks.nextConnectionId_=0;class ke{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new ke(e,t)}}class qd{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const s=new ke(ul,e),a=new ke(ul,t);return this.compare(s,a)!==0}minPost(){return ke.MIN}}let bf;class tR extends qd{static get __EMPTY_NODE(){return bf}static set __EMPTY_NODE(e){bf=e}compare(e,t){return Tl(e.name,t.name)}isDefinedOn(e){throw gl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ke.MIN}maxPost(){return new ke(Ba,bf)}makePost(e,t){return ae(typeof e=="string","KeyIndex indexValue must always be a string."),new ke(e,bf)}toString(){return".key"}}const Zo=new tR;class Af{constructor(e,t,s,a,l=null){this.isReverse_=a,this.resultGenerator_=l,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?s(e.key,t):1,a&&(c*=-1),c<0)this.isReverse_?e=e.left:e=e.right;else if(c===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Jt{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??Jt.RED,this.left=a??On.EMPTY_NODE,this.right=l??On.EMPTY_NODE}copy(e,t,s,a,l){return new Jt(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return l<0?a=a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a=a.copy(null,t,null,null,null):a=a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return On.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let s,a;if(s=this,t(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),t(e,s.key)===0){if(s.right.isEmpty())return On.EMPTY_NODE;a=s.right.min_(),s=s.copy(a.key,a.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Jt.RED=!0;Jt.BLACK=!1;class OL{copy(e,t,s,a,l){return this}insert(e,t,s){return new Jt(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class On{constructor(e,t=On.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new On(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Jt.BLACK,null,null))}remove(e){return new On(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Jt.BLACK,null,null))}get(e){let t,s=this.root_;for(;!s.isEmpty();){if(t=this.comparator_(e,s.key),t===0)return s.value;t<0?s=s.left:t>0&&(s=s.right)}return null}getPredecessorKey(e){let t,s=this.root_,a=null;for(;!s.isEmpty();)if(t=this.comparator_(e,s.key),t===0){if(s.left.isEmpty())return a?a.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else t<0?s=s.left:t>0&&(a=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Af(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Af(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Af(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Af(this.root_,null,this.comparator_,!0,e)}}On.EMPTY_NODE=new OL;function DL(n,e){return Tl(n.name,e.name)}function Sy(n,e){return Tl(n,e)}let r_;function ML(n){r_=n}const nR=function(n){return typeof n=="number"?"number:"+DA(n):"string:"+n},iR=function(n){if(n.isLeafNode()){const e=n.val();ae(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Gs(e,".sv"),"Priority must be a string or number.")}else ae(n===r_||n.isEmpty(),"priority of unexpected type.");ae(n===r_||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Tw;class Xt{static set __childrenNodeConstructor(e){Tw=e}static get __childrenNodeConstructor(){return Tw}constructor(e,t=Xt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ae(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),iR(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Xt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Xt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ze(e)?this:He(e)===".priority"?this.priorityNode_:Xt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:Xt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const s=He(e);return s===null?t:t.isEmpty()&&s!==".priority"?this:(ae(s!==".priority"||Qr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,Xt.__childrenNodeConstructor.EMPTY_NODE.updateChild(ht(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+nR(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=DA(this.value_):e+=this.value_,this.lazyHash_=IA(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Xt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Xt.__childrenNodeConstructor?-1:(ae(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,s=typeof this.value_,a=Xt.VALUE_TYPE_ORDER.indexOf(t),l=Xt.VALUE_TYPE_ORDER.indexOf(s);return ae(a>=0,"Unknown leaf type: "+t),ae(l>=0,"Unknown leaf type: "+s),a===l?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}Xt.VALUE_TYPE_ORDER=["object","boolean","number","string"];let sR,rR;function xL(n){sR=n}function PL(n){rR=n}class kL extends qd{compare(e,t){const s=e.node.getPriority(),a=t.node.getPriority(),l=s.compareTo(a);return l===0?Tl(e.name,t.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ke.MIN}maxPost(){return new ke(Ba,new Xt("[PRIORITY-POST]",rR))}makePost(e,t){const s=sR(e);return new ke(t,new Xt("[PRIORITY-POST]",s))}toString(){return".priority"}}const St=new kL;const VL=Math.log(2);class LL{constructor(e){const t=l=>parseInt(Math.log(l)/VL,10),s=l=>parseInt(Array(l+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const a=s(this.count);this.bits_=e+1&a}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const hd=function(n,e,t,s){n.sort(e);const a=function(p,g){const y=g-p;let E,S;if(y===0)return null;if(y===1)return E=n[p],S=t?t(E):E,new Jt(S,E.node,Jt.BLACK,null,null);{const R=parseInt(y/2,10)+p,k=a(p,R),K=a(R+1,g);return E=n[R],S=t?t(E):E,new Jt(S,E.node,Jt.BLACK,k,K)}},l=function(p){let g=null,y=null,E=n.length;const S=function(k,K){const q=E-k,ne=E;E-=k;const ee=a(q+1,ne),re=n[q],Ee=t?t(re):re;R(new Jt(Ee,re.node,K,null,ee))},R=function(k){g?(g.left=k,g=k):(y=k,g=k)};for(let k=0;k<p.count;++k){const K=p.nextBitIsOne(),q=Math.pow(2,p.count-(k+1));K?S(q,Jt.BLACK):(S(q,Jt.BLACK),S(q,Jt.RED))}return y},c=new LL(n.length),d=l(c);return new On(s||e,d)};let bg;const Bo={};class Ms{static get Default(){return ae(Bo&&St,"ChildrenNode.ts has not been loaded"),bg=bg||new Ms({".priority":Bo},{".priority":St}),bg}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=el(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof On?t:null}hasIndex(e){return Gs(this.indexSet_,e.toString())}addIndex(e,t){ae(e!==Zo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let a=!1;const l=t.getIterator(ke.Wrap);let c=l.getNext();for(;c;)a=a||e.isDefinedOn(c.node),s.push(c),c=l.getNext();let d;a?d=hd(s,e.getCompare()):d=Bo;const p=e.toString(),g={...this.indexSet_};g[p]=e;const y={...this.indexes_};return y[p]=d,new Ms(y,g)}addToIndexes(e,t){const s=Hf(this.indexes_,(a,l)=>{const c=el(this.indexSet_,l);if(ae(c,"Missing index implementation for "+l),a===Bo)if(c.isDefinedOn(e.node)){const d=[],p=t.getIterator(ke.Wrap);let g=p.getNext();for(;g;)g.name!==e.name&&d.push(g),g=p.getNext();return d.push(e),hd(d,c.getCompare())}else return Bo;else{const d=t.get(e.name);let p=a;return d&&(p=p.remove(new ke(e.name,d))),p.insert(e,e.node)}});return new Ms(s,this.indexSet_)}removeFromIndexes(e,t){const s=Hf(this.indexes_,a=>{if(a===Bo)return a;{const l=t.get(e.name);return l?a.remove(new ke(e.name,l)):a}});return new Ms(s,this.indexSet_)}}let xu;class Te{static get EMPTY_NODE(){return xu||(xu=new Te(new On(Sy),null,Ms.Default))}constructor(e,t,s){this.children_=e,this.priorityNode_=t,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&iR(this.priorityNode_),this.children_.isEmpty()&&ae(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||xu}updatePriority(e){return this.children_.isEmpty()?this:new Te(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?xu:t}}getChild(e){const t=He(e);return t===null?this:this.getImmediateChild(t).getChild(ht(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(ae(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const s=new ke(e,t);let a,l;t.isEmpty()?(a=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(s,this.children_)):(a=this.children_.insert(e,t),l=this.indexMap_.addToIndexes(s,this.children_));const c=a.isEmpty()?xu:this.priorityNode_;return new Te(a,c,l)}}updateChild(e,t){const s=He(e);if(s===null)return t;{ae(He(e)!==".priority"||Qr(e)===1,".priority must be the last token in a path");const a=this.getImmediateChild(s).updateChild(ht(e),t);return this.updateImmediateChild(s,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let s=0,a=0,l=!0;if(this.forEachChild(St,(c,d)=>{t[c]=d.val(e),s++,l&&Te.INTEGER_REGEXP_.test(c)?a=Math.max(a,Number(c)):l=!1}),!e&&l&&a<2*s){const c=[];for(const d in t)c[d]=t[d];return c}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+nR(this.getPriority().val())+":"),this.forEachChild(St,(t,s)=>{const a=s.hash();a!==""&&(e+=":"+t+":"+a)}),this.lazyHash_=e===""?"":IA(e)}return this.lazyHash_}getPredecessorChildName(e,t,s){const a=this.resolveIndex_(s);if(a){const l=a.getPredecessorKey(new ke(e,t));return l?l.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const s=t.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new ke(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const s=t.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new ke(t,this.children_.get(t)):null}forEachChild(e,t){const s=this.resolveIndex_(e);return s?s.inorderTraversal(a=>t(a.name,a.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const s=this.resolveIndex_(t);if(s)return s.getIteratorFrom(e,a=>a);{const a=this.children_.getIteratorFrom(e.name,ke.Wrap);let l=a.peek();for(;l!=null&&t.compare(l,e)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const s=this.resolveIndex_(t);if(s)return s.getReverseIteratorFrom(e,a=>a);{const a=this.children_.getReverseIteratorFrom(e.name,ke.Wrap);let l=a.peek();for(;l!=null&&t.compare(l,e)>0;)a.getNext(),l=a.peek();return a}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Lc?-1:0}withIndex(e){if(e===Zo||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Te(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Zo||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const s=this.getIterator(St),a=t.getIterator(St);let l=s.getNext(),c=a.getNext();for(;l&&c;){if(l.name!==c.name||!l.node.equals(c.node))return!1;l=s.getNext(),c=a.getNext()}return l===null&&c===null}else return!1;else return!1}}resolveIndex_(e){return e===Zo?null:this.indexMap_.get(e.toString())}}Te.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class UL extends Te{constructor(){super(new On(Sy),Te.EMPTY_NODE,Ms.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Te.EMPTY_NODE}isEmpty(){return!1}}const Lc=new UL;Object.defineProperties(ke,{MIN:{value:new ke(ul,Te.EMPTY_NODE)},MAX:{value:new ke(Ba,Lc)}});tR.__EMPTY_NODE=Te.EMPTY_NODE;Xt.__childrenNodeConstructor=Te;ML(Lc);PL(Lc);const zL=!0;function Zt(n,e=null){if(n===null)return Te.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),ae(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new Xt(t,Zt(e))}if(!(n instanceof Array)&&zL){const t=[];let s=!1;if(Mn(n,(c,d)=>{if(c.substring(0,1)!=="."){const p=Zt(d);p.isEmpty()||(s=s||!p.getPriority().isEmpty(),t.push(new ke(c,p)))}}),t.length===0)return Te.EMPTY_NODE;const l=hd(t,DL,c=>c.name,Sy);if(s){const c=hd(t,St.getCompare());return new Te(l,Zt(e),new Ms({".priority":c},{".priority":St}))}else return new Te(l,Zt(e),Ms.Default)}else{let t=Te.EMPTY_NODE;return Mn(n,(s,a)=>{if(Gs(n,s)&&s.substring(0,1)!=="."){const l=Zt(a);(l.isLeafNode()||!l.isEmpty())&&(t=t.updateImmediateChild(s,l))}}),t.updatePriority(Zt(e))}}xL(Zt);class jL extends qd{constructor(e){super(),this.indexPath_=e,ae(!ze(e)&&He(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const s=this.extractChild(e.node),a=this.extractChild(t.node),l=s.compareTo(a);return l===0?Tl(e.name,t.name):l}makePost(e,t){const s=Zt(e),a=Te.EMPTY_NODE.updateChild(this.indexPath_,s);return new ke(t,a)}maxPost(){const e=Te.EMPTY_NODE.updateChild(this.indexPath_,Lc);return new ke(Ba,e)}toString(){return $A(this.indexPath_,0).join("/")}}class BL extends qd{compare(e,t){const s=e.node.compareTo(t.node);return s===0?Tl(e.name,t.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ke.MIN}maxPost(){return ke.MAX}makePost(e,t){const s=Zt(e);return new ke(t,s)}toString(){return".value"}}const FL=new BL;function aR(n){return{type:"value",snapshotNode:n}}function cl(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function pc(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function gc(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function HL(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}class wy{constructor(e){this.index_=e}updateChild(e,t,s,a,l,c){ae(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(a).equals(s.getChild(a))&&d.isEmpty()===s.isEmpty()||(c!=null&&(s.isEmpty()?e.hasChild(t)?c.trackChildChange(pc(t,d)):ae(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?c.trackChildChange(cl(t,s)):c.trackChildChange(gc(t,s,d))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(t,s).withIndex(this.index_)}updateFullNode(e,t,s){return s!=null&&(e.isLeafNode()||e.forEachChild(St,(a,l)=>{t.hasChild(a)||s.trackChildChange(pc(a,l))}),t.isLeafNode()||t.forEachChild(St,(a,l)=>{if(e.hasChild(a)){const c=e.getImmediateChild(a);c.equals(l)||s.trackChildChange(gc(a,l,c))}else s.trackChildChange(cl(a,l))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Te.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class _c{constructor(e){this.indexedFilter_=new wy(e.getIndex()),this.index_=e.getIndex(),this.startPost_=_c.getStartPost_(e),this.endPost_=_c.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&s}updateChild(e,t,s,a,l,c){return this.matches(new ke(t,s))||(s=Te.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,s,a,l,c)}updateFullNode(e,t,s){t.isLeafNode()&&(t=Te.EMPTY_NODE);let a=t.withIndex(this.index_);a=a.updatePriority(Te.EMPTY_NODE);const l=this;return t.forEachChild(St,(c,d)=>{l.matches(new ke(c,d))||(a=a.updateImmediateChild(c,Te.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,a,s)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}class qL{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=t=>{const s=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new _c(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,s,a,l,c){return this.rangedFilter_.matches(new ke(t,s))||(s=Te.EMPTY_NODE),e.getImmediateChild(t).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,s,a,l,c):this.fullLimitUpdateChild_(e,t,s,l,c)}updateFullNode(e,t,s){let a;if(t.isLeafNode()||t.isEmpty())a=Te.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){a=Te.EMPTY_NODE.withIndex(this.index_);let l;this.reverse_?l=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;l.hasNext()&&c<this.limit_;){const d=l.getNext();if(this.withinDirectionalStart(d))if(this.withinDirectionalEnd(d))a=a.updateImmediateChild(d.name,d.node),c++;else break;else continue}}else{a=t.withIndex(this.index_),a=a.updatePriority(Te.EMPTY_NODE);let l;this.reverse_?l=a.getReverseIterator(this.index_):l=a.getIterator(this.index_);let c=0;for(;l.hasNext();){const d=l.getNext();c<this.limit_&&this.withinDirectionalStart(d)&&this.withinDirectionalEnd(d)?c++:a=a.updateImmediateChild(d.name,Te.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,a,s)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,s,a,l){let c;if(this.reverse_){const E=this.index_.getCompare();c=(S,R)=>E(R,S)}else c=this.index_.getCompare();const d=e;ae(d.numChildren()===this.limit_,"");const p=new ke(t,s),g=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),y=this.rangedFilter_.matches(p);if(d.hasChild(t)){const E=d.getImmediateChild(t);let S=a.getChildAfterChild(this.index_,g,this.reverse_);for(;S!=null&&(S.name===t||d.hasChild(S.name));)S=a.getChildAfterChild(this.index_,S,this.reverse_);const R=S==null?1:c(S,p);if(y&&!s.isEmpty()&&R>=0)return l?.trackChildChange(gc(t,s,E)),d.updateImmediateChild(t,s);{l?.trackChildChange(pc(t,E));const K=d.updateImmediateChild(t,Te.EMPTY_NODE);return S!=null&&this.rangedFilter_.matches(S)?(l?.trackChildChange(cl(S.name,S.node)),K.updateImmediateChild(S.name,S.node)):K}}else return s.isEmpty()?e:y&&c(g,p)>=0?(l!=null&&(l.trackChildChange(pc(g.name,g.node)),l.trackChildChange(cl(t,s))),d.updateImmediateChild(t,s).updateImmediateChild(g.name,Te.EMPTY_NODE)):e}}class Cy{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=St}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ae(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ae(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ul}hasEnd(){return this.endSet_}getIndexEndValue(){return ae(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ae(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ba}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ae(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===St}copy(){const e=new Cy;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function GL(n){return n.loadsAllData()?new wy(n.getIndex()):n.hasLimit()?new qL(n):new _c(n)}function Sw(n){const e={};if(n.isDefault())return e;let t;if(n.index_===St?t="$priority":n.index_===FL?t="$value":n.index_===Zo?t="$key":(ae(n.index_ instanceof jL,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Ht(t),n.startSet_){const s=n.startAfterSet_?"startAfter":"startAt";e[s]=Ht(n.indexStartValue_),n.startNameSet_&&(e[s]+=","+Ht(n.indexStartName_))}if(n.endSet_){const s=n.endBeforeSet_?"endBefore":"endAt";e[s]=Ht(n.indexEndValue_),n.endNameSet_&&(e[s]+=","+Ht(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function ww(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==St&&(e.i=n.index_.toString()),e}class fd extends QA{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(ae(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,s,a){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=s,this.appCheckTokenProvider_=a,this.log_=Vc("p:rest:"),this.listens_={}}listen(e,t,s,a){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const c=fd.getListenId_(e,s),d={};this.listens_[c]=d;const p=Sw(e._queryParams);this.restRequest_(l+".json",p,(g,y)=>{let E=y;if(g===404&&(E=null,g=null),g===null&&this.onDataUpdate_(l,E,!1,s),el(this.listens_,c)===d){let S;g?g===401?S="permission_denied":S="rest_error:"+g:S="ok",a(S,null)}})}unlisten(e,t){const s=fd.getListenId_(e,t);delete this.listens_[s]}get(e){const t=Sw(e._queryParams),s=e._path.toString(),a=new bd;return this.restRequest_(s+".json",t,(l,c)=>{let d=c;l===404&&(d=null,l=null),l===null?(this.onDataUpdate_(s,d,!1,null),a.resolve(d)):a.reject(new Error(d))}),a.promise}refreshAuthToken(e){}restRequest_(e,t={},s){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,l])=>{a&&a.accessToken&&(t.auth=a.accessToken),l&&l.token&&(t.ac=l.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ga(t);this.log_("Sending REST request for "+c);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(s&&d.readyState===4){this.log_("REST Response for "+c+" received. status:",d.status,"response:",d.responseText);let p=null;if(d.status>=200&&d.status<300){try{p=ic(d.responseText)}catch{Dn("Failed to parse JSON response for "+c+": "+d.responseText)}s(null,p)}else d.status!==401&&d.status!==404&&Dn("Got unsuccessful REST response for "+c+" Status: "+d.status),s(d.status);s=null}},d.open("GET",c,!0),d.send()})}}class YL{constructor(){this.rootNode_=Te.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function dd(){return{value:null,children:new Map}}function oR(n,e,t){if(ze(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const s=He(e);n.children.has(s)||n.children.set(s,dd());const a=n.children.get(s);e=ht(e),oR(a,e,t)}}function a_(n,e,t){n.value!==null?t(e,n.value):KL(n,(s,a)=>{const l=new ct(e.toString()+"/"+s);a_(a,l,t)})}function KL(n,e){n.children.forEach((t,s)=>{e(s,t)})}class QL{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t={...e};return this.last_&&Mn(this.last_,(s,a)=>{t[s]=t[s]-a}),this.last_=e,t}}const Cw=10*1e3,WL=30*1e3,XL=300*1e3;class $L{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new QL(e);const s=Cw+(WL-Cw)*Math.random();$u(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),t={};let s=!1;Mn(e,(a,l)=>{l>0&&Gs(this.statsToReport_,a)&&(t[a]=l,s=!0)}),s&&this.server_.reportStats(t),$u(this.reportStats_.bind(this),Math.floor(Math.random()*2*XL))}}var wi;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(wi||(wi={}));function lR(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function by(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Ay(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class md{constructor(e,t,s){this.path=e,this.affectedTree=t,this.revert=s,this.type=wi.ACK_USER_WRITE,this.source=lR()}operationForChild(e){if(ze(this.path)){if(this.affectedTree.value!=null)return ae(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ct(e));return new md(We(),t,this.revert)}}else return ae(He(this.path)===e,"operationForChild called for unrelated child."),new md(ht(this.path),this.affectedTree,this.revert)}}class yc{constructor(e,t){this.source=e,this.path=t,this.type=wi.LISTEN_COMPLETE}operationForChild(e){return ze(this.path)?new yc(this.source,We()):new yc(this.source,ht(this.path))}}class Fa{constructor(e,t,s){this.source=e,this.path=t,this.snap=s,this.type=wi.OVERWRITE}operationForChild(e){return ze(this.path)?new Fa(this.source,We(),this.snap.getImmediateChild(e)):new Fa(this.source,ht(this.path),this.snap)}}class vc{constructor(e,t,s){this.source=e,this.path=t,this.children=s,this.type=wi.MERGE}operationForChild(e){if(ze(this.path)){const t=this.children.subtree(new ct(e));return t.isEmpty()?null:t.value?new Fa(this.source,We(),t.value):new vc(this.source,We(),t)}else return ae(He(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new vc(this.source,ht(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Wr{constructor(e,t,s){this.node_=e,this.fullyInitialized_=t,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ze(e))return this.isFullyInitialized()&&!this.filtered_;const t=He(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class JL{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function ZL(n,e,t,s){const a=[],l=[];return e.forEach(c=>{c.type==="child_changed"&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&l.push(HL(c.childName,c.snapshotNode))}),Pu(n,a,"child_removed",e,s,t),Pu(n,a,"child_added",e,s,t),Pu(n,a,"child_moved",l,s,t),Pu(n,a,"child_changed",e,s,t),Pu(n,a,"value",e,s,t),a}function Pu(n,e,t,s,a,l){const c=s.filter(d=>d.type===t);c.sort((d,p)=>t4(n,d,p)),c.forEach(d=>{const p=e4(n,d,l);a.forEach(g=>{g.respondsTo(d.type)&&e.push(g.createEvent(p,n.query_))})})}function e4(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function t4(n,e,t){if(e.childName==null||t.childName==null)throw gl("Should only compare child_ events.");const s=new ke(e.childName,e.snapshotNode),a=new ke(t.childName,t.snapshotNode);return n.index_.compare(s,a)}function Gd(n,e){return{eventCache:n,serverCache:e}}function Ju(n,e,t,s){return Gd(new Wr(e,t,s),n.serverCache)}function uR(n,e,t,s){return Gd(n.eventCache,new Wr(e,t,s))}function pd(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ha(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Ag;const n4=()=>(Ag||(Ag=new On(BV)),Ag);class mt{static fromObject(e){let t=new mt(null);return Mn(e,(s,a)=>{t=t.set(new ct(s),a)}),t}constructor(e,t=n4()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:We(),value:this.value};if(ze(e))return null;{const s=He(e),a=this.children.get(s);if(a!==null){const l=a.findRootMostMatchingPathAndValue(ht(e),t);return l!=null?{path:Gt(new ct(s),l.path),value:l.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ze(e))return this;{const t=He(e),s=this.children.get(t);return s!==null?s.subtree(ht(e)):new mt(null)}}set(e,t){if(ze(e))return new mt(t,this.children);{const s=He(e),l=(this.children.get(s)||new mt(null)).set(ht(e),t),c=this.children.insert(s,l);return new mt(this.value,c)}}remove(e){if(ze(e))return this.children.isEmpty()?new mt(null):new mt(null,this.children);{const t=He(e),s=this.children.get(t);if(s){const a=s.remove(ht(e));let l;return a.isEmpty()?l=this.children.remove(t):l=this.children.insert(t,a),this.value===null&&l.isEmpty()?new mt(null):new mt(this.value,l)}else return this}}get(e){if(ze(e))return this.value;{const t=He(e),s=this.children.get(t);return s?s.get(ht(e)):null}}setTree(e,t){if(ze(e))return t;{const s=He(e),l=(this.children.get(s)||new mt(null)).setTree(ht(e),t);let c;return l.isEmpty()?c=this.children.remove(s):c=this.children.insert(s,l),new mt(this.value,c)}}fold(e){return this.fold_(We(),e)}fold_(e,t){const s={};return this.children.inorderTraversal((a,l)=>{s[a]=l.fold_(Gt(e,a),t)}),t(e,this.value,s)}findOnPath(e,t){return this.findOnPath_(e,We(),t)}findOnPath_(e,t,s){const a=this.value?s(t,this.value):!1;if(a)return a;if(ze(e))return null;{const l=He(e),c=this.children.get(l);return c?c.findOnPath_(ht(e),Gt(t,l),s):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,We(),t)}foreachOnPath_(e,t,s){if(ze(e))return this;{this.value&&s(t,this.value);const a=He(e),l=this.children.get(a);return l?l.foreachOnPath_(ht(e),Gt(t,a),s):new mt(null)}}foreach(e){this.foreach_(We(),e)}foreach_(e,t){this.children.inorderTraversal((s,a)=>{a.foreach_(Gt(e,s),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,s)=>{s.value&&e(t,s.value)})}}class Ci{constructor(e){this.writeTree_=e}static empty(){return new Ci(new mt(null))}}function Zu(n,e,t){if(ze(e))return new Ci(new mt(t));{const s=n.writeTree_.findRootMostValueAndPath(e);if(s!=null){const a=s.path;let l=s.value;const c=Tn(a,e);return l=l.updateChild(c,t),new Ci(n.writeTree_.set(a,l))}else{const a=new mt(t),l=n.writeTree_.setTree(e,a);return new Ci(l)}}}function bw(n,e,t){let s=n;return Mn(t,(a,l)=>{s=Zu(s,Gt(e,a),l)}),s}function Aw(n,e){if(ze(e))return Ci.empty();{const t=n.writeTree_.setTree(e,new mt(null));return new Ci(t)}}function o_(n,e){return $a(n,e)!=null}function $a(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Tn(t.path,e)):null}function Rw(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(St,(s,a)=>{e.push(new ke(s,a))}):n.writeTree_.children.inorderTraversal((s,a)=>{a.value!=null&&e.push(new ke(s,a.value))}),e}function Ur(n,e){if(ze(e))return n;{const t=$a(n,e);return t!=null?new Ci(new mt(t)):new Ci(n.writeTree_.subtree(e))}}function l_(n){return n.writeTree_.isEmpty()}function hl(n,e){return cR(We(),n.writeTree_,e)}function cR(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let s=null;return e.children.inorderTraversal((a,l)=>{a===".priority"?(ae(l.value!==null,"Priority writes must always be leaf nodes"),s=l.value):t=cR(Gt(n,a),l,t)}),!t.getChild(n).isEmpty()&&s!==null&&(t=t.updateChild(Gt(n,".priority"),s)),t}}function Yd(n,e){return mR(e,n)}function i4(n,e,t,s,a){ae(s>n.lastWriteId,"Stacking an older write on top of newer ones"),a===void 0&&(a=!0),n.allWrites.push({path:e,snap:t,writeId:s,visible:a}),a&&(n.visibleWrites=Zu(n.visibleWrites,e,t)),n.lastWriteId=s}function s4(n,e){for(let t=0;t<n.allWrites.length;t++){const s=n.allWrites[t];if(s.writeId===e)return s}return null}function r4(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);ae(t>=0,"removeWrite called with nonexistent writeId.");const s=n.allWrites[t];n.allWrites.splice(t,1);let a=s.visible,l=!1,c=n.allWrites.length-1;for(;a&&c>=0;){const d=n.allWrites[c];d.visible&&(c>=t&&a4(d,s.path)?a=!1:Si(s.path,d.path)&&(l=!0)),c--}if(a){if(l)return o4(n),!0;if(s.snap)n.visibleWrites=Aw(n.visibleWrites,s.path);else{const d=s.children;Mn(d,p=>{n.visibleWrites=Aw(n.visibleWrites,Gt(s.path,p))})}return!0}else return!1}function a4(n,e){if(n.snap)return Si(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Si(Gt(n.path,t),e))return!0;return!1}function o4(n){n.visibleWrites=hR(n.allWrites,l4,We()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function l4(n){return n.visible}function hR(n,e,t){let s=Ci.empty();for(let a=0;a<n.length;++a){const l=n[a];if(e(l)){const c=l.path;let d;if(l.snap)Si(t,c)?(d=Tn(t,c),s=Zu(s,d,l.snap)):Si(c,t)&&(d=Tn(c,t),s=Zu(s,We(),l.snap.getChild(d)));else if(l.children){if(Si(t,c))d=Tn(t,c),s=bw(s,d,l.children);else if(Si(c,t))if(d=Tn(c,t),ze(d))s=bw(s,We(),l.children);else{const p=el(l.children,He(d));if(p){const g=p.getChild(ht(d));s=Zu(s,We(),g)}}}else throw gl("WriteRecord should have .snap or .children")}}return s}function fR(n,e,t,s,a){if(!s&&!a){const l=$a(n.visibleWrites,e);if(l!=null)return l;{const c=Ur(n.visibleWrites,e);if(l_(c))return t;if(t==null&&!o_(c,We()))return null;{const d=t||Te.EMPTY_NODE;return hl(c,d)}}}else{const l=Ur(n.visibleWrites,e);if(!a&&l_(l))return t;if(!a&&t==null&&!o_(l,We()))return null;{const c=function(g){return(g.visible||a)&&(!s||!~s.indexOf(g.writeId))&&(Si(g.path,e)||Si(e,g.path))},d=hR(n.allWrites,c,e),p=t||Te.EMPTY_NODE;return hl(d,p)}}}function u4(n,e,t){let s=Te.EMPTY_NODE;const a=$a(n.visibleWrites,e);if(a)return a.isLeafNode()||a.forEachChild(St,(l,c)=>{s=s.updateImmediateChild(l,c)}),s;if(t){const l=Ur(n.visibleWrites,e);return t.forEachChild(St,(c,d)=>{const p=hl(Ur(l,new ct(c)),d);s=s.updateImmediateChild(c,p)}),Rw(l).forEach(c=>{s=s.updateImmediateChild(c.name,c.node)}),s}else{const l=Ur(n.visibleWrites,e);return Rw(l).forEach(c=>{s=s.updateImmediateChild(c.name,c.node)}),s}}function c4(n,e,t,s,a){ae(s||a,"Either existingEventSnap or existingServerSnap must exist");const l=Gt(e,t);if(o_(n.visibleWrites,l))return null;{const c=Ur(n.visibleWrites,l);return l_(c)?a.getChild(t):hl(c,a.getChild(t))}}function h4(n,e,t,s){const a=Gt(e,t),l=$a(n.visibleWrites,a);if(l!=null)return l;if(s.isCompleteForChild(t)){const c=Ur(n.visibleWrites,a);return hl(c,s.getNode().getImmediateChild(t))}else return null}function f4(n,e){return $a(n.visibleWrites,e)}function d4(n,e,t,s,a,l,c){let d;const p=Ur(n.visibleWrites,e),g=$a(p,We());if(g!=null)d=g;else if(t!=null)d=hl(p,t);else return[];if(d=d.withIndex(c),!d.isEmpty()&&!d.isLeafNode()){const y=[],E=c.getCompare(),S=l?d.getReverseIteratorFrom(s,c):d.getIteratorFrom(s,c);let R=S.getNext();for(;R&&y.length<a;)E(R,s)!==0&&y.push(R),R=S.getNext();return y}else return[]}function m4(){return{visibleWrites:Ci.empty(),allWrites:[],lastWriteId:-1}}function gd(n,e,t,s){return fR(n.writeTree,n.treePath,e,t,s)}function Ry(n,e){return u4(n.writeTree,n.treePath,e)}function Iw(n,e,t,s){return c4(n.writeTree,n.treePath,e,t,s)}function _d(n,e){return f4(n.writeTree,Gt(n.treePath,e))}function p4(n,e,t,s,a,l){return d4(n.writeTree,n.treePath,e,t,s,a,l)}function Iy(n,e,t){return h4(n.writeTree,n.treePath,e,t)}function dR(n,e){return mR(Gt(n.treePath,e),n.writeTree)}function mR(n,e){return{treePath:n,writeTree:e}}class g4{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,s=e.childName;ae(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ae(s!==".priority","Only non-priority child changes can be tracked.");const a=this.changeMap.get(s);if(a){const l=a.type;if(t==="child_added"&&l==="child_removed")this.changeMap.set(s,gc(s,e.snapshotNode,a.snapshotNode));else if(t==="child_removed"&&l==="child_added")this.changeMap.delete(s);else if(t==="child_removed"&&l==="child_changed")this.changeMap.set(s,pc(s,a.oldSnap));else if(t==="child_changed"&&l==="child_added")this.changeMap.set(s,cl(s,e.snapshotNode));else if(t==="child_changed"&&l==="child_changed")this.changeMap.set(s,gc(s,e.snapshotNode,a.oldSnap));else throw gl("Illegal combination of changes: "+e+" occurred after "+a)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}class _4{getCompleteChild(e){return null}getChildAfterChild(e,t,s){return null}}const pR=new _4;class Ny{constructor(e,t,s=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=s}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new Wr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Iy(this.writes_,e,s)}}getChildAfterChild(e,t,s){const a=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ha(this.viewCache_),l=p4(this.writes_,a,t,1,s,e);return l.length===0?null:l[0]}}function y4(n){return{filter:n}}function v4(n,e){ae(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ae(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function E4(n,e,t,s,a){const l=new g4;let c,d;if(t.type===wi.OVERWRITE){const g=t;g.source.fromUser?c=u_(n,e,g.path,g.snap,s,a,l):(ae(g.source.fromServer,"Unknown source."),d=g.source.tagged||e.serverCache.isFiltered()&&!ze(g.path),c=yd(n,e,g.path,g.snap,s,a,d,l))}else if(t.type===wi.MERGE){const g=t;g.source.fromUser?c=S4(n,e,g.path,g.children,s,a,l):(ae(g.source.fromServer,"Unknown source."),d=g.source.tagged||e.serverCache.isFiltered(),c=c_(n,e,g.path,g.children,s,a,d,l))}else if(t.type===wi.ACK_USER_WRITE){const g=t;g.revert?c=b4(n,e,g.path,s,a,l):c=w4(n,e,g.path,g.affectedTree,s,a,l)}else if(t.type===wi.LISTEN_COMPLETE)c=C4(n,e,t.path,s,l);else throw gl("Unknown operation type: "+t.type);const p=l.getChanges();return T4(e,c,p),{viewCache:c,changes:p}}function T4(n,e,t){const s=e.eventCache;if(s.isFullyInitialized()){const a=s.getNode().isLeafNode()||s.getNode().isEmpty(),l=pd(n);(t.length>0||!n.eventCache.isFullyInitialized()||a&&!s.getNode().equals(l)||!s.getNode().getPriority().equals(l.getPriority()))&&t.push(aR(pd(e)))}}function gR(n,e,t,s,a,l){const c=e.eventCache;if(_d(s,t)!=null)return e;{let d,p;if(ze(t))if(ae(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const g=Ha(e),y=g instanceof Te?g:Te.EMPTY_NODE,E=Ry(s,y);d=n.filter.updateFullNode(e.eventCache.getNode(),E,l)}else{const g=gd(s,Ha(e));d=n.filter.updateFullNode(e.eventCache.getNode(),g,l)}else{const g=He(t);if(g===".priority"){ae(Qr(t)===1,"Can't have a priority with additional path components");const y=c.getNode();p=e.serverCache.getNode();const E=Iw(s,t,y,p);E!=null?d=n.filter.updatePriority(y,E):d=c.getNode()}else{const y=ht(t);let E;if(c.isCompleteForChild(g)){p=e.serverCache.getNode();const S=Iw(s,t,c.getNode(),p);S!=null?E=c.getNode().getImmediateChild(g).updateChild(y,S):E=c.getNode().getImmediateChild(g)}else E=Iy(s,g,e.serverCache);E!=null?d=n.filter.updateChild(c.getNode(),g,E,y,a,l):d=c.getNode()}}return Ju(e,d,c.isFullyInitialized()||ze(t),n.filter.filtersNodes())}}function yd(n,e,t,s,a,l,c,d){const p=e.serverCache;let g;const y=c?n.filter:n.filter.getIndexedFilter();if(ze(t))g=y.updateFullNode(p.getNode(),s,null);else if(y.filtersNodes()&&!p.isFiltered()){const R=p.getNode().updateChild(t,s);g=y.updateFullNode(p.getNode(),R,null)}else{const R=He(t);if(!p.isCompleteForPath(t)&&Qr(t)>1)return e;const k=ht(t),q=p.getNode().getImmediateChild(R).updateChild(k,s);R===".priority"?g=y.updatePriority(p.getNode(),q):g=y.updateChild(p.getNode(),R,q,k,pR,null)}const E=uR(e,g,p.isFullyInitialized()||ze(t),y.filtersNodes()),S=new Ny(a,E,l);return gR(n,E,t,a,S,d)}function u_(n,e,t,s,a,l,c){const d=e.eventCache;let p,g;const y=new Ny(a,e,l);if(ze(t))g=n.filter.updateFullNode(e.eventCache.getNode(),s,c),p=Ju(e,g,!0,n.filter.filtersNodes());else{const E=He(t);if(E===".priority")g=n.filter.updatePriority(e.eventCache.getNode(),s),p=Ju(e,g,d.isFullyInitialized(),d.isFiltered());else{const S=ht(t),R=d.getNode().getImmediateChild(E);let k;if(ze(S))k=s;else{const K=y.getCompleteChild(E);K!=null?XA(S)===".priority"&&K.getChild(JA(S)).isEmpty()?k=K:k=K.updateChild(S,s):k=Te.EMPTY_NODE}if(R.equals(k))p=e;else{const K=n.filter.updateChild(d.getNode(),E,k,S,y,c);p=Ju(e,K,d.isFullyInitialized(),n.filter.filtersNodes())}}}return p}function Nw(n,e){return n.eventCache.isCompleteForChild(e)}function S4(n,e,t,s,a,l,c){let d=e;return s.foreach((p,g)=>{const y=Gt(t,p);Nw(e,He(y))&&(d=u_(n,d,y,g,a,l,c))}),s.foreach((p,g)=>{const y=Gt(t,p);Nw(e,He(y))||(d=u_(n,d,y,g,a,l,c))}),d}function Ow(n,e,t){return t.foreach((s,a)=>{e=e.updateChild(s,a)}),e}function c_(n,e,t,s,a,l,c,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let p=e,g;ze(t)?g=s:g=new mt(null).setTree(t,s);const y=e.serverCache.getNode();return g.children.inorderTraversal((E,S)=>{if(y.hasChild(E)){const R=e.serverCache.getNode().getImmediateChild(E),k=Ow(n,R,S);p=yd(n,p,new ct(E),k,a,l,c,d)}}),g.children.inorderTraversal((E,S)=>{const R=!e.serverCache.isCompleteForChild(E)&&S.value===null;if(!y.hasChild(E)&&!R){const k=e.serverCache.getNode().getImmediateChild(E),K=Ow(n,k,S);p=yd(n,p,new ct(E),K,a,l,c,d)}}),p}function w4(n,e,t,s,a,l,c){if(_d(a,t)!=null)return e;const d=e.serverCache.isFiltered(),p=e.serverCache;if(s.value!=null){if(ze(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return yd(n,e,t,p.getNode().getChild(t),a,l,d,c);if(ze(t)){let g=new mt(null);return p.getNode().forEachChild(Zo,(y,E)=>{g=g.set(new ct(y),E)}),c_(n,e,t,g,a,l,d,c)}else return e}else{let g=new mt(null);return s.foreach((y,E)=>{const S=Gt(t,y);p.isCompleteForPath(S)&&(g=g.set(y,p.getNode().getChild(S)))}),c_(n,e,t,g,a,l,d,c)}}function C4(n,e,t,s,a){const l=e.serverCache,c=uR(e,l.getNode(),l.isFullyInitialized()||ze(t),l.isFiltered());return gR(n,c,t,s,pR,a)}function b4(n,e,t,s,a,l){let c;if(_d(s,t)!=null)return e;{const d=new Ny(s,e,a),p=e.eventCache.getNode();let g;if(ze(t)||He(t)===".priority"){let y;if(e.serverCache.isFullyInitialized())y=gd(s,Ha(e));else{const E=e.serverCache.getNode();ae(E instanceof Te,"serverChildren would be complete if leaf node"),y=Ry(s,E)}y=y,g=n.filter.updateFullNode(p,y,l)}else{const y=He(t);let E=Iy(s,y,e.serverCache);E==null&&e.serverCache.isCompleteForChild(y)&&(E=p.getImmediateChild(y)),E!=null?g=n.filter.updateChild(p,y,E,ht(t),d,l):e.eventCache.getNode().hasChild(y)?g=n.filter.updateChild(p,y,Te.EMPTY_NODE,ht(t),d,l):g=p,g.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=gd(s,Ha(e)),c.isLeafNode()&&(g=n.filter.updateFullNode(g,c,l)))}return c=e.serverCache.isFullyInitialized()||_d(s,We())!=null,Ju(e,g,c,n.filter.filtersNodes())}}class A4{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,a=new wy(s.getIndex()),l=GL(s);this.processor_=y4(l);const c=t.serverCache,d=t.eventCache,p=a.updateFullNode(Te.EMPTY_NODE,c.getNode(),null),g=l.updateFullNode(Te.EMPTY_NODE,d.getNode(),null),y=new Wr(p,c.isFullyInitialized(),a.filtersNodes()),E=new Wr(g,d.isFullyInitialized(),l.filtersNodes());this.viewCache_=Gd(E,y),this.eventGenerator_=new JL(this.query_)}get query(){return this.query_}}function R4(n){return n.viewCache_.serverCache.getNode()}function I4(n){return pd(n.viewCache_)}function N4(n,e){const t=Ha(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!ze(e)&&!t.getImmediateChild(He(e)).isEmpty())?t.getChild(e):null}function Dw(n){return n.eventRegistrations_.length===0}function O4(n,e){n.eventRegistrations_.push(e)}function Mw(n,e,t){const s=[];if(t){ae(e==null,"A cancel should cancel all event registrations.");const a=n.query._path;n.eventRegistrations_.forEach(l=>{const c=l.createCancelEvent(t,a);c&&s.push(c)})}if(e){let a=[];for(let l=0;l<n.eventRegistrations_.length;++l){const c=n.eventRegistrations_[l];if(!c.matches(e))a.push(c);else if(e.hasAnyCallback()){a=a.concat(n.eventRegistrations_.slice(l+1));break}}n.eventRegistrations_=a}else n.eventRegistrations_=[];return s}function xw(n,e,t,s){e.type===wi.MERGE&&e.source.queryId!==null&&(ae(Ha(n.viewCache_),"We should always have a full cache before handling merges"),ae(pd(n.viewCache_),"Missing event cache, even though we have a server cache"));const a=n.viewCache_,l=E4(n.processor_,a,e,t,s);return v4(n.processor_,l.viewCache),ae(l.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,_R(n,l.changes,l.viewCache.eventCache.getNode(),null)}function D4(n,e){const t=n.viewCache_.eventCache,s=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(St,(l,c)=>{s.push(cl(l,c))}),t.isFullyInitialized()&&s.push(aR(t.getNode())),_R(n,s,t.getNode(),e)}function _R(n,e,t,s){const a=s?[s]:n.eventRegistrations_;return ZL(n.eventGenerator_,e,t,a)}let vd;class yR{constructor(){this.views=new Map}}function M4(n){ae(!vd,"__referenceConstructor has already been defined"),vd=n}function x4(){return ae(vd,"Reference.ts has not been loaded"),vd}function P4(n){return n.views.size===0}function Oy(n,e,t,s){const a=e.source.queryId;if(a!==null){const l=n.views.get(a);return ae(l!=null,"SyncTree gave us an op for an invalid query."),xw(l,e,t,s)}else{let l=[];for(const c of n.views.values())l=l.concat(xw(c,e,t,s));return l}}function vR(n,e,t,s,a){const l=e._queryIdentifier,c=n.views.get(l);if(!c){let d=gd(t,a?s:null),p=!1;d?p=!0:s instanceof Te?(d=Ry(t,s),p=!1):(d=Te.EMPTY_NODE,p=!1);const g=Gd(new Wr(d,p,!1),new Wr(s,a,!1));return new A4(e,g)}return c}function k4(n,e,t,s,a,l){const c=vR(n,e,s,a,l);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),O4(c,t),D4(c,t)}function V4(n,e,t,s){const a=e._queryIdentifier,l=[];let c=[];const d=Xr(n);if(a==="default")for(const[p,g]of n.views.entries())c=c.concat(Mw(g,t,s)),Dw(g)&&(n.views.delete(p),g.query._queryParams.loadsAllData()||l.push(g.query));else{const p=n.views.get(a);p&&(c=c.concat(Mw(p,t,s)),Dw(p)&&(n.views.delete(a),p.query._queryParams.loadsAllData()||l.push(p.query)))}return d&&!Xr(n)&&l.push(new(x4())(e._repo,e._path)),{removed:l,events:c}}function ER(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function zr(n,e){let t=null;for(const s of n.views.values())t=t||N4(s,e);return t}function TR(n,e){if(e._queryParams.loadsAllData())return Kd(n);{const s=e._queryIdentifier;return n.views.get(s)}}function SR(n,e){return TR(n,e)!=null}function Xr(n){return Kd(n)!=null}function Kd(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Ed;function L4(n){ae(!Ed,"__referenceConstructor has already been defined"),Ed=n}function U4(){return ae(Ed,"Reference.ts has not been loaded"),Ed}let z4=1;class Pw{constructor(e){this.listenProvider_=e,this.syncPointTree_=new mt(null),this.pendingWriteTree_=m4(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function wR(n,e,t,s,a){return i4(n.pendingWriteTree_,e,t,s,a),a?zc(n,new Fa(lR(),e,t)):[]}function Pa(n,e,t=!1){const s=s4(n.pendingWriteTree_,e);if(r4(n.pendingWriteTree_,e)){let l=new mt(null);return s.snap!=null?l=l.set(We(),!0):Mn(s.children,c=>{l=l.set(new ct(c),!0)}),zc(n,new md(s.path,l,t))}else return[]}function Uc(n,e,t){return zc(n,new Fa(by(),e,t))}function j4(n,e,t){const s=mt.fromObject(t);return zc(n,new vc(by(),e,s))}function B4(n,e){return zc(n,new yc(by(),e))}function F4(n,e,t){const s=My(n,t);if(s){const a=xy(s),l=a.path,c=a.queryId,d=Tn(l,e),p=new yc(Ay(c),d);return Py(n,l,p)}else return[]}function CR(n,e,t,s,a=!1){const l=e._path,c=n.syncPointTree_.get(l);let d=[];if(c&&(e._queryIdentifier==="default"||SR(c,e))){const p=V4(c,e,t,s);P4(c)&&(n.syncPointTree_=n.syncPointTree_.remove(l));const g=p.removed;if(d=p.events,!a){const y=g.findIndex(S=>S._queryParams.loadsAllData())!==-1,E=n.syncPointTree_.findOnPath(l,(S,R)=>Xr(R));if(y&&!E){const S=n.syncPointTree_.subtree(l);if(!S.isEmpty()){const R=Y4(S);for(let k=0;k<R.length;++k){const K=R[k],q=K.query,ne=IR(n,K);n.listenProvider_.startListening(ec(q),Ec(n,q),ne.hashFn,ne.onComplete)}}}!E&&g.length>0&&!s&&(y?n.listenProvider_.stopListening(ec(e),null):g.forEach(S=>{const R=n.queryToTagMap.get(Qd(S));n.listenProvider_.stopListening(ec(S),R)}))}K4(n,g)}return d}function bR(n,e,t,s){const a=My(n,s);if(a!=null){const l=xy(a),c=l.path,d=l.queryId,p=Tn(c,e),g=new Fa(Ay(d),p,t);return Py(n,c,g)}else return[]}function H4(n,e,t,s){const a=My(n,s);if(a){const l=xy(a),c=l.path,d=l.queryId,p=Tn(c,e),g=mt.fromObject(t),y=new vc(Ay(d),p,g);return Py(n,c,y)}else return[]}function q4(n,e,t,s=!1){const a=e._path;let l=null,c=!1;n.syncPointTree_.foreachOnPath(a,(S,R)=>{const k=Tn(S,a);l=l||zr(R,k),c=c||Xr(R)});let d=n.syncPointTree_.get(a);d?(c=c||Xr(d),l=l||zr(d,We())):(d=new yR,n.syncPointTree_=n.syncPointTree_.set(a,d));let p;l!=null?p=!0:(p=!1,l=Te.EMPTY_NODE,n.syncPointTree_.subtree(a).foreachChild((R,k)=>{const K=zr(k,We());K&&(l=l.updateImmediateChild(R,K))}));const g=SR(d,e);if(!g&&!e._queryParams.loadsAllData()){const S=Qd(e);ae(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const R=Q4();n.queryToTagMap.set(S,R),n.tagToQueryMap.set(R,S)}const y=Yd(n.pendingWriteTree_,a);let E=k4(d,e,t,y,l,p);if(!g&&!c&&!s){const S=TR(d,e);E=E.concat(W4(n,e,S))}return E}function Dy(n,e,t){const a=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(e,(c,d)=>{const p=Tn(c,e),g=zr(d,p);if(g)return g});return fR(a,e,l,t,!0)}function G4(n,e){const t=e._path;let s=null;n.syncPointTree_.foreachOnPath(t,(g,y)=>{const E=Tn(g,t);s=s||zr(y,E)});let a=n.syncPointTree_.get(t);a?s=s||zr(a,We()):(a=new yR,n.syncPointTree_=n.syncPointTree_.set(t,a));const l=s!=null,c=l?new Wr(s,!0,!1):null,d=Yd(n.pendingWriteTree_,e._path),p=vR(a,e,d,l?c.getNode():Te.EMPTY_NODE,l);return I4(p)}function zc(n,e){return AR(e,n.syncPointTree_,null,Yd(n.pendingWriteTree_,We()))}function AR(n,e,t,s){if(ze(n.path))return RR(n,e,t,s);{const a=e.get(We());t==null&&a!=null&&(t=zr(a,We()));let l=[];const c=He(n.path),d=n.operationForChild(c),p=e.children.get(c);if(p&&d){const g=t?t.getImmediateChild(c):null,y=dR(s,c);l=l.concat(AR(d,p,g,y))}return a&&(l=l.concat(Oy(a,n,s,t))),l}}function RR(n,e,t,s){const a=e.get(We());t==null&&a!=null&&(t=zr(a,We()));let l=[];return e.children.inorderTraversal((c,d)=>{const p=t?t.getImmediateChild(c):null,g=dR(s,c),y=n.operationForChild(c);y&&(l=l.concat(RR(y,d,p,g)))}),a&&(l=l.concat(Oy(a,n,s,t))),l}function IR(n,e){const t=e.query,s=Ec(n,t);return{hashFn:()=>(R4(e)||Te.EMPTY_NODE).hash(),onComplete:a=>{if(a==="ok")return s?F4(n,t._path,s):B4(n,t._path);{const l=qV(a,t);return CR(n,t,null,l)}}}}function Ec(n,e){const t=Qd(e);return n.queryToTagMap.get(t)}function Qd(n){return n._path.toString()+"$"+n._queryIdentifier}function My(n,e){return n.tagToQueryMap.get(e)}function xy(n){const e=n.indexOf("$");return ae(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new ct(n.substr(0,e))}}function Py(n,e,t){const s=n.syncPointTree_.get(e);ae(s,"Missing sync point for query tag that we're tracking");const a=Yd(n.pendingWriteTree_,e);return Oy(s,t,a,null)}function Y4(n){return n.fold((e,t,s)=>{if(t&&Xr(t))return[Kd(t)];{let a=[];return t&&(a=ER(t)),Mn(s,(l,c)=>{a=a.concat(c)}),a}})}function ec(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(U4())(n._repo,n._path):n}function K4(n,e){for(let t=0;t<e.length;++t){const s=e[t];if(!s._queryParams.loadsAllData()){const a=Qd(s),l=n.queryToTagMap.get(a);n.queryToTagMap.delete(a),n.tagToQueryMap.delete(l)}}}function Q4(){return z4++}function W4(n,e,t){const s=e._path,a=Ec(n,e),l=IR(n,t),c=n.listenProvider_.startListening(ec(e),a,l.hashFn,l.onComplete),d=n.syncPointTree_.subtree(s);if(a)ae(!Xr(d.value),"If we're adding a query, it shouldn't be shadowed");else{const p=d.fold((g,y,E)=>{if(!ze(g)&&y&&Xr(y))return[Kd(y).query];{let S=[];return y&&(S=S.concat(ER(y).map(R=>R.query))),Mn(E,(R,k)=>{S=S.concat(k)}),S}});for(let g=0;g<p.length;++g){const y=p[g];n.listenProvider_.stopListening(ec(y),Ec(n,y))}}return c}class ky{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new ky(t)}node(){return this.node_}}class Vy{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Gt(this.path_,e);return new Vy(this.syncTree_,t)}node(){return Dy(this.syncTree_,this.path_)}}const X4=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},kw=function(n,e,t){if(!n||typeof n!="object")return n;if(ae(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return $4(n[".sv"],e,t);if(typeof n[".sv"]=="object")return J4(n[".sv"],e);ae(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},$4=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:ae(!1,"Unexpected server value: "+n)}},J4=function(n,e,t){n.hasOwnProperty("increment")||ae(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const s=n.increment;typeof s!="number"&&ae(!1,"Unexpected increment value: "+s);const a=e.node();if(ae(a!==null&&typeof a<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return s;const c=a.getValue();return typeof c!="number"?s:c+s},Z4=function(n,e,t,s){return Ly(e,new Vy(t,n),s)},NR=function(n,e,t){return Ly(n,new ky(e),t)};function Ly(n,e,t){const s=n.getPriority().val(),a=kw(s,e.getImmediateChild(".priority"),t);let l;if(n.isLeafNode()){const c=n,d=kw(c.getValue(),e,t);return d!==c.getValue()||a!==c.getPriority().val()?new Xt(d,Zt(a)):n}else{const c=n;return l=c,a!==c.getPriority().val()&&(l=l.updatePriority(new Xt(a))),c.forEachChild(St,(d,p)=>{const g=Ly(p,e.getImmediateChild(d),t);g!==p&&(l=l.updateImmediateChild(d,g))}),l}}class Uy{constructor(e="",t=null,s={children:{},childCount:0}){this.name=e,this.parent=t,this.node=s}}function zy(n,e){let t=e instanceof ct?e:new ct(e),s=n,a=He(t);for(;a!==null;){const l=el(s.node.children,a)||{children:{},childCount:0};s=new Uy(a,s,l),t=ht(t),a=He(t)}return s}function wl(n){return n.node.value}function OR(n,e){n.node.value=e,h_(n)}function DR(n){return n.node.childCount>0}function e3(n){return wl(n)===void 0&&!DR(n)}function Wd(n,e){Mn(n.node.children,(t,s)=>{e(new Uy(t,n,s))})}function MR(n,e,t,s){t&&e(n),Wd(n,a=>{MR(a,e,!0)})}function t3(n,e,t){let s=n.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function jc(n){return new ct(n.parent===null?n.name:jc(n.parent)+"/"+n.name)}function h_(n){n.parent!==null&&n3(n.parent,n.name,n)}function n3(n,e,t){const s=e3(t),a=Gs(n.node.children,e);s&&a?(delete n.node.children[e],n.node.childCount--,h_(n)):!s&&!a&&(n.node.children[e]=t.node,n.node.childCount++,h_(n))}const i3=/[\[\].#$\/\u0000-\u001F\u007F]/,s3=/[\[\].#$\u0000-\u001F\u007F]/,Rg=10*1024*1024,xR=function(n){return typeof n=="string"&&n.length!==0&&!i3.test(n)},PR=function(n){return typeof n=="string"&&n.length!==0&&!s3.test(n)},r3=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),PR(n)},a3=function(n,e,t,s){jy(C_(n,"value"),e,t)},jy=function(n,e,t){const s=t instanceof ct?new wL(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Da(s));if(typeof e=="function")throw new Error(n+"contains a function "+Da(s)+" with contents = "+e.toString());if(NA(e))throw new Error(n+"contains "+e.toString()+" "+Da(s));if(typeof e=="string"&&e.length>Rg/3&&Ad(e)>Rg)throw new Error(n+"contains a string greater than "+Rg+" utf8 bytes "+Da(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let a=!1,l=!1;if(Mn(e,(c,d)=>{if(c===".value")a=!0;else if(c!==".priority"&&c!==".sv"&&(l=!0,!xR(c)))throw new Error(n+" contains an invalid key ("+c+") "+Da(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);CL(s,c),jy(n,d,s),bL(s)}),a&&l)throw new Error(n+' contains ".value" child '+Da(s)+" in addition to actual children.")}},kR=function(n,e,t,s){if(!PR(t))throw new Error(C_(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},o3=function(n,e,t,s){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),kR(n,e,t)},l3=function(n,e){if(He(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},u3=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!xR(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!r3(t))throw new Error(C_(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class c3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function VR(n,e){let t=null;for(let s=0;s<e.length;s++){const a=e[s],l=a.getPath();t!==null&&!ZA(l,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:l}),t.events.push(a)}t&&n.eventLists_.push(t)}function as(n,e,t){VR(n,t),h3(n,s=>Si(s,e)||Si(e,s))}function h3(n,e){n.recursionDepth_++;let t=!0;for(let s=0;s<n.eventLists_.length;s++){const a=n.eventLists_[s];if(a){const l=a.path;e(l)?(f3(n.eventLists_[s]),n.eventLists_[s]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function f3(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const s=t.getEventRunner();Xu&&gn("event: "+t.toString()),Sl(s)}}}const d3="repo_interrupt",m3=25;class p3{constructor(e,t,s,a){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=s,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new c3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=dd(),this.transactionQueueTree_=new Uy,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function g3(n,e,t){if(n.stats_=vy(n.repoInfo_),n.forceRestClient_||QV())n.server_=new fd(n.repoInfo_,(s,a,l,c)=>{Vw(n,s,a,l,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Lw(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ht(t)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}n.persistentConnection_=new ks(n.repoInfo_,e,(s,a,l,c)=>{Vw(n,s,a,l,c)},s=>{Lw(n,s)},s=>{y3(n,s)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(s=>{n.server_.refreshAuthToken(s)}),n.appCheckProvider_.addTokenChangeListener(s=>{n.server_.refreshAppCheckToken(s.token)}),n.statsReporter_=ZV(n.repoInfo_,()=>new $L(n.stats_,n.server_)),n.infoData_=new YL,n.infoSyncTree_=new Pw({startListening:(s,a,l,c)=>{let d=[];const p=n.infoData_.getNode(s._path);return p.isEmpty()||(d=Uc(n.infoSyncTree_,s._path,p),setTimeout(()=>{c("ok")},0)),d},stopListening:()=>{}}),Fy(n,"connected",!1),n.serverSyncTree_=new Pw({startListening:(s,a,l,c)=>(n.server_.listen(s,l,a,(d,p)=>{const g=c(d,p);as(n.eventQueue_,s._path,g)}),[]),stopListening:(s,a)=>{n.server_.unlisten(s,a)}})}function _3(n){const t=n.infoData_.getNode(new ct(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function By(n){return X4({timestamp:_3(n)})}function Vw(n,e,t,s,a){n.dataUpdateCount++;const l=new ct(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(a)if(s){const p=Hf(t,g=>Zt(g));c=H4(n.serverSyncTree_,l,p,a)}else{const p=Zt(t);c=bR(n.serverSyncTree_,l,p,a)}else if(s){const p=Hf(t,g=>Zt(g));c=j4(n.serverSyncTree_,l,p)}else{const p=Zt(t);c=Uc(n.serverSyncTree_,l,p)}let d=l;c.length>0&&(d=$d(n,l)),as(n.eventQueue_,d,c)}function Lw(n,e){Fy(n,"connected",e),e===!1&&T3(n)}function y3(n,e){Mn(e,(t,s)=>{Fy(n,t,s)})}function Fy(n,e,t){const s=new ct("/.info/"+e),a=Zt(t);n.infoData_.updateSnapshot(s,a);const l=Uc(n.infoSyncTree_,s,a);as(n.eventQueue_,s,l)}function LR(n){return n.nextWriteId_++}function v3(n,e,t){const s=G4(n.serverSyncTree_,e);return s!=null?Promise.resolve(s):n.server_.get(e).then(a=>{const l=Zt(a).withIndex(e._queryParams.getIndex());q4(n.serverSyncTree_,e,t,!0);let c;if(e._queryParams.loadsAllData())c=Uc(n.serverSyncTree_,e._path,l);else{const d=Ec(n.serverSyncTree_,e);c=bR(n.serverSyncTree_,e._path,l,d)}return as(n.eventQueue_,e._path,c),CR(n.serverSyncTree_,e,t,null,!0),l},a=>(Xd(n,"get for query "+Ht(e)+" failed: "+a),Promise.reject(new Error(a))))}function E3(n,e,t,s,a){Xd(n,"set",{path:e.toString(),value:t,priority:s});const l=By(n),c=Zt(t,s),d=Dy(n.serverSyncTree_,e),p=NR(c,d,l),g=LR(n),y=wR(n.serverSyncTree_,e,p,g,!0);VR(n.eventQueue_,y),n.server_.put(e.toString(),c.val(!0),(S,R)=>{const k=S==="ok";k||Dn("set at "+e+" failed: "+S);const K=Pa(n.serverSyncTree_,g,!k);as(n.eventQueue_,e,K),w3(n,a,S,R)});const E=FR(n,e);$d(n,E),as(n.eventQueue_,E,[])}function T3(n){Xd(n,"onDisconnectEvents");const e=By(n),t=dd();a_(n.onDisconnect_,We(),(a,l)=>{const c=Z4(a,l,n.serverSyncTree_,e);oR(t,a,c)});let s=[];a_(t,We(),(a,l)=>{s=s.concat(Uc(n.serverSyncTree_,a,l));const c=FR(n,a);$d(n,c)}),n.onDisconnect_=dd(),as(n.eventQueue_,We(),s)}function S3(n){n.persistentConnection_&&n.persistentConnection_.interrupt(d3)}function Xd(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),gn(t,...e)}function w3(n,e,t,s){e&&Sl(()=>{if(t==="ok")e(null);else{const a=(t||"error").toUpperCase();let l=a;s&&(l+=": "+s);const c=new Error(l);c.code=a,e(c)}})}function UR(n,e,t){return Dy(n.serverSyncTree_,e,t)||Te.EMPTY_NODE}function Hy(n,e=n.transactionQueueTree_){if(e||Jd(n,e),wl(e)){const t=jR(n,e);ae(t.length>0,"Sending zero length transaction queue"),t.every(a=>a.status===0)&&C3(n,jc(e),t)}else DR(e)&&Wd(e,t=>{Hy(n,t)})}function C3(n,e,t){const s=t.map(g=>g.currentWriteId),a=UR(n,e,s);let l=a;const c=a.hash();for(let g=0;g<t.length;g++){const y=t[g];ae(y.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),y.status=1,y.retryCount++;const E=Tn(e,y.path);l=l.updateChild(E,y.currentOutputSnapshotRaw)}const d=l.val(!0),p=e;n.server_.put(p.toString(),d,g=>{Xd(n,"transaction put response",{path:p.toString(),status:g});let y=[];if(g==="ok"){const E=[];for(let S=0;S<t.length;S++)t[S].status=2,y=y.concat(Pa(n.serverSyncTree_,t[S].currentWriteId)),t[S].onComplete&&E.push(()=>t[S].onComplete(null,!0,t[S].currentOutputSnapshotResolved)),t[S].unwatcher();Jd(n,zy(n.transactionQueueTree_,e)),Hy(n,n.transactionQueueTree_),as(n.eventQueue_,e,y);for(let S=0;S<E.length;S++)Sl(E[S])}else{if(g==="datastale")for(let E=0;E<t.length;E++)t[E].status===3?t[E].status=4:t[E].status=0;else{Dn("transaction at "+p.toString()+" failed: "+g);for(let E=0;E<t.length;E++)t[E].status=4,t[E].abortReason=g}$d(n,e)}},c)}function $d(n,e){const t=zR(n,e),s=jc(t),a=jR(n,t);return b3(n,a,s),s}function b3(n,e,t){if(e.length===0)return;const s=[];let a=[];const c=e.filter(d=>d.status===0).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const p=e[d],g=Tn(t,p.path);let y=!1,E;if(ae(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),p.status===4)y=!0,E=p.abortReason,a=a.concat(Pa(n.serverSyncTree_,p.currentWriteId,!0));else if(p.status===0)if(p.retryCount>=m3)y=!0,E="maxretry",a=a.concat(Pa(n.serverSyncTree_,p.currentWriteId,!0));else{const S=UR(n,p.path,c);p.currentInputSnapshot=S;const R=e[d].update(S.val());if(R!==void 0){jy("transaction failed: Data returned ",R,p.path);let k=Zt(R);typeof R=="object"&&R!=null&&Gs(R,".priority")||(k=k.updatePriority(S.getPriority()));const q=p.currentWriteId,ne=By(n),ee=NR(k,S,ne);p.currentOutputSnapshotRaw=k,p.currentOutputSnapshotResolved=ee,p.currentWriteId=LR(n),c.splice(c.indexOf(q),1),a=a.concat(wR(n.serverSyncTree_,p.path,ee,p.currentWriteId,p.applyLocally)),a=a.concat(Pa(n.serverSyncTree_,q,!0))}else y=!0,E="nodata",a=a.concat(Pa(n.serverSyncTree_,p.currentWriteId,!0))}as(n.eventQueue_,t,a),a=[],y&&(e[d].status=2,(function(S){setTimeout(S,Math.floor(0))})(e[d].unwatcher),e[d].onComplete&&(E==="nodata"?s.push(()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot)):s.push(()=>e[d].onComplete(new Error(E),!1,null))))}Jd(n,n.transactionQueueTree_);for(let d=0;d<s.length;d++)Sl(s[d]);Hy(n,n.transactionQueueTree_)}function zR(n,e){let t,s=n.transactionQueueTree_;for(t=He(e);t!==null&&wl(s)===void 0;)s=zy(s,t),e=ht(e),t=He(e);return s}function jR(n,e){const t=[];return BR(n,e,t),t.sort((s,a)=>s.order-a.order),t}function BR(n,e,t){const s=wl(e);if(s)for(let a=0;a<s.length;a++)t.push(s[a]);Wd(e,a=>{BR(n,a,t)})}function Jd(n,e){const t=wl(e);if(t){let s=0;for(let a=0;a<t.length;a++)t[a].status!==2&&(t[s]=t[a],s++);t.length=s,OR(e,t.length>0?t:void 0)}Wd(e,s=>{Jd(n,s)})}function FR(n,e){const t=jc(zR(n,e)),s=zy(n.transactionQueueTree_,e);return t3(s,a=>{Ig(n,a)}),Ig(n,s),MR(s,a=>{Ig(n,a)}),t}function Ig(n,e){const t=wl(e);if(t){const s=[];let a=[],l=-1;for(let c=0;c<t.length;c++)t[c].status===3||(t[c].status===1?(ae(l===c-1,"All SENT items should be at beginning of queue."),l=c,t[c].status=3,t[c].abortReason="set"):(ae(t[c].status===0,"Unexpected transaction status in abort"),t[c].unwatcher(),a=a.concat(Pa(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&s.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));l===-1?OR(e,void 0):t.length=l+1,as(n.eventQueue_,jc(e),a);for(let c=0;c<s.length;c++)Sl(s[c])}}function A3(n){let e="";const t=n.split("/");for(let s=0;s<t.length;s++)if(t[s].length>0){let a=t[s];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch{}e+="/"+a}return e}function R3(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const s=t.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Dn(`Invalid query segment '${t}' in query '${n}'`)}return e}const Uw=function(n,e){const t=I3(n),s=t.namespace;t.domain==="firebase.com"&&Hs(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&t.domain!=="localhost"&&Hs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||zV();const a=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new BA(t.host,t.secure,s,a,e,"",s!==t.subdomain),path:new ct(t.pathString)}},I3=function(n){let e="",t="",s="",a="",l="",c=!0,d="https",p=443;if(typeof n=="string"){let g=n.indexOf("//");g>=0&&(d=n.substring(0,g-1),n=n.substring(g+2));let y=n.indexOf("/");y===-1&&(y=n.length);let E=n.indexOf("?");E===-1&&(E=n.length),e=n.substring(0,Math.min(y,E)),y<E&&(a=A3(n.substring(y,E)));const S=R3(n.substring(Math.min(n.length,E)));g=e.indexOf(":"),g>=0?(c=d==="https"||d==="wss",p=parseInt(e.substring(g+1),10)):g=e.length;const R=e.slice(0,g);if(R.toLowerCase()==="localhost")t="localhost";else if(R.split(".").length<=2)t=R;else{const k=e.indexOf(".");s=e.substring(0,k).toLowerCase(),t=e.substring(k+1),l=s}"ns"in S&&(l=S.ns)}return{host:e,port:p,domain:t,subdomain:s,secure:c,scheme:d,pathString:a,namespace:l}};class N3{constructor(e,t,s,a){this.eventType=e,this.eventRegistration=t,this.snapshot=s,this.prevName=a}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ht(this.snapshot.exportVal())}}class O3{constructor(e,t,s){this.eventRegistration=e,this.error=t,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class D3{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return ae(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class qy{constructor(e,t,s,a){this._repo=e,this._path=t,this._queryParams=s,this._orderByCalled=a}get key(){return ze(this._path)?null:XA(this._path)}get ref(){return new Ys(this._repo,this._path)}get _queryIdentifier(){const e=ww(this._queryParams),t=_y(e);return t==="{}"?"default":t}get _queryObject(){return ww(this._queryParams)}isEqual(e){if(e=cn(e),!(e instanceof qy))return!1;const t=this._repo===e._repo,s=ZA(this._path,e._path),a=this._queryIdentifier===e._queryIdentifier;return t&&s&&a}toJSON(){return this.toString()}toString(){return this._repo.toString()+SL(this._path)}}class Ys extends qy{constructor(e,t){super(e,t,new Cy,!1)}get parent(){const e=JA(this._path);return e===null?null:new Ys(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Tc{constructor(e,t,s){this._node=e,this.ref=t,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new ct(e),s=f_(this.ref,e);return new Tc(this._node.getChild(t),s,St)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,a)=>e(new Tc(a,f_(this.ref,s),St)))}hasChild(e){const t=new ct(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ns(n,e){return n=cn(n),n._checkNotDeleted("ref"),e!==void 0?f_(n._root,e):n._root}function f_(n,e){return n=cn(n),He(n._path)===null?o3("child","path",e):kR("child","path",e),new Ys(n._repo,Gt(n._path,e))}function Gy(n,e){n=cn(n),l3("set",n._path),a3("set",e,n._path);const t=new bd;return E3(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function Va(n){n=cn(n);const e=new D3(()=>{}),t=new Yy(e);return v3(n._repo,n,t).then(s=>new Tc(s,new Ys(n._repo,n._path),n._queryParams.getIndex()))}class Yy{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const s=t._queryParams.getIndex();return new N3("value",this,new Tc(e.snapshotNode,new Ys(t._repo,t._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new O3(this,e,t):null}matches(e){return e instanceof Yy?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}M4(Ys);L4(Ys);const M3="FIREBASE_DATABASE_EMULATOR_HOST",d_={};let x3=!1;function P3(n,e,t,s){const a=e.lastIndexOf(":"),l=e.substring(0,a),c=$r(l);n.repoInfo_=new BA(e,c,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),s&&(n.authTokenProvider_=s)}function k3(n,e,t,s,a){let l=s||n.options.databaseURL;l===void 0&&(n.options.projectId||Hs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),gn("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let c=Uw(l,a),d=c.repoInfo,p;typeof process<"u"&&rw&&(p=rw[M3]),p?(l=`http://${p}?ns=${d.namespace}`,c=Uw(l,a),d=c.repoInfo):c.repoInfo.secure;const g=new XV(n.name,n.options,e);u3("Invalid Firebase Database URL",c),ze(c.path)||Hs("Database URL must point to the root of a Firebase Database (not including a child path).");const y=L3(d,n,g,new WV(n,t));return new U3(y,n)}function V3(n,e){const t=d_[e];(!t||t[n.key]!==n)&&Hs(`Database ${e}(${n.repoInfo_}) has already been deleted.`),S3(n),delete t[n.key]}function L3(n,e,t,s){let a=d_[e.name];a||(a={},d_[e.name]=a);let l=a[n.toURLString()];return l&&Hs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new p3(n,x3,t,s),a[n.toURLString()]=l,l}class U3{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(g3(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ys(this._repo,We())),this._rootInternal}_delete(){return this._rootInternal!==null&&(V3(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Hs("Cannot call "+e+" on a deleted database.")}}function z3(n=A_(),e){const t=Id(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const s=oC("database");s&&j3(t,...s)}return t}function j3(n,e,t,s={}){n=cn(n),n._checkNotDeleted("useEmulator");const a=`${e}:${t}`,l=n._repoInternal;if(n._instanceStarted){if(a===n._repoInternal.repoInfo_.host&&jr(s,l.repoInfo_.emulatorOptions))return;Hs("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let c;if(l.repoInfo_.nodeAdmin)s.mockUserToken&&Hs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new zf(zf.OWNER);else if(s.mockUserToken){const d=typeof s.mockUserToken=="string"?s.mockUserToken:cC(s.mockUserToken,n.app.options.projectId);c=new zf(d)}$r(e)&&(T_(e),S_("Database",!0)),P3(l,a,s,c)}function B3(n){xV(Ya),La(new Br("database",(e,{instanceIdentifier:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),l=e.getProvider("app-check-internal");return k3(s,a,l,t)},"PUBLIC").setMultipleInstances(!0)),$i(aw,ow,n),$i(aw,ow,"esm2020")}ks.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};ks.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};B3();const F3={apiKey:"AIzaSyDlpnsAM7VzcUVUB5Dfln9iOdWIGQtmGso",authDomain:"skillx-7b55c.firebaseapp.com",projectId:"skillx-7b55c",storageBucket:"skillx-7b55c.firebasestorage.app",messagingSenderId:"805907988145",appId:"1:805907988145:web:4c5c06e3ce8027a118ac90",measurementId:"G-4JP775V103"},Ky=pC(F3),fl=f2(Ky),dl=gV(Ky),is=z3(Ky),HR=z.createContext(),H3=({children:n})=>{const[e,t]=z.useState([]),[s,a]=z.useState([]),[l,c]=z.useState([]),d=async()=>{try{const E=(await Va(ns(is,"Students"))).val();if(!E){t([]);return}const S=Object.keys(E).map(R=>({id:R,...E[R]}));t(S)}catch(y){console.log(y),alert("Services currently unavailable, please try again later")}},p=async()=>{try{const E=(await Va(ns(is,"Organizations"))).val();if(!E){a([]);return}const S=Object.keys(E).map(R=>({id:R,...E[R]}));a(S)}catch(y){console.log(y),alert("Services currently unavailable, please try again later")}},g=async()=>{try{const E=(await Va(ns(is,"Mentors"))).val();if(!E){c([]);return}const S=Object.keys(E).map(R=>({id:R,...E[R]}));c(S)}catch(y){console.log(y),alert("Services currently unavailable, please try again later")}};return z.useEffect(()=>{d(),p(),g()},[]),V.jsx(HR.Provider,{value:{studentData:e,OrganizationData:s,MentorData:l},children:n})},qR=()=>{const[n,e]=z.useState(""),[t,s]=z.useState(""),{studentData:a,OrganizationData:l,MentorData:c}=z.useContext(HR);function d(y){y.preventDefault(),console.log(a,l,c);try{const E=a?.find(k=>k.id==n&&k.passwordId==t),S=l?.find(k=>k.id==n&&k.passwordId==t),R=c?.find(k=>k.id==n.trim()&&k.passwordId==t.trim());if(E){localStorage.setItem("loggedInUserSkillExchange",JSON.stringify({...E,role:"student"})),alert("Logging in as student..."),window.location.reload();return}else if(S){localStorage.setItem("loggedInUserSkillExchange",JSON.stringify({...S,role:"organization"})),alert("Logging in as organization..."),window.location.reload();return}else if(R){console.log("mentor"),localStorage.setItem("loggedInUserSkillExchange",JSON.stringify({...R,role:"mentor"})),alert("Logging in as mentor..."),window.location.reload();return}else alert("User not found")}catch(E){alert(E)}}function p(y){e(y.target.value)}function g(y){s(y.target.value)}return V.jsx(V.Fragment,{children:V.jsxs("div",{className:"login-page",children:[V.jsx("h1",{children:"Skill Exchange Login"}),V.jsxs("form",{className:"login-page-content",autoComplete:"off",onSubmit:y=>{d(y)},children:[V.jsx("img",{src:wd,alt:"skillx logo"}),V.jsx("input",{type:"text",placeholder:"Enter user id",autoComplete:"off",required:!0,onChange:y=>{p(y)},value:n}),V.jsx("input",{type:"text",placeholder:"Enter your password",autoComplete:"off",required:!0,onChange:y=>{g(y)},value:t}),V.jsxs("h3",{children:["Don't have any account? ",V.jsx(nc,{to:"/register",children:"RegisterNow"})]}),V.jsx("button",{type:"submit",children:"Login"})]}),V.jsx("h3",{children:V.jsx(nc,{children:"Forgotten Password"})})]})})},q3=()=>{function n(){return V.jsx(qR,{})}return V.jsx(V.Fragment,{children:V.jsxs("nav",{className:"navLanding",children:[V.jsx("div",{className:"logo",children:V.jsx("img",{src:wd,alt:""})}),V.jsx("div",{className:"cta-nav",children:V.jsxs(nc,{to:"/login",children:[" ",V.jsxs("button",{className:"login-cta",onClick:n,children:[V.jsx("i",{className:"fa-solid fa-arrow-right-to-bracket"}),"Login"]})]})})]})})},G3="/skill-exchange/assets/hero_sec_img-xu7NUY8L.png",Y3="/skill-exchange/assets/hero_background-DbhdSA7v.png",K3=()=>V.jsx(V.Fragment,{children:V.jsxs("section",{class:"hero-sec",children:[V.jsx("img",{src:Y3,alt:"bg-hero",class:"hero-bg"}),V.jsxs("div",{class:"hero-left",children:[V.jsx("h1",{children:"Connect, Learn, Collaborate, Grow with SkillX"}),V.jsx("p",{children:"Empowering students to showcase their skills, connect with mentors, and work on real Organization projects  all in one smart AI-driven ecosystem."}),V.jsxs("div",{class:"btn-hero-left",children:[V.jsxs("button",{class:"login-cta",onclick:"window.location.href='roleReg.html'",children:[V.jsx("i",{class:"fa-solid fa-arrow-right-to-bracket"}),"Login"]}),V.jsx("button",{class:"learn-btn-hero",children:"Learn More"})]})]}),V.jsx("div",{class:"hero-right",children:V.jsx("img",{src:G3,alt:"SkillX related image"})})]})}),Q3=()=>V.jsxs("div",{children:[V.jsx(q3,{}),V.jsx(K3,{})]});class Bc{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const W3=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},ln={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:W3()},Qy=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},X3=(n,e="https://api.emailjs.com")=>{if(!n)return;const t=Qy(n);ln.publicKey=t.publicKey,ln.blockHeadless=t.blockHeadless,ln.storageProvider=t.storageProvider,ln.blockList=t.blockList,ln.limitRate=t.limitRate,ln.origin=t.origin||e},GR=async(n,e,t={})=>{const s=await fetch(ln.origin+n,{method:"POST",headers:t,body:e}),a=await s.text(),l=new Bc(s.status,a);if(s.ok)return l;throw l},YR=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},$3=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},KR=n=>n.webdriver||!n.languages||n.languages.length===0,QR=()=>new Bc(451,"Unavailable For Headless Browser"),J3=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},Z3=n=>!n.list?.length||!n.watchVariable,e6=(n,e)=>n instanceof FormData?n.get(e):n[e],WR=(n,e)=>{if(Z3(n))return!1;J3(n.list,n.watchVariable);const t=e6(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},XR=()=>new Bc(403,"Forbidden"),t6=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},n6=async(n,e,t)=>{const s=Number(await t.get(n)||0);return e-Date.now()+s},$R=async(n,e,t)=>{if(!e.throttle||!t)return!1;t6(e.throttle,e.id);const s=e.id||n;return await n6(s,e.throttle,t)>0?!0:(await t.set(s,Date.now().toString()),!1)},JR=()=>new Bc(429,"Too Many Requests"),i6=async(n,e,t,s)=>{const a=Qy(s),l=a.publicKey||ln.publicKey,c=a.blockHeadless||ln.blockHeadless,d=a.storageProvider||ln.storageProvider,p={...ln.blockList,...a.blockList},g={...ln.limitRate,...a.limitRate};return c&&KR(navigator)?Promise.reject(QR()):(YR(l,n,e),$3(t),t&&WR(p,t)?Promise.reject(XR()):await $R(location.pathname,g,d)?Promise.reject(JR()):GR("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:l,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},s6=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},r6=n=>typeof n=="string"?document.querySelector(n):n,a6=async(n,e,t,s)=>{const a=Qy(s),l=a.publicKey||ln.publicKey,c=a.blockHeadless||ln.blockHeadless,d=ln.storageProvider||a.storageProvider,p={...ln.blockList,...a.blockList},g={...ln.limitRate,...a.limitRate};if(c&&KR(navigator))return Promise.reject(QR());const y=r6(t);YR(l,n,e),s6(y);const E=new FormData(y);return WR(p,E)?Promise.reject(XR()):await $R(location.pathname,g,d)?Promise.reject(JR()):(E.append("lib_version","4.4.1"),E.append("service_id",n),E.append("template_id",e),E.append("user_id",l),GR("/api/v1.0/email/send-form",E))},Vs={init:X3,send:i6,sendForm:a6,EmailJSResponseStatus:Bc},Zd=()=>V.jsx(V.Fragment,{children:V.jsxs("div",{className:"loader-main",children:[V.jsx("div",{className:"bg-main-loader"}),V.jsx("div",{className:"loader"})]})}),o6=({role:n})=>{const[e,t]=z.useState(""),[s,a]=z.useState(""),[l,c]=z.useState(""),[d,p]=z.useState(""),[g,y]=z.useState(""),[E,S]=z.useState(""),[R,k]=z.useState(!1),[K,q]=z.useState(null),[ne,ee]=z.useState(!1),[re,Ee]=z.useState(""),[Ae,Re]=z.useState(!1),[N,b]=z.useState(!1),[A,P]=z.useState();z.useEffect(()=>{Vs.init("O1eqMF__l75Le_ffM")},[]);const D=()=>{window.recaptchaVerifier||(window.recaptchaVerifier=new k_(fl,"recaptcha-container",{size:"invisible",callback:()=>console.log("reCAPTCHA solved")}),window.recaptchaVerifier.render())};async function U(){if(!s)return alert("Enter email");k(!0);const ie=Math.floor(1e5+Math.random()*9e5).toString();Ee(ie),await gy(ll(dl,"emailOtps",s),{otp:ie,timestamp:Date.now()}),Vs.send("service_rjgtrdr","template_vru0qpj",{to_email:s,name:e,otp:ie}).then(()=>{ee(!0),alert("Email OTP sent!")}).catch(ce=>alert("Email send error: "+ce.text)),k(!1)}async function I(){if(!g)return alert("Enter OTP");k(!0);const ie=await py(ll(dl,"emailOtps",s));if(!ie.exists())return alert("No OTP found for this email");ie.data().otp===g?(Re(!0),alert("Email verified!")):alert("Incorrect OTP"),k(!1)}function Ze(){if(!l)return alert("Enter mobile number");k(!0),D();const ie=window.recaptchaVerifier;V_(fl,l,ie).then(ce=>{q(ce),alert("OTP sent successfully!")}).catch(ce=>{console.error(ce),alert("Error sending OTP: "+ce.message)}),k(!1)}function De(){if(!K)return alert("Please send OTP first");k(!0),K.confirm(E).then(ie=>{b(!0),alert("Phone verified successfully!"),console.log(ie.user),window.recaptchaVerifier&&window.recaptchaVerifier.clear()}).catch(ie=>{console.error(ie),alert("Invalid OTP")}),k(!1)}async function X(ie){if(ie.preventDefault(),k(!0),!Ae||!N)return k(!1),alert("Verify both email & mobile first");const ce={name:e,email:s,mobileNum:l,passwordId:d},Pe=(await Va(ns(is,"Students"))).val();if(Pe){const W=Object.values(Pe),le=W.some(_e=>_e.email===s),ge=W.some(_e=>_e.mobileNum===l);if(le)return k(!1),alert("Email already exists. Try another one.");if(ge)return k(!1),alert("Mobile number already exists. Try another one.")}const M=Pe?Object.keys(Pe).length:0,H="STU"+Math.floor(1e3+Math.random()*9e3)+(M+1);await Gy(ns(is,`Students/${H}`),ce).then(()=>{alert("Registered Successfully "),Vs.send("service_rjgtrdr","template_l3c853f",{to_email:s,userId:H,password:d,name:e}).then(()=>alert("Credentials sent to email"))}).catch(W=>console.log(W)),t(""),a(""),c(""),p(""),y(""),S(""),k(!1)}return V.jsxs("form",{className:"registerForm",onSubmit:X,children:[V.jsxs("h3",{children:["Registering as ",n]}),V.jsx("input",{type:"text",placeholder:"Enter Your Name",value:e,onChange:ie=>t(ie.target.value),required:!0}),V.jsxs("div",{className:"send-otp",children:[V.jsx("input",{type:"email",placeholder:"Enter Your Email",value:s,onChange:ie=>a(ie.target.value),required:!0}),V.jsx("button",{type:"button",onClick:U,children:"Send OTP"})]}),V.jsxs("div",{className:"verify-otp",children:[V.jsx("input",{type:"text",placeholder:"Enter Email OTP",value:g,onChange:ie=>y(ie.target.value),required:!0}),V.jsx("button",{type:"button",onClick:I,children:"Verify OTP"})]}),V.jsxs("div",{className:"send-otp",children:[V.jsx("input",{type:"text",placeholder:"Enter Mobile",value:l,onChange:ie=>c(ie.target.value),required:!0}),V.jsx("button",{id:"sendMobileOtpBtn",type:"button",onClick:Ze,children:"Send OTP"})]}),V.jsx("div",{id:"recaptcha-container"}),V.jsxs("div",{className:"verify-otp",children:[V.jsx("input",{type:"text",placeholder:"Enter Mobile OTP",value:E,onChange:ie=>S(ie.target.value),required:!0}),V.jsx("button",{type:"button",onClick:De,children:"Verify OTP"})]}),V.jsx("input",{type:"password",placeholder:"Enter Password",value:d,onChange:ie=>p(ie.target.value),required:!0}),V.jsx("button",{type:"submit",children:"Submit"}),R==!0&&V.jsx(Zd,{})]})},l6=({role:n})=>{const[e,t]=z.useState(""),[s,a]=z.useState(""),[l,c]=z.useState(""),[d,p]=z.useState(""),[g,y]=z.useState(""),[E,S]=z.useState(""),[R,k]=z.useState(""),[K,q]=z.useState(""),[ne,ee]=z.useState(!1);function re(W){t(W.target.value)}function Ee(W){a(W.target.value)}function Ae(W){S(W.target.value)}function Re(W){c(W.target.value)}const[N,b]=z.useState(null),[A,P]=z.useState(!1),[D,U]=z.useState(""),[I,Ze]=z.useState(!1),[De,X]=z.useState(!1);z.useEffect(()=>{Vs.init("O1eqMF__l75Le_ffM")},[]);const ie=()=>{window.recaptchaVerifier||(window.recaptchaVerifier=new k_(fl,"recaptcha-container",{size:"invisible",callback:()=>console.log("reCAPTCHA solved")}),window.recaptchaVerifier.render())};async function ce(){if(!d)return alert("Enter email");ee(!0);const W=Math.floor(1e5+Math.random()*9e5).toString();U(W),await gy(ll(dl,"emailOtps",d),{otp:W,timestamp:Date.now()}),Vs.send("service_rjgtrdr","template_vru0qpj",{to_email:d,name:e,otp:W}).then(()=>{P(!0),alert("Email OTP sent!")}).catch(le=>alert("Email send error: "+le.text)),ee(!1)}async function xe(){if(!R)return alert("Enter OTP");ee(!0);const W=await py(ll(dl,"emailOtps",d));if(!W.exists())return alert("No OTP found for this email");W.data().otp===R?(Ze(!0),alert("Email verified!")):alert("Incorrect OTP"),ee(!1)}function Pe(){if(!g)return alert("Enter mobile number");ee(!0),ie();const W=window.recaptchaVerifier;V_(fl,g,W).then(le=>{b(le),alert("OTP sent successfully!")}).catch(le=>{console.error(le),alert("Error sending OTP: "+le.message)}),ee(!1)}function M(){if(!N)return alert("Please send OTP first");ee(!0),N.confirm(K).then(W=>{X(!0),alert("Phone verified successfully!"),console.log(W.user),window.recaptchaVerifier&&window.recaptchaVerifier.clear()}).catch(W=>{console.error(W),alert("Invalid OTP")}),ee(!1)}async function H(W){if(W.preventDefault(),ee(!0),!I||!De)return ee(!1),alert("Verify both email & mobile first");const le={name:e,RegisterationNum:s,Address:l,email:d,mobileNum:g,passwordId:E},_e=(await Va(ns(is,"Organizations"))).val();if(_e){const Xe=Object.values(_e),ai=Xe.some(Ri=>Ri.email===d),Hn=Xe.some(Ri=>Ri.mobileNum===g);if(ai)return ee(!1),alert("Email already exists. Try another one.");if(Hn)return ee(!1),alert("Mobile number already exists. Try another one.")}const Me=_e?Object.keys(_e).length:0,lt="ORG"+Math.floor(1e3+Math.random()*9e3)+(Me+1);await Gy(ns(is,`Organizations/${lt}`),le).then(()=>{alert("Registered Successfully "),Vs.send("service_rjgtrdr","template_l3c853f",{to_email:d,userId:lt,password:E,name:e}).then(()=>alert("Credentials sent to email"))}).catch(Xe=>console.log(Xe)),t(""),setEmailOrganization(""),setMobileOrganization(""),setPasswordOrganization(""),k(""),q(""),ee(!1)}return V.jsx(V.Fragment,{children:V.jsxs("form",{className:"registerForm",onSubmit:W=>{H(W)},children:[V.jsxs("h3",{children:["Registering as ",n]}),V.jsx("input",{type:"text",placeholder:"Enter Your Name",onChange:W=>{re(W)},value:e,required:!0}),V.jsx("input",{type:"text",placeholder:"Enter Registration Number",onChange:W=>{Ee(W)},value:s,required:!0}),V.jsx("input",{type:"text",placeholder:"Address of Organization",onChange:W=>{Re(W)},value:l,required:!0}),V.jsxs("div",{className:"send-otp",children:[V.jsx("input",{type:"email",placeholder:"Enter Your Email",value:d,onChange:W=>p(W.target.value),required:!0}),V.jsx("button",{type:"button",onClick:ce,children:"Send OTP"})]}),V.jsxs("div",{className:"verify-otp",children:[V.jsx("input",{type:"text",placeholder:"Enter Email OTP",value:R,onChange:W=>k(W.target.value),required:!0}),V.jsx("button",{type:"button",onClick:xe,children:"Verify OTP"})]}),V.jsxs("div",{className:"send-otp",children:[V.jsx("input",{type:"text",placeholder:"Enter Mobile",value:g,onChange:W=>y(W.target.value),required:!0}),V.jsx("button",{id:"sendMobileOtpBtn",type:"button",onClick:Pe,children:"Send OTP"})]}),V.jsx("div",{id:"recaptcha-container"}),V.jsxs("div",{className:"verify-otp",children:[V.jsx("input",{type:"text",placeholder:"Enter Mobile OTP",value:K,onChange:W=>q(W.target.value),required:!0}),V.jsx("button",{type:"button",onClick:M,children:"Verify OTP"})]}),V.jsx("input",{type:"text",placeholder:"Enter Password",onChange:W=>{Ae(W)},value:E,required:!0}),V.jsx("button",{type:"submit",children:" Submit"}),ne==!0&&V.jsx(Zd,{})]})})},u6=({role:n})=>{const[e,t]=z.useState(""),[s,a]=z.useState(""),[l,c]=z.useState(""),[d,p]=z.useState(""),[g,y]=z.useState(""),[E,S]=z.useState(""),[R,k]=z.useState(""),[K,q]=z.useState("");function ne(H){t(H.target.value)}function ee(H){a(H.target.value)}function re(H){S(H.target.value)}const[Ee,Ae]=z.useState(null),[Re,N]=z.useState(!1),[b,A]=z.useState(""),[P,D]=z.useState(!1),[U,I]=z.useState(!1),[Ze,De]=z.useState(!1);z.useEffect(()=>{Vs.init("O1eqMF__l75Le_ffM")},[]);const X=()=>{window.recaptchaVerifier||(window.recaptchaVerifier=new k_(fl,"recaptcha-container",{size:"invisible",callback:()=>console.log("reCAPTCHA solved")}),window.recaptchaVerifier.render())};async function ie(){if(De(!0),!d)return alert("Enter email");const H=Math.floor(1e5+Math.random()*9e5).toString();A(H),await gy(ll(dl,"emailOtps",d),{otp:H,timestamp:Date.now()}),Vs.send("service_rjgtrdr","template_vru0qpj",{to_email:d,name:e,otp:H}).then(()=>{N(!0),alert("Email OTP sent!")}).catch(W=>alert("Email send error: "+W.text)),De(!1)}async function ce(){if(De(!0),!R)return alert("Enter OTP");const H=await py(ll(dl,"emailOtps",d));if(!H.exists())return alert("No OTP found for this email");H.data().otp===R?(D(!0),alert("Email verified!")):alert("Incorrect OTP"),De(!1)}function xe(){if(De(!0),!g)return alert("Enter mobile number");X();const H=window.recaptchaVerifier;V_(fl,g,H).then(W=>{Ae(W),alert("OTP sent successfully!")}).catch(W=>{console.error(W),alert("Error sending OTP: "+W.message)}),De(!1)}function Pe(){if(De(!0),!Ee)return alert("Please send OTP first");Ee.confirm(K).then(H=>{I(!0),alert("Phone verified successfully!"),console.log(H.user),window.recaptchaVerifier&&window.recaptchaVerifier.clear()}).catch(H=>{console.error(H),alert("Invalid OTP")}),De(!1)}async function M(H){if(H.preventDefault(),De(!0),!P||!U)return De(!1),alert("Verify both email & mobile first");const W={name:e,Education:s,Address:l,email:d,mobileNum:g,passwordId:E},ge=(await Va(ns(is,"Mentors"))).val();if(ge){const lt=Object.values(ge),Xe=lt.some(Hn=>Hn.email===d),ai=lt.some(Hn=>Hn.mobileNum===g);if(Xe)return De(!1),alert("Email already exists. Try another one.");if(ai)return De(!1),alert("Mobile number already exists. Try another one.")}const _e=ge?Object.keys(ge).length:0,Me="MENT"+Math.floor(1e3+Math.random()*9e3)+(_e+1);await Gy(ns(is,`Mentors/${Me}`),W).then(()=>{alert("Registered Successfully  sending cerentials...wait..."),De(!0),Vs.send("service_rjgtrdr","template_l3c853f",{to_email:d,userId:Me,password:E,name:e}).then(()=>{alert("Credentials sent to email"),De(!1)})}).catch(lt=>console.log(lt)),t(""),p(""),y(""),S(""),k(""),q(""),De(!1)}return V.jsxs(V.Fragment,{children:[V.jsxs("form",{className:"registerForm",onSubmit:H=>{M(H)},children:[V.jsxs("h3",{children:["Registering as ",n]}),V.jsx("input",{type:"text",placeholder:"Enter Your Name",onChange:H=>{ne(H)},value:e,required:!0}),V.jsx("input",{type:"text",placeholder:"Enter Education Details",onChange:H=>{ee(H)},value:s,required:!0}),V.jsxs("div",{className:"send-otp",children:[V.jsx("input",{type:"email",placeholder:"Enter Your Email",value:d,onChange:H=>p(H.target.value),required:!0}),V.jsx("button",{type:"button",onClick:ie,children:"Send OTP"})]}),V.jsxs("div",{className:"verify-otp",children:[V.jsx("input",{type:"text",placeholder:"Enter Email OTP",value:R,onChange:H=>k(H.target.value),required:!0}),V.jsx("button",{type:"button",onClick:ce,children:"Verify OTP"})]}),V.jsxs("div",{className:"send-otp",children:[V.jsx("input",{type:"text",placeholder:"Enter Mobile",value:g,onChange:H=>y(H.target.value),required:!0}),V.jsx("button",{id:"sendMobileOtpBtn",type:"button",onClick:xe,children:"Send OTP"})]}),V.jsx("div",{id:"recaptcha-container"}),V.jsxs("div",{className:"verify-otp",children:[V.jsx("input",{type:"text",placeholder:"Enter Mobile OTP",value:K,onChange:H=>q(H.target.value),required:!0}),V.jsx("button",{type:"button",onClick:Pe,children:"Verify OTP"})]}),V.jsx("input",{type:"text",placeholder:"Enter Password",onChange:H=>{re(H)},value:E,required:!0}),V.jsx("button",{type:"submit",children:" Submit"})]}),Ze==!0&&V.jsx(Zd,{})]})},c6=()=>{const[n,e]=z.useState("");function t(s){e(s.target.value),console.log(n)}return V.jsx(V.Fragment,{children:V.jsxs("div",{className:"register-main",children:[V.jsx("h1",{children:"Register In SKill Exchange"}),V.jsxs("div",{className:"register-content",children:[V.jsx("img",{src:wd,alt:"skillx logo"}),V.jsxs("select",{name:"",id:"",placeholder:"select role",onChange:s=>{t(s)},children:[V.jsx("option",{value:"role_select",children:"Select Your Role"}),V.jsx("option",{value:"student",children:"Student"}),V.jsx("option",{value:"organization",children:"Organization"}),V.jsx("option",{value:"mentor",children:"Mentor"})]}),n==""&&V.jsx("h4",{children:V.jsx("b",{children:"Select Your Role First"})}),n=="role_select"&&V.jsx("h4",{children:V.jsx("b",{children:"Select Your Role First"})}),n=="student"&&V.jsx(o6,{role:n}),n=="organization"&&V.jsx(l6,{role:n}),n=="mentor"&&V.jsx(u6,{role:n})]})]})})},ZR=z.createContext(),h6=({children:n})=>{const[e,t]=z.useState(!0),s=gN(),[a,l]=z.useState();return z.useEffect(()=>{async function c(){const d=await Va(ns(is,`Students/${s.id}`));try{d?l(d.val()):alert("please wait.....")}catch{console.log(err)}finally{t(!1)}}c()},[]),e?V.jsx(Zd,{}):V.jsx(ZR.Provider,{value:a,children:n})},f6=()=>V.jsx("div",{className:"navigation-dash-main",children:V.jsxs("div",{className:"main-left",children:[V.jsxs("ul",{children:[V.jsxs("li",{children:[V.jsx("i",{className:"fa-regular fa-house"}),V.jsx("a",{href:"student.html",children:"Dashboard"})]}),V.jsxs("li",{children:[V.jsx("i",{className:"fa-regular fa-user"}),V.jsx("a",{href:"studentProfile.html",children:"My Profile"})]}),V.jsxs("li",{children:[V.jsx("i",{className:"fa-solid fa-rotate"}),V.jsx("a",{href:"skillsStu.html",children:"Skill Exchange"})]}),V.jsxs("li",{children:[V.jsx("i",{className:"fa-regular fa-building"}),V.jsx("a",{href:"#",children:"Org. Projects"})]}),V.jsxs("li",{children:[V.jsx("i",{className:"fa-regular fa-id-badge"}),V.jsx("a",{href:"mentorshipStudent.html",children:"Mentorship"})]}),V.jsxs("li",{children:[V.jsx("i",{className:"fa-regular fa-calendar-days"}),V.jsx("a",{href:"#",children:"Events"})]})]}),V.jsx("button",{className:"logout-btn",children:"Logout"})]})}),d6=()=>V.jsxs("nav",{className:"navStudentDashboard",children:[V.jsx("div",{className:"logo",children:V.jsx("img",{src:wd,alt:"Logo"})}),V.jsxs("div",{className:"nav-right",children:[V.jsx("input",{type:"search",placeholder:"Search projects, skills, mentors",className:"searchBarStud"}),V.jsx("i",{className:"fa-regular fa-bell"})]}),V.jsx("label",{htmlFor:"menu-toggle",children:V.jsxs("div",{className:"hamburger",id:"menu-toggle",children:[V.jsx("div",{}),V.jsx("div",{}),V.jsx("div",{})]})})]}),m6=()=>(z.useContext(ZR),V.jsxs("div",{children:[V.jsx("input",{type:"checkbox",id:"menu-toggle",className:"menu-toggle",hidden:!0}),V.jsx(d6,{}),V.jsx(f6,{})]})),p6=()=>V.jsx("div",{children:"Mentor Dashboard"}),g6=()=>V.jsx("div",{children:"Organization"}),_6=()=>{const[n,e]=z.useState(null),t=Qw();return z.useEffect(()=>{const s=JSON.parse(localStorage.getItem("loggedInUserSkillExchange"));s&&(e(s.role),s.role==="student"?t(`/student-dashboard/${s.id}`):s.role==="mentor"?t(`/mentor-dashboard/${s.id}`):s.role==="organization"?t(`/organization-dashboard/${s.id}`):alert("user not exist"))},[]),V.jsx(V.Fragment,{children:V.jsxs(DN,{children:[V.jsx(Na,{path:"/",element:V.jsx(Q3,{})}),V.jsx(Na,{path:"/login",element:V.jsx(qR,{})}),V.jsx(Na,{path:"/register",element:V.jsx(c6,{})}),V.jsx(Na,{path:"/student-dashboard/:id",element:V.jsx(h6,{children:V.jsx(m6,{})})}),V.jsx(Na,{path:"/mentor-dashboard/:id",element:V.jsx(p6,{})}),V.jsx(Na,{path:"/organization-dashboard/:id",element:V.jsx(g6,{})})]})})};z1.createRoot(document.getElementById("root")).render(V.jsx(H3,{children:V.jsx(eO,{basename:"/skill-exchange",children:V.jsx(_6,{})})}));
