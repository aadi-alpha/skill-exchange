(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var Fg={exports:{}},Zc={};var bb;function ix(){if(bb)return Zc;bb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:u,ref:a!==void 0?a:null,props:l}}return Zc.Fragment=e,Zc.jsx=t,Zc.jsxs=t,Zc}var wb;function sx(){return wb||(wb=1,Fg.exports=ix()),Fg.exports}var _=sx(),Hg={exports:{}},Ae={};var Cb;function rx(){if(Cb)return Ae;Cb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),b=Symbol.iterator;function A(M){return M===null||typeof M!="object"?null:(M=b&&M[b]||M["@@iterator"],typeof M=="function"?M:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,L={};function X(M,G,J){this.props=M,this.context=G,this.refs=L,this.updater=J||I}X.prototype.isReactComponent={},X.prototype.setState=function(M,G){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,G,"setState")},X.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function K(){}K.prototype=X.prototype;function $(M,G,J){this.props=M,this.context=G,this.refs=L,this.updater=J||I}var ae=$.prototype=new K;ae.constructor=$,V(ae,X.prototype),ae.isPureReactComponent=!0;var pe=Array.isArray;function ve(){}var O={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function N(M,G,J){var ce=J.ref;return{$$typeof:n,type:M,key:G,ref:ce!==void 0?ce:null,props:J}}function U(M,G){return N(M.type,G,M.props)}function P(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function B(M){var G={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(J){return G[J]})}var D=/\/+/g;function Ze(M,G){return typeof M=="object"&&M!==null&&M.key!=null?B(""+M.key):G.toString(36)}function Oe(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(ve,ve):(M.status="pending",M.then(function(G){M.status==="pending"&&(M.status="fulfilled",M.value=G)},function(G){M.status==="pending"&&(M.status="rejected",M.reason=G)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function Z(M,G,J,ce,ye){var Ee=typeof M;(Ee==="undefined"||Ee==="boolean")&&(M=null);var De=!1;if(M===null)De=!0;else switch(Ee){case"bigint":case"string":case"number":De=!0;break;case"object":switch(M.$$typeof){case n:case e:De=!0;break;case y:return De=M._init,Z(De(M._payload),G,J,ce,ye)}}if(De)return ye=ye(M),De=ce===""?"."+Ze(M,0):ce,pe(ye)?(J="",De!=null&&(J=De.replace(D,"$&/")+"/"),Z(ye,G,J,"",function(Ti){return Ti})):ye!=null&&(P(ye)&&(ye=U(ye,J+(ye.key==null||M&&M.key===ye.key?"":(""+ye.key).replace(D,"$&/")+"/")+De)),G.push(ye)),1;De=0;var ht=ce===""?".":ce+":";if(pe(M))for(var $e=0;$e<M.length;$e++)ce=M[$e],Ee=ht+Ze(ce,$e),De+=Z(ce,G,J,Ee,ye);else if($e=A(M),typeof $e=="function")for(M=$e.call(M),$e=0;!(ce=M.next()).done;)ce=ce.value,Ee=ht+Ze(ce,$e++),De+=Z(ce,G,J,Ee,ye);else if(Ee==="object"){if(typeof M.then=="function")return Z(Oe(M),G,J,ce,ye);throw G=String(M),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return De}function se(M,G,J){if(M==null)return M;var ce=[],ye=0;return Z(M,ce,"","",function(Ee){return G.call(J,Ee,ye++)}),ce}function he(M){if(M._status===-1){var G=M._result;G=G(),G.then(function(J){(M._status===0||M._status===-1)&&(M._status=1,M._result=J)},function(J){(M._status===0||M._status===-1)&&(M._status=2,M._result=J)}),M._status===-1&&(M._status=0,M._result=G)}if(M._status===1)return M._result.default;throw M._result}var ke=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Pe={map:se,forEach:function(M,G,J){se(M,function(){G.apply(this,arguments)},J)},count:function(M){var G=0;return se(M,function(){G++}),G},toArray:function(M){return se(M,function(G){return G})||[]},only:function(M){if(!P(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Ae.Activity=E,Ae.Children=Pe,Ae.Component=X,Ae.Fragment=t,Ae.Profiler=a,Ae.PureComponent=$,Ae.StrictMode=i,Ae.Suspense=m,Ae.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,Ae.__COMPILER_RUNTIME={__proto__:null,c:function(M){return O.H.useMemoCache(M)}},Ae.cache=function(M){return function(){return M.apply(null,arguments)}},Ae.cacheSignal=function(){return null},Ae.cloneElement=function(M,G,J){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ce=V({},M.props),ye=M.key;if(G!=null)for(Ee in G.key!==void 0&&(ye=""+G.key),G)!R.call(G,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&G.ref===void 0||(ce[Ee]=G[Ee]);var Ee=arguments.length-2;if(Ee===1)ce.children=J;else if(1<Ee){for(var De=Array(Ee),ht=0;ht<Ee;ht++)De[ht]=arguments[ht+2];ce.children=De}return N(M.type,ye,ce)},Ae.createContext=function(M){return M={$$typeof:u,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},Ae.createElement=function(M,G,J){var ce,ye={},Ee=null;if(G!=null)for(ce in G.key!==void 0&&(Ee=""+G.key),G)R.call(G,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(ye[ce]=G[ce]);var De=arguments.length-2;if(De===1)ye.children=J;else if(1<De){for(var ht=Array(De),$e=0;$e<De;$e++)ht[$e]=arguments[$e+2];ye.children=ht}if(M&&M.defaultProps)for(ce in De=M.defaultProps,De)ye[ce]===void 0&&(ye[ce]=De[ce]);return N(M,Ee,ye)},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(M){return{$$typeof:f,render:M}},Ae.isValidElement=P,Ae.lazy=function(M){return{$$typeof:y,_payload:{_status:-1,_result:M},_init:he}},Ae.memo=function(M,G){return{$$typeof:g,type:M,compare:G===void 0?null:G}},Ae.startTransition=function(M){var G=O.T,J={};O.T=J;try{var ce=M(),ye=O.S;ye!==null&&ye(J,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(ve,ke)}catch(Ee){ke(Ee)}finally{G!==null&&J.types!==null&&(G.types=J.types),O.T=G}},Ae.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},Ae.use=function(M){return O.H.use(M)},Ae.useActionState=function(M,G,J){return O.H.useActionState(M,G,J)},Ae.useCallback=function(M,G){return O.H.useCallback(M,G)},Ae.useContext=function(M){return O.H.useContext(M)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(M,G){return O.H.useDeferredValue(M,G)},Ae.useEffect=function(M,G){return O.H.useEffect(M,G)},Ae.useEffectEvent=function(M){return O.H.useEffectEvent(M)},Ae.useId=function(){return O.H.useId()},Ae.useImperativeHandle=function(M,G,J){return O.H.useImperativeHandle(M,G,J)},Ae.useInsertionEffect=function(M,G){return O.H.useInsertionEffect(M,G)},Ae.useLayoutEffect=function(M,G){return O.H.useLayoutEffect(M,G)},Ae.useMemo=function(M,G){return O.H.useMemo(M,G)},Ae.useOptimistic=function(M,G){return O.H.useOptimistic(M,G)},Ae.useReducer=function(M,G,J){return O.H.useReducer(M,G,J)},Ae.useRef=function(M){return O.H.useRef(M)},Ae.useState=function(M){return O.H.useState(M)},Ae.useSyncExternalStore=function(M,G,J){return O.H.useSyncExternalStore(M,G,J)},Ae.useTransition=function(){return O.H.useTransition()},Ae.version="19.2.0",Ae}var Ab;function hy(){return Ab||(Ab=1,Hg.exports=rx()),Hg.exports}var x=hy(),qg={exports:{}},eu={},Gg={exports:{}},Yg={};var Rb;function ax(){return Rb||(Rb=1,(function(n){function e(Z,se){var he=Z.length;Z.push(se);e:for(;0<he;){var ke=he-1>>>1,Pe=Z[ke];if(0<a(Pe,se))Z[ke]=se,Z[he]=Pe,he=ke;else break e}}function t(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var se=Z[0],he=Z.pop();if(he!==se){Z[0]=he;e:for(var ke=0,Pe=Z.length,M=Pe>>>1;ke<M;){var G=2*(ke+1)-1,J=Z[G],ce=G+1,ye=Z[ce];if(0>a(J,he))ce<Pe&&0>a(ye,J)?(Z[ke]=ye,Z[ce]=he,ke=ce):(Z[ke]=J,Z[G]=he,ke=G);else if(ce<Pe&&0>a(ye,he))Z[ke]=ye,Z[ce]=he,ke=ce;else break e}}return se}function a(Z,se){var he=Z.sortIndex-se.sortIndex;return he!==0?he:Z.id-se.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var m=[],g=[],y=1,E=null,b=3,A=!1,I=!1,V=!1,L=!1,X=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function ae(Z){for(var se=t(g);se!==null;){if(se.callback===null)i(g);else if(se.startTime<=Z)i(g),se.sortIndex=se.expirationTime,e(m,se);else break;se=t(g)}}function pe(Z){if(V=!1,ae(Z),!I)if(t(m)!==null)I=!0,ve||(ve=!0,B());else{var se=t(g);se!==null&&Oe(pe,se.startTime-Z)}}var ve=!1,O=-1,R=5,N=-1;function U(){return L?!0:!(n.unstable_now()-N<R)}function P(){if(L=!1,ve){var Z=n.unstable_now();N=Z;var se=!0;try{e:{I=!1,V&&(V=!1,K(O),O=-1),A=!0;var he=b;try{t:{for(ae(Z),E=t(m);E!==null&&!(E.expirationTime>Z&&U());){var ke=E.callback;if(typeof ke=="function"){E.callback=null,b=E.priorityLevel;var Pe=ke(E.expirationTime<=Z);if(Z=n.unstable_now(),typeof Pe=="function"){E.callback=Pe,ae(Z),se=!0;break t}E===t(m)&&i(m),ae(Z)}else i(m);E=t(m)}if(E!==null)se=!0;else{var M=t(g);M!==null&&Oe(pe,M.startTime-Z),se=!1}}break e}finally{E=null,b=he,A=!1}se=void 0}}finally{se?B():ve=!1}}}var B;if(typeof $=="function")B=function(){$(P)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Ze=D.port2;D.port1.onmessage=P,B=function(){Ze.postMessage(null)}}else B=function(){X(P,0)};function Oe(Z,se){O=X(function(){Z(n.unstable_now())},se)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(Z){switch(b){case 1:case 2:case 3:var se=3;break;default:se=b}var he=b;b=se;try{return Z()}finally{b=he}},n.unstable_requestPaint=function(){L=!0},n.unstable_runWithPriority=function(Z,se){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var he=b;b=Z;try{return se()}finally{b=he}},n.unstable_scheduleCallback=function(Z,se,he){var ke=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?ke+he:ke):he=ke,Z){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=he+Pe,Z={id:y++,callback:se,priorityLevel:Z,startTime:he,expirationTime:Pe,sortIndex:-1},he>ke?(Z.sortIndex=he,e(g,Z),t(m)===null&&Z===t(g)&&(V?(K(O),O=-1):V=!0,Oe(pe,he-ke))):(Z.sortIndex=Pe,e(m,Z),I||A||(I=!0,ve||(ve=!0,B()))),Z},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(Z){var se=b;return function(){var he=b;b=se;try{return Z.apply(this,arguments)}finally{b=he}}}})(Yg)),Yg}var Ib;function ox(){return Ib||(Ib=1,Gg.exports=ax()),Gg.exports}var Kg={exports:{}},Tn={};var Nb;function lx(){if(Nb)return Tn;Nb=1;var n=hy();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,y){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:m,containerInfo:g,implementation:y}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Tn.createPortal=function(m,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,y)},Tn.flushSync=function(m){var g=u.T,y=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=g,i.p=y,i.d.f()}},Tn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(m,g))},Tn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},Tn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var y=g.as,E=f(y,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,A=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?i.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:b,fetchPriority:A}):y==="script"&&i.d.X(m,{crossOrigin:E,integrity:b,fetchPriority:A,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Tn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=f(g.as,g.crossOrigin);i.d.M(m,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(m)},Tn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,E=f(y,g.crossOrigin);i.d.L(m,y,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Tn.preloadModule=function(m,g){if(typeof m=="string")if(g){var y=f(g.as,g.crossOrigin);i.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(m)},Tn.requestFormReset=function(m){i.d.r(m)},Tn.unstable_batchedUpdates=function(m,g){return m(g)},Tn.useFormState=function(m,g,y){return u.H.useFormState(m,g,y)},Tn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Tn.version="19.2.0",Tn}var xb;function cx(){if(xb)return Kg.exports;xb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Kg.exports=lx(),Kg.exports}var Ob;function ux(){if(Ob)return eu;Ob=1;var n=ox(),e=hy(),t=cx();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var r=s,o=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(o=r.return),s=r.return;while(s)}return r.tag===3?o:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function f(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function m(s){if(l(s)!==s)throw Error(i(188))}function g(s){var r=s.alternate;if(!r){if(r=l(s),r===null)throw Error(i(188));return r!==s?null:s}for(var o=s,c=r;;){var d=o.return;if(d===null)break;var p=d.alternate;if(p===null){if(c=d.return,c!==null){o=c;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===o)return m(d),s;if(p===c)return m(d),r;p=p.sibling}throw Error(i(188))}if(o.return!==c.return)o=d,c=p;else{for(var T=!1,w=d.child;w;){if(w===o){T=!0,o=d,c=p;break}if(w===c){T=!0,c=d,o=p;break}w=w.sibling}if(!T){for(w=p.child;w;){if(w===o){T=!0,o=p,c=d;break}if(w===c){T=!0,c=p,o=d;break}w=w.sibling}if(!T)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?s:r}function y(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=y(s),r!==null)return r;s=s.sibling}return null}var E=Object.assign,b=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),$=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),pe=Symbol.for("react.suspense"),ve=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function B(s){return s===null||typeof s!="object"?null:(s=P&&s[P]||s["@@iterator"],typeof s=="function"?s:null)}var D=Symbol.for("react.client.reference");function Ze(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===D?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case V:return"Fragment";case X:return"Profiler";case L:return"StrictMode";case pe:return"Suspense";case ve:return"SuspenseList";case N:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case I:return"Portal";case $:return s.displayName||"Context";case K:return(s._context.displayName||"Context")+".Consumer";case ae:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case O:return r=s.displayName||null,r!==null?r:Ze(s.type)||"Memo";case R:r=s._payload,s=s._init;try{return Ze(s(r))}catch{}}return null}var Oe=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},ke=[],Pe=-1;function M(s){return{current:s}}function G(s){0>Pe||(s.current=ke[Pe],ke[Pe]=null,Pe--)}function J(s,r){Pe++,ke[Pe]=s.current,s.current=r}var ce=M(null),ye=M(null),Ee=M(null),De=M(null);function ht(s,r){switch(J(Ee,r),J(ye,s),J(ce,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?YS(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=YS(r),s=KS(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}G(ce),J(ce,s)}function $e(){G(ce),G(ye),G(Ee)}function Ti(s){s.memoizedState!==null&&J(De,s);var r=ce.current,o=KS(r,s.type);r!==o&&(J(ye,s),J(ce,o))}function ti(s){ye.current===s&&(G(ce),G(ye)),De.current===s&&(G(De),Wc._currentValue=he)}var Bi,_o;function Fi(s){if(Bi===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);Bi=r&&r[1]||"",_o=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Bi+s+_o}var Wl=!1;function va(s,r){if(!s||Wl)return"";Wl=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(W){var Y=W}Reflect.construct(s,[],ne)}else{try{ne.call()}catch(W){Y=W}s.call(ne.prototype)}}else{try{throw Error()}catch(W){Y=W}(ne=s())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(W){if(W&&Y&&typeof W.stack=="string")return[W.stack,Y.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),T=p[0],w=p[1];if(T&&w){var k=T.split(`
`),q=w.split(`
`);for(d=c=0;c<k.length&&!k[c].includes("DetermineComponentFrameRoot");)c++;for(;d<q.length&&!q[d].includes("DetermineComponentFrameRoot");)d++;if(c===k.length||d===q.length)for(c=k.length-1,d=q.length-1;1<=c&&0<=d&&k[c]!==q[d];)d--;for(;1<=c&&0<=d;c--,d--)if(k[c]!==q[d]){if(c!==1||d!==1)do if(c--,d--,0>d||k[c]!==q[d]){var ee=`
`+k[c].replace(" at new "," at ");return s.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",s.displayName)),ee}while(1<=c&&0<=d);break}}}finally{Wl=!1,Error.prepareStackTrace=o}return(o=s?s.displayName||s.name:"")?Fi(o):""}function $l(s,r){switch(s.tag){case 26:case 27:case 5:return Fi(s.type);case 16:return Fi("Lazy");case 13:return s.child!==r&&r!==null?Fi("Suspense Fallback"):Fi("Suspense");case 19:return Fi("SuspenseList");case 0:case 15:return va(s.type,!1);case 11:return va(s.type.render,!1);case 1:return va(s.type,!0);case 31:return Fi("Activity");default:return""}}function Xl(s){try{var r="",o=null;do r+=$l(s,o),o=s,s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Pt=Object.prototype.hasOwnProperty,Kt=n.unstable_scheduleCallback,lr=n.unstable_cancelCallback,qm=n.unstable_shouldYield,Th=n.unstable_requestPaint,An=n.unstable_now,Ea=n.unstable_getCurrentPriorityLevel,Jl=n.unstable_ImmediatePriority,Zl=n.unstable_UserBlockingPriority,cr=n.unstable_NormalPriority,Gm=n.unstable_LowPriority,Sh=n.unstable_IdlePriority,bh=n.log,wh=n.unstable_setDisableYieldValue,Si=null,on=null;function ni(s){if(typeof bh=="function"&&wh(s),on&&typeof on.setStrictMode=="function")try{on.setStrictMode(Si,s)}catch{}}var Nt=Math.clz32?Math.clz32:Ah,Ch=Math.log,yo=Math.LN2;function Ah(s){return s>>>=0,s===0?32:31-(Ch(s)/yo|0)|0}var Hi=256,Ta=262144,Mt=4194304;function qi(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Gi(s,r,o){var c=s.pendingLanes;if(c===0)return 0;var d=0,p=s.suspendedLanes,T=s.pingedLanes;s=s.warmLanes;var w=c&134217727;return w!==0?(c=w&~p,c!==0?d=qi(c):(T&=w,T!==0?d=qi(T):o||(o=w&~s,o!==0&&(d=qi(o))))):(w=c&~p,w!==0?d=qi(w):T!==0?d=qi(T):o||(o=c&~s,o!==0&&(d=qi(o)))),d===0?0:r!==0&&r!==d&&(r&p)===0&&(p=d&-d,o=r&-r,p>=o||p===32&&(o&4194048)!==0)?r:d}function bi(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function Ym(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rh(){var s=Mt;return Mt<<=1,(Mt&62914560)===0&&(Mt=4194304),s}function Yi(s){for(var r=[],o=0;31>o;o++)r.push(s);return r}function Sa(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Km(s,r,o,c,d,p){var T=s.pendingLanes;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=o,s.entangledLanes&=o,s.errorRecoveryDisabledLanes&=o,s.shellSuspendCounter=0;var w=s.entanglements,k=s.expirationTimes,q=s.hiddenUpdates;for(o=T&~o;0<o;){var ee=31-Nt(o),ne=1<<ee;w[ee]=0,k[ee]=-1;var Y=q[ee];if(Y!==null)for(q[ee]=null,ee=0;ee<Y.length;ee++){var W=Y[ee];W!==null&&(W.lane&=-536870913)}o&=~ne}c!==0&&ba(s,c,0),p!==0&&d===0&&s.tag!==0&&(s.suspendedLanes|=p&~(T&~r))}function ba(s,r,o){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-Nt(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|o&261930}function ec(s,r){var o=s.entangledLanes|=r;for(s=s.entanglements;o;){var c=31-Nt(o),d=1<<c;d&r|s[c]&r&&(s[c]|=r),o&=~d}}function tc(s,r){var o=r&-r;return o=(o&42)!==0?1:wa(o),(o&(s.suspendedLanes|r))!==0?0:o}function wa(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ws(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ih(){var s=se.p;return s!==0?s:(s=window.event,s===void 0?32:gb(s.type))}function wi(s,r){var o=se.p;try{return se.p=s,r()}finally{se.p=o}}var Ci=Math.random().toString(36).slice(2),Lt="__reactFiber$"+Ci,Zt="__reactProps$"+Ci,Ki="__reactContainer$"+Ci,vo="__reactEvents$"+Ci,Qm="__reactListeners$"+Ci,Nh="__reactHandles$"+Ci,xh="__reactResources$"+Ci,Qi="__reactMarker$"+Ci;function Eo(s){delete s[Lt],delete s[Zt],delete s[vo],delete s[Qm],delete s[Nh]}function Wi(s){var r=s[Lt];if(r)return r;for(var o=s.parentNode;o;){if(r=o[Ki]||o[Lt]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(s=eb(s);s!==null;){if(o=s[Lt])return o;s=eb(s)}return r}s=o,o=s.parentNode}return null}function ii(s){if(s=s[Lt]||s[Ki]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function Fn(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function $i(s){var r=s[xh];return r||(r=s[xh]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function jt(s){s[Qi]=!0}var nc=new Set,ic={};function Xi(s,r){Ji(s,r),Ji(s+"Capture",r)}function Ji(s,r){for(ic[s]=r,s=0;s<r.length;s++)nc.add(r[s])}var sc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rc={},ac={};function Oh(s){return Pt.call(ac,s)?!0:Pt.call(rc,s)?!1:sc.test(s)?ac[s]=!0:(rc[s]=!0,!1)}function To(s,r,o){if(Oh(r))if(o===null)s.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+o)}}function Hn(s,r,o){if(o===null)s.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+o)}}function Vt(s,r,o,c){if(c===null)s.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttributeNS(r,o,""+c)}}function en(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ur(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function oc(s,r,o){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var d=c.get,p=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return d.call(this)},set:function(T){o=""+T,p.call(this,T)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(T){o=""+T},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function tt(s){if(!s._valueTracker){var r=ur(s)?"checked":"value";s._valueTracker=oc(s,r,""+s[r])}}function Ca(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return s&&(c=ur(s)?s.checked?"true":"false":s.value),s=c,s!==o?(r.setValue(s),!0):!1}function Zi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Aa=/[\n"\\]/g;function Dn(s){return s.replace(Aa,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function So(s,r,o,c,d,p,T,w){s.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?s.type=T:s.removeAttribute("type"),r!=null?T==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+en(r)):s.value!==""+en(r)&&(s.value=""+en(r)):T!=="submit"&&T!=="reset"||s.removeAttribute("value"),r!=null?lc(s,T,en(r)):o!=null?lc(s,T,en(o)):c!=null&&s.removeAttribute("value"),d==null&&p!=null&&(s.defaultChecked=!!p),d!=null&&(s.checked=d&&typeof d!="function"&&typeof d!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.name=""+en(w):s.removeAttribute("name")}function Dh(s,r,o,c,d,p,T,w){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(s.type=p),r!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||r!=null)){tt(s);return}o=o!=null?""+en(o):"",r=r!=null?""+en(r):o,w||r===s.value||(s.value=r),s.defaultValue=r}c=c??d,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=w?s.checked:!!c,s.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.name=T),tt(s)}function lc(s,r,o){r==="number"&&Zi(s.ownerDocument)===s||s.defaultValue===""+o||(s.defaultValue=""+o)}function hr(s,r,o,c){if(s=s.options,r){r={};for(var d=0;d<o.length;d++)r["$"+o[d]]=!0;for(o=0;o<s.length;o++)d=r.hasOwnProperty("$"+s[o].value),s[o].selected!==d&&(s[o].selected=d),d&&c&&(s[o].defaultSelected=!0)}else{for(o=""+en(o),r=null,d=0;d<s.length;d++){if(s[d].value===o){s[d].selected=!0,c&&(s[d].defaultSelected=!0);return}r!==null||s[d].disabled||(r=s[d])}r!==null&&(r.selected=!0)}}function kh(s,r,o){if(r!=null&&(r=""+en(r),r!==s.value&&(s.value=r),o==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=o!=null?""+en(o):""}function fr(s,r,o,c){if(r==null){if(c!=null){if(o!=null)throw Error(i(92));if(Oe(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),r=o}o=en(r),s.defaultValue=o,c=s.textContent,c===o&&c!==""&&c!==null&&(s.value=c),tt(s)}function kn(s,r){if(r){var o=s.firstChild;if(o&&o===s.lastChild&&o.nodeType===3){o.nodeValue=r;return}}s.textContent=r}var Ph=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cc(s,r,o){var c=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,o):typeof o!="number"||o===0||Ph.has(r)?r==="float"?s.cssFloat=o:s[r]=(""+o).trim():s[r]=o+"px"}function uc(s,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var d in r)c=r[d],r.hasOwnProperty(d)&&o[d]!==c&&cc(s,d,c)}else for(var p in r)r.hasOwnProperty(p)&&cc(s,p,r[p])}function bo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wo(s){return dr.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Ai(){}var hc=null;function si(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var mr=null,es=null;function Ra(s){var r=ii(s);if(r&&(s=r.stateNode)){var o=s[Zt]||null;e:switch(s=r.stateNode,r.type){case"input":if(So(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=s;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Dn(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==s&&c.form===s.form){var d=c[Zt]||null;if(!d)throw Error(i(90));So(c,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(r=0;r<o.length;r++)c=o[r],c.form===s.form&&Ca(c)}break e;case"textarea":kh(s,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&hr(s,!!o.multiple,r,!1)}}}var Co=!1;function pr(s,r,o){if(Co)return s(r,o);Co=!0;try{var c=s(r);return c}finally{if(Co=!1,(mr!==null||es!==null)&&(Nf(),mr&&(r=mr,s=es,es=mr=null,Ra(r),s)))for(r=0;r<s.length;r++)Ra(s[r])}}function Ri(s,r){var o=s.stateNode;if(o===null)return null;var c=o[Zt]||null;if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ia=!1;if(ri)try{var st={};Object.defineProperty(st,"passive",{get:function(){Ia=!0}}),window.addEventListener("test",st,st),window.removeEventListener("test",st,st)}catch{Ia=!1}var ts=null,fc=null,Na=null;function dc(){if(Na)return Na;var s,r=fc,o=r.length,c,d="value"in ts?ts.value:ts.textContent,p=d.length;for(s=0;s<o&&r[s]===d[s];s++);var T=o-s;for(c=1;c<=T&&r[o-c]===d[p-c];c++);return Na=d.slice(s,1<c?1-c:void 0)}function xa(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function Cs(){return!0}function Ii(){return!1}function ln(s){function r(o,c,d,p,T){this._reactName=o,this._targetInst=d,this.type=c,this.nativeEvent=p,this.target=T,this.currentTarget=null;for(var w in s)s.hasOwnProperty(w)&&(o=s[w],this[w]=o?o(p):p[w]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Cs:Ii,this.isPropagationStopped=Ii,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Cs)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Cs)},persist:function(){},isPersistent:Cs}),r}var As={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ns=ln(As),gr=E({},As,{view:0,detail:0}),mc=ln(gr),_r,Ao,is,Ro=E({},gr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==is&&(is&&s.type==="mousemove"?(_r=s.screenX-is.screenX,Ao=s.screenY-is.screenY):Ao=_r=0,is=s),_r)},movementY:function(s){return"movementY"in s?s.movementY:Ao}}),pc=ln(Ro),Oa=E({},Ro,{dataTransfer:0}),Lh=ln(Oa),jh=E({},gr,{relatedTarget:0}),Da=ln(jh),gc=E({},As,{animationName:0,elapsedTime:0,pseudoElement:0}),Vh=ln(gc),Io=E({},As,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Uh=ln(Io),zh=E({},As,{data:0}),ss=ln(zh),Bh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qh(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=Hh[s])?!!r[s]:!1}function yr(){return qh}var Rn=E({},gr,{key:function(s){if(s.key){var r=Bh[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=xa(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Fh[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yr,charCode:function(s){return s.type==="keypress"?xa(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?xa(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Gh=ln(Rn),Yh=E({},Ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rs=ln(Yh),h=E({},gr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yr}),v=ln(h),S=E({},As,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=ln(S),F=E({},Ro,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=ln(F),le=E({},As,{newState:0,oldState:0}),Ie=ln(le),xt=[9,13,27,32],Xe=ri&&"CompositionEvent"in window,vt=null;ri&&"documentMode"in document&&(vt=document.documentMode);var ai=ri&&"TextEvent"in window&&!vt,rs=ri&&(!Xe||vt&&8<vt&&11>=vt),Ni=" ",xi=!1;function ka(s,r){switch(s){case"keyup":return xt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function No(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var xo=!1;function R1(s,r){switch(s){case"compositionend":return No(r);case"keypress":return r.which!==32?null:(xi=!0,Ni);case"textInput":return s=r.data,s===Ni&&xi?null:s;default:return null}}function I1(s,r){if(xo)return s==="compositionend"||!Xe&&ka(s,r)?(s=dc(),Na=fc=ts=null,xo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return rs&&r.locale!=="ko"?null:r.data;default:return null}}var N1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iE(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!N1[s.type]:r==="textarea"}function sE(s,r,o,c){mr?es?es.push(c):es=[c]:mr=c,r=Lf(r,"onChange"),0<r.length&&(o=new ns("onChange","change",null,o,c),s.push({event:o,listeners:r}))}var _c=null,yc=null;function x1(s){zS(s,0)}function Kh(s){var r=Fn(s);if(Ca(r))return s}function rE(s,r){if(s==="change")return r}var aE=!1;if(ri){var Wm;if(ri){var $m="oninput"in document;if(!$m){var oE=document.createElement("div");oE.setAttribute("oninput","return;"),$m=typeof oE.oninput=="function"}Wm=$m}else Wm=!1;aE=Wm&&(!document.documentMode||9<document.documentMode)}function lE(){_c&&(_c.detachEvent("onpropertychange",cE),yc=_c=null)}function cE(s){if(s.propertyName==="value"&&Kh(yc)){var r=[];sE(r,yc,s,si(s)),pr(x1,r)}}function O1(s,r,o){s==="focusin"?(lE(),_c=r,yc=o,_c.attachEvent("onpropertychange",cE)):s==="focusout"&&lE()}function D1(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Kh(yc)}function k1(s,r){if(s==="click")return Kh(r)}function P1(s,r){if(s==="input"||s==="change")return Kh(r)}function M1(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var qn=typeof Object.is=="function"?Object.is:M1;function vc(s,r){if(qn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var o=Object.keys(s),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var d=o[c];if(!Pt.call(r,d)||!qn(s[d],r[d]))return!1}return!0}function uE(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function hE(s,r){var o=uE(s);s=0;for(var c;o;){if(o.nodeType===3){if(c=s+o.textContent.length,s<=r&&c>=r)return{node:o,offset:r-s};s=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=uE(o)}}function fE(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?fE(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function dE(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=Zi(s.document);r instanceof s.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)s=r.contentWindow;else break;r=Zi(s.document)}return r}function Xm(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var L1=ri&&"documentMode"in document&&11>=document.documentMode,Oo=null,Jm=null,Ec=null,Zm=!1;function mE(s,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Zm||Oo==null||Oo!==Zi(c)||(c=Oo,"selectionStart"in c&&Xm(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ec&&vc(Ec,c)||(Ec=c,c=Lf(Jm,"onSelect"),0<c.length&&(r=new ns("onSelect","select",null,r,o),s.push({event:r,listeners:c}),r.target=Oo)))}function Pa(s,r){var o={};return o[s.toLowerCase()]=r.toLowerCase(),o["Webkit"+s]="webkit"+r,o["Moz"+s]="moz"+r,o}var Do={animationend:Pa("Animation","AnimationEnd"),animationiteration:Pa("Animation","AnimationIteration"),animationstart:Pa("Animation","AnimationStart"),transitionrun:Pa("Transition","TransitionRun"),transitionstart:Pa("Transition","TransitionStart"),transitioncancel:Pa("Transition","TransitionCancel"),transitionend:Pa("Transition","TransitionEnd")},ep={},pE={};ri&&(pE=document.createElement("div").style,"AnimationEvent"in window||(delete Do.animationend.animation,delete Do.animationiteration.animation,delete Do.animationstart.animation),"TransitionEvent"in window||delete Do.transitionend.transition);function Ma(s){if(ep[s])return ep[s];if(!Do[s])return s;var r=Do[s],o;for(o in r)if(r.hasOwnProperty(o)&&o in pE)return ep[s]=r[o];return s}var gE=Ma("animationend"),_E=Ma("animationiteration"),yE=Ma("animationstart"),j1=Ma("transitionrun"),V1=Ma("transitionstart"),U1=Ma("transitioncancel"),vE=Ma("transitionend"),EE=new Map,tp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tp.push("scrollEnd");function Oi(s,r){EE.set(s,r),Xi(r,[s])}var Qh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},oi=[],ko=0,np=0;function Wh(){for(var s=ko,r=np=ko=0;r<s;){var o=oi[r];oi[r++]=null;var c=oi[r];oi[r++]=null;var d=oi[r];oi[r++]=null;var p=oi[r];if(oi[r++]=null,c!==null&&d!==null){var T=c.pending;T===null?d.next=d:(d.next=T.next,T.next=d),c.pending=d}p!==0&&TE(o,d,p)}}function $h(s,r,o,c){oi[ko++]=s,oi[ko++]=r,oi[ko++]=o,oi[ko++]=c,np|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function ip(s,r,o,c){return $h(s,r,o,c),Xh(s)}function La(s,r){return $h(s,null,null,r),Xh(s)}function TE(s,r,o){s.lanes|=o;var c=s.alternate;c!==null&&(c.lanes|=o);for(var d=!1,p=s.return;p!==null;)p.childLanes|=o,c=p.alternate,c!==null&&(c.childLanes|=o),p.tag===22&&(s=p.stateNode,s===null||s._visibility&1||(d=!0)),s=p,p=p.return;return s.tag===3?(p=s.stateNode,d&&r!==null&&(d=31-Nt(o),s=p.hiddenUpdates,c=s[d],c===null?s[d]=[r]:c.push(r),r.lane=o|536870912),p):null}function Xh(s){if(50<Fc)throw Fc=0,fg=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var Po={};function z1(s,r,o,c){this.tag=s,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(s,r,o,c){return new z1(s,r,o,c)}function sp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Is(s,r){var o=s.alternate;return o===null?(o=Gn(s.tag,r,s.key,s.mode),o.elementType=s.elementType,o.type=s.type,o.stateNode=s.stateNode,o.alternate=s,s.alternate=o):(o.pendingProps=r,o.type=s.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=s.flags&65011712,o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,r=s.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=s.sibling,o.index=s.index,o.ref=s.ref,o.refCleanup=s.refCleanup,o}function SE(s,r){s.flags&=65011714;var o=s.alternate;return o===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,r=o.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function Jh(s,r,o,c,d,p){var T=0;if(c=s,typeof s=="function")sp(s)&&(T=1);else if(typeof s=="string")T=GN(s,o,ce.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case N:return s=Gn(31,o,r,d),s.elementType=N,s.lanes=p,s;case V:return ja(o.children,d,p,r);case L:T=8,d|=24;break;case X:return s=Gn(12,o,r,d|2),s.elementType=X,s.lanes=p,s;case pe:return s=Gn(13,o,r,d),s.elementType=pe,s.lanes=p,s;case ve:return s=Gn(19,o,r,d),s.elementType=ve,s.lanes=p,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case $:T=10;break e;case K:T=9;break e;case ae:T=11;break e;case O:T=14;break e;case R:T=16,c=null;break e}T=29,o=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=Gn(T,o,r,d),r.elementType=s,r.type=c,r.lanes=p,r}function ja(s,r,o,c){return s=Gn(7,s,c,r),s.lanes=o,s}function rp(s,r,o){return s=Gn(6,s,null,r),s.lanes=o,s}function bE(s){var r=Gn(18,null,null,0);return r.stateNode=s,r}function ap(s,r,o){return r=Gn(4,s.children!==null?s.children:[],s.key,r),r.lanes=o,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var wE=new WeakMap;function li(s,r){if(typeof s=="object"&&s!==null){var o=wE.get(s);return o!==void 0?o:(r={value:s,source:r,stack:Xl(r)},wE.set(s,r),r)}return{value:s,source:r,stack:Xl(r)}}var Mo=[],Lo=0,Zh=null,Tc=0,ci=[],ui=0,vr=null,as=1,os="";function Ns(s,r){Mo[Lo++]=Tc,Mo[Lo++]=Zh,Zh=s,Tc=r}function CE(s,r,o){ci[ui++]=as,ci[ui++]=os,ci[ui++]=vr,vr=s;var c=as;s=os;var d=32-Nt(c)-1;c&=~(1<<d),o+=1;var p=32-Nt(r)+d;if(30<p){var T=d-d%5;p=(c&(1<<T)-1).toString(32),c>>=T,d-=T,as=1<<32-Nt(r)+d|o<<d|c,os=p+s}else as=1<<p|o<<d|c,os=s}function op(s){s.return!==null&&(Ns(s,1),CE(s,1,0))}function lp(s){for(;s===Zh;)Zh=Mo[--Lo],Mo[Lo]=null,Tc=Mo[--Lo],Mo[Lo]=null;for(;s===vr;)vr=ci[--ui],ci[ui]=null,os=ci[--ui],ci[ui]=null,as=ci[--ui],ci[ui]=null}function AE(s,r){ci[ui++]=as,ci[ui++]=os,ci[ui++]=vr,as=r.id,os=r.overflow,vr=s}var cn=null,pt=null,Ge=!1,Er=null,hi=!1,cp=Error(i(519));function Tr(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Sc(li(r,s)),cp}function RE(s){var r=s.stateNode,o=s.type,c=s.memoizedProps;switch(r[Lt]=s,r[Zt]=c,o){case"dialog":Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":case"embed":Ve("load",r);break;case"video":case"audio":for(o=0;o<qc.length;o++)Ve(qc[o],r);break;case"source":Ve("error",r);break;case"img":case"image":case"link":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"input":Ve("invalid",r),Dh(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ve("invalid",r);break;case"textarea":Ve("invalid",r),fr(r,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||c.suppressHydrationWarning===!0||qS(r.textContent,o)?(c.popover!=null&&(Ve("beforetoggle",r),Ve("toggle",r)),c.onScroll!=null&&Ve("scroll",r),c.onScrollEnd!=null&&Ve("scrollend",r),c.onClick!=null&&(r.onclick=Ai),r=!0):r=!1,r||Tr(s,!0)}function IE(s){for(cn=s.return;cn;)switch(cn.tag){case 5:case 31:case 13:hi=!1;return;case 27:case 3:hi=!0;return;default:cn=cn.return}}function jo(s){if(s!==cn)return!1;if(!Ge)return IE(s),Ge=!0,!1;var r=s.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=s.type,o=!(o!=="form"&&o!=="button")||Rg(s.type,s.memoizedProps)),o=!o),o&&pt&&Tr(s),IE(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));pt=ZS(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));pt=ZS(s)}else r===27?(r=pt,Mr(s.type)?(s=Dg,Dg=null,pt=s):pt=r):pt=cn?di(s.stateNode.nextSibling):null;return!0}function Va(){pt=cn=null,Ge=!1}function up(){var s=Er;return s!==null&&(jn===null?jn=s:jn.push.apply(jn,s),Er=null),s}function Sc(s){Er===null?Er=[s]:Er.push(s)}var hp=M(null),Ua=null,xs=null;function Sr(s,r,o){J(hp,r._currentValue),r._currentValue=o}function Os(s){s._currentValue=hp.current,G(hp)}function fp(s,r,o){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===o)break;s=s.return}}function dp(s,r,o,c){var d=s.child;for(d!==null&&(d.return=s);d!==null;){var p=d.dependencies;if(p!==null){var T=d.child;p=p.firstContext;e:for(;p!==null;){var w=p;p=d;for(var k=0;k<r.length;k++)if(w.context===r[k]){p.lanes|=o,w=p.alternate,w!==null&&(w.lanes|=o),fp(p.return,o,s),c||(T=null);break e}p=w.next}}else if(d.tag===18){if(T=d.return,T===null)throw Error(i(341));T.lanes|=o,p=T.alternate,p!==null&&(p.lanes|=o),fp(T,o,s),T=null}else T=d.child;if(T!==null)T.return=d;else for(T=d;T!==null;){if(T===s){T=null;break}if(d=T.sibling,d!==null){d.return=T.return,T=d;break}T=T.return}d=T}}function Vo(s,r,o,c){s=null;for(var d=r,p=!1;d!==null;){if(!p){if((d.flags&524288)!==0)p=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var T=d.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var w=d.type;qn(d.pendingProps.value,T.value)||(s!==null?s.push(w):s=[w])}}else if(d===De.current){if(T=d.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(s!==null?s.push(Wc):s=[Wc])}d=d.return}s!==null&&dp(r,s,o,c),r.flags|=262144}function ef(s){for(s=s.firstContext;s!==null;){if(!qn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function za(s){Ua=s,xs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function un(s){return NE(Ua,s)}function tf(s,r){return Ua===null&&za(s),NE(s,r)}function NE(s,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},xs===null){if(s===null)throw Error(i(308));xs=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else xs=xs.next=r;return o}var B1=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(o,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(o){return o()})}},F1=n.unstable_scheduleCallback,H1=n.unstable_NormalPriority,Ut={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mp(){return{controller:new B1,data:new Map,refCount:0}}function bc(s){s.refCount--,s.refCount===0&&F1(H1,function(){s.controller.abort()})}var wc=null,pp=0,Uo=0,zo=null;function q1(s,r){if(wc===null){var o=wc=[];pp=0,Uo=yg(),zo={status:"pending",value:void 0,then:function(c){o.push(c)}}}return pp++,r.then(xE,xE),r}function xE(){if(--pp===0&&wc!==null){zo!==null&&(zo.status="fulfilled");var s=wc;wc=null,Uo=0,zo=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function G1(s,r){var o=[],c={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var d=0;d<o.length;d++)(0,o[d])(r)},function(d){for(c.status="rejected",c.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),c}var OE=Z.S;Z.S=function(s,r){mS=An(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&q1(s,r),OE!==null&&OE(s,r)};var Ba=M(null);function gp(){var s=Ba.current;return s!==null?s:ft.pooledCache}function nf(s,r){r===null?J(Ba,Ba.current):J(Ba,r.pool)}function DE(){var s=gp();return s===null?null:{parent:Ut._currentValue,pool:s}}var Bo=Error(i(460)),_p=Error(i(474)),sf=Error(i(542)),rf={then:function(){}};function kE(s){return s=s.status,s==="fulfilled"||s==="rejected"}function PE(s,r,o){switch(o=s[o],o===void 0?s.push(r):o!==r&&(r.then(Ai,Ai),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,LE(s),s;default:if(typeof r.status=="string")r.then(Ai,Ai);else{if(s=ft,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var d=r;d.status="fulfilled",d.value=c}},function(c){if(r.status==="pending"){var d=r;d.status="rejected",d.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,LE(s),s}throw Ha=r,Bo}}function Fa(s){try{var r=s._init;return r(s._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Ha=o,Bo):o}}var Ha=null;function ME(){if(Ha===null)throw Error(i(459));var s=Ha;return Ha=null,s}function LE(s){if(s===Bo||s===sf)throw Error(i(483))}var Fo=null,Cc=0;function af(s){var r=Cc;return Cc+=1,Fo===null&&(Fo=[]),PE(Fo,s,r)}function Ac(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function of(s,r){throw r.$$typeof===b?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function jE(s){function r(z,j){if(s){var H=z.deletions;H===null?(z.deletions=[j],z.flags|=16):H.push(j)}}function o(z,j){if(!s)return null;for(;j!==null;)r(z,j),j=j.sibling;return null}function c(z){for(var j=new Map;z!==null;)z.key!==null?j.set(z.key,z):j.set(z.index,z),z=z.sibling;return j}function d(z,j){return z=Is(z,j),z.index=0,z.sibling=null,z}function p(z,j,H){return z.index=H,s?(H=z.alternate,H!==null?(H=H.index,H<j?(z.flags|=67108866,j):H):(z.flags|=67108866,j)):(z.flags|=1048576,j)}function T(z){return s&&z.alternate===null&&(z.flags|=67108866),z}function w(z,j,H,te){return j===null||j.tag!==6?(j=rp(H,z.mode,te),j.return=z,j):(j=d(j,H),j.return=z,j)}function k(z,j,H,te){var _e=H.type;return _e===V?ee(z,j,H.props.children,te,H.key):j!==null&&(j.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===R&&Fa(_e)===j.type)?(j=d(j,H.props),Ac(j,H),j.return=z,j):(j=Jh(H.type,H.key,H.props,null,z.mode,te),Ac(j,H),j.return=z,j)}function q(z,j,H,te){return j===null||j.tag!==4||j.stateNode.containerInfo!==H.containerInfo||j.stateNode.implementation!==H.implementation?(j=ap(H,z.mode,te),j.return=z,j):(j=d(j,H.children||[]),j.return=z,j)}function ee(z,j,H,te,_e){return j===null||j.tag!==7?(j=ja(H,z.mode,te,_e),j.return=z,j):(j=d(j,H),j.return=z,j)}function ne(z,j,H){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=rp(""+j,z.mode,H),j.return=z,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case A:return H=Jh(j.type,j.key,j.props,null,z.mode,H),Ac(H,j),H.return=z,H;case I:return j=ap(j,z.mode,H),j.return=z,j;case R:return j=Fa(j),ne(z,j,H)}if(Oe(j)||B(j))return j=ja(j,z.mode,H,null),j.return=z,j;if(typeof j.then=="function")return ne(z,af(j),H);if(j.$$typeof===$)return ne(z,tf(z,j),H);of(z,j)}return null}function Y(z,j,H,te){var _e=j!==null?j.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return _e!==null?null:w(z,j,""+H,te);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case A:return H.key===_e?k(z,j,H,te):null;case I:return H.key===_e?q(z,j,H,te):null;case R:return H=Fa(H),Y(z,j,H,te)}if(Oe(H)||B(H))return _e!==null?null:ee(z,j,H,te,null);if(typeof H.then=="function")return Y(z,j,af(H),te);if(H.$$typeof===$)return Y(z,j,tf(z,H),te);of(z,H)}return null}function W(z,j,H,te,_e){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return z=z.get(H)||null,w(j,z,""+te,_e);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case A:return z=z.get(te.key===null?H:te.key)||null,k(j,z,te,_e);case I:return z=z.get(te.key===null?H:te.key)||null,q(j,z,te,_e);case R:return te=Fa(te),W(z,j,H,te,_e)}if(Oe(te)||B(te))return z=z.get(H)||null,ee(j,z,te,_e,null);if(typeof te.then=="function")return W(z,j,H,af(te),_e);if(te.$$typeof===$)return W(z,j,H,tf(j,te),_e);of(j,te)}return null}function de(z,j,H,te){for(var _e=null,Ke=null,me=j,xe=j=0,Fe=null;me!==null&&xe<H.length;xe++){me.index>xe?(Fe=me,me=null):Fe=me.sibling;var Qe=Y(z,me,H[xe],te);if(Qe===null){me===null&&(me=Fe);break}s&&me&&Qe.alternate===null&&r(z,me),j=p(Qe,j,xe),Ke===null?_e=Qe:Ke.sibling=Qe,Ke=Qe,me=Fe}if(xe===H.length)return o(z,me),Ge&&Ns(z,xe),_e;if(me===null){for(;xe<H.length;xe++)me=ne(z,H[xe],te),me!==null&&(j=p(me,j,xe),Ke===null?_e=me:Ke.sibling=me,Ke=me);return Ge&&Ns(z,xe),_e}for(me=c(me);xe<H.length;xe++)Fe=W(me,z,xe,H[xe],te),Fe!==null&&(s&&Fe.alternate!==null&&me.delete(Fe.key===null?xe:Fe.key),j=p(Fe,j,xe),Ke===null?_e=Fe:Ke.sibling=Fe,Ke=Fe);return s&&me.forEach(function(zr){return r(z,zr)}),Ge&&Ns(z,xe),_e}function Se(z,j,H,te){if(H==null)throw Error(i(151));for(var _e=null,Ke=null,me=j,xe=j=0,Fe=null,Qe=H.next();me!==null&&!Qe.done;xe++,Qe=H.next()){me.index>xe?(Fe=me,me=null):Fe=me.sibling;var zr=Y(z,me,Qe.value,te);if(zr===null){me===null&&(me=Fe);break}s&&me&&zr.alternate===null&&r(z,me),j=p(zr,j,xe),Ke===null?_e=zr:Ke.sibling=zr,Ke=zr,me=Fe}if(Qe.done)return o(z,me),Ge&&Ns(z,xe),_e;if(me===null){for(;!Qe.done;xe++,Qe=H.next())Qe=ne(z,Qe.value,te),Qe!==null&&(j=p(Qe,j,xe),Ke===null?_e=Qe:Ke.sibling=Qe,Ke=Qe);return Ge&&Ns(z,xe),_e}for(me=c(me);!Qe.done;xe++,Qe=H.next())Qe=W(me,z,xe,Qe.value,te),Qe!==null&&(s&&Qe.alternate!==null&&me.delete(Qe.key===null?xe:Qe.key),j=p(Qe,j,xe),Ke===null?_e=Qe:Ke.sibling=Qe,Ke=Qe);return s&&me.forEach(function(nx){return r(z,nx)}),Ge&&Ns(z,xe),_e}function ot(z,j,H,te){if(typeof H=="object"&&H!==null&&H.type===V&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case A:e:{for(var _e=H.key;j!==null;){if(j.key===_e){if(_e=H.type,_e===V){if(j.tag===7){o(z,j.sibling),te=d(j,H.props.children),te.return=z,z=te;break e}}else if(j.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===R&&Fa(_e)===j.type){o(z,j.sibling),te=d(j,H.props),Ac(te,H),te.return=z,z=te;break e}o(z,j);break}else r(z,j);j=j.sibling}H.type===V?(te=ja(H.props.children,z.mode,te,H.key),te.return=z,z=te):(te=Jh(H.type,H.key,H.props,null,z.mode,te),Ac(te,H),te.return=z,z=te)}return T(z);case I:e:{for(_e=H.key;j!==null;){if(j.key===_e)if(j.tag===4&&j.stateNode.containerInfo===H.containerInfo&&j.stateNode.implementation===H.implementation){o(z,j.sibling),te=d(j,H.children||[]),te.return=z,z=te;break e}else{o(z,j);break}else r(z,j);j=j.sibling}te=ap(H,z.mode,te),te.return=z,z=te}return T(z);case R:return H=Fa(H),ot(z,j,H,te)}if(Oe(H))return de(z,j,H,te);if(B(H)){if(_e=B(H),typeof _e!="function")throw Error(i(150));return H=_e.call(H),Se(z,j,H,te)}if(typeof H.then=="function")return ot(z,j,af(H),te);if(H.$$typeof===$)return ot(z,j,tf(z,H),te);of(z,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,j!==null&&j.tag===6?(o(z,j.sibling),te=d(j,H),te.return=z,z=te):(o(z,j),te=rp(H,z.mode,te),te.return=z,z=te),T(z)):o(z,j)}return function(z,j,H,te){try{Cc=0;var _e=ot(z,j,H,te);return Fo=null,_e}catch(me){if(me===Bo||me===sf)throw me;var Ke=Gn(29,me,null,z.mode);return Ke.lanes=te,Ke.return=z,Ke}finally{}}}var qa=jE(!0),VE=jE(!1),br=!1;function yp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vp(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function wr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Cr(s,r,o){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(Je&2)!==0){var d=c.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),c.pending=r,r=Xh(s),TE(s,null,o),r}return $h(s,c,r,o),Xh(s)}function Rc(s,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,o|=c,r.lanes=o,ec(s,o)}}function Ep(s,r){var o=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var d=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var T={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?d=p=T:p=p.next=T,o=o.next}while(o!==null);p===null?d=p=r:p=p.next=r}else d=p=r;o={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},s.updateQueue=o;return}s=o.lastBaseUpdate,s===null?o.firstBaseUpdate=r:s.next=r,o.lastBaseUpdate=r}var Tp=!1;function Ic(){if(Tp){var s=zo;if(s!==null)throw s}}function Nc(s,r,o,c){Tp=!1;var d=s.updateQueue;br=!1;var p=d.firstBaseUpdate,T=d.lastBaseUpdate,w=d.shared.pending;if(w!==null){d.shared.pending=null;var k=w,q=k.next;k.next=null,T===null?p=q:T.next=q,T=k;var ee=s.alternate;ee!==null&&(ee=ee.updateQueue,w=ee.lastBaseUpdate,w!==T&&(w===null?ee.firstBaseUpdate=q:w.next=q,ee.lastBaseUpdate=k))}if(p!==null){var ne=d.baseState;T=0,ee=q=k=null,w=p;do{var Y=w.lane&-536870913,W=Y!==w.lane;if(W?(Be&Y)===Y:(c&Y)===Y){Y!==0&&Y===Uo&&(Tp=!0),ee!==null&&(ee=ee.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var de=s,Se=w;Y=r;var ot=o;switch(Se.tag){case 1:if(de=Se.payload,typeof de=="function"){ne=de.call(ot,ne,Y);break e}ne=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=Se.payload,Y=typeof de=="function"?de.call(ot,ne,Y):de,Y==null)break e;ne=E({},ne,Y);break e;case 2:br=!0}}Y=w.callback,Y!==null&&(s.flags|=64,W&&(s.flags|=8192),W=d.callbacks,W===null?d.callbacks=[Y]:W.push(Y))}else W={lane:Y,tag:w.tag,payload:w.payload,callback:w.callback,next:null},ee===null?(q=ee=W,k=ne):ee=ee.next=W,T|=Y;if(w=w.next,w===null){if(w=d.shared.pending,w===null)break;W=w,w=W.next,W.next=null,d.lastBaseUpdate=W,d.shared.pending=null}}while(!0);ee===null&&(k=ne),d.baseState=k,d.firstBaseUpdate=q,d.lastBaseUpdate=ee,p===null&&(d.shared.lanes=0),xr|=T,s.lanes=T,s.memoizedState=ne}}function UE(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function zE(s,r){var o=s.callbacks;if(o!==null)for(s.callbacks=null,s=0;s<o.length;s++)UE(o[s],r)}var Ho=M(null),lf=M(0);function BE(s,r){s=zs,J(lf,s),J(Ho,r),zs=s|r.baseLanes}function Sp(){J(lf,zs),J(Ho,Ho.current)}function bp(){zs=lf.current,G(Ho),G(lf)}var Yn=M(null),fi=null;function Ar(s){var r=s.alternate;J(Ot,Ot.current&1),J(Yn,s),fi===null&&(r===null||Ho.current!==null||r.memoizedState!==null)&&(fi=s)}function wp(s){J(Ot,Ot.current),J(Yn,s),fi===null&&(fi=s)}function FE(s){s.tag===22?(J(Ot,Ot.current),J(Yn,s),fi===null&&(fi=s)):Rr()}function Rr(){J(Ot,Ot.current),J(Yn,Yn.current)}function Kn(s){G(Yn),fi===s&&(fi=null),G(Ot)}var Ot=M(0);function cf(s){for(var r=s;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||xg(o)||Og(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ds=0,Ne=null,rt=null,zt=null,uf=!1,qo=!1,Ga=!1,hf=0,xc=0,Go=null,Y1=0;function wt(){throw Error(i(321))}function Cp(s,r){if(r===null)return!1;for(var o=0;o<r.length&&o<s.length;o++)if(!qn(s[o],r[o]))return!1;return!0}function Ap(s,r,o,c,d,p){return Ds=p,Ne=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Z.H=s===null||s.memoizedState===null?CT:Bp,Ga=!1,p=o(c,d),Ga=!1,qo&&(p=qE(r,o,c,d)),HE(s),p}function HE(s){Z.H=kc;var r=rt!==null&&rt.next!==null;if(Ds=0,zt=rt=Ne=null,uf=!1,xc=0,Go=null,r)throw Error(i(300));s===null||Bt||(s=s.dependencies,s!==null&&ef(s)&&(Bt=!0))}function qE(s,r,o,c){Ne=s;var d=0;do{if(qo&&(Go=null),xc=0,qo=!1,25<=d)throw Error(i(301));if(d+=1,zt=rt=null,s.updateQueue!=null){var p=s.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}Z.H=AT,p=r(o,c)}while(qo);return p}function K1(){var s=Z.H,r=s.useState()[0];return r=typeof r.then=="function"?Oc(r):r,s=s.useState()[0],(rt!==null?rt.memoizedState:null)!==s&&(Ne.flags|=1024),r}function Rp(){var s=hf!==0;return hf=0,s}function Ip(s,r,o){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~o}function Np(s){if(uf){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}uf=!1}Ds=0,zt=rt=Ne=null,qo=!1,xc=hf=0,Go=null}function In(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?Ne.memoizedState=zt=s:zt=zt.next=s,zt}function Dt(){if(rt===null){var s=Ne.alternate;s=s!==null?s.memoizedState:null}else s=rt.next;var r=zt===null?Ne.memoizedState:zt.next;if(r!==null)zt=r,rt=s;else{if(s===null)throw Ne.alternate===null?Error(i(467)):Error(i(310));rt=s,s={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},zt===null?Ne.memoizedState=zt=s:zt=zt.next=s}return zt}function ff(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Oc(s){var r=xc;return xc+=1,Go===null&&(Go=[]),s=PE(Go,s,r),r=Ne,(zt===null?r.memoizedState:zt.next)===null&&(r=r.alternate,Z.H=r===null||r.memoizedState===null?CT:Bp),s}function df(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Oc(s);if(s.$$typeof===$)return un(s)}throw Error(i(438,String(s)))}function xp(s){var r=null,o=Ne.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var c=Ne.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(d){return d.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=ff(),Ne.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(s),c=0;c<s;c++)o[c]=U;return r.index++,o}function ks(s,r){return typeof r=="function"?r(s):r}function mf(s){var r=Dt();return Op(r,rt,s)}function Op(s,r,o){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var d=s.baseQueue,p=c.pending;if(p!==null){if(d!==null){var T=d.next;d.next=p.next,p.next=T}r.baseQueue=d=p,c.pending=null}if(p=s.baseState,d===null)s.memoizedState=p;else{r=d.next;var w=T=null,k=null,q=r,ee=!1;do{var ne=q.lane&-536870913;if(ne!==q.lane?(Be&ne)===ne:(Ds&ne)===ne){var Y=q.revertLane;if(Y===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),ne===Uo&&(ee=!0);else if((Ds&Y)===Y){q=q.next,Y===Uo&&(ee=!0);continue}else ne={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},k===null?(w=k=ne,T=p):k=k.next=ne,Ne.lanes|=Y,xr|=Y;ne=q.action,Ga&&o(p,ne),p=q.hasEagerState?q.eagerState:o(p,ne)}else Y={lane:ne,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},k===null?(w=k=Y,T=p):k=k.next=Y,Ne.lanes|=ne,xr|=ne;q=q.next}while(q!==null&&q!==r);if(k===null?T=p:k.next=w,!qn(p,s.memoizedState)&&(Bt=!0,ee&&(o=zo,o!==null)))throw o;s.memoizedState=p,s.baseState=T,s.baseQueue=k,c.lastRenderedState=p}return d===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function Dp(s){var r=Dt(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=s;var c=o.dispatch,d=o.pending,p=r.memoizedState;if(d!==null){o.pending=null;var T=d=d.next;do p=s(p,T.action),T=T.next;while(T!==d);qn(p,r.memoizedState)||(Bt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),o.lastRenderedState=p}return[p,c]}function GE(s,r,o){var c=Ne,d=Dt(),p=Ge;if(p){if(o===void 0)throw Error(i(407));o=o()}else o=r();var T=!qn((rt||d).memoizedState,o);if(T&&(d.memoizedState=o,Bt=!0),d=d.queue,Mp(QE.bind(null,c,d,s),[s]),d.getSnapshot!==r||T||zt!==null&&zt.memoizedState.tag&1){if(c.flags|=2048,Yo(9,{destroy:void 0},KE.bind(null,c,d,o,r),null),ft===null)throw Error(i(349));p||(Ds&127)!==0||YE(c,r,o)}return o}function YE(s,r,o){s.flags|=16384,s={getSnapshot:r,value:o},r=Ne.updateQueue,r===null?(r=ff(),Ne.updateQueue=r,r.stores=[s]):(o=r.stores,o===null?r.stores=[s]:o.push(s))}function KE(s,r,o,c){r.value=o,r.getSnapshot=c,WE(r)&&$E(s)}function QE(s,r,o){return o(function(){WE(r)&&$E(s)})}function WE(s){var r=s.getSnapshot;s=s.value;try{var o=r();return!qn(s,o)}catch{return!0}}function $E(s){var r=La(s,2);r!==null&&Vn(r,s,2)}function kp(s){var r=In();if(typeof s=="function"){var o=s;if(s=o(),Ga){ni(!0);try{o()}finally{ni(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ks,lastRenderedState:s},r}function XE(s,r,o,c){return s.baseState=o,Op(s,rt,typeof c=="function"?c:ks)}function Q1(s,r,o,c,d){if(_f(s))throw Error(i(485));if(s=r.action,s!==null){var p={payload:d,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){p.listeners.push(T)}};Z.T!==null?o(!0):p.isTransition=!1,c(p),o=r.pending,o===null?(p.next=r.pending=p,JE(r,p)):(p.next=o.next,r.pending=o.next=p)}}function JE(s,r){var o=r.action,c=r.payload,d=s.state;if(r.isTransition){var p=Z.T,T={};Z.T=T;try{var w=o(d,c),k=Z.S;k!==null&&k(T,w),ZE(s,r,w)}catch(q){Pp(s,r,q)}finally{p!==null&&T.types!==null&&(p.types=T.types),Z.T=p}}else try{p=o(d,c),ZE(s,r,p)}catch(q){Pp(s,r,q)}}function ZE(s,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){eT(s,r,c)},function(c){return Pp(s,r,c)}):eT(s,r,o)}function eT(s,r,o){r.status="fulfilled",r.value=o,tT(r),s.state=o,r=s.pending,r!==null&&(o=r.next,o===r?s.pending=null:(o=o.next,r.next=o,JE(s,o)))}function Pp(s,r,o){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=o,tT(r),r=r.next;while(r!==c)}s.action=null}function tT(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function nT(s,r){return r}function iT(s,r){if(Ge){var o=ft.formState;if(o!==null){e:{var c=Ne;if(Ge){if(pt){t:{for(var d=pt,p=hi;d.nodeType!==8;){if(!p){d=null;break t}if(d=di(d.nextSibling),d===null){d=null;break t}}p=d.data,d=p==="F!"||p==="F"?d:null}if(d){pt=di(d.nextSibling),c=d.data==="F!";break e}}Tr(c)}c=!1}c&&(r=o[0])}}return o=In(),o.memoizedState=o.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nT,lastRenderedState:r},o.queue=c,o=ST.bind(null,Ne,c),c.dispatch=o,c=kp(!1),p=zp.bind(null,Ne,!1,c.queue),c=In(),d={state:r,dispatch:null,action:s,pending:null},c.queue=d,o=Q1.bind(null,Ne,d,p,o),d.dispatch=o,c.memoizedState=s,[r,o,!1]}function sT(s){var r=Dt();return rT(r,rt,s)}function rT(s,r,o){if(r=Op(s,r,nT)[0],s=mf(ks)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=Oc(r)}catch(T){throw T===Bo?sf:T}else c=r;r=Dt();var d=r.queue,p=d.dispatch;return o!==r.memoizedState&&(Ne.flags|=2048,Yo(9,{destroy:void 0},W1.bind(null,d,o),null)),[c,p,s]}function W1(s,r){s.action=r}function aT(s){var r=Dt(),o=rt;if(o!==null)return rT(r,o,s);Dt(),r=r.memoizedState,o=Dt();var c=o.queue.dispatch;return o.memoizedState=s,[r,c,!1]}function Yo(s,r,o,c){return s={tag:s,create:o,deps:c,inst:r,next:null},r=Ne.updateQueue,r===null&&(r=ff(),Ne.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=s.next=s:(c=o.next,o.next=s,s.next=c,r.lastEffect=s),s}function oT(){return Dt().memoizedState}function pf(s,r,o,c){var d=In();Ne.flags|=s,d.memoizedState=Yo(1|r,{destroy:void 0},o,c===void 0?null:c)}function gf(s,r,o,c){var d=Dt();c=c===void 0?null:c;var p=d.memoizedState.inst;rt!==null&&c!==null&&Cp(c,rt.memoizedState.deps)?d.memoizedState=Yo(r,p,o,c):(Ne.flags|=s,d.memoizedState=Yo(1|r,p,o,c))}function lT(s,r){pf(8390656,8,s,r)}function Mp(s,r){gf(2048,8,s,r)}function $1(s){Ne.flags|=4;var r=Ne.updateQueue;if(r===null)r=ff(),Ne.updateQueue=r,r.events=[s];else{var o=r.events;o===null?r.events=[s]:o.push(s)}}function cT(s){var r=Dt().memoizedState;return $1({ref:r,nextImpl:s}),function(){if((Je&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function uT(s,r){return gf(4,2,s,r)}function hT(s,r){return gf(4,4,s,r)}function fT(s,r){if(typeof r=="function"){s=s();var o=r(s);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function dT(s,r,o){o=o!=null?o.concat([s]):null,gf(4,4,fT.bind(null,r,s),o)}function Lp(){}function mT(s,r){var o=Dt();r=r===void 0?null:r;var c=o.memoizedState;return r!==null&&Cp(r,c[1])?c[0]:(o.memoizedState=[s,r],s)}function pT(s,r){var o=Dt();r=r===void 0?null:r;var c=o.memoizedState;if(r!==null&&Cp(r,c[1]))return c[0];if(c=s(),Ga){ni(!0);try{s()}finally{ni(!1)}}return o.memoizedState=[c,r],c}function jp(s,r,o){return o===void 0||(Ds&1073741824)!==0&&(Be&261930)===0?s.memoizedState=r:(s.memoizedState=o,s=gS(),Ne.lanes|=s,xr|=s,o)}function gT(s,r,o,c){return qn(o,r)?o:Ho.current!==null?(s=jp(s,o,c),qn(s,r)||(Bt=!0),s):(Ds&42)===0||(Ds&1073741824)!==0&&(Be&261930)===0?(Bt=!0,s.memoizedState=o):(s=gS(),Ne.lanes|=s,xr|=s,r)}function _T(s,r,o,c,d){var p=se.p;se.p=p!==0&&8>p?p:8;var T=Z.T,w={};Z.T=w,zp(s,!1,r,o);try{var k=d(),q=Z.S;if(q!==null&&q(w,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var ee=G1(k,c);Dc(s,r,ee,$n(s))}else Dc(s,r,c,$n(s))}catch(ne){Dc(s,r,{then:function(){},status:"rejected",reason:ne},$n())}finally{se.p=p,T!==null&&w.types!==null&&(T.types=w.types),Z.T=T}}function X1(){}function Vp(s,r,o,c){if(s.tag!==5)throw Error(i(476));var d=yT(s).queue;_T(s,d,r,he,o===null?X1:function(){return vT(s),o(c)})}function yT(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ks,lastRenderedState:he},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ks,lastRenderedState:o},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function vT(s){var r=yT(s);r.next===null&&(r=s.alternate.memoizedState),Dc(s,r.next.queue,{},$n())}function Up(){return un(Wc)}function ET(){return Dt().memoizedState}function TT(){return Dt().memoizedState}function J1(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var o=$n();s=wr(o);var c=Cr(r,s,o);c!==null&&(Vn(c,r,o),Rc(c,r,o)),r={cache:mp()},s.payload=r;return}r=r.return}}function Z1(s,r,o){var c=$n();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},_f(s)?bT(r,o):(o=ip(s,r,o,c),o!==null&&(Vn(o,s,c),wT(o,r,c)))}function ST(s,r,o){var c=$n();Dc(s,r,o,c)}function Dc(s,r,o,c){var d={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(_f(s))bT(r,d);else{var p=s.alternate;if(s.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var T=r.lastRenderedState,w=p(T,o);if(d.hasEagerState=!0,d.eagerState=w,qn(w,T))return $h(s,r,d,0),ft===null&&Wh(),!1}catch{}finally{}if(o=ip(s,r,d,c),o!==null)return Vn(o,s,c),wT(o,r,c),!0}return!1}function zp(s,r,o,c){if(c={lane:2,revertLane:yg(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},_f(s)){if(r)throw Error(i(479))}else r=ip(s,o,c,2),r!==null&&Vn(r,s,2)}function _f(s){var r=s.alternate;return s===Ne||r!==null&&r===Ne}function bT(s,r){qo=uf=!0;var o=s.pending;o===null?r.next=r:(r.next=o.next,o.next=r),s.pending=r}function wT(s,r,o){if((o&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,o|=c,r.lanes=o,ec(s,o)}}var kc={readContext:un,use:df,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useLayoutEffect:wt,useInsertionEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useSyncExternalStore:wt,useId:wt,useHostTransitionStatus:wt,useFormState:wt,useActionState:wt,useOptimistic:wt,useMemoCache:wt,useCacheRefresh:wt};kc.useEffectEvent=wt;var CT={readContext:un,use:df,useCallback:function(s,r){return In().memoizedState=[s,r===void 0?null:r],s},useContext:un,useEffect:lT,useImperativeHandle:function(s,r,o){o=o!=null?o.concat([s]):null,pf(4194308,4,fT.bind(null,r,s),o)},useLayoutEffect:function(s,r){return pf(4194308,4,s,r)},useInsertionEffect:function(s,r){pf(4,2,s,r)},useMemo:function(s,r){var o=In();r=r===void 0?null:r;var c=s();if(Ga){ni(!0);try{s()}finally{ni(!1)}}return o.memoizedState=[c,r],c},useReducer:function(s,r,o){var c=In();if(o!==void 0){var d=o(r);if(Ga){ni(!0);try{o(r)}finally{ni(!1)}}}else d=r;return c.memoizedState=c.baseState=d,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:d},c.queue=s,s=s.dispatch=Z1.bind(null,Ne,s),[c.memoizedState,s]},useRef:function(s){var r=In();return s={current:s},r.memoizedState=s},useState:function(s){s=kp(s);var r=s.queue,o=ST.bind(null,Ne,r);return r.dispatch=o,[s.memoizedState,o]},useDebugValue:Lp,useDeferredValue:function(s,r){var o=In();return jp(o,s,r)},useTransition:function(){var s=kp(!1);return s=_T.bind(null,Ne,s.queue,!0,!1),In().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,o){var c=Ne,d=In();if(Ge){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),ft===null)throw Error(i(349));(Be&127)!==0||YE(c,r,o)}d.memoizedState=o;var p={value:o,getSnapshot:r};return d.queue=p,lT(QE.bind(null,c,p,s),[s]),c.flags|=2048,Yo(9,{destroy:void 0},KE.bind(null,c,p,o,r),null),o},useId:function(){var s=In(),r=ft.identifierPrefix;if(Ge){var o=os,c=as;o=(c&~(1<<32-Nt(c)-1)).toString(32)+o,r="_"+r+"R_"+o,o=hf++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=Y1++,r="_"+r+"r_"+o.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:Up,useFormState:iT,useActionState:iT,useOptimistic:function(s){var r=In();r.memoizedState=r.baseState=s;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=zp.bind(null,Ne,!0,o),o.dispatch=r,[s,r]},useMemoCache:xp,useCacheRefresh:function(){return In().memoizedState=J1.bind(null,Ne)},useEffectEvent:function(s){var r=In(),o={impl:s};return r.memoizedState=o,function(){if((Je&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},Bp={readContext:un,use:df,useCallback:mT,useContext:un,useEffect:Mp,useImperativeHandle:dT,useInsertionEffect:uT,useLayoutEffect:hT,useMemo:pT,useReducer:mf,useRef:oT,useState:function(){return mf(ks)},useDebugValue:Lp,useDeferredValue:function(s,r){var o=Dt();return gT(o,rt.memoizedState,s,r)},useTransition:function(){var s=mf(ks)[0],r=Dt().memoizedState;return[typeof s=="boolean"?s:Oc(s),r]},useSyncExternalStore:GE,useId:ET,useHostTransitionStatus:Up,useFormState:sT,useActionState:sT,useOptimistic:function(s,r){var o=Dt();return XE(o,rt,s,r)},useMemoCache:xp,useCacheRefresh:TT};Bp.useEffectEvent=cT;var AT={readContext:un,use:df,useCallback:mT,useContext:un,useEffect:Mp,useImperativeHandle:dT,useInsertionEffect:uT,useLayoutEffect:hT,useMemo:pT,useReducer:Dp,useRef:oT,useState:function(){return Dp(ks)},useDebugValue:Lp,useDeferredValue:function(s,r){var o=Dt();return rt===null?jp(o,s,r):gT(o,rt.memoizedState,s,r)},useTransition:function(){var s=Dp(ks)[0],r=Dt().memoizedState;return[typeof s=="boolean"?s:Oc(s),r]},useSyncExternalStore:GE,useId:ET,useHostTransitionStatus:Up,useFormState:aT,useActionState:aT,useOptimistic:function(s,r){var o=Dt();return rt!==null?XE(o,rt,s,r):(o.baseState=s,[s,o.queue.dispatch])},useMemoCache:xp,useCacheRefresh:TT};AT.useEffectEvent=cT;function Fp(s,r,o,c){r=s.memoizedState,o=o(c,r),o=o==null?r:E({},r,o),s.memoizedState=o,s.lanes===0&&(s.updateQueue.baseState=o)}var Hp={enqueueSetState:function(s,r,o){s=s._reactInternals;var c=$n(),d=wr(c);d.payload=r,o!=null&&(d.callback=o),r=Cr(s,d,c),r!==null&&(Vn(r,s,c),Rc(r,s,c))},enqueueReplaceState:function(s,r,o){s=s._reactInternals;var c=$n(),d=wr(c);d.tag=1,d.payload=r,o!=null&&(d.callback=o),r=Cr(s,d,c),r!==null&&(Vn(r,s,c),Rc(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var o=$n(),c=wr(o);c.tag=2,r!=null&&(c.callback=r),r=Cr(s,c,o),r!==null&&(Vn(r,s,o),Rc(r,s,o))}};function RT(s,r,o,c,d,p,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,p,T):r.prototype&&r.prototype.isPureReactComponent?!vc(o,c)||!vc(d,p):!0}function IT(s,r,o,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==s&&Hp.enqueueReplaceState(r,r.state,null)}function Ya(s,r){var o=r;if("ref"in r){o={};for(var c in r)c!=="ref"&&(o[c]=r[c])}if(s=s.defaultProps){o===r&&(o=E({},o));for(var d in s)o[d]===void 0&&(o[d]=s[d])}return o}function NT(s){Qh(s)}function xT(s){console.error(s)}function OT(s){Qh(s)}function yf(s,r){try{var o=s.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function DT(s,r,o){try{var c=s.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function qp(s,r,o){return o=wr(o),o.tag=3,o.payload={element:null},o.callback=function(){yf(s,r)},o}function kT(s){return s=wr(s),s.tag=3,s}function PT(s,r,o,c){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var p=c.value;s.payload=function(){return d(p)},s.callback=function(){DT(r,o,c)}}var T=o.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(s.callback=function(){DT(r,o,c),typeof d!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function eN(s,r,o,c,d){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=o.alternate,r!==null&&Vo(r,o,d,!0),o=Yn.current,o!==null){switch(o.tag){case 31:case 13:return fi===null?xf():o.alternate===null&&Ct===0&&(Ct=3),o.flags&=-257,o.flags|=65536,o.lanes=d,c===rf?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([c]):r.add(c),pg(s,c,d)),!1;case 22:return o.flags|=65536,c===rf?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([c]):o.add(c)),pg(s,c,d)),!1}throw Error(i(435,o.tag))}return pg(s,c,d),xf(),!1}if(Ge)return r=Yn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=d,c!==cp&&(s=Error(i(422),{cause:c}),Sc(li(s,o)))):(c!==cp&&(r=Error(i(423),{cause:c}),Sc(li(r,o))),s=s.current.alternate,s.flags|=65536,d&=-d,s.lanes|=d,c=li(c,o),d=qp(s.stateNode,c,d),Ep(s,d),Ct!==4&&(Ct=2)),!1;var p=Error(i(520),{cause:c});if(p=li(p,o),Bc===null?Bc=[p]:Bc.push(p),Ct!==4&&(Ct=2),r===null)return!0;c=li(c,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,s=d&-d,o.lanes|=s,s=qp(o.stateNode,c,s),Ep(o,s),!1;case 1:if(r=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Or===null||!Or.has(p))))return o.flags|=65536,d&=-d,o.lanes|=d,d=kT(d),PT(d,s,o,c),Ep(o,d),!1}o=o.return}while(o!==null);return!1}var Gp=Error(i(461)),Bt=!1;function hn(s,r,o,c){r.child=s===null?VE(r,null,o,c):qa(r,s.child,o,c)}function MT(s,r,o,c,d){o=o.render;var p=r.ref;if("ref"in c){var T={};for(var w in c)w!=="ref"&&(T[w]=c[w])}else T=c;return za(r),c=Ap(s,r,o,T,p,d),w=Rp(),s!==null&&!Bt?(Ip(s,r,d),Ps(s,r,d)):(Ge&&w&&op(r),r.flags|=1,hn(s,r,c,d),r.child)}function LT(s,r,o,c,d){if(s===null){var p=o.type;return typeof p=="function"&&!sp(p)&&p.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=p,jT(s,r,p,c,d)):(s=Jh(o.type,null,c,r,r.mode,d),s.ref=r.ref,s.return=r,r.child=s)}if(p=s.child,!Zp(s,d)){var T=p.memoizedProps;if(o=o.compare,o=o!==null?o:vc,o(T,c)&&s.ref===r.ref)return Ps(s,r,d)}return r.flags|=1,s=Is(p,c),s.ref=r.ref,s.return=r,r.child=s}function jT(s,r,o,c,d){if(s!==null){var p=s.memoizedProps;if(vc(p,c)&&s.ref===r.ref)if(Bt=!1,r.pendingProps=c=p,Zp(s,d))(s.flags&131072)!==0&&(Bt=!0);else return r.lanes=s.lanes,Ps(s,r,d)}return Yp(s,r,o,c,d)}function VT(s,r,o,c){var d=c.children,p=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,s!==null){for(c=r.child=s.child,d=0;c!==null;)d=d|c.lanes|c.childLanes,c=c.sibling;c=d&~p}else c=0,r.child=null;return UT(s,r,p,o,c)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&nf(r,p!==null?p.cachePool:null),p!==null?BE(r,p):Sp(),FE(r);else return c=r.lanes=536870912,UT(s,r,p!==null?p.baseLanes|o:o,o,c)}else p!==null?(nf(r,p.cachePool),BE(r,p),Rr(),r.memoizedState=null):(s!==null&&nf(r,null),Sp(),Rr());return hn(s,r,d,o),r.child}function Pc(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function UT(s,r,o,c,d){var p=gp();return p=p===null?null:{parent:Ut._currentValue,pool:p},r.memoizedState={baseLanes:o,cachePool:p},s!==null&&nf(r,null),Sp(),FE(r),s!==null&&Vo(s,r,c,!0),r.childLanes=d,null}function vf(s,r){return r=Tf({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function zT(s,r,o){return qa(r,s.child,null,o),s=vf(r,r.pendingProps),s.flags|=2,Kn(r),r.memoizedState=null,s}function tN(s,r,o){var c=r.pendingProps,d=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(Ge){if(c.mode==="hidden")return s=vf(r,c),r.lanes=536870912,Pc(null,s);if(wp(r),(s=pt)?(s=JS(s,hi),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:vr!==null?{id:as,overflow:os}:null,retryLane:536870912,hydrationErrors:null},o=bE(s),o.return=r,r.child=o,cn=r,pt=null)):s=null,s===null)throw Tr(r);return r.lanes=536870912,null}return vf(r,c)}var p=s.memoizedState;if(p!==null){var T=p.dehydrated;if(wp(r),d)if(r.flags&256)r.flags&=-257,r=zT(s,r,o);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(Bt||Vo(s,r,o,!1),d=(o&s.childLanes)!==0,Bt||d){if(c=ft,c!==null&&(T=tc(c,o),T!==0&&T!==p.retryLane))throw p.retryLane=T,La(s,T),Vn(c,s,T),Gp;xf(),r=zT(s,r,o)}else s=p.treeContext,pt=di(T.nextSibling),cn=r,Ge=!0,Er=null,hi=!1,s!==null&&AE(r,s),r=vf(r,c),r.flags|=4096;return r}return s=Is(s.child,{mode:c.mode,children:c.children}),s.ref=r.ref,r.child=s,s.return=r,s}function Ef(s,r){var o=r.ref;if(o===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(s===null||s.ref!==o)&&(r.flags|=4194816)}}function Yp(s,r,o,c,d){return za(r),o=Ap(s,r,o,c,void 0,d),c=Rp(),s!==null&&!Bt?(Ip(s,r,d),Ps(s,r,d)):(Ge&&c&&op(r),r.flags|=1,hn(s,r,o,d),r.child)}function BT(s,r,o,c,d,p){return za(r),r.updateQueue=null,o=qE(r,c,o,d),HE(s),c=Rp(),s!==null&&!Bt?(Ip(s,r,p),Ps(s,r,p)):(Ge&&c&&op(r),r.flags|=1,hn(s,r,o,p),r.child)}function FT(s,r,o,c,d){if(za(r),r.stateNode===null){var p=Po,T=o.contextType;typeof T=="object"&&T!==null&&(p=un(T)),p=new o(c,p),r.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Hp,r.stateNode=p,p._reactInternals=r,p=r.stateNode,p.props=c,p.state=r.memoizedState,p.refs={},yp(r),T=o.contextType,p.context=typeof T=="object"&&T!==null?un(T):Po,p.state=r.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(Fp(r,o,T,c),p.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(T=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),T!==p.state&&Hp.enqueueReplaceState(p,p.state,null),Nc(r,c,p,d),Ic(),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){p=r.stateNode;var w=r.memoizedProps,k=Ya(o,w);p.props=k;var q=p.context,ee=o.contextType;T=Po,typeof ee=="object"&&ee!==null&&(T=un(ee));var ne=o.getDerivedStateFromProps;ee=typeof ne=="function"||typeof p.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,ee||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w||q!==T)&&IT(r,p,c,T),br=!1;var Y=r.memoizedState;p.state=Y,Nc(r,c,p,d),Ic(),q=r.memoizedState,w||Y!==q||br?(typeof ne=="function"&&(Fp(r,o,ne,c),q=r.memoizedState),(k=br||RT(r,o,k,c,Y,q,T))?(ee||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(r.flags|=4194308)):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=q),p.props=c,p.state=q,p.context=T,c=k):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{p=r.stateNode,vp(s,r),T=r.memoizedProps,ee=Ya(o,T),p.props=ee,ne=r.pendingProps,Y=p.context,q=o.contextType,k=Po,typeof q=="object"&&q!==null&&(k=un(q)),w=o.getDerivedStateFromProps,(q=typeof w=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T!==ne||Y!==k)&&IT(r,p,c,k),br=!1,Y=r.memoizedState,p.state=Y,Nc(r,c,p,d),Ic();var W=r.memoizedState;T!==ne||Y!==W||br||s!==null&&s.dependencies!==null&&ef(s.dependencies)?(typeof w=="function"&&(Fp(r,o,w,c),W=r.memoizedState),(ee=br||RT(r,o,ee,c,Y,W,k)||s!==null&&s.dependencies!==null&&ef(s.dependencies))?(q||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,W,k),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,W,k)),typeof p.componentDidUpdate=="function"&&(r.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof p.componentDidUpdate!="function"||T===s.memoizedProps&&Y===s.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&Y===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=W),p.props=c,p.state=W,p.context=k,c=ee):(typeof p.componentDidUpdate!="function"||T===s.memoizedProps&&Y===s.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&Y===s.memoizedState||(r.flags|=1024),c=!1)}return p=c,Ef(s,r),c=(r.flags&128)!==0,p||c?(p=r.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:p.render(),r.flags|=1,s!==null&&c?(r.child=qa(r,s.child,null,d),r.child=qa(r,null,o,d)):hn(s,r,o,d),r.memoizedState=p.state,s=r.child):s=Ps(s,r,d),s}function HT(s,r,o,c){return Va(),r.flags|=256,hn(s,r,o,c),r.child}var Kp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qp(s){return{baseLanes:s,cachePool:DE()}}function Wp(s,r,o){return s=s!==null?s.childLanes&~o:0,r&&(s|=Wn),s}function qT(s,r,o){var c=r.pendingProps,d=!1,p=(r.flags&128)!==0,T;if((T=p)||(T=s!==null&&s.memoizedState===null?!1:(Ot.current&2)!==0),T&&(d=!0,r.flags&=-129),T=(r.flags&32)!==0,r.flags&=-33,s===null){if(Ge){if(d?Ar(r):Rr(),(s=pt)?(s=JS(s,hi),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:vr!==null?{id:as,overflow:os}:null,retryLane:536870912,hydrationErrors:null},o=bE(s),o.return=r,r.child=o,cn=r,pt=null)):s=null,s===null)throw Tr(r);return Og(s)?r.lanes=32:r.lanes=536870912,null}var w=c.children;return c=c.fallback,d?(Rr(),d=r.mode,w=Tf({mode:"hidden",children:w},d),c=ja(c,d,o,null),w.return=r,c.return=r,w.sibling=c,r.child=w,c=r.child,c.memoizedState=Qp(o),c.childLanes=Wp(s,T,o),r.memoizedState=Kp,Pc(null,c)):(Ar(r),$p(r,w))}var k=s.memoizedState;if(k!==null&&(w=k.dehydrated,w!==null)){if(p)r.flags&256?(Ar(r),r.flags&=-257,r=Xp(s,r,o)):r.memoizedState!==null?(Rr(),r.child=s.child,r.flags|=128,r=null):(Rr(),w=c.fallback,d=r.mode,c=Tf({mode:"visible",children:c.children},d),w=ja(w,d,o,null),w.flags|=2,c.return=r,w.return=r,c.sibling=w,r.child=c,qa(r,s.child,null,o),c=r.child,c.memoizedState=Qp(o),c.childLanes=Wp(s,T,o),r.memoizedState=Kp,r=Pc(null,c));else if(Ar(r),Og(w)){if(T=w.nextSibling&&w.nextSibling.dataset,T)var q=T.dgst;T=q,c=Error(i(419)),c.stack="",c.digest=T,Sc({value:c,source:null,stack:null}),r=Xp(s,r,o)}else if(Bt||Vo(s,r,o,!1),T=(o&s.childLanes)!==0,Bt||T){if(T=ft,T!==null&&(c=tc(T,o),c!==0&&c!==k.retryLane))throw k.retryLane=c,La(s,c),Vn(T,s,c),Gp;xg(w)||xf(),r=Xp(s,r,o)}else xg(w)?(r.flags|=192,r.child=s.child,r=null):(s=k.treeContext,pt=di(w.nextSibling),cn=r,Ge=!0,Er=null,hi=!1,s!==null&&AE(r,s),r=$p(r,c.children),r.flags|=4096);return r}return d?(Rr(),w=c.fallback,d=r.mode,k=s.child,q=k.sibling,c=Is(k,{mode:"hidden",children:c.children}),c.subtreeFlags=k.subtreeFlags&65011712,q!==null?w=Is(q,w):(w=ja(w,d,o,null),w.flags|=2),w.return=r,c.return=r,c.sibling=w,r.child=c,Pc(null,c),c=r.child,w=s.child.memoizedState,w===null?w=Qp(o):(d=w.cachePool,d!==null?(k=Ut._currentValue,d=d.parent!==k?{parent:k,pool:k}:d):d=DE(),w={baseLanes:w.baseLanes|o,cachePool:d}),c.memoizedState=w,c.childLanes=Wp(s,T,o),r.memoizedState=Kp,Pc(s.child,c)):(Ar(r),o=s.child,s=o.sibling,o=Is(o,{mode:"visible",children:c.children}),o.return=r,o.sibling=null,s!==null&&(T=r.deletions,T===null?(r.deletions=[s],r.flags|=16):T.push(s)),r.child=o,r.memoizedState=null,o)}function $p(s,r){return r=Tf({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function Tf(s,r){return s=Gn(22,s,null,r),s.lanes=0,s}function Xp(s,r,o){return qa(r,s.child,null,o),s=$p(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function GT(s,r,o){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),fp(s.return,r,o)}function Jp(s,r,o,c,d,p){var T=s.memoizedState;T===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:d,treeForkCount:p}:(T.isBackwards=r,T.rendering=null,T.renderingStartTime=0,T.last=c,T.tail=o,T.tailMode=d,T.treeForkCount=p)}function YT(s,r,o){var c=r.pendingProps,d=c.revealOrder,p=c.tail;c=c.children;var T=Ot.current,w=(T&2)!==0;if(w?(T=T&1|2,r.flags|=128):T&=1,J(Ot,T),hn(s,r,c,o),c=Ge?Tc:0,!w&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&GT(s,o,r);else if(s.tag===19)GT(s,o,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(d){case"forwards":for(o=r.child,d=null;o!==null;)s=o.alternate,s!==null&&cf(s)===null&&(d=o),o=o.sibling;o=d,o===null?(d=r.child,r.child=null):(d=o.sibling,o.sibling=null),Jp(r,!1,d,o,p,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,d=r.child,r.child=null;d!==null;){if(s=d.alternate,s!==null&&cf(s)===null){r.child=d;break}s=d.sibling,d.sibling=o,o=d,d=s}Jp(r,!0,o,null,p,c);break;case"together":Jp(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function Ps(s,r,o){if(s!==null&&(r.dependencies=s.dependencies),xr|=r.lanes,(o&r.childLanes)===0)if(s!==null){if(Vo(s,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,o=Is(s,s.pendingProps),r.child=o,o.return=r;s.sibling!==null;)s=s.sibling,o=o.sibling=Is(s,s.pendingProps),o.return=r;o.sibling=null}return r.child}function Zp(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&ef(s)))}function nN(s,r,o){switch(r.tag){case 3:ht(r,r.stateNode.containerInfo),Sr(r,Ut,s.memoizedState.cache),Va();break;case 27:case 5:Ti(r);break;case 4:ht(r,r.stateNode.containerInfo);break;case 10:Sr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,wp(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Ar(r),r.flags|=128,null):(o&r.child.childLanes)!==0?qT(s,r,o):(Ar(r),s=Ps(s,r,o),s!==null?s.sibling:null);Ar(r);break;case 19:var d=(s.flags&128)!==0;if(c=(o&r.childLanes)!==0,c||(Vo(s,r,o,!1),c=(o&r.childLanes)!==0),d){if(c)return YT(s,r,o);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),J(Ot,Ot.current),c)break;return null;case 22:return r.lanes=0,VT(s,r,o,r.pendingProps);case 24:Sr(r,Ut,s.memoizedState.cache)}return Ps(s,r,o)}function KT(s,r,o){if(s!==null)if(s.memoizedProps!==r.pendingProps)Bt=!0;else{if(!Zp(s,o)&&(r.flags&128)===0)return Bt=!1,nN(s,r,o);Bt=(s.flags&131072)!==0}else Bt=!1,Ge&&(r.flags&1048576)!==0&&CE(r,Tc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(s=Fa(r.elementType),r.type=s,typeof s=="function")sp(s)?(c=Ya(s,c),r.tag=1,r=FT(null,r,s,c,o)):(r.tag=0,r=Yp(null,r,s,c,o));else{if(s!=null){var d=s.$$typeof;if(d===ae){r.tag=11,r=MT(null,r,s,c,o);break e}else if(d===O){r.tag=14,r=LT(null,r,s,c,o);break e}}throw r=Ze(s)||s,Error(i(306,r,""))}}return r;case 0:return Yp(s,r,r.type,r.pendingProps,o);case 1:return c=r.type,d=Ya(c,r.pendingProps),FT(s,r,c,d,o);case 3:e:{if(ht(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var p=r.memoizedState;d=p.element,vp(s,r),Nc(r,c,null,o);var T=r.memoizedState;if(c=T.cache,Sr(r,Ut,c),c!==p.cache&&dp(r,[Ut],o,!0),Ic(),c=T.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:T.cache},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){r=HT(s,r,c,o);break e}else if(c!==d){d=li(Error(i(424)),r),Sc(d),r=HT(s,r,c,o);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(pt=di(s.firstChild),cn=r,Ge=!0,Er=null,hi=!0,o=VE(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Va(),c===d){r=Ps(s,r,o);break e}hn(s,r,c,o)}r=r.child}return r;case 26:return Ef(s,r),s===null?(o=sb(r.type,null,r.pendingProps,null))?r.memoizedState=o:Ge||(o=r.type,s=r.pendingProps,c=jf(Ee.current).createElement(o),c[Lt]=r,c[Zt]=s,fn(c,o,s),jt(c),r.stateNode=c):r.memoizedState=sb(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return Ti(r),s===null&&Ge&&(c=r.stateNode=tb(r.type,r.pendingProps,Ee.current),cn=r,hi=!0,d=pt,Mr(r.type)?(Dg=d,pt=di(c.firstChild)):pt=d),hn(s,r,r.pendingProps.children,o),Ef(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&Ge&&((d=c=pt)&&(c=DN(c,r.type,r.pendingProps,hi),c!==null?(r.stateNode=c,cn=r,pt=di(c.firstChild),hi=!1,d=!0):d=!1),d||Tr(r)),Ti(r),d=r.type,p=r.pendingProps,T=s!==null?s.memoizedProps:null,c=p.children,Rg(d,p)?c=null:T!==null&&Rg(d,T)&&(r.flags|=32),r.memoizedState!==null&&(d=Ap(s,r,K1,null,null,o),Wc._currentValue=d),Ef(s,r),hn(s,r,c,o),r.child;case 6:return s===null&&Ge&&((s=o=pt)&&(o=kN(o,r.pendingProps,hi),o!==null?(r.stateNode=o,cn=r,pt=null,s=!0):s=!1),s||Tr(r)),null;case 13:return qT(s,r,o);case 4:return ht(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=qa(r,null,c,o):hn(s,r,c,o),r.child;case 11:return MT(s,r,r.type,r.pendingProps,o);case 7:return hn(s,r,r.pendingProps,o),r.child;case 8:return hn(s,r,r.pendingProps.children,o),r.child;case 12:return hn(s,r,r.pendingProps.children,o),r.child;case 10:return c=r.pendingProps,Sr(r,r.type,c.value),hn(s,r,c.children,o),r.child;case 9:return d=r.type._context,c=r.pendingProps.children,za(r),d=un(d),c=c(d),r.flags|=1,hn(s,r,c,o),r.child;case 14:return LT(s,r,r.type,r.pendingProps,o);case 15:return jT(s,r,r.type,r.pendingProps,o);case 19:return YT(s,r,o);case 31:return tN(s,r,o);case 22:return VT(s,r,o,r.pendingProps);case 24:return za(r),c=un(Ut),s===null?(d=gp(),d===null&&(d=ft,p=mp(),d.pooledCache=p,p.refCount++,p!==null&&(d.pooledCacheLanes|=o),d=p),r.memoizedState={parent:c,cache:d},yp(r),Sr(r,Ut,d)):((s.lanes&o)!==0&&(vp(s,r),Nc(r,null,null,o),Ic()),d=s.memoizedState,p=r.memoizedState,d.parent!==c?(d={parent:c,cache:c},r.memoizedState=d,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=d),Sr(r,Ut,c)):(c=p.cache,Sr(r,Ut,c),c!==d.cache&&dp(r,[Ut],o,!0))),hn(s,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Ms(s){s.flags|=4}function eg(s,r,o,c,d){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(d&335544128)===d)if(s.stateNode.complete)s.flags|=8192;else if(ES())s.flags|=8192;else throw Ha=rf,_p}else s.flags&=-16777217}function QT(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!cb(r))if(ES())s.flags|=8192;else throw Ha=rf,_p}function Sf(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?Rh():536870912,s.lanes|=r,$o|=r)}function Mc(s,r){if(!Ge)switch(s.tailMode){case"hidden":r=s.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?s.tail=null:o.sibling=null;break;case"collapsed":o=s.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function gt(s){var r=s.alternate!==null&&s.alternate.child===s.child,o=0,c=0;if(r)for(var d=s.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags&65011712,c|=d.flags&65011712,d.return=s,d=d.sibling;else for(d=s.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=s,d=d.sibling;return s.subtreeFlags|=c,s.childLanes=o,r}function iN(s,r,o){var c=r.pendingProps;switch(lp(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(r),null;case 1:return gt(r),null;case 3:return o=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Os(Ut),$e(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(s===null||s.child===null)&&(jo(r)?Ms(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,up())),gt(r),null;case 26:var d=r.type,p=r.memoizedState;return s===null?(Ms(r),p!==null?(gt(r),QT(r,p)):(gt(r),eg(r,d,null,c,o))):p?p!==s.memoizedState?(Ms(r),gt(r),QT(r,p)):(gt(r),r.flags&=-16777217):(s=s.memoizedProps,s!==c&&Ms(r),gt(r),eg(r,d,s,c,o)),null;case 27:if(ti(r),o=Ee.current,d=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&Ms(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return gt(r),null}s=ce.current,jo(r)?RE(r):(s=tb(d,c,o),r.stateNode=s,Ms(r))}return gt(r),null;case 5:if(ti(r),d=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&Ms(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return gt(r),null}if(p=ce.current,jo(r))RE(r);else{var T=jf(Ee.current);switch(p){case 1:p=T.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:p=T.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":p=T.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":p=T.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":p=T.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof c.is=="string"?T.createElement("select",{is:c.is}):T.createElement("select"),c.multiple?p.multiple=!0:c.size&&(p.size=c.size);break;default:p=typeof c.is=="string"?T.createElement(d,{is:c.is}):T.createElement(d)}}p[Lt]=r,p[Zt]=c;e:for(T=r.child;T!==null;){if(T.tag===5||T.tag===6)p.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===r)break e;for(;T.sibling===null;){if(T.return===null||T.return===r)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}r.stateNode=p;e:switch(fn(p,d,c),d){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Ms(r)}}return gt(r),eg(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,o),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&Ms(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=Ee.current,jo(r)){if(s=r.stateNode,o=r.memoizedProps,c=null,d=cn,d!==null)switch(d.tag){case 27:case 5:c=d.memoizedProps}s[Lt]=r,s=!!(s.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||qS(s.nodeValue,o)),s||Tr(r,!0)}else s=jf(s).createTextNode(c),s[Lt]=r,r.stateNode=s}return gt(r),null;case 31:if(o=r.memoizedState,s===null||s.memoizedState!==null){if(c=jo(r),o!==null){if(s===null){if(!c)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Lt]=r}else Va(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;gt(r),s=!1}else o=up(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=o),s=!0;if(!s)return r.flags&256?(Kn(r),r):(Kn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return gt(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(d=jo(r),c!==null&&c.dehydrated!==null){if(s===null){if(!d)throw Error(i(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[Lt]=r}else Va(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;gt(r),d=!1}else d=up(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=d),d=!0;if(!d)return r.flags&256?(Kn(r),r):(Kn(r),null)}return Kn(r),(r.flags&128)!==0?(r.lanes=o,r):(o=c!==null,s=s!==null&&s.memoizedState!==null,o&&(c=r.child,d=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(d=c.alternate.memoizedState.cachePool.pool),p=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==d&&(c.flags|=2048)),o!==s&&o&&(r.child.flags|=8192),Sf(r,r.updateQueue),gt(r),null);case 4:return $e(),s===null&&Sg(r.stateNode.containerInfo),gt(r),null;case 10:return Os(r.type),gt(r),null;case 19:if(G(Ot),c=r.memoizedState,c===null)return gt(r),null;if(d=(r.flags&128)!==0,p=c.rendering,p===null)if(d)Mc(c,!1);else{if(Ct!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(p=cf(s),p!==null){for(r.flags|=128,Mc(c,!1),s=p.updateQueue,r.updateQueue=s,Sf(r,s),r.subtreeFlags=0,s=o,o=r.child;o!==null;)SE(o,s),o=o.sibling;return J(Ot,Ot.current&1|2),Ge&&Ns(r,c.treeForkCount),r.child}s=s.sibling}c.tail!==null&&An()>Rf&&(r.flags|=128,d=!0,Mc(c,!1),r.lanes=4194304)}else{if(!d)if(s=cf(p),s!==null){if(r.flags|=128,d=!0,s=s.updateQueue,r.updateQueue=s,Sf(r,s),Mc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!p.alternate&&!Ge)return gt(r),null}else 2*An()-c.renderingStartTime>Rf&&o!==536870912&&(r.flags|=128,d=!0,Mc(c,!1),r.lanes=4194304);c.isBackwards?(p.sibling=r.child,r.child=p):(s=c.last,s!==null?s.sibling=p:r.child=p,c.last=p)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=An(),s.sibling=null,o=Ot.current,J(Ot,d?o&1|2:o&1),Ge&&Ns(r,c.treeForkCount),s):(gt(r),null);case 22:case 23:return Kn(r),bp(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(o&536870912)!==0&&(r.flags&128)===0&&(gt(r),r.subtreeFlags&6&&(r.flags|=8192)):gt(r),o=r.updateQueue,o!==null&&Sf(r,o.retryQueue),o=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==o&&(r.flags|=2048),s!==null&&G(Ba),null;case 24:return o=null,s!==null&&(o=s.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),Os(Ut),gt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function sN(s,r){switch(lp(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return Os(Ut),$e(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return ti(r),null;case 31:if(r.memoizedState!==null){if(Kn(r),r.alternate===null)throw Error(i(340));Va()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(Kn(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Va()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return G(Ot),null;case 4:return $e(),null;case 10:return Os(r.type),null;case 22:case 23:return Kn(r),bp(),s!==null&&G(Ba),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return Os(Ut),null;case 25:return null;default:return null}}function WT(s,r){switch(lp(r),r.tag){case 3:Os(Ut),$e();break;case 26:case 27:case 5:ti(r);break;case 4:$e();break;case 31:r.memoizedState!==null&&Kn(r);break;case 13:Kn(r);break;case 19:G(Ot);break;case 10:Os(r.type);break;case 22:case 23:Kn(r),bp(),s!==null&&G(Ba);break;case 24:Os(Ut)}}function Lc(s,r){try{var o=r.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var d=c.next;o=d;do{if((o.tag&s)===s){c=void 0;var p=o.create,T=o.inst;c=p(),T.destroy=c}o=o.next}while(o!==d)}}catch(w){it(r,r.return,w)}}function Ir(s,r,o){try{var c=r.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var p=d.next;c=p;do{if((c.tag&s)===s){var T=c.inst,w=T.destroy;if(w!==void 0){T.destroy=void 0,d=r;var k=o,q=w;try{q()}catch(ee){it(d,k,ee)}}}c=c.next}while(c!==p)}}catch(ee){it(r,r.return,ee)}}function $T(s){var r=s.updateQueue;if(r!==null){var o=s.stateNode;try{zE(r,o)}catch(c){it(s,s.return,c)}}}function XT(s,r,o){o.props=Ya(s.type,s.memoizedProps),o.state=s.memoizedState;try{o.componentWillUnmount()}catch(c){it(s,r,c)}}function jc(s,r){try{var o=s.ref;if(o!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof o=="function"?s.refCleanup=o(c):o.current=c}}catch(d){it(s,r,d)}}function ls(s,r){var o=s.ref,c=s.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(d){it(s,r,d)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){it(s,r,d)}else o.current=null}function JT(s){var r=s.type,o=s.memoizedProps,c=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(d){it(s,s.return,d)}}function tg(s,r,o){try{var c=s.stateNode;AN(c,s.type,o,r),c[Zt]=r}catch(d){it(s,s.return,d)}}function ZT(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Mr(s.type)||s.tag===4}function ng(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||ZT(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Mr(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function ig(s,r,o){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(s,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(s),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Ai));else if(c!==4&&(c===27&&Mr(s.type)&&(o=s.stateNode,r=null),s=s.child,s!==null))for(ig(s,r,o),s=s.sibling;s!==null;)ig(s,r,o),s=s.sibling}function bf(s,r,o){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?o.insertBefore(s,r):o.appendChild(s);else if(c!==4&&(c===27&&Mr(s.type)&&(o=s.stateNode),s=s.child,s!==null))for(bf(s,r,o),s=s.sibling;s!==null;)bf(s,r,o),s=s.sibling}function eS(s){var r=s.stateNode,o=s.memoizedProps;try{for(var c=s.type,d=r.attributes;d.length;)r.removeAttributeNode(d[0]);fn(r,c,o),r[Lt]=s,r[Zt]=o}catch(p){it(s,s.return,p)}}var Ls=!1,Ft=!1,sg=!1,tS=typeof WeakSet=="function"?WeakSet:Set,tn=null;function rN(s,r){if(s=s.containerInfo,Cg=qf,s=dE(s),Xm(s)){if("selectionStart"in s)var o={start:s.selectionStart,end:s.selectionEnd};else e:{o=(o=s.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var d=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var T=0,w=-1,k=-1,q=0,ee=0,ne=s,Y=null;t:for(;;){for(var W;ne!==o||d!==0&&ne.nodeType!==3||(w=T+d),ne!==p||c!==0&&ne.nodeType!==3||(k=T+c),ne.nodeType===3&&(T+=ne.nodeValue.length),(W=ne.firstChild)!==null;)Y=ne,ne=W;for(;;){if(ne===s)break t;if(Y===o&&++q===d&&(w=T),Y===p&&++ee===c&&(k=T),(W=ne.nextSibling)!==null)break;ne=Y,Y=ne.parentNode}ne=W}o=w===-1||k===-1?null:{start:w,end:k}}else o=null}o=o||{start:0,end:0}}else o=null;for(Ag={focusedElem:s,selectionRange:o},qf=!1,tn=r;tn!==null;)if(r=tn,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,tn=s;else for(;tn!==null;){switch(r=tn,p=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(o=0;o<s.length;o++)d=s[o],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&p!==null){s=void 0,o=r,d=p.memoizedProps,p=p.memoizedState,c=o.stateNode;try{var de=Ya(o.type,d);s=c.getSnapshotBeforeUpdate(de,p),c.__reactInternalSnapshotBeforeUpdate=s}catch(Se){it(o,o.return,Se)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,o=s.nodeType,o===9)Ng(s);else if(o===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Ng(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,tn=s;break}tn=r.return}}function nS(s,r,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Vs(s,o),c&4&&Lc(5,o);break;case 1:if(Vs(s,o),c&4)if(s=o.stateNode,r===null)try{s.componentDidMount()}catch(T){it(o,o.return,T)}else{var d=Ya(o.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(d,r,s.__reactInternalSnapshotBeforeUpdate)}catch(T){it(o,o.return,T)}}c&64&&$T(o),c&512&&jc(o,o.return);break;case 3:if(Vs(s,o),c&64&&(s=o.updateQueue,s!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{zE(s,r)}catch(T){it(o,o.return,T)}}break;case 27:r===null&&c&4&&eS(o);case 26:case 5:Vs(s,o),r===null&&c&4&&JT(o),c&512&&jc(o,o.return);break;case 12:Vs(s,o);break;case 31:Vs(s,o),c&4&&rS(s,o);break;case 13:Vs(s,o),c&4&&aS(s,o),c&64&&(s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(o=mN.bind(null,o),PN(s,o))));break;case 22:if(c=o.memoizedState!==null||Ls,!c){r=r!==null&&r.memoizedState!==null||Ft,d=Ls;var p=Ft;Ls=c,(Ft=r)&&!p?Us(s,o,(o.subtreeFlags&8772)!==0):Vs(s,o),Ls=d,Ft=p}break;case 30:break;default:Vs(s,o)}}function iS(s){var r=s.alternate;r!==null&&(s.alternate=null,iS(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&Eo(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Et=null,Pn=!1;function js(s,r,o){for(o=o.child;o!==null;)sS(s,r,o),o=o.sibling}function sS(s,r,o){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(Si,o)}catch{}switch(o.tag){case 26:Ft||ls(o,r),js(s,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ft||ls(o,r);var c=Et,d=Pn;Mr(o.type)&&(Et=o.stateNode,Pn=!1),js(s,r,o),Yc(o.stateNode),Et=c,Pn=d;break;case 5:Ft||ls(o,r);case 6:if(c=Et,d=Pn,Et=null,js(s,r,o),Et=c,Pn=d,Et!==null)if(Pn)try{(Et.nodeType===9?Et.body:Et.nodeName==="HTML"?Et.ownerDocument.body:Et).removeChild(o.stateNode)}catch(p){it(o,r,p)}else try{Et.removeChild(o.stateNode)}catch(p){it(o,r,p)}break;case 18:Et!==null&&(Pn?(s=Et,$S(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,o.stateNode),sl(s)):$S(Et,o.stateNode));break;case 4:c=Et,d=Pn,Et=o.stateNode.containerInfo,Pn=!0,js(s,r,o),Et=c,Pn=d;break;case 0:case 11:case 14:case 15:Ir(2,o,r),Ft||Ir(4,o,r),js(s,r,o);break;case 1:Ft||(ls(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"&&XT(o,r,c)),js(s,r,o);break;case 21:js(s,r,o);break;case 22:Ft=(c=Ft)||o.memoizedState!==null,js(s,r,o),Ft=c;break;default:js(s,r,o)}}function rS(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{sl(s)}catch(o){it(r,r.return,o)}}}function aS(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{sl(s)}catch(o){it(r,r.return,o)}}function aN(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new tS),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new tS),r;default:throw Error(i(435,s.tag))}}function wf(s,r){var o=aN(s);r.forEach(function(c){if(!o.has(c)){o.add(c);var d=pN.bind(null,s,c);c.then(d,d)}})}function Mn(s,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var d=o[c],p=s,T=r,w=T;e:for(;w!==null;){switch(w.tag){case 27:if(Mr(w.type)){Et=w.stateNode,Pn=!1;break e}break;case 5:Et=w.stateNode,Pn=!1;break e;case 3:case 4:Et=w.stateNode.containerInfo,Pn=!0;break e}w=w.return}if(Et===null)throw Error(i(160));sS(p,T,d),Et=null,Pn=!1,p=d.alternate,p!==null&&(p.return=null),d.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)oS(r,s),r=r.sibling}var Di=null;function oS(s,r){var o=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Mn(r,s),Ln(s),c&4&&(Ir(3,s,s.return),Lc(3,s),Ir(5,s,s.return));break;case 1:Mn(r,s),Ln(s),c&512&&(Ft||o===null||ls(o,o.return)),c&64&&Ls&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(o=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var d=Di;if(Mn(r,s),Ln(s),c&512&&(Ft||o===null||ls(o,o.return)),c&4){var p=o!==null?o.memoizedState:null;if(c=s.memoizedState,o===null)if(c===null)if(s.stateNode===null){e:{c=s.type,o=s.memoizedProps,d=d.ownerDocument||d;t:switch(c){case"title":p=d.getElementsByTagName("title")[0],(!p||p[Qi]||p[Lt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=d.createElement(c),d.head.insertBefore(p,d.querySelector("head > title"))),fn(p,c,o),p[Lt]=s,jt(p),c=p;break e;case"link":var T=ob("link","href",d).get(c+(o.href||""));if(T){for(var w=0;w<T.length;w++)if(p=T[w],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){T.splice(w,1);break t}}p=d.createElement(c),fn(p,c,o),d.head.appendChild(p);break;case"meta":if(T=ob("meta","content",d).get(c+(o.content||""))){for(w=0;w<T.length;w++)if(p=T[w],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){T.splice(w,1);break t}}p=d.createElement(c),fn(p,c,o),d.head.appendChild(p);break;default:throw Error(i(468,c))}p[Lt]=s,jt(p),c=p}s.stateNode=c}else lb(d,s.type,s.stateNode);else s.stateNode=ab(d,c,s.memoizedProps);else p!==c?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,c===null?lb(d,s.type,s.stateNode):ab(d,c,s.memoizedProps)):c===null&&s.stateNode!==null&&tg(s,s.memoizedProps,o.memoizedProps)}break;case 27:Mn(r,s),Ln(s),c&512&&(Ft||o===null||ls(o,o.return)),o!==null&&c&4&&tg(s,s.memoizedProps,o.memoizedProps);break;case 5:if(Mn(r,s),Ln(s),c&512&&(Ft||o===null||ls(o,o.return)),s.flags&32){d=s.stateNode;try{kn(d,"")}catch(de){it(s,s.return,de)}}c&4&&s.stateNode!=null&&(d=s.memoizedProps,tg(s,d,o!==null?o.memoizedProps:d)),c&1024&&(sg=!0);break;case 6:if(Mn(r,s),Ln(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,o=s.stateNode;try{o.nodeValue=c}catch(de){it(s,s.return,de)}}break;case 3:if(zf=null,d=Di,Di=Vf(r.containerInfo),Mn(r,s),Di=d,Ln(s),c&4&&o!==null&&o.memoizedState.isDehydrated)try{sl(r.containerInfo)}catch(de){it(s,s.return,de)}sg&&(sg=!1,lS(s));break;case 4:c=Di,Di=Vf(s.stateNode.containerInfo),Mn(r,s),Ln(s),Di=c;break;case 12:Mn(r,s),Ln(s);break;case 31:Mn(r,s),Ln(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,wf(s,c)));break;case 13:Mn(r,s),Ln(s),s.child.flags&8192&&s.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Af=An()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,wf(s,c)));break;case 22:d=s.memoizedState!==null;var k=o!==null&&o.memoizedState!==null,q=Ls,ee=Ft;if(Ls=q||d,Ft=ee||k,Mn(r,s),Ft=ee,Ls=q,Ln(s),c&8192)e:for(r=s.stateNode,r._visibility=d?r._visibility&-2:r._visibility|1,d&&(o===null||k||Ls||Ft||Ka(s)),o=null,r=s;;){if(r.tag===5||r.tag===26){if(o===null){k=o=r;try{if(p=k.stateNode,d)T=p.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{w=k.stateNode;var ne=k.memoizedProps.style,Y=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;w.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(de){it(k,k.return,de)}}}else if(r.tag===6){if(o===null){k=r;try{k.stateNode.nodeValue=d?"":k.memoizedProps}catch(de){it(k,k.return,de)}}}else if(r.tag===18){if(o===null){k=r;try{var W=k.stateNode;d?XS(W,!0):XS(k.stateNode,!1)}catch(de){it(k,k.return,de)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,wf(s,o))));break;case 19:Mn(r,s),Ln(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,wf(s,c)));break;case 30:break;case 21:break;default:Mn(r,s),Ln(s)}}function Ln(s){var r=s.flags;if(r&2){try{for(var o,c=s.return;c!==null;){if(ZT(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var d=o.stateNode,p=ng(s);bf(s,p,d);break;case 5:var T=o.stateNode;o.flags&32&&(kn(T,""),o.flags&=-33);var w=ng(s);bf(s,w,T);break;case 3:case 4:var k=o.stateNode.containerInfo,q=ng(s);ig(s,q,k);break;default:throw Error(i(161))}}catch(ee){it(s,s.return,ee)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function lS(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;lS(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function Vs(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)nS(s,r.alternate,r),r=r.sibling}function Ka(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:Ir(4,r,r.return),Ka(r);break;case 1:ls(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&XT(r,r.return,o),Ka(r);break;case 27:Yc(r.stateNode);case 26:case 5:ls(r,r.return),Ka(r);break;case 22:r.memoizedState===null&&Ka(r);break;case 30:Ka(r);break;default:Ka(r)}s=s.sibling}}function Us(s,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,d=s,p=r,T=p.flags;switch(p.tag){case 0:case 11:case 15:Us(d,p,o),Lc(4,p);break;case 1:if(Us(d,p,o),c=p,d=c.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(q){it(c,c.return,q)}if(c=p,d=c.updateQueue,d!==null){var w=c.stateNode;try{var k=d.shared.hiddenCallbacks;if(k!==null)for(d.shared.hiddenCallbacks=null,d=0;d<k.length;d++)UE(k[d],w)}catch(q){it(c,c.return,q)}}o&&T&64&&$T(p),jc(p,p.return);break;case 27:eS(p);case 26:case 5:Us(d,p,o),o&&c===null&&T&4&&JT(p),jc(p,p.return);break;case 12:Us(d,p,o);break;case 31:Us(d,p,o),o&&T&4&&rS(d,p);break;case 13:Us(d,p,o),o&&T&4&&aS(d,p);break;case 22:p.memoizedState===null&&Us(d,p,o),jc(p,p.return);break;case 30:break;default:Us(d,p,o)}r=r.sibling}}function rg(s,r){var o=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==o&&(s!=null&&s.refCount++,o!=null&&bc(o))}function ag(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&bc(s))}function ki(s,r,o,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)cS(s,r,o,c),r=r.sibling}function cS(s,r,o,c){var d=r.flags;switch(r.tag){case 0:case 11:case 15:ki(s,r,o,c),d&2048&&Lc(9,r);break;case 1:ki(s,r,o,c);break;case 3:ki(s,r,o,c),d&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&bc(s)));break;case 12:if(d&2048){ki(s,r,o,c),s=r.stateNode;try{var p=r.memoizedProps,T=p.id,w=p.onPostCommit;typeof w=="function"&&w(T,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(k){it(r,r.return,k)}}else ki(s,r,o,c);break;case 31:ki(s,r,o,c);break;case 13:ki(s,r,o,c);break;case 23:break;case 22:p=r.stateNode,T=r.alternate,r.memoizedState!==null?p._visibility&2?ki(s,r,o,c):Vc(s,r):p._visibility&2?ki(s,r,o,c):(p._visibility|=2,Ko(s,r,o,c,(r.subtreeFlags&10256)!==0||!1)),d&2048&&rg(T,r);break;case 24:ki(s,r,o,c),d&2048&&ag(r.alternate,r);break;default:ki(s,r,o,c)}}function Ko(s,r,o,c,d){for(d=d&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var p=s,T=r,w=o,k=c,q=T.flags;switch(T.tag){case 0:case 11:case 15:Ko(p,T,w,k,d),Lc(8,T);break;case 23:break;case 22:var ee=T.stateNode;T.memoizedState!==null?ee._visibility&2?Ko(p,T,w,k,d):Vc(p,T):(ee._visibility|=2,Ko(p,T,w,k,d)),d&&q&2048&&rg(T.alternate,T);break;case 24:Ko(p,T,w,k,d),d&&q&2048&&ag(T.alternate,T);break;default:Ko(p,T,w,k,d)}r=r.sibling}}function Vc(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=s,c=r,d=c.flags;switch(c.tag){case 22:Vc(o,c),d&2048&&rg(c.alternate,c);break;case 24:Vc(o,c),d&2048&&ag(c.alternate,c);break;default:Vc(o,c)}r=r.sibling}}var Uc=8192;function Qo(s,r,o){if(s.subtreeFlags&Uc)for(s=s.child;s!==null;)uS(s,r,o),s=s.sibling}function uS(s,r,o){switch(s.tag){case 26:Qo(s,r,o),s.flags&Uc&&s.memoizedState!==null&&YN(o,Di,s.memoizedState,s.memoizedProps);break;case 5:Qo(s,r,o);break;case 3:case 4:var c=Di;Di=Vf(s.stateNode.containerInfo),Qo(s,r,o),Di=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=Uc,Uc=16777216,Qo(s,r,o),Uc=c):Qo(s,r,o));break;default:Qo(s,r,o)}}function hS(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function zc(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];tn=c,dS(c,s)}hS(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)fS(s),s=s.sibling}function fS(s){switch(s.tag){case 0:case 11:case 15:zc(s),s.flags&2048&&Ir(9,s,s.return);break;case 3:zc(s);break;case 12:zc(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,Cf(s)):zc(s);break;default:zc(s)}}function Cf(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];tn=c,dS(c,s)}hS(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:Ir(8,r,r.return),Cf(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Cf(r));break;default:Cf(r)}s=s.sibling}}function dS(s,r){for(;tn!==null;){var o=tn;switch(o.tag){case 0:case 11:case 15:Ir(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:bc(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,tn=c;else e:for(o=s;tn!==null;){c=tn;var d=c.sibling,p=c.return;if(iS(c),c===o){tn=null;break e}if(d!==null){d.return=p,tn=d;break e}tn=p}}}var oN={getCacheForType:function(s){var r=un(Ut),o=r.data.get(s);return o===void 0&&(o=s(),r.data.set(s,o)),o},cacheSignal:function(){return un(Ut).controller.signal}},lN=typeof WeakMap=="function"?WeakMap:Map,Je=0,ft=null,je=null,Be=0,nt=0,Qn=null,Nr=!1,Wo=!1,og=!1,zs=0,Ct=0,xr=0,Qa=0,lg=0,Wn=0,$o=0,Bc=null,jn=null,cg=!1,Af=0,mS=0,Rf=1/0,If=null,Or=null,Qt=0,Dr=null,Xo=null,Bs=0,ug=0,hg=null,pS=null,Fc=0,fg=null;function $n(){return(Je&2)!==0&&Be!==0?Be&-Be:Z.T!==null?yg():Ih()}function gS(){if(Wn===0)if((Be&536870912)===0||Ge){var s=Ta;Ta<<=1,(Ta&3932160)===0&&(Ta=262144),Wn=s}else Wn=536870912;return s=Yn.current,s!==null&&(s.flags|=32),Wn}function Vn(s,r,o){(s===ft&&(nt===2||nt===9)||s.cancelPendingCommit!==null)&&(Jo(s,0),kr(s,Be,Wn,!1)),Sa(s,o),((Je&2)===0||s!==ft)&&(s===ft&&((Je&2)===0&&(Qa|=o),Ct===4&&kr(s,Be,Wn,!1)),cs(s))}function _S(s,r,o){if((Je&6)!==0)throw Error(i(327));var c=!o&&(r&127)===0&&(r&s.expiredLanes)===0||bi(s,r),d=c?hN(s,r):mg(s,r,!0),p=c;do{if(d===0){Wo&&!c&&kr(s,r,0,!1);break}else{if(o=s.current.alternate,p&&!cN(o)){d=mg(s,r,!1),p=!1;continue}if(d===2){if(p=r,s.errorRecoveryDisabledLanes&p)var T=0;else T=s.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){r=T;e:{var w=s;d=Bc;var k=w.current.memoizedState.isDehydrated;if(k&&(Jo(w,T).flags|=256),T=mg(w,T,!1),T!==2){if(og&&!k){w.errorRecoveryDisabledLanes|=p,Qa|=p,d=4;break e}p=jn,jn=d,p!==null&&(jn===null?jn=p:jn.push.apply(jn,p))}d=T}if(p=!1,d!==2)continue}}if(d===1){Jo(s,0),kr(s,r,0,!0);break}e:{switch(c=s,p=d,p){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:kr(c,r,Wn,!Nr);break e;case 2:jn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(d=Af+300-An(),10<d)){if(kr(c,r,Wn,!Nr),Gi(c,0,!0)!==0)break e;Bs=r,c.timeoutHandle=QS(yS.bind(null,c,o,jn,If,cg,r,Wn,Qa,$o,Nr,p,"Throttled",-0,0),d);break e}yS(c,o,jn,If,cg,r,Wn,Qa,$o,Nr,p,null,-0,0)}}break}while(!0);cs(s)}function yS(s,r,o,c,d,p,T,w,k,q,ee,ne,Y,W){if(s.timeoutHandle=-1,ne=r.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ai},uS(r,p,ne);var de=(p&62914560)===p?Af-An():(p&4194048)===p?mS-An():0;if(de=KN(ne,de),de!==null){Bs=p,s.cancelPendingCommit=de(AS.bind(null,s,r,p,o,c,d,T,w,k,ee,ne,null,Y,W)),kr(s,p,T,!q);return}}AS(s,r,p,o,c,d,T,w,k)}function cN(s){for(var r=s;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var d=o[c],p=d.getSnapshot;d=d.value;try{if(!qn(p(),d))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function kr(s,r,o,c){r&=~lg,r&=~Qa,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var d=r;0<d;){var p=31-Nt(d),T=1<<p;c[p]=-1,d&=~T}o!==0&&ba(s,o,r)}function Nf(){return(Je&6)===0?(Hc(0),!1):!0}function dg(){if(je!==null){if(nt===0)var s=je.return;else s=je,xs=Ua=null,Np(s),Fo=null,Cc=0,s=je;for(;s!==null;)WT(s.alternate,s),s=s.return;je=null}}function Jo(s,r){var o=s.timeoutHandle;o!==-1&&(s.timeoutHandle=-1,NN(o)),o=s.cancelPendingCommit,o!==null&&(s.cancelPendingCommit=null,o()),Bs=0,dg(),ft=s,je=o=Is(s.current,null),Be=r,nt=0,Qn=null,Nr=!1,Wo=bi(s,r),og=!1,$o=Wn=lg=Qa=xr=Ct=0,jn=Bc=null,cg=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var d=31-Nt(c),p=1<<d;r|=s[d],c&=~p}return zs=r,Wh(),o}function vS(s,r){Ne=null,Z.H=kc,r===Bo||r===sf?(r=ME(),nt=3):r===_p?(r=ME(),nt=4):nt=r===Gp?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Qn=r,je===null&&(Ct=1,yf(s,li(r,s.current)))}function ES(){var s=Yn.current;return s===null?!0:(Be&4194048)===Be?fi===null:(Be&62914560)===Be||(Be&536870912)!==0?s===fi:!1}function TS(){var s=Z.H;return Z.H=kc,s===null?kc:s}function SS(){var s=Z.A;return Z.A=oN,s}function xf(){Ct=4,Nr||(Be&4194048)!==Be&&Yn.current!==null||(Wo=!0),(xr&134217727)===0&&(Qa&134217727)===0||ft===null||kr(ft,Be,Wn,!1)}function mg(s,r,o){var c=Je;Je|=2;var d=TS(),p=SS();(ft!==s||Be!==r)&&(If=null,Jo(s,r)),r=!1;var T=Ct;e:do try{if(nt!==0&&je!==null){var w=je,k=Qn;switch(nt){case 8:dg(),T=6;break e;case 3:case 2:case 9:case 6:Yn.current===null&&(r=!0);var q=nt;if(nt=0,Qn=null,Zo(s,w,k,q),o&&Wo){T=0;break e}break;default:q=nt,nt=0,Qn=null,Zo(s,w,k,q)}}uN(),T=Ct;break}catch(ee){vS(s,ee)}while(!0);return r&&s.shellSuspendCounter++,xs=Ua=null,Je=c,Z.H=d,Z.A=p,je===null&&(ft=null,Be=0,Wh()),T}function uN(){for(;je!==null;)bS(je)}function hN(s,r){var o=Je;Je|=2;var c=TS(),d=SS();ft!==s||Be!==r?(If=null,Rf=An()+500,Jo(s,r)):Wo=bi(s,r);e:do try{if(nt!==0&&je!==null){r=je;var p=Qn;t:switch(nt){case 1:nt=0,Qn=null,Zo(s,r,p,1);break;case 2:case 9:if(kE(p)){nt=0,Qn=null,wS(r);break}r=function(){nt!==2&&nt!==9||ft!==s||(nt=7),cs(s)},p.then(r,r);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:kE(p)?(nt=0,Qn=null,wS(r)):(nt=0,Qn=null,Zo(s,r,p,7));break;case 5:var T=null;switch(je.tag){case 26:T=je.memoizedState;case 5:case 27:var w=je;if(T?cb(T):w.stateNode.complete){nt=0,Qn=null;var k=w.sibling;if(k!==null)je=k;else{var q=w.return;q!==null?(je=q,Of(q)):je=null}break t}}nt=0,Qn=null,Zo(s,r,p,5);break;case 6:nt=0,Qn=null,Zo(s,r,p,6);break;case 8:dg(),Ct=6;break e;default:throw Error(i(462))}}fN();break}catch(ee){vS(s,ee)}while(!0);return xs=Ua=null,Z.H=c,Z.A=d,Je=o,je!==null?0:(ft=null,Be=0,Wh(),Ct)}function fN(){for(;je!==null&&!qm();)bS(je)}function bS(s){var r=KT(s.alternate,s,zs);s.memoizedProps=s.pendingProps,r===null?Of(s):je=r}function wS(s){var r=s,o=r.alternate;switch(r.tag){case 15:case 0:r=BT(o,r,r.pendingProps,r.type,void 0,Be);break;case 11:r=BT(o,r,r.pendingProps,r.type.render,r.ref,Be);break;case 5:Np(r);default:WT(o,r),r=je=SE(r,zs),r=KT(o,r,zs)}s.memoizedProps=s.pendingProps,r===null?Of(s):je=r}function Zo(s,r,o,c){xs=Ua=null,Np(r),Fo=null,Cc=0;var d=r.return;try{if(eN(s,d,r,o,Be)){Ct=1,yf(s,li(o,s.current)),je=null;return}}catch(p){if(d!==null)throw je=d,p;Ct=1,yf(s,li(o,s.current)),je=null;return}r.flags&32768?(Ge||c===1?s=!0:Wo||(Be&536870912)!==0?s=!1:(Nr=s=!0,(c===2||c===9||c===3||c===6)&&(c=Yn.current,c!==null&&c.tag===13&&(c.flags|=16384))),CS(r,s)):Of(r)}function Of(s){var r=s;do{if((r.flags&32768)!==0){CS(r,Nr);return}s=r.return;var o=iN(r.alternate,r,zs);if(o!==null){je=o;return}if(r=r.sibling,r!==null){je=r;return}je=r=s}while(r!==null);Ct===0&&(Ct=5)}function CS(s,r){do{var o=sN(s.alternate,s);if(o!==null){o.flags&=32767,je=o;return}if(o=s.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(s=s.sibling,s!==null)){je=s;return}je=s=o}while(s!==null);Ct=6,je=null}function AS(s,r,o,c,d,p,T,w,k){s.cancelPendingCommit=null;do Df();while(Qt!==0);if((Je&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(p=r.lanes|r.childLanes,p|=np,Km(s,o,p,T,w,k),s===ft&&(je=ft=null,Be=0),Xo=r,Dr=s,Bs=o,ug=p,hg=d,pS=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,gN(cr,function(){return OS(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=Z.T,Z.T=null,d=se.p,se.p=2,T=Je,Je|=4;try{rN(s,r,o)}finally{Je=T,se.p=d,Z.T=c}}Qt=1,RS(),IS(),NS()}}function RS(){if(Qt===1){Qt=0;var s=Dr,r=Xo,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=Z.T,Z.T=null;var c=se.p;se.p=2;var d=Je;Je|=4;try{oS(r,s);var p=Ag,T=dE(s.containerInfo),w=p.focusedElem,k=p.selectionRange;if(T!==w&&w&&w.ownerDocument&&fE(w.ownerDocument.documentElement,w)){if(k!==null&&Xm(w)){var q=k.start,ee=k.end;if(ee===void 0&&(ee=q),"selectionStart"in w)w.selectionStart=q,w.selectionEnd=Math.min(ee,w.value.length);else{var ne=w.ownerDocument||document,Y=ne&&ne.defaultView||window;if(Y.getSelection){var W=Y.getSelection(),de=w.textContent.length,Se=Math.min(k.start,de),ot=k.end===void 0?Se:Math.min(k.end,de);!W.extend&&Se>ot&&(T=ot,ot=Se,Se=T);var z=hE(w,Se),j=hE(w,ot);if(z&&j&&(W.rangeCount!==1||W.anchorNode!==z.node||W.anchorOffset!==z.offset||W.focusNode!==j.node||W.focusOffset!==j.offset)){var H=ne.createRange();H.setStart(z.node,z.offset),W.removeAllRanges(),Se>ot?(W.addRange(H),W.extend(j.node,j.offset)):(H.setEnd(j.node,j.offset),W.addRange(H))}}}}for(ne=[],W=w;W=W.parentNode;)W.nodeType===1&&ne.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ne.length;w++){var te=ne[w];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}qf=!!Cg,Ag=Cg=null}finally{Je=d,se.p=c,Z.T=o}}s.current=r,Qt=2}}function IS(){if(Qt===2){Qt=0;var s=Dr,r=Xo,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=Z.T,Z.T=null;var c=se.p;se.p=2;var d=Je;Je|=4;try{nS(s,r.alternate,r)}finally{Je=d,se.p=c,Z.T=o}}Qt=3}}function NS(){if(Qt===4||Qt===3){Qt=0,Th();var s=Dr,r=Xo,o=Bs,c=pS;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Qt=5:(Qt=0,Xo=Dr=null,xS(s,s.pendingLanes));var d=s.pendingLanes;if(d===0&&(Or=null),ws(o),r=r.stateNode,on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(Si,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=Z.T,d=se.p,se.p=2,Z.T=null;try{for(var p=s.onRecoverableError,T=0;T<c.length;T++){var w=c[T];p(w.value,{componentStack:w.stack})}}finally{Z.T=r,se.p=d}}(Bs&3)!==0&&Df(),cs(s),d=s.pendingLanes,(o&261930)!==0&&(d&42)!==0?s===fg?Fc++:(Fc=0,fg=s):Fc=0,Hc(0)}}function xS(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,bc(r)))}function Df(){return RS(),IS(),NS(),OS()}function OS(){if(Qt!==5)return!1;var s=Dr,r=ug;ug=0;var o=ws(Bs),c=Z.T,d=se.p;try{se.p=32>o?32:o,Z.T=null,o=hg,hg=null;var p=Dr,T=Bs;if(Qt=0,Xo=Dr=null,Bs=0,(Je&6)!==0)throw Error(i(331));var w=Je;if(Je|=4,fS(p.current),cS(p,p.current,T,o),Je=w,Hc(0,!1),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(Si,p)}catch{}return!0}finally{se.p=d,Z.T=c,xS(s,r)}}function DS(s,r,o){r=li(o,r),r=qp(s.stateNode,r,2),s=Cr(s,r,2),s!==null&&(Sa(s,2),cs(s))}function it(s,r,o){if(s.tag===3)DS(s,s,o);else for(;r!==null;){if(r.tag===3){DS(r,s,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Or===null||!Or.has(c))){s=li(o,s),o=kT(2),c=Cr(r,o,2),c!==null&&(PT(o,c,r,s),Sa(c,2),cs(c));break}}r=r.return}}function pg(s,r,o){var c=s.pingCache;if(c===null){c=s.pingCache=new lN;var d=new Set;c.set(r,d)}else d=c.get(r),d===void 0&&(d=new Set,c.set(r,d));d.has(o)||(og=!0,d.add(o),s=dN.bind(null,s,r,o),r.then(s,s))}function dN(s,r,o){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&o,s.warmLanes&=~o,ft===s&&(Be&o)===o&&(Ct===4||Ct===3&&(Be&62914560)===Be&&300>An()-Af?(Je&2)===0&&Jo(s,0):lg|=o,$o===Be&&($o=0)),cs(s)}function kS(s,r){r===0&&(r=Rh()),s=La(s,r),s!==null&&(Sa(s,r),cs(s))}function mN(s){var r=s.memoizedState,o=0;r!==null&&(o=r.retryLane),kS(s,o)}function pN(s,r){var o=0;switch(s.tag){case 31:case 13:var c=s.stateNode,d=s.memoizedState;d!==null&&(o=d.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),kS(s,o)}function gN(s,r){return Kt(s,r)}var kf=null,el=null,gg=!1,Pf=!1,_g=!1,Pr=0;function cs(s){s!==el&&s.next===null&&(el===null?kf=el=s:el=el.next=s),Pf=!0,gg||(gg=!0,yN())}function Hc(s,r){if(!_g&&Pf){_g=!0;do for(var o=!1,c=kf;c!==null;){if(s!==0){var d=c.pendingLanes;if(d===0)var p=0;else{var T=c.suspendedLanes,w=c.pingedLanes;p=(1<<31-Nt(42|s)+1)-1,p&=d&~(T&~w),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,jS(c,p))}else p=Be,p=Gi(c,c===ft?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(p&3)===0||bi(c,p)||(o=!0,jS(c,p));c=c.next}while(o);_g=!1}}function _N(){PS()}function PS(){Pf=gg=!1;var s=0;Pr!==0&&IN()&&(s=Pr);for(var r=An(),o=null,c=kf;c!==null;){var d=c.next,p=MS(c,r);p===0?(c.next=null,o===null?kf=d:o.next=d,d===null&&(el=o)):(o=c,(s!==0||(p&3)!==0)&&(Pf=!0)),c=d}Qt!==0&&Qt!==5||Hc(s),Pr!==0&&(Pr=0)}function MS(s,r){for(var o=s.suspendedLanes,c=s.pingedLanes,d=s.expirationTimes,p=s.pendingLanes&-62914561;0<p;){var T=31-Nt(p),w=1<<T,k=d[T];k===-1?((w&o)===0||(w&c)!==0)&&(d[T]=Ym(w,r)):k<=r&&(s.expiredLanes|=w),p&=~w}if(r=ft,o=Be,o=Gi(s,s===r?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,o===0||s===r&&(nt===2||nt===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&lr(c),s.callbackNode=null,s.callbackPriority=0;if((o&3)===0||bi(s,o)){if(r=o&-o,r===s.callbackPriority)return r;switch(c!==null&&lr(c),ws(o)){case 2:case 8:o=Zl;break;case 32:o=cr;break;case 268435456:o=Sh;break;default:o=cr}return c=LS.bind(null,s),o=Kt(o,c),s.callbackPriority=r,s.callbackNode=o,r}return c!==null&&c!==null&&lr(c),s.callbackPriority=2,s.callbackNode=null,2}function LS(s,r){if(Qt!==0&&Qt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var o=s.callbackNode;if(Df()&&s.callbackNode!==o)return null;var c=Be;return c=Gi(s,s===ft?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(_S(s,c,r),MS(s,An()),s.callbackNode!=null&&s.callbackNode===o?LS.bind(null,s):null)}function jS(s,r){if(Df())return null;_S(s,r,!0)}function yN(){xN(function(){(Je&6)!==0?Kt(Jl,_N):PS()})}function yg(){if(Pr===0){var s=Uo;s===0&&(s=Hi,Hi<<=1,(Hi&261888)===0&&(Hi=256)),Pr=s}return Pr}function VS(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:wo(""+s)}function US(s,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,s.id&&o.setAttribute("form",s.id),r.parentNode.insertBefore(o,r),s=new FormData(s),o.parentNode.removeChild(o),s}function vN(s,r,o,c,d){if(r==="submit"&&o&&o.stateNode===d){var p=VS((d[Zt]||null).action),T=c.submitter;T&&(r=(r=T[Zt]||null)?VS(r.formAction):T.getAttribute("formAction"),r!==null&&(p=r,T=null));var w=new ns("action","action",null,c,d);s.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Pr!==0){var k=T?US(d,T):new FormData(d);Vp(o,{pending:!0,data:k,method:d.method,action:p},null,k)}}else typeof p=="function"&&(w.preventDefault(),k=T?US(d,T):new FormData(d),Vp(o,{pending:!0,data:k,method:d.method,action:p},p,k))},currentTarget:d}]})}}for(var vg=0;vg<tp.length;vg++){var Eg=tp[vg],EN=Eg.toLowerCase(),TN=Eg[0].toUpperCase()+Eg.slice(1);Oi(EN,"on"+TN)}Oi(gE,"onAnimationEnd"),Oi(_E,"onAnimationIteration"),Oi(yE,"onAnimationStart"),Oi("dblclick","onDoubleClick"),Oi("focusin","onFocus"),Oi("focusout","onBlur"),Oi(j1,"onTransitionRun"),Oi(V1,"onTransitionStart"),Oi(U1,"onTransitionCancel"),Oi(vE,"onTransitionEnd"),Ji("onMouseEnter",["mouseout","mouseover"]),Ji("onMouseLeave",["mouseout","mouseover"]),Ji("onPointerEnter",["pointerout","pointerover"]),Ji("onPointerLeave",["pointerout","pointerover"]),Xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qc));function zS(s,r){r=(r&4)!==0;for(var o=0;o<s.length;o++){var c=s[o],d=c.event;c=c.listeners;e:{var p=void 0;if(r)for(var T=c.length-1;0<=T;T--){var w=c[T],k=w.instance,q=w.currentTarget;if(w=w.listener,k!==p&&d.isPropagationStopped())break e;p=w,d.currentTarget=q;try{p(d)}catch(ee){Qh(ee)}d.currentTarget=null,p=k}else for(T=0;T<c.length;T++){if(w=c[T],k=w.instance,q=w.currentTarget,w=w.listener,k!==p&&d.isPropagationStopped())break e;p=w,d.currentTarget=q;try{p(d)}catch(ee){Qh(ee)}d.currentTarget=null,p=k}}}}function Ve(s,r){var o=r[vo];o===void 0&&(o=r[vo]=new Set);var c=s+"__bubble";o.has(c)||(BS(r,s,2,!1),o.add(c))}function Tg(s,r,o){var c=0;r&&(c|=4),BS(o,s,c,r)}var Mf="_reactListening"+Math.random().toString(36).slice(2);function Sg(s){if(!s[Mf]){s[Mf]=!0,nc.forEach(function(o){o!=="selectionchange"&&(SN.has(o)||Tg(o,!1,s),Tg(o,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[Mf]||(r[Mf]=!0,Tg("selectionchange",!1,r))}}function BS(s,r,o,c){switch(gb(r)){case 2:var d=$N;break;case 8:d=XN;break;default:d=jg}o=d.bind(null,r,o,s),d=void 0,!Ia||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),c?d!==void 0?s.addEventListener(r,o,{capture:!0,passive:d}):s.addEventListener(r,o,!0):d!==void 0?s.addEventListener(r,o,{passive:d}):s.addEventListener(r,o,!1)}function bg(s,r,o,c,d){var p=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var w=c.stateNode.containerInfo;if(w===d)break;if(T===4)for(T=c.return;T!==null;){var k=T.tag;if((k===3||k===4)&&T.stateNode.containerInfo===d)return;T=T.return}for(;w!==null;){if(T=Wi(w),T===null)return;if(k=T.tag,k===5||k===6||k===26||k===27){c=p=T;continue e}w=w.parentNode}}c=c.return}pr(function(){var q=p,ee=si(o),ne=[];e:{var Y=EE.get(s);if(Y!==void 0){var W=ns,de=s;switch(s){case"keypress":if(xa(o)===0)break e;case"keydown":case"keyup":W=Gh;break;case"focusin":de="focus",W=Da;break;case"focusout":de="blur",W=Da;break;case"beforeblur":case"afterblur":W=Da;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=pc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Lh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=v;break;case gE:case _E:case yE:W=Vh;break;case vE:W=C;break;case"scroll":case"scrollend":W=mc;break;case"wheel":W=Q;break;case"copy":case"cut":case"paste":W=Uh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=Rs;break;case"toggle":case"beforetoggle":W=Ie}var Se=(r&4)!==0,ot=!Se&&(s==="scroll"||s==="scrollend"),z=Se?Y!==null?Y+"Capture":null:Y;Se=[];for(var j=q,H;j!==null;){var te=j;if(H=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||H===null||z===null||(te=Ri(j,z),te!=null&&Se.push(Gc(j,te,H))),ot)break;j=j.return}0<Se.length&&(Y=new W(Y,de,null,o,ee),ne.push({event:Y,listeners:Se}))}}if((r&7)===0){e:{if(Y=s==="mouseover"||s==="pointerover",W=s==="mouseout"||s==="pointerout",Y&&o!==hc&&(de=o.relatedTarget||o.fromElement)&&(Wi(de)||de[Ki]))break e;if((W||Y)&&(Y=ee.window===ee?ee:(Y=ee.ownerDocument)?Y.defaultView||Y.parentWindow:window,W?(de=o.relatedTarget||o.toElement,W=q,de=de?Wi(de):null,de!==null&&(ot=l(de),Se=de.tag,de!==ot||Se!==5&&Se!==27&&Se!==6)&&(de=null)):(W=null,de=q),W!==de)){if(Se=pc,te="onMouseLeave",z="onMouseEnter",j="mouse",(s==="pointerout"||s==="pointerover")&&(Se=Rs,te="onPointerLeave",z="onPointerEnter",j="pointer"),ot=W==null?Y:Fn(W),H=de==null?Y:Fn(de),Y=new Se(te,j+"leave",W,o,ee),Y.target=ot,Y.relatedTarget=H,te=null,Wi(ee)===q&&(Se=new Se(z,j+"enter",de,o,ee),Se.target=H,Se.relatedTarget=ot,te=Se),ot=te,W&&de)t:{for(Se=bN,z=W,j=de,H=0,te=z;te;te=Se(te))H++;te=0;for(var _e=j;_e;_e=Se(_e))te++;for(;0<H-te;)z=Se(z),H--;for(;0<te-H;)j=Se(j),te--;for(;H--;){if(z===j||j!==null&&z===j.alternate){Se=z;break t}z=Se(z),j=Se(j)}Se=null}else Se=null;W!==null&&FS(ne,Y,W,Se,!1),de!==null&&ot!==null&&FS(ne,ot,de,Se,!0)}}e:{if(Y=q?Fn(q):window,W=Y.nodeName&&Y.nodeName.toLowerCase(),W==="select"||W==="input"&&Y.type==="file")var Ke=rE;else if(iE(Y))if(aE)Ke=P1;else{Ke=D1;var me=O1}else W=Y.nodeName,!W||W.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?q&&bo(q.elementType)&&(Ke=rE):Ke=k1;if(Ke&&(Ke=Ke(s,q))){sE(ne,Ke,o,ee);break e}me&&me(s,Y,q),s==="focusout"&&q&&Y.type==="number"&&q.memoizedProps.value!=null&&lc(Y,"number",Y.value)}switch(me=q?Fn(q):window,s){case"focusin":(iE(me)||me.contentEditable==="true")&&(Oo=me,Jm=q,Ec=null);break;case"focusout":Ec=Jm=Oo=null;break;case"mousedown":Zm=!0;break;case"contextmenu":case"mouseup":case"dragend":Zm=!1,mE(ne,o,ee);break;case"selectionchange":if(L1)break;case"keydown":case"keyup":mE(ne,o,ee)}var xe;if(Xe)e:{switch(s){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else xo?ka(s,o)&&(Fe="onCompositionEnd"):s==="keydown"&&o.keyCode===229&&(Fe="onCompositionStart");Fe&&(rs&&o.locale!=="ko"&&(xo||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&xo&&(xe=dc()):(ts=ee,fc="value"in ts?ts.value:ts.textContent,xo=!0)),me=Lf(q,Fe),0<me.length&&(Fe=new ss(Fe,s,null,o,ee),ne.push({event:Fe,listeners:me}),xe?Fe.data=xe:(xe=No(o),xe!==null&&(Fe.data=xe)))),(xe=ai?R1(s,o):I1(s,o))&&(Fe=Lf(q,"onBeforeInput"),0<Fe.length&&(me=new ss("onBeforeInput","beforeinput",null,o,ee),ne.push({event:me,listeners:Fe}),me.data=xe)),vN(ne,s,q,o,ee)}zS(ne,r)})}function Gc(s,r,o){return{instance:s,listener:r,currentTarget:o}}function Lf(s,r){for(var o=r+"Capture",c=[];s!==null;){var d=s,p=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||p===null||(d=Ri(s,o),d!=null&&c.unshift(Gc(s,d,p)),d=Ri(s,r),d!=null&&c.push(Gc(s,d,p))),s.tag===3)return c;s=s.return}return[]}function bN(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function FS(s,r,o,c,d){for(var p=r._reactName,T=[];o!==null&&o!==c;){var w=o,k=w.alternate,q=w.stateNode;if(w=w.tag,k!==null&&k===c)break;w!==5&&w!==26&&w!==27||q===null||(k=q,d?(q=Ri(o,p),q!=null&&T.unshift(Gc(o,q,k))):d||(q=Ri(o,p),q!=null&&T.push(Gc(o,q,k)))),o=o.return}T.length!==0&&s.push({event:r,listeners:T})}var wN=/\r\n?/g,CN=/\u0000|\uFFFD/g;function HS(s){return(typeof s=="string"?s:""+s).replace(wN,`
`).replace(CN,"")}function qS(s,r){return r=HS(r),HS(s)===r}function at(s,r,o,c,d,p){switch(o){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||kn(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&kn(s,""+c);break;case"className":Hn(s,"class",c);break;case"tabIndex":Hn(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Hn(s,o,c);break;case"style":uc(s,c,p);break;case"data":if(r!=="object"){Hn(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||o!=="href")){s.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(o);break}c=wo(""+c),s.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(r!=="input"&&at(s,r,"name",d.name,d,null),at(s,r,"formEncType",d.formEncType,d,null),at(s,r,"formMethod",d.formMethod,d,null),at(s,r,"formTarget",d.formTarget,d,null)):(at(s,r,"encType",d.encType,d,null),at(s,r,"method",d.method,d,null),at(s,r,"target",d.target,d,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(o);break}c=wo(""+c),s.setAttribute(o,c);break;case"onClick":c!=null&&(s.onclick=Ai);break;case"onScroll":c!=null&&Ve("scroll",s);break;case"onScrollEnd":c!=null&&Ve("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(d.children!=null)throw Error(i(60));s.innerHTML=o}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}o=wo(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(o,""+c):s.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(o,""):s.removeAttribute(o);break;case"capture":case"download":c===!0?s.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(o,c):s.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(o,c):s.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(o):s.setAttribute(o,c);break;case"popover":Ve("beforetoggle",s),Ve("toggle",s),To(s,"popover",c);break;case"xlinkActuate":Vt(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Vt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Vt(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Vt(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Vt(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Vt(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Vt(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Vt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Vt(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":To(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Mh.get(o)||o,To(s,o,c))}}function wg(s,r,o,c,d,p){switch(o){case"style":uc(s,c,p);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(d.children!=null)throw Error(i(60));s.innerHTML=o}}break;case"children":typeof c=="string"?kn(s,c):(typeof c=="number"||typeof c=="bigint")&&kn(s,""+c);break;case"onScroll":c!=null&&Ve("scroll",s);break;case"onScrollEnd":c!=null&&Ve("scrollend",s);break;case"onClick":c!=null&&(s.onclick=Ai);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ic.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),r=o.slice(2,d?o.length-7:void 0),p=s[Zt]||null,p=p!=null?p[o]:null,typeof p=="function"&&s.removeEventListener(r,p,d),typeof c=="function")){typeof p!="function"&&p!==null&&(o in s?s[o]=null:s.hasAttribute(o)&&s.removeAttribute(o)),s.addEventListener(r,c,d);break e}o in s?s[o]=c:c===!0?s.setAttribute(o,""):To(s,o,c)}}}function fn(s,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",s),Ve("load",s);var c=!1,d=!1,p;for(p in o)if(o.hasOwnProperty(p)){var T=o[p];if(T!=null)switch(p){case"src":c=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:at(s,r,p,T,o,null)}}d&&at(s,r,"srcSet",o.srcSet,o,null),c&&at(s,r,"src",o.src,o,null);return;case"input":Ve("invalid",s);var w=p=T=d=null,k=null,q=null;for(c in o)if(o.hasOwnProperty(c)){var ee=o[c];if(ee!=null)switch(c){case"name":d=ee;break;case"type":T=ee;break;case"checked":k=ee;break;case"defaultChecked":q=ee;break;case"value":p=ee;break;case"defaultValue":w=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,r));break;default:at(s,r,c,ee,o,null)}}Dh(s,p,w,k,q,T,d,!1);return;case"select":Ve("invalid",s),c=T=p=null;for(d in o)if(o.hasOwnProperty(d)&&(w=o[d],w!=null))switch(d){case"value":p=w;break;case"defaultValue":T=w;break;case"multiple":c=w;default:at(s,r,d,w,o,null)}r=p,o=T,s.multiple=!!c,r!=null?hr(s,!!c,r,!1):o!=null&&hr(s,!!c,o,!0);return;case"textarea":Ve("invalid",s),p=d=c=null;for(T in o)if(o.hasOwnProperty(T)&&(w=o[T],w!=null))switch(T){case"value":c=w;break;case"defaultValue":d=w;break;case"children":p=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:at(s,r,T,w,o,null)}fr(s,c,d,p);return;case"option":for(k in o)if(o.hasOwnProperty(k)&&(c=o[k],c!=null))switch(k){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:at(s,r,k,c,o,null)}return;case"dialog":Ve("beforetoggle",s),Ve("toggle",s),Ve("cancel",s),Ve("close",s);break;case"iframe":case"object":Ve("load",s);break;case"video":case"audio":for(c=0;c<qc.length;c++)Ve(qc[c],s);break;case"image":Ve("error",s),Ve("load",s);break;case"details":Ve("toggle",s);break;case"embed":case"source":case"link":Ve("error",s),Ve("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in o)if(o.hasOwnProperty(q)&&(c=o[q],c!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:at(s,r,q,c,o,null)}return;default:if(bo(r)){for(ee in o)o.hasOwnProperty(ee)&&(c=o[ee],c!==void 0&&wg(s,r,ee,c,o,void 0));return}}for(w in o)o.hasOwnProperty(w)&&(c=o[w],c!=null&&at(s,r,w,c,o,null))}function AN(s,r,o,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,p=null,T=null,w=null,k=null,q=null,ee=null;for(W in o){var ne=o[W];if(o.hasOwnProperty(W)&&ne!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":k=ne;default:c.hasOwnProperty(W)||at(s,r,W,null,c,ne)}}for(var Y in c){var W=c[Y];if(ne=o[Y],c.hasOwnProperty(Y)&&(W!=null||ne!=null))switch(Y){case"type":p=W;break;case"name":d=W;break;case"checked":q=W;break;case"defaultChecked":ee=W;break;case"value":T=W;break;case"defaultValue":w=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:W!==ne&&at(s,r,Y,W,c,ne)}}So(s,T,w,k,q,ee,p,d);return;case"select":W=T=w=Y=null;for(p in o)if(k=o[p],o.hasOwnProperty(p)&&k!=null)switch(p){case"value":break;case"multiple":W=k;default:c.hasOwnProperty(p)||at(s,r,p,null,c,k)}for(d in c)if(p=c[d],k=o[d],c.hasOwnProperty(d)&&(p!=null||k!=null))switch(d){case"value":Y=p;break;case"defaultValue":w=p;break;case"multiple":T=p;default:p!==k&&at(s,r,d,p,c,k)}r=w,o=T,c=W,Y!=null?hr(s,!!o,Y,!1):!!c!=!!o&&(r!=null?hr(s,!!o,r,!0):hr(s,!!o,o?[]:"",!1));return;case"textarea":W=Y=null;for(w in o)if(d=o[w],o.hasOwnProperty(w)&&d!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:at(s,r,w,null,c,d)}for(T in c)if(d=c[T],p=o[T],c.hasOwnProperty(T)&&(d!=null||p!=null))switch(T){case"value":Y=d;break;case"defaultValue":W=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==p&&at(s,r,T,d,c,p)}kh(s,Y,W);return;case"option":for(var de in o)if(Y=o[de],o.hasOwnProperty(de)&&Y!=null&&!c.hasOwnProperty(de))switch(de){case"selected":s.selected=!1;break;default:at(s,r,de,null,c,Y)}for(k in c)if(Y=c[k],W=o[k],c.hasOwnProperty(k)&&Y!==W&&(Y!=null||W!=null))switch(k){case"selected":s.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:at(s,r,k,Y,c,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in o)Y=o[Se],o.hasOwnProperty(Se)&&Y!=null&&!c.hasOwnProperty(Se)&&at(s,r,Se,null,c,Y);for(q in c)if(Y=c[q],W=o[q],c.hasOwnProperty(q)&&Y!==W&&(Y!=null||W!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,r));break;default:at(s,r,q,Y,c,W)}return;default:if(bo(r)){for(var ot in o)Y=o[ot],o.hasOwnProperty(ot)&&Y!==void 0&&!c.hasOwnProperty(ot)&&wg(s,r,ot,void 0,c,Y);for(ee in c)Y=c[ee],W=o[ee],!c.hasOwnProperty(ee)||Y===W||Y===void 0&&W===void 0||wg(s,r,ee,Y,c,W);return}}for(var z in o)Y=o[z],o.hasOwnProperty(z)&&Y!=null&&!c.hasOwnProperty(z)&&at(s,r,z,null,c,Y);for(ne in c)Y=c[ne],W=o[ne],!c.hasOwnProperty(ne)||Y===W||Y==null&&W==null||at(s,r,ne,Y,c,W)}function GS(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function RN(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var d=o[c],p=d.transferSize,T=d.initiatorType,w=d.duration;if(p&&w&&GS(T)){for(T=0,w=d.responseEnd,c+=1;c<o.length;c++){var k=o[c],q=k.startTime;if(q>w)break;var ee=k.transferSize,ne=k.initiatorType;ee&&GS(ne)&&(k=k.responseEnd,T+=ee*(k<w?1:(w-q)/(k-q)))}if(--c,r+=8*(p+T)/(d.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Cg=null,Ag=null;function jf(s){return s.nodeType===9?s:s.ownerDocument}function YS(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function KS(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function Rg(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Ig=null;function IN(){var s=window.event;return s&&s.type==="popstate"?s===Ig?!1:(Ig=s,!0):(Ig=null,!1)}var QS=typeof setTimeout=="function"?setTimeout:void 0,NN=typeof clearTimeout=="function"?clearTimeout:void 0,WS=typeof Promise=="function"?Promise:void 0,xN=typeof queueMicrotask=="function"?queueMicrotask:typeof WS<"u"?function(s){return WS.resolve(null).then(s).catch(ON)}:QS;function ON(s){setTimeout(function(){throw s})}function Mr(s){return s==="head"}function $S(s,r){var o=r,c=0;do{var d=o.nextSibling;if(s.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"||o==="/&"){if(c===0){s.removeChild(d),sl(r);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")Yc(s.ownerDocument.documentElement);else if(o==="head"){o=s.ownerDocument.head,Yc(o);for(var p=o.firstChild;p;){var T=p.nextSibling,w=p.nodeName;p[Qi]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=T}}else o==="body"&&Yc(s.ownerDocument.body);o=d}while(o);sl(r)}function XS(s,r){var o=s;s=0;do{var c=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(s===0)break;s--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||s++;o=c}while(o)}function Ng(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Ng(o),Eo(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}s.removeChild(o)}}function DN(s,r,o,c){for(;s.nodeType===1;){var d=o;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Qi])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(p=s.getAttribute("rel"),p==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(p!==d.rel||s.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||s.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||s.getAttribute("title")!==(d.title==null?null:d.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(p=s.getAttribute("src"),(p!==(d.src==null?null:d.src)||s.getAttribute("type")!==(d.type==null?null:d.type)||s.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&p&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var p=d.name==null?null:""+d.name;if(d.type==="hidden"&&s.getAttribute("name")===p)return s}else return s;if(s=di(s.nextSibling),s===null)break}return null}function kN(s,r,o){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=di(s.nextSibling),s===null))return null;return s}function JS(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=di(s.nextSibling),s===null))return null;return s}function xg(s){return s.data==="$?"||s.data==="$~"}function Og(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function PN(s,r){var o=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||o.readyState!=="loading")r();else{var c=function(){r(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function di(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var Dg=null;function ZS(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var o=s.data;if(o==="/$"||o==="/&"){if(r===0)return di(s.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}s=s.nextSibling}return null}function eb(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var o=s.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return s;r--}else o!=="/$"&&o!=="/&"||r++}s=s.previousSibling}return null}function tb(s,r,o){switch(r=jf(o),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Yc(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);Eo(s)}var mi=new Map,nb=new Set;function Vf(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Fs=se.d;se.d={f:MN,r:LN,D:jN,C:VN,L:UN,m:zN,X:FN,S:BN,M:HN};function MN(){var s=Fs.f(),r=Nf();return s||r}function LN(s){var r=ii(s);r!==null&&r.tag===5&&r.type==="form"?vT(r):Fs.r(s)}var tl=typeof document>"u"?null:document;function ib(s,r,o){var c=tl;if(c&&typeof r=="string"&&r){var d=Dn(r);d='link[rel="'+s+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),nb.has(d)||(nb.add(d),s={rel:s,crossOrigin:o,href:r},c.querySelector(d)===null&&(r=c.createElement("link"),fn(r,"link",s),jt(r),c.head.appendChild(r)))}}function jN(s){Fs.D(s),ib("dns-prefetch",s,null)}function VN(s,r){Fs.C(s,r),ib("preconnect",s,r)}function UN(s,r,o){Fs.L(s,r,o);var c=tl;if(c&&s&&r){var d='link[rel="preload"][as="'+Dn(r)+'"]';r==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+Dn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+Dn(o.imageSizes)+'"]')):d+='[href="'+Dn(s)+'"]';var p=d;switch(r){case"style":p=nl(s);break;case"script":p=il(s)}mi.has(p)||(s=E({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:s,as:r},o),mi.set(p,s),c.querySelector(d)!==null||r==="style"&&c.querySelector(Kc(p))||r==="script"&&c.querySelector(Qc(p))||(r=c.createElement("link"),fn(r,"link",s),jt(r),c.head.appendChild(r)))}}function zN(s,r){Fs.m(s,r);var o=tl;if(o&&s){var c=r&&typeof r.as=="string"?r.as:"script",d='link[rel="modulepreload"][as="'+Dn(c)+'"][href="'+Dn(s)+'"]',p=d;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=il(s)}if(!mi.has(p)&&(s=E({rel:"modulepreload",href:s},r),mi.set(p,s),o.querySelector(d)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Qc(p)))return}c=o.createElement("link"),fn(c,"link",s),jt(c),o.head.appendChild(c)}}}function BN(s,r,o){Fs.S(s,r,o);var c=tl;if(c&&s){var d=$i(c).hoistableStyles,p=nl(s);r=r||"default";var T=d.get(p);if(!T){var w={loading:0,preload:null};if(T=c.querySelector(Kc(p)))w.loading=5;else{s=E({rel:"stylesheet",href:s,"data-precedence":r},o),(o=mi.get(p))&&kg(s,o);var k=T=c.createElement("link");jt(k),fn(k,"link",s),k._p=new Promise(function(q,ee){k.onload=q,k.onerror=ee}),k.addEventListener("load",function(){w.loading|=1}),k.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Uf(T,r,c)}T={type:"stylesheet",instance:T,count:1,state:w},d.set(p,T)}}}function FN(s,r){Fs.X(s,r);var o=tl;if(o&&s){var c=$i(o).hoistableScripts,d=il(s),p=c.get(d);p||(p=o.querySelector(Qc(d)),p||(s=E({src:s,async:!0},r),(r=mi.get(d))&&Pg(s,r),p=o.createElement("script"),jt(p),fn(p,"link",s),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(d,p))}}function HN(s,r){Fs.M(s,r);var o=tl;if(o&&s){var c=$i(o).hoistableScripts,d=il(s),p=c.get(d);p||(p=o.querySelector(Qc(d)),p||(s=E({src:s,async:!0,type:"module"},r),(r=mi.get(d))&&Pg(s,r),p=o.createElement("script"),jt(p),fn(p,"link",s),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(d,p))}}function sb(s,r,o,c){var d=(d=Ee.current)?Vf(d):null;if(!d)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=nl(o.href),o=$i(d).hoistableStyles,c=o.get(r),c||(c={type:"style",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){s=nl(o.href);var p=$i(d).hoistableStyles,T=p.get(s);if(T||(d=d.ownerDocument||d,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(s,T),(p=d.querySelector(Kc(s)))&&!p._p&&(T.instance=p,T.state.loading=5),mi.has(s)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},mi.set(s,o),p||qN(d,s,o,T.state))),r&&c===null)throw Error(i(528,""));return T}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=il(o),o=$i(d).hoistableScripts,c=o.get(r),c||(c={type:"script",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function nl(s){return'href="'+Dn(s)+'"'}function Kc(s){return'link[rel="stylesheet"]['+s+"]"}function rb(s){return E({},s,{"data-precedence":s.precedence,precedence:null})}function qN(s,r,o,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),fn(r,"link",o),jt(r),s.head.appendChild(r))}function il(s){return'[src="'+Dn(s)+'"]'}function Qc(s){return"script[async]"+s}function ab(s,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+Dn(o.href)+'"]');if(c)return r.instance=c,jt(c),c;var d=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),jt(c),fn(c,"style",d),Uf(c,o.precedence,s),r.instance=c;case"stylesheet":d=nl(o.href);var p=s.querySelector(Kc(d));if(p)return r.state.loading|=4,r.instance=p,jt(p),p;c=rb(o),(d=mi.get(d))&&kg(c,d),p=(s.ownerDocument||s).createElement("link"),jt(p);var T=p;return T._p=new Promise(function(w,k){T.onload=w,T.onerror=k}),fn(p,"link",c),r.state.loading|=4,Uf(p,o.precedence,s),r.instance=p;case"script":return p=il(o.src),(d=s.querySelector(Qc(p)))?(r.instance=d,jt(d),d):(c=o,(d=mi.get(p))&&(c=E({},o),Pg(c,d)),s=s.ownerDocument||s,d=s.createElement("script"),jt(d),fn(d,"link",c),s.head.appendChild(d),r.instance=d);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Uf(c,o.precedence,s));return r.instance}function Uf(s,r,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=c.length?c[c.length-1]:null,p=d,T=0;T<c.length;T++){var w=c[T];if(w.dataset.precedence===r)p=w;else if(p!==d)break}p?p.parentNode.insertBefore(s,p.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(s,r.firstChild))}function kg(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function Pg(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var zf=null;function ob(s,r,o){if(zf===null){var c=new Map,d=zf=new Map;d.set(o,c)}else d=zf,c=d.get(o),c||(c=new Map,d.set(o,c));if(c.has(s))return c;for(c.set(s,null),o=o.getElementsByTagName(s),d=0;d<o.length;d++){var p=o[d];if(!(p[Qi]||p[Lt]||s==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var T=p.getAttribute(r)||"";T=s+T;var w=c.get(T);w?w.push(p):c.set(T,[p])}}return c}function lb(s,r,o){s=s.ownerDocument||s,s.head.insertBefore(o,r==="title"?s.querySelector("head > title"):null)}function GN(s,r,o){if(o===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function cb(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function YN(s,r,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var d=nl(c.href),p=r.querySelector(Kc(d));if(p){r=p._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=Bf.bind(s),r.then(s,s)),o.state.loading|=4,o.instance=p,jt(p);return}p=r.ownerDocument||r,c=rb(c),(d=mi.get(d))&&kg(c,d),p=p.createElement("link"),jt(p);var T=p;T._p=new Promise(function(w,k){T.onload=w,T.onerror=k}),fn(p,"link",c),o.instance=p}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(s.count++,o=Bf.bind(s),r.addEventListener("load",o),r.addEventListener("error",o))}}var Mg=0;function KN(s,r){return s.stylesheets&&s.count===0&&Hf(s,s.stylesheets),0<s.count||0<s.imgCount?function(o){var c=setTimeout(function(){if(s.stylesheets&&Hf(s,s.stylesheets),s.unsuspend){var p=s.unsuspend;s.unsuspend=null,p()}},6e4+r);0<s.imgBytes&&Mg===0&&(Mg=62500*RN());var d=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Hf(s,s.stylesheets),s.unsuspend)){var p=s.unsuspend;s.unsuspend=null,p()}},(s.imgBytes>Mg?50:800)+r);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(d)}}:null}function Bf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Hf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Ff=null;function Hf(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Ff=new Map,r.forEach(QN,s),Ff=null,Bf.call(s))}function QN(s,r){if(!(r.state.loading&4)){var o=Ff.get(s);if(o)var c=o.get(null);else{o=new Map,Ff.set(s,o);for(var d=s.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<d.length;p++){var T=d[p];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(o.set(T.dataset.precedence,T),c=T)}c&&o.set(null,c)}d=r.instance,T=d.getAttribute("data-precedence"),p=o.get(T)||c,p===c&&o.set(null,d),o.set(T,d),this.count++,c=Bf.bind(this),d.addEventListener("load",c),d.addEventListener("error",c),p?p.parentNode.insertBefore(d,p.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(d,s.firstChild)),r.state.loading|=4}}var Wc={$$typeof:$,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function WN(s,r,o,c,d,p,T,w,k){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yi(0),this.hiddenUpdates=Yi(null),this.identifierPrefix=c,this.onUncaughtError=d,this.onCaughtError=p,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function ub(s,r,o,c,d,p,T,w,k,q,ee,ne){return s=new WN(s,r,o,T,k,q,ee,ne,w),r=1,p===!0&&(r|=24),p=Gn(3,null,null,r),s.current=p,p.stateNode=s,r=mp(),r.refCount++,s.pooledCache=r,r.refCount++,p.memoizedState={element:c,isDehydrated:o,cache:r},yp(p),s}function hb(s){return s?(s=Po,s):Po}function fb(s,r,o,c,d,p){d=hb(d),c.context===null?c.context=d:c.pendingContext=d,c=wr(r),c.payload={element:o},p=p===void 0?null:p,p!==null&&(c.callback=p),o=Cr(s,c,r),o!==null&&(Vn(o,s,r),Rc(o,s,r))}function db(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var o=s.retryLane;s.retryLane=o!==0&&o<r?o:r}}function Lg(s,r){db(s,r),(s=s.alternate)&&db(s,r)}function mb(s){if(s.tag===13||s.tag===31){var r=La(s,67108864);r!==null&&Vn(r,s,67108864),Lg(s,67108864)}}function pb(s){if(s.tag===13||s.tag===31){var r=$n();r=wa(r);var o=La(s,r);o!==null&&Vn(o,s,r),Lg(s,r)}}var qf=!0;function $N(s,r,o,c){var d=Z.T;Z.T=null;var p=se.p;try{se.p=2,jg(s,r,o,c)}finally{se.p=p,Z.T=d}}function XN(s,r,o,c){var d=Z.T;Z.T=null;var p=se.p;try{se.p=8,jg(s,r,o,c)}finally{se.p=p,Z.T=d}}function jg(s,r,o,c){if(qf){var d=Vg(c);if(d===null)bg(s,r,c,Gf,o),_b(s,c);else if(ZN(d,s,r,o,c))c.stopPropagation();else if(_b(s,c),r&4&&-1<JN.indexOf(s)){for(;d!==null;){var p=ii(d);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var T=qi(p.pendingLanes);if(T!==0){var w=p;for(w.pendingLanes|=2,w.entangledLanes|=2;T;){var k=1<<31-Nt(T);w.entanglements[1]|=k,T&=~k}cs(p),(Je&6)===0&&(Rf=An()+500,Hc(0))}}break;case 31:case 13:w=La(p,2),w!==null&&Vn(w,p,2),Nf(),Lg(p,2)}if(p=Vg(c),p===null&&bg(s,r,c,Gf,o),p===d)break;d=p}d!==null&&c.stopPropagation()}else bg(s,r,c,null,o)}}function Vg(s){return s=si(s),Ug(s)}var Gf=null;function Ug(s){if(Gf=null,s=Wi(s),s!==null){var r=l(s);if(r===null)s=null;else{var o=r.tag;if(o===13){if(s=u(r),s!==null)return s;s=null}else if(o===31){if(s=f(r),s!==null)return s;s=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return Gf=s,null}function gb(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ea()){case Jl:return 2;case Zl:return 8;case cr:case Gm:return 32;case Sh:return 268435456;default:return 32}default:return 32}}var zg=!1,Lr=null,jr=null,Vr=null,$c=new Map,Xc=new Map,Ur=[],JN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _b(s,r){switch(s){case"focusin":case"focusout":Lr=null;break;case"dragenter":case"dragleave":jr=null;break;case"mouseover":case"mouseout":Vr=null;break;case"pointerover":case"pointerout":$c.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xc.delete(r.pointerId)}}function Jc(s,r,o,c,d,p){return s===null||s.nativeEvent!==p?(s={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:p,targetContainers:[d]},r!==null&&(r=ii(r),r!==null&&mb(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),s)}function ZN(s,r,o,c,d){switch(r){case"focusin":return Lr=Jc(Lr,s,r,o,c,d),!0;case"dragenter":return jr=Jc(jr,s,r,o,c,d),!0;case"mouseover":return Vr=Jc(Vr,s,r,o,c,d),!0;case"pointerover":var p=d.pointerId;return $c.set(p,Jc($c.get(p)||null,s,r,o,c,d)),!0;case"gotpointercapture":return p=d.pointerId,Xc.set(p,Jc(Xc.get(p)||null,s,r,o,c,d)),!0}return!1}function yb(s){var r=Wi(s.target);if(r!==null){var o=l(r);if(o!==null){if(r=o.tag,r===13){if(r=u(o),r!==null){s.blockedOn=r,wi(s.priority,function(){pb(o)});return}}else if(r===31){if(r=f(o),r!==null){s.blockedOn=r,wi(s.priority,function(){pb(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){s.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Yf(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var o=Vg(s.nativeEvent);if(o===null){o=s.nativeEvent;var c=new o.constructor(o.type,o);hc=c,o.target.dispatchEvent(c),hc=null}else return r=ii(o),r!==null&&mb(r),s.blockedOn=o,!1;r.shift()}return!0}function vb(s,r,o){Yf(s)&&o.delete(r)}function ex(){zg=!1,Lr!==null&&Yf(Lr)&&(Lr=null),jr!==null&&Yf(jr)&&(jr=null),Vr!==null&&Yf(Vr)&&(Vr=null),$c.forEach(vb),Xc.forEach(vb)}function Kf(s,r){s.blockedOn===r&&(s.blockedOn=null,zg||(zg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,ex)))}var Qf=null;function Eb(s){Qf!==s&&(Qf=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Qf===s&&(Qf=null);for(var r=0;r<s.length;r+=3){var o=s[r],c=s[r+1],d=s[r+2];if(typeof c!="function"){if(Ug(c||o)===null)continue;break}var p=ii(o);p!==null&&(s.splice(r,3),r-=3,Vp(p,{pending:!0,data:d,method:o.method,action:c},c,d))}}))}function sl(s){function r(k){return Kf(k,s)}Lr!==null&&Kf(Lr,s),jr!==null&&Kf(jr,s),Vr!==null&&Kf(Vr,s),$c.forEach(r),Xc.forEach(r);for(var o=0;o<Ur.length;o++){var c=Ur[o];c.blockedOn===s&&(c.blockedOn=null)}for(;0<Ur.length&&(o=Ur[0],o.blockedOn===null);)yb(o),o.blockedOn===null&&Ur.shift();if(o=(s.ownerDocument||s).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var d=o[c],p=o[c+1],T=d[Zt]||null;if(typeof p=="function")T||Eb(o);else if(T){var w=null;if(p&&p.hasAttribute("formAction")){if(d=p,T=p[Zt]||null)w=T.formAction;else if(Ug(d)!==null)continue}else w=T.action;typeof w=="function"?o[c+1]=w:(o.splice(c,3),c-=3),Eb(o)}}}function Tb(){function s(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(T){return d=T})},focusReset:"manual",scroll:"manual"})}function r(){d!==null&&(d(),d=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,d=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),d!==null&&(d(),d=null)}}}function Bg(s){this._internalRoot=s}Wf.prototype.render=Bg.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,c=$n();fb(o,c,s,r,null,null)},Wf.prototype.unmount=Bg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;fb(s.current,2,null,s,null,null),Nf(),r[Ki]=null}};function Wf(s){this._internalRoot=s}Wf.prototype.unstable_scheduleHydration=function(s){if(s){var r=Ih();s={blockedOn:null,target:s,priority:r};for(var o=0;o<Ur.length&&r!==0&&r<Ur[o].priority;o++);Ur.splice(o,0,s),o===0&&yb(s)}};var Sb=e.version;if(Sb!=="19.2.0")throw Error(i(527,Sb,"19.2.0"));se.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=g(r),s=s!==null?y(s):null,s=s===null?null:s.stateNode,s};var tx={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$f.isDisabled&&$f.supportsFiber)try{Si=$f.inject(tx),on=$f}catch{}}return eu.createRoot=function(s,r){if(!a(s))throw Error(i(299));var o=!1,c="",d=NT,p=xT,T=OT;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(p=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError)),r=ub(s,1,!1,null,null,o,c,null,d,p,T,Tb),s[Ki]=r.current,Sg(s),new Bg(r)},eu.hydrateRoot=function(s,r,o){if(!a(s))throw Error(i(299));var c=!1,d="",p=NT,T=xT,w=OT,k=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.formState!==void 0&&(k=o.formState)),r=ub(s,1,!0,r,o??null,c,d,k,p,T,w,Tb),r.context=hb(null),o=r.current,c=$n(),c=wa(c),d=wr(c),d.callback=null,Cr(o,d,c),o=c,r.current.lanes=o,Sa(r,o),cs(r),s[Ki]=r.current,Sg(s),new Wf(r)},eu.version="19.2.0",eu}var Db;function hx(){if(Db)return qg.exports;Db=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),qg.exports=ux(),qg.exports}var fx=hx();var kb="popstate";function dx(n={}){function e(a,l){let{pathname:u="/",search:f="",hash:m=""}=lo(a.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),b_("",{pathname:u,search:f,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let u=a.document.querySelector("base"),f="";if(u&&u.getAttribute("href")){let m=a.location.href,g=m.indexOf("#");f=g===-1?m:m.slice(0,g)}return f+"#"+(typeof l=="string"?l:Iu(l))}function i(a,l){ei(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return px(e,t,i,n)}function Tt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ei(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mx(){return Math.random().toString(36).substring(2,10)}function Pb(n,e){return{usr:n.state,key:n.key,idx:e}}function b_(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?lo(e):e,state:t,key:e&&e.key||i||mx()}}function Iu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function lo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function px(n,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,u=a.history,f="POP",m=null,g=y();g==null&&(g=0,u.replaceState({...u.state,idx:g},""));function y(){return(u.state||{idx:null}).idx}function E(){f="POP";let L=y(),X=L==null?null:L-g;g=L,m&&m({action:f,location:V.location,delta:X})}function b(L,X){f="PUSH";let K=b_(V.location,L,X);t&&t(K,L),g=y()+1;let $=Pb(K,g),ae=V.createHref(K);try{u.pushState($,"",ae)}catch(pe){if(pe instanceof DOMException&&pe.name==="DataCloneError")throw pe;a.location.assign(ae)}l&&m&&m({action:f,location:V.location,delta:1})}function A(L,X){f="REPLACE";let K=b_(V.location,L,X);t&&t(K,L),g=y();let $=Pb(K,g),ae=V.createHref(K);u.replaceState($,"",ae),l&&m&&m({action:f,location:V.location,delta:0})}function I(L){return gx(L)}let V={get action(){return f},get location(){return n(a,u)},listen(L){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(kb,E),m=L,()=>{a.removeEventListener(kb,E),m=null}},createHref(L){return e(a,L)},createURL:I,encodeLocation(L){let X=I(L);return{pathname:X.pathname,search:X.search,hash:X.hash}},push:b,replace:A,go(L){return u.go(L)}};return V}function gx(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Tt(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Iu(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function Z0(n,e,t="/"){return _x(n,e,t,!1)}function _x(n,e,t,i){let a=typeof e=="string"?lo(e):e,l=Zs(a.pathname||"/",t);if(l==null)return null;let u=eC(n);yx(u);let f=null;for(let m=0;f==null&&m<u.length;++m){let g=Nx(l);f=Rx(u[m],g,i)}return f}function eC(n,e=[],t=[],i="",a=!1){let l=(u,f,m=a,g)=>{let y={relativePath:g===void 0?u.path||"":g,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(i)&&m)return;Tt(y.relativePath.startsWith(i),`Absolute route path "${y.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(i.length)}let E=Ks([i,y.relativePath]),b=t.concat(y);u.children&&u.children.length>0&&(Tt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),eC(u.children,e,b,E,m)),!(u.path==null&&!u.index)&&e.push({path:E,score:Cx(E,u.index),routesMeta:b})};return n.forEach((u,f)=>{if(u.path===""||!u.path?.includes("?"))l(u,f);else for(let m of tC(u.path))l(u,f,!0,m)}),e}function tC(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let u=tC(i.join("/")),f=[];return f.push(...u.map(m=>m===""?l:[l,m].join("/"))),a&&f.push(...u),f.map(m=>n.startsWith("/")&&m===""?"/":m)}function yx(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Ax(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var vx=/^:[\w-]+$/,Ex=3,Tx=2,Sx=1,bx=10,wx=-2,Mb=n=>n==="*";function Cx(n,e){let t=n.split("/"),i=t.length;return t.some(Mb)&&(i+=wx),e&&(i+=Tx),t.filter(a=>!Mb(a)).reduce((a,l)=>a+(vx.test(l)?Ex:l===""?Sx:bx),i)}function Ax(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function Rx(n,e,t=!1){let{routesMeta:i}=n,a={},l="/",u=[];for(let f=0;f<i.length;++f){let m=i[f],g=f===i.length-1,y=l==="/"?e:e.slice(l.length)||"/",E=Td({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},y),b=m.route;if(!E&&g&&t&&!i[i.length-1].route.index&&(E=Td({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!E)return null;Object.assign(a,E.params),u.push({params:a,pathname:Ks([l,E.pathname]),pathnameBase:Px(Ks([l,E.pathnameBase])),route:b}),E.pathnameBase!=="/"&&(l=Ks([l,E.pathnameBase]))}return u}function Td(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=Ix(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],u=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:i.reduce((g,{paramName:y,isOptional:E},b)=>{if(y==="*"){let I=f[b]||"";u=l.slice(0,l.length-I.length).replace(/(.)\/+$/,"$1")}const A=f[b];return E&&!A?g[y]=void 0:g[y]=(A||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:u,pattern:n}}function Ix(n,e=!1,t=!0){ei(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,m)=>(i.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function Nx(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ei(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Zs(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}var xx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ox=n=>xx.test(n);function Dx(n,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof n=="string"?lo(n):n,l;if(t)if(Ox(t))l=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),ei(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${t}`)}t.startsWith("/")?l=Lb(t.substring(1),"/"):l=Lb(t,e)}else l=e;return{pathname:l,search:Mx(i),hash:Lx(a)}}function Lb(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Qg(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kx(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function fy(n){let e=kx(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function dy(n,e,t,i=!1){let a;typeof n=="string"?a=lo(n):(a={...n},Tt(!a.pathname||!a.pathname.includes("?"),Qg("?","pathname","search",a)),Tt(!a.pathname||!a.pathname.includes("#"),Qg("#","pathname","hash",a)),Tt(!a.search||!a.search.includes("#"),Qg("#","search","hash",a)));let l=n===""||a.pathname==="",u=l?"/":a.pathname,f;if(u==null)f=t;else{let E=e.length-1;if(!i&&u.startsWith("..")){let b=u.split("/");for(;b[0]==="..";)b.shift(),E-=1;a.pathname=b.join("/")}f=E>=0?e[E]:"/"}let m=Dx(a,f),g=u&&u!=="/"&&u.endsWith("/"),y=(l||u===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||y)&&(m.pathname+="/"),m}var Ks=n=>n.join("/").replace(/\/\/+/g,"/"),Px=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Mx=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Lx=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function jx(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var nC=["POST","PUT","PATCH","DELETE"];new Set(nC);var Vx=["GET",...nC];new Set(Vx);var Ll=x.createContext(null);Ll.displayName="DataRouter";var rm=x.createContext(null);rm.displayName="DataRouterState";x.createContext(!1);var iC=x.createContext({isTransitioning:!1});iC.displayName="ViewTransition";var Ux=x.createContext(new Map);Ux.displayName="Fetchers";var zx=x.createContext(null);zx.displayName="Await";var Ui=x.createContext(null);Ui.displayName="Navigation";var Wu=x.createContext(null);Wu.displayName="Location";var Ei=x.createContext({outlet:null,matches:[],isDataRoute:!1});Ei.displayName="Route";var my=x.createContext(null);my.displayName="RouteError";function Bx(n,{relative:e}={}){Tt(jl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=x.useContext(Ui),{hash:a,pathname:l,search:u}=$u(n,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:Ks([t,l])),i.createHref({pathname:f,search:u,hash:a})}function jl(){return x.useContext(Wu)!=null}function ma(){return Tt(jl(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(Wu).location}var sC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function rC(n){x.useContext(Ui).static||x.useLayoutEffect(n)}function am(){let{isDataRoute:n}=x.useContext(Ei);return n?nO():Fx()}function Fx(){Tt(jl(),"useNavigate() may be used only in the context of a <Router> component.");let n=x.useContext(Ll),{basename:e,navigator:t}=x.useContext(Ui),{matches:i}=x.useContext(Ei),{pathname:a}=ma(),l=JSON.stringify(fy(i)),u=x.useRef(!1);return rC(()=>{u.current=!0}),x.useCallback((m,g={})=>{if(ei(u.current,sC),!u.current)return;if(typeof m=="number"){t.go(m);return}let y=dy(m,JSON.parse(l),a,g.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Ks([e,y.pathname])),(g.replace?t.replace:t.push)(y,g.state,g)},[e,t,l,a,n])}var Hx=x.createContext(null);function qx(n){let e=x.useContext(Ei).outlet;return x.useMemo(()=>e&&x.createElement(Hx.Provider,{value:n},e),[e,n])}function En(){let{matches:n}=x.useContext(Ei),e=n[n.length-1];return e?e.params:{}}function $u(n,{relative:e}={}){let{matches:t}=x.useContext(Ei),{pathname:i}=ma(),a=JSON.stringify(fy(t));return x.useMemo(()=>dy(n,JSON.parse(a),i,e==="path"),[n,a,i,e])}function Gx(n,e){return aC(n,e)}function aC(n,e,t,i,a){Tt(jl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=x.useContext(Ui),{matches:u}=x.useContext(Ei),f=u[u.length-1],m=f?f.params:{},g=f?f.pathname:"/",y=f?f.pathnameBase:"/",E=f&&f.route;{let K=E&&E.path||"";oC(g,!E||K.endsWith("*")||K.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${K}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${K}"> to <Route path="${K==="/"?"*":`${K}/*`}">.`)}let b=ma(),A;if(e){let K=typeof e=="string"?lo(e):e;Tt(y==="/"||K.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${K.pathname}" was given in the \`location\` prop.`),A=K}else A=b;let I=A.pathname||"/",V=I;if(y!=="/"){let K=y.replace(/^\//,"").split("/");V="/"+I.replace(/^\//,"").split("/").slice(K.length).join("/")}let L=Z0(n,{pathname:V});ei(E||L!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),ei(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let X=$x(L&&L.map(K=>Object.assign({},K,{params:Object.assign({},m,K.params),pathname:Ks([y,l.encodeLocation?l.encodeLocation(K.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?y:Ks([y,l.encodeLocation?l.encodeLocation(K.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathnameBase])})),u,t,i,a);return e&&X?x.createElement(Wu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},X):X}function Yx(){let n=tO(),e=jx(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=x.createElement(x.Fragment,null,x.createElement("p",null," Hey developer "),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:l},"ErrorBoundary")," or"," ",x.createElement("code",{style:l},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),t?x.createElement("pre",{style:a},t):null,u)}var Kx=x.createElement(Yx,null),Qx=class extends x.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?x.createElement(Ei.Provider,{value:this.props.routeContext},x.createElement(my.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Wx({routeContext:n,match:e,children:t}){let i=x.useContext(Ll);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),x.createElement(Ei.Provider,{value:n},t)}function $x(n,e=[],t=null,i=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,u=t?.errors;if(u!=null){let y=l.findIndex(E=>E.route.id&&u?.[E.route.id]!==void 0);Tt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let f=!1,m=-1;if(t)for(let y=0;y<l.length;y++){let E=l[y];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(m=y),E.route.id){let{loaderData:b,errors:A}=t,I=E.route.loader&&!b.hasOwnProperty(E.route.id)&&(!A||A[E.route.id]===void 0);if(E.route.lazy||I){f=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}let g=t&&i?(y,E)=>{i(y,{location:t.location,params:t.matches?.[0]?.params??{},errorInfo:E})}:void 0;return l.reduceRight((y,E,b)=>{let A,I=!1,V=null,L=null;t&&(A=u&&E.route.id?u[E.route.id]:void 0,V=E.route.errorElement||Kx,f&&(m<0&&b===0?(oC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,L=null):m===b&&(I=!0,L=E.route.hydrateFallbackElement||null)));let X=e.concat(l.slice(0,b+1)),K=()=>{let $;return A?$=V:I?$=L:E.route.Component?$=x.createElement(E.route.Component,null):E.route.element?$=E.route.element:$=y,x.createElement(Wx,{match:E,routeContext:{outlet:y,matches:X,isDataRoute:t!=null},children:$})};return t&&(E.route.ErrorBoundary||E.route.errorElement||b===0)?x.createElement(Qx,{location:t.location,revalidation:t.revalidation,component:V,error:A,children:K(),routeContext:{outlet:null,matches:X,isDataRoute:!0},onError:g}):K()},null)}function py(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Xx(n){let e=x.useContext(Ll);return Tt(e,py(n)),e}function Jx(n){let e=x.useContext(rm);return Tt(e,py(n)),e}function Zx(n){let e=x.useContext(Ei);return Tt(e,py(n)),e}function gy(n){let e=Zx(n),t=e.matches[e.matches.length-1];return Tt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function eO(){return gy("useRouteId")}function tO(){let n=x.useContext(my),e=Jx("useRouteError"),t=gy("useRouteError");return n!==void 0?n:e.errors?.[t]}function nO(){let{router:n}=Xx("useNavigate"),e=gy("useNavigate"),t=x.useRef(!1);return rC(()=>{t.current=!0}),x.useCallback(async(a,l={})=>{ei(t.current,sC),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var jb={};function oC(n,e,t){!e&&!jb[n]&&(jb[n]=!0,ei(!1,t))}x.memo(iO);function iO({routes:n,future:e,state:t,unstable_onError:i}){return aC(n,void 0,t,i,e)}function _y({to:n,replace:e,state:t,relative:i}){Tt(jl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=x.useContext(Ui);ei(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=x.useContext(Ei),{pathname:u}=ma(),f=am(),m=dy(n,fy(l),u,i==="path"),g=JSON.stringify(m);return x.useEffect(()=>{f(JSON.parse(g),{replace:e,state:t,relative:i})},[f,g,i,e,t]),null}function lC(n){return qx(n.context)}function dn(n){Tt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function sO({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1}){Tt(!jl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),f=x.useMemo(()=>({basename:u,navigator:a,static:l,future:{}}),[u,a,l]);typeof t=="string"&&(t=lo(t));let{pathname:m="/",search:g="",hash:y="",state:E=null,key:b="default"}=t,A=x.useMemo(()=>{let I=Zs(m,u);return I==null?null:{location:{pathname:I,search:g,hash:y,state:E,key:b},navigationType:i}},[u,m,g,y,E,b,i]);return ei(A!=null,`<Router basename="${u}"> is not able to match the URL "${m}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:x.createElement(Ui.Provider,{value:f},x.createElement(Wu.Provider,{children:e,value:A}))}function rO({children:n,location:e}){return Gx(w_(n),e)}function w_(n,e=[]){let t=[];return x.Children.forEach(n,(i,a)=>{if(!x.isValidElement(i))return;let l=[...e,a];if(i.type===x.Fragment){t.push.apply(t,w_(i.props.children,l));return}Tt(i.type===dn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Tt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=w_(i.props.children,l)),t.push(u)}),t}var ld="get",cd="application/x-www-form-urlencoded";function om(n){return n!=null&&typeof n.tagName=="string"}function aO(n){return om(n)&&n.tagName.toLowerCase()==="button"}function oO(n){return om(n)&&n.tagName.toLowerCase()==="form"}function lO(n){return om(n)&&n.tagName.toLowerCase()==="input"}function cO(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function uO(n,e){return n.button===0&&(!e||e==="_self")&&!cO(n)}var Xf=null;function hO(){if(Xf===null)try{new FormData(document.createElement("form"),0),Xf=!1}catch{Xf=!0}return Xf}var fO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Wg(n){return n!=null&&!fO.has(n)?(ei(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${cd}"`),null):n}function dO(n,e){let t,i,a,l,u;if(oO(n)){let f=n.getAttribute("action");i=f?Zs(f,e):null,t=n.getAttribute("method")||ld,a=Wg(n.getAttribute("enctype"))||cd,l=new FormData(n)}else if(aO(n)||lO(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||f.getAttribute("action");if(i=m?Zs(m,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||ld,a=Wg(n.getAttribute("formenctype"))||Wg(f.getAttribute("enctype"))||cd,l=new FormData(f,n),!hO()){let{name:g,type:y,value:E}=n;if(y==="image"){let b=g?`${g}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else g&&l.append(g,E)}}else{if(om(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ld,i=null,a=cd,u=n}return l&&a==="text/plain"&&(u=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function yy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function mO(n,e,t){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&Zs(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function pO(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function gO(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function _O(n,e,t){let i=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let u=await pO(l,t);return u.links?u.links():[]}return[]}));return TO(i.flat(1).filter(gO).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Vb(n,e,t,i,a,l){let u=(m,g)=>t[g]?m.route.id!==t[g].route.id:!0,f=(m,g)=>t[g].pathname!==m.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==m.params["*"];return l==="assets"?e.filter((m,g)=>u(m,g)||f(m,g)):l==="data"?e.filter((m,g)=>{let y=i.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(u(m,g)||f(m,g))return!0;if(m.route.shouldRevalidate){let E=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function yO(n,e,{includeHydrateFallback:t}={}){return vO(n.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function vO(n){return[...new Set(n)]}function EO(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function TO(n,e){let t=new Set;return new Set(e),n.reduce((i,a)=>{let l=JSON.stringify(EO(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}function cC(){let n=x.useContext(Ll);return yy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function SO(){let n=x.useContext(rm);return yy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var vy=x.createContext(void 0);vy.displayName="FrameworkContext";function uC(){let n=x.useContext(vy);return yy(n,"You must render this element inside a <HydratedRouter> element"),n}function bO(n,e){let t=x.useContext(vy),[i,a]=x.useState(!1),[l,u]=x.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:g,onMouseLeave:y,onTouchStart:E}=e,b=x.useRef(null);x.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let V=X=>{X.forEach(K=>{u(K.isIntersecting)})},L=new IntersectionObserver(V,{threshold:.5});return b.current&&L.observe(b.current),()=>{L.disconnect()}}},[n]),x.useEffect(()=>{if(i){let V=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(V)}}},[i]);let A=()=>{a(!0)},I=()=>{a(!1),u(!1)};return t?n!=="intent"?[l,b,{}]:[l,b,{onFocus:tu(f,A),onBlur:tu(m,I),onMouseEnter:tu(g,A),onMouseLeave:tu(y,I),onTouchStart:tu(E,A)}]:[!1,b,{}]}function tu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function wO({page:n,...e}){let{router:t}=cC(),i=x.useMemo(()=>Z0(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?x.createElement(AO,{page:n,matches:i,...e}):null}function CO(n){let{manifest:e,routeModules:t}=uC(),[i,a]=x.useState([]);return x.useEffect(()=>{let l=!1;return _O(n,e,t).then(u=>{l||a(u)}),()=>{l=!0}},[n,e,t]),i}function AO({page:n,matches:e,...t}){let i=ma(),{manifest:a,routeModules:l}=uC(),{basename:u}=cC(),{loaderData:f,matches:m}=SO(),g=x.useMemo(()=>Vb(n,e,m,a,i,"data"),[n,e,m,a,i]),y=x.useMemo(()=>Vb(n,e,m,a,i,"assets"),[n,e,m,a,i]),E=x.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let I=new Set,V=!1;if(e.forEach(X=>{let K=a.routes[X.route.id];!K||!K.hasLoader||(!g.some($=>$.route.id===X.route.id)&&X.route.id in f&&l[X.route.id]?.shouldRevalidate||K.hasClientLoader?V=!0:I.add(X.route.id))}),I.size===0)return[];let L=mO(n,u,"data");return V&&I.size>0&&L.searchParams.set("_routes",e.filter(X=>I.has(X.route.id)).map(X=>X.route.id).join(",")),[L.pathname+L.search]},[u,f,i,a,g,e,n,l]),b=x.useMemo(()=>yO(y,a),[y,a]),A=CO(y);return x.createElement(x.Fragment,null,E.map(I=>x.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...t})),b.map(I=>x.createElement("link",{key:I,rel:"modulepreload",href:I,...t})),A.map(({key:I,link:V})=>x.createElement("link",{key:I,nonce:t.nonce,...V})))}function RO(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var hC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{hC&&(window.__reactRouterVersion="7.9.6")}catch{}function IO({basename:n,children:e,window:t}){let i=x.useRef();i.current==null&&(i.current=dx({window:t,v5Compat:!0}));let a=i.current,[l,u]=x.useState({action:a.action,location:a.location}),f=x.useCallback(m=>{x.startTransition(()=>u(m))},[u]);return x.useLayoutEffect(()=>a.listen(f),[a,f]),x.createElement(sO,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a})}var fC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mn=x.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:u,state:f,target:m,to:g,preventScrollReset:y,viewTransition:E,...b},A){let{basename:I}=x.useContext(Ui),V=typeof g=="string"&&fC.test(g),L,X=!1;if(typeof g=="string"&&V&&(L=g,hC))try{let N=new URL(window.location.href),U=g.startsWith("//")?new URL(N.protocol+g):new URL(g),P=Zs(U.pathname,I);U.origin===N.origin&&P!=null?g=P+U.search+U.hash:X=!0}catch{ei(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let K=Bx(g,{relative:a}),[$,ae,pe]=bO(i,b),ve=DO(g,{replace:u,state:f,target:m,preventScrollReset:y,relative:a,viewTransition:E});function O(N){e&&e(N),N.defaultPrevented||ve(N)}let R=x.createElement("a",{...b,...pe,href:L||K,onClick:X||l?e:O,ref:RO(A,ae),target:m,"data-discover":!V&&t==="render"?"true":void 0});return $&&!V?x.createElement(x.Fragment,null,R,x.createElement(wO,{page:K})):R});mn.displayName="Link";var NO=x.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:u,viewTransition:f,children:m,...g},y){let E=$u(u,{relative:g.relative}),b=ma(),A=x.useContext(rm),{navigator:I,basename:V}=x.useContext(Ui),L=A!=null&&jO(E)&&f===!0,X=I.encodeLocation?I.encodeLocation(E).pathname:E.pathname,K=b.pathname,$=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||(K=K.toLowerCase(),$=$?$.toLowerCase():null,X=X.toLowerCase()),$&&V&&($=Zs($,V)||$);const ae=X!=="/"&&X.endsWith("/")?X.length-1:X.length;let pe=K===X||!a&&K.startsWith(X)&&K.charAt(ae)==="/",ve=$!=null&&($===X||!a&&$.startsWith(X)&&$.charAt(X.length)==="/"),O={isActive:pe,isPending:ve,isTransitioning:L},R=pe?e:void 0,N;typeof i=="function"?N=i(O):N=[i,pe?"active":null,ve?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let U=typeof l=="function"?l(O):l;return x.createElement(mn,{...g,"aria-current":R,className:N,ref:y,style:U,to:u,viewTransition:f},typeof m=="function"?m(O):m)});NO.displayName="NavLink";var xO=x.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:u=ld,action:f,onSubmit:m,relative:g,preventScrollReset:y,viewTransition:E,...b},A)=>{let I=MO(),V=LO(f,{relative:g}),L=u.toLowerCase()==="get"?"get":"post",X=typeof f=="string"&&fC.test(f),K=$=>{if(m&&m($),$.defaultPrevented)return;$.preventDefault();let ae=$.nativeEvent.submitter,pe=ae?.getAttribute("formmethod")||u;I(ae||$.currentTarget,{fetcherKey:e,method:pe,navigate:t,replace:a,state:l,relative:g,preventScrollReset:y,viewTransition:E})};return x.createElement("form",{ref:A,method:L,action:V,onSubmit:i?m:K,...b,"data-discover":!X&&n==="render"?"true":void 0})});xO.displayName="Form";function OO(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dC(n){let e=x.useContext(Ll);return Tt(e,OO(n)),e}function DO(n,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:u}={}){let f=am(),m=ma(),g=$u(n,{relative:l});return x.useCallback(y=>{if(uO(y,e)){y.preventDefault();let E=t!==void 0?t:Iu(m)===Iu(g);f(n,{replace:E,state:i,preventScrollReset:a,relative:l,viewTransition:u})}},[m,f,g,t,i,e,n,a,l,u])}var kO=0,PO=()=>`__${String(++kO)}__`;function MO(){let{router:n}=dC("useSubmit"),{basename:e}=x.useContext(Ui),t=eO();return x.useCallback(async(i,a={})=>{let{action:l,method:u,encType:f,formData:m,body:g}=dO(i,e);if(a.navigate===!1){let y=a.fetcherKey||PO();await n.fetch(y,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:g,formMethod:a.method||u,formEncType:a.encType||f,flushSync:a.flushSync})}else await n.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:g,formMethod:a.method||u,formEncType:a.encType||f,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function LO(n,{relative:e}={}){let{basename:t}=x.useContext(Ui),i=x.useContext(Ei);Tt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...$u(n||".",{relative:e})},u=ma();if(n==null){l.search=u.search;let f=new URLSearchParams(l.search),m=f.getAll("index");if(m.some(y=>y==="")){f.delete("index"),m.filter(E=>E).forEach(E=>f.append("index",E));let y=f.toString();l.search=y?`?${y}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Ks([t,l.pathname])),Iu(l)}function jO(n,{relative:e}={}){let t=x.useContext(iC);Tt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=dC("useViewTransitionState"),a=$u(n,{relative:e});if(!t.isTransitioning)return!1;let l=Zs(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=Zs(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Td(a.pathname,u)!=null||Td(a.pathname,l)!=null}const ys="/skill-exchange/assets/logo-CZvJbn1G.png",VO=()=>{};var Ub={};const mC={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const oe=function(n,e){if(!n)throw Vl(e)},Vl=function(n){return new Error("Firebase Database ("+mC.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};const pC=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},UO=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],u=n[t++],f=n[t++],m=((a&7)<<18|(l&63)<<12|(u&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],u=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},Ey={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const l=n[a],u=a+1<n.length,f=u?n[a+1]:0,m=a+2<n.length,g=m?n[a+2]:0,y=l>>2,E=(l&3)<<4|f>>4;let b=(f&15)<<2|g>>6,A=g&63;m||(A=64,u||(b=64)),i.push(t[y],t[E],t[b],t[A])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(pC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):UO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],f=a<n.length?t[n.charAt(a)]:0;++a;const g=a<n.length?t[n.charAt(a)]:64;++a;const E=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||f==null||g==null||E==null)throw new zO;const b=l<<2|f>>4;if(i.push(b),g!==64){const A=f<<4&240|g>>2;if(i.push(A),E!==64){const I=g<<6&192|E;i.push(I)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class zO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gC=function(n){const e=pC(n);return Ey.encodeByteArray(e,!0)},Sd=function(n){return gC(n).replace(/\./g,"")},bd=function(n){try{return Ey.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function BO(n){return _C(void 0,n)}function _C(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!FO(t)||(n[t]=_C(n[t],e[t]));return n}function FO(n){return n!=="__proto__"}function HO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const qO=()=>HO().__FIREBASE_DEFAULTS__,GO=()=>{if(typeof process>"u"||typeof Ub>"u")return;const n=Ub.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},YO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&bd(n[1]);return e&&JSON.parse(e)},lm=()=>{try{return VO()||qO()||GO()||YO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},yC=n=>lm()?.emulatorHosts?.[n],Ty=n=>{const e=yC(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},vC=()=>lm()?.config,EC=n=>lm()?.[`_${n}`];class Xu{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function vs(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cm(n){return(await fetch(n,{credentials:"include"})).ok}function Sy(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Sd(JSON.stringify(t)),Sd(JSON.stringify(u)),""].join(".")}const fu={};function KO(){const n={prod:[],emulator:[]};for(const e of Object.keys(fu))fu[e]?n.emulator.push(e):n.prod.push(e);return n}function QO(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let zb=!1;function um(n,e){if(typeof window>"u"||typeof document>"u"||!vs(window.location.host)||fu[n]===e||fu[n]||zb)return;fu[n]=e;function t(b){return`__firebase__banner__${b}`}const i="__firebase__banner",l=KO().prod.length>0;function u(){const b=document.getElementById(i);b&&b.remove()}function f(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function m(b,A){b.setAttribute("width","24"),b.setAttribute("id",A),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{zb=!0,u()},b}function y(b,A){b.setAttribute("id",A),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function E(){const b=QO(i),A=t("text"),I=document.getElementById(A)||document.createElement("span"),V=t("learnmore"),L=document.getElementById(V)||document.createElement("a"),X=t("preprendIcon"),K=document.getElementById(X)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const $=b.element;f($),y(L,V);const ae=g();m(K,X),$.append(K,I,L,ae),document.body.appendChild($)}l?(I.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function Cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function by(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cn())}function WO(){const n=lm()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $O(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function XO(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function TC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JO(){const n=Cn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function ZO(){return mC.NODE_ADMIN===!0}function eD(){return!WO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tD(){try{return typeof indexedDB=="object"}catch{return!1}}function nD(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const iD="FirebaseError";class Es extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=iD,Object.setPrototypeOf(this,Es.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ju.prototype.create)}}class Ju{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?sD(l,i):"Error",f=`${this.serviceName}: ${u} (${a}).`;return new Es(a,f,i)}}function sD(n,e){return n.replace(rD,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const rD=/\{\$([^}]+)}/g;function Nu(n){return JSON.parse(n)}function $t(n){return JSON.stringify(n)}const SC=function(n){let e={},t={},i={},a="";try{const l=n.split(".");e=Nu(bd(l[0])||""),t=Nu(bd(l[1])||""),a=l[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:a}},aD=function(n){const e=SC(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},oD=function(n){const e=SC(n).claims;return typeof e=="object"&&e.admin===!0};function Ts(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function El(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function C_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function wd(n,e,t){const i={};for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=e.call(t,n[a],a,n));return i}function ia(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=n[a],u=e[a];if(Bb(l)&&Bb(u)){if(!ia(l,u))return!1}else if(l!==u)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function Bb(n){return n!==null&&typeof n=="object"}function co(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}class lD{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let E=0;E<16;E++)i[E]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let E=0;E<16;E++)i[E]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let E=16;E<80;E++){const b=i[E-3]^i[E-8]^i[E-14]^i[E-16];i[E]=(b<<1|b>>>31)&4294967295}let a=this.chain_[0],l=this.chain_[1],u=this.chain_[2],f=this.chain_[3],m=this.chain_[4],g,y;for(let E=0;E<80;E++){E<40?E<20?(g=f^l&(u^f),y=1518500249):(g=l^u^f,y=1859775393):E<60?(g=l&u|f&(l|u),y=2400959708):(g=l^u^f,y=3395469782);const b=(a<<5|a>>>27)+g+m+y+i[E]&4294967295;m=f,f=u,u=(l<<30|l>>>2)&4294967295,l=a,a=b}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+m&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let a=0;const l=this.buf_;let u=this.inbuf_;for(;a<t;){if(u===0)for(;a<=i;)this.compress_(e,a),a+=this.blockSize;if(typeof e=="string"){for(;a<t;)if(l[u]=e.charCodeAt(a),++u,++a,u===this.blockSize){this.compress_(l),u=0;break}}else for(;a<t;)if(l[u]=e[a],++u,++a,u===this.blockSize){this.compress_(l),u=0;break}}this.inbuf_=u,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let a=this.blockSize-1;a>=56;a--)this.buf_[a]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let a=0;a<5;a++)for(let l=24;l>=0;l-=8)e[i]=this.chain_[a]>>l&255,++i;return e}}function cD(n,e){const t=new uD(n,e);return t.subscribe.bind(t)}class uD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");hD(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=$g),a.error===void 0&&(a.error=$g),a.complete===void 0&&(a.complete=$g);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hD(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function $g(){}function hm(n,e){return`${n} failed: ${e} argument `}const fD=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);if(a>=55296&&a<=56319){const l=a-55296;i++,oe(i<n.length,"Surrogate pair missing trail surrogate.");const u=n.charCodeAt(i)-56320;a=65536+(l<<10)+u}a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):a<65536?(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},fm=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};function It(n){return n&&n._delegate?n._delegate:n}class er{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Wa="[DEFAULT]";class dD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Xu;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pD(e))try{this.getOrInitializeService({instanceIdentifier:Wa})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=Wa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wa){return this.instances.has(e)}getOptions(e=Wa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&u.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:mD(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Wa){return this.component?this.component.multipleInstances?e:Wa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mD(n){return n===Wa?void 0:n}function pD(n){return n.instantiationMode==="EAGER"}class gD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new dD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ue;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ue||(Ue={}));const _D={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},yD=Ue.INFO,vD={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},ED=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=vD[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dm{constructor(e){this.name=e,this._logLevel=yD,this._logHandler=ED,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_D[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const TD=(n,e)=>e.some(t=>n instanceof t);let Fb,Hb;function SD(){return Fb||(Fb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bD(){return Hb||(Hb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bC=new WeakMap,A_=new WeakMap,wC=new WeakMap,Xg=new WeakMap,wy=new WeakMap;function wD(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(Wr(n.result)),a()},u=()=>{i(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&bC.set(t,n)}).catch(()=>{}),wy.set(e,n),e}function CD(n){if(A_.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});A_.set(n,e)}let R_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return A_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||wC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Wr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function AD(n){R_=n(R_)}function RD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Jg(this),e,...t);return wC.set(i,e.sort?e.sort():[e]),Wr(i)}:bD().includes(n)?function(...e){return n.apply(Jg(this),e),Wr(bC.get(this))}:function(...e){return Wr(n.apply(Jg(this),e))}}function ID(n){return typeof n=="function"?RD(n):(n instanceof IDBTransaction&&CD(n),TD(n,SD())?new Proxy(n,R_):n)}function Wr(n){if(n instanceof IDBRequest)return wD(n);if(Xg.has(n))return Xg.get(n);const e=ID(n);return e!==n&&(Xg.set(n,e),wy.set(e,n)),e}const Jg=n=>wy.get(n);function ND(n,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const u=indexedDB.open(n,e),f=Wr(u);return i&&u.addEventListener("upgradeneeded",m=>{i(Wr(u.result),m.oldVersion,m.newVersion,Wr(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const xD=["get","getKey","getAll","getAllKeys","count"],OD=["put","add","delete","clear"],Zg=new Map;function qb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Zg.get(e))return Zg.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=OD.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||xD.includes(t)))return;const l=async function(u,...f){const m=this.transaction(u,a?"readwrite":"readonly");let g=m.store;return i&&(g=g.index(f.shift())),(await Promise.all([g[t](...f),a&&m.done]))[0]};return Zg.set(e,l),l}AD(n=>({...n,get:(e,t,i)=>qb(e,t)||n.get(e,t,i),has:(e,t)=>!!qb(e,t)||n.has(e,t)}));class DD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(kD(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function kD(n){return n.getComponent()?.type==="VERSION"}const I_="@firebase/app",Gb="0.14.6";const tr=new dm("@firebase/app"),PD="@firebase/app-compat",MD="@firebase/analytics-compat",LD="@firebase/analytics",jD="@firebase/app-check-compat",VD="@firebase/app-check",UD="@firebase/auth",zD="@firebase/auth-compat",BD="@firebase/database",FD="@firebase/data-connect",HD="@firebase/database-compat",qD="@firebase/functions",GD="@firebase/functions-compat",YD="@firebase/installations",KD="@firebase/installations-compat",QD="@firebase/messaging",WD="@firebase/messaging-compat",$D="@firebase/performance",XD="@firebase/performance-compat",JD="@firebase/remote-config",ZD="@firebase/remote-config-compat",ek="@firebase/storage",tk="@firebase/storage-compat",nk="@firebase/firestore",ik="@firebase/ai",sk="@firebase/firestore-compat",rk="firebase",ak="12.6.0";const N_="[DEFAULT]",ok={[I_]:"fire-core",[PD]:"fire-core-compat",[LD]:"fire-analytics",[MD]:"fire-analytics-compat",[VD]:"fire-app-check",[jD]:"fire-app-check-compat",[UD]:"fire-auth",[zD]:"fire-auth-compat",[BD]:"fire-rtdb",[FD]:"fire-data-connect",[HD]:"fire-rtdb-compat",[qD]:"fire-fn",[GD]:"fire-fn-compat",[YD]:"fire-iid",[KD]:"fire-iid-compat",[QD]:"fire-fcm",[WD]:"fire-fcm-compat",[$D]:"fire-perf",[XD]:"fire-perf-compat",[JD]:"fire-rc",[ZD]:"fire-rc-compat",[ek]:"fire-gcs",[tk]:"fire-gcs-compat",[nk]:"fire-fst",[sk]:"fire-fst-compat",[ik]:"fire-vertex","fire-js":"fire-js",[rk]:"fire-js-all"};const Cd=new Map,lk=new Map,x_=new Map;function Yb(n,e){try{n.container.addComponent(e)}catch(t){tr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function sa(n){const e=n.name;if(x_.has(e))return tr.debug(`There were multiple attempts to register component ${e}.`),!1;x_.set(e,n);for(const t of Cd.values())Yb(t,n);for(const t of lk.values())Yb(t,n);return!0}function Zu(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Xn(n){return n==null?!1:n.settings!==void 0}const ck={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$r=new Ju("app","Firebase",ck);class uk{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new er("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $r.create("app-deleted",{appName:this._name})}}const pa=ak;function CC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:N_,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw $r.create("bad-app-name",{appName:String(a)});if(t||(t=vC()),!t)throw $r.create("no-options");const l=Cd.get(a);if(l){if(ia(t,l.options)&&ia(i,l.config))return l;throw $r.create("duplicate-app",{appName:a})}const u=new gD(a);for(const m of x_.values())u.addComponent(m);const f=new uk(t,i,u);return Cd.set(a,f),f}function mm(n=N_){const e=Cd.get(n);if(!e&&n===N_&&vC())return CC();if(!e)throw $r.create("no-app",{appName:n});return e}function yi(n,e,t){let i=ok[n]??n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${i}" with version "${e}":`];a&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),tr.warn(u.join(" "));return}sa(new er(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const hk="firebase-heartbeat-database",fk=1,xu="firebase-heartbeat-store";let e_=null;function AC(){return e_||(e_=ND(hk,fk,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(xu)}catch(t){console.warn(t)}}}}).catch(n=>{throw $r.create("idb-open",{originalErrorMessage:n.message})})),e_}async function dk(n){try{const t=(await AC()).transaction(xu),i=await t.objectStore(xu).get(RC(n));return await t.done,i}catch(e){if(e instanceof Es)tr.warn(e.message);else{const t=$r.create("idb-get",{originalErrorMessage:e?.message});tr.warn(t.message)}}}async function Kb(n,e){try{const i=(await AC()).transaction(xu,"readwrite");await i.objectStore(xu).put(e,RC(n)),await i.done}catch(t){if(t instanceof Es)tr.warn(t.message);else{const i=$r.create("idb-set",{originalErrorMessage:t?.message});tr.warn(i.message)}}}function RC(n){return`${n.name}!${n.options.appId}`}const mk=1024,pk=30;class gk{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new yk(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Qb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>pk){const a=vk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){tr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Qb(),{heartbeatsToSend:t,unsentEntries:i}=_k(this._heartbeatsCache.heartbeats),a=Sd(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return tr.warn(e),""}}}function Qb(){return new Date().toISOString().substring(0,10)}function _k(n,e=mk){const t=[];let i=n.slice();for(const a of n){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),Wb(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Wb(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class yk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tD()?nD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await dk(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Kb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Kb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Wb(n){return Sd(JSON.stringify({version:2,heartbeats:n})).length}function vk(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function Ek(n){sa(new er("platform-logger",e=>new DD(e),"PRIVATE")),sa(new er("heartbeat",e=>new gk(e),"PRIVATE")),yi(I_,Gb,n),yi(I_,Gb,"esm2020"),yi("fire-js","")}Ek("");var Tk="firebase",Sk="12.6.0";yi(Tk,Sk,"app");function IC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bk=IC,NC=new Ju("auth","Firebase",IC());const Ad=new dm("@firebase/auth");function wk(n,...e){Ad.logLevel<=Ue.WARN&&Ad.warn(`Auth (${pa}): ${n}`,...e)}function ud(n,...e){Ad.logLevel<=Ue.ERROR&&Ad.error(`Auth (${pa}): ${n}`,...e)}function nr(n,...e){throw Cy(n,...e)}function Zn(n,...e){return Cy(n,...e)}function xC(n,e,t){const i={...bk(),[e]:t};return new Ju("auth","Firebase",i).create(e,{appName:n.name})}function Xr(n){return xC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cy(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return NC.create(n,...e)}function fe(n,e,...t){if(!n)throw Cy(e,...t)}function qs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ud(e),new Error(e)}function ir(n,e){n||qs(e)}function O_(){return typeof self<"u"&&self.location?.href||""}function OC(){return $b()==="http:"||$b()==="https:"}function $b(){return typeof self<"u"&&self.location?.protocol||null}function Ck(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OC()||XO()||"connection"in navigator)?navigator.onLine:!0}function Ak(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class eh{constructor(e,t){this.shortDelay=e,this.longDelay=t,ir(t>e,"Short delay should be less than long delay!"),this.isMobile=by()||TC()}get(){return Ck()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ay(n,e){ir(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class DC{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Rk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Ik=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Nk=new eh(3e4,6e4);function Ss(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function zi(n,e,t,i,a={}){return kC(n,a,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const f=co({key:n.config.apiKey,...u}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:m,...l};return $O()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&vs(n.emulatorConfig.host)&&(g.credentials="include"),DC.fetch()(await PC(n,n.config.apiHost,t,f),g)})}async function kC(n,e,t){n._canInitEmulator=!1;const i={...Rk,...e};try{const a=new Ok(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw ou(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const f=l.ok?u.errorMessage:u.error.message,[m,g]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw ou(n,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw ou(n,"email-already-in-use",u);if(m==="USER_DISABLED")throw ou(n,"user-disabled",u);const y=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw xC(n,y,g);nr(n,y)}}catch(a){if(a instanceof Es)throw a;nr(n,"network-request-failed",{message:String(a)})}}async function pm(n,e,t,i,a={}){const l=await zi(n,e,t,i,a);return"mfaPendingCredential"in l&&nr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function PC(n,e,t,i){const a=`${e}${t}?${i}`,l=n,u=l.config.emulator?Ay(n.config,a):`${n.config.apiScheme}://${a}`;return Ik.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function xk(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ok{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Zn(this.auth,"network-request-failed")),Nk.get())})}}function ou(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=Zn(n,e,i);return a.customData._tokenResponse=t,a}function Xb(n){return n!==void 0&&n.getResponse!==void 0}function Jb(n){return n!==void 0&&n.enterprise!==void 0}class MC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return xk(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Dk(n){return(await zi(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function LC(n,e){return zi(n,"GET","/v2/recaptchaConfig",Ss(n,e))}async function kk(n,e){return zi(n,"POST","/v1/accounts:delete",e)}async function Rd(n,e){return zi(n,"POST","/v1/accounts:lookup",e)}function du(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Pk(n,e=!1){const t=It(n),i=await t.getIdToken(e),a=Ry(i);fe(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l?.sign_in_provider;return{claims:a,token:i,authTime:du(t_(a.auth_time)),issuedAtTime:du(t_(a.iat)),expirationTime:du(t_(a.exp)),signInProvider:u||null,signInSecondFactor:l?.sign_in_second_factor||null}}function t_(n){return Number(n)*1e3}function Ry(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return ud("JWT malformed, contained fewer than 3 sections"),null;try{const a=bd(t);return a?JSON.parse(a):(ud("Failed to decode base64 JWT payload"),null)}catch(a){return ud("Caught error parsing JWT payload as JSON",a?.toString()),null}}function Zb(n){const e=Ry(n);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ou(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Es&&Mk(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function Mk({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class Lk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class D_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=du(this.lastLoginAt),this.creationTime=du(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Id(n){const e=n.auth,t=await n.getIdToken(),i=await Ou(n,Rd(e,{idToken:t}));fe(i?.users.length,e,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const l=a.providerUserInfo?.length?jC(a.providerUserInfo):[],u=Vk(n.providerData,l),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!u?.length,g=f?m:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new D_(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(n,y)}async function jk(n){const e=It(n);await Id(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Vk(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function jC(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function Uk(n,e){const t=await kC(n,{},async()=>{const i=co({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,u=await PC(n,a,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:i};return n.emulatorConfig&&vs(n.emulatorConfig.host)&&(m.credentials="include"),DC.fetch()(u,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function zk(n,e){return zi(n,"POST","/v2/accounts:revokeToken",Ss(n,e))}class ml{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Zb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){fe(e.length!==0,"internal-error");const t=Zb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await Uk(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,u=new ml;return i&&(fe(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),a&&(fe(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(fe(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ml,this.toJSON())}_performRefresh(){return qs("not implemented")}}function Br(n,e){fe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Mi{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new Lk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new D_(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Ou(this,this.stsTokenManager.getToken(this.auth,e));return fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Pk(this,e)}reload(){return jk(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Mi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Id(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xn(this.auth.app))return Promise.reject(Xr(this.auth));const e=await this.getIdToken();return await Ou(this,kk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,f=t.tenantId??void 0,m=t._redirectEventId??void 0,g=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:E,emailVerified:b,isAnonymous:A,providerData:I,stsTokenManager:V}=t;fe(E&&V,e,"internal-error");const L=ml.fromJSON(this.name,V);fe(typeof E=="string",e,"internal-error"),Br(i,e.name),Br(a,e.name),fe(typeof b=="boolean",e,"internal-error"),fe(typeof A=="boolean",e,"internal-error"),Br(l,e.name),Br(u,e.name),Br(f,e.name),Br(m,e.name),Br(g,e.name),Br(y,e.name);const X=new Mi({uid:E,auth:e,email:a,emailVerified:b,displayName:i,isAnonymous:A,photoURL:u,phoneNumber:l,tenantId:f,stsTokenManager:L,createdAt:g,lastLoginAt:y});return I&&Array.isArray(I)&&(X.providerData=I.map(K=>({...K}))),m&&(X._redirectEventId=m),X}static async _fromIdTokenResponse(e,t,i=!1){const a=new ml;a.updateFromServerResponse(t);const l=new Mi({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await Id(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];fe(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?jC(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!l?.length,f=new ml;f.updateFromIdToken(i);const m=new Mi({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:u}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new D_(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(m,g),m}}const ew=new Map;function Gs(n){ir(n instanceof Function,"Expected a class definition");let e=ew.get(n);return e?(ir(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ew.set(n,e),e)}class VC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}VC.type="NONE";const tw=VC;function hd(n,e,t){return`firebase:${n}:${e}:${t}`}class pl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=hd(this.userKey,a.apiKey,l),this.fullPersistenceKey=hd("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Rd(this.auth,{idToken:e}).catch(()=>{});return t?Mi._fromGetAccountInfoResponse(this.auth,t,e):null}return Mi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new pl(Gs(tw),e,i);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||Gs(tw);const u=hd(i,e.config.apiKey,e.name);let f=null;for(const g of t)try{const y=await g._get(u);if(y){let E;if(typeof y=="string"){const b=await Rd(e,{idToken:y}).catch(()=>{});if(!b)break;E=await Mi._fromGetAccountInfoResponse(e,b,y)}else E=Mi._fromJSON(e,y);g!==l&&(f=E),l=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new pl(l,e,i):(l=m[0],f&&await l._set(u,f.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(u)}catch{}})),new pl(l,e,i))}}function nw(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(UC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qC(e))return"Blackberry";if(GC(e))return"Webos";if(zC(e))return"Safari";if((e.includes("chrome/")||BC(e))&&!e.includes("edge/"))return"Chrome";if(HC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function UC(n=Cn()){return/firefox\//i.test(n)}function zC(n=Cn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BC(n=Cn()){return/crios\//i.test(n)}function FC(n=Cn()){return/iemobile/i.test(n)}function HC(n=Cn()){return/android/i.test(n)}function qC(n=Cn()){return/blackberry/i.test(n)}function GC(n=Cn()){return/webos/i.test(n)}function Iy(n=Cn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Bk(n=Cn()){return Iy(n)&&!!window.navigator?.standalone}function Fk(){return JO()&&document.documentMode===10}function YC(n=Cn()){return Iy(n)||HC(n)||GC(n)||qC(n)||/windows phone/i.test(n)||FC(n)}function KC(n,e=[]){let t;switch(n){case"Browser":t=nw(Cn());break;case"Worker":t=`${nw(Cn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${pa}/${i}`}class Hk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((u,f)=>{try{const m=e(l);u(m)}catch(m){f(m)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function qk(n,e={}){return zi(n,"GET","/v2/passwordPolicy",Ss(n,e))}const Gk=6;class Yk{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Gk,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class Kk{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iw(this),this.idTokenSubscription=new iw(this),this.beforeStateQueue=new Hk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=NC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Gs(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await pl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Rd(this,{idToken:e}),i=await Mi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Xn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,u=i?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===u)&&f?.user&&(i=f.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Id(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ak()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xn(this.app))return Promise.reject(Xr(this));const t=e?It(e):null;return t&&fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xn(this.app)?Promise.reject(Xr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xn(this.app)?Promise.reject(Xr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qk(this),t=new Yk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ju("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await zk(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Gs(e)||this._popupRedirectResolver;fe(t,this,"argument-error"),this.redirectPersistenceManager=await pl.create(this,[Gs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(f,this,"internal-error"),f.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,a);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&wk(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ga(n){return It(n)}class iw{constructor(e){this.auth=e,this.observer=null,this.addObserver=cD(t=>this.observer=t)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let th={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Qk(n){th=n}function Ny(n){return th.loadJS(n)}function Wk(){return th.recaptchaV2Script}function $k(){return th.recaptchaEnterpriseScript}function Xk(){return th.gapiScript}function QC(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const Jk=500,Zk=6e4,Jf=1e12;class eP{constructor(e){this.auth=e,this.counter=Jf,this._widgets=new Map}render(e,t){const i=this.counter;return this._widgets.set(i,new iP(e,this.auth.name,t||{})),this.counter++,i}reset(e){const t=e||Jf;this._widgets.get(t)?.delete(),this._widgets.delete(t)}getResponse(e){const t=e||Jf;return this._widgets.get(t)?.getResponse()||""}async execute(e){const t=e||Jf;return this._widgets.get(t)?.execute(),""}}class tP{constructor(){this.enterprise=new nP}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class nP{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class iP{constructor(e,t,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const a=typeof e=="string"?document.getElementById(e):e;fe(a,"argument-error",{appName:t}),this.container=a,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=sP(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},Zk)},Jk))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function sP(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<n;i++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const rP="recaptcha-enterprise",mu="NO_RECAPTCHA";class WC{constructor(e){this.type=rP,this.auth=ga(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,f)=>{LC(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const g=new MC(m);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,u(g.siteKey)}}).catch(m=>{f(m)})})}function a(l,u,f){const m=window.grecaptcha;Jb(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(g=>{u(g)}).catch(()=>{u(mu)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new tP().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{i(this.auth).then(f=>{if(!t&&Jb(window.grecaptcha))a(f,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let m=$k();m.length!==0&&(m+=f),Ny(m).then(()=>{a(f,l,u)}).catch(g=>{u(g)})}}).catch(f=>{u(f)})})}}async function n_(n,e,t,i=!1,a=!1){const l=new WC(n);let u;if(a)u=mu;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,g=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function i_(n,e,t,i,a){if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const l=await n_(n,e,t);return i(n,l).catch(async u=>{if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const f=await n_(n,e,t,!1,!0);return i(n,f)}return Promise.reject(u)})}else{const l=await n_(n,e,t,!1,!0);return i(n,l)}}async function aP(n){const e=ga(n),t=await LC(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new MC(t);e.tenantId==null?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,i.isAnyProviderEnabled()&&new WC(e).verify()}function oP(n,e){const t=Zu(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(ia(l,e??{}))return a;nr(a,"already-initialized")}return t.initialize({options:e})}function lP(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Gs);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function cP(n,e,t){const i=ga(n);fe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=$C(e),{host:u,port:f}=uP(e),m=f===null?"":`:${f}`,g={url:`${l}//${u}${m}/`},y=Object.freeze({host:u,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){fe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),fe(ia(g,i.config.emulator)&&ia(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,vs(u)?(cm(`${l}//${u}${m}`),um("Auth",!0)):hP()}function $C(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function uP(n){const e=$C(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:sw(i.substr(l.length+1))}}else{const[l,u]=i.split(":");return{host:l,port:sw(u)}}}function sw(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function hP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class xy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return qs("not implemented")}_getIdTokenResponse(e){return qs("not implemented")}_linkToIdToken(e,t){return qs("not implemented")}_getReauthenticationResolver(e){return qs("not implemented")}}async function gl(n,e){return pm(n,"POST","/v1/accounts:signInWithIdp",Ss(n,e))}const fP="http://localhost";class to extends xy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new to(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):nr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const u=new to(i,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return gl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,gl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,gl(e,t)}buildRequest(){const e={requestUri:fP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=co(t)}return e}}async function rw(n,e){return zi(n,"POST","/v1/accounts:sendVerificationCode",Ss(n,e))}async function dP(n,e){return pm(n,"POST","/v1/accounts:signInWithPhoneNumber",Ss(n,e))}async function mP(n,e){const t=await pm(n,"POST","/v1/accounts:signInWithPhoneNumber",Ss(n,e));if(t.temporaryProof)throw ou(n,"account-exists-with-different-credential",t);return t}const pP={USER_NOT_FOUND:"user-not-found"};async function gP(n,e){const t={...e,operation:"REAUTH"};return pm(n,"POST","/v1/accounts:signInWithPhoneNumber",Ss(n,t),pP)}class pu extends xy{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new pu({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new pu({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return dP(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return mP(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return gP(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:i,verificationCode:a}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:i,code:a}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:i,phoneNumber:a,temporaryProof:l}=e;return!i&&!t&&!a&&!l?null:new pu({verificationId:t,verificationCode:i,phoneNumber:a,temporaryProof:l})}}class XC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class nh extends XC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Fr extends nh{constructor(){super("facebook.com")}static credential(e){return to._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fr.credential(e.oauthAccessToken)}catch{return null}}}Fr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fr.PROVIDER_ID="facebook.com";class Hr extends nh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return to._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Hr.credential(t,i)}catch{return null}}}Hr.GOOGLE_SIGN_IN_METHOD="google.com";Hr.PROVIDER_ID="google.com";class qr extends nh{constructor(){super("github.com")}static credential(e){return to._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qr.credential(e.oauthAccessToken)}catch{return null}}}qr.GITHUB_SIGN_IN_METHOD="github.com";qr.PROVIDER_ID="github.com";class Gr extends nh{constructor(){super("twitter.com")}static credential(e,t){return to._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Gr.credential(t,i)}catch{return null}}}Gr.TWITTER_SIGN_IN_METHOD="twitter.com";Gr.PROVIDER_ID="twitter.com";class Tl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await Mi._fromIdTokenResponse(e,i,a),u=aw(i);return new Tl({user:l,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=aw(i);return new Tl({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function aw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Nd extends Es{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Nd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new Nd(e,t,i,a)}}function JC(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Nd._fromErrorAndOperation(n,l,e,i):l})}async function _P(n,e,t=!1){const i=await Ou(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Tl._forOperation(n,"link",i)}async function yP(n,e,t=!1){const{auth:i}=n;if(Xn(i.app))return Promise.reject(Xr(i));const a="reauthenticate";try{const l=await Ou(n,JC(i,a,e,n),t);fe(l.idToken,i,"internal-error");const u=Ry(l.idToken);fe(u,i,"internal-error");const{sub:f}=u;return fe(n.uid===f,i,"user-mismatch"),Tl._forOperation(n,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&nr(i,"user-mismatch"),l}}async function ZC(n,e,t=!1){if(Xn(n.app))return Promise.reject(Xr(n));const i="signIn",a=await JC(n,i,e),l=await Tl._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(l.user),l}async function vP(n,e){return ZC(ga(n),e)}function EP(n,e,t,i){return It(n).onIdTokenChanged(e,t,i)}function TP(n,e,t){return It(n).beforeAuthStateChanged(e,t)}function ow(n,e){return zi(n,"POST","/v2/accounts/mfaEnrollment:start",Ss(n,e))}const xd="__sak";class eA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xd,"1"),this.storage.removeItem(xd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const SP=1e3,bP=10;class tA extends eA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,m)=>{this.notifyListeners(u,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},l=this.storage.getItem(i);Fk()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,bP):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},SP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}tA.type="LOCAL";const wP=tA;class nA extends eA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}nA.type="SESSION";const iA=nA;function CP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class gm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new gm(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const f=Array.from(u).map(async g=>g(t.origin,l)),m=await CP(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gm.receivers=[];function Oy(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}class AP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((f,m)=>{const g=Oy("",20);a.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},i);u={messageChannel:a,onMessage(E){const b=E;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(b.data.response);break;default:clearTimeout(y),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function qt(){return window}function RP(n){qt().location.href=n}function Dy(){return typeof qt().WorkerGlobalScope<"u"&&typeof qt().importScripts=="function"}async function IP(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function NP(){return navigator?.serviceWorker?.controller||null}function xP(){return Dy()?self:null}const sA="firebaseLocalStorageDb",OP=1,Od="firebaseLocalStorage",rA="fbase_key";class ih{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function _m(n,e){return n.transaction([Od],e?"readwrite":"readonly").objectStore(Od)}function DP(){const n=indexedDB.deleteDatabase(sA);return new ih(n).toPromise()}function k_(){const n=indexedDB.open(sA,OP);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Od,{keyPath:rA})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Od)?e(i):(i.close(),await DP(),e(await k_()))})})}async function lw(n,e,t){const i=_m(n,!0).put({[rA]:e,value:t});return new ih(i).toPromise()}async function kP(n,e){const t=_m(n,!1).get(e),i=await new ih(t).toPromise();return i===void 0?null:i.value}function cw(n,e){const t=_m(n,!0).delete(e);return new ih(t).toPromise()}const PP=800,MP=3;class aA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await k_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>MP)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Dy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gm._getInstance(xP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await IP(),!this.activeServiceWorker)return;this.sender=new AP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||NP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await k_();return await lw(e,xd,"1"),await cw(e,xd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>lw(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>kP(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>cw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=_m(a,!1).getAll();return new ih(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),PP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}aA.type="LOCAL";const LP=aA;function uw(n,e){return zi(n,"POST","/v2/accounts/mfaSignIn:start",Ss(n,e))}const s_=QC("rcb"),jP=new eh(3e4,6e4);class VP{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!qt().grecaptcha?.render}load(e,t=""){return fe(UP(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Xb(qt().grecaptcha)?Promise.resolve(qt().grecaptcha):new Promise((i,a)=>{const l=qt().setTimeout(()=>{a(Zn(e,"network-request-failed"))},jP.get());qt()[s_]=()=>{qt().clearTimeout(l),delete qt()[s_];const f=qt().grecaptcha;if(!f||!Xb(f)){a(Zn(e,"internal-error"));return}const m=f.render;f.render=(g,y)=>{const E=m(g,y);return this.counter++,E},this.hostLanguage=t,i(f)};const u=`${Wk()}?${co({onload:s_,render:"explicit",hl:t})}`;Ny(u).catch(()=>{clearTimeout(l),a(Zn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!qt().grecaptcha?.render&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function UP(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class zP{async load(e){return new eP(e)}clearedOneInstance(){}}const gu="recaptcha",BP={theme:"light",type:"image"};class ky{constructor(e,t,i={...BP}){this.parameters=i,this.type=gu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ga(e),this.isInvisible=this.parameters.size==="invisible",fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const a=typeof t=="string"?document.getElementById(t):t;fe(a,this.auth,"argument-error"),this.container=a,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new zP:new VP,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),i=t.getResponse(e);return i||new Promise(a=>{const l=u=>{u&&(this.tokenChangeListeners.delete(l),a(u))};this.tokenChangeListeners.add(l),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){fe(!this.parameters.sitekey,this.auth,"argument-error"),fe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(i=>i(t)),typeof e=="function")e(t);else if(typeof e=="string"){const i=qt()[e];typeof i=="function"&&i(t)}}}assertNotDestroyed(){fe(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){fe(OC()&&!Dy(),this.auth,"internal-error"),await FP(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await Dk(this.auth);fe(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return fe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function FP(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}class HP{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=pu._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Py(n,e,t){if(Xn(n.app))return Promise.reject(Xr(n));const i=ga(n),a=await qP(i,e,It(t));return new HP(a,l=>vP(i,l))}async function qP(n,e,t){if(!n._getRecaptchaConfig())try{await aP(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const a=i.session;if("phoneNumber"in i){fe(a.type==="enroll",n,"internal-error");const l={idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await i_(n,l,"mfaSmsEnrollment",async(g,y)=>{if(y.phoneEnrollmentInfo.captchaResponse===mu){fe(t?.type===gu,g,"argument-error");const E=await r_(g,y,t);return ow(g,E)}return ow(g,y)},"PHONE_PROVIDER").catch(g=>Promise.reject(g))).phoneSessionInfo.sessionInfo}else{fe(a.type==="signin",n,"internal-error");const l=i.multiFactorHint?.uid||i.multiFactorUid;fe(l,n,"missing-multi-factor-info");const u={mfaPendingCredential:a.credential,mfaEnrollmentId:l,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await i_(n,u,"mfaSmsSignIn",async(y,E)=>{if(E.phoneSignInInfo.captchaResponse===mu){fe(t?.type===gu,y,"argument-error");const b=await r_(y,E,t);return uw(y,b)}return uw(y,E)},"PHONE_PROVIDER").catch(y=>Promise.reject(y))).phoneResponseInfo.sessionInfo}}else{const a={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await i_(n,a,"sendVerificationCode",async(m,g)=>{if(g.captchaResponse===mu){fe(t?.type===gu,m,"argument-error");const y=await r_(m,g,t);return rw(m,y)}return rw(m,g)},"PHONE_PROVIDER").catch(m=>Promise.reject(m))).sessionInfo}}finally{t?._reset()}}async function r_(n,e,t){fe(t.type===gu,n,"argument-error");const i=await t.verify();fe(typeof i=="string",n,"argument-error");const a={...e};if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.captchaResponse,f=a.phoneEnrollmentInfo.clientType,m=a.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:i,captchaResponse:u,clientType:f,recaptchaVersion:m}}),a}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.captchaResponse,u=a.phoneSignInInfo.clientType,f=a.phoneSignInInfo.recaptchaVersion;return Object.assign(a,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:l,clientType:u,recaptchaVersion:f}}),a}else return Object.assign(a,{recaptchaToken:i}),a}function GP(n,e){return e?Gs(e):(fe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class My extends xy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return gl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return gl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function YP(n){return ZC(n.auth,new My(n),n.bypassAuthState)}function KP(n){const{auth:e,user:t}=n;return fe(t,e,"internal-error"),yP(t,new My(n),n.bypassAuthState)}async function QP(n){const{auth:e,user:t}=n;return fe(t,e,"internal-error"),_P(t,new My(n),n.bypassAuthState)}class oA{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:u,type:f}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return YP;case"linkViaPopup":case"linkViaRedirect":return QP;case"reauthViaPopup":case"reauthViaRedirect":return KP;default:nr(this.auth,"internal-error")}}resolve(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const WP=new eh(2e3,1e4);class fl extends oA{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,fl.currentPopupAction&&fl.currentPopupAction.cancel(),fl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return fe(e,this.auth,"internal-error"),e}async onExecution(){ir(this.filter.length===1,"Popup operations only handle one event");const e=Oy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WP.get())};e()}}fl.currentPopupAction=null;const $P="pendingRedirect",fd=new Map;class XP extends oA{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=fd.get(this.auth._key());if(!e){try{const i=await JP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}fd.set(this.auth._key(),e)}return this.bypassAuthState||fd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function JP(n,e){const t=tM(e),i=eM(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function ZP(n,e){fd.set(n._key(),e)}function eM(n){return Gs(n._redirectPersistence)}function tM(n){return hd($P,n.config.apiKey,n.name)}async function nM(n,e,t=!1){if(Xn(n.app))return Promise.reject(Xr(n));const i=ga(n),a=GP(i,e),u=await new XP(i,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}const iM=600*1e3;class sM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!lA(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Zn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iM&&this.cachedEventUids.clear(),this.cachedEventUids.has(hw(e))}saveEventToCache(e){this.cachedEventUids.add(hw(e)),this.lastProcessedEventTime=Date.now()}}function hw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function lA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function rM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lA(n);default:return!1}}async function aM(n,e={}){return zi(n,"GET","/v1/projects",e)}const oM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lM=/^https?/;async function cM(n){if(n.config.emulator)return;const{authorizedDomains:e}=await aM(n);for(const t of e)try{if(uM(t))return}catch{}nr(n,"unauthorized-domain")}function uM(n){const e=O_(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!lM.test(t))return!1;if(oM.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}const hM=new eh(3e4,6e4);function fw(){const n=qt().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function fM(n){return new Promise((e,t)=>{function i(){fw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fw(),t(Zn(n,"network-request-failed"))},timeout:hM.get()})}if(qt().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(qt().gapi?.load)i();else{const a=QC("iframefcb");return qt()[a]=()=>{gapi.load?i():t(Zn(n,"network-request-failed"))},Ny(`${Xk()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw dd=null,e})}let dd=null;function dM(n){return dd=dd||fM(n),dd}const mM=new eh(5e3,15e3),pM="__/auth/iframe",gM="emulator/auth/iframe",_M={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vM(n){const e=n.config;fe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Ay(e,gM):`https://${n.config.authDomain}/${pM}`,i={apiKey:e.apiKey,appName:n.name,v:pa},a=yM.get(n.config.apiHost);a&&(i.eid=a);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${co(i).slice(1)}`}async function EM(n){const e=await dM(n),t=qt().gapi;return fe(t,n,"internal-error"),e.open({where:document.body,url:vM(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_M,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const u=Zn(n,"network-request-failed"),f=qt().setTimeout(()=>{l(u)},mM.get());function m(){qt().clearTimeout(f),a(i)}i.ping(m).then(m,()=>{l(u)})}))}const TM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},SM=500,bM=600,wM="_blank",CM="http://localhost";class dw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function AM(n,e,t,i=SM,a=bM){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const m={...TM,width:i.toString(),height:a.toString(),top:l,left:u},g=Cn().toLowerCase();t&&(f=BC(g)?wM:t),UC(g)&&(e=e||CM,m.scrollbars="yes");const y=Object.entries(m).reduce((b,[A,I])=>`${b}${A}=${I},`,"");if(Bk(g)&&f!=="_self")return RM(e||"",f),new dw(null);const E=window.open(e||"",f,y);fe(E,n,"popup-blocked");try{E.focus()}catch{}return new dw(E)}function RM(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const IM="__/auth/handler",NM="emulator/auth/handler",xM=encodeURIComponent("fac");async function mw(n,e,t,i,a,l){fe(n.config.authDomain,n,"auth-domain-config-required"),fe(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:pa,eventId:a};if(e instanceof XC){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",C_(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,E]of Object.entries({}))u[y]=E}if(e instanceof nh){const y=e.getScopes().filter(E=>E!=="");y.length>0&&(u.scopes=y.join(","))}n.tenantId&&(u.tid=n.tenantId);const f=u;for(const y of Object.keys(f))f[y]===void 0&&delete f[y];const m=await n._getAppCheckToken(),g=m?`#${xM}=${encodeURIComponent(m)}`:"";return`${OM(n)}?${co(f).slice(1)}${g}`}function OM({config:n}){return n.emulator?Ay(n,NM):`https://${n.authDomain}/${IM}`}const a_="webStorageSupport";class DM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iA,this._completeRedirectFn=nM,this._overrideRedirectResult=ZP}async _openPopup(e,t,i,a){ir(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await mw(e,t,i,O_(),a);return AM(e,l,Oy())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await mw(e,t,i,O_(),a);return RP(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(ir(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await EM(e),i=new sM(e);return t.register("authEvent",a=>(fe(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(a_,{type:a_},a=>{const l=a?.[0]?.[a_];l!==void 0&&t(!!l),nr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=cM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return YC()||zC()||Iy()}}const kM=DM;var pw="@firebase/auth",gw="1.11.1";class PM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function MM(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LM(n){sa(new er("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=i.options;fe(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:u,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KC(n)},g=new Kk(i,a,l,m);return lP(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),sa(new er("auth-internal",e=>{const t=ga(e.getProvider("auth").getImmediate());return(i=>new PM(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),yi(pw,gw,MM(n)),yi(pw,gw,"esm2020")}const jM=300,VM=EC("authIdTokenMaxAge")||jM;let _w=null;const UM=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>VM)return;const a=t?.token;_w!==a&&(_w=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function zM(n=mm()){const e=Zu(n,"auth");if(e.isInitialized())return e.getImmediate();const t=oP(n,{popupRedirectResolver:kM,persistence:[LP,wP,iA]}),i=EC("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const u=UM(l.toString());TP(t,u,()=>u(t.currentUser)),EP(t,f=>u(f))}}const a=yC("auth");return a&&cP(t,`http://${a}`),t}function BM(){return document.getElementsByTagName("head")?.[0]??document}Qk({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const l=Zn("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",BM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LM("Browser");var yw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Jr,cA;(function(){var n;function e(O,R){function N(){}N.prototype=R.prototype,O.F=R.prototype,O.prototype=new N,O.prototype.constructor=O,O.D=function(U,P,B){for(var D=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)D[Ze-2]=arguments[Ze];return R.prototype[P].apply(U,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(O,R,N){N||(N=0);const U=Array(16);if(typeof R=="string")for(var P=0;P<16;++P)U[P]=R.charCodeAt(N++)|R.charCodeAt(N++)<<8|R.charCodeAt(N++)<<16|R.charCodeAt(N++)<<24;else for(P=0;P<16;++P)U[P]=R[N++]|R[N++]<<8|R[N++]<<16|R[N++]<<24;R=O.g[0],N=O.g[1],P=O.g[2];let B=O.g[3],D;D=R+(B^N&(P^B))+U[0]+3614090360&4294967295,R=N+(D<<7&4294967295|D>>>25),D=B+(P^R&(N^P))+U[1]+3905402710&4294967295,B=R+(D<<12&4294967295|D>>>20),D=P+(N^B&(R^N))+U[2]+606105819&4294967295,P=B+(D<<17&4294967295|D>>>15),D=N+(R^P&(B^R))+U[3]+3250441966&4294967295,N=P+(D<<22&4294967295|D>>>10),D=R+(B^N&(P^B))+U[4]+4118548399&4294967295,R=N+(D<<7&4294967295|D>>>25),D=B+(P^R&(N^P))+U[5]+1200080426&4294967295,B=R+(D<<12&4294967295|D>>>20),D=P+(N^B&(R^N))+U[6]+2821735955&4294967295,P=B+(D<<17&4294967295|D>>>15),D=N+(R^P&(B^R))+U[7]+4249261313&4294967295,N=P+(D<<22&4294967295|D>>>10),D=R+(B^N&(P^B))+U[8]+1770035416&4294967295,R=N+(D<<7&4294967295|D>>>25),D=B+(P^R&(N^P))+U[9]+2336552879&4294967295,B=R+(D<<12&4294967295|D>>>20),D=P+(N^B&(R^N))+U[10]+4294925233&4294967295,P=B+(D<<17&4294967295|D>>>15),D=N+(R^P&(B^R))+U[11]+2304563134&4294967295,N=P+(D<<22&4294967295|D>>>10),D=R+(B^N&(P^B))+U[12]+1804603682&4294967295,R=N+(D<<7&4294967295|D>>>25),D=B+(P^R&(N^P))+U[13]+4254626195&4294967295,B=R+(D<<12&4294967295|D>>>20),D=P+(N^B&(R^N))+U[14]+2792965006&4294967295,P=B+(D<<17&4294967295|D>>>15),D=N+(R^P&(B^R))+U[15]+1236535329&4294967295,N=P+(D<<22&4294967295|D>>>10),D=R+(P^B&(N^P))+U[1]+4129170786&4294967295,R=N+(D<<5&4294967295|D>>>27),D=B+(N^P&(R^N))+U[6]+3225465664&4294967295,B=R+(D<<9&4294967295|D>>>23),D=P+(R^N&(B^R))+U[11]+643717713&4294967295,P=B+(D<<14&4294967295|D>>>18),D=N+(B^R&(P^B))+U[0]+3921069994&4294967295,N=P+(D<<20&4294967295|D>>>12),D=R+(P^B&(N^P))+U[5]+3593408605&4294967295,R=N+(D<<5&4294967295|D>>>27),D=B+(N^P&(R^N))+U[10]+38016083&4294967295,B=R+(D<<9&4294967295|D>>>23),D=P+(R^N&(B^R))+U[15]+3634488961&4294967295,P=B+(D<<14&4294967295|D>>>18),D=N+(B^R&(P^B))+U[4]+3889429448&4294967295,N=P+(D<<20&4294967295|D>>>12),D=R+(P^B&(N^P))+U[9]+568446438&4294967295,R=N+(D<<5&4294967295|D>>>27),D=B+(N^P&(R^N))+U[14]+3275163606&4294967295,B=R+(D<<9&4294967295|D>>>23),D=P+(R^N&(B^R))+U[3]+4107603335&4294967295,P=B+(D<<14&4294967295|D>>>18),D=N+(B^R&(P^B))+U[8]+1163531501&4294967295,N=P+(D<<20&4294967295|D>>>12),D=R+(P^B&(N^P))+U[13]+2850285829&4294967295,R=N+(D<<5&4294967295|D>>>27),D=B+(N^P&(R^N))+U[2]+4243563512&4294967295,B=R+(D<<9&4294967295|D>>>23),D=P+(R^N&(B^R))+U[7]+1735328473&4294967295,P=B+(D<<14&4294967295|D>>>18),D=N+(B^R&(P^B))+U[12]+2368359562&4294967295,N=P+(D<<20&4294967295|D>>>12),D=R+(N^P^B)+U[5]+4294588738&4294967295,R=N+(D<<4&4294967295|D>>>28),D=B+(R^N^P)+U[8]+2272392833&4294967295,B=R+(D<<11&4294967295|D>>>21),D=P+(B^R^N)+U[11]+1839030562&4294967295,P=B+(D<<16&4294967295|D>>>16),D=N+(P^B^R)+U[14]+4259657740&4294967295,N=P+(D<<23&4294967295|D>>>9),D=R+(N^P^B)+U[1]+2763975236&4294967295,R=N+(D<<4&4294967295|D>>>28),D=B+(R^N^P)+U[4]+1272893353&4294967295,B=R+(D<<11&4294967295|D>>>21),D=P+(B^R^N)+U[7]+4139469664&4294967295,P=B+(D<<16&4294967295|D>>>16),D=N+(P^B^R)+U[10]+3200236656&4294967295,N=P+(D<<23&4294967295|D>>>9),D=R+(N^P^B)+U[13]+681279174&4294967295,R=N+(D<<4&4294967295|D>>>28),D=B+(R^N^P)+U[0]+3936430074&4294967295,B=R+(D<<11&4294967295|D>>>21),D=P+(B^R^N)+U[3]+3572445317&4294967295,P=B+(D<<16&4294967295|D>>>16),D=N+(P^B^R)+U[6]+76029189&4294967295,N=P+(D<<23&4294967295|D>>>9),D=R+(N^P^B)+U[9]+3654602809&4294967295,R=N+(D<<4&4294967295|D>>>28),D=B+(R^N^P)+U[12]+3873151461&4294967295,B=R+(D<<11&4294967295|D>>>21),D=P+(B^R^N)+U[15]+530742520&4294967295,P=B+(D<<16&4294967295|D>>>16),D=N+(P^B^R)+U[2]+3299628645&4294967295,N=P+(D<<23&4294967295|D>>>9),D=R+(P^(N|~B))+U[0]+4096336452&4294967295,R=N+(D<<6&4294967295|D>>>26),D=B+(N^(R|~P))+U[7]+1126891415&4294967295,B=R+(D<<10&4294967295|D>>>22),D=P+(R^(B|~N))+U[14]+2878612391&4294967295,P=B+(D<<15&4294967295|D>>>17),D=N+(B^(P|~R))+U[5]+4237533241&4294967295,N=P+(D<<21&4294967295|D>>>11),D=R+(P^(N|~B))+U[12]+1700485571&4294967295,R=N+(D<<6&4294967295|D>>>26),D=B+(N^(R|~P))+U[3]+2399980690&4294967295,B=R+(D<<10&4294967295|D>>>22),D=P+(R^(B|~N))+U[10]+4293915773&4294967295,P=B+(D<<15&4294967295|D>>>17),D=N+(B^(P|~R))+U[1]+2240044497&4294967295,N=P+(D<<21&4294967295|D>>>11),D=R+(P^(N|~B))+U[8]+1873313359&4294967295,R=N+(D<<6&4294967295|D>>>26),D=B+(N^(R|~P))+U[15]+4264355552&4294967295,B=R+(D<<10&4294967295|D>>>22),D=P+(R^(B|~N))+U[6]+2734768916&4294967295,P=B+(D<<15&4294967295|D>>>17),D=N+(B^(P|~R))+U[13]+1309151649&4294967295,N=P+(D<<21&4294967295|D>>>11),D=R+(P^(N|~B))+U[4]+4149444226&4294967295,R=N+(D<<6&4294967295|D>>>26),D=B+(N^(R|~P))+U[11]+3174756917&4294967295,B=R+(D<<10&4294967295|D>>>22),D=P+(R^(B|~N))+U[2]+718787259&4294967295,P=B+(D<<15&4294967295|D>>>17),D=N+(B^(P|~R))+U[9]+3951481745&4294967295,O.g[0]=O.g[0]+R&4294967295,O.g[1]=O.g[1]+(P+(D<<21&4294967295|D>>>11))&4294967295,O.g[2]=O.g[2]+P&4294967295,O.g[3]=O.g[3]+B&4294967295}i.prototype.v=function(O,R){R===void 0&&(R=O.length);const N=R-this.blockSize,U=this.C;let P=this.h,B=0;for(;B<R;){if(P==0)for(;B<=N;)a(this,O,B),B+=this.blockSize;if(typeof O=="string"){for(;B<R;)if(U[P++]=O.charCodeAt(B++),P==this.blockSize){a(this,U),P=0;break}}else for(;B<R;)if(U[P++]=O[B++],P==this.blockSize){a(this,U),P=0;break}}this.h=P,this.o+=R},i.prototype.A=function(){var O=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);O[0]=128;for(var R=1;R<O.length-8;++R)O[R]=0;R=this.o*8;for(var N=O.length-8;N<O.length;++N)O[N]=R&255,R/=256;for(this.v(O),O=Array(16),R=0,N=0;N<4;++N)for(let U=0;U<32;U+=8)O[R++]=this.g[N]>>>U&255;return O};function l(O,R){var N=f;return Object.prototype.hasOwnProperty.call(N,O)?N[O]:N[O]=R(O)}function u(O,R){this.h=R;const N=[];let U=!0;for(let P=O.length-1;P>=0;P--){const B=O[P]|0;U&&B==R||(N[P]=B,U=!1)}this.g=N}var f={};function m(O){return-128<=O&&O<128?l(O,function(R){return new u([R|0],R<0?-1:0)}):new u([O|0],O<0?-1:0)}function g(O){if(isNaN(O)||!isFinite(O))return E;if(O<0)return L(g(-O));const R=[];let N=1;for(let U=0;O>=N;U++)R[U]=O/N|0,N*=4294967296;return new u(R,0)}function y(O,R){if(O.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(O.charAt(0)=="-")return L(y(O.substring(1),R));if(O.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=g(Math.pow(R,8));let U=E;for(let B=0;B<O.length;B+=8){var P=Math.min(8,O.length-B);const D=parseInt(O.substring(B,B+P),R);P<8?(P=g(Math.pow(R,P)),U=U.j(P).add(g(D))):(U=U.j(N),U=U.add(g(D)))}return U}var E=m(0),b=m(1),A=m(16777216);n=u.prototype,n.m=function(){if(V(this))return-L(this).m();let O=0,R=1;for(let N=0;N<this.g.length;N++){const U=this.i(N);O+=(U>=0?U:4294967296+U)*R,R*=4294967296}return O},n.toString=function(O){if(O=O||10,O<2||36<O)throw Error("radix out of range: "+O);if(I(this))return"0";if(V(this))return"-"+L(this).toString(O);const R=g(Math.pow(O,6));var N=this;let U="";for(;;){const P=ae(N,R).g;N=X(N,P.j(R));let B=((N.g.length>0?N.g[0]:N.h)>>>0).toString(O);if(N=P,I(N))return B+U;for(;B.length<6;)B="0"+B;U=B+U}},n.i=function(O){return O<0?0:O<this.g.length?this.g[O]:this.h};function I(O){if(O.h!=0)return!1;for(let R=0;R<O.g.length;R++)if(O.g[R]!=0)return!1;return!0}function V(O){return O.h==-1}n.l=function(O){return O=X(this,O),V(O)?-1:I(O)?0:1};function L(O){const R=O.g.length,N=[];for(let U=0;U<R;U++)N[U]=~O.g[U];return new u(N,~O.h).add(b)}n.abs=function(){return V(this)?L(this):this},n.add=function(O){const R=Math.max(this.g.length,O.g.length),N=[];let U=0;for(let P=0;P<=R;P++){let B=U+(this.i(P)&65535)+(O.i(P)&65535),D=(B>>>16)+(this.i(P)>>>16)+(O.i(P)>>>16);U=D>>>16,B&=65535,D&=65535,N[P]=D<<16|B}return new u(N,N[N.length-1]&-2147483648?-1:0)};function X(O,R){return O.add(L(R))}n.j=function(O){if(I(this)||I(O))return E;if(V(this))return V(O)?L(this).j(L(O)):L(L(this).j(O));if(V(O))return L(this.j(L(O)));if(this.l(A)<0&&O.l(A)<0)return g(this.m()*O.m());const R=this.g.length+O.g.length,N=[];for(var U=0;U<2*R;U++)N[U]=0;for(U=0;U<this.g.length;U++)for(let P=0;P<O.g.length;P++){const B=this.i(U)>>>16,D=this.i(U)&65535,Ze=O.i(P)>>>16,Oe=O.i(P)&65535;N[2*U+2*P]+=D*Oe,K(N,2*U+2*P),N[2*U+2*P+1]+=B*Oe,K(N,2*U+2*P+1),N[2*U+2*P+1]+=D*Ze,K(N,2*U+2*P+1),N[2*U+2*P+2]+=B*Ze,K(N,2*U+2*P+2)}for(O=0;O<R;O++)N[O]=N[2*O+1]<<16|N[2*O];for(O=R;O<2*R;O++)N[O]=0;return new u(N,0)};function K(O,R){for(;(O[R]&65535)!=O[R];)O[R+1]+=O[R]>>>16,O[R]&=65535,R++}function $(O,R){this.g=O,this.h=R}function ae(O,R){if(I(R))throw Error("division by zero");if(I(O))return new $(E,E);if(V(O))return R=ae(L(O),R),new $(L(R.g),L(R.h));if(V(R))return R=ae(O,L(R)),new $(L(R.g),R.h);if(O.g.length>30){if(V(O)||V(R))throw Error("slowDivide_ only works with positive integers.");for(var N=b,U=R;U.l(O)<=0;)N=pe(N),U=pe(U);var P=ve(N,1),B=ve(U,1);for(U=ve(U,2),N=ve(N,2);!I(U);){var D=B.add(U);D.l(O)<=0&&(P=P.add(N),B=D),U=ve(U,1),N=ve(N,1)}return R=X(O,P.j(R)),new $(P,R)}for(P=E;O.l(R)>=0;){for(N=Math.max(1,Math.floor(O.m()/R.m())),U=Math.ceil(Math.log(N)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),B=g(N),D=B.j(R);V(D)||D.l(O)>0;)N-=U,B=g(N),D=B.j(R);I(B)&&(B=b),P=P.add(B),O=X(O,D)}return new $(P,O)}n.B=function(O){return ae(this,O).h},n.and=function(O){const R=Math.max(this.g.length,O.g.length),N=[];for(let U=0;U<R;U++)N[U]=this.i(U)&O.i(U);return new u(N,this.h&O.h)},n.or=function(O){const R=Math.max(this.g.length,O.g.length),N=[];for(let U=0;U<R;U++)N[U]=this.i(U)|O.i(U);return new u(N,this.h|O.h)},n.xor=function(O){const R=Math.max(this.g.length,O.g.length),N=[];for(let U=0;U<R;U++)N[U]=this.i(U)^O.i(U);return new u(N,this.h^O.h)};function pe(O){const R=O.g.length+1,N=[];for(let U=0;U<R;U++)N[U]=O.i(U)<<1|O.i(U-1)>>>31;return new u(N,O.h)}function ve(O,R){const N=R>>5;R%=32;const U=O.g.length-N,P=[];for(let B=0;B<U;B++)P[B]=R>0?O.i(B+N)>>>R|O.i(B+N+1)<<32-R:O.i(B+N);return new u(P,O.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,cA=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=g,u.fromString=y,Jr=u}).apply(typeof yw<"u"?yw:typeof self<"u"?self:typeof window<"u"?window:{});var Zf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var uA,lu,hA,md,P_,fA,dA,mA;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zf=="object"&&Zf];for(var v=0;v<h.length;++v){var S=h[v];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var i=t(this);function a(h,v){if(v)e:{var S=i;h=h.split(".");for(var C=0;C<h.length-1;C++){var F=h[C];if(!(F in S))break e;S=S[F]}h=h[h.length-1],C=S[h],v=v(C),v!=C&&v!=null&&e(S,h,{configurable:!0,writable:!0,value:v})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(v){var S=[],C;for(C in v)Object.prototype.hasOwnProperty.call(v,C)&&S.push([C,v[C]]);return S}});var l=l||{},u=this||self;function f(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function m(h,v,S){return h.call.apply(h.bind,arguments)}function g(h,v,S){return g=m,g.apply(null,arguments)}function y(h,v){var S=Array.prototype.slice.call(arguments,1);return function(){var C=S.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function E(h,v){function S(){}S.prototype=v.prototype,h.Z=v.prototype,h.prototype=new S,h.prototype.constructor=h,h.Ob=function(C,F,Q){for(var le=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)le[Ie-2]=arguments[Ie];return v.prototype[F].apply(C,le)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function A(h){const v=h.length;if(v>0){const S=Array(v);for(let C=0;C<v;C++)S[C]=h[C];return S}return[]}function I(h,v){for(let C=1;C<arguments.length;C++){const F=arguments[C];var S=typeof F;if(S=S!="object"?S:F?Array.isArray(F)?"array":S:"null",S=="array"||S=="object"&&typeof F.length=="number"){S=h.length||0;const Q=F.length||0;h.length=S+Q;for(let le=0;le<Q;le++)h[S+le]=F[le]}else h.push(F)}}class V{constructor(v,S){this.i=v,this.j=S,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function L(h){u.setTimeout(()=>{throw h},0)}function X(){var h=O;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class K{constructor(){this.h=this.g=null}add(v,S){const C=$.get();C.set(v,S),this.h?this.h.next=C:this.g=C,this.h=C}}var $=new V(()=>new ae,h=>h.reset());class ae{constructor(){this.next=this.g=this.h=null}set(v,S){this.h=v,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,ve=!1,O=new K,R=()=>{const h=Promise.resolve(void 0);pe=()=>{h.then(N)}};function N(){for(var h;h=X();){try{h.h.call(h.g)}catch(S){L(S)}var v=$;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}ve=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const S=()=>{};u.addEventListener("test",S,v),u.removeEventListener("test",S,v)}catch{}return h})();function D(h){return/^[\s\xa0]*$/.test(h)}function Ze(h,v){P.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}E(Ze,P),Ze.prototype.init=function(h,v){const S=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(S=="mouseover"?v=h.fromElement:S=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ze.Z.h.call(this)},Ze.prototype.h=function(){Ze.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Oe="closure_listenable_"+(Math.random()*1e6|0),Z=0;function se(h,v,S,C,F){this.listener=h,this.proxy=null,this.src=v,this.type=S,this.capture=!!C,this.ha=F,this.key=++Z,this.da=this.fa=!1}function he(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ke(h,v,S){for(const C in h)v.call(S,h[C],C,h)}function Pe(h,v){for(const S in h)v.call(void 0,h[S],S,h)}function M(h){const v={};for(const S in h)v[S]=h[S];return v}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(h,v){let S,C;for(let F=1;F<arguments.length;F++){C=arguments[F];for(S in C)h[S]=C[S];for(let Q=0;Q<G.length;Q++)S=G[Q],Object.prototype.hasOwnProperty.call(C,S)&&(h[S]=C[S])}}function ce(h){this.src=h,this.g={},this.h=0}ce.prototype.add=function(h,v,S,C,F){const Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);const le=Ee(h,v,C,F);return le>-1?(v=h[le],S||(v.fa=!1)):(v=new se(v,this.src,Q,!!C,F),v.fa=S,h.push(v)),v};function ye(h,v){const S=v.type;if(S in h.g){var C=h.g[S],F=Array.prototype.indexOf.call(C,v,void 0),Q;(Q=F>=0)&&Array.prototype.splice.call(C,F,1),Q&&(he(v),h.g[S].length==0&&(delete h.g[S],h.h--))}}function Ee(h,v,S,C){for(let F=0;F<h.length;++F){const Q=h[F];if(!Q.da&&Q.listener==v&&Q.capture==!!S&&Q.ha==C)return F}return-1}var De="closure_lm_"+(Math.random()*1e6|0),ht={};function $e(h,v,S,C,F){if(Array.isArray(v)){for(let Q=0;Q<v.length;Q++)$e(h,v[Q],S,C,F);return null}return S=Xl(S),h&&h[Oe]?h.J(v,S,f(C)?!!C.capture:!1,F):Ti(h,v,S,!1,C,F)}function Ti(h,v,S,C,F,Q){if(!v)throw Error("Invalid event type");const le=f(F)?!!F.capture:!!F;let Ie=va(h);if(Ie||(h[De]=Ie=new ce(h)),S=Ie.add(v,S,C,le,Q),S.proxy)return S;if(C=ti(),S.proxy=C,C.src=h,C.listener=S,h.addEventListener)B||(F=le),F===void 0&&(F=!1),h.addEventListener(v.toString(),C,F);else if(h.attachEvent)h.attachEvent(Fi(v.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return S}function ti(){function h(S){return v.call(h.src,h.listener,S)}const v=Wl;return h}function Bi(h,v,S,C,F){if(Array.isArray(v))for(var Q=0;Q<v.length;Q++)Bi(h,v[Q],S,C,F);else C=f(C)?!!C.capture:!!C,S=Xl(S),h&&h[Oe]?(h=h.i,Q=String(v).toString(),Q in h.g&&(v=h.g[Q],S=Ee(v,S,C,F),S>-1&&(he(v[S]),Array.prototype.splice.call(v,S,1),v.length==0&&(delete h.g[Q],h.h--)))):h&&(h=va(h))&&(v=h.g[v.toString()],h=-1,v&&(h=Ee(v,S,C,F)),(S=h>-1?v[h]:null)&&_o(S))}function _o(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[Oe])ye(v.i,h);else{var S=h.type,C=h.proxy;v.removeEventListener?v.removeEventListener(S,C,h.capture):v.detachEvent?v.detachEvent(Fi(S),C):v.addListener&&v.removeListener&&v.removeListener(C),(S=va(v))?(ye(S,h),S.h==0&&(S.src=null,v[De]=null)):he(h)}}}function Fi(h){return h in ht?ht[h]:ht[h]="on"+h}function Wl(h,v){if(h.da)h=!0;else{v=new Ze(v,this);const S=h.listener,C=h.ha||h.src;h.fa&&_o(h),h=S.call(C,v)}return h}function va(h){return h=h[De],h instanceof ce?h:null}var $l="__closure_events_fn_"+(Math.random()*1e9>>>0);function Xl(h){return typeof h=="function"?h:(h[$l]||(h[$l]=function(v){return h.handleEvent(v)}),h[$l])}function Pt(){U.call(this),this.i=new ce(this),this.M=this,this.G=null}E(Pt,U),Pt.prototype[Oe]=!0,Pt.prototype.removeEventListener=function(h,v,S,C){Bi(this,h,v,S,C)};function Kt(h,v){var S,C=h.G;if(C)for(S=[];C;C=C.G)S.push(C);if(h=h.M,C=v.type||v,typeof v=="string")v=new P(v,h);else if(v instanceof P)v.target=v.target||h;else{var F=v;v=new P(C,h),J(v,F)}F=!0;let Q,le;if(S)for(le=S.length-1;le>=0;le--)Q=v.g=S[le],F=lr(Q,C,!0,v)&&F;if(Q=v.g=h,F=lr(Q,C,!0,v)&&F,F=lr(Q,C,!1,v)&&F,S)for(le=0;le<S.length;le++)Q=v.g=S[le],F=lr(Q,C,!1,v)&&F}Pt.prototype.N=function(){if(Pt.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const S=h.g[v];for(let C=0;C<S.length;C++)he(S[C]);delete h.g[v],h.h--}}this.G=null},Pt.prototype.J=function(h,v,S,C){return this.i.add(String(h),v,!1,S,C)},Pt.prototype.K=function(h,v,S,C){return this.i.add(String(h),v,!0,S,C)};function lr(h,v,S,C){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let F=!0;for(let Q=0;Q<v.length;++Q){const le=v[Q];if(le&&!le.da&&le.capture==S){const Ie=le.listener,xt=le.ha||le.src;le.fa&&ye(h.i,le),F=Ie.call(xt,C)!==!1&&F}}return F&&!C.defaultPrevented}function qm(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:u.setTimeout(h,v||0)}function Th(h){h.g=qm(()=>{h.g=null,h.i&&(h.i=!1,Th(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class An extends U{constructor(v,S){super(),this.m=v,this.l=S,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Th(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ea(h){U.call(this),this.h=h,this.g={}}E(Ea,U);var Jl=[];function Zl(h){ke(h.g,function(v,S){this.g.hasOwnProperty(S)&&_o(v)},h),h.g={}}Ea.prototype.N=function(){Ea.Z.N.call(this),Zl(this)},Ea.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cr=u.JSON.stringify,Gm=u.JSON.parse,Sh=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function bh(){}function wh(){}var Si={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function on(){P.call(this,"d")}E(on,P);function ni(){P.call(this,"c")}E(ni,P);var Nt={},Ch=null;function yo(){return Ch=Ch||new Pt}Nt.Ia="serverreachability";function Ah(h){P.call(this,Nt.Ia,h)}E(Ah,P);function Hi(h){const v=yo();Kt(v,new Ah(v))}Nt.STAT_EVENT="statevent";function Ta(h,v){P.call(this,Nt.STAT_EVENT,h),this.stat=v}E(Ta,P);function Mt(h){const v=yo();Kt(v,new Ta(v,h))}Nt.Ja="timingevent";function qi(h,v){P.call(this,Nt.Ja,h),this.size=v}E(qi,P);function Gi(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},v)}function bi(){this.g=!0}bi.prototype.ua=function(){this.g=!1};function Ym(h,v,S,C,F,Q){h.info(function(){if(h.g)if(Q){var le="",Ie=Q.split("&");for(let Xe=0;Xe<Ie.length;Xe++){var xt=Ie[Xe].split("=");if(xt.length>1){const vt=xt[0];xt=xt[1];const ai=vt.split("_");le=ai.length>=2&&ai[1]=="type"?le+(vt+"="+xt+"&"):le+(vt+"=redacted&")}}}else le=null;else le=Q;return"XMLHTTP REQ ("+C+") [attempt "+F+"]: "+v+`
`+S+`
`+le})}function Rh(h,v,S,C,F,Q,le){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+F+"]: "+v+`
`+S+`
`+Q+" "+le})}function Yi(h,v,S,C){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Km(h,S)+(C?" "+C:"")})}function Sa(h,v){h.info(function(){return"TIMEOUT: "+v})}bi.prototype.info=function(){};function Km(h,v){if(!h.g)return v;if(!v)return null;try{const Q=JSON.parse(v);if(Q){for(h=0;h<Q.length;h++)if(Array.isArray(Q[h])){var S=Q[h];if(!(S.length<2)){var C=S[1];if(Array.isArray(C)&&!(C.length<1)){var F=C[0];if(F!="noop"&&F!="stop"&&F!="close")for(let le=1;le<C.length;le++)C[le]=""}}}}return cr(Q)}catch{return v}}var ba={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ec={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},tc;function wa(){}E(wa,bh),wa.prototype.g=function(){return new XMLHttpRequest},tc=new wa;function ws(h){return encodeURIComponent(String(h))}function Ih(h){var v=1;h=h.split(":");const S=[];for(;v>0&&h.length;)S.push(h.shift()),v--;return h.length&&S.push(h.join(":")),S}function wi(h,v,S,C){this.j=h,this.i=v,this.l=S,this.S=C||1,this.V=new Ea(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ci}function Ci(){this.i=null,this.g="",this.h=!1}var Lt={},Zt={};function Ki(h,v,S){h.M=1,h.A=Ca(Vt(v)),h.u=S,h.R=!0,vo(h,null)}function vo(h,v){h.F=Date.now(),Qi(h),h.B=Vt(h.A);var S=h.B,C=h.S;Array.isArray(C)||(C=[String(C)]),bo(S.i,"t",C),h.C=0,S=h.j.L,h.h=new Ci,h.g=Hh(h.j,S?v:null,!h.u),h.P>0&&(h.O=new An(g(h.Y,h,h.g),h.P)),v=h.V,S=h.g,C=h.ba;var F="readystatechange";Array.isArray(F)||(F&&(Jl[0]=F.toString()),F=Jl);for(let Q=0;Q<F.length;Q++){const le=$e(S,F[Q],C||v.handleEvent,!1,v.h||v);if(!le)break;v.g[le.key]=le}v=h.J?M(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),Hi(),Ym(h.i,h.v,h.B,h.l,h.S,h.u)}wi.prototype.ba=function(h){h=h.target;const v=this.O;v&&Ii(h)==3?v.j():this.Y(h)},wi.prototype.Y=function(h){try{if(h==this.g)e:{const Ie=Ii(this.g),xt=this.g.ya(),Xe=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||ln(this.g)))){this.K||Ie!=4||xt==7||(xt==8||Xe<=0?Hi(3):Hi(2)),Wi(this);var v=this.g.ca();this.X=v;var S=Qm(this);if(this.o=v==200,Rh(this.i,this.v,this.B,this.l,this.S,Ie,v),this.o){if(this.U&&!this.L){t:{if(this.g){var C,F=this.g;if((C=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(C)){var Q=C;break t}}Q=null}if(h=Q)Yi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,$i(this,h);else{this.o=!1,this.m=3,Mt(12),Fn(this),ii(this);break e}}if(this.R){h=!0;let vt;for(;!this.K&&this.C<S.length;)if(vt=xh(this,S),vt==Zt){Ie==4&&(this.m=4,Mt(14),h=!1),Yi(this.i,this.l,null,"[Incomplete Response]");break}else if(vt==Lt){this.m=4,Mt(15),Yi(this.i,this.l,S,"[Invalid Chunk]"),h=!1;break}else Yi(this.i,this.l,vt,null),$i(this,vt);if(Nh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||S.length!=0||this.h.h||(this.m=1,Mt(16),h=!1),this.o=this.o&&h,!h)Yi(this.i,this.l,S,"[Invalid Chunked Response]"),Fn(this),ii(this);else if(S.length>0&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.aa&&!le.P&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),gc(le),le.P=!0,Mt(11))}}else Yi(this.i,this.l,S,null),$i(this,S);Ie==4&&Fn(this),this.o&&!this.K&&(Ie==4?Uh(this.j,this):(this.o=!1,Qi(this)))}else As(this.g),v==400&&S.indexOf("Unknown SID")>0?(this.m=3,Mt(12)):(this.m=0,Mt(13)),Fn(this),ii(this)}}}catch{}finally{}};function Qm(h){if(!Nh(h))return h.g.la();const v=ln(h.g);if(v==="")return"";let S="";const C=v.length,F=Ii(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Fn(h),ii(h),"";h.h.i=new u.TextDecoder}for(let Q=0;Q<C;Q++)h.h.h=!0,S+=h.h.i.decode(v[Q],{stream:!(F&&Q==C-1)});return v.length=0,h.h.g+=S,h.C=0,h.h.g}function Nh(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function xh(h,v){var S=h.C,C=v.indexOf(`
`,S);return C==-1?Zt:(S=Number(v.substring(S,C)),isNaN(S)?Lt:(C+=1,C+S>v.length?Zt:(v=v.slice(C,C+S),h.C=C+S,v)))}wi.prototype.cancel=function(){this.K=!0,Fn(this)};function Qi(h){h.T=Date.now()+h.H,Eo(h,h.H)}function Eo(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Gi(g(h.aa,h),v)}function Wi(h){h.D&&(u.clearTimeout(h.D),h.D=null)}wi.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Sa(this.i,this.B),this.M!=2&&(Hi(),Mt(17)),Fn(this),this.m=2,ii(this)):Eo(this,this.T-h)};function ii(h){h.j.I==0||h.K||Uh(h.j,h)}function Fn(h){Wi(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,Zl(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function $i(h,v){try{var S=h.j;if(S.I!=0&&(S.g==h||Ji(S.h,h))){if(!h.L&&Ji(S.h,h)&&S.I==3){try{var C=S.Ba.g.parse(v)}catch{C=null}if(Array.isArray(C)&&C.length==3){var F=C;if(F[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<h.F)Io(S),_r(S);else break e;Da(S),Mt(18)}}else S.xa=F[1],0<S.xa-S.K&&F[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=Gi(g(S.Va,S),6e3));Xi(S.h)<=1&&S.ta&&(S.ta=void 0)}else ss(S,11)}else if((h.L||S.g==h)&&Io(S),!D(v))for(F=S.Ba.g.parse(v),v=0;v<F.length;v++){let Xe=F[v];const vt=Xe[0];if(!(vt<=S.K))if(S.K=vt,Xe=Xe[1],S.I==2)if(Xe[0]=="c"){S.M=Xe[1],S.ba=Xe[2];const ai=Xe[3];ai!=null&&(S.ka=ai,S.j.info("VER="+S.ka));const rs=Xe[4];rs!=null&&(S.za=rs,S.j.info("SVER="+S.za));const Ni=Xe[5];Ni!=null&&typeof Ni=="number"&&Ni>0&&(C=1.5*Ni,S.O=C,S.j.info("backChannelRequestTimeoutMs_="+C)),C=S;const xi=h.g;if(xi){const ka=xi.g?xi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ka){var Q=C.h;Q.g||ka.indexOf("spdy")==-1&&ka.indexOf("quic")==-1&&ka.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(sc(Q,Q.h),Q.h=null))}if(C.G){const No=xi.g?xi.g.getResponseHeader("X-HTTP-Session-Id"):null;No&&(C.wa=No,tt(C.J,C.G,No))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-h.F,S.j.info("Handshake RTT: "+S.T+"ms")),C=S;var le=h;if(C.na=Fh(C,C.L?C.ba:null,C.W),le.L){rc(C.h,le);var Ie=le,xt=C.O;xt&&(Ie.H=xt),Ie.D&&(Wi(Ie),Qi(Ie)),C.g=le}else jh(C);S.i.length>0&&is(S)}else Xe[0]!="stop"&&Xe[0]!="close"||ss(S,7);else S.I==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?ss(S,7):mc(S):Xe[0]!="noop"&&S.l&&S.l.qa(Xe),S.A=0)}}Hi(4)}catch{}}var jt=class{constructor(h,v){this.g=h,this.map=v}};function nc(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ic(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Xi(h){return h.h?1:h.g?h.g.size:0}function Ji(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function sc(h,v){h.g?h.g.add(v):h.h=v}function rc(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}nc.prototype.cancel=function(){if(this.i=ac(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ac(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const S of h.g.values())v=v.concat(S.G);return v}return A(h.i)}var Oh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function To(h,v){if(h){h=h.split("&");for(let S=0;S<h.length;S++){const C=h[S].indexOf("=");let F,Q=null;C>=0?(F=h[S].substring(0,C),Q=h[S].substring(C+1)):F=h[S],v(F,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Hn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof Hn?(this.l=h.l,en(this,h.j),this.o=h.o,this.g=h.g,ur(this,h.u),this.h=h.h,oc(this,Mh(h.i)),this.m=h.m):h&&(v=String(h).match(Oh))?(this.l=!1,en(this,v[1]||"",!0),this.o=Zi(v[2]||""),this.g=Zi(v[3]||"",!0),ur(this,v[4]),this.h=Zi(v[5]||"",!0),oc(this,v[6]||"",!0),this.m=Zi(v[7]||"")):(this.l=!1,this.i=new fr(null,this.l))}Hn.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(Aa(v,So,!0),":");var S=this.g;return(S||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Aa(v,So,!0),"@"),h.push(ws(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&h.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&h.push("/"),h.push(Aa(S,S.charAt(0)=="/"?lc:Dh,!0))),(S=this.i.toString())&&h.push("?",S),(S=this.m)&&h.push("#",Aa(S,kh)),h.join("")},Hn.prototype.resolve=function(h){const v=Vt(this);let S=!!h.j;S?en(v,h.j):S=!!h.o,S?v.o=h.o:S=!!h.g,S?v.g=h.g:S=h.u!=null;var C=h.h;if(S)ur(v,h.u);else if(S=!!h.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var F=v.h.lastIndexOf("/");F!=-1&&(C=v.h.slice(0,F+1)+C)}if(F=C,F==".."||F==".")C="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){C=F.lastIndexOf("/",0)==0,F=F.split("/");const Q=[];for(let le=0;le<F.length;){const Ie=F[le++];Ie=="."?C&&le==F.length&&Q.push(""):Ie==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),C&&le==F.length&&Q.push("")):(Q.push(Ie),C=!0)}C=Q.join("/")}else C=F}return S?v.h=C:S=h.i.toString()!=="",S?oc(v,Mh(h.i)):S=!!h.m,S&&(v.m=h.m),v};function Vt(h){return new Hn(h)}function en(h,v,S){h.j=S?Zi(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function ur(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function oc(h,v,S){v instanceof fr?(h.i=v,wo(h.i,h.l)):(S||(v=Aa(v,hr)),h.i=new fr(v,h.l))}function tt(h,v,S){h.i.set(v,S)}function Ca(h){return tt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Zi(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Aa(h,v,S){return typeof h=="string"?(h=encodeURI(h).replace(v,Dn),S&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Dn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var So=/[#\/\?@]/g,Dh=/[#\?:]/g,lc=/[#\?]/g,hr=/[#\?@]/g,kh=/#/g;function fr(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function kn(h){h.g||(h.g=new Map,h.h=0,h.i&&To(h.i,function(v,S){h.add(decodeURIComponent(v.replace(/\+/g," ")),S)}))}n=fr.prototype,n.add=function(h,v){kn(this),this.i=null,h=dr(this,h);let S=this.g.get(h);return S||this.g.set(h,S=[]),S.push(v),this.h+=1,this};function Ph(h,v){kn(h),v=dr(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function cc(h,v){return kn(h),v=dr(h,v),h.g.has(v)}n.forEach=function(h,v){kn(this),this.g.forEach(function(S,C){S.forEach(function(F){h.call(v,F,C,this)},this)},this)};function uc(h,v){kn(h);let S=[];if(typeof v=="string")cc(h,v)&&(S=S.concat(h.g.get(dr(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)S=S.concat(h[v]);return S}n.set=function(h,v){return kn(this),this.i=null,h=dr(this,h),cc(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},n.get=function(h,v){return h?(h=uc(this,h),h.length>0?String(h[0]):v):v};function bo(h,v,S){Ph(h,v),S.length>0&&(h.i=null,h.g.set(dr(h,v),A(S)),h.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let C=0;C<v.length;C++){var S=v[C];const F=ws(S);S=uc(this,S);for(let Q=0;Q<S.length;Q++){let le=F;S[Q]!==""&&(le+="="+ws(S[Q])),h.push(le)}}return this.i=h.join("&")};function Mh(h){const v=new fr;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function dr(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function wo(h,v){v&&!h.j&&(kn(h),h.i=null,h.g.forEach(function(S,C){const F=C.toLowerCase();C!=F&&(Ph(this,C),bo(this,F,S))},h)),h.j=v}function Ai(h,v){const S=new bi;if(u.Image){const C=new Image;C.onload=y(si,S,"TestLoadImage: loaded",!0,v,C),C.onerror=y(si,S,"TestLoadImage: error",!1,v,C),C.onabort=y(si,S,"TestLoadImage: abort",!1,v,C),C.ontimeout=y(si,S,"TestLoadImage: timeout",!1,v,C),u.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else v(!1)}function hc(h,v){const S=new bi,C=new AbortController,F=setTimeout(()=>{C.abort(),si(S,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:C.signal}).then(Q=>{clearTimeout(F),Q.ok?si(S,"TestPingServer: ok",!0,v):si(S,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(F),si(S,"TestPingServer: error",!1,v)})}function si(h,v,S,C,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),C(S)}catch{}}function mr(){this.g=new Sh}function es(h){this.i=h.Sb||null,this.h=h.ab||!1}E(es,bh),es.prototype.g=function(){return new Ra(this.i,this.h)};function Ra(h,v){Pt.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Ra,Pt),n=Ra.prototype,n.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,Ri(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||u).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,pr(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ri(this)),this.g&&(this.readyState=3,Ri(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Co(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Co(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?pr(this):Ri(this),this.readyState==3&&Co(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,pr(this))},n.Na=function(h){this.g&&(this.response=h,pr(this))},n.ga=function(){this.g&&pr(this)};function pr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Ri(h)}n.setRequestHeader=function(h,v){this.A.append(h,v)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var S=v.next();!S.done;)S=S.value,h.push(S[0]+": "+S[1]),S=v.next();return h.join(`\r
`)};function Ri(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ra.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ri(h){let v="";return ke(h,function(S,C){v+=C,v+=":",v+=S,v+=`\r
`}),v}function Ia(h,v,S){e:{for(C in S){var C=!1;break e}C=!0}C||(S=ri(S),typeof h=="string"?S!=null&&ws(S):tt(h,v,S))}function st(h){Pt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(st,Pt);var ts=/^https?$/i,fc=["POST","PUT"];n=st.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,v,S,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():tc.g(),this.g.onreadystatechange=b(g(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(Q){Na(this,Q);return}if(h=S||"",S=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var F in C)S.set(F,C[F]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const Q of C.keys())S.set(Q,C.get(Q));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(S.keys()).find(Q=>Q.toLowerCase()=="content-type"),F=u.FormData&&h instanceof u.FormData,!(Array.prototype.indexOf.call(fc,v,void 0)>=0)||C||F||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,le]of S)this.g.setRequestHeader(Q,le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Q){Na(this,Q)}};function Na(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,dc(h),Cs(h)}function dc(h){h.A||(h.A=!0,Kt(h,"complete"),Kt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Kt(this,"complete"),Kt(this,"abort"),Cs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cs(this,!0)),st.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?xa(this):this.Xa())},n.Xa=function(){xa(this)};function xa(h){if(h.h&&typeof l<"u"){if(h.v&&Ii(h)==4)setTimeout(h.Ca.bind(h),0);else if(Kt(h,"readystatechange"),Ii(h)==4){h.h=!1;try{const Q=h.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var S;if(!(S=v)){var C;if(C=Q===0){let le=String(h.D).match(Oh)[1]||null;!le&&u.self&&u.self.location&&(le=u.self.location.protocol.slice(0,-1)),C=!ts.test(le?le.toLowerCase():"")}S=C}if(S)Kt(h,"complete"),Kt(h,"success");else{h.o=6;try{var F=Ii(h)>2?h.g.statusText:""}catch{F=""}h.l=F+" ["+h.ca()+"]",dc(h)}}finally{Cs(h)}}}}function Cs(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const S=h.g;h.g=null,v||Kt(h,"ready");try{S.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ii(h){return h.g?h.g.readyState:0}n.ca=function(){try{return Ii(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),Gm(v)}};function ln(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function As(h){const v={};h=(h.g&&Ii(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(D(h[C]))continue;var S=Ih(h[C]);const F=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const Q=v[F]||[];v[F]=Q,Q.push(S)}Pe(v,function(C){return C.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ns(h,v,S){return S&&S.internalChannelParams&&S.internalChannelParams[h]||v}function gr(h){this.za=0,this.i=[],this.j=new bi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ns("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ns("baseRetryDelayMs",5e3,h),this.Za=ns("retryDelaySeedMs",1e4,h),this.Ta=ns("forwardChannelMaxRetries",2,h),this.va=ns("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new nc(h&&h.concurrentRequestLimit),this.Ba=new mr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=gr.prototype,n.ka=8,n.I=1,n.connect=function(h,v,S,C){Mt(0),this.W=h,this.H=v||{},S&&C!==void 0&&(this.H.OSID=S,this.H.OAID=C),this.F=this.X,this.J=Fh(this,null,this.W),is(this)};function mc(h){if(Ao(h),h.I==3){var v=h.V++,S=Vt(h.J);if(tt(S,"SID",h.M),tt(S,"RID",v),tt(S,"TYPE","terminate"),Oa(h,S),v=new wi(h,h.j,v),v.M=2,v.A=Ca(Vt(S)),S=!1,u.navigator&&u.navigator.sendBeacon)try{S=u.navigator.sendBeacon(v.A.toString(),"")}catch{}!S&&u.Image&&(new Image().src=v.A,S=!0),S||(v.g=Hh(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Qi(v)}Bh(h)}function _r(h){h.g&&(gc(h),h.g.cancel(),h.g=null)}function Ao(h){_r(h),h.v&&(u.clearTimeout(h.v),h.v=null),Io(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&u.clearTimeout(h.m),h.m=null)}function is(h){if(!ic(h.h)&&!h.m){h.m=!0;var v=h.Ea;pe||R(),ve||(pe(),ve=!0),O.add(v,h),h.D=0}}function Ro(h,v){return Xi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Gi(g(h.Ea,h,v),zh(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const F=new wi(this,this.j,h);let Q=this.o;if(this.U&&(Q?(Q=M(Q),J(Q,this.U)):Q=this.U),this.u!==null||this.R||(F.J=Q,Q=null),this.S)e:{for(var v=0,S=0;S<this.i.length;S++){t:{var C=this.i[S];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(v+=C,v>4096){v=S;break e}if(v===4096||S===this.i.length-1){v=S+1;break e}}v=1e3}else v=1e3;v=Lh(this,F,v),S=Vt(this.J),tt(S,"RID",h),tt(S,"CVER",22),this.G&&tt(S,"X-HTTP-Session-Id",this.G),Oa(this,S),Q&&(this.R?v="headers="+ws(ri(Q))+"&"+v:this.u&&Ia(S,this.u,Q)),sc(this.h,F),this.Ra&&tt(S,"TYPE","init"),this.S?(tt(S,"$req",v),tt(S,"SID","null"),F.U=!0,Ki(F,S,null)):Ki(F,S,v),this.I=2}}else this.I==3&&(h?pc(this,h):this.i.length==0||ic(this.h)||pc(this))};function pc(h,v){var S;v?S=v.l:S=h.V++;const C=Vt(h.J);tt(C,"SID",h.M),tt(C,"RID",S),tt(C,"AID",h.K),Oa(h,C),h.u&&h.o&&Ia(C,h.u,h.o),S=new wi(h,h.j,S,h.D+1),h.u===null&&(S.J=h.o),v&&(h.i=v.G.concat(h.i)),v=Lh(h,S,1e3),S.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),sc(h.h,S),Ki(S,C,v)}function Oa(h,v){h.H&&ke(h.H,function(S,C){tt(v,C,S)}),h.l&&ke({},function(S,C){tt(v,C,S)})}function Lh(h,v,S){S=Math.min(h.i.length,S);const C=h.l?g(h.l.Ka,h.l,h):null;e:{var F=h.i;let Ie=-1;for(;;){const xt=["count="+S];Ie==-1?S>0?(Ie=F[0].g,xt.push("ofs="+Ie)):Ie=0:xt.push("ofs="+Ie);let Xe=!0;for(let vt=0;vt<S;vt++){var Q=F[vt].g;const ai=F[vt].map;if(Q-=Ie,Q<0)Ie=Math.max(0,F[vt].g-100),Xe=!1;else try{Q="req"+Q+"_"||"";try{var le=ai instanceof Map?ai:Object.entries(ai);for(const[rs,Ni]of le){let xi=Ni;f(Ni)&&(xi=cr(Ni)),xt.push(Q+rs+"="+encodeURIComponent(xi))}}catch(rs){throw xt.push(Q+"type="+encodeURIComponent("_badmap")),rs}}catch{C&&C(ai)}}if(Xe){le=xt.join("&");break e}}le=void 0}return h=h.i.splice(0,S),v.G=h,le}function jh(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;pe||R(),ve||(pe(),ve=!0),O.add(v,h),h.A=0}}function Da(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Gi(g(h.Da,h),zh(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,Vh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Gi(g(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Mt(10),_r(this),Vh(this))};function gc(h){h.B!=null&&(u.clearTimeout(h.B),h.B=null)}function Vh(h){h.g=new wi(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=Vt(h.na);tt(v,"RID","rpc"),tt(v,"SID",h.M),tt(v,"AID",h.K),tt(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&tt(v,"TO",h.ia),tt(v,"TYPE","xmlhttp"),Oa(h,v),h.u&&h.o&&Ia(v,h.u,h.o),h.O&&(h.g.H=h.O);var S=h.g;h=h.ba,S.M=1,S.A=Ca(Vt(v)),S.u=null,S.R=!0,vo(S,h)}n.Va=function(){this.C!=null&&(this.C=null,_r(this),Da(this),Mt(19))};function Io(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function Uh(h,v){var S=null;if(h.g==v){Io(h),gc(h),h.g=null;var C=2}else if(Ji(h.h,v))S=v.G,rc(h.h,v),C=1;else return;if(h.I!=0){if(v.o)if(C==1){S=v.u?v.u.length:0,v=Date.now()-v.F;var F=h.D;C=yo(),Kt(C,new qi(C,S)),is(h)}else jh(h);else if(F=v.m,F==3||F==0&&v.X>0||!(C==1&&Ro(h,v)||C==2&&Da(h)))switch(S&&S.length>0&&(v=h.h,v.i=v.i.concat(S)),F){case 1:ss(h,5);break;case 4:ss(h,10);break;case 3:ss(h,6);break;default:ss(h,2)}}}function zh(h,v){let S=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(S*=2),S*v}function ss(h,v){if(h.j.info("Error code "+v),v==2){var S=g(h.bb,h),C=h.Ua;const F=!C;C=new Hn(C||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||en(C,"https"),Ca(C),F?Ai(C.toString(),S):hc(C.toString(),S)}else Mt(2);h.I=0,h.l&&h.l.pa(v),Bh(h),Ao(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function Bh(h){if(h.I=0,h.ja=[],h.l){const v=ac(h.h);(v.length!=0||h.i.length!=0)&&(I(h.ja,v),I(h.ja,h.i),h.h.i.length=0,A(h.i),h.i.length=0),h.l.oa()}}function Fh(h,v,S){var C=S instanceof Hn?Vt(S):new Hn(S);if(C.g!="")v&&(C.g=v+"."+C.g),ur(C,C.u);else{var F=u.location;C=F.protocol,v=v?v+"."+F.hostname:F.hostname,F=+F.port;const Q=new Hn(null);C&&en(Q,C),v&&(Q.g=v),F&&ur(Q,F),S&&(Q.h=S),C=Q}return S=h.G,v=h.wa,S&&v&&tt(C,S,v),tt(C,"VER",h.ka),Oa(h,C),C}function Hh(h,v,S){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new st(new es({ab:S})):new st(h.ma),v.Fa(h.L),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function qh(){}n=qh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function yr(){}yr.prototype.g=function(h,v){return new Rn(h,v)};function Rn(h,v){Pt.call(this),this.g=new gr(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!D(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!D(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Rs(this)}E(Rn,Pt),Rn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){mc(this.g)},Rn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var S={};S.__data__=h,h=S}else this.v&&(S={},S.__data__=cr(h),h=S);v.i.push(new jt(v.Ya++,h)),v.I==3&&is(v)},Rn.prototype.N=function(){this.g.l=null,delete this.j,mc(this.g),delete this.g,Rn.Z.N.call(this)};function Gh(h){on.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const S in v){h=S;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}E(Gh,on);function Yh(){ni.call(this),this.status=1}E(Yh,ni);function Rs(h){this.g=h}E(Rs,qh),Rs.prototype.ra=function(){Kt(this.g,"a")},Rs.prototype.qa=function(h){Kt(this.g,new Gh(h))},Rs.prototype.pa=function(h){Kt(this.g,new Yh)},Rs.prototype.oa=function(){Kt(this.g,"b")},yr.prototype.createWebChannel=yr.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,mA=function(){return new yr},dA=function(){return yo()},fA=Nt,P_={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ba.NO_ERROR=0,ba.TIMEOUT=8,ba.HTTP_ERROR=6,md=ba,ec.COMPLETE="complete",hA=ec,wh.EventType=Si,Si.OPEN="a",Si.CLOSE="b",Si.ERROR="c",Si.MESSAGE="d",Pt.prototype.listen=Pt.prototype.J,lu=wh,st.prototype.listenOnce=st.prototype.K,st.prototype.getLastError=st.prototype.Ha,st.prototype.getLastErrorCode=st.prototype.ya,st.prototype.getStatus=st.prototype.ca,st.prototype.getResponseJson=st.prototype.La,st.prototype.getResponseText=st.prototype.la,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Fa,uA=st}).apply(typeof Zf<"u"?Zf:typeof self<"u"?self:typeof window<"u"?window:{});const vw="@firebase/firestore",Ew="4.9.2";class bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bn.UNAUTHENTICATED=new bn(null),bn.GOOGLE_CREDENTIALS=new bn("google-credentials-uid"),bn.FIRST_PARTY=new bn("first-party-uid"),bn.MOCK_USER=new bn("mock-user");let Ul="12.3.0";const no=new dm("@firebase/firestore");function ol(){return no.logLevel}function ue(n,...e){if(no.logLevel<=Ue.DEBUG){const t=e.map(Ly);no.debug(`Firestore (${Ul}): ${n}`,...t)}}function sr(n,...e){if(no.logLevel<=Ue.ERROR){const t=e.map(Ly);no.error(`Firestore (${Ul}): ${n}`,...t)}}function Sl(n,...e){if(no.logLevel<=Ue.WARN){const t=e.map(Ly);no.warn(`Firestore (${Ul}): ${n}`,...t)}}function Ly(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function we(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,pA(n,i,t)}function pA(n,e,t){let i=`FIRESTORE (${Ul}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw sr(i),new Error(i)}function et(n,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,n||pA(e,a,i)}function Re(n,e){return n}const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Es{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Zr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class gA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(bn.UNAUTHENTICATED)))}shutdown(){}}class HM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class qM{constructor(e){this.t=e,this.currentUser=bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){et(this.o===void 0,42304);let i=this.i;const a=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new Zr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Zr,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},f=m=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Zr)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(et(typeof i.accessToken=="string",31837,{l:i}),new gA(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string",2055,{h:e}),new bn(e)}}class GM{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=bn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class YM{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new GM(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(bn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Tw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KM{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){et(this.o===void 0,3512);const i=l=>{l.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,ue("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Tw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(et(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Tw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function QM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class jy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=QM(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function He(n,e){return n<e?-1:n>e?1:0}function M_(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const a=n.charAt(i),l=e.charAt(i);if(a!==l)return o_(a)===o_(l)?He(a,l):o_(a)?1:-1}return He(n.length,e.length)}const WM=55296,$M=57343;function o_(n){const e=n.charCodeAt(0);return e>=WM&&e<=$M}function bl(n,e,t){return n.length===e.length&&n.every(((i,a)=>t(i,e[a])))}const Sw="__name__";class us{constructor(e,t,i){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&we(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return us.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof us?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=us.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return He(e.length,t.length)}static compareSegments(e,t){const i=us.isNumericId(e),a=us.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?us.extractNumericId(e).compare(us.extractNumericId(t)):M_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jr.fromString(e.substring(4,e.length-2))}}class St extends us{construct(e,t,i){return new St(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ge(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new St(t)}static emptyPath(){return new St([])}}const XM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _n extends us{construct(e,t,i){return new _n(e,t,i)}static isValidIdentifier(e){return XM.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_n.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Sw}static keyField(){return new _n([Sw])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new ge(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new ge(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ge(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,a+=2}else f==="`"?(u=!u,a++):f!=="."||u?(i+=f,a++):(l(),a++)}if(l(),u)throw new ge(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _n(t)}static emptyPath(){return new _n([])}}class Te{constructor(e){this.path=e}static fromPath(e){return new Te(St.fromString(e))}static fromName(e){return new Te(St.fromString(e).popFirst(5))}static empty(){return new Te(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&St.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return St.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new St(e.slice()))}}function JM(n,e,t){if(!t)throw new ge(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ZM(n,e,t,i){if(e===!0&&i===!0)throw new ge(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function bw(n){if(!Te.isDocumentKey(n))throw new ge(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function _A(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Vy(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":we(12329,{type:typeof n})}function Du(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Vy(n);throw new ge(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Gt(n,e){const t={typeString:n};return e&&(t.value=e),t}function sh(n,e){if(!_A(n))throw new ge(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(a&&typeof u!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ge(re.INVALID_ARGUMENT,t);return!0}const ww=-62135596800,Cw=1e6;class _t{static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Cw);return new _t(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ww)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Cw}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(sh(e,_t._jsonSchema))return new _t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ww;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_t._jsonSchemaVersion="firestore/timestamp/1.0",_t._jsonSchema={type:Gt("string",_t._jsonSchemaVersion),seconds:Gt("number"),nanoseconds:Gt("number")};class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new _t(0,0))}static max(){return new Ce(new _t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ku=-1;function e2(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=Ce.fromTimestamp(i===1e9?new _t(t+1,0):new _t(t,i));return new ra(a,Te.empty(),e)}function t2(n){return new ra(n.readTime,n.key,ku)}class ra{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ra(Ce.min(),Te.empty(),ku)}static max(){return new ra(Ce.max(),Te.empty(),ku)}}function n2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(n.documentKey,e.documentKey),t!==0?t:He(n.largestBatchId,e.largestBatchId))}const i2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class s2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function zl(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==i2)throw n;ue("LocalStore","Unexpectedly lost primary lease")}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,i)=>{t(e)}))}static reject(e){return new ie(((t,i)=>{i(e)}))}static waitFor(e){return new ie(((t,i)=>{let a=0,l=0,u=!1;e.forEach((f=>{++a,f.next((()=>{++l,u&&l===a&&t()}),(m=>i(m)))})),u=!0,l===a&&t()}))}static or(e){let t=ie.resolve(!1);for(const i of e)t=t.next((a=>a?ie.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new ie(((i,a)=>{const l=e.length,u=new Array(l);let f=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next((y=>{u[g]=y,++f,f===l&&i(u)}),(y=>a(y)))}}))}static doWhile(e,t){return new ie(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}function r2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Bl(n){return n.name==="IndexedDbTransactionError"}class ym{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ym.ce=-1;const Uy=-1;function vm(n){return n==null}function Dd(n){return n===0&&1/n==-1/0}function a2(n){return typeof n=="number"&&Number.isInteger(n)&&!Dd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const yA="";function o2(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Aw(e)),e=l2(n.get(t),e);return Aw(e)}function l2(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case yA:t+="";break;default:t+=l}}return t}function Aw(n){return n+yA+""}function Rw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function uo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function vA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}let Yt=class L_{constructor(e,t){this.comparator=e,this.root=t||ea.EMPTY}insert(e,t){return new L_(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ea.BLACK,null,null))}remove(e){return new L_(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ea.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ed(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ed(this.root,e,this.comparator,!1)}getReverseIterator(){return new ed(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ed(this.root,e,this.comparator,!0)}},ed=class{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ea=class Hs{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??Hs.RED,this.left=a??Hs.EMPTY,this.right=l??Hs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new Hs(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Hs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Hs.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}};ea.EMPTY=null,ea.RED=!0,ea.BLACK=!1;ea.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new ea(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Jt{constructor(e){this.comparator=e,this.data=new Yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Iw(this.data.getIterator())}getIteratorFrom(e){return new Iw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Jt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Jt(this.comparator);return t.data=e,t}}class Iw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Li{constructor(e){this.fields=e,e.sort(_n.comparator)}static empty(){return new Li([])}unionWith(e){let t=new Jt(_n.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Li(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return bl(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class EA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new EA("Invalid base64 string: "+l):l}})(e);return new yn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new yn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const c2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function aa(n){if(et(!!n,39018),typeof n=="string"){let e=0;const t=c2.exec(n);if(et(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:kt(n.seconds),nanos:kt(n.nanos)}}function kt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function oa(n){return typeof n=="string"?yn.fromBase64String(n):yn.fromUint8Array(n)}const TA="server_timestamp",SA="__type__",bA="__previous_value__",wA="__local_write_time__";function zy(n){return(n?.mapValue?.fields||{})[SA]?.stringValue===TA}function Em(n){const e=n.mapValue.fields[bA];return zy(e)?Em(e):e}function Pu(n){const e=aa(n.mapValue.fields[wA].timestampValue);return new _t(e.seconds,e.nanos)}class u2{constructor(e,t,i,a,l,u,f,m,g,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=y}}const kd="(default)";class Mu{constructor(e,t){this.projectId=e,this.database=t||kd}static empty(){return new Mu("","")}get isDefaultDatabase(){return this.database===kd}isEqual(e){return e instanceof Mu&&e.projectId===this.projectId&&e.database===this.database}}const CA="__type__",h2="__max__",td={mapValue:{}},AA="__vector__",Pd="value";function la(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?zy(n)?4:d2(n)?9007199254740991:f2(n)?10:11:we(28295,{value:n})}function gs(n,e){if(n===e)return!0;const t=la(n);if(t!==la(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Pu(n).isEqual(Pu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=aa(a.timestampValue),f=aa(l.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return oa(a.bytesValue).isEqual(oa(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return kt(a.geoPointValue.latitude)===kt(l.geoPointValue.latitude)&&kt(a.geoPointValue.longitude)===kt(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return kt(a.integerValue)===kt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=kt(a.doubleValue),f=kt(l.doubleValue);return u===f?Dd(u)===Dd(f):isNaN(u)&&isNaN(f)}return!1})(n,e);case 9:return bl(n.arrayValue.values||[],e.arrayValue.values||[],gs);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},f=l.mapValue.fields||{};if(Rw(u)!==Rw(f))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(f[m]===void 0||!gs(u[m],f[m])))return!1;return!0})(n,e);default:return we(52216,{left:n})}}function Lu(n,e){return(n.values||[]).find((t=>gs(t,e)))!==void 0}function wl(n,e){if(n===e)return 0;const t=la(n),i=la(e);if(t!==i)return He(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return He(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const f=kt(l.integerValue||l.doubleValue),m=kt(u.integerValue||u.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(n,e);case 3:return Nw(n.timestampValue,e.timestampValue);case 4:return Nw(Pu(n),Pu(e));case 5:return M_(n.stringValue,e.stringValue);case 6:return(function(l,u){const f=oa(l),m=oa(u);return f.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const f=l.split("/"),m=u.split("/");for(let g=0;g<f.length&&g<m.length;g++){const y=He(f[g],m[g]);if(y!==0)return y}return He(f.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const f=He(kt(l.latitude),kt(u.latitude));return f!==0?f:He(kt(l.longitude),kt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return xw(n.arrayValue,e.arrayValue);case 10:return(function(l,u){const f=l.fields||{},m=u.fields||{},g=f[Pd]?.arrayValue,y=m[Pd]?.arrayValue,E=He(g?.values?.length||0,y?.values?.length||0);return E!==0?E:xw(g,y)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===td.mapValue&&u===td.mapValue)return 0;if(l===td.mapValue)return 1;if(u===td.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),g=u.fields||{},y=Object.keys(g);m.sort(),y.sort();for(let E=0;E<m.length&&E<y.length;++E){const b=M_(m[E],y[E]);if(b!==0)return b;const A=wl(f[m[E]],g[y[E]]);if(A!==0)return A}return He(m.length,y.length)})(n.mapValue,e.mapValue);default:throw we(23264,{he:t})}}function Nw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return He(n,e);const t=aa(n),i=aa(e),a=He(t.seconds,i.seconds);return a!==0?a:He(t.nanos,i.nanos)}function xw(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=wl(t[a],i[a]);if(l)return l}return He(t.length,i.length)}function Cl(n){return j_(n)}function j_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=aa(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return oa(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Te.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=j_(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of i)l?l=!1:a+=",",a+=`${u}:${j_(t.fields[u])}`;return a+"}"})(n.mapValue):we(61005,{value:n})}function pd(n){switch(la(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Em(n);return e?16+pd(e):16;case 5:return 2*n.stringValue.length;case 6:return oa(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+pd(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let a=0;return uo(i.fields,((l,u)=>{a+=l.length+pd(u)})),a})(n.mapValue);default:throw we(13486,{value:n})}}function V_(n){return!!n&&"integerValue"in n}function By(n){return!!n&&"arrayValue"in n}function Ow(n){return!!n&&"nullValue"in n}function Dw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gd(n){return!!n&&"mapValue"in n}function f2(n){return(n?.mapValue?.fields||{})[CA]?.stringValue===AA}function _u(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return uo(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=_u(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=_u(n.arrayValue.values[t]);return e}return{...n}}function d2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===h2}class pi{constructor(e){this.value=e}static empty(){return new pi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!gd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_u(t)}setAll(e){let t=_n.emptyPath(),i={},a=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,i,a),i={},a=[],t=f.popLast()}u?i[f.lastSegment()]=_u(u):a.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());gd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return gs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];gd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){uo(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new pi(_u(this.value))}}function RA(n){const e=[];return uo(n.fields,((t,i)=>{const a=new _n([t]);if(gd(i)){const l=RA(i.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new Li(e)}class wn{constructor(e,t,i,a,l,u,f){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=u,this.documentState=f}static newInvalidDocument(e){return new wn(e,0,Ce.min(),Ce.min(),Ce.min(),pi.empty(),0)}static newFoundDocument(e,t,i,a){return new wn(e,1,t,Ce.min(),i,a,0)}static newNoDocument(e,t){return new wn(e,2,t,Ce.min(),Ce.min(),pi.empty(),0)}static newUnknownDocument(e,t){return new wn(e,3,t,Ce.min(),Ce.min(),pi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Md{constructor(e,t){this.position=e,this.inclusive=t}}function kw(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const l=e[a],u=n.position[a];if(l.field.isKeyField()?i=Te.comparator(Te.fromName(u.referenceValue),t.key):i=wl(u,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Pw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!gs(n.position[t],e.position[t]))return!1;return!0}class Ld{constructor(e,t="asc"){this.field=e,this.dir=t}}function m2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class IA{}class Xt extends IA{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new g2(e,t,i):t==="array-contains"?new v2(e,i):t==="in"?new E2(e,i):t==="not-in"?new T2(e,i):t==="array-contains-any"?new S2(e,i):new Xt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new _2(e,i):new y2(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(wl(t,this.value)):t!==null&&la(this.value)===la(t)&&this.matchesComparison(wl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _s extends IA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new _s(e,t)}matches(e){return NA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function NA(n){return n.op==="and"}function xA(n){return p2(n)&&NA(n)}function p2(n){for(const e of n.filters)if(e instanceof _s)return!1;return!0}function U_(n){if(n instanceof Xt)return n.field.canonicalString()+n.op.toString()+Cl(n.value);if(xA(n))return n.filters.map((e=>U_(e))).join(",");{const e=n.filters.map((t=>U_(t))).join(",");return`${n.op}(${e})`}}function OA(n,e){return n instanceof Xt?(function(i,a){return a instanceof Xt&&i.op===a.op&&i.field.isEqual(a.field)&&gs(i.value,a.value)})(n,e):n instanceof _s?(function(i,a){return a instanceof _s&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,u,f)=>l&&OA(u,a.filters[f])),!0):!1})(n,e):void we(19439)}function DA(n){return n instanceof Xt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Cl(t.value)}`})(n):n instanceof _s?(function(t){return t.op.toString()+" {"+t.getFilters().map(DA).join(" ,")+"}"})(n):"Filter"}class g2 extends Xt{constructor(e,t,i){super(e,t,i),this.key=Te.fromName(i.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class _2 extends Xt{constructor(e,t){super(e,"in",t),this.keys=kA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class y2 extends Xt{constructor(e,t){super(e,"not-in",t),this.keys=kA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function kA(n,e){return(e.arrayValue?.values||[]).map((t=>Te.fromName(t.referenceValue)))}class v2 extends Xt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return By(t)&&Lu(t.arrayValue,this.value)}}class E2 extends Xt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Lu(this.value.arrayValue,t)}}class T2 extends Xt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Lu(this.value.arrayValue,t)}}class S2 extends Xt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!By(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Lu(this.value.arrayValue,i)))}}class b2{constructor(e,t=null,i=[],a=[],l=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=u,this.endAt=f,this.Te=null}}function Mw(n,e=null,t=[],i=[],a=null,l=null,u=null){return new b2(n,e,t,i,a,l,u)}function Fy(n){const e=Re(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>U_(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),vm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Cl(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Cl(i))).join(",")),e.Te=t}return e.Te}function Hy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!m2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!OA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Pw(n.startAt,e.startAt)&&Pw(n.endAt,e.endAt)}function z_(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class Tm{constructor(e,t=null,i=[],a=[],l=null,u="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=u,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function w2(n,e,t,i,a,l,u,f){return new Tm(n,e,t,i,a,l,u,f)}function qy(n){return new Tm(n)}function Lw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function C2(n){return n.collectionGroup!==null}function yu(n){const e=Re(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new Jt(_n.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(f=f.add(g.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Ld(l,i))})),t.has(_n.keyField().canonicalString())||e.Ie.push(new Ld(_n.keyField(),i))}return e.Ie}function fs(n){const e=Re(n);return e.Ee||(e.Ee=A2(e,yu(n))),e.Ee}function A2(n,e){if(n.limitType==="F")return Mw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Ld(a.field,l)}));const t=n.endAt?new Md(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Md(n.startAt.position,n.startAt.inclusive):null;return Mw(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function B_(n,e,t){return new Tm(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Sm(n,e){return Hy(fs(n),fs(e))&&n.limitType===e.limitType}function PA(n){return`${Fy(fs(n))}|lt:${n.limitType}`}function ll(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>DA(a))).join(", ")}]`),vm(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>Cl(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>Cl(a))).join(",")),`Target(${i})`})(fs(n))}; limitType=${n.limitType})`}function bm(n,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Te.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,a){for(const l of yu(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(i,a){return!(i.startAt&&!(function(u,f,m){const g=kw(u,f,m);return u.inclusive?g<=0:g<0})(i.startAt,yu(i),a)||i.endAt&&!(function(u,f,m){const g=kw(u,f,m);return u.inclusive?g>=0:g>0})(i.endAt,yu(i),a))})(n,e)}function R2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function MA(n){return(e,t)=>{let i=!1;for(const a of yu(n)){const l=I2(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function I2(n,e,t){const i=n.field.isKeyField()?Te.comparator(e.key,t.key):(function(l,u,f){const m=u.data.field(l),g=f.data.field(l);return m!==null&&g!==null?wl(m,g):we(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:n.dir})}}class ho{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){uo(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return vA(this.inner)}size(){return this.innerSize}}const N2=new Yt(Te.comparator);function rr(){return N2}const LA=new Yt(Te.comparator);function cu(...n){let e=LA;for(const t of n)e=e.insert(t.key,t);return e}function jA(n){let e=LA;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Xa(){return vu()}function VA(){return vu()}function vu(){return new ho((n=>n.toString()),((n,e)=>n.isEqual(e)))}const x2=new Yt(Te.comparator),O2=new Jt(Te.comparator);function qe(...n){let e=O2;for(const t of n)e=e.add(t);return e}const D2=new Jt(He);function k2(){return D2}function Gy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dd(e)?"-0":e}}function UA(n){return{integerValue:""+n}}function P2(n,e){return a2(e)?UA(e):Gy(n,e)}class wm{constructor(){this._=void 0}}function M2(n,e,t){return n instanceof jd?(function(a,l){const u={fields:{[SA]:{stringValue:TA},[wA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&zy(l)&&(l=Em(l)),l&&(u.fields[bA]=l),{mapValue:u}})(t,e):n instanceof ju?BA(n,e):n instanceof Vu?FA(n,e):(function(a,l){const u=zA(a,l),f=jw(u)+jw(a.Ae);return V_(u)&&V_(a.Ae)?UA(f):Gy(a.serializer,f)})(n,e)}function L2(n,e,t){return n instanceof ju?BA(n,e):n instanceof Vu?FA(n,e):t}function zA(n,e){return n instanceof Vd?(function(i){return V_(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class jd extends wm{}class ju extends wm{constructor(e){super(),this.elements=e}}function BA(n,e){const t=HA(e);for(const i of n.elements)t.some((a=>gs(a,i)))||t.push(i);return{arrayValue:{values:t}}}class Vu extends wm{constructor(e){super(),this.elements=e}}function FA(n,e){let t=HA(e);for(const i of n.elements)t=t.filter((a=>!gs(a,i)));return{arrayValue:{values:t}}}class Vd extends wm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function jw(n){return kt(n.integerValue||n.doubleValue)}function HA(n){return By(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function j2(n,e){return n.field.isEqual(e.field)&&(function(i,a){return i instanceof ju&&a instanceof ju||i instanceof Vu&&a instanceof Vu?bl(i.elements,a.elements,gs):i instanceof Vd&&a instanceof Vd?gs(i.Ae,a.Ae):i instanceof jd&&a instanceof jd})(n.transform,e.transform)}class V2{constructor(e,t){this.version=e,this.transformResults=t}}class Qs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qs}static exists(e){return new Qs(void 0,e)}static updateTime(e){return new Qs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _d(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Cm{}function qA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new YA(n.key,Qs.none()):new rh(n.key,n.data,Qs.none());{const t=n.data,i=pi.empty();let a=new Jt(_n.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?i.delete(l):i.set(l,u),a=a.add(l)}return new fo(n.key,i,new Li(a.toArray()),Qs.none())}}function U2(n,e,t){n instanceof rh?(function(a,l,u){const f=a.value.clone(),m=Uw(a.fieldTransforms,l,u.transformResults);f.setAll(m),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):n instanceof fo?(function(a,l,u){if(!_d(a.precondition,l))return void l.convertToUnknownDocument(u.version);const f=Uw(a.fieldTransforms,l,u.transformResults),m=l.data;m.setAll(GA(a)),m.setAll(f),l.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(n,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Eu(n,e,t,i){return n instanceof rh?(function(l,u,f,m){if(!_d(l.precondition,u))return f;const g=l.value.clone(),y=zw(l.fieldTransforms,m,u);return g.setAll(y),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),null})(n,e,t,i):n instanceof fo?(function(l,u,f,m){if(!_d(l.precondition,u))return f;const g=zw(l.fieldTransforms,m,u),y=u.data;return y.setAll(GA(l)),y.setAll(g),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(l,u,f){return _d(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(n,e,t)}function z2(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),l=zA(i.transform,a||null);l!=null&&(t===null&&(t=pi.empty()),t.set(i.field,l))}return t||null}function Vw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&bl(i,a,((l,u)=>j2(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class rh extends Cm{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class fo extends Cm{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function GA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function Uw(n,e,t){const i=new Map;et(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],u=l.transform,f=e.data.field(l.field);i.set(l.field,L2(u,f,t[a]))}return i}function zw(n,e,t){const i=new Map;for(const a of n){const l=a.transform,u=t.data.field(a.field);i.set(a.field,M2(l,u,e))}return i}class YA extends Cm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class B2 extends Cm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class F2{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&U2(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Eu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Eu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=VA();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let f=this.applyToLocalView(u,l.mutatedFields);f=t.has(a.key)?null:f;const m=qA(u,f);m!==null&&i.set(a.key,m),u.isValidDocument()||u.convertToNoDocument(Ce.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),qe())}isEqual(e){return this.batchId===e.batchId&&bl(this.mutations,e.mutations,((t,i)=>Vw(t,i)))&&bl(this.baseMutations,e.baseMutations,((t,i)=>Vw(t,i)))}}class Yy{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){et(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return x2})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,i[u].version);return new Yy(e,t,i,a)}}class H2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class q2{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ht,Ye;function G2(n){switch(n){case re.OK:return we(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return we(15467,{code:n})}}function KA(n){if(n===void 0)return sr("GRPC error has no .code"),re.UNKNOWN;switch(n){case Ht.OK:return re.OK;case Ht.CANCELLED:return re.CANCELLED;case Ht.UNKNOWN:return re.UNKNOWN;case Ht.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Ht.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Ht.INTERNAL:return re.INTERNAL;case Ht.UNAVAILABLE:return re.UNAVAILABLE;case Ht.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Ht.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Ht.NOT_FOUND:return re.NOT_FOUND;case Ht.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Ht.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Ht.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Ht.ABORTED:return re.ABORTED;case Ht.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Ht.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Ht.DATA_LOSS:return re.DATA_LOSS;default:return we(39323,{code:n})}}(Ye=Ht||(Ht={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";function Y2(){return new TextEncoder}const K2=new Jr([4294967295,4294967295],0);function Bw(n){const e=Y2().encode(n),t=new cA;return t.update(e),new Uint8Array(t.digest())}function Fw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Jr([t,i],0),new Jr([a,l],0)]}class Ky{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new uu(`Invalid padding: ${t}`);if(i<0)throw new uu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new uu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new uu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Jr.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(Jr.fromNumber(i)));return a.compare(K2)===1&&(a=new Jr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Bw(e),[i,a]=Fw(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,a,l);if(!this.we(u))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new Ky(l,a,t);return i.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const t=Bw(e),[i,a]=Fw(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,a,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class uu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Am{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,ah.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Am(Ce.min(),a,new Yt(He),rr(),qe())}}class ah{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new ah(i,t,qe(),qe(),qe())}}class yd{constructor(e,t,i,a){this.be=e,this.removedTargetIds=t,this.key=i,this.De=a}}class QA{constructor(e,t){this.targetId=e,this.Ce=t}}class WA{constructor(e,t,i=yn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class Hw{constructor(){this.ve=0,this.Fe=qw(),this.Me=yn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=qe(),t=qe(),i=qe();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:we(38017,{changeType:l})}})),new ah(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=qw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,et(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Q2{constructor(e){this.Ge=e,this.ze=new Map,this.je=rr(),this.Je=nd(),this.He=nd(),this.Ye=new Yt(He)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(z_(l))if(i===0){const u=new Te(l.path);this.et(t,u,wn.newNoDocument(u,Ce.min()))}else et(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const f=this.ut(e),m=f?this.ct(f,e,u):1;if(m!==0){this.it(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let u,f;try{u=oa(i).toUint8Array()}catch(m){if(m instanceof EA)return Sl("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new Ky(u,a,l)}catch(m){return Sl(m instanceof uu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const f=this.ot(u);if(f){if(l.current&&z_(f.target)){const m=new Te(f.target.path);this.It(m).has(u)||this.Et(u,m)||this.et(u,m,wn.newNoDocument(m,e))}l.Be&&(t.set(u,l.ke()),l.qe())}}));let i=qe();this.He.forEach(((l,u)=>{let f=!0;u.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new Am(e,t,this.Ye,this.je,i);return this.je=rr(),this.Je=nd(),this.He=nd(),this.Ye=new Yt(He),a}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Hw,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Jt(He),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Jt(He),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Hw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function nd(){return new Yt(Te.comparator)}function qw(){return new Yt(Te.comparator)}const W2={asc:"ASCENDING",desc:"DESCENDING"},$2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},X2={and:"AND",or:"OR"};class J2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function F_(n,e){return n.useProto3Json||vm(e)?e:{value:e}}function Ud(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $A(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Z2(n,e){return Ud(n,e.toTimestamp())}function ds(n){return et(!!n,49232),Ce.fromTimestamp((function(t){const i=aa(t);return new _t(i.seconds,i.nanos)})(n))}function Qy(n,e){return H_(n,e).canonicalString()}function H_(n,e){const t=(function(a){return new St(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function XA(n){const e=St.fromString(n);return et(nR(e),10190,{key:e.toString()}),e}function q_(n,e){return Qy(n.databaseId,e.path)}function l_(n,e){const t=XA(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te(ZA(t))}function JA(n,e){return Qy(n.databaseId,e)}function eL(n){const e=XA(n);return e.length===4?St.emptyPath():ZA(e)}function G_(n){return new St(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ZA(n){return et(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Gw(n,e,t){return{name:q_(n,e),fields:t.value.mapValue.fields}}function tL(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:we(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,y){return g.useProto3Json?(et(y===void 0||typeof y=="string",58123),yn.fromBase64String(y||"")):(et(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),yn.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(g){const y=g.code===void 0?re.UNKNOWN:KA(g.code);return new ge(y,g.message||"")})(u);t=new WA(i,a,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=l_(n,i.document.name),l=ds(i.document.updateTime),u=i.document.createTime?ds(i.document.createTime):Ce.min(),f=new pi({mapValue:{fields:i.document.fields}}),m=wn.newFoundDocument(a,l,u,f),g=i.targetIds||[],y=i.removedTargetIds||[];t=new yd(g,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=l_(n,i.document),l=i.readTime?ds(i.readTime):Ce.min(),u=wn.newNoDocument(a,l),f=i.removedTargetIds||[];t=new yd([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=l_(n,i.document),l=i.removedTargetIds||[];t=new yd([],l,a,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,u=new q2(a,l),f=i.targetId;t=new QA(f,u)}}return t}function nL(n,e){let t;if(e instanceof rh)t={update:Gw(n,e.key,e.value)};else if(e instanceof YA)t={delete:q_(n,e.key)};else if(e instanceof fo)t={update:Gw(n,e.key,e.data),updateMask:hL(e.fieldMask)};else{if(!(e instanceof B2))return we(16599,{Vt:e.type});t={verify:q_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,u){const f=u.transform;if(f instanceof jd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof ju)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Vu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Vd)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw we(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:Z2(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:we(27497)})(n,e.precondition)),t}function iL(n,e){return n&&n.length>0?(et(e!==void 0,14353),n.map((t=>(function(a,l){let u=a.updateTime?ds(a.updateTime):ds(l);return u.isEqual(Ce.min())&&(u=ds(l)),new V2(u,a.transformResults||[])})(t,e)))):[]}function sL(n,e){return{documents:[JA(n,e.path)]}}function rL(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=JA(n,a);const l=(function(g){if(g.length!==0)return tR(_s.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(g){if(g.length!==0)return g.map((y=>(function(b){return{field:cl(b.field),direction:lL(b.dir)}})(y)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=F_(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function aL(n){let e=eL(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){et(i===1,65062);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=(function(E){const b=eR(E);return b instanceof _s&&xA(b)?b.getFilters():[b]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((b=>(function(I){return new Ld(ul(I.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(b)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let b;return b=typeof E=="object"?E.value:E,vm(b)?null:b})(t.limit));let m=null;t.startAt&&(m=(function(E){const b=!!E.before,A=E.values||[];return new Md(A,b)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const b=!E.before,A=E.values||[];return new Md(A,b)})(t.endAt)),w2(e,a,u,l,f,"F",m,g)}function oL(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function eR(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=ul(t.unaryFilter.field);return Xt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=ul(t.unaryFilter.field);return Xt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ul(t.unaryFilter.field);return Xt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ul(t.unaryFilter.field);return Xt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Xt.create(ul(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return _s.create(t.compositeFilter.filters.map((i=>eR(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(n):we(30097,{filter:n})}function lL(n){return W2[n]}function cL(n){return $2[n]}function uL(n){return X2[n]}function cl(n){return{fieldPath:n.canonicalString()}}function ul(n){return _n.fromServerFormat(n.fieldPath)}function tR(n){return n instanceof Xt?(function(t){if(t.op==="=="){if(Dw(t.value))return{unaryFilter:{field:cl(t.field),op:"IS_NAN"}};if(Ow(t.value))return{unaryFilter:{field:cl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Dw(t.value))return{unaryFilter:{field:cl(t.field),op:"IS_NOT_NAN"}};if(Ow(t.value))return{unaryFilter:{field:cl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cl(t.field),op:cL(t.op),value:t.value}}})(n):n instanceof _s?(function(t){const i=t.getFilters().map((a=>tR(a)));return i.length===1?i[0]:{compositeFilter:{op:uL(t.op),filters:i}}})(n):we(54877,{filter:n})}function hL(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function nR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Kr{constructor(e,t,i,a,l=Ce.min(),u=Ce.min(),f=yn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new Kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class fL{constructor(e){this.yt=e}}function dL(n){const e=aL({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?B_(e,e.limit,"L"):e}class mL{constructor(){this.Cn=new pL}addToCollectionParentIndex(e,t){return this.Cn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(ra.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(ra.min())}updateCollectionGroup(e,t,i){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class pL{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new Jt(St.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Jt(St.comparator)).toArray()}}const Yw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},iR=41943040;class Un{static withCacheSize(e){return new Un(e,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}Un.DEFAULT_COLLECTION_PERCENTILE=10,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Un.DEFAULT=new Un(iR,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Un.DISABLED=new Un(-1,0,0);class Al{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Al(0)}static cr(){return new Al(-1)}}const Kw="LruGarbageCollector",gL=1048576;function Qw([n,e],[t,i]){const a=He(n,t);return a===0?He(e,i):a}class _L{constructor(e){this.Ir=e,this.buffer=new Jt(Qw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Qw(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class yL{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(Kw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Bl(t)?ue(Kw,"Ignoring IndexedDB error during garbage collection: ",t):await zl(t)}await this.Vr(3e5)}))}}class vL{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(ym.ce);const i=new _L(t);return this.mr.forEachTarget(e,(a=>i.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>i.Ar(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(Yw)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yw):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,a,l,u,f,m,g;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,u=Date.now(),this.nthSequenceNumber(e,a)))).next((E=>(i=E,f=Date.now(),this.removeTargets(e,i,t)))).next((E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(g=Date.now(),ol()<=Ue.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${a} in `+(f-u)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${E} documents in `+(g-m)+`ms
Total Duration: ${g-y}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E}))))}}function EL(n,e){return new vL(n,e)}class TL{constructor(){this.changes=new ho((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ie.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class SL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class bL{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&Eu(i.mutation,a,Li.empty(),_t.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,qe()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=qe()){const a=Xa();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let u=cu();return l.forEach(((f,m)=>{u=u.insert(f,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=Xa();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,qe())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,i,a){let l=rr();const u=vu(),f=(function(){return vu()})();return t.forEach(((m,g)=>{const y=i.get(g.key);a.has(g.key)&&(y===void 0||y.mutation instanceof fo)?l=l.insert(g.key,g):y!==void 0?(u.set(g.key,y.mutation.getFieldMask()),Eu(y.mutation,g,y.mutation.getFieldMask(),_t.now())):u.set(g.key,Li.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((g,y)=>u.set(g,y))),t.forEach(((g,y)=>f.set(g,new SL(y,u.get(g)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=vu();let a=new Yt(((u,f)=>u-f)),l=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((m=>{const g=t.get(m);if(g===null)return;let y=i.get(m)||Li.empty();y=f.applyToLocalView(g,y),i.set(m,y);const E=(a.get(f.batchId)||qe()).add(m);a=a.insert(f.batchId,E)}))})).next((()=>{const u=[],f=a.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),g=m.key,y=m.value,E=VA();y.forEach((b=>{if(!l.has(b)){const A=qA(t.get(b),i.get(b));A!==null&&E.set(b,A),l=l.add(b)}})),u.push(this.documentOverlayCache.saveOverlays(e,g,E))}return ie.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return(function(u){return Te.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):C2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):ie.resolve(Xa());let f=ku,m=l;return u.next((g=>ie.forEach(g,((y,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(y)?ie.resolve():this.remoteDocumentCache.getEntry(e,y).next((b=>{m=m.insert(y,b)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,m,g,qe()))).next((y=>({batchId:f,changes:jA(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next((i=>{let a=cu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let u=cu();return this.indexManager.getCollectionParents(e,l).next((f=>ie.forEach(f,(m=>{const g=(function(E,b){return new Tm(b,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,i,a).next((y=>{y.forEach(((E,b)=>{u=u.insert(E,b)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((u=>{l.forEach(((m,g)=>{const y=g.getKey();u.get(y)===null&&(u=u.insert(y,wn.newInvalidDocument(y)))}));let f=cu();return u.forEach(((m,g)=>{const y=l.get(m);y!==void 0&&Eu(y.mutation,g,Li.empty(),_t.now()),bm(t,g)&&(f=f.insert(m,g))})),f}))}}class wL{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ie.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:ds(a.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:dL(a.bundledQuery),readTime:ds(a.readTime)}})(t)),ie.resolve()}}class CL{constructor(){this.overlays=new Yt(Te.comparator),this.qr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Xa();return ie.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.St(e,t,l)})),ie.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.qr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),ie.resolve()}getOverlaysForCollection(e,t,i){const a=Xa(),l=t.length+1,u=new Te(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const m=f.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>i&&a.set(m.getKey(),m)}return ie.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new Yt(((g,y)=>g-y));const u=this.overlays.getIterator();for(;u.hasNext();){const g=u.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>i){let y=l.get(g.largestBatchId);y===null&&(y=Xa(),l=l.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const f=Xa(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,y)=>f.set(g,y))),!(f.size()>=a)););return ie.resolve(f)}St(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const u=this.qr.get(a.largestBatchId).delete(i.key);this.qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new H2(t,i));let l=this.qr.get(t);l===void 0&&(l=qe(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}class AL{constructor(){this.sessionToken=yn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}class Wy{constructor(){this.Qr=new Jt(sn.$r),this.Ur=new Jt(sn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new sn(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new sn(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Te(new St([])),i=new sn(t,e),a=new sn(t,e+1),l=[];return this.Ur.forEachInRange([i,a],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Te(new St([])),i=new sn(t,e),a=new sn(t,e+1);let l=qe();return this.Ur.forEachInRange([i,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new sn(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class sn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Te.comparator(e.key,t.key)||He(e.Yr,t.Yr)}static Kr(e,t){return He(e.Yr,t.Yr)||Te.comparator(e.key,t.key)}}class RL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Jt(sn.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new F2(l,t,i,a);this.mutationQueue.push(u);for(const f of a)this.Zr=this.Zr.add(new sn(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ie.resolve(u)}lookupMutationBatch(e,t){return ie.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.ei(i),l=a<0?0:a;return ie.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?Uy:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new sn(t,0),a=new sn(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,a],(u=>{const f=this.Xr(u.Yr);l.push(f)})),ie.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Jt(He);return t.forEach((a=>{const l=new sn(a,0),u=new sn(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(f=>{i=i.add(f.Yr)}))})),ie.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;Te.isDocumentKey(l)||(l=l.child(""));const u=new sn(new Te(l),0);let f=new Jt(He);return this.Zr.forEachWhile((m=>{const g=m.key.path;return!!i.isPrefixOf(g)&&(g.length===a&&(f=f.add(m.Yr)),!0)}),u),ie.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((i=>{const a=this.Xr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){et(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ie.forEach(t.mutations,(a=>{const l=new sn(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new sn(t,0),a=this.Zr.firstAfterOrEqual(i);return ie.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class IL{constructor(e){this.ri=e,this.docs=(function(){return new Yt(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,u=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ie.resolve(i?i.document.mutableCopy():wn.newInvalidDocument(t))}getEntries(e,t){let i=rr();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():wn.newInvalidDocument(a))})),ie.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=rr();const u=t.path,f=new Te(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:g,value:{document:y}}=m.getNext();if(!u.isPrefixOf(g.path))break;g.path.length>u.length+1||n2(t2(y),i)<=0||(a.has(y.key)||bm(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return ie.resolve(l)}getAllFromCollectionGroup(e,t,i,a){we(9500)}ii(e,t){return ie.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new NL(this)}getSize(e){return ie.resolve(this.size)}}class NL extends TL{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(i)})),ie.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class xL{constructor(e){this.persistence=e,this.si=new ho((t=>Fy(t)),Hy),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new Wy,this.targetCount=0,this.ai=Al.ur()}forEachTarget(e,t){return this.si.forEach(((i,a)=>t(a))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),ie.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Al(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Pr(t),ie.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.si.forEach(((u,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),ie.waitFor(l).next((()=>a))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return ie.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),ie.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),ie.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return ie.resolve(i)}containsKey(e,t){return ie.resolve(this._i.containsKey(t))}}class sR{constructor(e,t){this.ui={},this.overlays={},this.ci=new ym(0),this.li=!1,this.li=!0,this.hi=new AL,this.referenceDelegate=e(this),this.Pi=new xL(this),this.indexManager=new mL,this.remoteDocumentCache=(function(a){return new IL(a)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new fL(t),this.Ii=new wL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new CL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new RL(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ue("MemoryPersistence","Starting transaction:",e);const a=new OL(this.ci.next());return this.referenceDelegate.Ei(),i(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return ie.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class OL extends s2{constructor(e){super(),this.currentSequenceNumber=e}}class $y{constructor(e){this.persistence=e,this.Ri=new Wy,this.Vi=null}static mi(e){return new $y(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),ie.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(i=>{const a=Te.fromPath(i);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Ce.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ie.or([()=>ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class zd{constructor(e,t){this.persistence=e,this.pi=new ho((i=>o2(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=EL(this,t)}static mi(e,t){return new zd(e,t)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return ie.forEach(this.pi,((i,a)=>this.br(e,i,a).next((l=>l?ie.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(u=>this.br(e,u,t).next((f=>{f||(i++,l.removeEntry(u,Ce.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=pd(e.data.value)),t}br(e,t,i){return ie.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return ie.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Xy{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=a}static As(e,t){let i=qe(),a=qe();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Xy(e,t.fromCache,i,a)}}class DL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class kL{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return eD()?8:r2(Cn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.ys(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,t,a,i).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new DL;return this.Ss(e,t,u).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,u,f.size)}))})).next((()=>l.result))}bs(e,t,i,a){return i.documentReadCount<this.fs?(ol()<=Ue.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",ll(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(ol()<=Ue.DEBUG&&ue("QueryEngine","Query:",ll(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.gs*a?(ol()<=Ue.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",ll(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fs(t))):ie.resolve())}ys(e,t){if(Lw(t))return ie.resolve(null);let i=fs(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=B_(t,null,"F"),i=fs(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const u=qe(...l);return this.ps.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,i).next((m=>{const g=this.Ds(t,f);return this.Cs(t,g,u,m.readTime)?this.ys(e,B_(t,null,"F")):this.vs(e,g,t,m)}))))})))))}ws(e,t,i,a){return Lw(t)||a.isEqual(Ce.min())?ie.resolve(null):this.ps.getDocuments(e,i).next((l=>{const u=this.Ds(t,l);return this.Cs(t,u,i,a)?ie.resolve(null):(ol()<=Ue.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),ll(t)),this.vs(e,u,t,e2(a,ku)).next((f=>f)))}))}Ds(e,t){let i=new Jt(MA(e));return t.forEach(((a,l)=>{bm(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,i){return ol()<=Ue.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",ll(t)),this.ps.getDocumentsMatchingQuery(e,t,ra.min(),i)}vs(e,t,i,a){return this.ps.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}const Jy="LocalStore",PL=3e8;class ML{constructor(e,t,i,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new Yt(He),this.xs=new ho((l=>Fy(l)),Hy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bL(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function LL(n,e,t,i){return new ML(n,e,t,i)}async function rR(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const u=[],f=[];let m=qe();for(const g of a){u.push(g.batchId);for(const y of g.mutations)m=m.add(y.key)}for(const g of l){f.push(g.batchId);for(const y of g.mutations)m=m.add(y.key)}return t.localDocuments.getDocuments(i,m).next((g=>({Ls:g,removedBatchIds:u,addedBatchIds:f})))}))}))}function jL(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,m,g,y){const E=g.batch,b=E.keys();let A=ie.resolve();return b.forEach((I=>{A=A.next((()=>y.getEntry(m,I))).next((V=>{const L=g.docVersions.get(I);et(L!==null,48541),V.version.compareTo(L)<0&&(E.applyToRemoteDocument(V,g),V.isValidDocument()&&(V.setReadTime(g.commitVersion),y.addEntry(V)))}))})),A.next((()=>f.mutationQueue.removeMutationBatch(m,E)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let m=qe();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(m=m.add(f.batch.mutations[g].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function aR(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function VL(n,e){const t=Re(n),i=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const f=[];e.targetChanges.forEach(((y,E)=>{const b=a.get(E);if(!b)return;f.push(t.Pi.removeMatchingKeys(l,y.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,y.addedDocuments,E))));let A=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?A=A.withResumeToken(yn.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):y.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(y.resumeToken,i)),a=a.insert(E,A),(function(V,L,X){return V.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=PL?!0:X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0})(b,A,y)&&f.push(t.Pi.updateTargetData(l,A))}));let m=rr(),g=qe();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))})),f.push(UL(l,u,e.documentUpdates).next((y=>{m=y.ks,g=y.qs}))),!i.isEqual(Ce.min())){const y=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(y)}return ie.waitFor(f).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,g))).next((()=>m))})).then((l=>(t.Ms=a,l)))}function UL(n,e,t){let i=qe(),a=qe();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let u=rr();return t.forEach(((f,m)=>{const g=l.get(f);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(f)),m.isNoDocument()&&m.version.isEqual(Ce.min())?(e.removeEntry(f,m.readTime),u=u.insert(f,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),u=u.insert(f,m)):ue(Jy,"Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",m.version)})),{ks:u,qs:a}}))}function zL(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Uy),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function BL(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.Pi.getTargetData(i,e).next((l=>l?(a=l,ie.resolve(a)):t.Pi.allocateTargetId(i).next((u=>(a=new Kr(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.Ms.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Y_(n,e,t){const i=Re(n),a=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(u=>i.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!Bl(u))throw u;ue(Jy,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(a.target)}function Ww(n,e,t){const i=Re(n);let a=Ce.min(),l=qe();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,g,y){const E=Re(m),b=E.xs.get(y);return b!==void 0?ie.resolve(E.Ms.get(b)):E.Pi.getTargetData(g,y)})(i,u,fs(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,f.targetId).next((m=>{l=m}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,t?a:Ce.min(),t?l:qe()))).next((f=>(FL(i,R2(e),f),{documents:f,Qs:l})))))}function FL(n,e,t){let i=n.Os.get(e)||Ce.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Os.set(e,i)}class $w{constructor(){this.activeTargetIds=k2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class HL{constructor(){this.Mo=new $w,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new $w,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class qL{Oo(e){}shutdown(){}}const Xw="ConnectivityMonitor";class Jw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(Xw,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(Xw,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let id=null;function K_(){return id===null?id=(function(){return 268435456+Math.round(2147483648*Math.random())})():id++,"0x"+id.toString(16)}const c_="RestConnection",GL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${a}`,this.Wo=this.databaseId.database===kd?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Go(e,t,i,a,l){const u=K_(),f=this.zo(e,t.toUriEncodedString());ue(c_,`Sending RPC '${e}' ${u}:`,f,i);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,l);const{host:g}=new URL(f),y=vs(g);return this.Jo(e,f,m,i,y).then((E=>(ue(c_,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw Sl(c_,`RPC '${e}' ${u} failed with error: `,E,"url: ",f,"request:",i),E}))}Ho(e,t,i,a,l,u){return this.Go(e,t,i,a,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ul})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const i=GL[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}class KL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Sn="WebChannelConnection";class QL extends YL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,a,l){const u=K_();return new Promise(((f,m)=>{const g=new uA;g.setWithCredentials(!0),g.listenOnce(hA.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case md.NO_ERROR:const E=g.getResponseJson();ue(Sn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),f(E);break;case md.TIMEOUT:ue(Sn,`RPC '${e}' ${u} timed out`),m(new ge(re.DEADLINE_EXCEEDED,"Request time out"));break;case md.HTTP_ERROR:const b=g.getStatus();if(ue(Sn,`RPC '${e}' ${u} failed with status:`,b,"response text:",g.getResponseText()),b>0){let A=g.getResponseJson();Array.isArray(A)&&(A=A[0]);const I=A?.error;if(I&&I.status&&I.message){const V=(function(X){const K=X.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(K)>=0?K:re.UNKNOWN})(I.status);m(new ge(V,I.message))}else m(new ge(re.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new ge(re.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:u,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{ue(Sn,`RPC '${e}' ${u} completed.`)}}));const y=JSON.stringify(a);ue(Sn,`RPC '${e}' ${u} sending request:`,a),g.send(t,"POST",y,i,15)}))}T_(e,t,i){const a=K_(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=mA(),f=dA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const y=l.join("");ue(Sn,`Creating RPC '${e}' stream ${a}: ${y}`,m);const E=u.createWebChannel(y,m);this.I_(E);let b=!1,A=!1;const I=new KL({Yo:L=>{A?ue(Sn,`Not sending because RPC '${e}' stream ${a} is closed:`,L):(b||(ue(Sn,`Opening RPC '${e}' stream ${a} transport.`),E.open(),b=!0),ue(Sn,`RPC '${e}' stream ${a} sending:`,L),E.send(L))},Zo:()=>E.close()}),V=(L,X,K)=>{L.listen(X,($=>{try{K($)}catch(ae){setTimeout((()=>{throw ae}),0)}}))};return V(E,lu.EventType.OPEN,(()=>{A||(ue(Sn,`RPC '${e}' stream ${a} transport opened.`),I.o_())})),V(E,lu.EventType.CLOSE,(()=>{A||(A=!0,ue(Sn,`RPC '${e}' stream ${a} transport closed`),I.a_(),this.E_(E))})),V(E,lu.EventType.ERROR,(L=>{A||(A=!0,Sl(Sn,`RPC '${e}' stream ${a} transport errored. Name:`,L.name,"Message:",L.message),I.a_(new ge(re.UNAVAILABLE,"The operation could not be completed")))})),V(E,lu.EventType.MESSAGE,(L=>{if(!A){const X=L.data[0];et(!!X,16349);const K=X,$=K?.error||K[0]?.error;if($){ue(Sn,`RPC '${e}' stream ${a} received error:`,$);const ae=$.status;let pe=(function(R){const N=Ht[R];if(N!==void 0)return KA(N)})(ae),ve=$.message;pe===void 0&&(pe=re.INTERNAL,ve="Unknown error status: "+ae+" with message "+$.message),A=!0,I.a_(new ge(pe,ve)),E.close()}else ue(Sn,`RPC '${e}' stream ${a} received:`,X),I.u_(X)}})),V(f,fA.STAT_EVENT,(L=>{L.stat===P_.PROXY?ue(Sn,`RPC '${e}' stream ${a} detected buffering proxy`):L.stat===P_.NOPROXY&&ue(Sn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{I.__()}),0),I}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function u_(){return typeof document<"u"?document:null}function Rm(n){return new J2(n,!0)}class oR{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&ue("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Zw="PersistentStream";class lR{constructor(e,t,i,a,l,u,f,m){this.Mi=e,this.S_=i,this.b_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new oR(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(sr(t.toString()),sr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new ge(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(Zw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ue(Zw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class WL extends lR{constructor(e,t,i,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=tL(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ce.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ce.min():u.readTime?ds(u.readTime):Ce.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=G_(this.serializer),t.addTarget=(function(l,u){let f;const m=u.target;if(f=z_(m)?{documents:sL(l,m)}:{query:rL(l,m).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=$A(l,u.resumeToken);const g=F_(l,u.expectedCount);g!==null&&(f.expectedCount=g)}else if(u.snapshotVersion.compareTo(Ce.min())>0){f.readTime=Ud(l,u.snapshotVersion.toTimestamp());const g=F_(l,u.expectedCount);g!==null&&(f.expectedCount=g)}return f})(this.serializer,e);const i=oL(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=G_(this.serializer),t.removeTarget=e,this.q_(t)}}class $L extends lR{constructor(e,t,i,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=iL(e.writeResults,e.commitTime),i=ds(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=G_(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>nL(this.serializer,i)))};this.q_(t)}}class XL{}class JL extends XL{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,H_(t,i),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(re.UNKNOWN,l.toString())}))}Ho(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Ho(e,H_(t,i),a,u,f,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ge(re.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class ZL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(sr(t),this.aa=!1):ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const io="RemoteStore";class ej{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{mo(this)&&(ue(io,"Restarting streams for network reachability change."),await(async function(m){const g=Re(m);g.Ea.add(4),await oh(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Im(g)})(this))}))})),this.Ra=new ZL(i,a)}}async function Im(n){if(mo(n))for(const e of n.da)await e(!0)}async function oh(n){for(const e of n.da)await e(!1)}function cR(n,e){const t=Re(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),nv(t)?tv(t):Fl(t).O_()&&ev(t,e))}function Zy(n,e){const t=Re(n),i=Fl(t);t.Ia.delete(e),i.O_()&&uR(t,e),t.Ia.size===0&&(i.O_()?i.L_():mo(t)&&t.Ra.set("Unknown"))}function ev(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Fl(n).Y_(e)}function uR(n,e){n.Va.Ue(e),Fl(n).Z_(e)}function tv(n){n.Va=new Q2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Fl(n).start(),n.Ra.ua()}function nv(n){return mo(n)&&!Fl(n).x_()&&n.Ia.size>0}function mo(n){return Re(n).Ea.size===0}function hR(n){n.Va=void 0}async function tj(n){n.Ra.set("Online")}async function nj(n){n.Ia.forEach(((e,t)=>{ev(n,e)}))}async function ij(n,e){hR(n),nv(n)?(n.Ra.ha(e),tv(n)):n.Ra.set("Unknown")}async function sj(n,e,t){if(n.Ra.set("Online"),e instanceof WA&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const f of l.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,u),a.Ia.delete(f),a.Va.removeTarget(f))})(n,e)}catch(i){ue(io,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Bd(n,i)}else if(e instanceof yd?n.Va.Ze(e):e instanceof QA?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ce.min()))try{const i=await aR(n.localStore);t.compareTo(i)>=0&&await(function(l,u){const f=l.Va.Tt(u);return f.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.Ia.get(g);y&&l.Ia.set(g,y.withResumeToken(m.resumeToken,u))}})),f.targetMismatches.forEach(((m,g)=>{const y=l.Ia.get(m);if(!y)return;l.Ia.set(m,y.withResumeToken(yn.EMPTY_BYTE_STRING,y.snapshotVersion)),uR(l,m);const E=new Kr(y.target,m,g,y.sequenceNumber);ev(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){ue(io,"Failed to raise snapshot:",i),await Bd(n,i)}}async function Bd(n,e,t){if(!Bl(e))throw e;n.Ea.add(1),await oh(n),n.Ra.set("Offline"),t||(t=()=>aR(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ue(io,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Im(n)}))}function fR(n,e){return e().catch((t=>Bd(n,t,e)))}async function Nm(n){const e=Re(n),t=ca(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Uy;for(;rj(e);)try{const a=await zL(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,aj(e,a)}catch(a){await Bd(e,a)}dR(e)&&mR(e)}function rj(n){return mo(n)&&n.Ta.length<10}function aj(n,e){n.Ta.push(e);const t=ca(n);t.O_()&&t.X_&&t.ea(e.mutations)}function dR(n){return mo(n)&&!ca(n).x_()&&n.Ta.length>0}function mR(n){ca(n).start()}async function oj(n){ca(n).ra()}async function lj(n){const e=ca(n);for(const t of n.Ta)e.ea(t.mutations)}async function cj(n,e,t){const i=n.Ta.shift(),a=Yy.from(i,e,t);await fR(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await Nm(n)}async function uj(n,e){e&&ca(n).X_&&await(async function(i,a){if((function(u){return G2(u)&&u!==re.ABORTED})(a.code)){const l=i.Ta.shift();ca(i).B_(),await fR(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Nm(i)}})(n,e),dR(n)&&mR(n)}async function e0(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),ue(io,"RemoteStore received new credentials");const i=mo(t);t.Ea.add(3),await oh(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Im(t)}async function hj(n,e){const t=Re(n);e?(t.Ea.delete(2),await Im(t)):e||(t.Ea.add(2),await oh(t),t.Ra.set("Unknown"))}function Fl(n){return n.ma||(n.ma=(function(t,i,a){const l=Re(t);return l.sa(),new WL(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:tj.bind(null,n),t_:nj.bind(null,n),r_:ij.bind(null,n),H_:sj.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),nv(n)?tv(n):n.Ra.set("Unknown")):(await n.ma.stop(),hR(n))}))),n.ma}function ca(n){return n.fa||(n.fa=(function(t,i,a){const l=Re(t);return l.sa(),new $L(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:oj.bind(null,n),r_:uj.bind(null,n),ta:lj.bind(null,n),na:cj.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Nm(n)):(await n.fa.stop(),n.Ta.length>0&&(ue(io,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class iv{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const u=Date.now()+i,f=new iv(e,t,u,a,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sv(n,e){if(sr("AsyncQueue",`${e}: ${n}`),Bl(n))return new ge(re.UNAVAILABLE,`${e}: ${n}`);throw n}class _l{static emptySet(e){return new _l(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Te.comparator(t.key,i.key):(t,i)=>Te.comparator(t.key,i.key),this.keyedMap=cu(),this.sortedSet=new Yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof _l)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new _l;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class t0{constructor(){this.ga=new Yt(Te.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Rl{constructor(e,t,i,a,l,u,f,m,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,i,a,l){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new Rl(e,t,_l.emptySet(t),u,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}class fj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class dj{constructor(){this.queries=n0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=Re(t),l=a.queries;a.queries=n0(),l.forEach(((u,f)=>{for(const m of f.Sa)m.onError(i)}))})(this,new ge(re.ABORTED,"Firestore shutting down"))}}function n0(){return new ho((n=>PA(n)),Sm)}async function mj(n,e){const t=Re(n);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(i=2):(l=new fj,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const f=sv(u,`Initialization of query '${ll(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&rv(t)}async function pj(n,e){const t=Re(n),i=e.query;let a=3;const l=t.queries.get(i);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function gj(n,e){const t=Re(n);let i=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const f of u.Sa)f.Fa(a)&&(i=!0);u.wa=a}}i&&rv(t)}function _j(n,e,t){const i=Re(n),a=i.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);i.queries.delete(e)}function rv(n){n.Ca.forEach((e=>{e.next()}))}var Q_,i0;(i0=Q_||(Q_={})).Ma="default",i0.Cache="cache";class yj{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Rl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Rl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Q_.Cache}}class pR{constructor(e){this.key=e}}class gR{constructor(e){this.key=e}}class vj{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=qe(),this.mutatedKeys=qe(),this.eu=MA(e),this.tu=new _l(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new t0,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,f=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((y,E)=>{const b=a.get(y),A=bm(this.query,E)?E:null,I=!!b&&this.mutatedKeys.has(b.key),V=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let L=!1;b&&A?b.data.isEqual(A.data)?I!==V&&(i.track({type:3,doc:A}),L=!0):this.su(b,A)||(i.track({type:2,doc:A}),L=!0,(m&&this.eu(A,m)>0||g&&this.eu(A,g)<0)&&(f=!0)):!b&&A?(i.track({type:0,doc:A}),L=!0):b&&!A&&(i.track({type:1,doc:b}),L=!0,(m||g)&&(f=!0)),L&&(A?(u=u.add(A),l=V?l.add(y):l.delete(y)):(u=u.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),l=l.delete(y.key),i.track({type:1,doc:y})}return{tu:u,iu:i,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((y,E)=>(function(A,I){const V=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:L})}};return V(A)-V(I)})(y.type,E.type)||this.eu(y.doc,E.doc))),this.ou(i),a=a??!1;const f=t&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,g=m!==this.Za;return this.Za=m,u.length!==0||g?{snapshot:new Rl(this.query,e.tu,l,u,e.mutatedKeys,m===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new t0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=qe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new gR(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new pR(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=qe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Rl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const av="SyncEngine";class Ej{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Tj{constructor(e){this.key=e,this.hu=!1}}class Sj{constructor(e,t,i,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new ho((f=>PA(f)),Sm),this.Iu=new Map,this.Eu=new Set,this.du=new Yt(Te.comparator),this.Au=new Map,this.Ru=new Wy,this.Vu={},this.mu=new Map,this.fu=Al.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function bj(n,e,t=!0){const i=SR(n);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await _R(i,e,t,!0),a}async function wj(n,e){const t=SR(n);await _R(t,e,!0,!1)}async function _R(n,e,t,i){const a=await BL(n.localStore,fs(e)),l=a.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await Cj(n,e,l,u==="current",a.resumeToken)),n.isPrimaryClient&&t&&cR(n.remoteStore,a),f}async function Cj(n,e,t,i,a){n.pu=(E,b,A)=>(async function(V,L,X,K){let $=L.view.ru(X);$.Cs&&($=await Ww(V.localStore,L.query,!1).then((({documents:O})=>L.view.ru(O,$))));const ae=K&&K.targetChanges.get(L.targetId),pe=K&&K.targetMismatches.get(L.targetId)!=null,ve=L.view.applyChanges($,V.isPrimaryClient,ae,pe);return r0(V,L.targetId,ve.au),ve.snapshot})(n,E,b,A);const l=await Ww(n.localStore,e,!0),u=new vj(e,l.Qs),f=u.ru(l.documents),m=ah.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),g=u.applyChanges(f,n.isPrimaryClient,m);r0(n,t,g.au);const y=new Ej(e,t,u);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function Aj(n,e,t){const i=Re(n),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((u=>!Sm(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Y_(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&Zy(i.remoteStore,a.targetId),W_(i,a.targetId)})).catch(zl)):(W_(i,a.targetId),await Y_(i.localStore,a.targetId,!0))}async function Rj(n,e){const t=Re(n),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Zy(t.remoteStore,i.targetId))}async function Ij(n,e,t){const i=Mj(n);try{const a=await(function(u,f){const m=Re(u),g=_t.now(),y=f.reduce(((A,I)=>A.add(I.key)),qe());let E,b;return m.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let I=rr(),V=qe();return m.Ns.getEntries(A,y).next((L=>{I=L,I.forEach(((X,K)=>{K.isValidDocument()||(V=V.add(X))}))})).next((()=>m.localDocuments.getOverlayedDocuments(A,I))).next((L=>{E=L;const X=[];for(const K of f){const $=z2(K,E.get(K.key).overlayedDocument);$!=null&&X.push(new fo(K.key,$,RA($.value.mapValue),Qs.exists(!0)))}return m.mutationQueue.addMutationBatch(A,g,X,f)})).next((L=>{b=L;const X=L.applyToLocalDocumentSet(E,V);return m.documentOverlayCache.saveOverlays(A,L.batchId,X)}))})).then((()=>({batchId:b.batchId,changes:jA(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(u,f,m){let g=u.Vu[u.currentUser.toKey()];g||(g=new Yt(He)),g=g.insert(f,m),u.Vu[u.currentUser.toKey()]=g})(i,a.batchId,t),await lh(i,a.changes),await Nm(i.remoteStore)}catch(a){const l=sv(a,"Failed to persist write");t.reject(l)}}async function yR(n,e){const t=Re(n);try{const i=await VL(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Au.get(l);u&&(et(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?et(u.hu,14607):a.removedDocuments.size>0&&(et(u.hu,42227),u.hu=!1))})),await lh(t,i,e)}catch(i){await zl(i)}}function s0(n,e,t){const i=Re(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,u)=>{const f=u.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(u,f){const m=Re(u);m.onlineState=f;let g=!1;m.queries.forEach(((y,E)=>{for(const b of E.Sa)b.va(f)&&(g=!0)})),g&&rv(m)})(i.eventManager,e),a.length&&i.Pu.H_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Nj(n,e,t){const i=Re(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let u=new Yt(Te.comparator);u=u.insert(l,wn.newNoDocument(l,Ce.min()));const f=qe().add(l),m=new Am(Ce.min(),new Map,new Yt(He),u,f);await yR(i,m),i.du=i.du.remove(l),i.Au.delete(e),ov(i)}else await Y_(i.localStore,e,!1).then((()=>W_(i,e,t))).catch(zl)}async function xj(n,e){const t=Re(n),i=e.batch.batchId;try{const a=await jL(t.localStore,e);ER(t,i,null),vR(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await lh(t,a)}catch(a){await zl(a)}}async function Oj(n,e,t){const i=Re(n);try{const a=await(function(u,f){const m=Re(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let y;return m.mutationQueue.lookupMutationBatch(g,f).next((E=>(et(E!==null,37113),y=E.keys(),m.mutationQueue.removeMutationBatch(g,E)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,y,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y))).next((()=>m.localDocuments.getDocuments(g,y)))}))})(i.localStore,e);ER(i,e,t),vR(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await lh(i,a)}catch(a){await zl(a)}}function vR(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function ER(n,e,t){const i=Re(n);let a=i.Vu[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.Vu[i.currentUser.toKey()]=a}}function W_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||TR(n,i)}))}function TR(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Zy(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),ov(n))}function r0(n,e,t){for(const i of t)i instanceof pR?(n.Ru.addReference(i.key,e),Dj(n,i)):i instanceof gR?(ue(av,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||TR(n,i.key)):we(19791,{wu:i})}function Dj(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(ue(av,"New document in limbo: "+t),n.Eu.add(i),ov(n))}function ov(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Te(St.fromString(e)),i=n.fu.next();n.Au.set(i,new Tj(t)),n.du=n.du.insert(t,i),cR(n.remoteStore,new Kr(fs(qy(t.path)),i,"TargetPurposeLimboResolution",ym.ce))}}async function lh(n,e,t){const i=Re(n),a=[],l=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,m)=>{u.push(i.pu(m,e,t).then((g=>{if((g||t)&&i.isPrimaryClient){const y=g?!g.fromCache:t?.targetChanges.get(m.targetId)?.current;i.sharedClientState.updateQueryState(m.targetId,y?"current":"not-current")}if(g){a.push(g);const y=Xy.As(m.targetId,g);l.push(y)}})))})),await Promise.all(u),i.Pu.H_(a),await(async function(m,g){const y=Re(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ie.forEach(g,(b=>ie.forEach(b.Es,(A=>y.persistence.referenceDelegate.addReference(E,b.targetId,A))).next((()=>ie.forEach(b.ds,(A=>y.persistence.referenceDelegate.removeReference(E,b.targetId,A)))))))))}catch(E){if(!Bl(E))throw E;ue(Jy,"Failed to update sequence numbers: "+E)}for(const E of g){const b=E.targetId;if(!E.fromCache){const A=y.Ms.get(b),I=A.snapshotVersion,V=A.withLastLimboFreeSnapshotVersion(I);y.Ms=y.Ms.insert(b,V)}}})(i.localStore,l))}async function kj(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){ue(av,"User change. New user:",e.toKey());const i=await rR(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((f=>{f.forEach((m=>{m.reject(new ge(re.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await lh(t,i.Ls)}}function Pj(n,e){const t=Re(n),i=t.Au.get(e);if(i&&i.hu)return qe().add(i.key);{let a=qe();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const f=t.Tu.get(u);a=a.unionWith(f.view.nu)}return a}}function SR(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=yR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Pj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Nj.bind(null,e),e.Pu.H_=gj.bind(null,e.eventManager),e.Pu.yu=_j.bind(null,e.eventManager),e}function Mj(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Oj.bind(null,e),e}class Fd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return LL(this.persistence,new kL,e.initialUser,this.serializer)}Cu(e){return new sR($y.mi,this.serializer)}Du(e){return new HL}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fd.provider={build:()=>new Fd};class Lj extends Fd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){et(this.persistence.referenceDelegate instanceof zd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new yL(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Un.withCacheSize(this.cacheSizeBytes):Un.DEFAULT;return new sR((i=>zd.mi(i,t)),this.serializer)}}class $_{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>s0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=kj.bind(null,this.syncEngine),await hj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new dj})()}createDatastore(e){const t=Rm(e.databaseInfo.databaseId),i=(function(l){return new QL(l)})(e.databaseInfo);return(function(l,u,f,m){return new JL(l,u,f,m)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,u,f){return new ej(i,a,l,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>s0(this.syncEngine,t,0)),(function(){return Jw.v()?new Jw:new qL})())}createSyncEngine(e,t){return(function(a,l,u,f,m,g,y){const E=new Sj(a,l,u,f,m,g);return y&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Re(t);ue(io,"RemoteStore shutting down."),i.Ea.add(5),await oh(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}$_.provider={build:()=>new $_};class jj{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):sr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const ua="FirestoreClient";class Vj{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=bn.UNAUTHENTICATED,this.clientId=jy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async u=>{ue(ua,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(ue(ua,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=sv(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function h_(n,e){n.asyncQueue.verifyOperationInProgress(),ue(ua,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async a=>{i.isEqual(a)||(await rR(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function a0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Uj(n);ue(ua,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>e0(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,a)=>e0(e.remoteStore,a))),n._onlineComponents=e}async function Uj(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue(ua,"Using user provided OfflineComponentProvider");try{await h_(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===re.FAILED_PRECONDITION||a.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Sl("Error using user provided cache. Falling back to memory cache: "+t),await h_(n,new Fd)}}else ue(ua,"Using default OfflineComponentProvider"),await h_(n,new Lj(void 0));return n._offlineComponents}async function bR(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue(ua,"Using user provided OnlineComponentProvider"),await a0(n,n._uninitializedComponentsProvider._online)):(ue(ua,"Using default OnlineComponentProvider"),await a0(n,new $_))),n._onlineComponents}function zj(n){return bR(n).then((e=>e.syncEngine))}async function Bj(n){const e=await bR(n),t=e.eventManager;return t.onListen=bj.bind(null,e.syncEngine),t.onUnlisten=Aj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=wj.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Rj.bind(null,e.syncEngine),t}function Fj(n,e,t={}){const i=new Zr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,f,m,g){const y=new jj({next:b=>{y.Nu(),u.enqueueAndForget((()=>pj(l,E)));const A=b.docs.has(f);!A&&b.fromCache?g.reject(new ge(re.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&b.fromCache&&m&&m.source==="server"?g.reject(new ge(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(b)},error:b=>g.reject(b)}),E=new yj(qy(f.path),y,{includeMetadataChanges:!0,qa:!0});return mj(l,E)})(await Bj(n),n.asyncQueue,e,t,i))),i.promise}function wR(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const o0=new Map;const CR="firestore.googleapis.com",l0=!0;class c0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=CR,this.ssl=l0}else this.host=e.host,this.ssl=e.ssl??l0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=iR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gL)throw new ge(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wR(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lv{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new c0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new c0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new FM;switch(i.type){case"firstParty":return new YM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ge(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=o0.get(t);i&&(ue("ComponentProvider","Removing Datastore"),o0.delete(t),i.terminate())})(this),Promise.resolve()}}function Hj(n,e,t,i={}){n=Du(n,lv);const a=vs(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;a&&(cm(`https://${f}`),um("Firestore",!0)),l.host!==CR&&l.host!==f&&Sl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:f,ssl:a,emulatorOptions:i};if(!ia(m,u)&&(n._setSettings(m),i.mockUserToken)){let g,y;if(typeof i.mockUserToken=="string")g=i.mockUserToken,y=bn.MOCK_USER;else{g=Sy(i.mockUserToken,n._app?.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new ge(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new bn(E)}n._authCredentials=new HM(new gA(g,y))}}class cv{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new cv(this.firestore,e,this._query)}}class an{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new an(this.firestore,e,this._key)}toJSON(){return{type:an._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(sh(t,an._jsonSchema))return new an(e,i||null,new Te(St.fromString(t.referencePath)))}}an._jsonSchemaVersion="firestore/documentReference/1.0",an._jsonSchema={type:Gt("string",an._jsonSchemaVersion),referencePath:Gt("string")};class Uu extends cv{constructor(e,t,i){super(e,t,qy(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new an(this.firestore,null,new Te(e))}withConverter(e){return new Uu(this.firestore,e,this._path)}}function Il(n,e,...t){if(n=It(n),arguments.length===1&&(e=jy.newId()),JM("doc","path",e),n instanceof lv){const i=St.fromString(e,...t);return bw(i),new an(n,null,new Te(i))}{if(!(n instanceof an||n instanceof Uu))throw new ge(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(St.fromString(e,...t));return bw(i),new an(n.firestore,n instanceof Uu?n.converter:null,new Te(i))}}const u0="AsyncQueue";class h0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new oR(this,"async_queue_retry"),this._c=()=>{const i=u_();i&&ue(u0,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=u_();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=u_();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Zr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Bl(e))throw e;ue(u0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,sr("INTERNAL UNHANDLED ERROR: ",f0(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=iv.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&we(47125,{Pc:f0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function f0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class uv extends lv{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new h0,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new h0(e),this._firestoreClient=void 0,await e}}}function qj(n,e){const t=typeof n=="object"?n:mm(),i=typeof n=="string"?n:kd,a=Zu(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=Ty("firestore");l&&Hj(a,...l)}return a}function AR(n){if(n._terminated)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Gj(n),n._firestoreClient}function Gj(n){const e=n._freezeSettings(),t=(function(a,l,u,f){return new u2(a,l,u,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,wR(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Vj(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(n._componentsProvider))}class gi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gi(yn.fromBase64String(e))}catch(t){throw new ge(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new gi(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:gi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(sh(e,gi._jsonSchema))return gi.fromBase64String(e.bytes)}}gi._jsonSchemaVersion="firestore/bytes/1.0",gi._jsonSchema={type:Gt("string",gi._jsonSchemaVersion),bytes:Gt("string")};class hv{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _n(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class RR{constructor(e){this._methodName=e}}class ms{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ms._jsonSchemaVersion}}static fromJSON(e){if(sh(e,ms._jsonSchema))return new ms(e.latitude,e.longitude)}}ms._jsonSchemaVersion="firestore/geoPoint/1.0",ms._jsonSchema={type:Gt("string",ms._jsonSchemaVersion),latitude:Gt("number"),longitude:Gt("number")};class ps{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ps._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(sh(e,ps._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ps(e.vectorValues);throw new ge(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ps._jsonSchemaVersion="firestore/vectorValue/1.0",ps._jsonSchema={type:Gt("string",ps._jsonSchemaVersion),vectorValues:Gt("object")};const Yj=/^__.*__$/;class Kj{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new fo(e,this.data,this.fieldMask,t,this.fieldTransforms):new rh(e,this.data,t,this.fieldTransforms)}}function IR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:n})}}class fv{constructor(e,t,i,a,l,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new fv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Hd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(IR(this.Ac)&&Yj.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Qj{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Rm(e)}Cc(e,t,i,a=!1){return new fv({Ac:e,methodName:t,Dc:i,path:_n.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wj(n){const e=n._freezeSettings(),t=Rm(n._databaseId);return new Qj(n._databaseId,!!e.ignoreUndefinedProperties,t)}function $j(n,e,t,i,a,l={}){const u=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);DR("Data must be an object, but it was:",u,i);const f=xR(i,u);let m,g;if(l.merge)m=new Li(u.fieldMask),g=u.fieldTransforms;else if(l.mergeFields){const y=[];for(const E of l.mergeFields){const b=Xj(e,E,t);if(!u.contains(b))throw new ge(re.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);Zj(y,b)||y.push(b)}m=new Li(y),g=u.fieldTransforms.filter((E=>m.covers(E.field)))}else m=null,g=u.fieldTransforms;return new Kj(new pi(f),m,g)}function NR(n,e){if(OR(n=It(n)))return DR("Unsupported field value:",e,n),xR(n,e);if(n instanceof RR)return(function(i,a){if(!IR(a.Ac))throw a.Sc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,a){const l=[];let u=0;for(const f of i){let m=NR(f,a.wc(u));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),u++}return{arrayValue:{values:l}}})(n,e)}return(function(i,a){if((i=It(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return P2(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=_t.fromDate(i);return{timestampValue:Ud(a.serializer,l)}}if(i instanceof _t){const l=new _t(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ud(a.serializer,l)}}if(i instanceof ms)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof gi)return{bytesValue:$A(a.serializer,i._byteString)};if(i instanceof an){const l=a.databaseId,u=i.firestore._databaseId;if(!u.isEqual(l))throw a.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Qy(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof ps)return(function(u,f){return{mapValue:{fields:{[CA]:{stringValue:AA},[Pd]:{arrayValue:{values:u.toArray().map((g=>{if(typeof g!="number")throw f.Sc("VectorValues must only contain numeric values.");return Gy(f.serializer,g)}))}}}}}})(i,a);throw a.Sc(`Unsupported field value: ${Vy(i)}`)})(n,e)}function xR(n,e){const t={};return vA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):uo(n,((i,a)=>{const l=NR(a,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function OR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof _t||n instanceof ms||n instanceof gi||n instanceof an||n instanceof RR||n instanceof ps)}function DR(n,e,t){if(!OR(t)||!_A(t)){const i=Vy(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function Xj(n,e,t){if((e=It(e))instanceof hv)return e._internalPath;if(typeof e=="string")return kR(n,e);throw Hd("Field path arguments must be of type string or ",n,!1,void 0,t)}const Jj=new RegExp("[~\\*/\\[\\]]");function kR(n,e,t){if(e.search(Jj)>=0)throw Hd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new hv(...e.split("."))._internalPath}catch{throw Hd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Hd(n,e,t,i,a){const l=i&&!i.isEmpty(),u=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||u)&&(m+=" (found",l&&(m+=` in field ${i}`),u&&(m+=` in document ${a}`),m+=")"),new ge(re.INVALID_ARGUMENT,f+n+m)}function Zj(n,e){return n.some((t=>t.isEqual(e)))}class PR{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new an(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(MR("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class eV extends PR{data(){return super.data()}}function MR(n,e){return typeof e=="string"?kR(n,e):e instanceof hv?e._internalPath:e._delegate._internalPath}class tV{convertValue(e,t="none"){switch(la(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return uo(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){const t=e.fields?.[Pd].arrayValue?.values?.map((i=>kt(i.doubleValue)));return new ps(t)}convertGeoPoint(e){return new ms(kt(e.latitude),kt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Em(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Pu(e));default:return null}}convertTimestamp(e){const t=aa(e);return new _t(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=St.fromString(e);et(nR(i),9688,{name:e});const a=new Mu(i.get(1),i.get(3)),l=new Te(i.popFirst(5));return a.isEqual(t)||sr(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function nV(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class hu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Za extends PR{constructor(e,t,i,a,l,u){super(e,t,i,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new vd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(MR("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Za._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Za._jsonSchemaVersion="firestore/documentSnapshot/1.0",Za._jsonSchema={type:Gt("string",Za._jsonSchemaVersion),bundleSource:Gt("string","DocumentSnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class vd extends Za{data(e={}){return super.data(e)}}class Tu{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new hu(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new vd(this._firestore,this._userDataWriter,i.key,i,new hu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((f=>{const m=new vd(a._firestore,a._userDataWriter,f.doc.key,f.doc,new hu(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const m=new vd(a._firestore,a._userDataWriter,f.doc.key,f.doc,new hu(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,y=-1;return f.type!==0&&(g=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),y=u.indexOf(f.doc.key)),{type:iV(f.type),doc:m,oldIndex:g,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Tu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function iV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:n})}}function dv(n){n=Du(n,an);const e=Du(n.firestore,uv);return Fj(AR(e),n._key).then((t=>aV(e,n,t)))}Tu._jsonSchemaVersion="firestore/querySnapshot/1.0",Tu._jsonSchema={type:Gt("string",Tu._jsonSchemaVersion),bundleSource:Gt("string","QuerySnapshot"),bundleName:Gt("string"),bundle:Gt("string")};class sV extends tV{constructor(e){super(),this.firestore=e}convertBytes(e){return new gi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new an(this.firestore,null,t)}}function mv(n,e,t){n=Du(n,an);const i=Du(n.firestore,uv),a=nV(n.converter,e);return rV(i,[$j(Wj(i),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Qs.none())])}function rV(n,e){return(function(i,a){const l=new Zr;return i.asyncQueue.enqueueAndForget((async()=>Ij(await zj(i),a,l))),l.promise})(AR(n),e)}function aV(n,e,t){const i=t.docs.get(e._key),a=new sV(n);return new Za(n,a,e._key,i,new hu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){Ul=a})(pa),sa(new er("firestore",((i,{instanceIdentifier:a,options:l})=>{const u=i.getProvider("app").getImmediate(),f=new uv(new qM(i.getProvider("auth-internal")),new KM(u,i.getProvider("app-check-internal")),(function(g,y){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ge(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mu(g.options.projectId,y)})(u,a),u);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),yi(vw,Ew,e),yi(vw,Ew,"esm2020")})();var d0={};const m0="@firebase/database",p0="1.1.0";let LR="";function oV(n){LR=n}class lV{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),$t(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Nu(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class cV{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Ts(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const jR=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new lV(e)}}catch{}return new cV},Ja=jR("localStorage"),uV=jR("sessionStorage");const yl=new dm("@firebase/database"),hV=(function(){let n=1;return function(){return n++}})(),VR=function(n){const e=fD(n),t=new lD;t.update(e);const i=t.digest();return Ey.encodeByteArray(i)},ch=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=ch.apply(null,i):typeof i=="object"?e+=$t(i):e+=i,e+=" "}return e};let Su=null,g0=!0;const fV=function(n,e){oe(!0,"Can't turn on custom loggers persistently."),yl.logLevel=Ue.VERBOSE,Su=yl.log.bind(yl)},pn=function(...n){if(g0===!0&&(g0=!1,Su===null&&uV.get("logging_enabled")===!0&&fV()),Su){const e=ch.apply(null,n);Su(e)}},uh=function(n){return function(...e){pn(n,...e)}},X_=function(...n){const e="FIREBASE INTERNAL ERROR: "+ch(...n);yl.error(e)},ar=function(...n){const e=`FIREBASE FATAL ERROR: ${ch(...n)}`;throw yl.error(e),new Error(e)},On=function(...n){const e="FIREBASE WARNING: "+ch(...n);yl.warn(e)},dV=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&On("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},pv=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},mV=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Nl="[MIN_NAME]",so="[MAX_NAME]",po=function(n,e){if(n===e)return 0;if(n===Nl||e===so)return-1;if(e===Nl||n===so)return 1;{const t=_0(n),i=_0(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},pV=function(n,e){return n===e?0:n<e?-1:1},nu=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+$t(e))},gv=function(n){if(typeof n!="object"||n===null)return $t(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=$t(e[i]),t+=":",t+=gv(n[e[i]]);return t+="}",t},UR=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let a=0;a<t;a+=e)a+e>t?i.push(n.substring(a,t)):i.push(n.substring(a,a+e));return i};function vn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const zR=function(n){oe(!pv(n),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let a,l,u,f,m;n===0?(l=0,u=0,a=1/n===-1/0?1:0):(a=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),i),l=f+i,u=Math.round(n*Math.pow(2,t-f)-Math.pow(2,t))):(l=0,u=Math.round(n/Math.pow(2,1-i-t))));const g=[];for(m=t;m;m-=1)g.push(u%2?1:0),u=Math.floor(u/2);for(m=e;m;m-=1)g.push(l%2?1:0),l=Math.floor(l/2);g.push(a?1:0),g.reverse();const y=g.join("");let E="";for(m=0;m<64;m+=8){let b=parseInt(y.substr(m,8),2).toString(16);b.length===1&&(b="0"+b),E=E+b}return E.toLowerCase()},gV=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},_V=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function yV(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}const vV=new RegExp("^-?(0*)\\d{1,10}$"),EV=-2147483648,TV=2147483647,_0=function(n){if(vV.test(n)){const e=Number(n);if(e>=EV&&e<=TV)return e}return null},Hl=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw On("Exception was thrown by user callback.",t),e},Math.floor(0))}},SV=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},bu=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};class bV{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Xn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){On(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class wV{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(a=>this.auth_=a)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(pn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',On(e)}}class Ed{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ed.OWNER="owner";const _v="5",BR="v",FR="s",HR="r",qR="f",GR=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,YR="ls",KR="p",J_="ac",QR="websocket",WR="long_polling";class $R{constructor(e,t,i,a,l=!1,u="",f=!1,m=!1,g=null){this.secure=t,this.namespace=i,this.webSocketOnly=a,this.nodeAdmin=l,this.persistenceKey=u,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=m,this.emulatorOptions=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ja.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ja.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function CV(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function XR(n,e,t){oe(typeof e=="string","typeof type must == string"),oe(typeof t=="object","typeof params must == object");let i;if(e===QR)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===WR)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);CV(n)&&(t.ns=n.namespace);const a=[];return vn(t,(l,u)=>{a.push(l+"="+u)}),i+a.join("&")}class AV{constructor(){this.counters_={}}incrementCounter(e,t=1){Ts(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return BO(this.counters_)}}const f_={},d_={};function yv(n){const e=n.toString();return f_[e]||(f_[e]=new AV),f_[e]}function RV(n,e){const t=n.toString();return d_[t]||(d_[t]=e()),d_[t]}class IV{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<i.length;++a)i[a]&&Hl(()=>{this.onMessage_(i[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const y0="start",NV="close",xV="pLPCommand",OV="pRTLPCB",JR="id",ZR="pw",eI="ser",DV="cb",kV="seg",PV="ts",MV="d",LV="dframe",tI=1870,nI=30,jV=tI-nI,VV=25e3,UV=3e4;class dl{constructor(e,t,i,a,l,u,f){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.transportSessionId=u,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=uh(e),this.stats_=yv(t),this.urlFn=m=>(this.appCheckToken&&(m[J_]=this.appCheckToken),XR(t,WR,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new IV(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(UV)),mV(()=>{if(this.isClosed_)return;this.scriptTagHolder=new vv((...l)=>{const[u,f,m,g,y]=l;if(this.incrementIncomingBytes_(l),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,u===y0)this.id=f,this.password=m;else if(u===NV)f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+u)},(...l)=>{const[u,f]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(u,f)},()=>{this.onClosed_()},this.urlFn);const i={};i[y0]="t",i[eI]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[DV]=this.scriptTagHolder.uniqueCallbackIdentifier),i[BR]=_v,this.transportSessionId&&(i[FR]=this.transportSessionId),this.lastSessionId&&(i[YR]=this.lastSessionId),this.applicationId&&(i[KR]=this.applicationId),this.appCheckToken&&(i[J_]=this.appCheckToken),typeof location<"u"&&location.hostname&&GR.test(location.hostname)&&(i[HR]=qR);const a=this.urlFn(i);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){dl.forceAllow_=!0}static forceDisallow(){dl.forceDisallow_=!0}static isAvailable(){return dl.forceAllow_?!0:!dl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!gV()&&!_V()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=$t(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=gC(t),a=UR(i,jV);for(let l=0;l<a.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[l]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[LV]="t",i[JR]=e,i[ZR]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=$t(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class vv{constructor(e,t,i,a){this.onDisconnect=i,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=hV(),window[xV+this.uniqueCallbackIdentifier]=e,window[OV+this.uniqueCallbackIdentifier]=t,this.myIFrame=vv.createIFrame_();let l="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(l='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(f){pn("frame writing exception"),f.stack&&pn(f.stack),pn(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||pn("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[JR]=this.myID,e[ZR]=this.myPW,e[eI]=this.currentSerial;let t=this.urlFn(e),i="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+nI+i.length<=tI;){const u=this.pendingSegs.shift();i=i+"&"+kV+a+"="+u.seg+"&"+PV+a+"="+u.ts+"&"+MV+a+"="+u.d,a++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},a=setTimeout(i,Math.floor(VV)),l=()=>{clearTimeout(a),i()};this.addTag(e,l)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const a=i.readyState;(!a||a==="loaded"||a==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{pn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}const zV=16384,BV=45e3;let qd=null;typeof MozWebSocket<"u"?qd=MozWebSocket:typeof WebSocket<"u"&&(qd=WebSocket);class Pi{constructor(e,t,i,a,l,u,f){this.connId=e,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=uh(this.connId),this.stats_=yv(t),this.connURL=Pi.connectionURL_(t,u,f,a,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,a,l){const u={};return u[BR]=_v,typeof location<"u"&&location.hostname&&GR.test(location.hostname)&&(u[HR]=qR),t&&(u[FR]=t),i&&(u[YR]=i),a&&(u[J_]=a),l&&(u[KR]=l),XR(e,QR,u)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ja.set("previous_websocket_failure",!0);try{let i;ZO(),this.mySock=new qd(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){Pi.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&qd!==null&&!Pi.forceDisallow_}static previouslyFailed(){return Ja.isInMemoryStorage||Ja.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ja.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=Nu(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(oe(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=$t(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=UR(t,zV);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(BV))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Pi.responsesRequiredToBeHealthy=2;Pi.healthyTimeout=3e4;class zu{static get ALL_TRANSPORTS(){return[dl,Pi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Pi&&Pi.isAvailable();let i=t&&!Pi.previouslyFailed();if(e.webSocketOnly&&(t||On("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Pi];else{const a=this.transports_=[];for(const l of zu.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);zu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}zu.globalTransportInitialized_=!1;const FV=6e4,HV=5e3,qV=10*1024,GV=100*1024,m_="t",v0="d",YV="s",E0="r",KV="e",T0="o",S0="a",b0="n",w0="p",QV="h";class WV{constructor(e,t,i,a,l,u,f,m,g,y){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=a,this.authToken_=l,this.onMessage_=u,this.onReady_=f,this.onDisconnect_=m,this.onKill_=g,this.lastSessionId=y,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=uh("c:"+this.id+":"),this.transportManager_=new zu(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const a=e.healthyTimeout||0;a>0&&(this.healthyTimeout_=bu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>GV?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>qV?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(m_ in e){const t=e[m_];t===S0?this.upgradeIfSecondaryHealthy_():t===E0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===T0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=nu("t",e),i=nu("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:w0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:S0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:b0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=nu("t",e),i=nu("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=nu(m_,e);if(v0 in e){const i=e[v0];if(t===QV){const a={...i};this.repoInfo_.isUsingEmulator&&(a.h=this.repoInfo_.host),this.onHandshake_(a)}else if(t===b0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===YV?this.onConnectionShutdown_(i):t===E0?this.onReset_(i):t===KV?X_("Server Error: "+i):t===T0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):X_("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,a=e.h;this.sessionId=e.s,this.repoInfo_.host=a,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),_v!==i&&On("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),bu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(FV))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):bu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(HV))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:w0,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ja.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class iI{put(e,t,i,a){}merge(e,t,i,a){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class sI{constructor(e){this.allowedEvents_=e,this.listeners_={},oe(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let a=0;a<i.length;a++)i[a].callback.apply(i[a].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const a=this.getInitialEvent(e);a&&t.apply(i,a)}off(e,t,i){this.validateEventType_(e);const a=this.listeners_[e]||[];for(let l=0;l<a.length;l++)if(a[l].callback===t&&(!i||i===a[l].context)){a.splice(l,1);return}}validateEventType_(e){oe(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Gd extends sI{static getInstance(){return new Gd}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!by()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return oe(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const C0=32,A0=768;class ut{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[i]=this.pieces_[a],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function We(){return new ut("")}function Me(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ha(n){return n.pieces_.length-n.pieceNum_}function mt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new ut(n.pieces_,e)}function Ev(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function $V(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function Bu(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function rI(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new ut(e,0)}function At(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof ut)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let a=0;a<i.length;a++)i[a].length>0&&t.push(i[a])}return new ut(t,0)}function ze(n){return n.pieceNum_>=n.pieces_.length}function xn(n,e){const t=Me(n),i=Me(e);if(t===null)return e;if(t===i)return xn(mt(n),mt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function XV(n,e){const t=Bu(n,0),i=Bu(e,0);for(let a=0;a<t.length&&a<i.length;a++){const l=po(t[a],i[a]);if(l!==0)return l}return t.length===i.length?0:t.length<i.length?-1:1}function Tv(n,e){if(ha(n)!==ha(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function _i(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(ha(n)>ha(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class JV{constructor(e,t){this.errorPrefix_=t,this.parts_=Bu(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=fm(this.parts_[i]);aI(this)}}function ZV(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=fm(e),aI(n)}function eU(n){const e=n.parts_.pop();n.byteLength_-=fm(e),n.parts_.length>0&&(n.byteLength_-=1)}function aI(n){if(n.byteLength_>A0)throw new Error(n.errorPrefix_+"has a key path longer than "+A0+" bytes ("+n.byteLength_+").");if(n.parts_.length>C0)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+C0+") or object contains a cycle "+$a(n))}function $a(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}class Sv extends sI{static getInstance(){return new Sv}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return oe(e==="visible","Unknown event type: "+e),[this.visible_]}}const iu=1e3,tU=300*1e3,R0=30*1e3,nU=1.3,iU=3e4,sU="server_kill",I0=3;class Ws extends iI{constructor(e,t,i,a,l,u,f,m){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=u,this.appCheckTokenProvider_=f,this.authOverride_=m,this.id=Ws.nextPersistentConnectionId_++,this.log_=uh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=iu,this.maxReconnectDelay_=tU,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Sv.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Gd.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const a=++this.requestNumber_,l={r:a,a:e,b:t};this.log_($t(l)),oe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(e){this.initConnection_();const t=new Xu,a={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:u=>{const f=u.d;u.s==="ok"?t.resolve(f):t.reject(f)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(l),t.promise}listen(e,t,i,a){this.initConnection_();const l=e._queryIdentifier,u=e._path.toString();this.log_("Listen called for "+u+" "+l),this.listens.has(u)||this.listens.set(u,new Map),oe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),oe(!this.listens.get(u).has(l),"listen() called twice for same path/queryId.");const f={onComplete:a,hashFn:t,query:e,tag:i};this.listens.get(u).set(l,f),this.connected_&&this.sendListen_(f)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),a=t._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i},u="q";e.tag&&(l.q=t._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest(u,l,f=>{const m=f.d,g=f.s;Ws.warnOnListenWarnings_(m,t),(this.listens.get(i)&&this.listens.get(i).get(a))===e&&(this.log_("listen response",f),g!=="ok"&&this.removeListen_(i,a),e.onComplete&&e.onComplete(g,m))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Ts(e,"w")){const i=El(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+t._queryParams.getIndex().toString()+'"',l=t._path.toString();On(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||oD(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=R0)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=aD(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,a=>{const l=a.s,u=a.d||"error";this.authToken_===e&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),a=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),oe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,e._queryObject,t)}sendUnlisten_(e,t,i,a){this.log_("Unlisten on "+e+" for "+t);const l={p:e},u="n";a&&(l.q=i,l.t=a),this.sendRequest(u,l)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,a){const l={p:t,d:i};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,u=>{a&&setTimeout(()=>{a(u.s,u.d)},Math.floor(0))})}put(e,t,i,a){this.putInternal("p",e,t,i,a)}merge(e,t,i,a){this.putInternal("m",e,t,i,a)}putInternal(e,t,i,a,l){this.initConnection_();const u={p:t,d:i};l!==void 0&&(u.h=l),this.outstandingPuts_.push({action:e,request:u,onComplete:a}),this.outstandingPutCount_++;const f=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(f):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,a=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,l=>{this.log_(t+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const l=i.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+$t(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):X_("Unrecognized action received from server: "+$t(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){oe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=iu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=iu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>iU&&(this.reconnectDelay_=iu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*nU)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+Ws.nextConnectionId_++,l=this.lastSessionId;let u=!1,f=null;const m=function(){f?f.close():(u=!0,i())},g=function(E){oe(f,"sendRequest call when we're not connected not allowed."),f.sendRequest(E)};this.realtime_={close:m,sendRequest:g};const y=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[E,b]=await Promise.all([this.authTokenProvider_.getToken(y),this.appCheckTokenProvider_.getToken(y)]);u?pn("getToken() completed but was canceled"):(pn("getToken() completed. Creating connection."),this.authToken_=E&&E.accessToken,this.appCheckToken_=b&&b.token,f=new WV(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,A=>{On(A+" ("+this.repoInfo_.toString()+")"),this.interrupt(sU)},l))}catch(E){this.log_("Failed to get token: "+E),u||(this.repoInfo_.nodeAdmin&&On(E),m())}}}interrupt(e){pn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){pn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],C_(this.interruptReasons_)&&(this.reconnectDelay_=iu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(l=>gv(l)).join("$"):i="default";const a=this.removeListen_(e,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(e,t){const i=new ut(e).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(t),l.delete(t),l.size===0&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(e,t){pn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=I0&&(this.reconnectDelay_=R0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){pn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=I0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+LR.replace(/\./g,"-")]=1,by()?e["framework.cordova"]=1:TC()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Gd.getInstance().currentlyOnline();return C_(this.interruptReasons_)&&e}}Ws.nextPersistentConnectionId_=0;Ws.nextConnectionId_=0;class Le{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Le(e,t)}}class xm{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Le(Nl,e),a=new Le(Nl,t);return this.compare(i,a)!==0}minPost(){return Le.MIN}}let sd;class oI extends xm{static get __EMPTY_NODE(){return sd}static set __EMPTY_NODE(e){sd=e}compare(e,t){return po(e.name,t.name)}isDefinedOn(e){throw Vl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Le.MIN}maxPost(){return new Le(so,sd)}makePost(e,t){return oe(typeof e=="string","KeyIndex indexValue must always be a string."),new Le(e,sd)}toString(){return".key"}}const vl=new oI;class rd{constructor(e,t,i,a,l=null){this.isReverse_=a,this.resultGenerator_=l,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?i(e.key,t):1,a&&(u*=-1),u<0)this.isReverse_?e=e.left:e=e.right;else if(u===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class rn{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??rn.RED,this.left=a??Bn.EMPTY_NODE,this.right=l??Bn.EMPTY_NODE}copy(e,t,i,a,l){return new rn(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return l<0?a=a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a=a.copy(null,t,null,null,null):a=a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Bn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,a;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return Bn.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}rn.RED=!0;rn.BLACK=!1;class rU{copy(e,t,i,a,l){return this}insert(e,t,i){return new rn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Bn{constructor(e,t=Bn.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Bn(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,rn.BLACK,null,null))}remove(e){return new Bn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,rn.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,a=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return a?a.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(a=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new rd(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new rd(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new rd(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new rd(this.root_,null,this.comparator_,!0,e)}}Bn.EMPTY_NODE=new rU;function aU(n,e){return po(n.name,e.name)}function bv(n,e){return po(n,e)}let Z_;function oU(n){Z_=n}const lI=function(n){return typeof n=="number"?"number:"+zR(n):"string:"+n},cI=function(n){if(n.isLeafNode()){const e=n.val();oe(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ts(e,".sv"),"Priority must be a string or number.")}else oe(n===Z_||n.isEmpty(),"priority of unexpected type.");oe(n===Z_||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let N0;class nn{static set __childrenNodeConstructor(e){N0=e}static get __childrenNodeConstructor(){return N0}constructor(e,t=nn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,oe(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),cI(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new nn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:nn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ze(e)?this:Me(e)===".priority"?this.priorityNode_:nn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:nn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=Me(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(oe(i!==".priority"||ha(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,nn.__childrenNodeConstructor.EMPTY_NODE.updateChild(mt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+lI(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=zR(this.value_):e+=this.value_,this.lazyHash_=VR(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===nn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof nn.__childrenNodeConstructor?-1:(oe(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,a=nn.VALUE_TYPE_ORDER.indexOf(t),l=nn.VALUE_TYPE_ORDER.indexOf(i);return oe(a>=0,"Unknown leaf type: "+t),oe(l>=0,"Unknown leaf type: "+i),a===l?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}nn.VALUE_TYPE_ORDER=["object","boolean","number","string"];let uI,hI;function lU(n){uI=n}function cU(n){hI=n}class uU extends xm{compare(e,t){const i=e.node.getPriority(),a=t.node.getPriority(),l=i.compareTo(a);return l===0?po(e.name,t.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Le.MIN}maxPost(){return new Le(so,new nn("[PRIORITY-POST]",hI))}makePost(e,t){const i=uI(e);return new Le(t,new nn("[PRIORITY-POST]",i))}toString(){return".priority"}}const Rt=new uU;const hU=Math.log(2);class fU{constructor(e){const t=l=>parseInt(Math.log(l)/hU,10),i=l=>parseInt(Array(l+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const a=i(this.count);this.bits_=e+1&a}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Yd=function(n,e,t,i){n.sort(e);const a=function(m,g){const y=g-m;let E,b;if(y===0)return null;if(y===1)return E=n[m],b=t?t(E):E,new rn(b,E.node,rn.BLACK,null,null);{const A=parseInt(y/2,10)+m,I=a(m,A),V=a(A+1,g);return E=n[A],b=t?t(E):E,new rn(b,E.node,rn.BLACK,I,V)}},l=function(m){let g=null,y=null,E=n.length;const b=function(I,V){const L=E-I,X=E;E-=I;const K=a(L+1,X),$=n[L],ae=t?t($):$;A(new rn(ae,$.node,V,null,K))},A=function(I){g?(g.left=I,g=I):(y=I,g=I)};for(let I=0;I<m.count;++I){const V=m.nextBitIsOne(),L=Math.pow(2,m.count-(I+1));V?b(L,rn.BLACK):(b(L,rn.BLACK),b(L,rn.RED))}return y},u=new fU(n.length),f=l(u);return new Bn(i||e,f)};let p_;const rl={};class Ys{static get Default(){return oe(rl&&Rt,"ChildrenNode.ts has not been loaded"),p_=p_||new Ys({".priority":rl},{".priority":Rt}),p_}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=El(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Bn?t:null}hasIndex(e){return Ts(this.indexSet_,e.toString())}addIndex(e,t){oe(e!==vl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let a=!1;const l=t.getIterator(Le.Wrap);let u=l.getNext();for(;u;)a=a||e.isDefinedOn(u.node),i.push(u),u=l.getNext();let f;a?f=Yd(i,e.getCompare()):f=rl;const m=e.toString(),g={...this.indexSet_};g[m]=e;const y={...this.indexes_};return y[m]=f,new Ys(y,g)}addToIndexes(e,t){const i=wd(this.indexes_,(a,l)=>{const u=El(this.indexSet_,l);if(oe(u,"Missing index implementation for "+l),a===rl)if(u.isDefinedOn(e.node)){const f=[],m=t.getIterator(Le.Wrap);let g=m.getNext();for(;g;)g.name!==e.name&&f.push(g),g=m.getNext();return f.push(e),Yd(f,u.getCompare())}else return rl;else{const f=t.get(e.name);let m=a;return f&&(m=m.remove(new Le(e.name,f))),m.insert(e,e.node)}});return new Ys(i,this.indexSet_)}removeFromIndexes(e,t){const i=wd(this.indexes_,a=>{if(a===rl)return a;{const l=t.get(e.name);return l?a.remove(new Le(e.name,l)):a}});return new Ys(i,this.indexSet_)}}let su;class be{static get EMPTY_NODE(){return su||(su=new be(new Bn(bv),null,Ys.Default))}constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&cI(this.priorityNode_),this.children_.isEmpty()&&oe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||su}updatePriority(e){return this.children_.isEmpty()?this:new be(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?su:t}}getChild(e){const t=Me(e);return t===null?this:this.getImmediateChild(t).getChild(mt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(oe(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new Le(e,t);let a,l;t.isEmpty()?(a=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(e,t),l=this.indexMap_.addToIndexes(i,this.children_));const u=a.isEmpty()?su:this.priorityNode_;return new be(a,u,l)}}updateChild(e,t){const i=Me(e);if(i===null)return t;{oe(Me(e)!==".priority"||ha(e)===1,".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(mt(e),t);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,a=0,l=!0;if(this.forEachChild(Rt,(u,f)=>{t[u]=f.val(e),i++,l&&be.INTEGER_REGEXP_.test(u)?a=Math.max(a,Number(u)):l=!1}),!e&&l&&a<2*i){const u=[];for(const f in t)u[f]=t[f];return u}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+lI(this.getPriority().val())+":"),this.forEachChild(Rt,(t,i)=>{const a=i.hash();a!==""&&(e+=":"+t+":"+a)}),this.lazyHash_=e===""?"":VR(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new Le(e,t));return l?l.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Le(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Le(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(a=>t(a.name,a.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,a=>a);{const a=this.children_.getIteratorFrom(e.name,Le.Wrap);let l=a.peek();for(;l!=null&&t.compare(l,e)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,a=>a);{const a=this.children_.getReverseIteratorFrom(e.name,Le.Wrap);let l=a.peek();for(;l!=null&&t.compare(l,e)>0;)a.getNext(),l=a.peek();return a}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===hh?-1:0}withIndex(e){if(e===vl||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new be(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===vl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(Rt),a=t.getIterator(Rt);let l=i.getNext(),u=a.getNext();for(;l&&u;){if(l.name!==u.name||!l.node.equals(u.node))return!1;l=i.getNext(),u=a.getNext()}return l===null&&u===null}else return!1;else return!1}}resolveIndex_(e){return e===vl?null:this.indexMap_.get(e.toString())}}be.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class dU extends be{constructor(){super(new Bn(bv),be.EMPTY_NODE,Ys.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return be.EMPTY_NODE}isEmpty(){return!1}}const hh=new dU;Object.defineProperties(Le,{MIN:{value:new Le(Nl,be.EMPTY_NODE)},MAX:{value:new Le(so,hh)}});oI.__EMPTY_NODE=be.EMPTY_NODE;nn.__childrenNodeConstructor=be;oU(hh);cU(hh);const mU=!0;function Wt(n,e=null){if(n===null)return be.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),oe(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new nn(t,Wt(e))}if(!(n instanceof Array)&&mU){const t=[];let i=!1;if(vn(n,(u,f)=>{if(u.substring(0,1)!=="."){const m=Wt(f);m.isEmpty()||(i=i||!m.getPriority().isEmpty(),t.push(new Le(u,m)))}}),t.length===0)return be.EMPTY_NODE;const l=Yd(t,aU,u=>u.name,bv);if(i){const u=Yd(t,Rt.getCompare());return new be(l,Wt(e),new Ys({".priority":u},{".priority":Rt}))}else return new be(l,Wt(e),Ys.Default)}else{let t=be.EMPTY_NODE;return vn(n,(i,a)=>{if(Ts(n,i)&&i.substring(0,1)!=="."){const l=Wt(a);(l.isLeafNode()||!l.isEmpty())&&(t=t.updateImmediateChild(i,l))}}),t.updatePriority(Wt(e))}}lU(Wt);class pU extends xm{constructor(e){super(),this.indexPath_=e,oe(!ze(e)&&Me(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),a=this.extractChild(t.node),l=i.compareTo(a);return l===0?po(e.name,t.name):l}makePost(e,t){const i=Wt(e),a=be.EMPTY_NODE.updateChild(this.indexPath_,i);return new Le(t,a)}maxPost(){const e=be.EMPTY_NODE.updateChild(this.indexPath_,hh);return new Le(so,e)}toString(){return Bu(this.indexPath_,0).join("/")}}class gU extends xm{compare(e,t){const i=e.node.compareTo(t.node);return i===0?po(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Le.MIN}maxPost(){return Le.MAX}makePost(e,t){const i=Wt(e);return new Le(t,i)}toString(){return".value"}}const _U=new gU;function fI(n){return{type:"value",snapshotNode:n}}function xl(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Fu(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Hu(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function yU(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}class wv{constructor(e){this.index_=e}updateChild(e,t,i,a,l,u){oe(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(a).equals(i.getChild(a))&&f.isEmpty()===i.isEmpty()||(u!=null&&(i.isEmpty()?e.hasChild(t)?u.trackChildChange(Fu(t,f)):oe(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?u.trackChildChange(xl(t,i)):u.trackChildChange(Hu(t,i,f))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(Rt,(a,l)=>{t.hasChild(a)||i.trackChildChange(Fu(a,l))}),t.isLeafNode()||t.forEachChild(Rt,(a,l)=>{if(e.hasChild(a)){const u=e.getImmediateChild(a);u.equals(l)||i.trackChildChange(Hu(a,l,u))}else i.trackChildChange(xl(a,l))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?be.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class qu{constructor(e){this.indexedFilter_=new wv(e.getIndex()),this.index_=e.getIndex(),this.startPost_=qu.getStartPost_(e),this.endPost_=qu.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,a,l,u){return this.matches(new Le(t,i))||(i=be.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,a,l,u)}updateFullNode(e,t,i){t.isLeafNode()&&(t=be.EMPTY_NODE);let a=t.withIndex(this.index_);a=a.updatePriority(be.EMPTY_NODE);const l=this;return t.forEachChild(Rt,(u,f)=>{l.matches(new Le(u,f))||(a=a.updateImmediateChild(u,be.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,a,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}class vU{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new qu(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,a,l,u){return this.rangedFilter_.matches(new Le(t,i))||(i=be.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,a,l,u):this.fullLimitUpdateChild_(e,t,i,l,u)}updateFullNode(e,t,i){let a;if(t.isLeafNode()||t.isEmpty())a=be.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){a=be.EMPTY_NODE.withIndex(this.index_);let l;this.reverse_?l=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;l.hasNext()&&u<this.limit_;){const f=l.getNext();if(this.withinDirectionalStart(f))if(this.withinDirectionalEnd(f))a=a.updateImmediateChild(f.name,f.node),u++;else break;else continue}}else{a=t.withIndex(this.index_),a=a.updatePriority(be.EMPTY_NODE);let l;this.reverse_?l=a.getReverseIterator(this.index_):l=a.getIterator(this.index_);let u=0;for(;l.hasNext();){const f=l.getNext();u<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?u++:a=a.updateImmediateChild(f.name,be.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,a,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,a,l){let u;if(this.reverse_){const E=this.index_.getCompare();u=(b,A)=>E(A,b)}else u=this.index_.getCompare();const f=e;oe(f.numChildren()===this.limit_,"");const m=new Le(t,i),g=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),y=this.rangedFilter_.matches(m);if(f.hasChild(t)){const E=f.getImmediateChild(t);let b=a.getChildAfterChild(this.index_,g,this.reverse_);for(;b!=null&&(b.name===t||f.hasChild(b.name));)b=a.getChildAfterChild(this.index_,b,this.reverse_);const A=b==null?1:u(b,m);if(y&&!i.isEmpty()&&A>=0)return l?.trackChildChange(Hu(t,i,E)),f.updateImmediateChild(t,i);{l?.trackChildChange(Fu(t,E));const V=f.updateImmediateChild(t,be.EMPTY_NODE);return b!=null&&this.rangedFilter_.matches(b)?(l?.trackChildChange(xl(b.name,b.node)),V.updateImmediateChild(b.name,b.node)):V}}else return i.isEmpty()?e:y&&u(g,m)>=0?(l!=null&&(l.trackChildChange(Fu(g.name,g.node)),l.trackChildChange(xl(t,i))),f.updateImmediateChild(t,i).updateImmediateChild(g.name,be.EMPTY_NODE)):e}}class Cv{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Rt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return oe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return oe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Nl}hasEnd(){return this.endSet_}getIndexEndValue(){return oe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return oe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:so}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return oe(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Rt}copy(){const e=new Cv;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function EU(n){return n.loadsAllData()?new wv(n.getIndex()):n.hasLimit()?new vU(n):new qu(n)}function x0(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Rt?t="$priority":n.index_===_U?t="$value":n.index_===vl?t="$key":(oe(n.index_ instanceof pU,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=$t(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=$t(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+$t(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=$t(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+$t(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function O0(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Rt&&(e.i=n.index_.toString()),e}class Kd extends iI{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(oe(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,i,a){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=a,this.log_=uh("p:rest:"),this.listens_={}}listen(e,t,i,a){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const u=Kd.getListenId_(e,i),f={};this.listens_[u]=f;const m=x0(e._queryParams);this.restRequest_(l+".json",m,(g,y)=>{let E=y;if(g===404&&(E=null,g=null),g===null&&this.onDataUpdate_(l,E,!1,i),El(this.listens_,u)===f){let b;g?g===401?b="permission_denied":b="rest_error:"+g:b="ok",a(b,null)}})}unlisten(e,t){const i=Kd.getListenId_(e,t);delete this.listens_[i]}get(e){const t=x0(e._queryParams),i=e._path.toString(),a=new Xu;return this.restRequest_(i+".json",t,(l,u)=>{let f=u;l===404&&(f=null,l=null),l===null?(this.onDataUpdate_(i,f,!1,null),a.resolve(f)):a.reject(new Error(f))}),a.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,l])=>{a&&a.accessToken&&(t.auth=a.accessToken),l&&l.token&&(t.ac=l.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+co(t);this.log_("Sending REST request for "+u);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(i&&f.readyState===4){this.log_("REST Response for "+u+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=Nu(f.responseText)}catch{On("Failed to parse JSON response for "+u+": "+f.responseText)}i(null,m)}else f.status!==401&&f.status!==404&&On("Got unsuccessful REST response for "+u+" Status: "+f.status),i(f.status);i=null}},f.open("GET",u,!0),f.send()})}}class TU{constructor(){this.rootNode_=be.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Qd(){return{value:null,children:new Map}}function dI(n,e,t){if(ze(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const i=Me(e);n.children.has(i)||n.children.set(i,Qd());const a=n.children.get(i);e=mt(e),dI(a,e,t)}}function ey(n,e,t){n.value!==null?t(e,n.value):SU(n,(i,a)=>{const l=new ut(e.toString()+"/"+i);ey(a,l,t)})}function SU(n,e){n.children.forEach((t,i)=>{e(i,t)})}class bU{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t={...e};return this.last_&&vn(this.last_,(i,a)=>{t[i]=t[i]-a}),this.last_=e,t}}const D0=10*1e3,wU=30*1e3,CU=300*1e3;class AU{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new bU(e);const i=D0+(wU-D0)*Math.random();bu(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;vn(e,(a,l)=>{l>0&&Ts(this.statsToReport_,a)&&(t[a]=l,i=!0)}),i&&this.server_.reportStats(t),bu(this.reportStats_.bind(this),Math.floor(Math.random()*2*CU))}}var ji;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ji||(ji={}));function Av(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Rv(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Iv(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Wd{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=ji.ACK_USER_WRITE,this.source=Av()}operationForChild(e){if(ze(this.path)){if(this.affectedTree.value!=null)return oe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ut(e));return new Wd(We(),t,this.revert)}}else return oe(Me(this.path)===e,"operationForChild called for unrelated child."),new Wd(mt(this.path),this.affectedTree,this.revert)}}class Gu{constructor(e,t){this.source=e,this.path=t,this.type=ji.LISTEN_COMPLETE}operationForChild(e){return ze(this.path)?new Gu(this.source,We()):new Gu(this.source,mt(this.path))}}class ro{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=ji.OVERWRITE}operationForChild(e){return ze(this.path)?new ro(this.source,We(),this.snap.getImmediateChild(e)):new ro(this.source,mt(this.path),this.snap)}}class Ol{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=ji.MERGE}operationForChild(e){if(ze(this.path)){const t=this.children.subtree(new ut(e));return t.isEmpty()?null:t.value?new ro(this.source,We(),t.value):new Ol(this.source,We(),t)}else return oe(Me(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ol(this.source,mt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class fa{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ze(e))return this.isFullyInitialized()&&!this.filtered_;const t=Me(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class RU{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function IU(n,e,t,i){const a=[],l=[];return e.forEach(u=>{u.type==="child_changed"&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&l.push(yU(u.childName,u.snapshotNode))}),ru(n,a,"child_removed",e,i,t),ru(n,a,"child_added",e,i,t),ru(n,a,"child_moved",l,i,t),ru(n,a,"child_changed",e,i,t),ru(n,a,"value",e,i,t),a}function ru(n,e,t,i,a,l){const u=i.filter(f=>f.type===t);u.sort((f,m)=>xU(n,f,m)),u.forEach(f=>{const m=NU(n,f,l);a.forEach(g=>{g.respondsTo(f.type)&&e.push(g.createEvent(m,n.query_))})})}function NU(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function xU(n,e,t){if(e.childName==null||t.childName==null)throw Vl("Should only compare child_ events.");const i=new Le(e.childName,e.snapshotNode),a=new Le(t.childName,t.snapshotNode);return n.index_.compare(i,a)}function Om(n,e){return{eventCache:n,serverCache:e}}function wu(n,e,t,i){return Om(new fa(e,t,i),n.serverCache)}function mI(n,e,t,i){return Om(n.eventCache,new fa(e,t,i))}function $d(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ao(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let g_;const OU=()=>(g_||(g_=new Bn(pV)),g_);class dt{static fromObject(e){let t=new dt(null);return vn(e,(i,a)=>{t=t.set(new ut(i),a)}),t}constructor(e,t=OU()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:We(),value:this.value};if(ze(e))return null;{const i=Me(e),a=this.children.get(i);if(a!==null){const l=a.findRootMostMatchingPathAndValue(mt(e),t);return l!=null?{path:At(new ut(i),l.path),value:l.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ze(e))return this;{const t=Me(e),i=this.children.get(t);return i!==null?i.subtree(mt(e)):new dt(null)}}set(e,t){if(ze(e))return new dt(t,this.children);{const i=Me(e),l=(this.children.get(i)||new dt(null)).set(mt(e),t),u=this.children.insert(i,l);return new dt(this.value,u)}}remove(e){if(ze(e))return this.children.isEmpty()?new dt(null):new dt(null,this.children);{const t=Me(e),i=this.children.get(t);if(i){const a=i.remove(mt(e));let l;return a.isEmpty()?l=this.children.remove(t):l=this.children.insert(t,a),this.value===null&&l.isEmpty()?new dt(null):new dt(this.value,l)}else return this}}get(e){if(ze(e))return this.value;{const t=Me(e),i=this.children.get(t);return i?i.get(mt(e)):null}}setTree(e,t){if(ze(e))return t;{const i=Me(e),l=(this.children.get(i)||new dt(null)).setTree(mt(e),t);let u;return l.isEmpty()?u=this.children.remove(i):u=this.children.insert(i,l),new dt(this.value,u)}}fold(e){return this.fold_(We(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((a,l)=>{i[a]=l.fold_(At(e,a),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,We(),t)}findOnPath_(e,t,i){const a=this.value?i(t,this.value):!1;if(a)return a;if(ze(e))return null;{const l=Me(e),u=this.children.get(l);return u?u.findOnPath_(mt(e),At(t,l),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,We(),t)}foreachOnPath_(e,t,i){if(ze(e))return this;{this.value&&i(t,this.value);const a=Me(e),l=this.children.get(a);return l?l.foreachOnPath_(mt(e),At(t,a),i):new dt(null)}}foreach(e){this.foreach_(We(),e)}foreach_(e,t){this.children.inorderTraversal((i,a)=>{a.foreach_(At(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class Vi{constructor(e){this.writeTree_=e}static empty(){return new Vi(new dt(null))}}function Cu(n,e,t){if(ze(e))return new Vi(new dt(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){const a=i.path;let l=i.value;const u=xn(a,e);return l=l.updateChild(u,t),new Vi(n.writeTree_.set(a,l))}else{const a=new dt(t),l=n.writeTree_.setTree(e,a);return new Vi(l)}}}function ty(n,e,t){let i=n;return vn(t,(a,l)=>{i=Cu(i,At(e,a),l)}),i}function k0(n,e){if(ze(e))return Vi.empty();{const t=n.writeTree_.setTree(e,new dt(null));return new Vi(t)}}function ny(n,e){return go(n,e)!=null}function go(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(xn(t.path,e)):null}function P0(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Rt,(i,a)=>{e.push(new Le(i,a))}):n.writeTree_.children.inorderTraversal((i,a)=>{a.value!=null&&e.push(new Le(i,a.value))}),e}function ta(n,e){if(ze(e))return n;{const t=go(n,e);return t!=null?new Vi(new dt(t)):new Vi(n.writeTree_.subtree(e))}}function iy(n){return n.writeTree_.isEmpty()}function Dl(n,e){return pI(We(),n.writeTree_,e)}function pI(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((a,l)=>{a===".priority"?(oe(l.value!==null,"Priority writes must always be leaf nodes"),i=l.value):t=pI(At(n,a),l,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(At(n,".priority"),i)),t}}function Dm(n,e){return vI(e,n)}function DU(n,e,t,i,a){oe(i>n.lastWriteId,"Stacking an older write on top of newer ones"),a===void 0&&(a=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:a}),a&&(n.visibleWrites=Cu(n.visibleWrites,e,t)),n.lastWriteId=i}function kU(n,e,t,i){oe(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=ty(n.visibleWrites,e,t),n.lastWriteId=i}function PU(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}function MU(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);oe(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let a=i.visible,l=!1,u=n.allWrites.length-1;for(;a&&u>=0;){const f=n.allWrites[u];f.visible&&(u>=t&&LU(f,i.path)?a=!1:_i(i.path,f.path)&&(l=!0)),u--}if(a){if(l)return jU(n),!0;if(i.snap)n.visibleWrites=k0(n.visibleWrites,i.path);else{const f=i.children;vn(f,m=>{n.visibleWrites=k0(n.visibleWrites,At(i.path,m))})}return!0}else return!1}function LU(n,e){if(n.snap)return _i(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&_i(At(n.path,t),e))return!0;return!1}function jU(n){n.visibleWrites=gI(n.allWrites,VU,We()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function VU(n){return n.visible}function gI(n,e,t){let i=Vi.empty();for(let a=0;a<n.length;++a){const l=n[a];if(e(l)){const u=l.path;let f;if(l.snap)_i(t,u)?(f=xn(t,u),i=Cu(i,f,l.snap)):_i(u,t)&&(f=xn(u,t),i=Cu(i,We(),l.snap.getChild(f)));else if(l.children){if(_i(t,u))f=xn(t,u),i=ty(i,f,l.children);else if(_i(u,t))if(f=xn(u,t),ze(f))i=ty(i,We(),l.children);else{const m=El(l.children,Me(f));if(m){const g=m.getChild(mt(f));i=Cu(i,We(),g)}}}else throw Vl("WriteRecord should have .snap or .children")}}return i}function _I(n,e,t,i,a){if(!i&&!a){const l=go(n.visibleWrites,e);if(l!=null)return l;{const u=ta(n.visibleWrites,e);if(iy(u))return t;if(t==null&&!ny(u,We()))return null;{const f=t||be.EMPTY_NODE;return Dl(u,f)}}}else{const l=ta(n.visibleWrites,e);if(!a&&iy(l))return t;if(!a&&t==null&&!ny(l,We()))return null;{const u=function(g){return(g.visible||a)&&(!i||!~i.indexOf(g.writeId))&&(_i(g.path,e)||_i(e,g.path))},f=gI(n.allWrites,u,e),m=t||be.EMPTY_NODE;return Dl(f,m)}}}function UU(n,e,t){let i=be.EMPTY_NODE;const a=go(n.visibleWrites,e);if(a)return a.isLeafNode()||a.forEachChild(Rt,(l,u)=>{i=i.updateImmediateChild(l,u)}),i;if(t){const l=ta(n.visibleWrites,e);return t.forEachChild(Rt,(u,f)=>{const m=Dl(ta(l,new ut(u)),f);i=i.updateImmediateChild(u,m)}),P0(l).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}else{const l=ta(n.visibleWrites,e);return P0(l).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}}function zU(n,e,t,i,a){oe(i||a,"Either existingEventSnap or existingServerSnap must exist");const l=At(e,t);if(ny(n.visibleWrites,l))return null;{const u=ta(n.visibleWrites,l);return iy(u)?a.getChild(t):Dl(u,a.getChild(t))}}function BU(n,e,t,i){const a=At(e,t),l=go(n.visibleWrites,a);if(l!=null)return l;if(i.isCompleteForChild(t)){const u=ta(n.visibleWrites,a);return Dl(u,i.getNode().getImmediateChild(t))}else return null}function FU(n,e){return go(n.visibleWrites,e)}function HU(n,e,t,i,a,l,u){let f;const m=ta(n.visibleWrites,e),g=go(m,We());if(g!=null)f=g;else if(t!=null)f=Dl(m,t);else return[];if(f=f.withIndex(u),!f.isEmpty()&&!f.isLeafNode()){const y=[],E=u.getCompare(),b=l?f.getReverseIteratorFrom(i,u):f.getIteratorFrom(i,u);let A=b.getNext();for(;A&&y.length<a;)E(A,i)!==0&&y.push(A),A=b.getNext();return y}else return[]}function qU(){return{visibleWrites:Vi.empty(),allWrites:[],lastWriteId:-1}}function Xd(n,e,t,i){return _I(n.writeTree,n.treePath,e,t,i)}function Nv(n,e){return UU(n.writeTree,n.treePath,e)}function M0(n,e,t,i){return zU(n.writeTree,n.treePath,e,t,i)}function Jd(n,e){return FU(n.writeTree,At(n.treePath,e))}function GU(n,e,t,i,a,l){return HU(n.writeTree,n.treePath,e,t,i,a,l)}function xv(n,e,t){return BU(n.writeTree,n.treePath,e,t)}function yI(n,e){return vI(At(n.treePath,e),n.writeTree)}function vI(n,e){return{treePath:n,writeTree:e}}class YU{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;oe(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),oe(i!==".priority","Only non-priority child changes can be tracked.");const a=this.changeMap.get(i);if(a){const l=a.type;if(t==="child_added"&&l==="child_removed")this.changeMap.set(i,Hu(i,e.snapshotNode,a.snapshotNode));else if(t==="child_removed"&&l==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&l==="child_changed")this.changeMap.set(i,Fu(i,a.oldSnap));else if(t==="child_changed"&&l==="child_added")this.changeMap.set(i,xl(i,e.snapshotNode));else if(t==="child_changed"&&l==="child_changed")this.changeMap.set(i,Hu(i,e.snapshotNode,a.oldSnap));else throw Vl("Illegal combination of changes: "+e+" occurred after "+a)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}class KU{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const EI=new KU;class Ov{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new fa(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return xv(this.writes_,e,i)}}getChildAfterChild(e,t,i){const a=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ao(this.viewCache_),l=GU(this.writes_,a,t,1,i,e);return l.length===0?null:l[0]}}function QU(n){return{filter:n}}function WU(n,e){oe(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),oe(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function $U(n,e,t,i,a){const l=new YU;let u,f;if(t.type===ji.OVERWRITE){const g=t;g.source.fromUser?u=sy(n,e,g.path,g.snap,i,a,l):(oe(g.source.fromServer,"Unknown source."),f=g.source.tagged||e.serverCache.isFiltered()&&!ze(g.path),u=Zd(n,e,g.path,g.snap,i,a,f,l))}else if(t.type===ji.MERGE){const g=t;g.source.fromUser?u=JU(n,e,g.path,g.children,i,a,l):(oe(g.source.fromServer,"Unknown source."),f=g.source.tagged||e.serverCache.isFiltered(),u=ry(n,e,g.path,g.children,i,a,f,l))}else if(t.type===ji.ACK_USER_WRITE){const g=t;g.revert?u=t4(n,e,g.path,i,a,l):u=ZU(n,e,g.path,g.affectedTree,i,a,l)}else if(t.type===ji.LISTEN_COMPLETE)u=e4(n,e,t.path,i,l);else throw Vl("Unknown operation type: "+t.type);const m=l.getChanges();return XU(e,u,m),{viewCache:u,changes:m}}function XU(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const a=i.getNode().isLeafNode()||i.getNode().isEmpty(),l=$d(n);(t.length>0||!n.eventCache.isFullyInitialized()||a&&!i.getNode().equals(l)||!i.getNode().getPriority().equals(l.getPriority()))&&t.push(fI($d(e)))}}function TI(n,e,t,i,a,l){const u=e.eventCache;if(Jd(i,t)!=null)return e;{let f,m;if(ze(t))if(oe(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const g=ao(e),y=g instanceof be?g:be.EMPTY_NODE,E=Nv(i,y);f=n.filter.updateFullNode(e.eventCache.getNode(),E,l)}else{const g=Xd(i,ao(e));f=n.filter.updateFullNode(e.eventCache.getNode(),g,l)}else{const g=Me(t);if(g===".priority"){oe(ha(t)===1,"Can't have a priority with additional path components");const y=u.getNode();m=e.serverCache.getNode();const E=M0(i,t,y,m);E!=null?f=n.filter.updatePriority(y,E):f=u.getNode()}else{const y=mt(t);let E;if(u.isCompleteForChild(g)){m=e.serverCache.getNode();const b=M0(i,t,u.getNode(),m);b!=null?E=u.getNode().getImmediateChild(g).updateChild(y,b):E=u.getNode().getImmediateChild(g)}else E=xv(i,g,e.serverCache);E!=null?f=n.filter.updateChild(u.getNode(),g,E,y,a,l):f=u.getNode()}}return wu(e,f,u.isFullyInitialized()||ze(t),n.filter.filtersNodes())}}function Zd(n,e,t,i,a,l,u,f){const m=e.serverCache;let g;const y=u?n.filter:n.filter.getIndexedFilter();if(ze(t))g=y.updateFullNode(m.getNode(),i,null);else if(y.filtersNodes()&&!m.isFiltered()){const A=m.getNode().updateChild(t,i);g=y.updateFullNode(m.getNode(),A,null)}else{const A=Me(t);if(!m.isCompleteForPath(t)&&ha(t)>1)return e;const I=mt(t),L=m.getNode().getImmediateChild(A).updateChild(I,i);A===".priority"?g=y.updatePriority(m.getNode(),L):g=y.updateChild(m.getNode(),A,L,I,EI,null)}const E=mI(e,g,m.isFullyInitialized()||ze(t),y.filtersNodes()),b=new Ov(a,E,l);return TI(n,E,t,a,b,f)}function sy(n,e,t,i,a,l,u){const f=e.eventCache;let m,g;const y=new Ov(a,e,l);if(ze(t))g=n.filter.updateFullNode(e.eventCache.getNode(),i,u),m=wu(e,g,!0,n.filter.filtersNodes());else{const E=Me(t);if(E===".priority")g=n.filter.updatePriority(e.eventCache.getNode(),i),m=wu(e,g,f.isFullyInitialized(),f.isFiltered());else{const b=mt(t),A=f.getNode().getImmediateChild(E);let I;if(ze(b))I=i;else{const V=y.getCompleteChild(E);V!=null?Ev(b)===".priority"&&V.getChild(rI(b)).isEmpty()?I=V:I=V.updateChild(b,i):I=be.EMPTY_NODE}if(A.equals(I))m=e;else{const V=n.filter.updateChild(f.getNode(),E,I,b,y,u);m=wu(e,V,f.isFullyInitialized(),n.filter.filtersNodes())}}}return m}function L0(n,e){return n.eventCache.isCompleteForChild(e)}function JU(n,e,t,i,a,l,u){let f=e;return i.foreach((m,g)=>{const y=At(t,m);L0(e,Me(y))&&(f=sy(n,f,y,g,a,l,u))}),i.foreach((m,g)=>{const y=At(t,m);L0(e,Me(y))||(f=sy(n,f,y,g,a,l,u))}),f}function j0(n,e,t){return t.foreach((i,a)=>{e=e.updateChild(i,a)}),e}function ry(n,e,t,i,a,l,u,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let m=e,g;ze(t)?g=i:g=new dt(null).setTree(t,i);const y=e.serverCache.getNode();return g.children.inorderTraversal((E,b)=>{if(y.hasChild(E)){const A=e.serverCache.getNode().getImmediateChild(E),I=j0(n,A,b);m=Zd(n,m,new ut(E),I,a,l,u,f)}}),g.children.inorderTraversal((E,b)=>{const A=!e.serverCache.isCompleteForChild(E)&&b.value===null;if(!y.hasChild(E)&&!A){const I=e.serverCache.getNode().getImmediateChild(E),V=j0(n,I,b);m=Zd(n,m,new ut(E),V,a,l,u,f)}}),m}function ZU(n,e,t,i,a,l,u){if(Jd(a,t)!=null)return e;const f=e.serverCache.isFiltered(),m=e.serverCache;if(i.value!=null){if(ze(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return Zd(n,e,t,m.getNode().getChild(t),a,l,f,u);if(ze(t)){let g=new dt(null);return m.getNode().forEachChild(vl,(y,E)=>{g=g.set(new ut(y),E)}),ry(n,e,t,g,a,l,f,u)}else return e}else{let g=new dt(null);return i.foreach((y,E)=>{const b=At(t,y);m.isCompleteForPath(b)&&(g=g.set(y,m.getNode().getChild(b)))}),ry(n,e,t,g,a,l,f,u)}}function e4(n,e,t,i,a){const l=e.serverCache,u=mI(e,l.getNode(),l.isFullyInitialized()||ze(t),l.isFiltered());return TI(n,u,t,i,EI,a)}function t4(n,e,t,i,a,l){let u;if(Jd(i,t)!=null)return e;{const f=new Ov(i,e,a),m=e.eventCache.getNode();let g;if(ze(t)||Me(t)===".priority"){let y;if(e.serverCache.isFullyInitialized())y=Xd(i,ao(e));else{const E=e.serverCache.getNode();oe(E instanceof be,"serverChildren would be complete if leaf node"),y=Nv(i,E)}y=y,g=n.filter.updateFullNode(m,y,l)}else{const y=Me(t);let E=xv(i,y,e.serverCache);E==null&&e.serverCache.isCompleteForChild(y)&&(E=m.getImmediateChild(y)),E!=null?g=n.filter.updateChild(m,y,E,mt(t),f,l):e.eventCache.getNode().hasChild(y)?g=n.filter.updateChild(m,y,be.EMPTY_NODE,mt(t),f,l):g=m,g.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=Xd(i,ao(e)),u.isLeafNode()&&(g=n.filter.updateFullNode(g,u,l)))}return u=e.serverCache.isFullyInitialized()||Jd(i,We())!=null,wu(e,g,u,n.filter.filtersNodes())}}class n4{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,a=new wv(i.getIndex()),l=EU(i);this.processor_=QU(l);const u=t.serverCache,f=t.eventCache,m=a.updateFullNode(be.EMPTY_NODE,u.getNode(),null),g=l.updateFullNode(be.EMPTY_NODE,f.getNode(),null),y=new fa(m,u.isFullyInitialized(),a.filtersNodes()),E=new fa(g,f.isFullyInitialized(),l.filtersNodes());this.viewCache_=Om(E,y),this.eventGenerator_=new RU(this.query_)}get query(){return this.query_}}function i4(n){return n.viewCache_.serverCache.getNode()}function s4(n){return $d(n.viewCache_)}function r4(n,e){const t=ao(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!ze(e)&&!t.getImmediateChild(Me(e)).isEmpty())?t.getChild(e):null}function V0(n){return n.eventRegistrations_.length===0}function a4(n,e){n.eventRegistrations_.push(e)}function U0(n,e,t){const i=[];if(t){oe(e==null,"A cancel should cancel all event registrations.");const a=n.query._path;n.eventRegistrations_.forEach(l=>{const u=l.createCancelEvent(t,a);u&&i.push(u)})}if(e){let a=[];for(let l=0;l<n.eventRegistrations_.length;++l){const u=n.eventRegistrations_[l];if(!u.matches(e))a.push(u);else if(e.hasAnyCallback()){a=a.concat(n.eventRegistrations_.slice(l+1));break}}n.eventRegistrations_=a}else n.eventRegistrations_=[];return i}function z0(n,e,t,i){e.type===ji.MERGE&&e.source.queryId!==null&&(oe(ao(n.viewCache_),"We should always have a full cache before handling merges"),oe($d(n.viewCache_),"Missing event cache, even though we have a server cache"));const a=n.viewCache_,l=$U(n.processor_,a,e,t,i);return WU(n.processor_,l.viewCache),oe(l.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,SI(n,l.changes,l.viewCache.eventCache.getNode(),null)}function o4(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Rt,(l,u)=>{i.push(xl(l,u))}),t.isFullyInitialized()&&i.push(fI(t.getNode())),SI(n,i,t.getNode(),e)}function SI(n,e,t,i){const a=i?[i]:n.eventRegistrations_;return IU(n.eventGenerator_,e,t,a)}let em;class bI{constructor(){this.views=new Map}}function l4(n){oe(!em,"__referenceConstructor has already been defined"),em=n}function c4(){return oe(em,"Reference.ts has not been loaded"),em}function u4(n){return n.views.size===0}function Dv(n,e,t,i){const a=e.source.queryId;if(a!==null){const l=n.views.get(a);return oe(l!=null,"SyncTree gave us an op for an invalid query."),z0(l,e,t,i)}else{let l=[];for(const u of n.views.values())l=l.concat(z0(u,e,t,i));return l}}function wI(n,e,t,i,a){const l=e._queryIdentifier,u=n.views.get(l);if(!u){let f=Xd(t,a?i:null),m=!1;f?m=!0:i instanceof be?(f=Nv(t,i),m=!1):(f=be.EMPTY_NODE,m=!1);const g=Om(new fa(f,m,!1),new fa(i,a,!1));return new n4(e,g)}return u}function h4(n,e,t,i,a,l){const u=wI(n,e,i,a,l);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),a4(u,t),o4(u,t)}function f4(n,e,t,i){const a=e._queryIdentifier,l=[];let u=[];const f=da(n);if(a==="default")for(const[m,g]of n.views.entries())u=u.concat(U0(g,t,i)),V0(g)&&(n.views.delete(m),g.query._queryParams.loadsAllData()||l.push(g.query));else{const m=n.views.get(a);m&&(u=u.concat(U0(m,t,i)),V0(m)&&(n.views.delete(a),m.query._queryParams.loadsAllData()||l.push(m.query)))}return f&&!da(n)&&l.push(new(c4())(e._repo,e._path)),{removed:l,events:u}}function CI(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function na(n,e){let t=null;for(const i of n.views.values())t=t||r4(i,e);return t}function AI(n,e){if(e._queryParams.loadsAllData())return km(n);{const i=e._queryIdentifier;return n.views.get(i)}}function RI(n,e){return AI(n,e)!=null}function da(n){return km(n)!=null}function km(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let tm;function d4(n){oe(!tm,"__referenceConstructor has already been defined"),tm=n}function m4(){return oe(tm,"Reference.ts has not been loaded"),tm}let p4=1;class B0{constructor(e){this.listenProvider_=e,this.syncPointTree_=new dt(null),this.pendingWriteTree_=qU(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function II(n,e,t,i,a){return DU(n.pendingWriteTree_,e,t,i,a),a?ql(n,new ro(Av(),e,t)):[]}function g4(n,e,t,i){kU(n.pendingWriteTree_,e,t,i);const a=dt.fromObject(t);return ql(n,new Ol(Av(),e,a))}function Qr(n,e,t=!1){const i=PU(n.pendingWriteTree_,e);if(MU(n.pendingWriteTree_,e)){let l=new dt(null);return i.snap!=null?l=l.set(We(),!0):vn(i.children,u=>{l=l.set(new ut(u),!0)}),ql(n,new Wd(i.path,l,t))}else return[]}function fh(n,e,t){return ql(n,new ro(Rv(),e,t))}function _4(n,e,t){const i=dt.fromObject(t);return ql(n,new Ol(Rv(),e,i))}function y4(n,e){return ql(n,new Gu(Rv(),e))}function v4(n,e,t){const i=Pv(n,t);if(i){const a=Mv(i),l=a.path,u=a.queryId,f=xn(l,e),m=new Gu(Iv(u),f);return Lv(n,l,m)}else return[]}function nm(n,e,t,i,a=!1){const l=e._path,u=n.syncPointTree_.get(l);let f=[];if(u&&(e._queryIdentifier==="default"||RI(u,e))){const m=f4(u,e,t,i);u4(u)&&(n.syncPointTree_=n.syncPointTree_.remove(l));const g=m.removed;if(f=m.events,!a){const y=g.findIndex(b=>b._queryParams.loadsAllData())!==-1,E=n.syncPointTree_.findOnPath(l,(b,A)=>da(A));if(y&&!E){const b=n.syncPointTree_.subtree(l);if(!b.isEmpty()){const A=S4(b);for(let I=0;I<A.length;++I){const V=A[I],L=V.query,X=DI(n,V);n.listenProvider_.startListening(Au(L),Yu(n,L),X.hashFn,X.onComplete)}}}!E&&g.length>0&&!i&&(y?n.listenProvider_.stopListening(Au(e),null):g.forEach(b=>{const A=n.queryToTagMap.get(Pm(b));n.listenProvider_.stopListening(Au(b),A)}))}b4(n,g)}return f}function NI(n,e,t,i){const a=Pv(n,i);if(a!=null){const l=Mv(a),u=l.path,f=l.queryId,m=xn(u,e),g=new ro(Iv(f),m,t);return Lv(n,u,g)}else return[]}function E4(n,e,t,i){const a=Pv(n,i);if(a){const l=Mv(a),u=l.path,f=l.queryId,m=xn(u,e),g=dt.fromObject(t),y=new Ol(Iv(f),m,g);return Lv(n,u,y)}else return[]}function ay(n,e,t,i=!1){const a=e._path;let l=null,u=!1;n.syncPointTree_.foreachOnPath(a,(b,A)=>{const I=xn(b,a);l=l||na(A,I),u=u||da(A)});let f=n.syncPointTree_.get(a);f?(u=u||da(f),l=l||na(f,We())):(f=new bI,n.syncPointTree_=n.syncPointTree_.set(a,f));let m;l!=null?m=!0:(m=!1,l=be.EMPTY_NODE,n.syncPointTree_.subtree(a).foreachChild((A,I)=>{const V=na(I,We());V&&(l=l.updateImmediateChild(A,V))}));const g=RI(f,e);if(!g&&!e._queryParams.loadsAllData()){const b=Pm(e);oe(!n.queryToTagMap.has(b),"View does not exist, but we have a tag");const A=w4();n.queryToTagMap.set(b,A),n.tagToQueryMap.set(A,b)}const y=Dm(n.pendingWriteTree_,a);let E=h4(f,e,t,y,l,m);if(!g&&!u&&!i){const b=AI(f,e);E=E.concat(C4(n,e,b))}return E}function kv(n,e,t){const a=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(e,(u,f)=>{const m=xn(u,e),g=na(f,m);if(g)return g});return _I(a,e,l,t,!0)}function T4(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(g,y)=>{const E=xn(g,t);i=i||na(y,E)});let a=n.syncPointTree_.get(t);a?i=i||na(a,We()):(a=new bI,n.syncPointTree_=n.syncPointTree_.set(t,a));const l=i!=null,u=l?new fa(i,!0,!1):null,f=Dm(n.pendingWriteTree_,e._path),m=wI(a,e,f,l?u.getNode():be.EMPTY_NODE,l);return s4(m)}function ql(n,e){return xI(e,n.syncPointTree_,null,Dm(n.pendingWriteTree_,We()))}function xI(n,e,t,i){if(ze(n.path))return OI(n,e,t,i);{const a=e.get(We());t==null&&a!=null&&(t=na(a,We()));let l=[];const u=Me(n.path),f=n.operationForChild(u),m=e.children.get(u);if(m&&f){const g=t?t.getImmediateChild(u):null,y=yI(i,u);l=l.concat(xI(f,m,g,y))}return a&&(l=l.concat(Dv(a,n,i,t))),l}}function OI(n,e,t,i){const a=e.get(We());t==null&&a!=null&&(t=na(a,We()));let l=[];return e.children.inorderTraversal((u,f)=>{const m=t?t.getImmediateChild(u):null,g=yI(i,u),y=n.operationForChild(u);y&&(l=l.concat(OI(y,f,m,g)))}),a&&(l=l.concat(Dv(a,n,i,t))),l}function DI(n,e){const t=e.query,i=Yu(n,t);return{hashFn:()=>(i4(e)||be.EMPTY_NODE).hash(),onComplete:a=>{if(a==="ok")return i?v4(n,t._path,i):y4(n,t._path);{const l=yV(a,t);return nm(n,t,null,l)}}}}function Yu(n,e){const t=Pm(e);return n.queryToTagMap.get(t)}function Pm(n){return n._path.toString()+"$"+n._queryIdentifier}function Pv(n,e){return n.tagToQueryMap.get(e)}function Mv(n){const e=n.indexOf("$");return oe(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new ut(n.substr(0,e))}}function Lv(n,e,t){const i=n.syncPointTree_.get(e);oe(i,"Missing sync point for query tag that we're tracking");const a=Dm(n.pendingWriteTree_,e);return Dv(i,t,a,null)}function S4(n){return n.fold((e,t,i)=>{if(t&&da(t))return[km(t)];{let a=[];return t&&(a=CI(t)),vn(i,(l,u)=>{a=a.concat(u)}),a}})}function Au(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(m4())(n._repo,n._path):n}function b4(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const a=Pm(i),l=n.queryToTagMap.get(a);n.queryToTagMap.delete(a),n.tagToQueryMap.delete(l)}}}function w4(){return p4++}function C4(n,e,t){const i=e._path,a=Yu(n,e),l=DI(n,t),u=n.listenProvider_.startListening(Au(e),a,l.hashFn,l.onComplete),f=n.syncPointTree_.subtree(i);if(a)oe(!da(f.value),"If we're adding a query, it shouldn't be shadowed");else{const m=f.fold((g,y,E)=>{if(!ze(g)&&y&&da(y))return[km(y).query];{let b=[];return y&&(b=b.concat(CI(y).map(A=>A.query))),vn(E,(A,I)=>{b=b.concat(I)}),b}});for(let g=0;g<m.length;++g){const y=m[g];n.listenProvider_.stopListening(Au(y),Yu(n,y))}}return u}class jv{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new jv(t)}node(){return this.node_}}class Vv{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=At(this.path_,e);return new Vv(this.syncTree_,t)}node(){return kv(this.syncTree_,this.path_)}}const A4=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},F0=function(n,e,t){if(!n||typeof n!="object")return n;if(oe(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return R4(n[".sv"],e,t);if(typeof n[".sv"]=="object")return I4(n[".sv"],e);oe(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},R4=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:oe(!1,"Unexpected server value: "+n)}},I4=function(n,e,t){n.hasOwnProperty("increment")||oe(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&oe(!1,"Unexpected increment value: "+i);const a=e.node();if(oe(a!==null&&typeof a<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return i;const u=a.getValue();return typeof u!="number"?i:u+i},kI=function(n,e,t,i){return Uv(e,new Vv(t,n),i)},PI=function(n,e,t){return Uv(n,new jv(e),t)};function Uv(n,e,t){const i=n.getPriority().val(),a=F0(i,e.getImmediateChild(".priority"),t);let l;if(n.isLeafNode()){const u=n,f=F0(u.getValue(),e,t);return f!==u.getValue()||a!==u.getPriority().val()?new nn(f,Wt(a)):n}else{const u=n;return l=u,a!==u.getPriority().val()&&(l=l.updatePriority(new nn(a))),u.forEachChild(Rt,(f,m)=>{const g=Uv(m,e.getImmediateChild(f),t);g!==m&&(l=l.updateImmediateChild(f,g))}),l}}class zv{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function Bv(n,e){let t=e instanceof ut?e:new ut(e),i=n,a=Me(t);for(;a!==null;){const l=El(i.node.children,a)||{children:{},childCount:0};i=new zv(a,i,l),t=mt(t),a=Me(t)}return i}function Gl(n){return n.node.value}function MI(n,e){n.node.value=e,oy(n)}function LI(n){return n.node.childCount>0}function N4(n){return Gl(n)===void 0&&!LI(n)}function Mm(n,e){vn(n.node.children,(t,i)=>{e(new zv(t,n,i))})}function jI(n,e,t,i){t&&e(n),Mm(n,a=>{jI(a,e,!0)})}function x4(n,e,t){let i=n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function dh(n){return new ut(n.parent===null?n.name:dh(n.parent)+"/"+n.name)}function oy(n){n.parent!==null&&O4(n.parent,n.name,n)}function O4(n,e,t){const i=N4(t),a=Ts(n.node.children,e);i&&a?(delete n.node.children[e],n.node.childCount--,oy(n)):!i&&!a&&(n.node.children[e]=t.node,n.node.childCount++,oy(n))}const D4=/[\[\].#$\/\u0000-\u001F\u007F]/,k4=/[\[\].#$\u0000-\u001F\u007F]/,__=10*1024*1024,Fv=function(n){return typeof n=="string"&&n.length!==0&&!D4.test(n)},VI=function(n){return typeof n=="string"&&n.length!==0&&!k4.test(n)},P4=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),VI(n)},M4=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!pv(n)||n&&typeof n=="object"&&Ts(n,".sv")},UI=function(n,e,t,i){i&&e===void 0||Lm(hm(n,"value"),e,t)},Lm=function(n,e,t){const i=t instanceof ut?new JV(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+$a(i));if(typeof e=="function")throw new Error(n+"contains a function "+$a(i)+" with contents = "+e.toString());if(pv(e))throw new Error(n+"contains "+e.toString()+" "+$a(i));if(typeof e=="string"&&e.length>__/3&&fm(e)>__)throw new Error(n+"contains a string greater than "+__+" utf8 bytes "+$a(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let a=!1,l=!1;if(vn(e,(u,f)=>{if(u===".value")a=!0;else if(u!==".priority"&&u!==".sv"&&(l=!0,!Fv(u)))throw new Error(n+" contains an invalid key ("+u+") "+$a(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);ZV(i,u),Lm(n,f,i),eU(i)}),a&&l)throw new Error(n+' contains ".value" child '+$a(i)+" in addition to actual children.")}},L4=function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const l=Bu(i);for(let u=0;u<l.length;u++)if(!(l[u]===".priority"&&u===l.length-1)){if(!Fv(l[u]))throw new Error(n+"contains an invalid key ("+l[u]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(XV);let a=null;for(t=0;t<e.length;t++){if(i=e[t],a!==null&&_i(a,i))throw new Error(n+"contains a path "+a.toString()+" that is ancestor of another path "+i.toString());a=i}},j4=function(n,e,t,i){const a=hm(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(a+" must be an object containing the children to replace.");const l=[];vn(e,(u,f)=>{const m=new ut(u);if(Lm(a,f,At(t,m)),Ev(m)===".priority"&&!M4(f))throw new Error(a+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(m)}),L4(a,l)},zI=function(n,e,t,i){if(!VI(t))throw new Error(hm(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},V4=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),zI(n,e,t)},Hv=function(n,e){if(Me(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},U4=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Fv(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!P4(t))throw new Error(hm(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class z4{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function jm(n,e){let t=null;for(let i=0;i<e.length;i++){const a=e[i],l=a.getPath();t!==null&&!Tv(l,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:l}),t.events.push(a)}t&&n.eventLists_.push(t)}function BI(n,e,t){jm(n,t),FI(n,i=>Tv(i,e))}function vi(n,e,t){jm(n,t),FI(n,i=>_i(i,e)||_i(e,i))}function FI(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const a=n.eventLists_[i];if(a){const l=a.path;e(l)?(B4(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function B4(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const i=t.getEventRunner();Su&&pn("event: "+t.toString()),Hl(i)}}}const F4="repo_interrupt",H4=25;class q4{constructor(e,t,i,a){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new z4,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Qd(),this.transactionQueueTree_=new zv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function G4(n,e,t){if(n.stats_=yv(n.repoInfo_),n.forceRestClient_||SV())n.server_=new Kd(n.repoInfo_,(i,a,l,u)=>{H0(n,i,a,l,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>q0(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{$t(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Ws(n.repoInfo_,e,(i,a,l,u)=>{H0(n,i,a,l,u)},i=>{q0(n,i)},i=>{Y4(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=RV(n.repoInfo_,()=>new AU(n.stats_,n.server_)),n.infoData_=new TU,n.infoSyncTree_=new B0({startListening:(i,a,l,u)=>{let f=[];const m=n.infoData_.getNode(i._path);return m.isEmpty()||(f=fh(n.infoSyncTree_,i._path,m),setTimeout(()=>{u("ok")},0)),f},stopListening:()=>{}}),qv(n,"connected",!1),n.serverSyncTree_=new B0({startListening:(i,a,l,u)=>(n.server_.listen(i,l,a,(f,m)=>{const g=u(f,m);vi(n.eventQueue_,i._path,g)}),[]),stopListening:(i,a)=>{n.server_.unlisten(i,a)}})}function HI(n){const t=n.infoData_.getNode(new ut(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function Vm(n){return A4({timestamp:HI(n)})}function H0(n,e,t,i,a){n.dataUpdateCount++;const l=new ut(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(a)if(i){const m=wd(t,g=>Wt(g));u=E4(n.serverSyncTree_,l,m,a)}else{const m=Wt(t);u=NI(n.serverSyncTree_,l,m,a)}else if(i){const m=wd(t,g=>Wt(g));u=_4(n.serverSyncTree_,l,m)}else{const m=Wt(t);u=fh(n.serverSyncTree_,l,m)}let f=l;u.length>0&&(f=kl(n,l)),vi(n.eventQueue_,f,u)}function q0(n,e){qv(n,"connected",e),e===!1&&$4(n)}function Y4(n,e){vn(e,(t,i)=>{qv(n,t,i)})}function qv(n,e,t){const i=new ut("/.info/"+e),a=Wt(t);n.infoData_.updateSnapshot(i,a);const l=fh(n.infoSyncTree_,i,a);vi(n.eventQueue_,i,l)}function Gv(n){return n.nextWriteId_++}function K4(n,e,t){const i=T4(n.serverSyncTree_,e);return i!=null?Promise.resolve(i):n.server_.get(e).then(a=>{const l=Wt(a).withIndex(e._queryParams.getIndex());ay(n.serverSyncTree_,e,t,!0);let u;if(e._queryParams.loadsAllData())u=fh(n.serverSyncTree_,e._path,l);else{const f=Yu(n.serverSyncTree_,e);u=NI(n.serverSyncTree_,e._path,l,f)}return vi(n.eventQueue_,e._path,u),nm(n.serverSyncTree_,e,t,null,!0),l},a=>(mh(n,"get for query "+$t(e)+" failed: "+a),Promise.reject(new Error(a))))}function Q4(n,e,t,i,a){mh(n,"set",{path:e.toString(),value:t,priority:i});const l=Vm(n),u=Wt(t,i),f=kv(n.serverSyncTree_,e),m=PI(u,f,l),g=Gv(n),y=II(n.serverSyncTree_,e,m,g,!0);jm(n.eventQueue_,y),n.server_.put(e.toString(),u.val(!0),(b,A)=>{const I=b==="ok";I||On("set at "+e+" failed: "+b);const V=Qr(n.serverSyncTree_,g,!I);vi(n.eventQueue_,e,V),ly(n,a,b,A)});const E=Kv(n,e);kl(n,E),vi(n.eventQueue_,E,[])}function W4(n,e,t,i){mh(n,"update",{path:e.toString(),value:t});let a=!0;const l=Vm(n),u={};if(vn(t,(f,m)=>{a=!1,u[f]=kI(At(e,f),Wt(m),n.serverSyncTree_,l)}),a)pn("update() called with empty data.  Don't do anything."),ly(n,i,"ok",void 0);else{const f=Gv(n),m=g4(n.serverSyncTree_,e,u,f);jm(n.eventQueue_,m),n.server_.merge(e.toString(),t,(g,y)=>{const E=g==="ok";E||On("update at "+e+" failed: "+g);const b=Qr(n.serverSyncTree_,f,!E),A=b.length>0?kl(n,e):e;vi(n.eventQueue_,A,b),ly(n,i,g,y)}),vn(t,g=>{const y=Kv(n,At(e,g));kl(n,y)}),vi(n.eventQueue_,e,[])}}function $4(n){mh(n,"onDisconnectEvents");const e=Vm(n),t=Qd();ey(n.onDisconnect_,We(),(a,l)=>{const u=kI(a,l,n.serverSyncTree_,e);dI(t,a,u)});let i=[];ey(t,We(),(a,l)=>{i=i.concat(fh(n.serverSyncTree_,a,l));const u=Kv(n,a);kl(n,u)}),n.onDisconnect_=Qd(),vi(n.eventQueue_,We(),i)}function X4(n,e,t){let i;Me(e._path)===".info"?i=ay(n.infoSyncTree_,e,t):i=ay(n.serverSyncTree_,e,t),BI(n.eventQueue_,e._path,i)}function J4(n,e,t){let i;Me(e._path)===".info"?i=nm(n.infoSyncTree_,e,t):i=nm(n.serverSyncTree_,e,t),BI(n.eventQueue_,e._path,i)}function Z4(n){n.persistentConnection_&&n.persistentConnection_.interrupt(F4)}function mh(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),pn(t,...e)}function ly(n,e,t,i){e&&Hl(()=>{if(t==="ok")e(null);else{const a=(t||"error").toUpperCase();let l=a;i&&(l+=": "+i);const u=new Error(l);u.code=a,e(u)}})}function qI(n,e,t){return kv(n.serverSyncTree_,e,t)||be.EMPTY_NODE}function Yv(n,e=n.transactionQueueTree_){if(e||Um(n,e),Gl(e)){const t=YI(n,e);oe(t.length>0,"Sending zero length transaction queue"),t.every(a=>a.status===0)&&e6(n,dh(e),t)}else LI(e)&&Mm(e,t=>{Yv(n,t)})}function e6(n,e,t){const i=t.map(g=>g.currentWriteId),a=qI(n,e,i);let l=a;const u=a.hash();for(let g=0;g<t.length;g++){const y=t[g];oe(y.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),y.status=1,y.retryCount++;const E=xn(e,y.path);l=l.updateChild(E,y.currentOutputSnapshotRaw)}const f=l.val(!0),m=e;n.server_.put(m.toString(),f,g=>{mh(n,"transaction put response",{path:m.toString(),status:g});let y=[];if(g==="ok"){const E=[];for(let b=0;b<t.length;b++)t[b].status=2,y=y.concat(Qr(n.serverSyncTree_,t[b].currentWriteId)),t[b].onComplete&&E.push(()=>t[b].onComplete(null,!0,t[b].currentOutputSnapshotResolved)),t[b].unwatcher();Um(n,Bv(n.transactionQueueTree_,e)),Yv(n,n.transactionQueueTree_),vi(n.eventQueue_,e,y);for(let b=0;b<E.length;b++)Hl(E[b])}else{if(g==="datastale")for(let E=0;E<t.length;E++)t[E].status===3?t[E].status=4:t[E].status=0;else{On("transaction at "+m.toString()+" failed: "+g);for(let E=0;E<t.length;E++)t[E].status=4,t[E].abortReason=g}kl(n,e)}},u)}function kl(n,e){const t=GI(n,e),i=dh(t),a=YI(n,t);return t6(n,a,i),i}function t6(n,e,t){if(e.length===0)return;const i=[];let a=[];const u=e.filter(f=>f.status===0).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const m=e[f],g=xn(t,m.path);let y=!1,E;if(oe(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),m.status===4)y=!0,E=m.abortReason,a=a.concat(Qr(n.serverSyncTree_,m.currentWriteId,!0));else if(m.status===0)if(m.retryCount>=H4)y=!0,E="maxretry",a=a.concat(Qr(n.serverSyncTree_,m.currentWriteId,!0));else{const b=qI(n,m.path,u);m.currentInputSnapshot=b;const A=e[f].update(b.val());if(A!==void 0){Lm("transaction failed: Data returned ",A,m.path);let I=Wt(A);typeof A=="object"&&A!=null&&Ts(A,".priority")||(I=I.updatePriority(b.getPriority()));const L=m.currentWriteId,X=Vm(n),K=PI(I,b,X);m.currentOutputSnapshotRaw=I,m.currentOutputSnapshotResolved=K,m.currentWriteId=Gv(n),u.splice(u.indexOf(L),1),a=a.concat(II(n.serverSyncTree_,m.path,K,m.currentWriteId,m.applyLocally)),a=a.concat(Qr(n.serverSyncTree_,L,!0))}else y=!0,E="nodata",a=a.concat(Qr(n.serverSyncTree_,m.currentWriteId,!0))}vi(n.eventQueue_,t,a),a=[],y&&(e[f].status=2,(function(b){setTimeout(b,Math.floor(0))})(e[f].unwatcher),e[f].onComplete&&(E==="nodata"?i.push(()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot)):i.push(()=>e[f].onComplete(new Error(E),!1,null))))}Um(n,n.transactionQueueTree_);for(let f=0;f<i.length;f++)Hl(i[f]);Yv(n,n.transactionQueueTree_)}function GI(n,e){let t,i=n.transactionQueueTree_;for(t=Me(e);t!==null&&Gl(i)===void 0;)i=Bv(i,t),e=mt(e),t=Me(e);return i}function YI(n,e){const t=[];return KI(n,e,t),t.sort((i,a)=>i.order-a.order),t}function KI(n,e,t){const i=Gl(e);if(i)for(let a=0;a<i.length;a++)t.push(i[a]);Mm(e,a=>{KI(n,a,t)})}function Um(n,e){const t=Gl(e);if(t){let i=0;for(let a=0;a<t.length;a++)t[a].status!==2&&(t[i]=t[a],i++);t.length=i,MI(e,t.length>0?t:void 0)}Mm(e,i=>{Um(n,i)})}function Kv(n,e){const t=dh(GI(n,e)),i=Bv(n.transactionQueueTree_,e);return x4(i,a=>{y_(n,a)}),y_(n,i),jI(i,a=>{y_(n,a)}),t}function y_(n,e){const t=Gl(e);if(t){const i=[];let a=[],l=-1;for(let u=0;u<t.length;u++)t[u].status===3||(t[u].status===1?(oe(l===u-1,"All SENT items should be at beginning of queue."),l=u,t[u].status=3,t[u].abortReason="set"):(oe(t[u].status===0,"Unexpected transaction status in abort"),t[u].unwatcher(),a=a.concat(Qr(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&i.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));l===-1?MI(e,void 0):t.length=l+1,vi(n.eventQueue_,dh(e),a);for(let u=0;u<i.length;u++)Hl(i[u])}}function n6(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let a=t[i];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch{}e+="/"+a}return e}function i6(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):On(`Invalid query segment '${t}' in query '${n}'`)}return e}const G0=function(n,e){const t=s6(n),i=t.namespace;t.domain==="firebase.com"&&ar(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&ar("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||dV();const a=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new $R(t.host,t.secure,i,a,e,"",i!==t.subdomain),path:new ut(t.pathString)}},s6=function(n){let e="",t="",i="",a="",l="",u=!0,f="https",m=443;if(typeof n=="string"){let g=n.indexOf("//");g>=0&&(f=n.substring(0,g-1),n=n.substring(g+2));let y=n.indexOf("/");y===-1&&(y=n.length);let E=n.indexOf("?");E===-1&&(E=n.length),e=n.substring(0,Math.min(y,E)),y<E&&(a=n6(n.substring(y,E)));const b=i6(n.substring(Math.min(n.length,E)));g=e.indexOf(":"),g>=0?(u=f==="https"||f==="wss",m=parseInt(e.substring(g+1),10)):g=e.length;const A=e.slice(0,g);if(A.toLowerCase()==="localhost")t="localhost";else if(A.split(".").length<=2)t=A;else{const I=e.indexOf(".");i=e.substring(0,I).toLowerCase(),t=e.substring(I+1),l=i}"ns"in b&&(l=b.ns)}return{host:e,port:m,domain:t,subdomain:i,secure:u,scheme:f,pathString:a,namespace:l}};const Y0="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",r6=(function(){let n=0;const e=[];return function(t){const i=t===n;n=t;let a;const l=new Array(8);for(a=7;a>=0;a--)l[a]=Y0.charAt(t%64),t=Math.floor(t/64);oe(t===0,"Cannot push at time == 0");let u=l.join("");if(i){for(a=11;a>=0&&e[a]===63;a--)e[a]=0;e[a]++}else for(a=0;a<12;a++)e[a]=Math.floor(Math.random()*64);for(a=0;a<12;a++)u+=Y0.charAt(e[a]);return oe(u.length===20,"nextPushId: Length should be 20."),u}})();class a6{constructor(e,t,i,a){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=a}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+$t(this.snapshot.exportVal())}}class o6{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class QI{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return oe(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Qv{constructor(e,t,i,a){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=a}get key(){return ze(this._path)?null:Ev(this._path)}get ref(){return new or(this._repo,this._path)}get _queryIdentifier(){const e=O0(this._queryParams),t=gv(e);return t==="{}"?"default":t}get _queryObject(){return O0(this._queryParams)}isEqual(e){if(e=It(e),!(e instanceof Qv))return!1;const t=this._repo===e._repo,i=Tv(this._path,e._path),a=this._queryIdentifier===e._queryIdentifier;return t&&i&&a}toJSON(){return this.toString()}toString(){return this._repo.toString()+$V(this._path)}}class or extends Qv{constructor(e,t){super(e,t,new Cv,!1)}get parent(){const e=rI(this._path);return e===null?null:new or(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Ku{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new ut(e),i=Qu(this.ref,e);return new Ku(this._node.getChild(t),i,Rt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,a)=>e(new Ku(a,Qu(this.ref,i),Rt)))}hasChild(e){const t=new ut(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function lt(n,e){return n=It(n),n._checkNotDeleted("ref"),e!==void 0?Qu(n._root,e):n._root}function Qu(n,e){return n=It(n),Me(n._path)===null?V4("child","path",e):zI("child","path",e),new or(n._repo,At(n._path,e))}function Yl(n,e){n=It(n),Hv("push",n._path),UI("push",e,n._path,!0);const t=HI(n._repo),i=r6(t),a=Qu(n,i),l=Qu(n,i);let u;return e!=null?u=bs(l,e).then(()=>l):u=Promise.resolve(l),a.then=u.then.bind(u),a.catch=u.then.bind(u,void 0),a}function Wv(n){return Hv("remove",n._path),bs(n,null)}function bs(n,e){n=It(n),Hv("set",n._path),UI("set",e,n._path,!1);const t=new Xu;return Q4(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function im(n,e){j4("update",e,n._path);const t=new Xu;return W4(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function $s(n){n=It(n);const e=new QI(()=>{}),t=new zm(e);return K4(n._repo,n,t).then(i=>new Ku(i,new or(n._repo,n._path),n._queryParams.getIndex()))}class zm{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const i=t._queryParams.getIndex();return new a6("value",this,new Ku(e.snapshotNode,new or(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new o6(this,e,t):null}matches(e){return e instanceof zm?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function l6(n,e,t,i,a){const l=new QI(t,void 0),u=new zm(l);return X4(n._repo,n,u),()=>J4(n._repo,n,u)}function $v(n,e,t,i){return l6(n,"value",e)}l4(or);d4(or);const c6="FIREBASE_DATABASE_EMULATOR_HOST",cy={};let u6=!1;function h6(n,e,t,i){const a=e.lastIndexOf(":"),l=e.substring(0,a),u=vs(l);n.repoInfo_=new $R(e,u,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),i&&(n.authTokenProvider_=i)}function f6(n,e,t,i,a){let l=i||n.options.databaseURL;l===void 0&&(n.options.projectId||ar("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),pn("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let u=G0(l,a),f=u.repoInfo,m;typeof process<"u"&&d0&&(m=d0[c6]),m?(l=`http://${m}?ns=${f.namespace}`,u=G0(l,a),f=u.repoInfo):u.repoInfo.secure;const g=new wV(n.name,n.options,e);U4("Invalid Firebase Database URL",u),ze(u.path)||ar("Database URL must point to the root of a Firebase Database (not including a child path).");const y=m6(f,n,g,new bV(n,t));return new p6(y,n)}function d6(n,e){const t=cy[e];(!t||t[n.key]!==n)&&ar(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Z4(n),delete t[n.key]}function m6(n,e,t,i){let a=cy[e.name];a||(a={},cy[e.name]=a);let l=a[n.toURLString()];return l&&ar("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new q4(n,u6,t,i),a[n.toURLString()]=l,l}class p6{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(G4(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new or(this._repo,We())),this._rootInternal}_delete(){return this._rootInternal!==null&&(d6(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ar("Cannot call "+e+" on a deleted database.")}}function g6(n=mm(),e){const t=Zu(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=Ty("database");i&&_6(t,...i)}return t}function _6(n,e,t,i={}){n=It(n),n._checkNotDeleted("useEmulator");const a=`${e}:${t}`,l=n._repoInternal;if(n._instanceStarted){if(a===n._repoInternal.repoInfo_.host&&ia(i,l.repoInfo_.emulatorOptions))return;ar("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let u;if(l.repoInfo_.nodeAdmin)i.mockUserToken&&ar('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new Ed(Ed.OWNER);else if(i.mockUserToken){const f=typeof i.mockUserToken=="string"?i.mockUserToken:Sy(i.mockUserToken,n.app.options.projectId);u=new Ed(f)}vs(e)&&(cm(e),um("Database",!0)),h6(l,a,i,u)}function y6(n){oV(pa),sa(new er("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),l=e.getProvider("app-check-internal");return f6(i,a,l,t)},"PUBLIC").setMultipleInstances(!0)),yi(m0,p0,n),yi(m0,p0,"esm2020")}Ws.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Ws.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};y6();const WI="firebasestorage.googleapis.com",$I="storageBucket",v6=120*1e3,E6=600*1e3,T6=1e3;class bt extends Es{constructor(e,t,i=0){super(v_(e),`Firebase Storage: ${t} (${v_(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,bt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return v_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var yt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(yt||(yt={}));function v_(n){return"storage/"+n}function Xv(){const n="An unknown error occurred, please check the error payload for server response.";return new bt(yt.UNKNOWN,n)}function S6(n){return new bt(yt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function b6(n){return new bt(yt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function w6(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new bt(yt.UNAUTHENTICATED,n)}function C6(){return new bt(yt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function A6(n){return new bt(yt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function XI(){return new bt(yt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function JI(){return new bt(yt.CANCELED,"User canceled the upload/download.")}function R6(n){return new bt(yt.INVALID_URL,"Invalid URL '"+n+"'.")}function I6(n){return new bt(yt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function N6(){return new bt(yt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+$I+"' property when initializing the app?")}function ZI(){return new bt(yt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function x6(){return new bt(yt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function O6(){return new bt(yt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function D6(n){return new bt(yt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function uy(n){return new bt(yt.INVALID_ARGUMENT,n)}function e1(){return new bt(yt.APP_DELETED,"The Firebase app was deleted.")}function k6(n){return new bt(yt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ru(n,e){return new bt(yt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function au(n){throw new bt(yt.INTERNAL_ERROR,"Internal error: "+n)}class Jn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Jn.makeFromUrl(e,t)}catch{return new Jn(e,"")}if(i.path==="")return i;throw I6(e)}static makeFromUrl(e,t){let i=null;const a="([A-Za-z0-9.\\-_]+)";function l(ae){ae.path.charAt(ae.path.length-1)==="/"&&(ae.path_=ae.path_.slice(0,-1))}const u="(/(.*))?$",f=new RegExp("^gs://"+a+u,"i"),m={bucket:1,path:3};function g(ae){ae.path_=decodeURIComponent(ae.path)}const y="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",A=new RegExp(`^https?://${E}/${y}/b/${a}/o${b}`,"i"),I={bucket:1,path:3},V=t===WI?"(?:storage.googleapis.com|storage.cloud.google.com)":t,L="([^?#]*)",X=new RegExp(`^https?://${V}/${a}/${L}`,"i"),$=[{regex:f,indices:m,postModify:l},{regex:A,indices:I,postModify:g},{regex:X,indices:{bucket:1,path:2},postModify:g}];for(let ae=0;ae<$.length;ae++){const pe=$[ae],ve=pe.regex.exec(e);if(ve){const O=ve[pe.indices.bucket];let R=ve[pe.indices.path];R||(R=""),i=new Jn(O,R),pe.postModify(i);break}}if(i==null)throw R6(e);return i}}class P6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function M6(n,e,t){let i=1,a=null,l=null,u=!1,f=0;function m(){return f===2}let g=!1;function y(...L){g||(g=!0,e.apply(null,L))}function E(L){a=setTimeout(()=>{a=null,n(A,m())},L)}function b(){l&&clearTimeout(l)}function A(L,...X){if(g){b();return}if(L){b(),y.call(null,L,...X);return}if(m()||u){b(),y.call(null,L,...X);return}i<64&&(i*=2);let $;f===1?(f=2,$=0):$=(i+Math.random())*1e3,E($)}let I=!1;function V(L){I||(I=!0,b(),!g&&(a!==null?(L||(f=2),clearTimeout(a),E(0)):L||(f=1)))}return E(0),l=setTimeout(()=>{u=!0,V(!0)},t),V}function L6(n){n(!1)}function j6(n){return n!==void 0}function V6(n){return typeof n=="function"}function U6(n){return typeof n=="object"&&!Array.isArray(n)}function Bm(n){return typeof n=="string"||n instanceof String}function K0(n){return Jv()&&n instanceof Blob}function Jv(){return typeof Blob<"u"}function Q0(n,e,t,i){if(i<e)throw uy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw uy(`Invalid value for '${n}'. Expected ${t} or less.`)}function ph(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function t1(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const a=e(i)+"="+e(n[i]);t=t+a+"&"}return t=t.slice(0,-1),t}var eo;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(eo||(eo={}));function n1(n,e){const t=n>=500&&n<600,a=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||a||l}class z6{constructor(e,t,i,a,l,u,f,m,g,y,E,b=!0,A=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=f,this.errorCallback_=m,this.timeout_=g,this.progressCallback_=y,this.connectionFactory_=E,this.retry=b,this.isUsingEmulator=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,V)=>{this.resolve_=I,this.reject_=V,this.start_()})}start_(){const e=(i,a)=>{if(a){i(!1,new ad(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const u=f=>{const m=f.loaded,g=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,g)};this.progressCallback_!==null&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const f=l.getErrorCode()===eo.NO_ERROR,m=l.getStatus();if(!f||n1(m,this.additionalRetryCodes_)&&this.retry){const y=l.getErrorCode()===eo.ABORT;i(!1,new ad(!1,null,y));return}const g=this.successCodes_.indexOf(m)!==-1;i(!0,new ad(g,l))})},t=(i,a)=>{const l=this.resolve_,u=this.reject_,f=a.connection;if(a.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());j6(m)?l(m):l()}catch(m){u(m)}else if(f!==null){const m=Xv();m.serverResponse=f.getErrorText(),this.errorCallback_?u(this.errorCallback_(f,m)):u(m)}else if(a.canceled){const m=this.appDelete_?e1():JI();u(m)}else{const m=XI();u(m)}};this.canceled_?t(!1,new ad(!1,null,!0)):this.backoffId_=M6(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&L6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ad{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function B6(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function F6(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function H6(n,e){e&&(n["X-Firebase-GMPID"]=e)}function q6(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function G6(n,e,t,i,a,l,u=!0,f=!1){const m=t1(n.urlParams),g=n.url+m,y=Object.assign({},n.headers);return H6(y,e),B6(y,t),F6(y,l),q6(y,i),new z6(g,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,u,f)}function Y6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function K6(...n){const e=Y6();if(e!==void 0){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(Jv())return new Blob(n);throw new bt(yt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Q6(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function W6(n){if(typeof atob>"u")throw D6("base-64");return atob(n)}const hs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class E_{constructor(e,t){this.data=e,this.contentType=t||null}}function $6(n,e){switch(n){case hs.RAW:return new E_(i1(e));case hs.BASE64:case hs.BASE64URL:return new E_(s1(n,e));case hs.DATA_URL:return new E_(J6(e),Z6(e))}throw Xv()}function i1(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=i,u=n.charCodeAt(++t);i=65536|(l&1023)<<10|u&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function X6(n){let e;try{e=decodeURIComponent(n)}catch{throw Ru(hs.DATA_URL,"Malformed data URL.")}return i1(e)}function s1(n,e){switch(n){case hs.BASE64:{const a=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(a||l)throw Ru(n,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case hs.BASE64URL:{const a=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(a||l)throw Ru(n,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=W6(e)}catch(a){throw a.message.includes("polyfill")?a:Ru(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i}class r1{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Ru(hs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=e3(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function J6(n){const e=new r1(n);return e.base64?s1(hs.BASE64,e.rest):X6(e.rest)}function Z6(n){return new r1(n).contentType}function e3(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}class Yr{constructor(e,t){let i=0,a="";K0(e)?(this.data_=e,i=e.size,a=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,t){if(K0(this.data_)){const i=this.data_,a=Q6(i,e,t);return a===null?null:new Yr(a)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Yr(i,!0)}}static getBlob(...e){if(Jv()){const t=e.map(i=>i instanceof Yr?i.data_:i);return new Yr(K6.apply(null,t))}else{const t=e.map(u=>Bm(u)?$6(hs.RAW,u).data:u.data_);let i=0;t.forEach(u=>{i+=u.byteLength});const a=new Uint8Array(i);let l=0;return t.forEach(u=>{for(let f=0;f<u.length;f++)a[l++]=u[f]}),new Yr(a,!0)}}uploadData(){return this.data_}}function a1(n){let e;try{e=JSON.parse(n)}catch{return null}return U6(e)?e:null}function t3(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function n3(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function o1(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function i3(n,e){return e}class Nn{constructor(e,t,i,a){this.server=e,this.local=t||e,this.writable=!!i,this.xform=a||i3}}let od=null;function s3(n){return!Bm(n)||n.length<2?n:o1(n)}function l1(){if(od)return od;const n=[];n.push(new Nn("bucket")),n.push(new Nn("generation")),n.push(new Nn("metageneration")),n.push(new Nn("name","fullPath",!0));function e(l,u){return s3(u)}const t=new Nn("name");t.xform=e,n.push(t);function i(l,u){return u!==void 0?Number(u):u}const a=new Nn("size");return a.xform=i,n.push(a),n.push(new Nn("timeCreated")),n.push(new Nn("updated")),n.push(new Nn("md5Hash",null,!0)),n.push(new Nn("cacheControl",null,!0)),n.push(new Nn("contentDisposition",null,!0)),n.push(new Nn("contentEncoding",null,!0)),n.push(new Nn("contentLanguage",null,!0)),n.push(new Nn("contentType",null,!0)),n.push(new Nn("metadata","customMetadata",!0)),od=n,od}function r3(n,e){function t(){const i=n.bucket,a=n.fullPath,l=new Jn(i,a);return e._makeStorageReference(l)}Object.defineProperty(n,"ref",{get:t})}function a3(n,e,t){const i={};i.type="file";const a=t.length;for(let l=0;l<a;l++){const u=t[l];i[u.local]=u.xform(i,e[u.server])}return r3(i,n),i}function c1(n,e,t){const i=a1(e);return i===null?null:a3(n,i,t)}function o3(n,e,t,i){const a=a1(e);if(a===null||!Bm(a.downloadTokens))return null;const l=a.downloadTokens;if(l.length===0)return null;const u=encodeURIComponent;return l.split(",").map(g=>{const y=n.bucket,E=n.fullPath,b="/b/"+u(y)+"/o/"+u(E),A=ph(b,t,i),I=t1({alt:"media",token:g});return A+I})[0]}function u1(n,e){const t={},i=e.length;for(let a=0;a<i;a++){const l=e[a];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}class Kl{constructor(e,t,i,a){this.url=e,this.method=t,this.handler=i,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Xs(n){if(!n)throw Xv()}function Zv(n,e){function t(i,a){const l=c1(n,a,e);return Xs(l!==null),l}return t}function l3(n,e){function t(i,a){const l=c1(n,a,e);return Xs(l!==null),o3(l,a,n.host,n._protocol)}return t}function gh(n){function e(t,i){let a;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?a=C6():a=w6():t.getStatus()===402?a=b6(n.bucket):t.getStatus()===403?a=A6(n.path):a=i,a.status=t.getStatus(),a.serverResponse=i.serverResponse,a}return e}function h1(n){const e=gh(n);function t(i,a){let l=e(i,a);return i.getStatus()===404&&(l=S6(n.path)),l.serverResponse=a.serverResponse,l}return t}function c3(n,e,t){const i=e.fullServerUrl(),a=ph(i,n.host,n._protocol),l="GET",u=n.maxOperationRetryTime,f=new Kl(a,l,Zv(n,t),u);return f.errorHandler=h1(e),f}function u3(n,e,t){const i=e.fullServerUrl(),a=ph(i,n.host,n._protocol),l="GET",u=n.maxOperationRetryTime,f=new Kl(a,l,l3(n,t),u);return f.errorHandler=h1(e),f}function h3(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function f1(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=h3(null,e)),i}function f3(n,e,t,i,a){const l=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function f(){let $="";for(let ae=0;ae<2;ae++)$=$+Math.random().toString().slice(2);return $}const m=f();u["Content-Type"]="multipart/related; boundary="+m;const g=f1(e,i,a),y=u1(g,t),E="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+m+`\r
Content-Type: `+g.contentType+`\r
\r
`,b=`\r
--`+m+"--",A=Yr.getBlob(E,i,b);if(A===null)throw ZI();const I={name:g.fullPath},V=ph(l,n.host,n._protocol),L="POST",X=n.maxUploadRetryTime,K=new Kl(V,L,Zv(n,t),X);return K.urlParams=I,K.headers=u,K.body=A.uploadData(),K.errorHandler=gh(e),K}class sm{constructor(e,t,i,a){this.current=e,this.total=t,this.finalized=!!i,this.metadata=a||null}}function eE(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Xs(!1)}return Xs(!!t&&(e||["active"]).indexOf(t)!==-1),t}function d3(n,e,t,i,a){const l=e.bucketOnlyServerUrl(),u=f1(e,i,a),f={name:u.fullPath},m=ph(l,n.host,n._protocol),g="POST",y={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},E=u1(u,t),b=n.maxUploadRetryTime;function A(V){eE(V);let L;try{L=V.getResponseHeader("X-Goog-Upload-URL")}catch{Xs(!1)}return Xs(Bm(L)),L}const I=new Kl(m,g,A,b);return I.urlParams=f,I.headers=y,I.body=E,I.errorHandler=gh(e),I}function m3(n,e,t,i){const a={"X-Goog-Upload-Command":"query"};function l(g){const y=eE(g,["active","final"]);let E=null;try{E=g.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Xs(!1)}E||Xs(!1);const b=Number(E);return Xs(!isNaN(b)),new sm(b,i.size(),y==="final")}const u="POST",f=n.maxUploadRetryTime,m=new Kl(t,u,l,f);return m.headers=a,m.errorHandler=gh(e),m}const W0=256*1024;function p3(n,e,t,i,a,l,u,f){const m=new sm(0,0);if(u?(m.current=u.current,m.total=u.total):(m.current=0,m.total=i.size()),i.size()!==m.total)throw x6();const g=m.total-m.current;let y=g;a>0&&(y=Math.min(y,a));const E=m.current,b=E+y;let A="";y===0?A="finalize":g===y?A="upload, finalize":A="upload";const I={"X-Goog-Upload-Command":A,"X-Goog-Upload-Offset":`${m.current}`},V=i.slice(E,b);if(V===null)throw ZI();function L(ae,pe){const ve=eE(ae,["active","final"]),O=m.current+y,R=i.size();let N;return ve==="final"?N=Zv(e,l)(ae,pe):N=null,new sm(O,R,ve==="final",N)}const X="POST",K=e.maxUploadRetryTime,$=new Kl(t,X,L,K);return $.headers=I,$.body=V.uploadData(),$.progressCallback=f||null,$.errorHandler=gh(n),$}const zn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function T_(n){switch(n){case"running":case"pausing":case"canceling":return zn.RUNNING;case"paused":return zn.PAUSED;case"success":return zn.SUCCESS;case"canceled":return zn.CANCELED;case"error":return zn.ERROR;default:return zn.ERROR}}class g3{constructor(e,t,i){if(V6(e)||t!=null||i!=null)this.next=e,this.error=t??void 0,this.complete=i??void 0;else{const l=e;this.next=l.next,this.error=l.error,this.complete=l.complete}}}function al(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class _3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=eo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=eo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=eo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,a,l){if(this.sent_)throw au("cannot .send() more than once");if(vs(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const u in l)l.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,l[u].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw au("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw au("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw au("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw au("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class y3 extends _3{initXhr(){this.xhr_.responseType="text"}}function hl(){return new y3}class v3{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=l1(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals(yt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const l=this.isExponentialBackoffExpired();if(n1(a.status,[]))if(l)a=XI();else{this.sleepTime=Math.max(this.sleepTime*2,T6),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals(yt.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,l)=>{this._resolve=a,this._reject=l,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const i=d3(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(i,hl,e,t);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const a=m3(this._ref.storage,this._ref._location,e,this._blob),l=this._ref.storage._makeRequest(a,hl,t,i);this._request=l,l.getPromise().then(u=>{u=u,this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=W0*this._chunkMultiplier,t=new sm(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((a,l)=>{let u;try{u=p3(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){this._error=m,this._transition("error");return}const f=this._ref.storage._makeRequest(u,hl,a,l,!1);this._request=f,f.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){W0*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=c3(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(i,hl,e,t);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=f3(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(i,hl,e,t);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=JI(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=T_(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,a){const l=new g3(t||void 0,i||void 0,a||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(T_(this._state)){case zn.SUCCESS:al(this._resolve.bind(null,this.snapshot))();break;case zn.CANCELED:case zn.ERROR:const t=this._reject;al(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(T_(this._state)){case zn.RUNNING:case zn.PAUSED:e.next&&al(e.next.bind(e,this.snapshot))();break;case zn.SUCCESS:e.complete&&al(e.complete.bind(e))();break;case zn.CANCELED:case zn.ERROR:e.error&&al(e.error.bind(e,this._error))();break;default:e.error&&al(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}class oo{constructor(e,t){this._service=e,t instanceof Jn?this._location=t:this._location=Jn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new oo(e,t)}get root(){const e=new Jn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return o1(this._location.path)}get storage(){return this._service}get parent(){const e=t3(this._location.path);if(e===null)return null;const t=new Jn(this._location.bucket,e);return new oo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw k6(e)}}function E3(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new v3(n,new Yr(e),t)}function T3(n){n._throwIfRoot("getDownloadURL");const e=u3(n.storage,n._location,l1());return n.storage.makeRequestWithTokens(e,hl).then(t=>{if(t===null)throw O6();return t})}function S3(n,e){const t=n3(n._location.path,e),i=new Jn(n._location.bucket,t);return new oo(n.storage,i)}function b3(n){return/^[A-Za-z]+:\/\//.test(n)}function w3(n,e){return new oo(n,e)}function d1(n,e){if(n instanceof tE){const t=n;if(t._bucket==null)throw N6();const i=new oo(t,t._bucket);return e!=null?d1(i,e):i}else return e!==void 0?S3(n,e):n}function C3(n,e){if(e&&b3(e)){if(n instanceof tE)return w3(n,e);throw uy("To use ref(service, url), the first argument must be a Storage instance.")}else return d1(n,e)}function $0(n,e){const t=e?.[$I];return t==null?null:Jn.makeFromBucketSpec(t,n)}function A3(n,e,t,i={}){n.host=`${e}:${t}`;const a=vs(e);a&&(cm(`https://${n.host}/b`),um("Storage",!0)),n._isUsingEmulator=!0,n._protocol=a?"https":"http";const{mockUserToken:l}=i;l&&(n._overrideAuthToken=typeof l=="string"?l:Sy(l,n.app.options.projectId))}class tE{constructor(e,t,i,a,l,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=u,this._bucket=null,this._host=WI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=v6,this._maxUploadRetryTime=E6,this._requests=new Set,a!=null?this._bucket=Jn.makeFromBucketSpec(a,this._host):this._bucket=$0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Jn.makeFromBucketSpec(this._url,e):this._bucket=$0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Q0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Q0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new oo(this,e)}_makeRequest(e,t,i,a,l=!0){if(this._deleted)return new P6(e1());{const u=G6(e,this._appId,i,a,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[i,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,a).getPromise()}}const X0="@firebase/storage",J0="0.14.0";const m1="storage";function _h(n,e,t){return n=It(n),E3(n,e,t)}function yh(n){return n=It(n),T3(n)}function vh(n,e){return n=It(n),C3(n,e)}function Ql(n=mm(),e){n=It(n);const i=Zu(n,m1).getImmediate({identifier:e}),a=Ty("storage");return a&&R3(i,...a),i}function R3(n,e,t,i={}){A3(n,e,t,i)}function I3(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new tE(t,i,a,e,pa)}function N3(){sa(new er(m1,I3,"PUBLIC").setMultipleInstances(!0)),yi(X0,J0,""),yi(X0,J0,"esm2020")}N3();const x3={apiKey:"AIzaSyDlpnsAM7VzcUVUB5Dfln9iOdWIGQtmGso",authDomain:"skillx-7b55c.firebaseapp.com",projectId:"skillx-7b55c",storageBucket:"skillx-7b55c.firebasestorage.app",messagingSenderId:"805907988145",appId:"1:805907988145:web:4c5c06e3ce8027a118ac90",measurementId:"G-4JP775V103"},Fm=CC(x3),Pl=zM(Fm),Ml=qj(Fm),ct=g6(Fm);Ql(Fm);const p1=x.createContext(),O3=({children:n})=>{const[e,t]=x.useState([]),[i,a]=x.useState([]),[l,u]=x.useState([]),f=async()=>{try{const E=(await $s(lt(ct,"Students"))).val();if(!E){t([]);return}const b=Object.keys(E).map(A=>({id:A,...E[A]}));t(b)}catch(y){console.log(y),alert("Services currently unavailable, please try again later")}},m=async()=>{try{const E=(await $s(lt(ct,"Organizations"))).val();if(!E){a([]);return}const b=Object.keys(E).map(A=>({id:A,...E[A]}));a(b)}catch(y){console.log(y),alert("Services currently unavailable, please try again later")}},g=async()=>{try{const E=(await $s(lt(ct,"Mentors"))).val();if(!E){u([]);return}const b=Object.keys(E).map(A=>({id:A,...E[A]}));u(b)}catch(y){console.log(y),alert("Services currently unavailable, please try again later")}};return x.useEffect(()=>{f(),m(),g()},[]),_.jsx(p1.Provider,{value:{studentData:e,OrganizationData:i,MentorData:l},children:n})},g1=()=>{const[n,e]=x.useState(""),[t,i]=x.useState(""),{studentData:a,OrganizationData:l,MentorData:u}=x.useContext(p1);function f(y){y.preventDefault(),console.log(a,l,u);try{const E=a?.find(I=>I.id==n.trim()&&I.passwordId==t),b=l?.find(I=>I.id==n.trim()&&I.passwordId==t.trim()),A=u?.find(I=>I.id==n.trim()&&I.passwordId==t.trim());if(E){localStorage.setItem("loggedInUserSkillExchange",JSON.stringify({...E,role:"student"})),alert("Logging in as student..."),window.location.reload();return}else if(b){localStorage.setItem("loggedInUserSkillExchange",JSON.stringify({...b,role:"organization"})),alert("Logging in as organization..."),window.location.reload();return}else if(A){console.log("mentor"),localStorage.setItem("loggedInUserSkillExchange",JSON.stringify({...A,role:"mentor"})),alert("Logging in as mentor..."),window.location.reload();return}else alert("User not found")}catch(E){alert(E)}}function m(y){e(y.target.value)}function g(y){i(y.target.value)}return _.jsxs(_.Fragment,{children:[_.jsx(mn,{to:"/",children:_.jsxs("button",{className:"backbutton",children:[" ",_.jsx("i",{class:"fa-solid fa-hand-back-fist"})," Back"]})}),_.jsxs("div",{className:"login-page",children:[_.jsx("h1",{children:"Skill Exchange Login"}),_.jsxs("form",{className:"login-page-content",autoComplete:"off",onSubmit:y=>{f(y)},children:[_.jsx("img",{src:ys,alt:"skillx logo"}),_.jsx("input",{type:"text",placeholder:"Enter user id",autoComplete:"off",required:!0,onChange:y=>{m(y)},value:n}),_.jsx("input",{type:"text",placeholder:"Enter your password",autoComplete:"off",required:!0,onChange:y=>{g(y)},value:t}),_.jsxs("h3",{children:["Don't have any account? ",_.jsx(mn,{to:"/register",children:"RegisterNow"})]}),_.jsx("button",{type:"submit",children:"Login"})]}),_.jsx("h3",{children:_.jsx(mn,{children:"Forgotten Password"})})]})]})},D3=()=>{function n(){return _.jsx(g1,{})}return _.jsx(_.Fragment,{children:_.jsxs("nav",{className:"navLanding",children:[_.jsx("div",{className:"logo",children:_.jsx("img",{src:ys,alt:""})}),_.jsx("div",{className:"cta-nav",children:_.jsxs(mn,{to:"/login",children:[" ",_.jsxs("button",{className:"login-cta",onClick:n,children:[_.jsx("i",{className:"fa-solid fa-arrow-right-to-bracket"}),"Login"]})]})})]})})},k3="/skill-exchange/assets/hero_sec_img-xu7NUY8L.png",P3="/skill-exchange/assets/hero_background-DbhdSA7v.png",M3=()=>_.jsx(_.Fragment,{children:_.jsxs("section",{class:"hero-sec",children:[_.jsx("img",{src:P3,alt:"bg-hero",class:"hero-bg"}),_.jsxs("div",{class:"hero-left",children:[_.jsx("h1",{children:"Connect, Learn, Collaborate, Grow with SkillX"}),_.jsx("p",{children:"Empowering students to showcase their skills, connect with mentors, and work on real Organization projects  all in one smart AI-driven ecosystem."}),_.jsxs("div",{class:"btn-hero-left",children:[_.jsxs("button",{class:"login-cta",onclick:"window.location.href='roleReg.html'",children:[_.jsx("i",{class:"fa-solid fa-arrow-right-to-bracket"}),"Login"]}),_.jsx("button",{class:"learn-btn-hero",children:"Learn More"})]})]}),_.jsx("div",{class:"hero-right",children:_.jsx("img",{src:k3,alt:"SkillX related image"})})]})}),L3=()=>_.jsxs("div",{children:[_.jsx(D3,{}),_.jsx(M3,{})]});class Eh{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const j3=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},gn={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:j3()},nE=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},V3=(n,e="https://api.emailjs.com")=>{if(!n)return;const t=nE(n);gn.publicKey=t.publicKey,gn.blockHeadless=t.blockHeadless,gn.storageProvider=t.storageProvider,gn.blockList=t.blockList,gn.limitRate=t.limitRate,gn.origin=t.origin||e},_1=async(n,e,t={})=>{const i=await fetch(gn.origin+n,{method:"POST",headers:t,body:e}),a=await i.text(),l=new Eh(i.status,a);if(i.ok)return l;throw l},y1=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},U3=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},v1=n=>n.webdriver||!n.languages||n.languages.length===0,E1=()=>new Eh(451,"Unavailable For Headless Browser"),z3=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},B3=n=>!n.list?.length||!n.watchVariable,F3=(n,e)=>n instanceof FormData?n.get(e):n[e],T1=(n,e)=>{if(B3(n))return!1;z3(n.list,n.watchVariable);const t=F3(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},S1=()=>new Eh(403,"Forbidden"),H3=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},q3=async(n,e,t)=>{const i=Number(await t.get(n)||0);return e-Date.now()+i},b1=async(n,e,t)=>{if(!e.throttle||!t)return!1;H3(e.throttle,e.id);const i=e.id||n;return await q3(i,e.throttle,t)>0?!0:(await t.set(i,Date.now().toString()),!1)},w1=()=>new Eh(429,"Too Many Requests"),G3=async(n,e,t,i)=>{const a=nE(i),l=a.publicKey||gn.publicKey,u=a.blockHeadless||gn.blockHeadless,f=a.storageProvider||gn.storageProvider,m={...gn.blockList,...a.blockList},g={...gn.limitRate,...a.limitRate};return u&&v1(navigator)?Promise.reject(E1()):(y1(l,n,e),U3(t),t&&T1(m,t)?Promise.reject(S1()):await b1(location.pathname,g,f)?Promise.reject(w1()):_1("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:l,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},Y3=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},K3=n=>typeof n=="string"?document.querySelector(n):n,Q3=async(n,e,t,i)=>{const a=nE(i),l=a.publicKey||gn.publicKey,u=a.blockHeadless||gn.blockHeadless,f=gn.storageProvider||a.storageProvider,m={...gn.blockList,...a.blockList},g={...gn.limitRate,...a.limitRate};if(u&&v1(navigator))return Promise.reject(E1());const y=K3(t);y1(l,n,e),Y3(y);const E=new FormData(y);return T1(m,E)?Promise.reject(S1()):await b1(location.pathname,g,f)?Promise.reject(w1()):(E.append("lib_version","4.4.1"),E.append("service_id",n),E.append("template_id",e),E.append("user_id",l),_1("/api/v1.0/email/send-form",E))},Js={init:V3,send:G3,sendForm:Q3,EmailJSResponseStatus:Eh},_a=()=>_.jsx(_.Fragment,{children:_.jsxs("div",{className:"loader-main",children:[_.jsx("div",{className:"bg-main-loader"}),_.jsx("div",{className:"loader"})]})}),W3=({role:n})=>{const[e,t]=x.useState(""),[i,a]=x.useState(""),[l,u]=x.useState(""),[f,m]=x.useState(""),[g,y]=x.useState(""),[E,b]=x.useState(""),[A,I]=x.useState(!1),[V,L]=x.useState(null),[X,K]=x.useState(!1),[$,ae]=x.useState(""),[pe,ve]=x.useState(!1),[O,R]=x.useState(!1),[N,U]=x.useState();x.useEffect(()=>{Js.init("O1eqMF__l75Le_ffM")},[]);const P=()=>{window.recaptchaVerifier||(window.recaptchaVerifier=new ky(Pl,"recaptcha-container",{size:"invisible",callback:()=>console.log("reCAPTCHA solved")}),window.recaptchaVerifier.render())};async function B(){if(!i)return alert("Enter email");I(!0);const se=Math.floor(1e5+Math.random()*9e5).toString();ae(se),await mv(Il(Ml,"emailOtps",i),{otp:se,timestamp:Date.now()}),Js.send("service_rjgtrdr","template_vru0qpj",{to_email:i,name:e,otp:se}).then(()=>{K(!0),alert("Email OTP sent!")}).catch(he=>alert("Email send error: "+he.text)),I(!1)}async function D(){if(!g)return alert("Enter OTP");I(!0);const se=await dv(Il(Ml,"emailOtps",i));if(!se.exists())return alert("No OTP found for this email");se.data().otp===g?(ve(!0),alert("Email verified!")):alert("Incorrect OTP"),I(!1)}function Ze(){if(!l)return alert("Enter mobile number");I(!0),P();const se=window.recaptchaVerifier;Py(Pl,l,se).then(he=>{L(he),alert("OTP sent successfully!")}).catch(he=>{console.error(he),alert("Error sending OTP: "+he.message)}),I(!1)}function Oe(){if(!V)return alert("Please send OTP first");I(!0),V.confirm(E).then(se=>{R(!0),alert("Phone verified successfully!"),console.log(se.user),window.recaptchaVerifier&&window.recaptchaVerifier.clear()}).catch(se=>{console.error(se),alert("Invalid OTP")}),I(!1)}async function Z(se){if(se.preventDefault(),I(!0),!pe||!O)return I(!1),alert("Verify both email & mobile first");const he={name:e.trim(),email:i.trim(),mobileNum:l.trim(),passwordId:f.trim()},Pe=(await $s(lt(ct,"Students"))).val();if(Pe){const J=Object.values(Pe),ce=J.some(Ee=>Ee.email===i),ye=J.some(Ee=>Ee.mobileNum===l);if(ce)return I(!1),alert("Email already exists. Try another one.");if(ye)return I(!1),alert("Mobile number already exists. Try another one.")}const M=Pe?Object.keys(Pe).length:0,G="STU"+Math.floor(1e3+Math.random()*9e3)+(M+1);await bs(lt(ct,`Students/${G}`),he).then(()=>{alert("Registered Successfully "),Js.send("service_rjgtrdr","template_l3c853f",{to_email:i.trim(),userId:G.trim(),password:f.trim(),name:e.trim()}).then(()=>alert("Credentials sent to email"))}).catch(J=>console.log(J)),t(""),a(""),u(""),m(""),y(""),b(""),I(!1)}return _.jsxs("form",{className:"registerForm",onSubmit:Z,children:[_.jsxs("h3",{children:["Registering as ",n]}),_.jsx("input",{type:"text",placeholder:"Enter Your Name",value:e,onChange:se=>t(se.target.value),required:!0}),_.jsxs("div",{className:"send-otp",children:[_.jsx("input",{type:"email",placeholder:"Enter Your Email",value:i,onChange:se=>a(se.target.value),required:!0}),_.jsx("button",{type:"button",onClick:B,children:"Send OTP"})]}),_.jsxs("div",{className:"verify-otp",children:[_.jsx("input",{type:"text",placeholder:"Enter Email OTP",value:g,onChange:se=>y(se.target.value),required:!0}),_.jsx("button",{type:"button",onClick:D,children:"Verify OTP"})]}),_.jsxs("div",{className:"send-otp",children:[_.jsx("input",{type:"text",placeholder:"Enter Mobile",value:l,onChange:se=>u(se.target.value),required:!0}),_.jsx("button",{id:"sendMobileOtpBtn",type:"button",onClick:Ze,children:"Send OTP"})]}),_.jsx("div",{id:"recaptcha-container"}),_.jsxs("div",{className:"verify-otp",children:[_.jsx("input",{type:"text",placeholder:"Enter Mobile OTP",value:E,onChange:se=>b(se.target.value),required:!0}),_.jsx("button",{type:"button",onClick:Oe,children:"Verify OTP"})]}),_.jsx("input",{type:"password",placeholder:"Enter Password",value:f,onChange:se=>m(se.target.value),required:!0}),_.jsx("button",{type:"submit",children:"Submit"}),A==!0&&_.jsx(_a,{})]})},$3=({role:n})=>{const[e,t]=x.useState(""),[i,a]=x.useState(""),[l,u]=x.useState(""),[f,m]=x.useState(""),[g,y]=x.useState(""),[E,b]=x.useState(""),[A,I]=x.useState(""),[V,L]=x.useState(""),[X,K]=x.useState(!1);function $(J){t(J.target.value)}function ae(J){a(J.target.value)}function pe(J){b(J.target.value)}function ve(J){u(J.target.value)}const[O,R]=x.useState(null),[N,U]=x.useState(!1),[P,B]=x.useState(""),[D,Ze]=x.useState(!1),[Oe,Z]=x.useState(!1);x.useEffect(()=>{Js.init("O1eqMF__l75Le_ffM")},[]);const se=()=>{window.recaptchaVerifier||(window.recaptchaVerifier=new ky(Pl,"recaptcha-container",{size:"invisible",callback:()=>console.log("reCAPTCHA solved")}),window.recaptchaVerifier.render())};async function he(){if(!f)return alert("Enter email");K(!0);const J=Math.floor(1e5+Math.random()*9e5).toString();B(J),await mv(Il(Ml,"emailOtps",f),{otp:J,timestamp:Date.now()}),Js.send("service_rjgtrdr","template_vru0qpj",{to_email:f,name:e,otp:J}).then(()=>{U(!0),alert("Email OTP sent!")}).catch(ce=>alert("Email send error: "+ce.text)),K(!1)}async function ke(){if(!A)return alert("Enter OTP");K(!0);const J=await dv(Il(Ml,"emailOtps",f));if(!J.exists())return alert("No OTP found for this email");J.data().otp===A?(Ze(!0),alert("Email verified!")):alert("Incorrect OTP"),K(!1)}function Pe(){if(!g)return alert("Enter mobile number");K(!0),se();const J=window.recaptchaVerifier;Py(Pl,g,J).then(ce=>{R(ce),alert("OTP sent successfully!")}).catch(ce=>{console.error(ce),alert("Error sending OTP: "+ce.message)}),K(!1)}function M(){if(!O)return alert("Please send OTP first");K(!0),O.confirm(V).then(J=>{Z(!0),alert("Phone verified successfully!"),console.log(J.user),window.recaptchaVerifier&&window.recaptchaVerifier.clear()}).catch(J=>{console.error(J),alert("Invalid OTP")}),K(!1)}async function G(J){if(J.preventDefault(),K(!0),!D||!Oe)return K(!1),alert("Verify both email & mobile first");const ce={name:e.trim(),RegisterationNum:i.trim(),Address:l.trim(),email:f.trim(),mobileNum:g.trim(),passwordId:E.trim()},Ee=(await $s(lt(ct,"Organizations"))).val();if(Ee){const $e=Object.values(Ee),Ti=$e.some(Bi=>Bi.email===f),ti=$e.some(Bi=>Bi.mobileNum===g);if(Ti)return K(!1),alert("Email already exists. Try another one.");if(ti)return K(!1),alert("Mobile number already exists. Try another one.")}const De=Ee?Object.keys(Ee).length:0,ht="ORG"+Math.floor(1e3+Math.random()*9e3)+(De+1);await bs(lt(ct,`Organizations/${ht}`),ce).then(()=>{alert("Registered Successfully "),Js.send("service_rjgtrdr","template_l3c853f",{to_email:f.trim(),userId:ht.trim(),password:E.trim(),name:e.trim()}).then(()=>alert("Credentials sent to email"))}).catch($e=>console.log($e)),t(""),setEmailOrganization(""),setMobileOrganization(""),setPasswordOrganization(""),I(""),L(""),K(!1)}return _.jsx(_.Fragment,{children:_.jsxs("form",{className:"registerForm",onSubmit:J=>{G(J)},children:[_.jsxs("h3",{children:["Registering as ",n]}),_.jsx("input",{type:"text",placeholder:"Enter Your Name",onChange:J=>{$(J)},value:e,required:!0}),_.jsx("input",{type:"text",placeholder:"Enter Registration Number",onChange:J=>{ae(J)},value:i,required:!0}),_.jsx("input",{type:"text",placeholder:"Address of Organization",onChange:J=>{ve(J)},value:l,required:!0}),_.jsxs("div",{className:"send-otp",children:[_.jsx("input",{type:"email",placeholder:"Enter Your Email",value:f,onChange:J=>m(J.target.value),required:!0}),_.jsx("button",{type:"button",onClick:he,children:"Send OTP"})]}),_.jsxs("div",{className:"verify-otp",children:[_.jsx("input",{type:"text",placeholder:"Enter Email OTP",value:A,onChange:J=>I(J.target.value),required:!0}),_.jsx("button",{type:"button",onClick:ke,children:"Verify OTP"})]}),_.jsxs("div",{className:"send-otp",children:[_.jsx("input",{type:"text",placeholder:"Enter Mobile",value:g,onChange:J=>y(J.target.value),required:!0}),_.jsx("button",{id:"sendMobileOtpBtn",type:"button",onClick:Pe,children:"Send OTP"})]}),_.jsx("div",{id:"recaptcha-container"}),_.jsxs("div",{className:"verify-otp",children:[_.jsx("input",{type:"text",placeholder:"Enter Mobile OTP",value:V,onChange:J=>L(J.target.value),required:!0}),_.jsx("button",{type:"button",onClick:M,children:"Verify OTP"})]}),_.jsx("input",{type:"text",placeholder:"Enter Password",onChange:J=>{pe(J)},value:E,required:!0}),_.jsx("button",{type:"submit",children:" Submit"}),X==!0&&_.jsx(_a,{})]})})},X3=({role:n})=>{const[e,t]=x.useState(""),[i,a]=x.useState(""),[l,u]=x.useState(""),[f,m]=x.useState(""),[g,y]=x.useState(""),[E,b]=x.useState(""),[A,I]=x.useState(""),[V,L]=x.useState("");function X(G){t(G.target.value)}function K(G){a(G.target.value)}function $(G){b(G.target.value)}const[ae,pe]=x.useState(null),[ve,O]=x.useState(!1),[R,N]=x.useState(""),[U,P]=x.useState(!1),[B,D]=x.useState(!1),[Ze,Oe]=x.useState(!1);x.useEffect(()=>{Js.init("O1eqMF__l75Le_ffM")},[]);const Z=()=>{window.recaptchaVerifier||(window.recaptchaVerifier=new ky(Pl,"recaptcha-container",{size:"invisible",callback:()=>console.log("reCAPTCHA solved")}),window.recaptchaVerifier.render())};async function se(){if(Oe(!0),!f)return alert("Enter email");const G=Math.floor(1e5+Math.random()*9e5).toString();N(G),await mv(Il(Ml,"emailOtps",f),{otp:G,timestamp:Date.now()}),Js.send("service_rjgtrdr","template_vru0qpj",{to_email:f,name:e,otp:G}).then(()=>{O(!0),alert("Email OTP sent!")}).catch(J=>alert("Email send error: "+J.text)),Oe(!1)}async function he(){if(Oe(!0),!A)return alert("Enter OTP");const G=await dv(Il(Ml,"emailOtps",f));if(!G.exists())return alert("No OTP found for this email");G.data().otp===A?(P(!0),alert("Email verified!")):alert("Incorrect OTP"),Oe(!1)}function ke(){if(Oe(!0),!g)return alert("Enter mobile number");Z();const G=window.recaptchaVerifier;Py(Pl,g,G).then(J=>{pe(J),alert("OTP sent successfully!")}).catch(J=>{console.error(J),alert("Error sending OTP: "+J.message)}),Oe(!1)}function Pe(){if(Oe(!0),!ae)return alert("Please send OTP first");ae.confirm(V).then(G=>{D(!0),alert("Phone verified successfully!"),console.log(G.user),window.recaptchaVerifier&&window.recaptchaVerifier.clear()}).catch(G=>{console.error(G),alert("Invalid OTP")}),Oe(!1)}async function M(G){if(G.preventDefault(),Oe(!0),!U||!B)return Oe(!1),alert("Verify both email & mobile first");const J={name:e.trim(),Education:i.trim(),Address:l.trim(),email:f.trim(),mobileNum:g.trim(),passwordId:E.trim()},ye=(await $s(lt(ct,"Mentors"))).val();if(ye){const ht=Object.values(ye),$e=ht.some(ti=>ti.email===f),Ti=ht.some(ti=>ti.mobileNum===g);if($e)return Oe(!1),alert("Email already exists. Try another one.");if(Ti)return Oe(!1),alert("Mobile number already exists. Try another one.")}const Ee=ye?Object.keys(ye).length:0,De="MENT"+Math.floor(1e3+Math.random()*9e3)+(Ee+1);await bs(lt(ct,`Mentors/${De}`),J).then(()=>{alert("Registered Successfully  sending cerentials...wait..."),Oe(!0),Js.send("service_rjgtrdr","template_l3c853f",{to_email:f.trim(),userId:De.trim(),password:E.trim(),name:e.trim()}).then(()=>{alert("Credentials sent to email"),Oe(!1)})}).catch(ht=>console.log(ht)),t(""),m(""),y(""),b(""),I(""),L(""),Oe(!1)}return _.jsxs(_.Fragment,{children:[_.jsxs("form",{className:"registerForm",onSubmit:G=>{M(G)},children:[_.jsxs("h3",{children:["Registering as ",n]}),_.jsx("input",{type:"text",placeholder:"Enter Your Name",onChange:G=>{X(G)},value:e,required:!0}),_.jsx("input",{type:"text",placeholder:"Enter Education Details",onChange:G=>{K(G)},value:i,required:!0}),_.jsxs("div",{className:"send-otp",children:[_.jsx("input",{type:"email",placeholder:"Enter Your Email",value:f,onChange:G=>m(G.target.value),required:!0}),_.jsx("button",{type:"button",onClick:se,children:"Send OTP"})]}),_.jsxs("div",{className:"verify-otp",children:[_.jsx("input",{type:"text",placeholder:"Enter Email OTP",value:A,onChange:G=>I(G.target.value),required:!0}),_.jsx("button",{type:"button",onClick:he,children:"Verify OTP"})]}),_.jsxs("div",{className:"send-otp",children:[_.jsx("input",{type:"text",placeholder:"Enter Mobile",value:g,onChange:G=>y(G.target.value),required:!0}),_.jsx("button",{id:"sendMobileOtpBtn",type:"button",onClick:ke,children:"Send OTP"})]}),_.jsx("div",{id:"recaptcha-container"}),_.jsxs("div",{className:"verify-otp",children:[_.jsx("input",{type:"text",placeholder:"Enter Mobile OTP",value:V,onChange:G=>L(G.target.value),required:!0}),_.jsx("button",{type:"button",onClick:Pe,children:"Verify OTP"})]}),_.jsx("input",{type:"text",placeholder:"Enter Password",onChange:G=>{$(G)},value:E,required:!0}),_.jsx("button",{type:"submit",children:" Submit"})]}),Ze==!0&&_.jsx(_a,{})]})},J3=()=>{const[n,e]=x.useState("");function t(i){e(i.target.value),console.log(n)}return _.jsxs(_.Fragment,{children:[_.jsx(mn,{to:"/login",children:_.jsxs("button",{className:"backbutton",children:[_.jsx("i",{class:"fa-solid fa-hand-back-fist"})," Back"]})}),_.jsxs("div",{className:"register-main",children:[_.jsx("h1",{children:"Register In SKill Exchange"}),_.jsxs("div",{className:"register-content",children:[_.jsx("img",{src:ys,alt:"skillx logo"}),_.jsxs("select",{name:"",id:"",placeholder:"select role",onChange:i=>{t(i)},children:[_.jsx("option",{value:"role_select",children:"Select Your Role"}),_.jsx("option",{value:"student",children:"Student"}),_.jsx("option",{value:"organization",children:"Organization"}),_.jsx("option",{value:"mentor",children:"Mentor"})]}),n==""&&_.jsx("h4",{children:_.jsx("b",{children:"Select Your Role First"})}),n=="role_select"&&_.jsx("h4",{children:_.jsx("b",{children:"Select Your Role First"})}),n=="student"&&_.jsx(W3,{role:n}),n=="organization"&&_.jsx($3,{role:n}),n=="mentor"&&_.jsx(X3,{role:n})]})]})]})},ya=x.createContext(),Z3=({children:n})=>{const[e,t]=x.useState(!0),i=En(),[a,l]=x.useState(null);return x.useEffect(()=>{const u=lt(ct,`Students/${i.id}`),f=$v(u,m=>{m.exists()?l(m.val()):console.log("No Data Found"),t(!1)});return()=>f()},[i.id]),e?_.jsx(_a,{}):_.jsx(ya.Provider,{value:a,children:n})},e9=()=>{const{id:n}=En();return _.jsx("div",{className:"navigation-dash-main",children:_.jsxs("div",{className:"main-left",children:[_.jsxs("ul",{children:[_.jsx(mn,{to:`/student-dashboard/${n}/dashboard`,children:_.jsxs("li",{children:[_.jsx("i",{className:"fa-regular fa-house"}),"Dashboard"]})}),_.jsxs(mn,{to:`/student-dashboard/${n}/`,children:["   ",_.jsxs("li",{children:[_.jsx("i",{className:"fa-regular fa-user"}),"My Profile"]})]}),_.jsxs(mn,{to:`/student-dashboard/${n}/skill-exchange`,children:["  ",_.jsxs("li",{children:[_.jsx("i",{className:"fa-solid fa-rotate"}),"Skill-Exchange"]})]}),_.jsxs(mn,{to:`/student-dashboard/${n}/projects`,children:["   ",_.jsxs("li",{children:[_.jsx("i",{className:"fa-regular fa-building"}),"Projects"]})]}),_.jsxs(mn,{to:`/student-dashboard/${n}/mentorship`,children:["   ",_.jsxs("li",{children:[_.jsx("i",{className:"fa-regular fa-id-badge"}),"Mentorship"]})]}),_.jsxs(mn,{to:`/student-dashboard/${n}/events`,children:["  ",_.jsxs("li",{children:[_.jsx("i",{className:"fa-regular fa-calendar-days"}),"Events"]})]})]}),_.jsx("button",{className:"logout-btn",onClick:()=>(localStorage.removeItem("loggedInUserSkillExchange"),window.location.reload(),_.jsx(_y,{to:"/login",replace:!0})),children:"Logout"})]})})},C1=()=>_.jsxs("nav",{className:"navStudentDashboard",children:[_.jsx("div",{className:"logo",children:_.jsx("img",{src:ys,alt:"Logo"})}),_.jsxs("div",{className:"nav-right",children:[_.jsx("input",{type:"search",placeholder:"Search projects, skills, mentors",className:"searchBarStud"}),_.jsx("i",{className:"fa-regular fa-bell"})]}),_.jsx("label",{htmlFor:"menu-toggle",children:_.jsxs("div",{className:"hamburger",id:"menu-toggle",children:[_.jsx("div",{}),_.jsx("div",{}),_.jsx("div",{})]})})]}),t9=({close:n})=>{const[e,t]=x.useState(!1),[i,a]=x.useState(""),[l,u]=x.useState(""),[f,m]=x.useState(null),[g,y]=x.useState(0),{id:E}=En();console.log("Editing Student ID:",E);const b=V=>{m(V.target.files[0])},A=async(V,L)=>{await im(lt(ct,`Students/${V}`),L)},I=async V=>{V.preventDefault();const L={};if(i.trim()!==""&&(L.name=i.trim()),l.trim()!==""&&(L.description=l.trim()),!f&&Object.keys(L).length===0){alert("No changes to update");return}t(!0);try{if(f){const X=Ql(),K=vh(X,`ProfilePictures/${f.name}`),$=_h(K,f);$.on("state_changed",ae=>{const pe=ae.bytesTransferred/ae.totalBytes*100;y(Math.round(pe))},ae=>{console.error("Upload error:",ae),t(!1)},async()=>{const ae=await yh($.snapshot.ref);console.log("File available at:",ae);const pe=Yl(lt(ct,"images"));bs(pe,{name:f.name,url:ae}),L.profileImage=ae,await A(E,L),alert("All changes made!"),t(!1),y(0)})}else await A(E,L),alert("All changes made!"),t(!1)}catch(X){console.error("Error updating profile:",X),t(!1)}};return _.jsxs("div",{className:"edit-profile-Student",children:[_.jsx("h3",{children:"Edit Your Profile:"}),_.jsxs("form",{onSubmit:I,children:[_.jsx("h6",{children:"Upload your profile picture"}),_.jsx("input",{type:"file",onChange:b}),f&&_.jsxs("p",{children:["Upload Progress: ",g,"%"]}),_.jsx("input",{type:"text",placeholder:"Edit your name",value:i,onChange:V=>a(V.target.value)}),_.jsx("textarea",{placeholder:"Write About Yourself",value:l,onChange:V=>u(V.target.value)}),_.jsx("h5",{children:"You can edit Your Skills by uploading skills from your profile or skill exchange"}),_.jsx("button",{type:"button",className:"close-btn",onClick:n,children:_.jsx("i",{className:"fa-solid fa-x"})}),_.jsx("button",{type:"submit",children:"Save Changes"})]}),e&&_.jsx(_a,{})]})},n9=()=>{const[n,e]=x.useState(!1),t=x.useContext(ya),i=t?.skills||{},a=Object.entries(i).map(([l,u])=>({id:l,...u}));return console.log(t),_.jsx(_.Fragment,{children:_.jsxs("div",{className:"profile-intro-stu-outer",children:[_.jsxs("div",{className:"profile-intro-stu",children:[_.jsx("div",{className:"profile-img-stu",children:_.jsx("img",{src:t?.profileImage||ys,alt:"profile-image"})}),_.jsxs("div",{className:"pr-int-stu",children:[_.jsx("h2",{id:"name",children:t?.name||"Student Name"}),_.jsx("p",{id:"about",children:t?.description||"Add about yourself"})]}),_.jsx("br",{}),_.jsx("br",{})]}),_.jsxs("div",{className:"skill-tags-stu",children:[a.length==0&&_.jsx("h6",{children:"no skills yet"}),_.jsx("button",{children:"Skill Exchange Member"}),a.map(l=>_.jsx("button",{children:l.title},l.id))]}),_.jsxs("div",{className:"impact-score",children:[_.jsx("div",{children:_.jsx("p",{children:"Organization Impact Score:"})}),_.jsx("div",{className:"progress-bar",children:_.jsx("div",{className:"progress-fill"})}),_.jsx("div",{children:_.jsx("p",{children:"75/100"})})]}),_.jsxs("div",{className:"profile-intro-buttons",children:[_.jsx("button",{children:_.jsx("a",{href:`tel:${t?.mobileNum||""}`,children:"Contact"})}),_.jsx("button",{children:_.jsx("a",{href:`mailto:${t?.email||""}`,children:"Email"})}),_.jsx("button",{onClick:()=>e(!0),children:"Edit Profile"}),n&&_.jsx(t9,{close:()=>e(!1)})]})]})})},i9=({close:n})=>{const[e,t]=x.useState(""),[i,a]=x.useState(""),[l,u]=x.useState(null),[f,m]=x.useState(0),[g,y]=x.useState(!1),{id:E}=En(),b=async I=>{const V=lt(ct,`Students/${E}/skills`),L=Yl(V);await bs(L,I)},A=async I=>{if(I.preventDefault(),!l){alert("Please upload a certificate");return}y(!0);try{const V=Ql(),L=vh(V,`Certificates/${Date.now()}_${l.name}`),X=_h(L,l);X.on("state_changed",K=>{const $=K.bytesTransferred/K.totalBytes*100;m(Math.round($))},K=>{console.error("Upload error:",K),y(!1)},async()=>{const K=await yh(X.snapshot.ref),$={title:e,description:i,certificateURL:K,certificateName:l.name,addedAt:new Date().toISOString()};await b($),alert("Skill Added Successfully!"),y(!1),t(""),a(""),u(null),m(0)})}catch(V){console.error("Error adding skill:",V),y(!1)}};return _.jsxs("div",{className:"edit-profile-Student",children:[_.jsx("h3",{children:"Add New Skill"}),_.jsxs("form",{onSubmit:A,children:[_.jsx("input",{type:"text",placeholder:"Enter Skill Title",value:e,onChange:I=>t(I.target.value),required:!0}),_.jsx("h6",{children:"Upload your certificate"}),_.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",onChange:I=>u(I.target.files[0]),required:!0}),l&&_.jsxs("p",{children:["Upload Progress: ",f,"%"]}),_.jsx("textarea",{placeholder:"Write about this skill",value:i,onChange:I=>a(I.target.value),required:!0}),_.jsx("button",{type:"button",className:"close-btn",onClick:n,children:_.jsx("i",{className:"fa-solid fa-x"})}),_.jsx("button",{type:"submit",children:"Save Skill"})]}),g&&_.jsx("p",{children:"Uploading... Please wait."})]})},s9=()=>{const[n,e]=x.useState(!1),t=x.useContext(ya),i=En(),a=t?.skills||{},l=Object.entries(a).map(([f,m])=>({id:f,...m})),u=f=>{Wv(lt(ct,`Students/${i.id}/skills/${f}`)).then(()=>{console.log("Deleted successfully")}).catch(m=>{console.log(m)})};return _.jsxs("div",{className:"skills-stu",children:[_.jsxs("div",{className:"skills-head",children:[_.jsx("h2",{children:"My Skills :"}),_.jsx("button",{onClick:()=>e(!0),children:"Add New"})]}),_.jsxs("div",{className:"skills-collection",children:[l.length===0&&_.jsxs("h6",{children:[_.jsx("br",{}),_.jsx("br",{}),"No skills added yet"]}),l.map(f=>_.jsxs("div",{className:"skills-card",children:[_.jsxs("h2",{children:[_.jsx("i",{className:"fa-solid fa-trophy"})," ",f.title]}),_.jsx("img",{src:f.certificateURL?f.certificateURL:ys,alt:"certificate"}),_.jsx("h3",{children:"Description:"}),_.jsx("p",{children:f.description}),_.jsxs("button",{className:"DeleteBtn",onClick:()=>{u(f.id)},children:[_.jsx("i",{class:"fa-solid fa-trash"})," Delete"]})]},f.id))]}),n&&_.jsx(i9,{close:()=>e(!1)})]})},r9=({close:n})=>{const[e,t]=x.useState(""),[i,a]=x.useState(""),[l,u]=x.useState(null),[f,m]=x.useState(0),[g,y]=x.useState(!1),{id:E}=En(),b=async I=>{const V=lt(ct,`Students/${E}/Achievements`),L=Yl(V);await bs(L,I)},A=async I=>{if(I.preventDefault(),!l){alert("Please upload a certificate");return}y(!0);try{const V=Ql(),L=vh(V,`Certificates/${Date.now()}_${l.name}`),X=_h(L,l);X.on("state_changed",K=>{const $=K.bytesTransferred/K.totalBytes*100;m(Math.round($))},K=>{console.error("Upload error:",K),y(!1)},async()=>{const K=await yh(X.snapshot.ref),$={title:e,description:i,certificateURL:K,certificateName:l.name,addedAt:new Date().toISOString()};await b($),alert("Achievement Added Successfully!"),y(!1),t(""),a(""),u(null),m(0)})}catch(V){console.error("Error adding Achievement:",V),y(!1)}};return _.jsxs("div",{className:"edit-profile-Student",children:[_.jsx("h3",{children:"Add New Achievement"}),_.jsxs("form",{onSubmit:A,children:[_.jsx("input",{type:"text",placeholder:"Enter Achievement Title",value:e,onChange:I=>t(I.target.value),required:!0}),_.jsx("h6",{children:"Upload your certificate"}),_.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",onChange:I=>u(I.target.files[0]),required:!0}),l&&_.jsxs("p",{children:["Upload Progress: ",f,"%"]}),_.jsx("textarea",{placeholder:"Write about this Achievement",value:i,onChange:I=>a(I.target.value),required:!0}),_.jsx("button",{type:"button",className:"close-btn",onClick:n,children:_.jsx("i",{className:"fa-solid fa-x"})}),_.jsx("button",{type:"submit",children:"Save Achievement"})]}),g&&_.jsx("p",{children:"Uploading... Please wait."})]})},a9=()=>{const[n,e]=x.useState(!1),i=x.useContext(ya)?.Achievements||{},a=Object.entries(i).map(([f,m])=>({id:f,...m})),l=En(),u=f=>{console.log(f),Wv(lt(ct,`Students/${l.id}/Achievements/${f}`)).then(()=>{console.log("Deleted successfully")}).catch(m=>{console.log(m)})};return _.jsxs("div",{children:[_.jsxs("div",{className:"certificates-stu",children:[_.jsxs("div",{className:"cert-head",children:[_.jsx("h2",{children:"Photos & Achievements :"}),_.jsx("button",{onClick:()=>e(!0),children:"Upload Achievements"})]}),a.length===0&&_.jsxs("h6",{children:[" ",_.jsx("br",{})," ",_.jsx("br",{}),"No skill Added yet"]}),_.jsx("div",{className:"certificates-collection",children:a.map(f=>_.jsxs("div",{className:"cert-card",id:f.id,children:[_.jsxs("h2",{children:[_.jsx("i",{className:"fa-solid fa-trophy"}),f.title]}),_.jsx("img",{src:f.certificateURL,alt:""}),_.jsx("h3",{children:"About journey:-"}),_.jsx("p",{children:f.description}),_.jsxs("button",{className:"DeleteBtn",onClick:()=>{u(f.id)},children:[_.jsx("i",{class:"fa-solid fa-trash"})," Delete"]})]}))})]}),n&&_.jsx(r9,{close:()=>e(!1)})]})},o9=({close:n})=>{const[e,t]=x.useState(""),[i,a]=x.useState(""),[l,u]=x.useState(null),[f,m]=x.useState(0),[g,y]=x.useState(!1),{id:E}=En(),b=async I=>{const V=lt(ct,`Students/${E}/Projects`),L=Yl(V);await bs(L,I)},A=async I=>{if(I.preventDefault(),!l){alert("Please upload a certificate");return}y(!0);try{const V=Ql(),L=vh(V,`Certificates/${Date.now()}_${l.name}`),X=_h(L,l);X.on("state_changed",K=>{const $=K.bytesTransferred/K.totalBytes*100;m(Math.round($))},K=>{console.error("Upload error:",K),y(!1)},async()=>{const K=await yh(X.snapshot.ref),$={title:e,description:i,certificateURL:K,certificateName:l.name,addedAt:new Date().toISOString()};await b($),alert("Project Added Successfully!"),y(!1),t(""),a(""),u(null),m(0)})}catch(V){console.error("Error adding Project:",V),y(!1)}};return _.jsxs("div",{className:"edit-profile-Student",children:[_.jsx("h3",{children:"Add New Project"}),_.jsxs("form",{onSubmit:A,children:[_.jsx("input",{type:"text",placeholder:"Enter Project Title",value:e,onChange:I=>t(I.target.value),required:!0}),_.jsx("h6",{children:"Upload your certificate"}),_.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",onChange:I=>u(I.target.files[0]),required:!0}),l&&_.jsxs("p",{children:["Upload Progress: ",f,"%"]}),_.jsx("textarea",{placeholder:"Write about this Project",value:i,onChange:I=>a(I.target.value),required:!0}),_.jsx("button",{type:"button",className:"close-btn",onClick:n,children:_.jsx("i",{className:"fa-solid fa-x"})}),_.jsx("button",{type:"submit",children:"Save Project"})]}),g&&_.jsx("h6",{children:"Uploading... Please wait."})]})},l9=()=>{const[n,e]=x.useState(!1),t=x.useContext(ya);console.log(t);const i=En();console.log(i);const a=t?.Projects||{},l=Object.entries(a).map(([f,m])=>({id:f,...m})),u=f=>{console.log(f),Wv(lt(ct,`Students/${i.id}/Projects/${f}`)).then(()=>{console.log("Deleted successfully")}).catch(m=>{console.log(m)})};return _.jsxs("div",{children:[_.jsxs("div",{className:"projects-stu",children:[_.jsxs("div",{className:"projects-head",children:[_.jsx("h2",{children:"Projects :"}),_.jsx("button",{onClick:()=>e(!0),children:"Upload Projects"})]}),_.jsx("div",{className:"projects-collection",children:l.map(f=>_.jsxs("div",{className:"projects-card",children:[_.jsxs("h2",{children:[_.jsx("i",{className:"fa-solid fa-trophy"}),f.title]}),_.jsx("img",{src:f.certificateURL,alt:""}),_.jsx("h3",{children:"About Project:-"}),_.jsx("p",{children:f.description}),_.jsxs("button",{className:"DeleteBtn",onClick:()=>{u(f.id)},children:[_.jsx("i",{class:"fa-solid fa-trash"})," Delete"]})]},f.id))})]}),n&&_.jsx(o9,{close:()=>e(!1)})]})},c9=()=>_.jsxs("div",{children:[_.jsx(n9,{}),_.jsx(s9,{}),_.jsx(a9,{}),_.jsx(l9,{})]}),u9=()=>(x.useContext(ya),En(),_.jsxs("div",{children:[_.jsx("input",{type:"checkbox",id:"menu-toggle",className:"menu-toggle",hidden:!0}),_.jsx(C1,{}),_.jsx(e9,{}),_.jsx("div",{className:"main-right",children:_.jsx(lC,{})})]})),h9=()=>_.jsx("div",{children:"Mentor Dashboard"}),Hm=x.createContext(),f9=({children:n})=>{const[e,t]=x.useState(!0),i=En();console.log(i.id);const[a,l]=x.useState(null);return x.useEffect(()=>{const u=lt(ct,`Organizations/${i.id}`),f=$v(u,m=>{m.exists()?l(m.val()):console.log("No Data Found"),t(!1)});return()=>f()},[i.id]),e?_.jsx(_a,{}):(console.log(a),_.jsx(Hm.Provider,{value:a,children:n}))},d9=()=>{const{id:n}=En();return _.jsx("div",{className:"navigation-dash-main",children:_.jsxs("div",{className:"main-left",children:[_.jsxs("ul",{children:[_.jsx(mn,{to:`/organization-dashboard/${n}/dashboard`,children:_.jsxs("li",{children:[_.jsx("i",{className:"fa-regular fa-house"}),"Dashboard"]})}),_.jsxs(mn,{to:`/organization-dashboard/${n}/`,children:["   ",_.jsxs("li",{children:[_.jsx("i",{className:"fa-regular fa-user"}),"My Profile"]})]}),_.jsxs(mn,{to:`/organization-dashboard/${n}/projects`,children:["   ",_.jsxs("li",{children:[_.jsx("i",{className:"fa-regular fa-building"}),"Projects"]})]}),_.jsxs(mn,{to:`/organization-dashboard/${n}/events`,children:["  ",_.jsxs("li",{children:[_.jsx("i",{className:"fa-regular fa-calendar-days"}),"Events"]})]})]}),_.jsx("button",{className:"logout-btn",onClick:()=>(localStorage.removeItem("loggedInUserSkillExchange"),window.location.reload(),_.jsx(_y,{to:"/login",replace:!0})),children:"Logout"})]})})},m9=()=>(x.useContext(Hm),En(),_.jsxs("div",{children:[_.jsx("input",{type:"checkbox",id:"menu-toggle",className:"menu-toggle",hidden:!0}),_.jsx(C1,{}),_.jsx(d9,{}),_.jsx("div",{className:"main-right",children:_.jsx(lC,{})})]})),S_=({children:n})=>localStorage.getItem("loggedInUserSkillExchange")?n:_.jsx(_y,{to:"/login",replace:!0}),p9=()=>_.jsx("div",{children:"Dashboard"}),g9=()=>_.jsx("div",{children:"Events stu"}),_9=()=>_.jsx("div",{children:"Mentorship"}),y9=()=>{const[n,e]=x.useState([]),{id:t}=En();return console.log(t),x.useEffect(()=>{const i=lt(ct,"Organizations");$v(i,a=>{const l=a.val();if(!l)return;const u=Object.entries(l).map(([m,g])=>({id:m,...g}));let f=[];u.forEach(m=>{(m.OrgProjects?Object.entries(m.OrgProjects).map(([y,E])=>({id:y,...E})):[]).forEach(y=>{const E={OrgName:m.name,OrgImage:m.profileImage,ProjDetails:{ProjectName:y.NameOfProject,Budget:y.BudgetOfProject,Deadline:y.Deadline,DescriptionOfProject:y.DescriptionOfThisProject,Status:y.Status,CurrentBids:y.CurrentBids,ProjectId:y.id}};f.push(E)})}),e(f)})},[]),console.log(n,"PROJECTS ARRAY"),_.jsxs("div",{children:[_.jsx("h5",{children:"Organizational Projects"}),_.jsx("br",{}),_.jsx("div",{className:"stu-org-projects",children:n.map((i,a)=>_.jsxs("div",{className:"stu-proj-card",children:[_.jsxs("div",{className:"stu-proj-card-top",children:[_.jsx("img",{src:i.OrgImage,alt:""}),_.jsx("h2",{className:"org-name-stu",children:i.OrgName})]}),_.jsxs("div",{className:"project-card-org",children:[_.jsx("h2",{children:i.ProjDetails.ProjectName}),_.jsxs("p",{className:"budget-pro-card",children:["Budget: ",i.ProjDetails.Budget," | Deadline: ",i.ProjDetails.Deadline]}),_.jsx("p",{className:"desc-pro-card",children:i.ProjDetails.DescriptionOfProject}),_.jsxs("h4",{children:["Bids Received: ",i.ProjDetails.CurrentBids]}),_.jsx("button",{className:"StatusProjectOrg",children:i.ProjDetails.Status}),_.jsxs("div",{className:"buttons-stu-proj",children:[_.jsx("button",{className:"view-button",children:"View Details"}),_.jsx("button",{className:"bid-button-stu",children:"Add Bid"})]})]})]},a))})]})},v9=()=>{const e=x.useContext(ya)?.skills||{},t=Object.entries(e).map(([i,a])=>({id:i,...a}));return _.jsx("div",{children:_.jsxs("div",{class:"my-skill-flow",children:[_.jsx("h3",{children:"My Skills:-"}),_.jsx("div",{class:"skill-list-flow",children:_.jsxs("ul",{children:[t.length===0&&_.jsx("h6",{children:"No skills yet"}),t.map(i=>_.jsxs("li",{children:[_.jsx("p",{children:i.title},i.id),_.jsx("button",{children:_.jsx("i",{class:"fa-solid fa-xmark"})})]}))]})}),_.jsxs("div",{class:"add-new-skill-flow",children:[_.jsx("input",{type:"text",placeholder:"Add Skills..."}),_.jsxs("button",{onClick:()=>alert("functionality under development"),children:["Add",_.jsx("i",{class:"fa-solid fa-plus"})]})]})]})})},E9=()=>{const[n,e]=x.useState(""),{id:t}=En(),i=x.useContext(ya);async function a(){if(!n)return;const f=lt(ct,`Students/${t}/desiredSkills`);try{const y=[...(await $s(f)).val()||[],n];await im(lt(ct,`Students/${t}`),{desiredSkills:y}),alert("Skill Added!"),e("")}catch(m){console.log("Error:",m)}}async function l(f){const m=lt(ct,`Students/${t}/desiredSkills`),E=((await $s(m)).val()||[]).filter((b,A)=>A!==f);await im(lt(ct,`Students/${t}`),{desiredSkills:E})}const u=i?.desiredSkills||[];return _.jsx("div",{children:_.jsxs("div",{className:"desired-skill-flow",children:[_.jsx("h3",{children:"Desired Skills:-"}),_.jsx("div",{className:"desired-skill-list-flow",children:_.jsxs("ul",{children:[u.length===0&&_.jsx("h6",{children:"Add desired skills"}),u.map((f,m)=>_.jsxs("li",{children:[_.jsx("p",{children:f}),_.jsx("button",{onClick:()=>l(m),children:_.jsx("i",{className:"fa-solid fa-xmark"})})]},m))]})}),_.jsxs("div",{className:"add-new-desired-skill-flow",children:[_.jsx("input",{type:"text",placeholder:"Add Desired Skills...",value:n,onChange:f=>e(f.target.value)}),_.jsxs("button",{onClick:a,children:["Add ",_.jsx("i",{className:"fa-solid fa-plus"})]})]})]})})},T9=({id:n})=>{const e=am(),[t,i]=x.useState(!1),a=n,l=a?.skills||{},u=Object.entries(l).map(([f,m])=>({id:f,...m}));return console.log(a),_.jsxs("div",{children:[_.jsx("button",{style:{background:"0",border:"0",fontWeight:"500",fontSize:"clamp(16px,2vw,18px",color:"white",borderRadius:"5px",padding:"5px",backgroundColor:"black",marginBottom:"10px"},onClick:()=>e(-1),children:"back"}),_.jsxs("div",{className:"profile-intro-stu-outer",children:[_.jsxs("div",{className:"profile-intro-stu",children:[_.jsx("div",{className:"profile-img-stu",children:_.jsx("img",{src:a?.profileImage||ys,alt:"profile-image"})}),_.jsxs("div",{className:"pr-int-stu",children:[_.jsx("h2",{id:"name",children:a?.name||"Student Name"}),_.jsx("p",{id:"about",children:a?.description||"Add about yourself"})]}),_.jsx("br",{}),_.jsx("br",{})]}),_.jsxs("div",{className:"skill-tags-stu",children:[u.length==0&&_.jsx("h6",{children:"no skills yet"}),_.jsx("button",{children:"Skill Exchange Member"}),u.map(f=>_.jsx("button",{children:f.title},f.id))]}),_.jsxs("div",{className:"impact-score",children:[_.jsx("div",{children:_.jsx("p",{children:"Organization Impact Score:"})}),_.jsx("div",{className:"progress-bar",children:_.jsx("div",{className:"progress-fill"})}),_.jsx("div",{children:_.jsx("p",{children:"75/100"})})]}),_.jsxs("div",{className:"profile-intro-buttons",children:[_.jsx("button",{children:_.jsx("a",{href:`tel:${a?.mobileNum||""}`,children:"Contact"})}),_.jsx("button",{children:_.jsx("a",{href:`mailto:${a?.email||""}`,children:"Email"})})]})]})]})},S9=({id:n})=>{const e=n,t=e?.Achievements||{},i=Object.entries(t).map(([a,l])=>({id:a,...l}));return console.log("mydata",e),_.jsx("div",{children:_.jsxs("div",{className:"certificates-stu",children:[_.jsx("div",{className:"cert-head",children:_.jsx("h2",{children:"Photos & Achievements :"})}),i.length===0&&_.jsxs("h6",{children:[" ",_.jsx("br",{})," ",_.jsx("br",{}),"No skill Added yet"]}),_.jsx("div",{className:"certificates-collection",children:i.map(a=>_.jsxs("div",{className:"cert-card",id:a.id,children:[_.jsxs("h2",{children:[_.jsx("i",{className:"fa-solid fa-trophy"}),a.title]}),_.jsx("img",{src:a.certificateURL,alt:""}),_.jsx("h3",{children:"About journey:-"}),_.jsx("p",{children:a.description})]}))})]})})},b9=({id:n})=>{const[e,t]=x.useState(!1),a=n?.skills||{},l=Object.entries(a).map(([u,f])=>({id:u,...f}));return _.jsx("div",{children:_.jsxs("div",{className:"skills-stu",children:[_.jsx("div",{className:"skills-head",children:_.jsx("h2",{children:"My Skills :"})}),_.jsxs("div",{className:"skills-collection",children:[l.length===0&&_.jsxs("h6",{children:[_.jsx("br",{}),_.jsx("br",{}),"No skills added yet"]}),l.map(u=>_.jsxs("div",{className:"skills-card",children:[_.jsxs("h2",{children:[_.jsx("i",{className:"fa-solid fa-trophy"})," ",u.title]}),_.jsx("img",{src:u.certificateURL?u.certificateURL:ys,alt:"certificate"}),_.jsx("h3",{children:"Description:"}),_.jsx("p",{children:u.description})]},u.id))]})]})})},w9=({id:n})=>{const[e,t]=x.useState(!1),a=n?.Projects||{},l=Object.entries(a).map(([u,f])=>({id:u,...f}));return _.jsx("div",{children:_.jsxs("div",{className:"projects-stu",children:[_.jsxs("div",{className:"projects-head",children:[_.jsx("h2",{children:"Projects :"}),_.jsx("button",{onClick:()=>t(!0),children:"Upload Projects"})]}),_.jsx("div",{className:"projects-collection",children:l.map(u=>_.jsxs("div",{className:"projects-card",children:[_.jsxs("h2",{children:[_.jsx("i",{className:"fa-solid fa-trophy"}),u.title]}),_.jsx("img",{src:u.certificateURL,alt:""}),_.jsx("h3",{children:"About Project:-"}),_.jsx("p",{children:u.description})]},u.id))})]})})},C9=({value:n})=>(console.log("value",n),_.jsxs("div",{className:"stu-profile-view",children:[_.jsx(T9,{id:n}),_.jsx(b9,{id:n}),_.jsx(S9,{id:n}),_.jsx(w9,{id:n})]})),A9=()=>{const[n,e]=x.useState([]),[t,i]=x.useState(),[a,l]=x.useState(null);async function u(){const m=(await $s(lt(ct,"Students")))?.val(),g=Object.entries(m).map(([y,E])=>({id:y,...E}));e(g)}return x.useEffect(()=>{u()},[]),console.log(n[0]?.desiredSkills),_.jsxs("div",{children:[_.jsx("h3",{className:"skill-matches",children:"AI Skill Matches:"}),_.jsx("div",{className:"skill-profiles",children:_.jsxs("div",{className:"profile-cards",children:[n.map(f=>_.jsxs("div",{className:"skill-profile-card",children:[_.jsx("img",{src:f.profileImage||ys,alt:"Profile"}),_.jsx("h3",{children:f?.name||"SkillX user"}),_.jsx("p",{children:f.description}),_.jsx("hr",{}),_.jsxs("div",{className:"user-skills",children:[_.jsx("h2",{children:"Current skills:-"}),_.jsx("ul",{children:f.skills?Object.values(f.skills).map((m,g)=>_.jsx("li",{children:m.title},g)):_.jsx("li",{children:"No skills added"})})]}),_.jsxs("div",{className:"user-desired-skills",children:[_.jsx("h2",{children:"Desired skills:-"}),_.jsxs("ul",{children:[f.desiredSkills?.map(m=>_.jsx("li",{children:m},m)),!f.desiredSkills&&_.jsx("li",{children:"No desired skills yet"})]})]}),_.jsxs("div",{className:"buttons-cont-skills",children:[_.jsxs("button",{className:"view-pro-skill-card-stu",onClick:()=>l(f),children:[_.jsx("i",{className:"fa-solid fa-eye"})," View Profile"]}),_.jsxs("button",{className:"chat-skill-card",style:{backgroundColor:"black"},children:[_.jsx("i",{className:"fa-solid fa-comment"})," Chat"]})]})]},f.id)),a&&_.jsx(C9,{value:a})]})})]})},R9=()=>_.jsx("div",{children:_.jsxs("div",{class:"skill-flow-top",children:[_.jsx(v9,{}),_.jsx(E9,{})]})}),I9=()=>_.jsx("div",{children:_.jsxs("div",{class:"recent-notifications",children:[_.jsx("h4",{children:"Recent Notifications"}),_.jsxs("div",{class:"notification-box",children:[_.jsxs("div",{class:"not-title",children:[_.jsx("i",{class:"fa-solid fa-bolt"}),"",_.jsx("p",{children:"New Skill Match Found with Alice Johnson "})," "]}),_.jsx("p",{class:"time-not",children:"2 hours ago"})]}),_.jsxs("div",{class:"notification-box",children:[_.jsxs("div",{class:"not-title",children:[_.jsx("i",{class:"fa-regular fa-comments"}),"",_.jsx("p",{children:"Bob Willaiams sent you a message "})," "]}),_.jsx("p",{class:"time-not",children:"1 day ago"})]}),_.jsxs("div",{class:"notification-box",children:[_.jsxs("div",{class:"not-title",children:[_.jsx("i",{class:"fa-solid fa-bolt"}),"",_.jsx("p",{children:"Your recent skills #react is in trending! "})," "]}),_.jsx("p",{class:"time-not",children:"5 hours ago"})]}),_.jsxs("div",{class:"notification-box",children:[_.jsxs("div",{class:"not-title",children:[_.jsx("i",{class:"fa-solid fa-bolt"}),"",_.jsx("p",{children:"New Skill Match Found with Alice Johnson "})," "]}),_.jsx("p",{class:"time-not",children:"2 hours ago"})]}),_.jsxs("div",{class:"notification-box",children:[_.jsxs("div",{class:"not-title",children:[_.jsx("i",{class:"fa-regular fa-comments"}),"",_.jsx("p",{children:"Bob Willaiams sent you a message "})," "]}),_.jsx("p",{class:"time-not",children:"1 day ago"})]}),_.jsxs("div",{class:"notification-box",children:[_.jsxs("div",{class:"not-title",children:[_.jsx("i",{class:"fa-solid fa-bolt"}),"",_.jsx("p",{children:"Your recent skills #react is in trending! "})," "]}),_.jsx("p",{class:"time-not",children:"5 hours ago"})]}),_.jsxs("div",{class:"notification-box",children:[_.jsxs("div",{class:"not-title",children:[_.jsx("i",{class:"fa-solid fa-bolt"}),"",_.jsx("p",{children:"New Skill Match Found with Alice Johnson "})," "]}),_.jsx("p",{class:"time-not",children:"2 hours ago"})]}),_.jsxs("div",{class:"notification-box",children:[_.jsxs("div",{class:"not-title",children:[_.jsx("i",{class:"fa-regular fa-comments"}),"",_.jsx("p",{children:"Bob Willaiams sent you a message "})," "]}),_.jsx("p",{class:"time-not",children:"1 day ago"})]}),_.jsxs("div",{class:"notification-box",children:[_.jsxs("div",{class:"not-title",children:[_.jsx("i",{class:"fa-solid fa-bolt"}),"",_.jsx("p",{children:"Your recent skills #react is in trending! "})," "]}),_.jsx("p",{class:"time-not",children:"5 hours ago"})]}),_.jsxs("div",{class:"notification-box",children:[_.jsxs("div",{class:"not-title",children:[_.jsx("i",{class:"fa-solid fa-bolt"}),"",_.jsx("p",{children:"New Skill Match Found with Alice Johnson "})," "]}),_.jsx("p",{class:"time-not",children:"2 hours ago"})]}),_.jsxs("div",{class:"notification-box",children:[_.jsxs("div",{class:"not-title",children:[_.jsx("i",{class:"fa-regular fa-comments"}),"",_.jsx("p",{children:"Bob Willaiams sent you a message "})," "]}),_.jsx("p",{class:"time-not",children:"1 day ago"})]}),_.jsxs("div",{class:"notification-box",children:[_.jsxs("div",{class:"not-title",children:[_.jsx("i",{class:"fa-solid fa-bolt"}),"",_.jsx("p",{children:"Your recent skills #react is in trending! "})," "]}),_.jsx("p",{class:"time-not",children:"5 hours ago"})]})]})}),N9=()=>_.jsxs(_.Fragment,{children:[_.jsx("h3",{children:"Skill Exchange Flow"}),_.jsx(R9,{}),_.jsxs("div",{className:"skill-ex-bottom",children:[_.jsx(A9,{}),_.jsx(I9,{})]})]}),x9=({close:n})=>{const[e,t]=x.useState(!1),[i,a]=x.useState(""),[l,u]=x.useState(""),[f,m]=x.useState(""),[g,y]=x.useState(""),[E,b]=x.useState(null),[A,I]=x.useState(0),{id:V}=En();console.log("Editing Organization ID:",V);const L=$=>{b($.target.files[0])},X=async($,ae)=>{await im(lt(ct,`Organizations/${$}`),ae)},K=async $=>{$.preventDefault();const ae={};if(i.trim()!==""&&(ae.name=i.trim()),l.trim()!==""&&(ae.Address=l.trim()),g.trim()!==""&&(ae.description=g.trim()),f.trim()!==""&&(ae.Services=f.trim()),!E&&Object.keys(ae).length===0){alert("No changes to update");return}t(!0);try{if(E){const pe=Ql(),ve=vh(pe,`ProfilePictures/${E.name}`),O=_h(ve,E);O.on("state_changed",R=>{const N=R.bytesTransferred/R.totalBytes*100;I(Math.round(N))},R=>{console.error("Upload error:",R),t(!1)},async()=>{const R=await yh(O.snapshot.ref);console.log("File available at:",R);const N=Yl(lt(ct,"images"));bs(N,{name:E.name,url:R}),ae.profileImage=R,await X(V,ae),alert("All changes made!"),t(!1),I(0)})}else await X(V,ae),alert("All changes made!"),t(!1)}catch(pe){console.error("Error updating profile:",pe),t(!1)}};return _.jsxs("div",{className:"edit-profile-Student",children:[_.jsx("h3",{children:"Edit Your Profile:"}),_.jsxs("form",{onSubmit:K,children:[_.jsx("h6",{children:"Upload your profile picture"}),_.jsx("input",{type:"file",onChange:L}),E&&_.jsxs("p",{children:["Upload Progress: ",A,"%"]}),_.jsx("input",{type:"text",placeholder:"Edit your name",value:i,onChange:$=>a($.target.value)}),_.jsx("input",{type:"text",placeholder:"Edit your Address",value:l,onChange:$=>u($.target.value)}),_.jsx("input",{type:"text",placeholder:"Edit your services (What you prvide)",value:f,onChange:$=>m($.target.value)}),_.jsx("textarea",{placeholder:"Write About Organization",value:g,onChange:$=>y($.target.value)}),_.jsx("button",{type:"button",className:"close-btn",onClick:n,children:_.jsx("i",{className:"fa-solid fa-x"})}),_.jsx("button",{type:"submit",children:"Save Changes"})]}),e&&_.jsx(_a,{})]})},A1=()=>{const[n,e]=x.useState(!1),t=x.useContext(Hm);return _.jsx(_.Fragment,{children:_.jsxs("div",{className:"profile-intro-stu-outer",children:[_.jsxs("div",{className:"profile-intro-stu",children:[_.jsx("div",{className:"profile-img-stu",children:_.jsx("img",{src:t?.profileImage||ys,alt:"profile-image"})}),_.jsxs("div",{className:"pr-int-stu",children:[_.jsxs("h2",{id:"name",children:[t?.name||"Organization Name"," ",_.jsx("i",{class:"fa-solid fa-calendar-check"})]}),_.jsx("p",{style:{marginTop:"10px"},id:"about",children:t?.description||"Add about Organization"}),_.jsx("h6",{style:{fontSize:"clamp(18px,2vw,20px)"},children:"About Our Services:-"}),_.jsx("p",{children:t?.Services||"We serve our almighty Nation"})]}),_.jsx("br",{}),_.jsx("br",{})]}),_.jsxs("div",{className:"address-org",children:[_.jsx("h6",{children:"Address:-"}),_.jsx("p",{children:t?.Address||"Skill Exchange Member"})]}),_.jsxs("div",{className:"profile-intro-buttons",children:[_.jsx("button",{children:_.jsx("a",{href:`tel:${t?.mobileNum||""}`,children:"Contact"})}),_.jsx("button",{children:_.jsx("a",{href:`mailto:${t?.email||""}`,children:"Email"})}),_.jsx("button",{onClick:()=>e(!0),children:"Edit Profile"}),n&&_.jsx(x9,{close:()=>e(!1)})]})]})})},O9=()=>_.jsx("div",{children:_.jsx(A1,{})}),D9=({close:n})=>{const[e,t]=x.useState(!1),[i,a]=x.useState(0),[l,u]=x.useState(""),[f,m]=x.useState(""),[g,y]=x.useState(""),[E,b]=x.useState(""),{id:A}=En();async function I(V){V.preventDefault(),t(!0),console.log({NameOfProject:l,BudgetOfProject:f,Deadline:g,DescriptionOfThisProject:E}),Yl(lt(ct,`Organizations/${A}/OrgProjects`),{NameOfProject:l,BudgetOfProject:f,Deadline:g,DescriptionOfThisProject:E,DateOfUpload:Date.now(),currentBids:0,Status:"Active"}).then(()=>{alert("Project uploaded successfully")}).catch(X=>{alert("can not add project",X)}),t(!1)}return _.jsxs("div",{className:"edit-profile-Student",children:[_.jsx("h3",{children:"Upload Project"}),_.jsxs("form",{onSubmit:I,children:[_.jsx("input",{type:"text",placeholder:"Add Project Name",value:l,onChange:V=>u(V.target.value),required:!0}),_.jsx("input",{type:"number",placeholder:"Add budget in rupees",value:f,onChange:V=>m(V.target.value),required:!0}),_.jsx("h6",{}),_.jsx("h6",{children:"Enter deadline date:-"}),_.jsx("input",{type:"date",placeholder:"Enter deadline date",value:g,onChange:V=>y(V.target.value),required:!0}),_.jsx("textarea",{name:"",id:"",placeholder:"Add Project Description",value:E,onChange:V=>b(V.target.value),required:!0,children:" "}),_.jsx("button",{type:"button",className:"close-btn",onClick:n,children:_.jsx("i",{className:"fa-solid fa-x"})}),_.jsx("button",{type:"submit",id:"savechanges",children:"Save Changes"})]}),e&&_.jsx(_a,{})]})},k9=()=>{const[n,e]=x.useState(!1),i=x.useContext(Hm)?.OrgProjects,a=Object.entries(i).map(([l,u])=>({id:l,...u}));return console.log(a),_.jsxs("div",{children:[_.jsx(A1,{}),_.jsxs("div",{className:"proj-organization",children:[_.jsxs("div",{className:"proj-head-org",children:[_.jsx("h5",{children:"Our Projects"}),_.jsx("button",{onClick:()=>e(!0),children:"Upload Project"})]}),_.jsxs("div",{className:"projects-cards-org",children:[a.length===0&&_.jsx("h6",{children:"No Projects yet"}),a.map(l=>_.jsxs("div",{className:"project-card-org",children:[_.jsx("h2",{children:l.NameOfProject}),_.jsxs("p",{className:"budget-pro-card",children:["Budget: ",l.BudgetOfProject," | Deadline: ",l.Deadline," "]}),_.jsx("p",{className:"desc-pro-card",children:l.DescriptionOfThisProject}),_.jsxs("h4",{children:["Bids Received : ",l.currentBids," "]}),_.jsx("button",{className:"StatusProjectOrg",children:l.Status}),_.jsx("button",{className:"view-button",children:"View Details"})]},l.id))]})]}),n&&_.jsx(D9,{close:()=>e(!1)})]})},P9=()=>_.jsx("div",{children:"Events"}),M9=()=>_.jsx("div",{children:"Dahboard Organization"}),L9=()=>{const[n,e]=x.useState(null),t=am();return x.useEffect(()=>{const i=JSON.parse(localStorage.getItem("loggedInUserSkillExchange"));i&&(e(i.role),i.role==="student"?t(`/student-dashboard/${i.id}`):i.role==="mentor"?t(`/mentor-dashboard/${i.id}`):i.role==="organization"?t(`/organization-dashboard/${i.id}`):alert("user not exist"))},[]),_.jsx(_.Fragment,{children:_.jsxs(rO,{children:[_.jsx(dn,{path:"/",element:_.jsx(L3,{})}),_.jsx(dn,{path:"/login",element:_.jsx(g1,{})}),_.jsx(dn,{path:"/register",element:_.jsx(J3,{})}),_.jsxs(dn,{path:"/student-dashboard/:id/*",element:_.jsxs(S_,{children:[" ",_.jsxs(Z3,{children:[" ",_.jsx(u9,{})," "]})," "]}),children:[_.jsx(dn,{path:"",element:_.jsx(c9,{})}),_.jsx(dn,{path:"dashboard",element:_.jsx(p9,{})}),_.jsx(dn,{path:"skill-exchange",element:_.jsx(N9,{})}),_.jsx(dn,{path:"projects",element:_.jsx(y9,{})}),_.jsx(dn,{path:"mentorship",element:_.jsx(_9,{})}),_.jsx(dn,{path:"events",element:_.jsx(g9,{})})]}),_.jsx(dn,{path:"/mentor-dashboard/:id/*",element:_.jsx(S_,{children:_.jsx(h9,{})})}),_.jsxs(dn,{path:"/organization-dashboard/:id/*",element:_.jsx(S_,{children:_.jsx(f9,{children:_.jsx(m9,{})})}),children:[_.jsx(dn,{path:"",element:_.jsx(O9,{})}),_.jsx(dn,{path:"dashboard",element:_.jsx(M9,{})}),_.jsx(dn,{path:"projects",element:_.jsx(k9,{})}),_.jsx(dn,{path:"events",element:_.jsx(P9,{})})]})]})})};fx.createRoot(document.getElementById("root")).render(_.jsx(O3,{children:_.jsx(IO,{children:_.jsx(L9,{})})}));
