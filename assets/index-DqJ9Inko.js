(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var jg={exports:{}},Xu={};var gb;function XN(){if(gb)return Xu;gb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:n,type:s,key:c,ref:a!==void 0?a:null,props:l}}return Xu.Fragment=e,Xu.jsx=t,Xu.jsxs=t,Xu}var _b;function $N(){return _b||(_b=1,jg.exports=XN()),jg.exports}var v=$N(),zg={exports:{}},Ae={};var yb;function JN(){if(yb)return Ae;yb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),b=Symbol.iterator;function A(M){return M===null||typeof M!="object"?null:(M=b&&M[b]||M["@@iterator"],typeof M=="function"?M:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,V={};function $(M,G,X){this.props=M,this.context=G,this.refs=V,this.updater=X||I}$.prototype.isReactComponent={},$.prototype.setState=function(M,G){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,G,"setState")},$.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function K(){}K.prototype=$.prototype;function ee(M,G,X){this.props=M,this.context=G,this.refs=V,this.updater=X||I}var ue=ee.prototype=new K;ue.constructor=ee,j(ue,$.prototype),ue.isPureReactComponent=!0;var _e=Array.isArray;function Se(){}var x={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function N(M,G,X){var le=X.ref;return{$$typeof:n,type:M,key:G,ref:le!==void 0?le:null,props:X}}function U(M,G){return N(M.type,G,M.props)}function k(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function B(M){var G={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(X){return G[X]})}var O=/\/+/g;function Ze(M,G){return typeof M=="object"&&M!==null&&M.key!=null?B(""+M.key):G.toString(36)}function Oe(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(Se,Se):(M.status="pending",M.then(function(G){M.status==="pending"&&(M.status="fulfilled",M.value=G)},function(G){M.status==="pending"&&(M.status="rejected",M.reason=G)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function J(M,G,X,le,ye){var ve=typeof M;(ve==="undefined"||ve==="boolean")&&(M=null);var De=!1;if(M===null)De=!0;else switch(ve){case"bigint":case"string":case"number":De=!0;break;case"object":switch(M.$$typeof){case n:case e:De=!0;break;case y:return De=M._init,J(De(M._payload),G,X,le,ye)}}if(De)return ye=ye(M),De=le===""?"."+Ze(M,0):le,_e(ye)?(X="",De!=null&&(X=De.replace(O,"$&/")+"/"),J(ye,G,X,"",function(vi){return vi})):ye!=null&&(k(ye)&&(ye=U(ye,X+(ye.key==null||M&&M.key===ye.key?"":(""+ye.key).replace(O,"$&/")+"/")+De)),G.push(ye)),1;De=0;var ut=le===""?".":le+":";if(_e(M))for(var Xe=0;Xe<M.length;Xe++)le=M[Xe],ve=ut+Ze(le,Xe),De+=J(le,G,X,ve,ye);else if(Xe=A(M),typeof Xe=="function")for(M=Xe.call(M),Xe=0;!(le=M.next()).done;)le=le.value,ve=ut+Ze(le,Xe++),De+=J(le,G,X,ve,ye);else if(ve==="object"){if(typeof M.then=="function")return J(Oe(M),G,X,le,ye);throw G=String(M),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return De}function se(M,G,X){if(M==null)return M;var le=[],ye=0;return J(M,le,"","",function(ve){return G.call(X,ve,ye++)}),le}function he(M){if(M._status===-1){var G=M._result;G=G(),G.then(function(X){(M._status===0||M._status===-1)&&(M._status=1,M._result=X)},function(X){(M._status===0||M._status===-1)&&(M._status=2,M._result=X)}),M._status===-1&&(M._status=0,M._result=G)}if(M._status===1)return M._result.default;throw M._result}var ke=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Pe={map:se,forEach:function(M,G,X){se(M,function(){G.apply(this,arguments)},X)},count:function(M){var G=0;return se(M,function(){G++}),G},toArray:function(M){return se(M,function(G){return G})||[]},only:function(M){if(!k(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Ae.Activity=E,Ae.Children=Pe,Ae.Component=$,Ae.Fragment=t,Ae.Profiler=a,Ae.PureComponent=ee,Ae.StrictMode=s,Ae.Suspense=m,Ae.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,Ae.__COMPILER_RUNTIME={__proto__:null,c:function(M){return x.H.useMemoCache(M)}},Ae.cache=function(M){return function(){return M.apply(null,arguments)}},Ae.cacheSignal=function(){return null},Ae.cloneElement=function(M,G,X){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var le=j({},M.props),ye=M.key;if(G!=null)for(ve in G.key!==void 0&&(ye=""+G.key),G)!R.call(G,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&G.ref===void 0||(le[ve]=G[ve]);var ve=arguments.length-2;if(ve===1)le.children=X;else if(1<ve){for(var De=Array(ve),ut=0;ut<ve;ut++)De[ut]=arguments[ut+2];le.children=De}return N(M.type,ye,le)},Ae.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},Ae.createElement=function(M,G,X){var le,ye={},ve=null;if(G!=null)for(le in G.key!==void 0&&(ve=""+G.key),G)R.call(G,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(ye[le]=G[le]);var De=arguments.length-2;if(De===1)ye.children=X;else if(1<De){for(var ut=Array(De),Xe=0;Xe<De;Xe++)ut[Xe]=arguments[Xe+2];ye.children=ut}if(M&&M.defaultProps)for(le in De=M.defaultProps,De)ye[le]===void 0&&(ye[le]=De[le]);return N(M,ve,ye)},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(M){return{$$typeof:d,render:M}},Ae.isValidElement=k,Ae.lazy=function(M){return{$$typeof:y,_payload:{_status:-1,_result:M},_init:he}},Ae.memo=function(M,G){return{$$typeof:g,type:M,compare:G===void 0?null:G}},Ae.startTransition=function(M){var G=x.T,X={};x.T=X;try{var le=M(),ye=x.S;ye!==null&&ye(X,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(Se,ke)}catch(ve){ke(ve)}finally{G!==null&&X.types!==null&&(G.types=X.types),x.T=G}},Ae.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},Ae.use=function(M){return x.H.use(M)},Ae.useActionState=function(M,G,X){return x.H.useActionState(M,G,X)},Ae.useCallback=function(M,G){return x.H.useCallback(M,G)},Ae.useContext=function(M){return x.H.useContext(M)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(M,G){return x.H.useDeferredValue(M,G)},Ae.useEffect=function(M,G){return x.H.useEffect(M,G)},Ae.useEffectEvent=function(M){return x.H.useEffectEvent(M)},Ae.useId=function(){return x.H.useId()},Ae.useImperativeHandle=function(M,G,X){return x.H.useImperativeHandle(M,G,X)},Ae.useInsertionEffect=function(M,G){return x.H.useInsertionEffect(M,G)},Ae.useLayoutEffect=function(M,G){return x.H.useLayoutEffect(M,G)},Ae.useMemo=function(M,G){return x.H.useMemo(M,G)},Ae.useOptimistic=function(M,G){return x.H.useOptimistic(M,G)},Ae.useReducer=function(M,G,X){return x.H.useReducer(M,G,X)},Ae.useRef=function(M){return x.H.useRef(M)},Ae.useState=function(M){return x.H.useState(M)},Ae.useSyncExternalStore=function(M,G,X){return x.H.useSyncExternalStore(M,G,X)},Ae.useTransition=function(){return x.H.useTransition()},Ae.version="19.2.0",Ae}var vb;function oy(){return vb||(vb=1,zg.exports=JN()),zg.exports}var P=oy(),Bg={exports:{}},$u={},Fg={exports:{}},Hg={};var Eb;function ZN(){return Eb||(Eb=1,(function(n){function e(J,se){var he=J.length;J.push(se);e:for(;0<he;){var ke=he-1>>>1,Pe=J[ke];if(0<a(Pe,se))J[ke]=se,J[he]=Pe,he=ke;else break e}}function t(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var se=J[0],he=J.pop();if(he!==se){J[0]=he;e:for(var ke=0,Pe=J.length,M=Pe>>>1;ke<M;){var G=2*(ke+1)-1,X=J[G],le=G+1,ye=J[le];if(0>a(X,he))le<Pe&&0>a(ye,X)?(J[ke]=ye,J[le]=he,ke=le):(J[ke]=X,J[G]=he,ke=G);else if(le<Pe&&0>a(ye,he))J[ke]=ye,J[le]=he,ke=le;else break e}}return se}function a(J,se){var he=J.sortIndex-se.sortIndex;return he!==0?he:J.id-se.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var m=[],g=[],y=1,E=null,b=3,A=!1,I=!1,j=!1,V=!1,$=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;function ue(J){for(var se=t(g);se!==null;){if(se.callback===null)s(g);else if(se.startTime<=J)s(g),se.sortIndex=se.expirationTime,e(m,se);else break;se=t(g)}}function _e(J){if(j=!1,ue(J),!I)if(t(m)!==null)I=!0,Se||(Se=!0,B());else{var se=t(g);se!==null&&Oe(_e,se.startTime-J)}}var Se=!1,x=-1,R=5,N=-1;function U(){return V?!0:!(n.unstable_now()-N<R)}function k(){if(V=!1,Se){var J=n.unstable_now();N=J;var se=!0;try{e:{I=!1,j&&(j=!1,K(x),x=-1),A=!0;var he=b;try{t:{for(ue(J),E=t(m);E!==null&&!(E.expirationTime>J&&U());){var ke=E.callback;if(typeof ke=="function"){E.callback=null,b=E.priorityLevel;var Pe=ke(E.expirationTime<=J);if(J=n.unstable_now(),typeof Pe=="function"){E.callback=Pe,ue(J),se=!0;break t}E===t(m)&&s(m),ue(J)}else s(m);E=t(m)}if(E!==null)se=!0;else{var M=t(g);M!==null&&Oe(_e,M.startTime-J),se=!1}}break e}finally{E=null,b=he,A=!1}se=void 0}}finally{se?B():Se=!1}}}var B;if(typeof ee=="function")B=function(){ee(k)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,Ze=O.port2;O.port1.onmessage=k,B=function(){Ze.postMessage(null)}}else B=function(){$(k,0)};function Oe(J,se){x=$(function(){J(n.unstable_now())},se)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(J){switch(b){case 1:case 2:case 3:var se=3;break;default:se=b}var he=b;b=se;try{return J()}finally{b=he}},n.unstable_requestPaint=function(){V=!0},n.unstable_runWithPriority=function(J,se){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var he=b;b=J;try{return se()}finally{b=he}},n.unstable_scheduleCallback=function(J,se,he){var ke=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?ke+he:ke):he=ke,J){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=he+Pe,J={id:y++,callback:se,priorityLevel:J,startTime:he,expirationTime:Pe,sortIndex:-1},he>ke?(J.sortIndex=he,e(g,J),t(m)===null&&J===t(g)&&(j?(K(x),x=-1):j=!0,Oe(_e,he-ke))):(J.sortIndex=Pe,e(m,J),I||A||(I=!0,Se||(Se=!0,B()))),J},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(J){var se=b;return function(){var he=b;b=se;try{return J.apply(this,arguments)}finally{b=he}}}})(Hg)),Hg}var Tb;function ex(){return Tb||(Tb=1,Fg.exports=ZN()),Fg.exports}var qg={exports:{}},gn={};var Sb;function tx(){if(Sb)return gn;Sb=1;var n=oy();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,y){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:m,containerInfo:g,implementation:y}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,gn.createPortal=function(m,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,y)},gn.flushSync=function(m){var g=c.T,y=s.p;try{if(c.T=null,s.p=2,m)return m()}finally{c.T=g,s.p=y,s.d.f()}},gn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(m,g))},gn.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},gn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var y=g.as,E=d(y,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,A=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?s.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:b,fetchPriority:A}):y==="script"&&s.d.X(m,{crossOrigin:E,integrity:b,fetchPriority:A,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},gn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=d(g.as,g.crossOrigin);s.d.M(m,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(m)},gn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,E=d(y,g.crossOrigin);s.d.L(m,y,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},gn.preloadModule=function(m,g){if(typeof m=="string")if(g){var y=d(g.as,g.crossOrigin);s.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(m)},gn.requestFormReset=function(m){s.d.r(m)},gn.unstable_batchedUpdates=function(m,g){return m(g)},gn.useFormState=function(m,g,y){return c.H.useFormState(m,g,y)},gn.useFormStatus=function(){return c.H.useHostTransitionStatus()},gn.version="19.2.0",gn}var bb;function nx(){if(bb)return qg.exports;bb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),qg.exports=tx(),qg.exports}var wb;function ix(){if(wb)return $u;wb=1;var n=ex(),e=oy(),t=nx();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,o=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(o=r.return),i=r.return;while(i)}return r.tag===3?o:null}function c(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function m(i){if(l(i)!==i)throw Error(s(188))}function g(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var o=i,u=r;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return m(f),i;if(p===u)return m(f),r;p=p.sibling}throw Error(s(188))}if(o.return!==u.return)o=f,u=p;else{for(var T=!1,w=f.child;w;){if(w===o){T=!0,o=f,u=p;break}if(w===u){T=!0,u=f,o=p;break}w=w.sibling}if(!T){for(w=p.child;w;){if(w===o){T=!0,o=p,u=f;break}if(w===u){T=!0,u=p,o=f;break}w=w.sibling}if(!T)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?i:r}function y(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=y(i),r!==null)return r;i=i.sibling}return null}var E=Object.assign,b=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),ee=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),_e=Symbol.for("react.suspense"),Se=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function B(i){return i===null||typeof i!="object"?null:(i=k&&i[k]||i["@@iterator"],typeof i=="function"?i:null)}var O=Symbol.for("react.client.reference");function Ze(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===O?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case j:return"Fragment";case $:return"Profiler";case V:return"StrictMode";case _e:return"Suspense";case Se:return"SuspenseList";case N:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case I:return"Portal";case ee:return i.displayName||"Context";case K:return(i._context.displayName||"Context")+".Consumer";case ue:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case x:return r=i.displayName||null,r!==null?r:Ze(i.type)||"Memo";case R:r=i._payload,i=i._init;try{return Ze(i(r))}catch{}}return null}var Oe=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},ke=[],Pe=-1;function M(i){return{current:i}}function G(i){0>Pe||(i.current=ke[Pe],ke[Pe]=null,Pe--)}function X(i,r){Pe++,ke[Pe]=i.current,i.current=r}var le=M(null),ye=M(null),ve=M(null),De=M(null);function ut(i,r){switch(X(ve,r),X(ye,i),X(le,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?jS(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=jS(r),i=zS(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}G(le),X(le,i)}function Xe(){G(le),G(ye),G(ve)}function vi(i){i.memoizedState!==null&&X(De,i);var r=le.current,o=zS(r,i.type);r!==o&&(X(ye,i),X(le,o))}function Zn(i){ye.current===i&&(G(le),G(ye)),De.current===i&&(G(De),Yu._currentValue=he)}var zi,fo;function Bi(i){if(zi===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);zi=r&&r[1]||"",fo=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zi+i+fo}var Yl=!1;function da(i,r){if(!i||Yl)return"";Yl=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(W){var Y=W}Reflect.construct(i,[],ne)}else{try{ne.call()}catch(W){Y=W}i.call(ne.prototype)}}else{try{throw Error()}catch(W){Y=W}(ne=i())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(W){if(W&&Y&&typeof W.stack=="string")return[W.stack,Y.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),T=p[0],w=p[1];if(T&&w){var D=T.split(`
`),q=w.split(`
`);for(f=u=0;u<D.length&&!D[u].includes("DetermineComponentFrameRoot");)u++;for(;f<q.length&&!q[f].includes("DetermineComponentFrameRoot");)f++;if(u===D.length||f===q.length)for(u=D.length-1,f=q.length-1;1<=u&&0<=f&&D[u]!==q[f];)f--;for(;1<=u&&0<=f;u--,f--)if(D[u]!==q[f]){if(u!==1||f!==1)do if(u--,f--,0>f||D[u]!==q[f]){var Z=`
`+D[u].replace(" at new "," at ");return i.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",i.displayName)),Z}while(1<=u&&0<=f);break}}}finally{Yl=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?Bi(o):""}function Kl(i,r){switch(i.tag){case 26:case 27:case 5:return Bi(i.type);case 16:return Bi("Lazy");case 13:return i.child!==r&&r!==null?Bi("Suspense Fallback"):Bi("Suspense");case 19:return Bi("SuspenseList");case 0:case 15:return da(i.type,!1);case 11:return da(i.type.render,!1);case 1:return da(i.type,!0);case 31:return Bi("Activity");default:return""}}function Ql(i){try{var r="",o=null;do r+=Kl(i,o),o=i,i=i.return;while(i);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Dt=Object.prototype.hasOwnProperty,Gt=n.unstable_scheduleCallback,sr=n.unstable_cancelCallback,Bm=n.unstable_shouldYield,_h=n.unstable_requestPaint,Tn=n.unstable_now,ma=n.unstable_getCurrentPriorityLevel,Wl=n.unstable_ImmediatePriority,Xl=n.unstable_UserBlockingPriority,rr=n.unstable_NormalPriority,Fm=n.unstable_LowPriority,yh=n.unstable_IdlePriority,vh=n.log,Eh=n.unstable_setDisableYieldValue,Ei=null,rn=null;function ei(i){if(typeof vh=="function"&&Eh(i),rn&&typeof rn.setStrictMode=="function")try{rn.setStrictMode(Ei,i)}catch{}}var Rt=Math.clz32?Math.clz32:Sh,Th=Math.log,mo=Math.LN2;function Sh(i){return i>>>=0,i===0?32:31-(Th(i)/mo|0)|0}var Fi=256,pa=262144,kt=4194304;function Hi(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function qi(i,r,o){var u=i.pendingLanes;if(u===0)return 0;var f=0,p=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var w=u&134217727;return w!==0?(u=w&~p,u!==0?f=Hi(u):(T&=w,T!==0?f=Hi(T):o||(o=w&~i,o!==0&&(f=Hi(o))))):(w=u&~p,w!==0?f=Hi(w):T!==0?f=Hi(T):o||(o=u&~i,o!==0&&(f=Hi(o)))),f===0?0:r!==0&&r!==f&&(r&p)===0&&(p=f&-f,o=r&-r,p>=o||p===32&&(o&4194048)!==0)?r:f}function Ti(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function Hm(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bh(){var i=kt;return kt<<=1,(kt&62914560)===0&&(kt=4194304),i}function Gi(i){for(var r=[],o=0;31>o;o++)r.push(i);return r}function ga(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function qm(i,r,o,u,f,p){var T=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var w=i.entanglements,D=i.expirationTimes,q=i.hiddenUpdates;for(o=T&~o;0<o;){var Z=31-Rt(o),ne=1<<Z;w[Z]=0,D[Z]=-1;var Y=q[Z];if(Y!==null)for(q[Z]=null,Z=0;Z<Y.length;Z++){var W=Y[Z];W!==null&&(W.lane&=-536870913)}o&=~ne}u!==0&&_a(i,u,0),p!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=p&~(T&~r))}function _a(i,r,o){i.pendingLanes|=r,i.suspendedLanes&=~r;var u=31-Rt(r);i.entangledLanes|=r,i.entanglements[u]=i.entanglements[u]|1073741824|o&261930}function $l(i,r){var o=i.entangledLanes|=r;for(i=i.entanglements;o;){var u=31-Rt(o),f=1<<u;f&r|i[u]&r&&(i[u]|=r),o&=~f}}function Jl(i,r){var o=r&-r;return o=(o&42)!==0?1:ya(o),(o&(i.suspendedLanes|r))!==0?0:o}function ya(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ts(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function wh(){var i=se.p;return i!==0?i:(i=window.event,i===void 0?32:ub(i.type))}function Si(i,r){var o=se.p;try{return se.p=i,r()}finally{se.p=o}}var bi=Math.random().toString(36).slice(2),Pt="__reactFiber$"+bi,$t="__reactProps$"+bi,Yi="__reactContainer$"+bi,po="__reactEvents$"+bi,Gm="__reactListeners$"+bi,Ch="__reactHandles$"+bi,Ah="__reactResources$"+bi,Ki="__reactMarker$"+bi;function go(i){delete i[Pt],delete i[$t],delete i[po],delete i[Gm],delete i[Ch]}function Qi(i){var r=i[Pt];if(r)return r;for(var o=i.parentNode;o;){if(r=o[Yi]||o[Pt]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(i=KS(i);i!==null;){if(o=i[Pt])return o;i=KS(i)}return r}i=o,o=i.parentNode}return null}function ti(i){if(i=i[Pt]||i[Yi]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function jn(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function Wi(i){var r=i[Ah];return r||(r=i[Ah]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Mt(i){i[Ki]=!0}var Zl=new Set,eu={};function Xi(i,r){$i(i,r),$i(i+"Capture",r)}function $i(i,r){for(eu[i]=r,i=0;i<r.length;i++)Zl.add(r[i])}var tu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nu={},iu={};function Rh(i){return Dt.call(iu,i)?!0:Dt.call(nu,i)?!1:tu.test(i)?iu[i]=!0:(nu[i]=!0,!1)}function _o(i,r,o){if(Rh(r))if(o===null)i.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+o)}}function zn(i,r,o){if(o===null)i.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+o)}}function Lt(i,r,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(r,o,""+u)}}function Jt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ar(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function su(i,r,o){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,p=u.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return f.call(this)},set:function(T){o=""+T,p.call(this,T)}}),Object.defineProperty(i,r,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(T){o=""+T},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function tt(i){if(!i._valueTracker){var r=ar(i)?"checked":"value";i._valueTracker=su(i,r,""+i[r])}}function va(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return i&&(u=ar(i)?i.checked?"true":"false":i.value),i=u,i!==o?(r.setValue(i),!0):!1}function Ji(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ea=/[\n"\\]/g;function Nn(i){return i.replace(Ea,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function yo(i,r,o,u,f,p,T,w){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),r!=null?T==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+Jt(r)):i.value!==""+Jt(r)&&(i.value=""+Jt(r)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),r!=null?ru(i,T,Jt(r)):o!=null?ru(i,T,Jt(o)):u!=null&&i.removeAttribute("value"),f==null&&p!=null&&(i.defaultChecked=!!p),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.name=""+Jt(w):i.removeAttribute("name")}function Ih(i,r,o,u,f,p,T,w){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(i.type=p),r!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||r!=null)){tt(i);return}o=o!=null?""+Jt(o):"",r=r!=null?""+Jt(r):o,w||r===i.value||(i.value=r),i.defaultValue=r}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=w?i.checked:!!u,i.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T),tt(i)}function ru(i,r,o){r==="number"&&Ji(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function or(i,r,o,u){if(i=i.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<i.length;o++)f=r.hasOwnProperty("$"+i[o].value),i[o].selected!==f&&(i[o].selected=f),f&&u&&(i[o].defaultSelected=!0)}else{for(o=""+Jt(o),r=null,f=0;f<i.length;f++){if(i[f].value===o){i[f].selected=!0,u&&(i[f].defaultSelected=!0);return}r!==null||i[f].disabled||(r=i[f])}r!==null&&(r.selected=!0)}}function Nh(i,r,o){if(r!=null&&(r=""+Jt(r),r!==i.value&&(i.value=r),o==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=o!=null?""+Jt(o):""}function lr(i,r,o,u){if(r==null){if(u!=null){if(o!=null)throw Error(s(92));if(Oe(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),r=o}o=Jt(r),i.defaultValue=o,u=i.textContent,u===o&&u!==""&&u!==null&&(i.value=u),tt(i)}function xn(i,r){if(r){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=r;return}}i.textContent=r}var xh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function au(i,r,o){var u=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":u?i.setProperty(r,o):typeof o!="number"||o===0||xh.has(r)?r==="float"?i.cssFloat=o:i[r]=(""+o).trim():i[r]=o+"px"}function ou(i,r,o){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var f in r)u=r[f],r.hasOwnProperty(f)&&o[f]!==u&&au(i,f,u)}else for(var p in r)r.hasOwnProperty(p)&&au(i,p,r[p])}function vo(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ur=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Eo(i){return ur.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function wi(){}var lu=null;function ni(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var cr=null,Zi=null;function Ta(i){var r=ti(i);if(r&&(i=r.stateNode)){var o=i[$t]||null;e:switch(i=r.stateNode,r.type){case"input":if(yo(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Nn(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==i&&u.form===i.form){var f=u[$t]||null;if(!f)throw Error(s(90));yo(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)u=o[r],u.form===i.form&&va(u)}break e;case"textarea":Nh(i,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&or(i,!!o.multiple,r,!1)}}}var To=!1;function hr(i,r,o){if(To)return i(r,o);To=!0;try{var u=i(r);return u}finally{if(To=!1,(cr!==null||Zi!==null)&&(Cf(),cr&&(r=cr,i=Zi,Zi=cr=null,Ta(r),i)))for(r=0;r<i.length;r++)Ta(i[r])}}function Ci(i,r){var o=i.stateNode;if(o===null)return null;var u=o[$t]||null;if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(s(231,r,typeof o));return o}var ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sa=!1;if(ii)try{var st={};Object.defineProperty(st,"passive",{get:function(){Sa=!0}}),window.addEventListener("test",st,st),window.removeEventListener("test",st,st)}catch{Sa=!1}var es=null,uu=null,ba=null;function cu(){if(ba)return ba;var i,r=uu,o=r.length,u,f="value"in es?es.value:es.textContent,p=f.length;for(i=0;i<o&&r[i]===f[i];i++);var T=o-i;for(u=1;u<=T&&r[o-u]===f[p-u];u++);return ba=f.slice(i,1<u?1-u:void 0)}function wa(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Ss(){return!0}function Ai(){return!1}function an(i){function r(o,u,f,p,T){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=T,this.currentTarget=null;for(var w in i)i.hasOwnProperty(w)&&(o=i[w],this[w]=o?o(p):p[w]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Ss:Ai,this.isPropagationStopped=Ai,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ss)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ss)},persist:function(){},isPersistent:Ss}),r}var bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ts=an(bs),fr=E({},bs,{view:0,detail:0}),hu=an(fr),dr,So,ns,bo=E({},fr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ns&&(ns&&i.type==="mousemove"?(dr=i.screenX-ns.screenX,So=i.screenY-ns.screenY):So=dr=0,ns=i),dr)},movementY:function(i){return"movementY"in i?i.movementY:So}}),fu=an(bo),Ca=E({},bo,{dataTransfer:0}),Dh=an(Ca),kh=E({},fr,{relatedTarget:0}),Aa=an(kh),du=E({},bs,{animationName:0,elapsedTime:0,pseudoElement:0}),Ph=an(du),wo=E({},bs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Mh=an(wo),Lh=E({},bs,{data:0}),is=an(Lh),Vh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zh(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=jh[i])?!!r[i]:!1}function mr(){return zh}var Sn=E({},fr,{key:function(i){if(i.key){var r=Vh[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=wa(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Uh[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mr,charCode:function(i){return i.type==="keypress"?wa(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?wa(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Bh=an(Sn),Fh=E({},bo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ws=an(Fh),h=E({},fr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mr}),_=an(h),S=E({},bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=an(S),F=E({},bo,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=an(F),oe=E({},bs,{newState:0,oldState:0}),Ie=an(oe),It=[9,13,27,32],$e=ii&&"CompositionEvent"in window,_t=null;ii&&"documentMode"in document&&(_t=document.documentMode);var si=ii&&"TextEvent"in window&&!_t,ss=ii&&(!$e||_t&&8<_t&&11>=_t),Ri=" ",Ii=!1;function Ra(i,r){switch(i){case"keyup":return It.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Co(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ao=!1;function E1(i,r){switch(i){case"compositionend":return Co(r);case"keypress":return r.which!==32?null:(Ii=!0,Ri);case"textInput":return i=r.data,i===Ri&&Ii?null:i;default:return null}}function T1(i,r){if(Ao)return i==="compositionend"||!$e&&Ra(i,r)?(i=cu(),ba=uu=es=null,Ao=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return ss&&r.locale!=="ko"?null:r.data;default:return null}}var S1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xv(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!S1[i.type]:r==="textarea"}function $v(i,r,o,u){cr?Zi?Zi.push(u):Zi=[u]:cr=u,r=Df(r,"onChange"),0<r.length&&(o=new ts("onChange","change",null,o,u),i.push({event:o,listeners:r}))}var mu=null,pu=null;function b1(i){kS(i,0)}function Hh(i){var r=jn(i);if(va(r))return i}function Jv(i,r){if(i==="change")return r}var Zv=!1;if(ii){var Ym;if(ii){var Km="oninput"in document;if(!Km){var eE=document.createElement("div");eE.setAttribute("oninput","return;"),Km=typeof eE.oninput=="function"}Ym=Km}else Ym=!1;Zv=Ym&&(!document.documentMode||9<document.documentMode)}function tE(){mu&&(mu.detachEvent("onpropertychange",nE),pu=mu=null)}function nE(i){if(i.propertyName==="value"&&Hh(pu)){var r=[];$v(r,pu,i,ni(i)),hr(b1,r)}}function w1(i,r,o){i==="focusin"?(tE(),mu=r,pu=o,mu.attachEvent("onpropertychange",nE)):i==="focusout"&&tE()}function C1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Hh(pu)}function A1(i,r){if(i==="click")return Hh(r)}function R1(i,r){if(i==="input"||i==="change")return Hh(r)}function I1(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var Bn=typeof Object.is=="function"?Object.is:I1;function gu(i,r){if(Bn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var o=Object.keys(i),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Dt.call(r,f)||!Bn(i[f],r[f]))return!1}return!0}function iE(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function sE(i,r){var o=iE(i);i=0;for(var u;o;){if(o.nodeType===3){if(u=i+o.textContent.length,i<=r&&u>=r)return{node:o,offset:r-i};i=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=iE(o)}}function rE(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?rE(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function aE(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Ji(i.document);r instanceof i.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)i=r.contentWindow;else break;r=Ji(i.document)}return r}function Qm(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var N1=ii&&"documentMode"in document&&11>=document.documentMode,Ro=null,Wm=null,_u=null,Xm=!1;function oE(i,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Xm||Ro==null||Ro!==Ji(u)||(u=Ro,"selectionStart"in u&&Qm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),_u&&gu(_u,u)||(_u=u,u=Df(Wm,"onSelect"),0<u.length&&(r=new ts("onSelect","select",null,r,o),i.push({event:r,listeners:u}),r.target=Ro)))}function Ia(i,r){var o={};return o[i.toLowerCase()]=r.toLowerCase(),o["Webkit"+i]="webkit"+r,o["Moz"+i]="moz"+r,o}var Io={animationend:Ia("Animation","AnimationEnd"),animationiteration:Ia("Animation","AnimationIteration"),animationstart:Ia("Animation","AnimationStart"),transitionrun:Ia("Transition","TransitionRun"),transitionstart:Ia("Transition","TransitionStart"),transitioncancel:Ia("Transition","TransitionCancel"),transitionend:Ia("Transition","TransitionEnd")},$m={},lE={};ii&&(lE=document.createElement("div").style,"AnimationEvent"in window||(delete Io.animationend.animation,delete Io.animationiteration.animation,delete Io.animationstart.animation),"TransitionEvent"in window||delete Io.transitionend.transition);function Na(i){if($m[i])return $m[i];if(!Io[i])return i;var r=Io[i],o;for(o in r)if(r.hasOwnProperty(o)&&o in lE)return $m[i]=r[o];return i}var uE=Na("animationend"),cE=Na("animationiteration"),hE=Na("animationstart"),x1=Na("transitionrun"),O1=Na("transitionstart"),D1=Na("transitioncancel"),fE=Na("transitionend"),dE=new Map,Jm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jm.push("scrollEnd");function Ni(i,r){dE.set(i,r),Xi(r,[i])}var qh=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},ri=[],No=0,Zm=0;function Gh(){for(var i=No,r=Zm=No=0;r<i;){var o=ri[r];ri[r++]=null;var u=ri[r];ri[r++]=null;var f=ri[r];ri[r++]=null;var p=ri[r];if(ri[r++]=null,u!==null&&f!==null){var T=u.pending;T===null?f.next=f:(f.next=T.next,T.next=f),u.pending=f}p!==0&&mE(o,f,p)}}function Yh(i,r,o,u){ri[No++]=i,ri[No++]=r,ri[No++]=o,ri[No++]=u,Zm|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function ep(i,r,o,u){return Yh(i,r,o,u),Kh(i)}function xa(i,r){return Yh(i,null,null,r),Kh(i)}function mE(i,r,o){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o);for(var f=!1,p=i.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(i=p.stateNode,i===null||i._visibility&1||(f=!0)),i=p,p=p.return;return i.tag===3?(p=i.stateNode,f&&r!==null&&(f=31-Rt(o),i=p.hiddenUpdates,u=i[f],u===null?i[f]=[r]:u.push(r),r.lane=o|536870912),p):null}function Kh(i){if(50<ju)throw ju=0,ug=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var xo={};function k1(i,r,o,u){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(i,r,o,u){return new k1(i,r,o,u)}function tp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Cs(i,r){var o=i.alternate;return o===null?(o=Fn(i.tag,r,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=r,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,r=i.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function pE(i,r){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,r=o.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Qh(i,r,o,u,f,p){var T=0;if(u=i,typeof i=="function")tp(i)&&(T=1);else if(typeof i=="string")T=UN(i,o,le.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case N:return i=Fn(31,o,r,f),i.elementType=N,i.lanes=p,i;case j:return Oa(o.children,f,p,r);case V:T=8,f|=24;break;case $:return i=Fn(12,o,r,f|2),i.elementType=$,i.lanes=p,i;case _e:return i=Fn(13,o,r,f),i.elementType=_e,i.lanes=p,i;case Se:return i=Fn(19,o,r,f),i.elementType=Se,i.lanes=p,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case ee:T=10;break e;case K:T=9;break e;case ue:T=11;break e;case x:T=14;break e;case R:T=16,u=null;break e}T=29,o=Error(s(130,i===null?"null":typeof i,"")),u=null}return r=Fn(T,o,r,f),r.elementType=i,r.type=u,r.lanes=p,r}function Oa(i,r,o,u){return i=Fn(7,i,u,r),i.lanes=o,i}function np(i,r,o){return i=Fn(6,i,null,r),i.lanes=o,i}function gE(i){var r=Fn(18,null,null,0);return r.stateNode=i,r}function ip(i,r,o){return r=Fn(4,i.children!==null?i.children:[],i.key,r),r.lanes=o,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var _E=new WeakMap;function ai(i,r){if(typeof i=="object"&&i!==null){var o=_E.get(i);return o!==void 0?o:(r={value:i,source:r,stack:Ql(r)},_E.set(i,r),r)}return{value:i,source:r,stack:Ql(r)}}var Oo=[],Do=0,Wh=null,yu=0,oi=[],li=0,pr=null,rs=1,as="";function As(i,r){Oo[Do++]=yu,Oo[Do++]=Wh,Wh=i,yu=r}function yE(i,r,o){oi[li++]=rs,oi[li++]=as,oi[li++]=pr,pr=i;var u=rs;i=as;var f=32-Rt(u)-1;u&=~(1<<f),o+=1;var p=32-Rt(r)+f;if(30<p){var T=f-f%5;p=(u&(1<<T)-1).toString(32),u>>=T,f-=T,rs=1<<32-Rt(r)+f|o<<f|u,as=p+i}else rs=1<<p|o<<f|u,as=i}function sp(i){i.return!==null&&(As(i,1),yE(i,1,0))}function rp(i){for(;i===Wh;)Wh=Oo[--Do],Oo[Do]=null,yu=Oo[--Do],Oo[Do]=null;for(;i===pr;)pr=oi[--li],oi[li]=null,as=oi[--li],oi[li]=null,rs=oi[--li],oi[li]=null}function vE(i,r){oi[li++]=rs,oi[li++]=as,oi[li++]=pr,rs=r.id,as=r.overflow,pr=i}var on=null,dt=null,Ge=!1,gr=null,ui=!1,ap=Error(s(519));function _r(i){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw vu(ai(r,i)),ap}function EE(i){var r=i.stateNode,o=i.type,u=i.memoizedProps;switch(r[Pt]=i,r[$t]=u,o){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(o=0;o<Bu.length;o++)Ue(Bu[o],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":Ue("invalid",r),Ih(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ue("invalid",r);break;case"textarea":Ue("invalid",r),lr(r,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||u.suppressHydrationWarning===!0||VS(r.textContent,o)?(u.popover!=null&&(Ue("beforetoggle",r),Ue("toggle",r)),u.onScroll!=null&&Ue("scroll",r),u.onScrollEnd!=null&&Ue("scrollend",r),u.onClick!=null&&(r.onclick=wi),r=!0):r=!1,r||_r(i,!0)}function TE(i){for(on=i.return;on;)switch(on.tag){case 5:case 31:case 13:ui=!1;return;case 27:case 3:ui=!0;return;default:on=on.return}}function ko(i){if(i!==on)return!1;if(!Ge)return TE(i),Ge=!0,!1;var r=i.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||wg(i.type,i.memoizedProps)),o=!o),o&&dt&&_r(i),TE(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));dt=YS(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));dt=YS(i)}else r===27?(r=dt,Or(i.type)?(i=Ng,Ng=null,dt=i):dt=r):dt=on?hi(i.stateNode.nextSibling):null;return!0}function Da(){dt=on=null,Ge=!1}function op(){var i=gr;return i!==null&&(Pn===null?Pn=i:Pn.push.apply(Pn,i),gr=null),i}function vu(i){gr===null?gr=[i]:gr.push(i)}var lp=M(null),ka=null,Rs=null;function yr(i,r,o){X(lp,r._currentValue),r._currentValue=o}function Is(i){i._currentValue=lp.current,G(lp)}function up(i,r,o){for(;i!==null;){var u=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),i===o)break;i=i.return}}function cp(i,r,o,u){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var p=f.dependencies;if(p!==null){var T=f.child;p=p.firstContext;e:for(;p!==null;){var w=p;p=f;for(var D=0;D<r.length;D++)if(w.context===r[D]){p.lanes|=o,w=p.alternate,w!==null&&(w.lanes|=o),up(p.return,o,i),u||(T=null);break e}p=w.next}}else if(f.tag===18){if(T=f.return,T===null)throw Error(s(341));T.lanes|=o,p=T.alternate,p!==null&&(p.lanes|=o),up(T,o,i),T=null}else T=f.child;if(T!==null)T.return=f;else for(T=f;T!==null;){if(T===i){T=null;break}if(f=T.sibling,f!==null){f.return=T.return,T=f;break}T=T.return}f=T}}function Po(i,r,o,u){i=null;for(var f=r,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var T=f.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var w=f.type;Bn(f.pendingProps.value,T.value)||(i!==null?i.push(w):i=[w])}}else if(f===De.current){if(T=f.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push(Yu):i=[Yu])}f=f.return}i!==null&&cp(r,i,o,u),r.flags|=262144}function Xh(i){for(i=i.firstContext;i!==null;){if(!Bn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Pa(i){ka=i,Rs=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function ln(i){return SE(ka,i)}function $h(i,r){return ka===null&&Pa(i),SE(i,r)}function SE(i,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},Rs===null){if(i===null)throw Error(s(308));Rs=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else Rs=Rs.next=r;return o}var P1=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(o,u){i.push(u)}};this.abort=function(){r.aborted=!0,i.forEach(function(o){return o()})}},M1=n.unstable_scheduleCallback,L1=n.unstable_NormalPriority,Vt={$$typeof:ee,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hp(){return{controller:new P1,data:new Map,refCount:0}}function Eu(i){i.refCount--,i.refCount===0&&M1(L1,function(){i.controller.abort()})}var Tu=null,fp=0,Mo=0,Lo=null;function V1(i,r){if(Tu===null){var o=Tu=[];fp=0,Mo=pg(),Lo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return fp++,r.then(bE,bE),r}function bE(){if(--fp===0&&Tu!==null){Lo!==null&&(Lo.status="fulfilled");var i=Tu;Tu=null,Mo=0,Lo=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function U1(i,r){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return i.then(function(){u.status="fulfilled",u.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var wE=J.S;J.S=function(i,r){oS=Tn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&V1(i,r),wE!==null&&wE(i,r)};var Ma=M(null);function dp(){var i=Ma.current;return i!==null?i:ct.pooledCache}function Jh(i,r){r===null?X(Ma,Ma.current):X(Ma,r.pool)}function CE(){var i=dp();return i===null?null:{parent:Vt._currentValue,pool:i}}var Vo=Error(s(460)),mp=Error(s(474)),Zh=Error(s(542)),ef={then:function(){}};function AE(i){return i=i.status,i==="fulfilled"||i==="rejected"}function RE(i,r,o){switch(o=i[o],o===void 0?i.push(r):o!==r&&(r.then(wi,wi),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,NE(i),i;default:if(typeof r.status=="string")r.then(wi,wi);else{if(i=ct,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(u){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=u}},function(u){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,NE(i),i}throw Va=r,Vo}}function La(i){try{var r=i._init;return r(i._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Va=o,Vo):o}}var Va=null;function IE(){if(Va===null)throw Error(s(459));var i=Va;return Va=null,i}function NE(i){if(i===Vo||i===Zh)throw Error(s(483))}var Uo=null,Su=0;function tf(i){var r=Su;return Su+=1,Uo===null&&(Uo=[]),RE(Uo,i,r)}function bu(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function nf(i,r){throw r.$$typeof===b?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function xE(i){function r(z,L){if(i){var H=z.deletions;H===null?(z.deletions=[L],z.flags|=16):H.push(L)}}function o(z,L){if(!i)return null;for(;L!==null;)r(z,L),L=L.sibling;return null}function u(z){for(var L=new Map;z!==null;)z.key!==null?L.set(z.key,z):L.set(z.index,z),z=z.sibling;return L}function f(z,L){return z=Cs(z,L),z.index=0,z.sibling=null,z}function p(z,L,H){return z.index=H,i?(H=z.alternate,H!==null?(H=H.index,H<L?(z.flags|=67108866,L):H):(z.flags|=67108866,L)):(z.flags|=1048576,L)}function T(z){return i&&z.alternate===null&&(z.flags|=67108866),z}function w(z,L,H,te){return L===null||L.tag!==6?(L=np(H,z.mode,te),L.return=z,L):(L=f(L,H),L.return=z,L)}function D(z,L,H,te){var ge=H.type;return ge===j?Z(z,L,H.props.children,te,H.key):L!==null&&(L.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===R&&La(ge)===L.type)?(L=f(L,H.props),bu(L,H),L.return=z,L):(L=Qh(H.type,H.key,H.props,null,z.mode,te),bu(L,H),L.return=z,L)}function q(z,L,H,te){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=ip(H,z.mode,te),L.return=z,L):(L=f(L,H.children||[]),L.return=z,L)}function Z(z,L,H,te,ge){return L===null||L.tag!==7?(L=Oa(H,z.mode,te,ge),L.return=z,L):(L=f(L,H),L.return=z,L)}function ne(z,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=np(""+L,z.mode,H),L.return=z,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case A:return H=Qh(L.type,L.key,L.props,null,z.mode,H),bu(H,L),H.return=z,H;case I:return L=ip(L,z.mode,H),L.return=z,L;case R:return L=La(L),ne(z,L,H)}if(Oe(L)||B(L))return L=Oa(L,z.mode,H,null),L.return=z,L;if(typeof L.then=="function")return ne(z,tf(L),H);if(L.$$typeof===ee)return ne(z,$h(z,L),H);nf(z,L)}return null}function Y(z,L,H,te){var ge=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ge!==null?null:w(z,L,""+H,te);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case A:return H.key===ge?D(z,L,H,te):null;case I:return H.key===ge?q(z,L,H,te):null;case R:return H=La(H),Y(z,L,H,te)}if(Oe(H)||B(H))return ge!==null?null:Z(z,L,H,te,null);if(typeof H.then=="function")return Y(z,L,tf(H),te);if(H.$$typeof===ee)return Y(z,L,$h(z,H),te);nf(z,H)}return null}function W(z,L,H,te,ge){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return z=z.get(H)||null,w(L,z,""+te,ge);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case A:return z=z.get(te.key===null?H:te.key)||null,D(L,z,te,ge);case I:return z=z.get(te.key===null?H:te.key)||null,q(L,z,te,ge);case R:return te=La(te),W(z,L,H,te,ge)}if(Oe(te)||B(te))return z=z.get(H)||null,Z(L,z,te,ge,null);if(typeof te.then=="function")return W(z,L,H,tf(te),ge);if(te.$$typeof===ee)return W(z,L,H,$h(L,te),ge);nf(L,te)}return null}function de(z,L,H,te){for(var ge=null,Ke=null,me=L,xe=L=0,Fe=null;me!==null&&xe<H.length;xe++){me.index>xe?(Fe=me,me=null):Fe=me.sibling;var Qe=Y(z,me,H[xe],te);if(Qe===null){me===null&&(me=Fe);break}i&&me&&Qe.alternate===null&&r(z,me),L=p(Qe,L,xe),Ke===null?ge=Qe:Ke.sibling=Qe,Ke=Qe,me=Fe}if(xe===H.length)return o(z,me),Ge&&As(z,xe),ge;if(me===null){for(;xe<H.length;xe++)me=ne(z,H[xe],te),me!==null&&(L=p(me,L,xe),Ke===null?ge=me:Ke.sibling=me,Ke=me);return Ge&&As(z,xe),ge}for(me=u(me);xe<H.length;xe++)Fe=W(me,z,xe,H[xe],te),Fe!==null&&(i&&Fe.alternate!==null&&me.delete(Fe.key===null?xe:Fe.key),L=p(Fe,L,xe),Ke===null?ge=Fe:Ke.sibling=Fe,Ke=Fe);return i&&me.forEach(function(Lr){return r(z,Lr)}),Ge&&As(z,xe),ge}function Te(z,L,H,te){if(H==null)throw Error(s(151));for(var ge=null,Ke=null,me=L,xe=L=0,Fe=null,Qe=H.next();me!==null&&!Qe.done;xe++,Qe=H.next()){me.index>xe?(Fe=me,me=null):Fe=me.sibling;var Lr=Y(z,me,Qe.value,te);if(Lr===null){me===null&&(me=Fe);break}i&&me&&Lr.alternate===null&&r(z,me),L=p(Lr,L,xe),Ke===null?ge=Lr:Ke.sibling=Lr,Ke=Lr,me=Fe}if(Qe.done)return o(z,me),Ge&&As(z,xe),ge;if(me===null){for(;!Qe.done;xe++,Qe=H.next())Qe=ne(z,Qe.value,te),Qe!==null&&(L=p(Qe,L,xe),Ke===null?ge=Qe:Ke.sibling=Qe,Ke=Qe);return Ge&&As(z,xe),ge}for(me=u(me);!Qe.done;xe++,Qe=H.next())Qe=W(me,z,xe,Qe.value,te),Qe!==null&&(i&&Qe.alternate!==null&&me.delete(Qe.key===null?xe:Qe.key),L=p(Qe,L,xe),Ke===null?ge=Qe:Ke.sibling=Qe,Ke=Qe);return i&&me.forEach(function(WN){return r(z,WN)}),Ge&&As(z,xe),ge}function ot(z,L,H,te){if(typeof H=="object"&&H!==null&&H.type===j&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case A:e:{for(var ge=H.key;L!==null;){if(L.key===ge){if(ge=H.type,ge===j){if(L.tag===7){o(z,L.sibling),te=f(L,H.props.children),te.return=z,z=te;break e}}else if(L.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===R&&La(ge)===L.type){o(z,L.sibling),te=f(L,H.props),bu(te,H),te.return=z,z=te;break e}o(z,L);break}else r(z,L);L=L.sibling}H.type===j?(te=Oa(H.props.children,z.mode,te,H.key),te.return=z,z=te):(te=Qh(H.type,H.key,H.props,null,z.mode,te),bu(te,H),te.return=z,z=te)}return T(z);case I:e:{for(ge=H.key;L!==null;){if(L.key===ge)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){o(z,L.sibling),te=f(L,H.children||[]),te.return=z,z=te;break e}else{o(z,L);break}else r(z,L);L=L.sibling}te=ip(H,z.mode,te),te.return=z,z=te}return T(z);case R:return H=La(H),ot(z,L,H,te)}if(Oe(H))return de(z,L,H,te);if(B(H)){if(ge=B(H),typeof ge!="function")throw Error(s(150));return H=ge.call(H),Te(z,L,H,te)}if(typeof H.then=="function")return ot(z,L,tf(H),te);if(H.$$typeof===ee)return ot(z,L,$h(z,H),te);nf(z,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(o(z,L.sibling),te=f(L,H),te.return=z,z=te):(o(z,L),te=np(H,z.mode,te),te.return=z,z=te),T(z)):o(z,L)}return function(z,L,H,te){try{Su=0;var ge=ot(z,L,H,te);return Uo=null,ge}catch(me){if(me===Vo||me===Zh)throw me;var Ke=Fn(29,me,null,z.mode);return Ke.lanes=te,Ke.return=z,Ke}finally{}}}var Ua=xE(!0),OE=xE(!1),vr=!1;function pp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gp(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Er(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Tr(i,r,o){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Je&2)!==0){var f=u.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),u.pending=r,r=Kh(i),mE(i,null,o),r}return Yh(i,u,r,o),Kh(i)}function wu(i,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var u=r.lanes;u&=i.pendingLanes,o|=u,r.lanes=o,$l(i,o)}}function _p(i,r){var o=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var T={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?f=p=T:p=p.next=T,o=o.next}while(o!==null);p===null?f=p=r:p=p.next=r}else f=p=r;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=r:i.next=r,o.lastBaseUpdate=r}var yp=!1;function Cu(){if(yp){var i=Lo;if(i!==null)throw i}}function Au(i,r,o,u){yp=!1;var f=i.updateQueue;vr=!1;var p=f.firstBaseUpdate,T=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var D=w,q=D.next;D.next=null,T===null?p=q:T.next=q,T=D;var Z=i.alternate;Z!==null&&(Z=Z.updateQueue,w=Z.lastBaseUpdate,w!==T&&(w===null?Z.firstBaseUpdate=q:w.next=q,Z.lastBaseUpdate=D))}if(p!==null){var ne=f.baseState;T=0,Z=q=D=null,w=p;do{var Y=w.lane&-536870913,W=Y!==w.lane;if(W?(Be&Y)===Y:(u&Y)===Y){Y!==0&&Y===Mo&&(yp=!0),Z!==null&&(Z=Z.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var de=i,Te=w;Y=r;var ot=o;switch(Te.tag){case 1:if(de=Te.payload,typeof de=="function"){ne=de.call(ot,ne,Y);break e}ne=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=Te.payload,Y=typeof de=="function"?de.call(ot,ne,Y):de,Y==null)break e;ne=E({},ne,Y);break e;case 2:vr=!0}}Y=w.callback,Y!==null&&(i.flags|=64,W&&(i.flags|=8192),W=f.callbacks,W===null?f.callbacks=[Y]:W.push(Y))}else W={lane:Y,tag:w.tag,payload:w.payload,callback:w.callback,next:null},Z===null?(q=Z=W,D=ne):Z=Z.next=W,T|=Y;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;W=w,w=W.next,W.next=null,f.lastBaseUpdate=W,f.shared.pending=null}}while(!0);Z===null&&(D=ne),f.baseState=D,f.firstBaseUpdate=q,f.lastBaseUpdate=Z,p===null&&(f.shared.lanes=0),Ar|=T,i.lanes=T,i.memoizedState=ne}}function DE(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function kE(i,r){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)DE(o[i],r)}var jo=M(null),sf=M(0);function PE(i,r){i=Vs,X(sf,i),X(jo,r),Vs=i|r.baseLanes}function vp(){X(sf,Vs),X(jo,jo.current)}function Ep(){Vs=sf.current,G(jo),G(sf)}var Hn=M(null),ci=null;function Sr(i){var r=i.alternate;X(Nt,Nt.current&1),X(Hn,i),ci===null&&(r===null||jo.current!==null||r.memoizedState!==null)&&(ci=i)}function Tp(i){X(Nt,Nt.current),X(Hn,i),ci===null&&(ci=i)}function ME(i){i.tag===22?(X(Nt,Nt.current),X(Hn,i),ci===null&&(ci=i)):br()}function br(){X(Nt,Nt.current),X(Hn,Hn.current)}function qn(i){G(Hn),ci===i&&(ci=null),G(Nt)}var Nt=M(0);function rf(i){for(var r=i;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Rg(o)||Ig(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ns=0,Ne=null,rt=null,Ut=null,af=!1,zo=!1,ja=!1,of=0,Ru=0,Bo=null,j1=0;function St(){throw Error(s(321))}function Sp(i,r){if(r===null)return!1;for(var o=0;o<r.length&&o<i.length;o++)if(!Bn(i[o],r[o]))return!1;return!0}function bp(i,r,o,u,f,p){return Ns=p,Ne=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,J.H=i===null||i.memoizedState===null?yT:Up,ja=!1,p=o(u,f),ja=!1,zo&&(p=VE(r,o,u,f)),LE(i),p}function LE(i){J.H=xu;var r=rt!==null&&rt.next!==null;if(Ns=0,Ut=rt=Ne=null,af=!1,Ru=0,Bo=null,r)throw Error(s(300));i===null||jt||(i=i.dependencies,i!==null&&Xh(i)&&(jt=!0))}function VE(i,r,o,u){Ne=i;var f=0;do{if(zo&&(Bo=null),Ru=0,zo=!1,25<=f)throw Error(s(301));if(f+=1,Ut=rt=null,i.updateQueue!=null){var p=i.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}J.H=vT,p=r(o,u)}while(zo);return p}function z1(){var i=J.H,r=i.useState()[0];return r=typeof r.then=="function"?Iu(r):r,i=i.useState()[0],(rt!==null?rt.memoizedState:null)!==i&&(Ne.flags|=1024),r}function wp(){var i=of!==0;return of=0,i}function Cp(i,r,o){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~o}function Ap(i){if(af){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}af=!1}Ns=0,Ut=rt=Ne=null,zo=!1,Ru=of=0,Bo=null}function bn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?Ne.memoizedState=Ut=i:Ut=Ut.next=i,Ut}function xt(){if(rt===null){var i=Ne.alternate;i=i!==null?i.memoizedState:null}else i=rt.next;var r=Ut===null?Ne.memoizedState:Ut.next;if(r!==null)Ut=r,rt=i;else{if(i===null)throw Ne.alternate===null?Error(s(467)):Error(s(310));rt=i,i={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},Ut===null?Ne.memoizedState=Ut=i:Ut=Ut.next=i}return Ut}function lf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Iu(i){var r=Ru;return Ru+=1,Bo===null&&(Bo=[]),i=RE(Bo,i,r),r=Ne,(Ut===null?r.memoizedState:Ut.next)===null&&(r=r.alternate,J.H=r===null||r.memoizedState===null?yT:Up),i}function uf(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Iu(i);if(i.$$typeof===ee)return ln(i)}throw Error(s(438,String(i)))}function Rp(i){var r=null,o=Ne.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var u=Ne.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=lf(),Ne.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(i),u=0;u<i;u++)o[u]=U;return r.index++,o}function xs(i,r){return typeof r=="function"?r(i):r}function cf(i){var r=xt();return Ip(r,rt,i)}function Ip(i,r,o){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var f=i.baseQueue,p=u.pending;if(p!==null){if(f!==null){var T=f.next;f.next=p.next,p.next=T}r.baseQueue=f=p,u.pending=null}if(p=i.baseState,f===null)i.memoizedState=p;else{r=f.next;var w=T=null,D=null,q=r,Z=!1;do{var ne=q.lane&-536870913;if(ne!==q.lane?(Be&ne)===ne:(Ns&ne)===ne){var Y=q.revertLane;if(Y===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),ne===Mo&&(Z=!0);else if((Ns&Y)===Y){q=q.next,Y===Mo&&(Z=!0);continue}else ne={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(w=D=ne,T=p):D=D.next=ne,Ne.lanes|=Y,Ar|=Y;ne=q.action,ja&&o(p,ne),p=q.hasEagerState?q.eagerState:o(p,ne)}else Y={lane:ne,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(w=D=Y,T=p):D=D.next=Y,Ne.lanes|=ne,Ar|=ne;q=q.next}while(q!==null&&q!==r);if(D===null?T=p:D.next=w,!Bn(p,i.memoizedState)&&(jt=!0,Z&&(o=Lo,o!==null)))throw o;i.memoizedState=p,i.baseState=T,i.baseQueue=D,u.lastRenderedState=p}return f===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function Np(i){var r=xt(),o=r.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=i;var u=o.dispatch,f=o.pending,p=r.memoizedState;if(f!==null){o.pending=null;var T=f=f.next;do p=i(p,T.action),T=T.next;while(T!==f);Bn(p,r.memoizedState)||(jt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),o.lastRenderedState=p}return[p,u]}function UE(i,r,o){var u=Ne,f=xt(),p=Ge;if(p){if(o===void 0)throw Error(s(407));o=o()}else o=r();var T=!Bn((rt||f).memoizedState,o);if(T&&(f.memoizedState=o,jt=!0),f=f.queue,Dp(BE.bind(null,u,f,i),[i]),f.getSnapshot!==r||T||Ut!==null&&Ut.memoizedState.tag&1){if(u.flags|=2048,Fo(9,{destroy:void 0},zE.bind(null,u,f,o,r),null),ct===null)throw Error(s(349));p||(Ns&127)!==0||jE(u,r,o)}return o}function jE(i,r,o){i.flags|=16384,i={getSnapshot:r,value:o},r=Ne.updateQueue,r===null?(r=lf(),Ne.updateQueue=r,r.stores=[i]):(o=r.stores,o===null?r.stores=[i]:o.push(i))}function zE(i,r,o,u){r.value=o,r.getSnapshot=u,FE(r)&&HE(i)}function BE(i,r,o){return o(function(){FE(r)&&HE(i)})}function FE(i){var r=i.getSnapshot;i=i.value;try{var o=r();return!Bn(i,o)}catch{return!0}}function HE(i){var r=xa(i,2);r!==null&&Mn(r,i,2)}function xp(i){var r=bn();if(typeof i=="function"){var o=i;if(i=o(),ja){ei(!0);try{o()}finally{ei(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xs,lastRenderedState:i},r}function qE(i,r,o,u){return i.baseState=o,Ip(i,rt,typeof u=="function"?u:xs)}function B1(i,r,o,u,f){if(df(i))throw Error(s(485));if(i=r.action,i!==null){var p={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){p.listeners.push(T)}};J.T!==null?o(!0):p.isTransition=!1,u(p),o=r.pending,o===null?(p.next=r.pending=p,GE(r,p)):(p.next=o.next,r.pending=o.next=p)}}function GE(i,r){var o=r.action,u=r.payload,f=i.state;if(r.isTransition){var p=J.T,T={};J.T=T;try{var w=o(f,u),D=J.S;D!==null&&D(T,w),YE(i,r,w)}catch(q){Op(i,r,q)}finally{p!==null&&T.types!==null&&(p.types=T.types),J.T=p}}else try{p=o(f,u),YE(i,r,p)}catch(q){Op(i,r,q)}}function YE(i,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){KE(i,r,u)},function(u){return Op(i,r,u)}):KE(i,r,o)}function KE(i,r,o){r.status="fulfilled",r.value=o,QE(r),i.state=o,r=i.pending,r!==null&&(o=r.next,o===r?i.pending=null:(o=o.next,r.next=o,GE(i,o)))}function Op(i,r,o){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=o,QE(r),r=r.next;while(r!==u)}i.action=null}function QE(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function WE(i,r){return r}function XE(i,r){if(Ge){var o=ct.formState;if(o!==null){e:{var u=Ne;if(Ge){if(dt){t:{for(var f=dt,p=ui;f.nodeType!==8;){if(!p){f=null;break t}if(f=hi(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){dt=hi(f.nextSibling),u=f.data==="F!";break e}}_r(u)}u=!1}u&&(r=o[0])}}return o=bn(),o.memoizedState=o.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:WE,lastRenderedState:r},o.queue=u,o=pT.bind(null,Ne,u),u.dispatch=o,u=xp(!1),p=Vp.bind(null,Ne,!1,u.queue),u=bn(),f={state:r,dispatch:null,action:i,pending:null},u.queue=f,o=B1.bind(null,Ne,f,p,o),f.dispatch=o,u.memoizedState=i,[r,o,!1]}function $E(i){var r=xt();return JE(r,rt,i)}function JE(i,r,o){if(r=Ip(i,r,WE)[0],i=cf(xs)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=Iu(r)}catch(T){throw T===Vo?Zh:T}else u=r;r=xt();var f=r.queue,p=f.dispatch;return o!==r.memoizedState&&(Ne.flags|=2048,Fo(9,{destroy:void 0},F1.bind(null,f,o),null)),[u,p,i]}function F1(i,r){i.action=r}function ZE(i){var r=xt(),o=rt;if(o!==null)return JE(r,o,i);xt(),r=r.memoizedState,o=xt();var u=o.queue.dispatch;return o.memoizedState=i,[r,u,!1]}function Fo(i,r,o,u){return i={tag:i,create:o,deps:u,inst:r,next:null},r=Ne.updateQueue,r===null&&(r=lf(),Ne.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=i.next=i:(u=o.next,o.next=i,i.next=u,r.lastEffect=i),i}function eT(){return xt().memoizedState}function hf(i,r,o,u){var f=bn();Ne.flags|=i,f.memoizedState=Fo(1|r,{destroy:void 0},o,u===void 0?null:u)}function ff(i,r,o,u){var f=xt();u=u===void 0?null:u;var p=f.memoizedState.inst;rt!==null&&u!==null&&Sp(u,rt.memoizedState.deps)?f.memoizedState=Fo(r,p,o,u):(Ne.flags|=i,f.memoizedState=Fo(1|r,p,o,u))}function tT(i,r){hf(8390656,8,i,r)}function Dp(i,r){ff(2048,8,i,r)}function H1(i){Ne.flags|=4;var r=Ne.updateQueue;if(r===null)r=lf(),Ne.updateQueue=r,r.events=[i];else{var o=r.events;o===null?r.events=[i]:o.push(i)}}function nT(i){var r=xt().memoizedState;return H1({ref:r,nextImpl:i}),function(){if((Je&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function iT(i,r){return ff(4,2,i,r)}function sT(i,r){return ff(4,4,i,r)}function rT(i,r){if(typeof r=="function"){i=i();var o=r(i);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function aT(i,r,o){o=o!=null?o.concat([i]):null,ff(4,4,rT.bind(null,r,i),o)}function kp(){}function oT(i,r){var o=xt();r=r===void 0?null:r;var u=o.memoizedState;return r!==null&&Sp(r,u[1])?u[0]:(o.memoizedState=[i,r],i)}function lT(i,r){var o=xt();r=r===void 0?null:r;var u=o.memoizedState;if(r!==null&&Sp(r,u[1]))return u[0];if(u=i(),ja){ei(!0);try{i()}finally{ei(!1)}}return o.memoizedState=[u,r],u}function Pp(i,r,o){return o===void 0||(Ns&1073741824)!==0&&(Be&261930)===0?i.memoizedState=r:(i.memoizedState=o,i=uS(),Ne.lanes|=i,Ar|=i,o)}function uT(i,r,o,u){return Bn(o,r)?o:jo.current!==null?(i=Pp(i,o,u),Bn(i,r)||(jt=!0),i):(Ns&42)===0||(Ns&1073741824)!==0&&(Be&261930)===0?(jt=!0,i.memoizedState=o):(i=uS(),Ne.lanes|=i,Ar|=i,r)}function cT(i,r,o,u,f){var p=se.p;se.p=p!==0&&8>p?p:8;var T=J.T,w={};J.T=w,Vp(i,!1,r,o);try{var D=f(),q=J.S;if(q!==null&&q(w,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var Z=U1(D,u);Nu(i,r,Z,Kn(i))}else Nu(i,r,u,Kn(i))}catch(ne){Nu(i,r,{then:function(){},status:"rejected",reason:ne},Kn())}finally{se.p=p,T!==null&&w.types!==null&&(T.types=w.types),J.T=T}}function q1(){}function Mp(i,r,o,u){if(i.tag!==5)throw Error(s(476));var f=hT(i).queue;cT(i,f,r,he,o===null?q1:function(){return fT(i),o(u)})}function hT(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xs,lastRenderedState:he},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xs,lastRenderedState:o},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function fT(i){var r=hT(i);r.next===null&&(r=i.alternate.memoizedState),Nu(i,r.next.queue,{},Kn())}function Lp(){return ln(Yu)}function dT(){return xt().memoizedState}function mT(){return xt().memoizedState}function G1(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var o=Kn();i=Er(o);var u=Tr(r,i,o);u!==null&&(Mn(u,r,o),wu(u,r,o)),r={cache:hp()},i.payload=r;return}r=r.return}}function Y1(i,r,o){var u=Kn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},df(i)?gT(r,o):(o=ep(i,r,o,u),o!==null&&(Mn(o,i,u),_T(o,r,u)))}function pT(i,r,o){var u=Kn();Nu(i,r,o,u)}function Nu(i,r,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(df(i))gT(r,f);else{var p=i.alternate;if(i.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var T=r.lastRenderedState,w=p(T,o);if(f.hasEagerState=!0,f.eagerState=w,Bn(w,T))return Yh(i,r,f,0),ct===null&&Gh(),!1}catch{}finally{}if(o=ep(i,r,f,u),o!==null)return Mn(o,i,u),_T(o,r,u),!0}return!1}function Vp(i,r,o,u){if(u={lane:2,revertLane:pg(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},df(i)){if(r)throw Error(s(479))}else r=ep(i,o,u,2),r!==null&&Mn(r,i,2)}function df(i){var r=i.alternate;return i===Ne||r!==null&&r===Ne}function gT(i,r){zo=af=!0;var o=i.pending;o===null?r.next=r:(r.next=o.next,o.next=r),i.pending=r}function _T(i,r,o){if((o&4194048)!==0){var u=r.lanes;u&=i.pendingLanes,o|=u,r.lanes=o,$l(i,o)}}var xu={readContext:ln,use:uf,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St};xu.useEffectEvent=St;var yT={readContext:ln,use:uf,useCallback:function(i,r){return bn().memoizedState=[i,r===void 0?null:r],i},useContext:ln,useEffect:tT,useImperativeHandle:function(i,r,o){o=o!=null?o.concat([i]):null,hf(4194308,4,rT.bind(null,r,i),o)},useLayoutEffect:function(i,r){return hf(4194308,4,i,r)},useInsertionEffect:function(i,r){hf(4,2,i,r)},useMemo:function(i,r){var o=bn();r=r===void 0?null:r;var u=i();if(ja){ei(!0);try{i()}finally{ei(!1)}}return o.memoizedState=[u,r],u},useReducer:function(i,r,o){var u=bn();if(o!==void 0){var f=o(r);if(ja){ei(!0);try{o(r)}finally{ei(!1)}}}else f=r;return u.memoizedState=u.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},u.queue=i,i=i.dispatch=Y1.bind(null,Ne,i),[u.memoizedState,i]},useRef:function(i){var r=bn();return i={current:i},r.memoizedState=i},useState:function(i){i=xp(i);var r=i.queue,o=pT.bind(null,Ne,r);return r.dispatch=o,[i.memoizedState,o]},useDebugValue:kp,useDeferredValue:function(i,r){var o=bn();return Pp(o,i,r)},useTransition:function(){var i=xp(!1);return i=cT.bind(null,Ne,i.queue,!0,!1),bn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,o){var u=Ne,f=bn();if(Ge){if(o===void 0)throw Error(s(407));o=o()}else{if(o=r(),ct===null)throw Error(s(349));(Be&127)!==0||jE(u,r,o)}f.memoizedState=o;var p={value:o,getSnapshot:r};return f.queue=p,tT(BE.bind(null,u,p,i),[i]),u.flags|=2048,Fo(9,{destroy:void 0},zE.bind(null,u,p,o,r),null),o},useId:function(){var i=bn(),r=ct.identifierPrefix;if(Ge){var o=as,u=rs;o=(u&~(1<<32-Rt(u)-1)).toString(32)+o,r="_"+r+"R_"+o,o=of++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=j1++,r="_"+r+"r_"+o.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:Lp,useFormState:XE,useActionState:XE,useOptimistic:function(i){var r=bn();r.memoizedState=r.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Vp.bind(null,Ne,!0,o),o.dispatch=r,[i,r]},useMemoCache:Rp,useCacheRefresh:function(){return bn().memoizedState=G1.bind(null,Ne)},useEffectEvent:function(i){var r=bn(),o={impl:i};return r.memoizedState=o,function(){if((Je&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},Up={readContext:ln,use:uf,useCallback:oT,useContext:ln,useEffect:Dp,useImperativeHandle:aT,useInsertionEffect:iT,useLayoutEffect:sT,useMemo:lT,useReducer:cf,useRef:eT,useState:function(){return cf(xs)},useDebugValue:kp,useDeferredValue:function(i,r){var o=xt();return uT(o,rt.memoizedState,i,r)},useTransition:function(){var i=cf(xs)[0],r=xt().memoizedState;return[typeof i=="boolean"?i:Iu(i),r]},useSyncExternalStore:UE,useId:dT,useHostTransitionStatus:Lp,useFormState:$E,useActionState:$E,useOptimistic:function(i,r){var o=xt();return qE(o,rt,i,r)},useMemoCache:Rp,useCacheRefresh:mT};Up.useEffectEvent=nT;var vT={readContext:ln,use:uf,useCallback:oT,useContext:ln,useEffect:Dp,useImperativeHandle:aT,useInsertionEffect:iT,useLayoutEffect:sT,useMemo:lT,useReducer:Np,useRef:eT,useState:function(){return Np(xs)},useDebugValue:kp,useDeferredValue:function(i,r){var o=xt();return rt===null?Pp(o,i,r):uT(o,rt.memoizedState,i,r)},useTransition:function(){var i=Np(xs)[0],r=xt().memoizedState;return[typeof i=="boolean"?i:Iu(i),r]},useSyncExternalStore:UE,useId:dT,useHostTransitionStatus:Lp,useFormState:ZE,useActionState:ZE,useOptimistic:function(i,r){var o=xt();return rt!==null?qE(o,rt,i,r):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:Rp,useCacheRefresh:mT};vT.useEffectEvent=nT;function jp(i,r,o,u){r=i.memoizedState,o=o(u,r),o=o==null?r:E({},r,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var zp={enqueueSetState:function(i,r,o){i=i._reactInternals;var u=Kn(),f=Er(u);f.payload=r,o!=null&&(f.callback=o),r=Tr(i,f,u),r!==null&&(Mn(r,i,u),wu(r,i,u))},enqueueReplaceState:function(i,r,o){i=i._reactInternals;var u=Kn(),f=Er(u);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=Tr(i,f,u),r!==null&&(Mn(r,i,u),wu(r,i,u))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var o=Kn(),u=Er(o);u.tag=2,r!=null&&(u.callback=r),r=Tr(i,u,o),r!==null&&(Mn(r,i,o),wu(r,i,o))}};function ET(i,r,o,u,f,p,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,p,T):r.prototype&&r.prototype.isPureReactComponent?!gu(o,u)||!gu(f,p):!0}function TT(i,r,o,u){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==i&&zp.enqueueReplaceState(r,r.state,null)}function za(i,r){var o=r;if("ref"in r){o={};for(var u in r)u!=="ref"&&(o[u]=r[u])}if(i=i.defaultProps){o===r&&(o=E({},o));for(var f in i)o[f]===void 0&&(o[f]=i[f])}return o}function ST(i){qh(i)}function bT(i){console.error(i)}function wT(i){qh(i)}function mf(i,r){try{var o=i.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function CT(i,r,o){try{var u=i.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Bp(i,r,o){return o=Er(o),o.tag=3,o.payload={element:null},o.callback=function(){mf(i,r)},o}function AT(i){return i=Er(i),i.tag=3,i}function RT(i,r,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var p=u.value;i.payload=function(){return f(p)},i.callback=function(){CT(r,o,u)}}var T=o.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){CT(r,o,u),typeof f!="function"&&(Rr===null?Rr=new Set([this]):Rr.add(this));var w=u.stack;this.componentDidCatch(u.value,{componentStack:w!==null?w:""})})}function K1(i,r,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=o.alternate,r!==null&&Po(r,o,f,!0),o=Hn.current,o!==null){switch(o.tag){case 31:case 13:return ci===null?Af():o.alternate===null&&bt===0&&(bt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===ef?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([u]):r.add(u),fg(i,u,f)),!1;case 22:return o.flags|=65536,u===ef?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([u]):o.add(u)),fg(i,u,f)),!1}throw Error(s(435,o.tag))}return fg(i,u,f),Af(),!1}if(Ge)return r=Hn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,u!==ap&&(i=Error(s(422),{cause:u}),vu(ai(i,o)))):(u!==ap&&(r=Error(s(423),{cause:u}),vu(ai(r,o))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,u=ai(u,o),f=Bp(i.stateNode,u,f),_p(i,f),bt!==4&&(bt=2)),!1;var p=Error(s(520),{cause:u});if(p=ai(p,o),Uu===null?Uu=[p]:Uu.push(p),bt!==4&&(bt=2),r===null)return!0;u=ai(u,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,i=f&-f,o.lanes|=i,i=Bp(o.stateNode,u,i),_p(o,i),!1;case 1:if(r=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Rr===null||!Rr.has(p))))return o.flags|=65536,f&=-f,o.lanes|=f,f=AT(f),RT(f,i,o,u),_p(o,f),!1}o=o.return}while(o!==null);return!1}var Fp=Error(s(461)),jt=!1;function un(i,r,o,u){r.child=i===null?OE(r,null,o,u):Ua(r,i.child,o,u)}function IT(i,r,o,u,f){o=o.render;var p=r.ref;if("ref"in u){var T={};for(var w in u)w!=="ref"&&(T[w]=u[w])}else T=u;return Pa(r),u=bp(i,r,o,T,p,f),w=wp(),i!==null&&!jt?(Cp(i,r,f),Os(i,r,f)):(Ge&&w&&sp(r),r.flags|=1,un(i,r,u,f),r.child)}function NT(i,r,o,u,f){if(i===null){var p=o.type;return typeof p=="function"&&!tp(p)&&p.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=p,xT(i,r,p,u,f)):(i=Qh(o.type,null,u,r,r.mode,f),i.ref=r.ref,i.return=r,r.child=i)}if(p=i.child,!Xp(i,f)){var T=p.memoizedProps;if(o=o.compare,o=o!==null?o:gu,o(T,u)&&i.ref===r.ref)return Os(i,r,f)}return r.flags|=1,i=Cs(p,u),i.ref=r.ref,i.return=r,r.child=i}function xT(i,r,o,u,f){if(i!==null){var p=i.memoizedProps;if(gu(p,u)&&i.ref===r.ref)if(jt=!1,r.pendingProps=u=p,Xp(i,f))(i.flags&131072)!==0&&(jt=!0);else return r.lanes=i.lanes,Os(i,r,f)}return Hp(i,r,o,u,f)}function OT(i,r,o,u){var f=u.children,p=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,i!==null){for(u=r.child=i.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~p}else u=0,r.child=null;return DT(i,r,p,o,u)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&Jh(r,p!==null?p.cachePool:null),p!==null?PE(r,p):vp(),ME(r);else return u=r.lanes=536870912,DT(i,r,p!==null?p.baseLanes|o:o,o,u)}else p!==null?(Jh(r,p.cachePool),PE(r,p),br(),r.memoizedState=null):(i!==null&&Jh(r,null),vp(),br());return un(i,r,f,o),r.child}function Ou(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function DT(i,r,o,u,f){var p=dp();return p=p===null?null:{parent:Vt._currentValue,pool:p},r.memoizedState={baseLanes:o,cachePool:p},i!==null&&Jh(r,null),vp(),ME(r),i!==null&&Po(i,r,u,!0),r.childLanes=f,null}function pf(i,r){return r=_f({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function kT(i,r,o){return Ua(r,i.child,null,o),i=pf(r,r.pendingProps),i.flags|=2,qn(r),r.memoizedState=null,i}function Q1(i,r,o){var u=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(Ge){if(u.mode==="hidden")return i=pf(r,u),r.lanes=536870912,Ou(null,i);if(Tp(r),(i=dt)?(i=GS(i,ui),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:pr!==null?{id:rs,overflow:as}:null,retryLane:536870912,hydrationErrors:null},o=gE(i),o.return=r,r.child=o,on=r,dt=null)):i=null,i===null)throw _r(r);return r.lanes=536870912,null}return pf(r,u)}var p=i.memoizedState;if(p!==null){var T=p.dehydrated;if(Tp(r),f)if(r.flags&256)r.flags&=-257,r=kT(i,r,o);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(s(558));else if(jt||Po(i,r,o,!1),f=(o&i.childLanes)!==0,jt||f){if(u=ct,u!==null&&(T=Jl(u,o),T!==0&&T!==p.retryLane))throw p.retryLane=T,xa(i,T),Mn(u,i,T),Fp;Af(),r=kT(i,r,o)}else i=p.treeContext,dt=hi(T.nextSibling),on=r,Ge=!0,gr=null,ui=!1,i!==null&&vE(r,i),r=pf(r,u),r.flags|=4096;return r}return i=Cs(i.child,{mode:u.mode,children:u.children}),i.ref=r.ref,r.child=i,i.return=r,i}function gf(i,r){var o=r.ref;if(o===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(i===null||i.ref!==o)&&(r.flags|=4194816)}}function Hp(i,r,o,u,f){return Pa(r),o=bp(i,r,o,u,void 0,f),u=wp(),i!==null&&!jt?(Cp(i,r,f),Os(i,r,f)):(Ge&&u&&sp(r),r.flags|=1,un(i,r,o,f),r.child)}function PT(i,r,o,u,f,p){return Pa(r),r.updateQueue=null,o=VE(r,u,o,f),LE(i),u=wp(),i!==null&&!jt?(Cp(i,r,p),Os(i,r,p)):(Ge&&u&&sp(r),r.flags|=1,un(i,r,o,p),r.child)}function MT(i,r,o,u,f){if(Pa(r),r.stateNode===null){var p=xo,T=o.contextType;typeof T=="object"&&T!==null&&(p=ln(T)),p=new o(u,p),r.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=zp,r.stateNode=p,p._reactInternals=r,p=r.stateNode,p.props=u,p.state=r.memoizedState,p.refs={},pp(r),T=o.contextType,p.context=typeof T=="object"&&T!==null?ln(T):xo,p.state=r.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(jp(r,o,T,u),p.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(T=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),T!==p.state&&zp.enqueueReplaceState(p,p.state,null),Au(r,u,p,f),Cu(),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(i===null){p=r.stateNode;var w=r.memoizedProps,D=za(o,w);p.props=D;var q=p.context,Z=o.contextType;T=xo,typeof Z=="object"&&Z!==null&&(T=ln(Z));var ne=o.getDerivedStateFromProps;Z=typeof ne=="function"||typeof p.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,Z||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w||q!==T)&&TT(r,p,u,T),vr=!1;var Y=r.memoizedState;p.state=Y,Au(r,u,p,f),Cu(),q=r.memoizedState,w||Y!==q||vr?(typeof ne=="function"&&(jp(r,o,ne,u),q=r.memoizedState),(D=vr||ET(r,o,D,u,Y,q,T))?(Z||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(r.flags|=4194308)):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=q),p.props=u,p.state=q,p.context=T,u=D):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{p=r.stateNode,gp(i,r),T=r.memoizedProps,Z=za(o,T),p.props=Z,ne=r.pendingProps,Y=p.context,q=o.contextType,D=xo,typeof q=="object"&&q!==null&&(D=ln(q)),w=o.getDerivedStateFromProps,(q=typeof w=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T!==ne||Y!==D)&&TT(r,p,u,D),vr=!1,Y=r.memoizedState,p.state=Y,Au(r,u,p,f),Cu();var W=r.memoizedState;T!==ne||Y!==W||vr||i!==null&&i.dependencies!==null&&Xh(i.dependencies)?(typeof w=="function"&&(jp(r,o,w,u),W=r.memoizedState),(Z=vr||ET(r,o,Z,u,Y,W,D)||i!==null&&i.dependencies!==null&&Xh(i.dependencies))?(q||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,W,D),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,W,D)),typeof p.componentDidUpdate=="function"&&(r.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof p.componentDidUpdate!="function"||T===i.memoizedProps&&Y===i.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&Y===i.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=W),p.props=u,p.state=W,p.context=D,u=Z):(typeof p.componentDidUpdate!="function"||T===i.memoizedProps&&Y===i.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&Y===i.memoizedState||(r.flags|=1024),u=!1)}return p=u,gf(i,r),u=(r.flags&128)!==0,p||u?(p=r.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),r.flags|=1,i!==null&&u?(r.child=Ua(r,i.child,null,f),r.child=Ua(r,null,o,f)):un(i,r,o,f),r.memoizedState=p.state,i=r.child):i=Os(i,r,f),i}function LT(i,r,o,u){return Da(),r.flags|=256,un(i,r,o,u),r.child}var qp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gp(i){return{baseLanes:i,cachePool:CE()}}function Yp(i,r,o){return i=i!==null?i.childLanes&~o:0,r&&(i|=Yn),i}function VT(i,r,o){var u=r.pendingProps,f=!1,p=(r.flags&128)!==0,T;if((T=p)||(T=i!==null&&i.memoizedState===null?!1:(Nt.current&2)!==0),T&&(f=!0,r.flags&=-129),T=(r.flags&32)!==0,r.flags&=-33,i===null){if(Ge){if(f?Sr(r):br(),(i=dt)?(i=GS(i,ui),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:pr!==null?{id:rs,overflow:as}:null,retryLane:536870912,hydrationErrors:null},o=gE(i),o.return=r,r.child=o,on=r,dt=null)):i=null,i===null)throw _r(r);return Ig(i)?r.lanes=32:r.lanes=536870912,null}var w=u.children;return u=u.fallback,f?(br(),f=r.mode,w=_f({mode:"hidden",children:w},f),u=Oa(u,f,o,null),w.return=r,u.return=r,w.sibling=u,r.child=w,u=r.child,u.memoizedState=Gp(o),u.childLanes=Yp(i,T,o),r.memoizedState=qp,Ou(null,u)):(Sr(r),Kp(r,w))}var D=i.memoizedState;if(D!==null&&(w=D.dehydrated,w!==null)){if(p)r.flags&256?(Sr(r),r.flags&=-257,r=Qp(i,r,o)):r.memoizedState!==null?(br(),r.child=i.child,r.flags|=128,r=null):(br(),w=u.fallback,f=r.mode,u=_f({mode:"visible",children:u.children},f),w=Oa(w,f,o,null),w.flags|=2,u.return=r,w.return=r,u.sibling=w,r.child=u,Ua(r,i.child,null,o),u=r.child,u.memoizedState=Gp(o),u.childLanes=Yp(i,T,o),r.memoizedState=qp,r=Ou(null,u));else if(Sr(r),Ig(w)){if(T=w.nextSibling&&w.nextSibling.dataset,T)var q=T.dgst;T=q,u=Error(s(419)),u.stack="",u.digest=T,vu({value:u,source:null,stack:null}),r=Qp(i,r,o)}else if(jt||Po(i,r,o,!1),T=(o&i.childLanes)!==0,jt||T){if(T=ct,T!==null&&(u=Jl(T,o),u!==0&&u!==D.retryLane))throw D.retryLane=u,xa(i,u),Mn(T,i,u),Fp;Rg(w)||Af(),r=Qp(i,r,o)}else Rg(w)?(r.flags|=192,r.child=i.child,r=null):(i=D.treeContext,dt=hi(w.nextSibling),on=r,Ge=!0,gr=null,ui=!1,i!==null&&vE(r,i),r=Kp(r,u.children),r.flags|=4096);return r}return f?(br(),w=u.fallback,f=r.mode,D=i.child,q=D.sibling,u=Cs(D,{mode:"hidden",children:u.children}),u.subtreeFlags=D.subtreeFlags&65011712,q!==null?w=Cs(q,w):(w=Oa(w,f,o,null),w.flags|=2),w.return=r,u.return=r,u.sibling=w,r.child=u,Ou(null,u),u=r.child,w=i.child.memoizedState,w===null?w=Gp(o):(f=w.cachePool,f!==null?(D=Vt._currentValue,f=f.parent!==D?{parent:D,pool:D}:f):f=CE(),w={baseLanes:w.baseLanes|o,cachePool:f}),u.memoizedState=w,u.childLanes=Yp(i,T,o),r.memoizedState=qp,Ou(i.child,u)):(Sr(r),o=i.child,i=o.sibling,o=Cs(o,{mode:"visible",children:u.children}),o.return=r,o.sibling=null,i!==null&&(T=r.deletions,T===null?(r.deletions=[i],r.flags|=16):T.push(i)),r.child=o,r.memoizedState=null,o)}function Kp(i,r){return r=_f({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function _f(i,r){return i=Fn(22,i,null,r),i.lanes=0,i}function Qp(i,r,o){return Ua(r,i.child,null,o),i=Kp(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function UT(i,r,o){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r),up(i.return,r,o)}function Wp(i,r,o,u,f,p){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:p}:(T.isBackwards=r,T.rendering=null,T.renderingStartTime=0,T.last=u,T.tail=o,T.tailMode=f,T.treeForkCount=p)}function jT(i,r,o){var u=r.pendingProps,f=u.revealOrder,p=u.tail;u=u.children;var T=Nt.current,w=(T&2)!==0;if(w?(T=T&1|2,r.flags|=128):T&=1,X(Nt,T),un(i,r,u,o),u=Ge?yu:0,!w&&i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&UT(i,o,r);else if(i.tag===19)UT(i,o,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(f){case"forwards":for(o=r.child,f=null;o!==null;)i=o.alternate,i!==null&&rf(i)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),Wp(r,!1,f,o,p,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(i=f.alternate,i!==null&&rf(i)===null){r.child=f;break}i=f.sibling,f.sibling=o,o=f,f=i}Wp(r,!0,o,null,p,u);break;case"together":Wp(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function Os(i,r,o){if(i!==null&&(r.dependencies=i.dependencies),Ar|=r.lanes,(o&r.childLanes)===0)if(i!==null){if(Po(i,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,o=Cs(i,i.pendingProps),r.child=o,o.return=r;i.sibling!==null;)i=i.sibling,o=o.sibling=Cs(i,i.pendingProps),o.return=r;o.sibling=null}return r.child}function Xp(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Xh(i)))}function W1(i,r,o){switch(r.tag){case 3:ut(r,r.stateNode.containerInfo),yr(r,Vt,i.memoizedState.cache),Da();break;case 27:case 5:vi(r);break;case 4:ut(r,r.stateNode.containerInfo);break;case 10:yr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Tp(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Sr(r),r.flags|=128,null):(o&r.child.childLanes)!==0?VT(i,r,o):(Sr(r),i=Os(i,r,o),i!==null?i.sibling:null);Sr(r);break;case 19:var f=(i.flags&128)!==0;if(u=(o&r.childLanes)!==0,u||(Po(i,r,o,!1),u=(o&r.childLanes)!==0),f){if(u)return jT(i,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),X(Nt,Nt.current),u)break;return null;case 22:return r.lanes=0,OT(i,r,o,r.pendingProps);case 24:yr(r,Vt,i.memoizedState.cache)}return Os(i,r,o)}function zT(i,r,o){if(i!==null)if(i.memoizedProps!==r.pendingProps)jt=!0;else{if(!Xp(i,o)&&(r.flags&128)===0)return jt=!1,W1(i,r,o);jt=(i.flags&131072)!==0}else jt=!1,Ge&&(r.flags&1048576)!==0&&yE(r,yu,r.index);switch(r.lanes=0,r.tag){case 16:e:{var u=r.pendingProps;if(i=La(r.elementType),r.type=i,typeof i=="function")tp(i)?(u=za(i,u),r.tag=1,r=MT(null,r,i,u,o)):(r.tag=0,r=Hp(null,r,i,u,o));else{if(i!=null){var f=i.$$typeof;if(f===ue){r.tag=11,r=IT(null,r,i,u,o);break e}else if(f===x){r.tag=14,r=NT(null,r,i,u,o);break e}}throw r=Ze(i)||i,Error(s(306,r,""))}}return r;case 0:return Hp(i,r,r.type,r.pendingProps,o);case 1:return u=r.type,f=za(u,r.pendingProps),MT(i,r,u,f,o);case 3:e:{if(ut(r,r.stateNode.containerInfo),i===null)throw Error(s(387));u=r.pendingProps;var p=r.memoizedState;f=p.element,gp(i,r),Au(r,u,null,o);var T=r.memoizedState;if(u=T.cache,yr(r,Vt,u),u!==p.cache&&cp(r,[Vt],o,!0),Cu(),u=T.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:T.cache},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){r=LT(i,r,u,o);break e}else if(u!==f){f=ai(Error(s(424)),r),vu(f),r=LT(i,r,u,o);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(dt=hi(i.firstChild),on=r,Ge=!0,gr=null,ui=!0,o=OE(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Da(),u===f){r=Os(i,r,o);break e}un(i,r,u,o)}r=r.child}return r;case 26:return gf(i,r),i===null?(o=$S(r.type,null,r.pendingProps,null))?r.memoizedState=o:Ge||(o=r.type,i=r.pendingProps,u=kf(ve.current).createElement(o),u[Pt]=r,u[$t]=i,cn(u,o,i),Mt(u),r.stateNode=u):r.memoizedState=$S(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return vi(r),i===null&&Ge&&(u=r.stateNode=QS(r.type,r.pendingProps,ve.current),on=r,ui=!0,f=dt,Or(r.type)?(Ng=f,dt=hi(u.firstChild)):dt=f),un(i,r,r.pendingProps.children,o),gf(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&Ge&&((f=u=dt)&&(u=CN(u,r.type,r.pendingProps,ui),u!==null?(r.stateNode=u,on=r,dt=hi(u.firstChild),ui=!1,f=!0):f=!1),f||_r(r)),vi(r),f=r.type,p=r.pendingProps,T=i!==null?i.memoizedProps:null,u=p.children,wg(f,p)?u=null:T!==null&&wg(f,T)&&(r.flags|=32),r.memoizedState!==null&&(f=bp(i,r,z1,null,null,o),Yu._currentValue=f),gf(i,r),un(i,r,u,o),r.child;case 6:return i===null&&Ge&&((i=o=dt)&&(o=AN(o,r.pendingProps,ui),o!==null?(r.stateNode=o,on=r,dt=null,i=!0):i=!1),i||_r(r)),null;case 13:return VT(i,r,o);case 4:return ut(r,r.stateNode.containerInfo),u=r.pendingProps,i===null?r.child=Ua(r,null,u,o):un(i,r,u,o),r.child;case 11:return IT(i,r,r.type,r.pendingProps,o);case 7:return un(i,r,r.pendingProps,o),r.child;case 8:return un(i,r,r.pendingProps.children,o),r.child;case 12:return un(i,r,r.pendingProps.children,o),r.child;case 10:return u=r.pendingProps,yr(r,r.type,u.value),un(i,r,u.children,o),r.child;case 9:return f=r.type._context,u=r.pendingProps.children,Pa(r),f=ln(f),u=u(f),r.flags|=1,un(i,r,u,o),r.child;case 14:return NT(i,r,r.type,r.pendingProps,o);case 15:return xT(i,r,r.type,r.pendingProps,o);case 19:return jT(i,r,o);case 31:return Q1(i,r,o);case 22:return OT(i,r,o,r.pendingProps);case 24:return Pa(r),u=ln(Vt),i===null?(f=dp(),f===null&&(f=ct,p=hp(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=o),f=p),r.memoizedState={parent:u,cache:f},pp(r),yr(r,Vt,f)):((i.lanes&o)!==0&&(gp(i,r),Au(r,null,null,o),Cu()),f=i.memoizedState,p=r.memoizedState,f.parent!==u?(f={parent:u,cache:u},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),yr(r,Vt,u)):(u=p.cache,yr(r,Vt,u),u!==f.cache&&cp(r,[Vt],o,!0))),un(i,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Ds(i){i.flags|=4}function $p(i,r,o,u,f){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(f&335544128)===f)if(i.stateNode.complete)i.flags|=8192;else if(dS())i.flags|=8192;else throw Va=ef,mp}else i.flags&=-16777217}function BT(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!nb(r))if(dS())i.flags|=8192;else throw Va=ef,mp}function yf(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?bh():536870912,i.lanes|=r,Yo|=r)}function Du(i,r){if(!Ge)switch(i.tailMode){case"hidden":r=i.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function mt(i){var r=i.alternate!==null&&i.alternate.child===i.child,o=0,u=0;if(r)for(var f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=u,i.childLanes=o,r}function X1(i,r,o){var u=r.pendingProps;switch(rp(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(r),null;case 1:return mt(r),null;case 3:return o=r.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),Is(Vt),Xe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(ko(r)?Ds(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,op())),mt(r),null;case 26:var f=r.type,p=r.memoizedState;return i===null?(Ds(r),p!==null?(mt(r),BT(r,p)):(mt(r),$p(r,f,null,u,o))):p?p!==i.memoizedState?(Ds(r),mt(r),BT(r,p)):(mt(r),r.flags&=-16777217):(i=i.memoizedProps,i!==u&&Ds(r),mt(r),$p(r,f,i,u,o)),null;case 27:if(Zn(r),o=ve.current,f=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&Ds(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return mt(r),null}i=le.current,ko(r)?EE(r):(i=QS(f,u,o),r.stateNode=i,Ds(r))}return mt(r),null;case 5:if(Zn(r),f=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==u&&Ds(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return mt(r),null}if(p=le.current,ko(r))EE(r);else{var T=kf(ve.current);switch(p){case 1:p=T.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=T.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=T.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=T.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=T.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof u.is=="string"?T.createElement("select",{is:u.is}):T.createElement("select"),u.multiple?p.multiple=!0:u.size&&(p.size=u.size);break;default:p=typeof u.is=="string"?T.createElement(f,{is:u.is}):T.createElement(f)}}p[Pt]=r,p[$t]=u;e:for(T=r.child;T!==null;){if(T.tag===5||T.tag===6)p.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===r)break e;for(;T.sibling===null;){if(T.return===null||T.return===r)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}r.stateNode=p;e:switch(cn(p,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Ds(r)}}return mt(r),$p(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,o),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==u&&Ds(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(s(166));if(i=ve.current,ko(r)){if(i=r.stateNode,o=r.memoizedProps,u=null,f=on,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}i[Pt]=r,i=!!(i.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||VS(i.nodeValue,o)),i||_r(r,!0)}else i=kf(i).createTextNode(u),i[Pt]=r,r.stateNode=i}return mt(r),null;case 31:if(o=r.memoizedState,i===null||i.memoizedState!==null){if(u=ko(r),o!==null){if(i===null){if(!u)throw Error(s(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[Pt]=r}else Da(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;mt(r),i=!1}else o=op(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=o),i=!0;if(!i)return r.flags&256?(qn(r),r):(qn(r),null);if((r.flags&128)!==0)throw Error(s(558))}return mt(r),null;case 13:if(u=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=ko(r),u!==null&&u.dehydrated!==null){if(i===null){if(!f)throw Error(s(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Pt]=r}else Da(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;mt(r),f=!1}else f=op(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(qn(r),r):(qn(r),null)}return qn(r),(r.flags&128)!==0?(r.lanes=o,r):(o=u!==null,i=i!==null&&i.memoizedState!==null,o&&(u=r.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048)),o!==i&&o&&(r.child.flags|=8192),yf(r,r.updateQueue),mt(r),null);case 4:return Xe(),i===null&&vg(r.stateNode.containerInfo),mt(r),null;case 10:return Is(r.type),mt(r),null;case 19:if(G(Nt),u=r.memoizedState,u===null)return mt(r),null;if(f=(r.flags&128)!==0,p=u.rendering,p===null)if(f)Du(u,!1);else{if(bt!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(p=rf(i),p!==null){for(r.flags|=128,Du(u,!1),i=p.updateQueue,r.updateQueue=i,yf(r,i),r.subtreeFlags=0,i=o,o=r.child;o!==null;)pE(o,i),o=o.sibling;return X(Nt,Nt.current&1|2),Ge&&As(r,u.treeForkCount),r.child}i=i.sibling}u.tail!==null&&Tn()>bf&&(r.flags|=128,f=!0,Du(u,!1),r.lanes=4194304)}else{if(!f)if(i=rf(p),i!==null){if(r.flags|=128,f=!0,i=i.updateQueue,r.updateQueue=i,yf(r,i),Du(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!Ge)return mt(r),null}else 2*Tn()-u.renderingStartTime>bf&&o!==536870912&&(r.flags|=128,f=!0,Du(u,!1),r.lanes=4194304);u.isBackwards?(p.sibling=r.child,r.child=p):(i=u.last,i!==null?i.sibling=p:r.child=p,u.last=p)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=Tn(),i.sibling=null,o=Nt.current,X(Nt,f?o&1|2:o&1),Ge&&As(r,u.treeForkCount),i):(mt(r),null);case 22:case 23:return qn(r),Ep(),u=r.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(o&536870912)!==0&&(r.flags&128)===0&&(mt(r),r.subtreeFlags&6&&(r.flags|=8192)):mt(r),o=r.updateQueue,o!==null&&yf(r,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==o&&(r.flags|=2048),i!==null&&G(Ma),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),Is(Vt),mt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function $1(i,r){switch(rp(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Is(Vt),Xe(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return Zn(r),null;case 31:if(r.memoizedState!==null){if(qn(r),r.alternate===null)throw Error(s(340));Da()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(qn(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Da()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return G(Nt),null;case 4:return Xe(),null;case 10:return Is(r.type),null;case 22:case 23:return qn(r),Ep(),i!==null&&G(Ma),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return Is(Vt),null;case 25:return null;default:return null}}function FT(i,r){switch(rp(r),r.tag){case 3:Is(Vt),Xe();break;case 26:case 27:case 5:Zn(r);break;case 4:Xe();break;case 31:r.memoizedState!==null&&qn(r);break;case 13:qn(r);break;case 19:G(Nt);break;case 10:Is(r.type);break;case 22:case 23:qn(r),Ep(),i!==null&&G(Ma);break;case 24:Is(Vt)}}function ku(i,r){try{var o=r.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&i)===i){u=void 0;var p=o.create,T=o.inst;u=p(),T.destroy=u}o=o.next}while(o!==f)}}catch(w){it(r,r.return,w)}}function wr(i,r,o){try{var u=r.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&i)===i){var T=u.inst,w=T.destroy;if(w!==void 0){T.destroy=void 0,f=r;var D=o,q=w;try{q()}catch(Z){it(f,D,Z)}}}u=u.next}while(u!==p)}}catch(Z){it(r,r.return,Z)}}function HT(i){var r=i.updateQueue;if(r!==null){var o=i.stateNode;try{kE(r,o)}catch(u){it(i,i.return,u)}}}function qT(i,r,o){o.props=za(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(u){it(i,r,u)}}function Pu(i,r){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof o=="function"?i.refCleanup=o(u):o.current=u}}catch(f){it(i,r,f)}}function os(i,r){var o=i.ref,u=i.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){it(i,r,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){it(i,r,f)}else o.current=null}function GT(i){var r=i.type,o=i.memoizedProps,u=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){it(i,i.return,f)}}function Jp(i,r,o){try{var u=i.stateNode;vN(u,i.type,o,r),u[$t]=r}catch(f){it(i,i.return,f)}}function YT(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Or(i.type)||i.tag===4}function Zp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||YT(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Or(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function eg(i,r,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(i),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=wi));else if(u!==4&&(u===27&&Or(i.type)&&(o=i.stateNode,r=null),i=i.child,i!==null))for(eg(i,r,o),i=i.sibling;i!==null;)eg(i,r,o),i=i.sibling}function vf(i,r,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,r?o.insertBefore(i,r):o.appendChild(i);else if(u!==4&&(u===27&&Or(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(vf(i,r,o),i=i.sibling;i!==null;)vf(i,r,o),i=i.sibling}function KT(i){var r=i.stateNode,o=i.memoizedProps;try{for(var u=i.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);cn(r,u,o),r[Pt]=i,r[$t]=o}catch(p){it(i,i.return,p)}}var ks=!1,zt=!1,tg=!1,QT=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function J1(i,r){if(i=i.containerInfo,Sg=zf,i=aE(i),Qm(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else e:{o=(o=i.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var T=0,w=-1,D=-1,q=0,Z=0,ne=i,Y=null;t:for(;;){for(var W;ne!==o||f!==0&&ne.nodeType!==3||(w=T+f),ne!==p||u!==0&&ne.nodeType!==3||(D=T+u),ne.nodeType===3&&(T+=ne.nodeValue.length),(W=ne.firstChild)!==null;)Y=ne,ne=W;for(;;){if(ne===i)break t;if(Y===o&&++q===f&&(w=T),Y===p&&++Z===u&&(D=T),(W=ne.nextSibling)!==null)break;ne=Y,Y=ne.parentNode}ne=W}o=w===-1||D===-1?null:{start:w,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(bg={focusedElem:i,selectionRange:o},zf=!1,Zt=r;Zt!==null;)if(r=Zt,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Zt=i;else for(;Zt!==null;){switch(r=Zt,p=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(o=0;o<i.length;o++)f=i[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&p!==null){i=void 0,o=r,f=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var de=za(o.type,f);i=u.getSnapshotBeforeUpdate(de,p),u.__reactInternalSnapshotBeforeUpdate=i}catch(Te){it(o,o.return,Te)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,o=i.nodeType,o===9)Ag(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Ag(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Zt=i;break}Zt=r.return}}function WT(i,r,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Ms(i,o),u&4&&ku(5,o);break;case 1:if(Ms(i,o),u&4)if(i=o.stateNode,r===null)try{i.componentDidMount()}catch(T){it(o,o.return,T)}else{var f=za(o.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(f,r,i.__reactInternalSnapshotBeforeUpdate)}catch(T){it(o,o.return,T)}}u&64&&HT(o),u&512&&Pu(o,o.return);break;case 3:if(Ms(i,o),u&64&&(i=o.updateQueue,i!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{kE(i,r)}catch(T){it(o,o.return,T)}}break;case 27:r===null&&u&4&&KT(o);case 26:case 5:Ms(i,o),r===null&&u&4&&GT(o),u&512&&Pu(o,o.return);break;case 12:Ms(i,o);break;case 31:Ms(i,o),u&4&&JT(i,o);break;case 13:Ms(i,o),u&4&&ZT(i,o),u&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=oN.bind(null,o),RN(i,o))));break;case 22:if(u=o.memoizedState!==null||ks,!u){r=r!==null&&r.memoizedState!==null||zt,f=ks;var p=zt;ks=u,(zt=r)&&!p?Ls(i,o,(o.subtreeFlags&8772)!==0):Ms(i,o),ks=f,zt=p}break;case 30:break;default:Ms(i,o)}}function XT(i){var r=i.alternate;r!==null&&(i.alternate=null,XT(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&go(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var yt=null,On=!1;function Ps(i,r,o){for(o=o.child;o!==null;)$T(i,r,o),o=o.sibling}function $T(i,r,o){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(Ei,o)}catch{}switch(o.tag){case 26:zt||os(o,r),Ps(i,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:zt||os(o,r);var u=yt,f=On;Or(o.type)&&(yt=o.stateNode,On=!1),Ps(i,r,o),Hu(o.stateNode),yt=u,On=f;break;case 5:zt||os(o,r);case 6:if(u=yt,f=On,yt=null,Ps(i,r,o),yt=u,On=f,yt!==null)if(On)try{(yt.nodeType===9?yt.body:yt.nodeName==="HTML"?yt.ownerDocument.body:yt).removeChild(o.stateNode)}catch(p){it(o,r,p)}else try{yt.removeChild(o.stateNode)}catch(p){it(o,r,p)}break;case 18:yt!==null&&(On?(i=yt,HS(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),el(i)):HS(yt,o.stateNode));break;case 4:u=yt,f=On,yt=o.stateNode.containerInfo,On=!0,Ps(i,r,o),yt=u,On=f;break;case 0:case 11:case 14:case 15:wr(2,o,r),zt||wr(4,o,r),Ps(i,r,o);break;case 1:zt||(os(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"&&qT(o,r,u)),Ps(i,r,o);break;case 21:Ps(i,r,o);break;case 22:zt=(u=zt)||o.memoizedState!==null,Ps(i,r,o),zt=u;break;default:Ps(i,r,o)}}function JT(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{el(i)}catch(o){it(r,r.return,o)}}}function ZT(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{el(i)}catch(o){it(r,r.return,o)}}function Z1(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new QT),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new QT),r;default:throw Error(s(435,i.tag))}}function Ef(i,r){var o=Z1(i);r.forEach(function(u){if(!o.has(u)){o.add(u);var f=lN.bind(null,i,u);u.then(f,f)}})}function Dn(i,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],p=i,T=r,w=T;e:for(;w!==null;){switch(w.tag){case 27:if(Or(w.type)){yt=w.stateNode,On=!1;break e}break;case 5:yt=w.stateNode,On=!1;break e;case 3:case 4:yt=w.stateNode.containerInfo,On=!0;break e}w=w.return}if(yt===null)throw Error(s(160));$T(p,T,f),yt=null,On=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)eS(r,i),r=r.sibling}var xi=null;function eS(i,r){var o=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Dn(r,i),kn(i),u&4&&(wr(3,i,i.return),ku(3,i),wr(5,i,i.return));break;case 1:Dn(r,i),kn(i),u&512&&(zt||o===null||os(o,o.return)),u&64&&ks&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=xi;if(Dn(r,i),kn(i),u&512&&(zt||o===null||os(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=i.memoizedState,o===null)if(u===null)if(i.stateNode===null){e:{u=i.type,o=i.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":p=f.getElementsByTagName("title")[0],(!p||p[Ki]||p[Pt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(u),f.head.insertBefore(p,f.querySelector("head > title"))),cn(p,u,o),p[Pt]=i,Mt(p),u=p;break e;case"link":var T=eb("link","href",f).get(u+(o.href||""));if(T){for(var w=0;w<T.length;w++)if(p=T[w],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){T.splice(w,1);break t}}p=f.createElement(u),cn(p,u,o),f.head.appendChild(p);break;case"meta":if(T=eb("meta","content",f).get(u+(o.content||""))){for(w=0;w<T.length;w++)if(p=T[w],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){T.splice(w,1);break t}}p=f.createElement(u),cn(p,u,o),f.head.appendChild(p);break;default:throw Error(s(468,u))}p[Pt]=i,Mt(p),u=p}i.stateNode=u}else tb(f,i.type,i.stateNode);else i.stateNode=ZS(f,u,i.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?tb(f,i.type,i.stateNode):ZS(f,u,i.memoizedProps)):u===null&&i.stateNode!==null&&Jp(i,i.memoizedProps,o.memoizedProps)}break;case 27:Dn(r,i),kn(i),u&512&&(zt||o===null||os(o,o.return)),o!==null&&u&4&&Jp(i,i.memoizedProps,o.memoizedProps);break;case 5:if(Dn(r,i),kn(i),u&512&&(zt||o===null||os(o,o.return)),i.flags&32){f=i.stateNode;try{xn(f,"")}catch(de){it(i,i.return,de)}}u&4&&i.stateNode!=null&&(f=i.memoizedProps,Jp(i,f,o!==null?o.memoizedProps:f)),u&1024&&(tg=!0);break;case 6:if(Dn(r,i),kn(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,o=i.stateNode;try{o.nodeValue=u}catch(de){it(i,i.return,de)}}break;case 3:if(Lf=null,f=xi,xi=Pf(r.containerInfo),Dn(r,i),xi=f,kn(i),u&4&&o!==null&&o.memoizedState.isDehydrated)try{el(r.containerInfo)}catch(de){it(i,i.return,de)}tg&&(tg=!1,tS(i));break;case 4:u=xi,xi=Pf(i.stateNode.containerInfo),Dn(r,i),kn(i),xi=u;break;case 12:Dn(r,i),kn(i);break;case 31:Dn(r,i),kn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Ef(i,u)));break;case 13:Dn(r,i),kn(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Sf=Tn()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Ef(i,u)));break;case 22:f=i.memoizedState!==null;var D=o!==null&&o.memoizedState!==null,q=ks,Z=zt;if(ks=q||f,zt=Z||D,Dn(r,i),zt=Z,ks=q,kn(i),u&8192)e:for(r=i.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||D||ks||zt||Ba(i)),o=null,r=i;;){if(r.tag===5||r.tag===26){if(o===null){D=o=r;try{if(p=D.stateNode,f)T=p.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{w=D.stateNode;var ne=D.memoizedProps.style,Y=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;w.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(de){it(D,D.return,de)}}}else if(r.tag===6){if(o===null){D=r;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(de){it(D,D.return,de)}}}else if(r.tag===18){if(o===null){D=r;try{var W=D.stateNode;f?qS(W,!0):qS(D.stateNode,!1)}catch(de){it(D,D.return,de)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=i.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Ef(i,o))));break;case 19:Dn(r,i),kn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Ef(i,u)));break;case 30:break;case 21:break;default:Dn(r,i),kn(i)}}function kn(i){var r=i.flags;if(r&2){try{for(var o,u=i.return;u!==null;){if(YT(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var f=o.stateNode,p=Zp(i);vf(i,p,f);break;case 5:var T=o.stateNode;o.flags&32&&(xn(T,""),o.flags&=-33);var w=Zp(i);vf(i,w,T);break;case 3:case 4:var D=o.stateNode.containerInfo,q=Zp(i);eg(i,q,D);break;default:throw Error(s(161))}}catch(Z){it(i,i.return,Z)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function tS(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;tS(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function Ms(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)WT(i,r.alternate,r),r=r.sibling}function Ba(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:wr(4,r,r.return),Ba(r);break;case 1:os(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&qT(r,r.return,o),Ba(r);break;case 27:Hu(r.stateNode);case 26:case 5:os(r,r.return),Ba(r);break;case 22:r.memoizedState===null&&Ba(r);break;case 30:Ba(r);break;default:Ba(r)}i=i.sibling}}function Ls(i,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,f=i,p=r,T=p.flags;switch(p.tag){case 0:case 11:case 15:Ls(f,p,o),ku(4,p);break;case 1:if(Ls(f,p,o),u=p,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(q){it(u,u.return,q)}if(u=p,f=u.updateQueue,f!==null){var w=u.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)DE(D[f],w)}catch(q){it(u,u.return,q)}}o&&T&64&&HT(p),Pu(p,p.return);break;case 27:KT(p);case 26:case 5:Ls(f,p,o),o&&u===null&&T&4&&GT(p),Pu(p,p.return);break;case 12:Ls(f,p,o);break;case 31:Ls(f,p,o),o&&T&4&&JT(f,p);break;case 13:Ls(f,p,o),o&&T&4&&ZT(f,p);break;case 22:p.memoizedState===null&&Ls(f,p,o),Pu(p,p.return);break;case 30:break;default:Ls(f,p,o)}r=r.sibling}}function ng(i,r){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&Eu(o))}function ig(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Eu(i))}function Oi(i,r,o,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)nS(i,r,o,u),r=r.sibling}function nS(i,r,o,u){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Oi(i,r,o,u),f&2048&&ku(9,r);break;case 1:Oi(i,r,o,u);break;case 3:Oi(i,r,o,u),f&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Eu(i)));break;case 12:if(f&2048){Oi(i,r,o,u),i=r.stateNode;try{var p=r.memoizedProps,T=p.id,w=p.onPostCommit;typeof w=="function"&&w(T,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(D){it(r,r.return,D)}}else Oi(i,r,o,u);break;case 31:Oi(i,r,o,u);break;case 13:Oi(i,r,o,u);break;case 23:break;case 22:p=r.stateNode,T=r.alternate,r.memoizedState!==null?p._visibility&2?Oi(i,r,o,u):Mu(i,r):p._visibility&2?Oi(i,r,o,u):(p._visibility|=2,Ho(i,r,o,u,(r.subtreeFlags&10256)!==0||!1)),f&2048&&ng(T,r);break;case 24:Oi(i,r,o,u),f&2048&&ig(r.alternate,r);break;default:Oi(i,r,o,u)}}function Ho(i,r,o,u,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var p=i,T=r,w=o,D=u,q=T.flags;switch(T.tag){case 0:case 11:case 15:Ho(p,T,w,D,f),ku(8,T);break;case 23:break;case 22:var Z=T.stateNode;T.memoizedState!==null?Z._visibility&2?Ho(p,T,w,D,f):Mu(p,T):(Z._visibility|=2,Ho(p,T,w,D,f)),f&&q&2048&&ng(T.alternate,T);break;case 24:Ho(p,T,w,D,f),f&&q&2048&&ig(T.alternate,T);break;default:Ho(p,T,w,D,f)}r=r.sibling}}function Mu(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=i,u=r,f=u.flags;switch(u.tag){case 22:Mu(o,u),f&2048&&ng(u.alternate,u);break;case 24:Mu(o,u),f&2048&&ig(u.alternate,u);break;default:Mu(o,u)}r=r.sibling}}var Lu=8192;function qo(i,r,o){if(i.subtreeFlags&Lu)for(i=i.child;i!==null;)iS(i,r,o),i=i.sibling}function iS(i,r,o){switch(i.tag){case 26:qo(i,r,o),i.flags&Lu&&i.memoizedState!==null&&jN(o,xi,i.memoizedState,i.memoizedProps);break;case 5:qo(i,r,o);break;case 3:case 4:var u=xi;xi=Pf(i.stateNode.containerInfo),qo(i,r,o),xi=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=Lu,Lu=16777216,qo(i,r,o),Lu=u):qo(i,r,o));break;default:qo(i,r,o)}}function sS(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Vu(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];Zt=u,aS(u,i)}sS(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)rS(i),i=i.sibling}function rS(i){switch(i.tag){case 0:case 11:case 15:Vu(i),i.flags&2048&&wr(9,i,i.return);break;case 3:Vu(i);break;case 12:Vu(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Tf(i)):Vu(i);break;default:Vu(i)}}function Tf(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];Zt=u,aS(u,i)}sS(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:wr(8,r,r.return),Tf(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Tf(r));break;default:Tf(r)}i=i.sibling}}function aS(i,r){for(;Zt!==null;){var o=Zt;switch(o.tag){case 0:case 11:case 15:wr(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Eu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Zt=u;else e:for(o=i;Zt!==null;){u=Zt;var f=u.sibling,p=u.return;if(XT(u),u===o){Zt=null;break e}if(f!==null){f.return=p,Zt=f;break e}Zt=p}}}var eN={getCacheForType:function(i){var r=ln(Vt),o=r.data.get(i);return o===void 0&&(o=i(),r.data.set(i,o)),o},cacheSignal:function(){return ln(Vt).controller.signal}},tN=typeof WeakMap=="function"?WeakMap:Map,Je=0,ct=null,Ve=null,Be=0,nt=0,Gn=null,Cr=!1,Go=!1,sg=!1,Vs=0,bt=0,Ar=0,Fa=0,rg=0,Yn=0,Yo=0,Uu=null,Pn=null,ag=!1,Sf=0,oS=0,bf=1/0,wf=null,Rr=null,Yt=0,Ir=null,Ko=null,Us=0,og=0,lg=null,lS=null,ju=0,ug=null;function Kn(){return(Je&2)!==0&&Be!==0?Be&-Be:J.T!==null?pg():wh()}function uS(){if(Yn===0)if((Be&536870912)===0||Ge){var i=pa;pa<<=1,(pa&3932160)===0&&(pa=262144),Yn=i}else Yn=536870912;return i=Hn.current,i!==null&&(i.flags|=32),Yn}function Mn(i,r,o){(i===ct&&(nt===2||nt===9)||i.cancelPendingCommit!==null)&&(Qo(i,0),Nr(i,Be,Yn,!1)),ga(i,o),((Je&2)===0||i!==ct)&&(i===ct&&((Je&2)===0&&(Fa|=o),bt===4&&Nr(i,Be,Yn,!1)),ls(i))}function cS(i,r,o){if((Je&6)!==0)throw Error(s(327));var u=!o&&(r&127)===0&&(r&i.expiredLanes)===0||Ti(i,r),f=u?sN(i,r):hg(i,r,!0),p=u;do{if(f===0){Go&&!u&&Nr(i,r,0,!1);break}else{if(o=i.current.alternate,p&&!nN(o)){f=hg(i,r,!1),p=!1;continue}if(f===2){if(p=r,i.errorRecoveryDisabledLanes&p)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){r=T;e:{var w=i;f=Uu;var D=w.current.memoizedState.isDehydrated;if(D&&(Qo(w,T).flags|=256),T=hg(w,T,!1),T!==2){if(sg&&!D){w.errorRecoveryDisabledLanes|=p,Fa|=p,f=4;break e}p=Pn,Pn=f,p!==null&&(Pn===null?Pn=p:Pn.push.apply(Pn,p))}f=T}if(p=!1,f!==2)continue}}if(f===1){Qo(i,0),Nr(i,r,0,!0);break}e:{switch(u=i,p=f,p){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Nr(u,r,Yn,!Cr);break e;case 2:Pn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(f=Sf+300-Tn(),10<f)){if(Nr(u,r,Yn,!Cr),qi(u,0,!0)!==0)break e;Us=r,u.timeoutHandle=BS(hS.bind(null,u,o,Pn,wf,ag,r,Yn,Fa,Yo,Cr,p,"Throttled",-0,0),f);break e}hS(u,o,Pn,wf,ag,r,Yn,Fa,Yo,Cr,p,null,-0,0)}}break}while(!0);ls(i)}function hS(i,r,o,u,f,p,T,w,D,q,Z,ne,Y,W){if(i.timeoutHandle=-1,ne=r.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:wi},iS(r,p,ne);var de=(p&62914560)===p?Sf-Tn():(p&4194048)===p?oS-Tn():0;if(de=zN(ne,de),de!==null){Us=p,i.cancelPendingCommit=de(vS.bind(null,i,r,p,o,u,f,T,w,D,Z,ne,null,Y,W)),Nr(i,p,T,!q);return}}vS(i,r,p,o,u,f,T,w,D)}function nN(i){for(var r=i;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],p=f.getSnapshot;f=f.value;try{if(!Bn(p(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Nr(i,r,o,u){r&=~rg,r&=~Fa,i.suspendedLanes|=r,i.pingedLanes&=~r,u&&(i.warmLanes|=r),u=i.expirationTimes;for(var f=r;0<f;){var p=31-Rt(f),T=1<<p;u[p]=-1,f&=~T}o!==0&&_a(i,o,r)}function Cf(){return(Je&6)===0?(zu(0),!1):!0}function cg(){if(Ve!==null){if(nt===0)var i=Ve.return;else i=Ve,Rs=ka=null,Ap(i),Uo=null,Su=0,i=Ve;for(;i!==null;)FT(i.alternate,i),i=i.return;Ve=null}}function Qo(i,r){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,SN(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),Us=0,cg(),ct=i,Ve=o=Cs(i.current,null),Be=r,nt=0,Gn=null,Cr=!1,Go=Ti(i,r),sg=!1,Yo=Yn=rg=Fa=Ar=bt=0,Pn=Uu=null,ag=!1,(r&8)!==0&&(r|=r&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=r;0<u;){var f=31-Rt(u),p=1<<f;r|=i[f],u&=~p}return Vs=r,Gh(),o}function fS(i,r){Ne=null,J.H=xu,r===Vo||r===Zh?(r=IE(),nt=3):r===mp?(r=IE(),nt=4):nt=r===Fp?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Gn=r,Ve===null&&(bt=1,mf(i,ai(r,i.current)))}function dS(){var i=Hn.current;return i===null?!0:(Be&4194048)===Be?ci===null:(Be&62914560)===Be||(Be&536870912)!==0?i===ci:!1}function mS(){var i=J.H;return J.H=xu,i===null?xu:i}function pS(){var i=J.A;return J.A=eN,i}function Af(){bt=4,Cr||(Be&4194048)!==Be&&Hn.current!==null||(Go=!0),(Ar&134217727)===0&&(Fa&134217727)===0||ct===null||Nr(ct,Be,Yn,!1)}function hg(i,r,o){var u=Je;Je|=2;var f=mS(),p=pS();(ct!==i||Be!==r)&&(wf=null,Qo(i,r)),r=!1;var T=bt;e:do try{if(nt!==0&&Ve!==null){var w=Ve,D=Gn;switch(nt){case 8:cg(),T=6;break e;case 3:case 2:case 9:case 6:Hn.current===null&&(r=!0);var q=nt;if(nt=0,Gn=null,Wo(i,w,D,q),o&&Go){T=0;break e}break;default:q=nt,nt=0,Gn=null,Wo(i,w,D,q)}}iN(),T=bt;break}catch(Z){fS(i,Z)}while(!0);return r&&i.shellSuspendCounter++,Rs=ka=null,Je=u,J.H=f,J.A=p,Ve===null&&(ct=null,Be=0,Gh()),T}function iN(){for(;Ve!==null;)gS(Ve)}function sN(i,r){var o=Je;Je|=2;var u=mS(),f=pS();ct!==i||Be!==r?(wf=null,bf=Tn()+500,Qo(i,r)):Go=Ti(i,r);e:do try{if(nt!==0&&Ve!==null){r=Ve;var p=Gn;t:switch(nt){case 1:nt=0,Gn=null,Wo(i,r,p,1);break;case 2:case 9:if(AE(p)){nt=0,Gn=null,_S(r);break}r=function(){nt!==2&&nt!==9||ct!==i||(nt=7),ls(i)},p.then(r,r);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:AE(p)?(nt=0,Gn=null,_S(r)):(nt=0,Gn=null,Wo(i,r,p,7));break;case 5:var T=null;switch(Ve.tag){case 26:T=Ve.memoizedState;case 5:case 27:var w=Ve;if(T?nb(T):w.stateNode.complete){nt=0,Gn=null;var D=w.sibling;if(D!==null)Ve=D;else{var q=w.return;q!==null?(Ve=q,Rf(q)):Ve=null}break t}}nt=0,Gn=null,Wo(i,r,p,5);break;case 6:nt=0,Gn=null,Wo(i,r,p,6);break;case 8:cg(),bt=6;break e;default:throw Error(s(462))}}rN();break}catch(Z){fS(i,Z)}while(!0);return Rs=ka=null,J.H=u,J.A=f,Je=o,Ve!==null?0:(ct=null,Be=0,Gh(),bt)}function rN(){for(;Ve!==null&&!Bm();)gS(Ve)}function gS(i){var r=zT(i.alternate,i,Vs);i.memoizedProps=i.pendingProps,r===null?Rf(i):Ve=r}function _S(i){var r=i,o=r.alternate;switch(r.tag){case 15:case 0:r=PT(o,r,r.pendingProps,r.type,void 0,Be);break;case 11:r=PT(o,r,r.pendingProps,r.type.render,r.ref,Be);break;case 5:Ap(r);default:FT(o,r),r=Ve=pE(r,Vs),r=zT(o,r,Vs)}i.memoizedProps=i.pendingProps,r===null?Rf(i):Ve=r}function Wo(i,r,o,u){Rs=ka=null,Ap(r),Uo=null,Su=0;var f=r.return;try{if(K1(i,f,r,o,Be)){bt=1,mf(i,ai(o,i.current)),Ve=null;return}}catch(p){if(f!==null)throw Ve=f,p;bt=1,mf(i,ai(o,i.current)),Ve=null;return}r.flags&32768?(Ge||u===1?i=!0:Go||(Be&536870912)!==0?i=!1:(Cr=i=!0,(u===2||u===9||u===3||u===6)&&(u=Hn.current,u!==null&&u.tag===13&&(u.flags|=16384))),yS(r,i)):Rf(r)}function Rf(i){var r=i;do{if((r.flags&32768)!==0){yS(r,Cr);return}i=r.return;var o=X1(r.alternate,r,Vs);if(o!==null){Ve=o;return}if(r=r.sibling,r!==null){Ve=r;return}Ve=r=i}while(r!==null);bt===0&&(bt=5)}function yS(i,r){do{var o=$1(i.alternate,i);if(o!==null){o.flags&=32767,Ve=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(i=i.sibling,i!==null)){Ve=i;return}Ve=i=o}while(i!==null);bt=6,Ve=null}function vS(i,r,o,u,f,p,T,w,D){i.cancelPendingCommit=null;do If();while(Yt!==0);if((Je&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(p=r.lanes|r.childLanes,p|=Zm,qm(i,o,p,T,w,D),i===ct&&(Ve=ct=null,Be=0),Ko=r,Ir=i,Us=o,og=p,lg=f,lS=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,uN(rr,function(){return wS(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=J.T,J.T=null,f=se.p,se.p=2,T=Je,Je|=4;try{J1(i,r,o)}finally{Je=T,se.p=f,J.T=u}}Yt=1,ES(),TS(),SS()}}function ES(){if(Yt===1){Yt=0;var i=Ir,r=Ko,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=J.T,J.T=null;var u=se.p;se.p=2;var f=Je;Je|=4;try{eS(r,i);var p=bg,T=aE(i.containerInfo),w=p.focusedElem,D=p.selectionRange;if(T!==w&&w&&w.ownerDocument&&rE(w.ownerDocument.documentElement,w)){if(D!==null&&Qm(w)){var q=D.start,Z=D.end;if(Z===void 0&&(Z=q),"selectionStart"in w)w.selectionStart=q,w.selectionEnd=Math.min(Z,w.value.length);else{var ne=w.ownerDocument||document,Y=ne&&ne.defaultView||window;if(Y.getSelection){var W=Y.getSelection(),de=w.textContent.length,Te=Math.min(D.start,de),ot=D.end===void 0?Te:Math.min(D.end,de);!W.extend&&Te>ot&&(T=ot,ot=Te,Te=T);var z=sE(w,Te),L=sE(w,ot);if(z&&L&&(W.rangeCount!==1||W.anchorNode!==z.node||W.anchorOffset!==z.offset||W.focusNode!==L.node||W.focusOffset!==L.offset)){var H=ne.createRange();H.setStart(z.node,z.offset),W.removeAllRanges(),Te>ot?(W.addRange(H),W.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),W.addRange(H))}}}}for(ne=[],W=w;W=W.parentNode;)W.nodeType===1&&ne.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ne.length;w++){var te=ne[w];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}zf=!!Sg,bg=Sg=null}finally{Je=f,se.p=u,J.T=o}}i.current=r,Yt=2}}function TS(){if(Yt===2){Yt=0;var i=Ir,r=Ko,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=J.T,J.T=null;var u=se.p;se.p=2;var f=Je;Je|=4;try{WT(i,r.alternate,r)}finally{Je=f,se.p=u,J.T=o}}Yt=3}}function SS(){if(Yt===4||Yt===3){Yt=0,_h();var i=Ir,r=Ko,o=Us,u=lS;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Yt=5:(Yt=0,Ko=Ir=null,bS(i,i.pendingLanes));var f=i.pendingLanes;if(f===0&&(Rr=null),Ts(o),r=r.stateNode,rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(Ei,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=J.T,f=se.p,se.p=2,J.T=null;try{for(var p=i.onRecoverableError,T=0;T<u.length;T++){var w=u[T];p(w.value,{componentStack:w.stack})}}finally{J.T=r,se.p=f}}(Us&3)!==0&&If(),ls(i),f=i.pendingLanes,(o&261930)!==0&&(f&42)!==0?i===ug?ju++:(ju=0,ug=i):ju=0,zu(0)}}function bS(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,Eu(r)))}function If(){return ES(),TS(),SS(),wS()}function wS(){if(Yt!==5)return!1;var i=Ir,r=og;og=0;var o=Ts(Us),u=J.T,f=se.p;try{se.p=32>o?32:o,J.T=null,o=lg,lg=null;var p=Ir,T=Us;if(Yt=0,Ko=Ir=null,Us=0,(Je&6)!==0)throw Error(s(331));var w=Je;if(Je|=4,rS(p.current),nS(p,p.current,T,o),Je=w,zu(0,!1),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(Ei,p)}catch{}return!0}finally{se.p=f,J.T=u,bS(i,r)}}function CS(i,r,o){r=ai(o,r),r=Bp(i.stateNode,r,2),i=Tr(i,r,2),i!==null&&(ga(i,2),ls(i))}function it(i,r,o){if(i.tag===3)CS(i,i,o);else for(;r!==null;){if(r.tag===3){CS(r,i,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Rr===null||!Rr.has(u))){i=ai(o,i),o=AT(2),u=Tr(r,o,2),u!==null&&(RT(o,u,r,i),ga(u,2),ls(u));break}}r=r.return}}function fg(i,r,o){var u=i.pingCache;if(u===null){u=i.pingCache=new tN;var f=new Set;u.set(r,f)}else f=u.get(r),f===void 0&&(f=new Set,u.set(r,f));f.has(o)||(sg=!0,f.add(o),i=aN.bind(null,i,r,o),r.then(i,i))}function aN(i,r,o){var u=i.pingCache;u!==null&&u.delete(r),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,ct===i&&(Be&o)===o&&(bt===4||bt===3&&(Be&62914560)===Be&&300>Tn()-Sf?(Je&2)===0&&Qo(i,0):rg|=o,Yo===Be&&(Yo=0)),ls(i)}function AS(i,r){r===0&&(r=bh()),i=xa(i,r),i!==null&&(ga(i,r),ls(i))}function oN(i){var r=i.memoizedState,o=0;r!==null&&(o=r.retryLane),AS(i,o)}function lN(i,r){var o=0;switch(i.tag){case 31:case 13:var u=i.stateNode,f=i.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(r),AS(i,o)}function uN(i,r){return Gt(i,r)}var Nf=null,Xo=null,dg=!1,xf=!1,mg=!1,xr=0;function ls(i){i!==Xo&&i.next===null&&(Xo===null?Nf=Xo=i:Xo=Xo.next=i),xf=!0,dg||(dg=!0,hN())}function zu(i,r){if(!mg&&xf){mg=!0;do for(var o=!1,u=Nf;u!==null;){if(i!==0){var f=u.pendingLanes;if(f===0)var p=0;else{var T=u.suspendedLanes,w=u.pingedLanes;p=(1<<31-Rt(42|i)+1)-1,p&=f&~(T&~w),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,xS(u,p))}else p=Be,p=qi(u,u===ct?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Ti(u,p)||(o=!0,xS(u,p));u=u.next}while(o);mg=!1}}function cN(){RS()}function RS(){xf=dg=!1;var i=0;xr!==0&&TN()&&(i=xr);for(var r=Tn(),o=null,u=Nf;u!==null;){var f=u.next,p=IS(u,r);p===0?(u.next=null,o===null?Nf=f:o.next=f,f===null&&(Xo=o)):(o=u,(i!==0||(p&3)!==0)&&(xf=!0)),u=f}Yt!==0&&Yt!==5||zu(i),xr!==0&&(xr=0)}function IS(i,r){for(var o=i.suspendedLanes,u=i.pingedLanes,f=i.expirationTimes,p=i.pendingLanes&-62914561;0<p;){var T=31-Rt(p),w=1<<T,D=f[T];D===-1?((w&o)===0||(w&u)!==0)&&(f[T]=Hm(w,r)):D<=r&&(i.expiredLanes|=w),p&=~w}if(r=ct,o=Be,o=qi(i,i===r?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,o===0||i===r&&(nt===2||nt===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&sr(u),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||Ti(i,o)){if(r=o&-o,r===i.callbackPriority)return r;switch(u!==null&&sr(u),Ts(o)){case 2:case 8:o=Xl;break;case 32:o=rr;break;case 268435456:o=yh;break;default:o=rr}return u=NS.bind(null,i),o=Gt(o,u),i.callbackPriority=r,i.callbackNode=o,r}return u!==null&&u!==null&&sr(u),i.callbackPriority=2,i.callbackNode=null,2}function NS(i,r){if(Yt!==0&&Yt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(If()&&i.callbackNode!==o)return null;var u=Be;return u=qi(i,i===ct?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(cS(i,u,r),IS(i,Tn()),i.callbackNode!=null&&i.callbackNode===o?NS.bind(null,i):null)}function xS(i,r){if(If())return null;cS(i,r,!0)}function hN(){bN(function(){(Je&6)!==0?Gt(Wl,cN):RS()})}function pg(){if(xr===0){var i=Mo;i===0&&(i=Fi,Fi<<=1,(Fi&261888)===0&&(Fi=256)),xr=i}return xr}function OS(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Eo(""+i)}function DS(i,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,i.id&&o.setAttribute("form",i.id),r.parentNode.insertBefore(o,r),i=new FormData(i),o.parentNode.removeChild(o),i}function fN(i,r,o,u,f){if(r==="submit"&&o&&o.stateNode===f){var p=OS((f[$t]||null).action),T=u.submitter;T&&(r=(r=T[$t]||null)?OS(r.formAction):T.getAttribute("formAction"),r!==null&&(p=r,T=null));var w=new ts("action","action",null,u,f);i.push({event:w,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(xr!==0){var D=T?DS(f,T):new FormData(f);Mp(o,{pending:!0,data:D,method:f.method,action:p},null,D)}}else typeof p=="function"&&(w.preventDefault(),D=T?DS(f,T):new FormData(f),Mp(o,{pending:!0,data:D,method:f.method,action:p},p,D))},currentTarget:f}]})}}for(var gg=0;gg<Jm.length;gg++){var _g=Jm[gg],dN=_g.toLowerCase(),mN=_g[0].toUpperCase()+_g.slice(1);Ni(dN,"on"+mN)}Ni(uE,"onAnimationEnd"),Ni(cE,"onAnimationIteration"),Ni(hE,"onAnimationStart"),Ni("dblclick","onDoubleClick"),Ni("focusin","onFocus"),Ni("focusout","onBlur"),Ni(x1,"onTransitionRun"),Ni(O1,"onTransitionStart"),Ni(D1,"onTransitionCancel"),Ni(fE,"onTransitionEnd"),$i("onMouseEnter",["mouseout","mouseover"]),$i("onMouseLeave",["mouseout","mouseover"]),$i("onPointerEnter",["pointerout","pointerover"]),$i("onPointerLeave",["pointerout","pointerover"]),Xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bu));function kS(i,r){r=(r&4)!==0;for(var o=0;o<i.length;o++){var u=i[o],f=u.event;u=u.listeners;e:{var p=void 0;if(r)for(var T=u.length-1;0<=T;T--){var w=u[T],D=w.instance,q=w.currentTarget;if(w=w.listener,D!==p&&f.isPropagationStopped())break e;p=w,f.currentTarget=q;try{p(f)}catch(Z){qh(Z)}f.currentTarget=null,p=D}else for(T=0;T<u.length;T++){if(w=u[T],D=w.instance,q=w.currentTarget,w=w.listener,D!==p&&f.isPropagationStopped())break e;p=w,f.currentTarget=q;try{p(f)}catch(Z){qh(Z)}f.currentTarget=null,p=D}}}}function Ue(i,r){var o=r[po];o===void 0&&(o=r[po]=new Set);var u=i+"__bubble";o.has(u)||(PS(r,i,2,!1),o.add(u))}function yg(i,r,o){var u=0;r&&(u|=4),PS(o,i,u,r)}var Of="_reactListening"+Math.random().toString(36).slice(2);function vg(i){if(!i[Of]){i[Of]=!0,Zl.forEach(function(o){o!=="selectionchange"&&(pN.has(o)||yg(o,!1,i),yg(o,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Of]||(r[Of]=!0,yg("selectionchange",!1,r))}}function PS(i,r,o,u){switch(ub(r)){case 2:var f=HN;break;case 8:f=qN;break;default:f=Pg}o=f.bind(null,r,o,i),f=void 0,!Sa||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),u?f!==void 0?i.addEventListener(r,o,{capture:!0,passive:f}):i.addEventListener(r,o,!0):f!==void 0?i.addEventListener(r,o,{passive:f}):i.addEventListener(r,o,!1)}function Eg(i,r,o,u,f){var p=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var w=u.stateNode.containerInfo;if(w===f)break;if(T===4)for(T=u.return;T!==null;){var D=T.tag;if((D===3||D===4)&&T.stateNode.containerInfo===f)return;T=T.return}for(;w!==null;){if(T=Qi(w),T===null)return;if(D=T.tag,D===5||D===6||D===26||D===27){u=p=T;continue e}w=w.parentNode}}u=u.return}hr(function(){var q=p,Z=ni(o),ne=[];e:{var Y=dE.get(i);if(Y!==void 0){var W=ts,de=i;switch(i){case"keypress":if(wa(o)===0)break e;case"keydown":case"keyup":W=Bh;break;case"focusin":de="focus",W=Aa;break;case"focusout":de="blur",W=Aa;break;case"beforeblur":case"afterblur":W=Aa;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=fu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Dh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=_;break;case uE:case cE:case hE:W=Ph;break;case fE:W=C;break;case"scroll":case"scrollend":W=hu;break;case"wheel":W=Q;break;case"copy":case"cut":case"paste":W=Mh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=ws;break;case"toggle":case"beforetoggle":W=Ie}var Te=(r&4)!==0,ot=!Te&&(i==="scroll"||i==="scrollend"),z=Te?Y!==null?Y+"Capture":null:Y;Te=[];for(var L=q,H;L!==null;){var te=L;if(H=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||H===null||z===null||(te=Ci(L,z),te!=null&&Te.push(Fu(L,te,H))),ot)break;L=L.return}0<Te.length&&(Y=new W(Y,de,null,o,Z),ne.push({event:Y,listeners:Te}))}}if((r&7)===0){e:{if(Y=i==="mouseover"||i==="pointerover",W=i==="mouseout"||i==="pointerout",Y&&o!==lu&&(de=o.relatedTarget||o.fromElement)&&(Qi(de)||de[Yi]))break e;if((W||Y)&&(Y=Z.window===Z?Z:(Y=Z.ownerDocument)?Y.defaultView||Y.parentWindow:window,W?(de=o.relatedTarget||o.toElement,W=q,de=de?Qi(de):null,de!==null&&(ot=l(de),Te=de.tag,de!==ot||Te!==5&&Te!==27&&Te!==6)&&(de=null)):(W=null,de=q),W!==de)){if(Te=fu,te="onMouseLeave",z="onMouseEnter",L="mouse",(i==="pointerout"||i==="pointerover")&&(Te=ws,te="onPointerLeave",z="onPointerEnter",L="pointer"),ot=W==null?Y:jn(W),H=de==null?Y:jn(de),Y=new Te(te,L+"leave",W,o,Z),Y.target=ot,Y.relatedTarget=H,te=null,Qi(Z)===q&&(Te=new Te(z,L+"enter",de,o,Z),Te.target=H,Te.relatedTarget=ot,te=Te),ot=te,W&&de)t:{for(Te=gN,z=W,L=de,H=0,te=z;te;te=Te(te))H++;te=0;for(var ge=L;ge;ge=Te(ge))te++;for(;0<H-te;)z=Te(z),H--;for(;0<te-H;)L=Te(L),te--;for(;H--;){if(z===L||L!==null&&z===L.alternate){Te=z;break t}z=Te(z),L=Te(L)}Te=null}else Te=null;W!==null&&MS(ne,Y,W,Te,!1),de!==null&&ot!==null&&MS(ne,ot,de,Te,!0)}}e:{if(Y=q?jn(q):window,W=Y.nodeName&&Y.nodeName.toLowerCase(),W==="select"||W==="input"&&Y.type==="file")var Ke=Jv;else if(Xv(Y))if(Zv)Ke=R1;else{Ke=C1;var me=w1}else W=Y.nodeName,!W||W.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?q&&vo(q.elementType)&&(Ke=Jv):Ke=A1;if(Ke&&(Ke=Ke(i,q))){$v(ne,Ke,o,Z);break e}me&&me(i,Y,q),i==="focusout"&&q&&Y.type==="number"&&q.memoizedProps.value!=null&&ru(Y,"number",Y.value)}switch(me=q?jn(q):window,i){case"focusin":(Xv(me)||me.contentEditable==="true")&&(Ro=me,Wm=q,_u=null);break;case"focusout":_u=Wm=Ro=null;break;case"mousedown":Xm=!0;break;case"contextmenu":case"mouseup":case"dragend":Xm=!1,oE(ne,o,Z);break;case"selectionchange":if(N1)break;case"keydown":case"keyup":oE(ne,o,Z)}var xe;if($e)e:{switch(i){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else Ao?Ra(i,o)&&(Fe="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(Fe="onCompositionStart");Fe&&(ss&&o.locale!=="ko"&&(Ao||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&Ao&&(xe=cu()):(es=Z,uu="value"in es?es.value:es.textContent,Ao=!0)),me=Df(q,Fe),0<me.length&&(Fe=new is(Fe,i,null,o,Z),ne.push({event:Fe,listeners:me}),xe?Fe.data=xe:(xe=Co(o),xe!==null&&(Fe.data=xe)))),(xe=si?E1(i,o):T1(i,o))&&(Fe=Df(q,"onBeforeInput"),0<Fe.length&&(me=new is("onBeforeInput","beforeinput",null,o,Z),ne.push({event:me,listeners:Fe}),me.data=xe)),fN(ne,i,q,o,Z)}kS(ne,r)})}function Fu(i,r,o){return{instance:i,listener:r,currentTarget:o}}function Df(i,r){for(var o=r+"Capture",u=[];i!==null;){var f=i,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Ci(i,o),f!=null&&u.unshift(Fu(i,f,p)),f=Ci(i,r),f!=null&&u.push(Fu(i,f,p))),i.tag===3)return u;i=i.return}return[]}function gN(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function MS(i,r,o,u,f){for(var p=r._reactName,T=[];o!==null&&o!==u;){var w=o,D=w.alternate,q=w.stateNode;if(w=w.tag,D!==null&&D===u)break;w!==5&&w!==26&&w!==27||q===null||(D=q,f?(q=Ci(o,p),q!=null&&T.unshift(Fu(o,q,D))):f||(q=Ci(o,p),q!=null&&T.push(Fu(o,q,D)))),o=o.return}T.length!==0&&i.push({event:r,listeners:T})}var _N=/\r\n?/g,yN=/\u0000|\uFFFD/g;function LS(i){return(typeof i=="string"?i:""+i).replace(_N,`
`).replace(yN,"")}function VS(i,r){return r=LS(r),LS(i)===r}function at(i,r,o,u,f,p){switch(o){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||xn(i,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&xn(i,""+u);break;case"className":zn(i,"class",u);break;case"tabIndex":zn(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":zn(i,o,u);break;case"style":ou(i,u,p);break;case"data":if(r!=="object"){zn(i,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||o!=="href")){i.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Eo(""+u),i.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(r!=="input"&&at(i,r,"name",f.name,f,null),at(i,r,"formEncType",f.formEncType,f,null),at(i,r,"formMethod",f.formMethod,f,null),at(i,r,"formTarget",f.formTarget,f,null)):(at(i,r,"encType",f.encType,f,null),at(i,r,"method",f.method,f,null),at(i,r,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Eo(""+u),i.setAttribute(o,u);break;case"onClick":u!=null&&(i.onclick=wi);break;case"onScroll":u!=null&&Ue("scroll",i);break;case"onScrollEnd":u!=null&&Ue("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(s(60));i.innerHTML=o}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}o=Eo(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""+u):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":u===!0?i.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,u):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(o,u):i.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(o):i.setAttribute(o,u);break;case"popover":Ue("beforetoggle",i),Ue("toggle",i),_o(i,"popover",u);break;case"xlinkActuate":Lt(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Lt(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Lt(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Lt(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Lt(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Lt(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Lt(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Lt(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Lt(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":_o(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Oh.get(o)||o,_o(i,o,u))}}function Tg(i,r,o,u,f,p){switch(o){case"style":ou(i,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(s(60));i.innerHTML=o}}break;case"children":typeof u=="string"?xn(i,u):(typeof u=="number"||typeof u=="bigint")&&xn(i,""+u);break;case"onScroll":u!=null&&Ue("scroll",i);break;case"onScrollEnd":u!=null&&Ue("scrollend",i);break;case"onClick":u!=null&&(i.onclick=wi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!eu.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),p=i[$t]||null,p=p!=null?p[o]:null,typeof p=="function"&&i.removeEventListener(r,p,f),typeof u=="function")){typeof p!="function"&&p!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(r,u,f);break e}o in i?i[o]=u:u===!0?i.setAttribute(o,""):_o(i,o,u)}}}function cn(i,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",i),Ue("load",i);var u=!1,f=!1,p;for(p in o)if(o.hasOwnProperty(p)){var T=o[p];if(T!=null)switch(p){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:at(i,r,p,T,o,null)}}f&&at(i,r,"srcSet",o.srcSet,o,null),u&&at(i,r,"src",o.src,o,null);return;case"input":Ue("invalid",i);var w=p=T=f=null,D=null,q=null;for(u in o)if(o.hasOwnProperty(u)){var Z=o[u];if(Z!=null)switch(u){case"name":f=Z;break;case"type":T=Z;break;case"checked":D=Z;break;case"defaultChecked":q=Z;break;case"value":p=Z;break;case"defaultValue":w=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,r));break;default:at(i,r,u,Z,o,null)}}Ih(i,p,w,D,q,T,f,!1);return;case"select":Ue("invalid",i),u=T=p=null;for(f in o)if(o.hasOwnProperty(f)&&(w=o[f],w!=null))switch(f){case"value":p=w;break;case"defaultValue":T=w;break;case"multiple":u=w;default:at(i,r,f,w,o,null)}r=p,o=T,i.multiple=!!u,r!=null?or(i,!!u,r,!1):o!=null&&or(i,!!u,o,!0);return;case"textarea":Ue("invalid",i),p=f=u=null;for(T in o)if(o.hasOwnProperty(T)&&(w=o[T],w!=null))switch(T){case"value":u=w;break;case"defaultValue":f=w;break;case"children":p=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:at(i,r,T,w,o,null)}lr(i,u,f,p);return;case"option":for(D in o)if(o.hasOwnProperty(D)&&(u=o[D],u!=null))switch(D){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:at(i,r,D,u,o,null)}return;case"dialog":Ue("beforetoggle",i),Ue("toggle",i),Ue("cancel",i),Ue("close",i);break;case"iframe":case"object":Ue("load",i);break;case"video":case"audio":for(u=0;u<Bu.length;u++)Ue(Bu[u],i);break;case"image":Ue("error",i),Ue("load",i);break;case"details":Ue("toggle",i);break;case"embed":case"source":case"link":Ue("error",i),Ue("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in o)if(o.hasOwnProperty(q)&&(u=o[q],u!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:at(i,r,q,u,o,null)}return;default:if(vo(r)){for(Z in o)o.hasOwnProperty(Z)&&(u=o[Z],u!==void 0&&Tg(i,r,Z,u,o,void 0));return}}for(w in o)o.hasOwnProperty(w)&&(u=o[w],u!=null&&at(i,r,w,u,o,null))}function vN(i,r,o,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,T=null,w=null,D=null,q=null,Z=null;for(W in o){var ne=o[W];if(o.hasOwnProperty(W)&&ne!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":D=ne;default:u.hasOwnProperty(W)||at(i,r,W,null,u,ne)}}for(var Y in u){var W=u[Y];if(ne=o[Y],u.hasOwnProperty(Y)&&(W!=null||ne!=null))switch(Y){case"type":p=W;break;case"name":f=W;break;case"checked":q=W;break;case"defaultChecked":Z=W;break;case"value":T=W;break;case"defaultValue":w=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,r));break;default:W!==ne&&at(i,r,Y,W,u,ne)}}yo(i,T,w,D,q,Z,p,f);return;case"select":W=T=w=Y=null;for(p in o)if(D=o[p],o.hasOwnProperty(p)&&D!=null)switch(p){case"value":break;case"multiple":W=D;default:u.hasOwnProperty(p)||at(i,r,p,null,u,D)}for(f in u)if(p=u[f],D=o[f],u.hasOwnProperty(f)&&(p!=null||D!=null))switch(f){case"value":Y=p;break;case"defaultValue":w=p;break;case"multiple":T=p;default:p!==D&&at(i,r,f,p,u,D)}r=w,o=T,u=W,Y!=null?or(i,!!o,Y,!1):!!u!=!!o&&(r!=null?or(i,!!o,r,!0):or(i,!!o,o?[]:"",!1));return;case"textarea":W=Y=null;for(w in o)if(f=o[w],o.hasOwnProperty(w)&&f!=null&&!u.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:at(i,r,w,null,u,f)}for(T in u)if(f=u[T],p=o[T],u.hasOwnProperty(T)&&(f!=null||p!=null))switch(T){case"value":Y=f;break;case"defaultValue":W=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==p&&at(i,r,T,f,u,p)}Nh(i,Y,W);return;case"option":for(var de in o)if(Y=o[de],o.hasOwnProperty(de)&&Y!=null&&!u.hasOwnProperty(de))switch(de){case"selected":i.selected=!1;break;default:at(i,r,de,null,u,Y)}for(D in u)if(Y=u[D],W=o[D],u.hasOwnProperty(D)&&Y!==W&&(Y!=null||W!=null))switch(D){case"selected":i.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:at(i,r,D,Y,u,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in o)Y=o[Te],o.hasOwnProperty(Te)&&Y!=null&&!u.hasOwnProperty(Te)&&at(i,r,Te,null,u,Y);for(q in u)if(Y=u[q],W=o[q],u.hasOwnProperty(q)&&Y!==W&&(Y!=null||W!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,r));break;default:at(i,r,q,Y,u,W)}return;default:if(vo(r)){for(var ot in o)Y=o[ot],o.hasOwnProperty(ot)&&Y!==void 0&&!u.hasOwnProperty(ot)&&Tg(i,r,ot,void 0,u,Y);for(Z in u)Y=u[Z],W=o[Z],!u.hasOwnProperty(Z)||Y===W||Y===void 0&&W===void 0||Tg(i,r,Z,Y,u,W);return}}for(var z in o)Y=o[z],o.hasOwnProperty(z)&&Y!=null&&!u.hasOwnProperty(z)&&at(i,r,z,null,u,Y);for(ne in u)Y=u[ne],W=o[ne],!u.hasOwnProperty(ne)||Y===W||Y==null&&W==null||at(i,r,ne,Y,u,W)}function US(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function EN(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],p=f.transferSize,T=f.initiatorType,w=f.duration;if(p&&w&&US(T)){for(T=0,w=f.responseEnd,u+=1;u<o.length;u++){var D=o[u],q=D.startTime;if(q>w)break;var Z=D.transferSize,ne=D.initiatorType;Z&&US(ne)&&(D=D.responseEnd,T+=Z*(D<w?1:(w-q)/(D-q)))}if(--u,r+=8*(p+T)/(f.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Sg=null,bg=null;function kf(i){return i.nodeType===9?i:i.ownerDocument}function jS(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zS(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function wg(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Cg=null;function TN(){var i=window.event;return i&&i.type==="popstate"?i===Cg?!1:(Cg=i,!0):(Cg=null,!1)}var BS=typeof setTimeout=="function"?setTimeout:void 0,SN=typeof clearTimeout=="function"?clearTimeout:void 0,FS=typeof Promise=="function"?Promise:void 0,bN=typeof queueMicrotask=="function"?queueMicrotask:typeof FS<"u"?function(i){return FS.resolve(null).then(i).catch(wN)}:BS;function wN(i){setTimeout(function(){throw i})}function Or(i){return i==="head"}function HS(i,r){var o=r,u=0;do{var f=o.nextSibling;if(i.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){i.removeChild(f),el(r);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Hu(i.ownerDocument.documentElement);else if(o==="head"){o=i.ownerDocument.head,Hu(o);for(var p=o.firstChild;p;){var T=p.nextSibling,w=p.nodeName;p[Ki]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=T}}else o==="body"&&Hu(i.ownerDocument.body);o=f}while(o);el(r)}function qS(i,r){var o=i;i=0;do{var u=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(i===0)break;i--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||i++;o=u}while(o)}function Ag(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Ag(o),go(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function CN(i,r,o,u){for(;i.nodeType===1;){var f=o;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Ki])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(p=i.getAttribute("rel"),p==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(p!==f.rel||i.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(p=i.getAttribute("src"),(p!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===p)return i}else return i;if(i=hi(i.nextSibling),i===null)break}return null}function AN(i,r,o){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=hi(i.nextSibling),i===null))return null;return i}function GS(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=hi(i.nextSibling),i===null))return null;return i}function Rg(i){return i.data==="$?"||i.data==="$~"}function Ig(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function RN(i,r){var o=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||o.readyState!=="loading")r();else{var u=function(){r(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function hi(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var Ng=null;function YS(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var o=i.data;if(o==="/$"||o==="/&"){if(r===0)return hi(i.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}i=i.nextSibling}return null}function KS(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return i;r--}else o!=="/$"&&o!=="/&"||r++}i=i.previousSibling}return null}function QS(i,r,o){switch(r=kf(o),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Hu(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);go(i)}var fi=new Map,WS=new Set;function Pf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var js=se.d;se.d={f:IN,r:NN,D:xN,C:ON,L:DN,m:kN,X:MN,S:PN,M:LN};function IN(){var i=js.f(),r=Cf();return i||r}function NN(i){var r=ti(i);r!==null&&r.tag===5&&r.type==="form"?fT(r):js.r(i)}var $o=typeof document>"u"?null:document;function XS(i,r,o){var u=$o;if(u&&typeof r=="string"&&r){var f=Nn(r);f='link[rel="'+i+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),WS.has(f)||(WS.add(f),i={rel:i,crossOrigin:o,href:r},u.querySelector(f)===null&&(r=u.createElement("link"),cn(r,"link",i),Mt(r),u.head.appendChild(r)))}}function xN(i){js.D(i),XS("dns-prefetch",i,null)}function ON(i,r){js.C(i,r),XS("preconnect",i,r)}function DN(i,r,o){js.L(i,r,o);var u=$o;if(u&&i&&r){var f='link[rel="preload"][as="'+Nn(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Nn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Nn(o.imageSizes)+'"]')):f+='[href="'+Nn(i)+'"]';var p=f;switch(r){case"style":p=Jo(i);break;case"script":p=Zo(i)}fi.has(p)||(i=E({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:i,as:r},o),fi.set(p,i),u.querySelector(f)!==null||r==="style"&&u.querySelector(qu(p))||r==="script"&&u.querySelector(Gu(p))||(r=u.createElement("link"),cn(r,"link",i),Mt(r),u.head.appendChild(r)))}}function kN(i,r){js.m(i,r);var o=$o;if(o&&i){var u=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+Nn(u)+'"][href="'+Nn(i)+'"]',p=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Zo(i)}if(!fi.has(p)&&(i=E({rel:"modulepreload",href:i},r),fi.set(p,i),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Gu(p)))return}u=o.createElement("link"),cn(u,"link",i),Mt(u),o.head.appendChild(u)}}}function PN(i,r,o){js.S(i,r,o);var u=$o;if(u&&i){var f=Wi(u).hoistableStyles,p=Jo(i);r=r||"default";var T=f.get(p);if(!T){var w={loading:0,preload:null};if(T=u.querySelector(qu(p)))w.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":r},o),(o=fi.get(p))&&xg(i,o);var D=T=u.createElement("link");Mt(D),cn(D,"link",i),D._p=new Promise(function(q,Z){D.onload=q,D.onerror=Z}),D.addEventListener("load",function(){w.loading|=1}),D.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Mf(T,r,u)}T={type:"stylesheet",instance:T,count:1,state:w},f.set(p,T)}}}function MN(i,r){js.X(i,r);var o=$o;if(o&&i){var u=Wi(o).hoistableScripts,f=Zo(i),p=u.get(f);p||(p=o.querySelector(Gu(f)),p||(i=E({src:i,async:!0},r),(r=fi.get(f))&&Og(i,r),p=o.createElement("script"),Mt(p),cn(p,"link",i),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function LN(i,r){js.M(i,r);var o=$o;if(o&&i){var u=Wi(o).hoistableScripts,f=Zo(i),p=u.get(f);p||(p=o.querySelector(Gu(f)),p||(i=E({src:i,async:!0,type:"module"},r),(r=fi.get(f))&&Og(i,r),p=o.createElement("script"),Mt(p),cn(p,"link",i),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function $S(i,r,o,u){var f=(f=ve.current)?Pf(f):null;if(!f)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=Jo(o.href),o=Wi(f).hoistableStyles,u=o.get(r),u||(u={type:"style",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=Jo(o.href);var p=Wi(f).hoistableStyles,T=p.get(i);if(T||(f=f.ownerDocument||f,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(i,T),(p=f.querySelector(qu(i)))&&!p._p&&(T.instance=p,T.state.loading=5),fi.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},fi.set(i,o),p||VN(f,i,o,T.state))),r&&u===null)throw Error(s(528,""));return T}if(r&&u!==null)throw Error(s(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Zo(o),o=Wi(f).hoistableScripts,u=o.get(r),u||(u={type:"script",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Jo(i){return'href="'+Nn(i)+'"'}function qu(i){return'link[rel="stylesheet"]['+i+"]"}function JS(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function VN(i,r,o,u){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=i.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),cn(r,"link",o),Mt(r),i.head.appendChild(r))}function Zo(i){return'[src="'+Nn(i)+'"]'}function Gu(i){return"script[async]"+i}function ZS(i,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var u=i.querySelector('style[data-href~="'+Nn(o.href)+'"]');if(u)return r.instance=u,Mt(u),u;var f=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),Mt(u),cn(u,"style",f),Mf(u,o.precedence,i),r.instance=u;case"stylesheet":f=Jo(o.href);var p=i.querySelector(qu(f));if(p)return r.state.loading|=4,r.instance=p,Mt(p),p;u=JS(o),(f=fi.get(f))&&xg(u,f),p=(i.ownerDocument||i).createElement("link"),Mt(p);var T=p;return T._p=new Promise(function(w,D){T.onload=w,T.onerror=D}),cn(p,"link",u),r.state.loading|=4,Mf(p,o.precedence,i),r.instance=p;case"script":return p=Zo(o.src),(f=i.querySelector(Gu(p)))?(r.instance=f,Mt(f),f):(u=o,(f=fi.get(p))&&(u=E({},o),Og(u,f)),i=i.ownerDocument||i,f=i.createElement("script"),Mt(f),cn(f,"link",u),i.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,Mf(u,o.precedence,i));return r.instance}function Mf(i,r,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,p=f,T=0;T<u.length;T++){var w=u[T];if(w.dataset.precedence===r)p=w;else if(p!==f)break}p?p.parentNode.insertBefore(i,p.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(i,r.firstChild))}function xg(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function Og(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Lf=null;function eb(i,r,o){if(Lf===null){var u=new Map,f=Lf=new Map;f.set(o,u)}else f=Lf,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(i))return u;for(u.set(i,null),o=o.getElementsByTagName(i),f=0;f<o.length;f++){var p=o[f];if(!(p[Ki]||p[Pt]||i==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var T=p.getAttribute(r)||"";T=i+T;var w=u.get(T);w?w.push(p):u.set(T,[p])}}return u}function tb(i,r,o){i=i.ownerDocument||i,i.head.insertBefore(o,r==="title"?i.querySelector("head > title"):null)}function UN(i,r,o){if(o===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function nb(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function jN(i,r,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=Jo(u.href),p=r.querySelector(qu(f));if(p){r=p._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Vf.bind(i),r.then(i,i)),o.state.loading|=4,o.instance=p,Mt(p);return}p=r.ownerDocument||r,u=JS(u),(f=fi.get(f))&&xg(u,f),p=p.createElement("link"),Mt(p);var T=p;T._p=new Promise(function(w,D){T.onload=w,T.onerror=D}),cn(p,"link",u),o.instance=p}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(i.count++,o=Vf.bind(i),r.addEventListener("load",o),r.addEventListener("error",o))}}var Dg=0;function zN(i,r){return i.stylesheets&&i.count===0&&jf(i,i.stylesheets),0<i.count||0<i.imgCount?function(o){var u=setTimeout(function(){if(i.stylesheets&&jf(i,i.stylesheets),i.unsuspend){var p=i.unsuspend;i.unsuspend=null,p()}},6e4+r);0<i.imgBytes&&Dg===0&&(Dg=62500*EN());var f=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&jf(i,i.stylesheets),i.unsuspend)){var p=i.unsuspend;i.unsuspend=null,p()}},(i.imgBytes>Dg?50:800)+r);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function Vf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)jf(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Uf=null;function jf(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Uf=new Map,r.forEach(BN,i),Uf=null,Vf.call(i))}function BN(i,r){if(!(r.state.loading&4)){var o=Uf.get(i);if(o)var u=o.get(null);else{o=new Map,Uf.set(i,o);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var T=f[p];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(o.set(T.dataset.precedence,T),u=T)}u&&o.set(null,u)}f=r.instance,T=f.getAttribute("data-precedence"),p=o.get(T)||u,p===u&&o.set(null,f),o.set(T,f),this.count++,u=Vf.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),p?p.parentNode.insertBefore(f,p.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),r.state.loading|=4}}var Yu={$$typeof:ee,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function FN(i,r,o,u,f,p,T,w,D){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gi(0),this.hiddenUpdates=Gi(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function ib(i,r,o,u,f,p,T,w,D,q,Z,ne){return i=new FN(i,r,o,T,D,q,Z,ne,w),r=1,p===!0&&(r|=24),p=Fn(3,null,null,r),i.current=p,p.stateNode=i,r=hp(),r.refCount++,i.pooledCache=r,r.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:r},pp(p),i}function sb(i){return i?(i=xo,i):xo}function rb(i,r,o,u,f,p){f=sb(f),u.context===null?u.context=f:u.pendingContext=f,u=Er(r),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=Tr(i,u,r),o!==null&&(Mn(o,i,r),wu(o,i,r))}function ab(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<r?o:r}}function kg(i,r){ab(i,r),(i=i.alternate)&&ab(i,r)}function ob(i){if(i.tag===13||i.tag===31){var r=xa(i,67108864);r!==null&&Mn(r,i,67108864),kg(i,67108864)}}function lb(i){if(i.tag===13||i.tag===31){var r=Kn();r=ya(r);var o=xa(i,r);o!==null&&Mn(o,i,r),kg(i,r)}}var zf=!0;function HN(i,r,o,u){var f=J.T;J.T=null;var p=se.p;try{se.p=2,Pg(i,r,o,u)}finally{se.p=p,J.T=f}}function qN(i,r,o,u){var f=J.T;J.T=null;var p=se.p;try{se.p=8,Pg(i,r,o,u)}finally{se.p=p,J.T=f}}function Pg(i,r,o,u){if(zf){var f=Mg(u);if(f===null)Eg(i,r,u,Bf,o),cb(i,u);else if(YN(f,i,r,o,u))u.stopPropagation();else if(cb(i,u),r&4&&-1<GN.indexOf(i)){for(;f!==null;){var p=ti(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var T=Hi(p.pendingLanes);if(T!==0){var w=p;for(w.pendingLanes|=2,w.entangledLanes|=2;T;){var D=1<<31-Rt(T);w.entanglements[1]|=D,T&=~D}ls(p),(Je&6)===0&&(bf=Tn()+500,zu(0))}}break;case 31:case 13:w=xa(p,2),w!==null&&Mn(w,p,2),Cf(),kg(p,2)}if(p=Mg(u),p===null&&Eg(i,r,u,Bf,o),p===f)break;f=p}f!==null&&u.stopPropagation()}else Eg(i,r,u,null,o)}}function Mg(i){return i=ni(i),Lg(i)}var Bf=null;function Lg(i){if(Bf=null,i=Qi(i),i!==null){var r=l(i);if(r===null)i=null;else{var o=r.tag;if(o===13){if(i=c(r),i!==null)return i;i=null}else if(o===31){if(i=d(r),i!==null)return i;i=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Bf=i,null}function ub(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ma()){case Wl:return 2;case Xl:return 8;case rr:case Fm:return 32;case yh:return 268435456;default:return 32}default:return 32}}var Vg=!1,Dr=null,kr=null,Pr=null,Ku=new Map,Qu=new Map,Mr=[],GN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cb(i,r){switch(i){case"focusin":case"focusout":Dr=null;break;case"dragenter":case"dragleave":kr=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":Ku.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qu.delete(r.pointerId)}}function Wu(i,r,o,u,f,p){return i===null||i.nativeEvent!==p?(i={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},r!==null&&(r=ti(r),r!==null&&ob(r)),i):(i.eventSystemFlags|=u,r=i.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),i)}function YN(i,r,o,u,f){switch(r){case"focusin":return Dr=Wu(Dr,i,r,o,u,f),!0;case"dragenter":return kr=Wu(kr,i,r,o,u,f),!0;case"mouseover":return Pr=Wu(Pr,i,r,o,u,f),!0;case"pointerover":var p=f.pointerId;return Ku.set(p,Wu(Ku.get(p)||null,i,r,o,u,f)),!0;case"gotpointercapture":return p=f.pointerId,Qu.set(p,Wu(Qu.get(p)||null,i,r,o,u,f)),!0}return!1}function hb(i){var r=Qi(i.target);if(r!==null){var o=l(r);if(o!==null){if(r=o.tag,r===13){if(r=c(o),r!==null){i.blockedOn=r,Si(i.priority,function(){lb(o)});return}}else if(r===31){if(r=d(o),r!==null){i.blockedOn=r,Si(i.priority,function(){lb(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ff(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var o=Mg(i.nativeEvent);if(o===null){o=i.nativeEvent;var u=new o.constructor(o.type,o);lu=u,o.target.dispatchEvent(u),lu=null}else return r=ti(o),r!==null&&ob(r),i.blockedOn=o,!1;r.shift()}return!0}function fb(i,r,o){Ff(i)&&o.delete(r)}function KN(){Vg=!1,Dr!==null&&Ff(Dr)&&(Dr=null),kr!==null&&Ff(kr)&&(kr=null),Pr!==null&&Ff(Pr)&&(Pr=null),Ku.forEach(fb),Qu.forEach(fb)}function Hf(i,r){i.blockedOn===r&&(i.blockedOn=null,Vg||(Vg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,KN)))}var qf=null;function db(i){qf!==i&&(qf=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){qf===i&&(qf=null);for(var r=0;r<i.length;r+=3){var o=i[r],u=i[r+1],f=i[r+2];if(typeof u!="function"){if(Lg(u||o)===null)continue;break}var p=ti(o);p!==null&&(i.splice(r,3),r-=3,Mp(p,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function el(i){function r(D){return Hf(D,i)}Dr!==null&&Hf(Dr,i),kr!==null&&Hf(kr,i),Pr!==null&&Hf(Pr,i),Ku.forEach(r),Qu.forEach(r);for(var o=0;o<Mr.length;o++){var u=Mr[o];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Mr.length&&(o=Mr[0],o.blockedOn===null);)hb(o),o.blockedOn===null&&Mr.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],p=o[u+1],T=f[$t]||null;if(typeof p=="function")T||db(o);else if(T){var w=null;if(p&&p.hasAttribute("formAction")){if(f=p,T=p[$t]||null)w=T.formAction;else if(Lg(f)!==null)continue}else w=T.action;typeof w=="function"?o[u+1]=w:(o.splice(u,3),u-=3),db(o)}}}function mb(){function i(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(T){return f=T})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function Ug(i){this._internalRoot=i}Gf.prototype.render=Ug.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var o=r.current,u=Kn();rb(o,u,i,r,null,null)},Gf.prototype.unmount=Ug.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;rb(i.current,2,null,i,null,null),Cf(),r[Yi]=null}};function Gf(i){this._internalRoot=i}Gf.prototype.unstable_scheduleHydration=function(i){if(i){var r=wh();i={blockedOn:null,target:i,priority:r};for(var o=0;o<Mr.length&&r!==0&&r<Mr[o].priority;o++);Mr.splice(o,0,i),o===0&&hb(i)}};var pb=e.version;if(pb!=="19.2.0")throw Error(s(527,pb,"19.2.0"));se.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=g(r),i=i!==null?y(i):null,i=i===null?null:i.stateNode,i};var QN={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yf.isDisabled&&Yf.supportsFiber)try{Ei=Yf.inject(QN),rn=Yf}catch{}}return $u.createRoot=function(i,r){if(!a(i))throw Error(s(299));var o=!1,u="",f=ST,p=bT,T=wT;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(p=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError)),r=ib(i,1,!1,null,null,o,u,null,f,p,T,mb),i[Yi]=r.current,vg(i),new Ug(r)},$u.hydrateRoot=function(i,r,o){if(!a(i))throw Error(s(299));var u=!1,f="",p=ST,T=bT,w=wT,D=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.formState!==void 0&&(D=o.formState)),r=ib(i,1,!0,r,o??null,u,f,D,p,T,w,mb),r.context=sb(null),o=r.current,u=Kn(),u=ya(u),f=Er(u),f.callback=null,Tr(o,f,u),o=u,r.current.lanes=o,ga(r,o),ls(r),i[Yi]=r.current,vg(i),new Gf(r)},$u.version="19.2.0",$u}var Cb;function sx(){if(Cb)return Bg.exports;Cb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Bg.exports=ix(),Bg.exports}var rx=sx();var Ab="popstate";function ax(n={}){function e(a,l){let{pathname:c="/",search:d="",hash:m=""}=no(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),v_("",{pathname:c,search:d,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let c=a.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let m=a.location.href,g=m.indexOf("#");d=g===-1?m:m.slice(0,g)}return d+"#"+(typeof l=="string"?l:Cc(l))}function s(a,l){Jn(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return lx(e,t,s,n)}function vt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Jn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ox(){return Math.random().toString(36).substring(2,10)}function Rb(n,e){return{usr:n.state,key:n.key,idx:e}}function v_(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?no(e):e,state:t,key:e&&e.key||s||ox()}}function Cc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function no(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function lx(n,e,t,s={}){let{window:a=document.defaultView,v5Compat:l=!1}=s,c=a.history,d="POP",m=null,g=y();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function y(){return(c.state||{idx:null}).idx}function E(){d="POP";let V=y(),$=V==null?null:V-g;g=V,m&&m({action:d,location:j.location,delta:$})}function b(V,$){d="PUSH";let K=v_(j.location,V,$);t&&t(K,V),g=y()+1;let ee=Rb(K,g),ue=j.createHref(K);try{c.pushState(ee,"",ue)}catch(_e){if(_e instanceof DOMException&&_e.name==="DataCloneError")throw _e;a.location.assign(ue)}l&&m&&m({action:d,location:j.location,delta:1})}function A(V,$){d="REPLACE";let K=v_(j.location,V,$);t&&t(K,V),g=y();let ee=Rb(K,g),ue=j.createHref(K);c.replaceState(ee,"",ue),l&&m&&m({action:d,location:j.location,delta:0})}function I(V){return ux(V)}let j={get action(){return d},get location(){return n(a,c)},listen(V){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(Ab,E),m=V,()=>{a.removeEventListener(Ab,E),m=null}},createHref(V){return e(a,V)},createURL:I,encodeLocation(V){let $=I(V);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:b,replace:A,go(V){return c.go(V)}};return j}function ux(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),vt(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:Cc(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function K0(n,e,t="/"){return cx(n,e,t,!1)}function cx(n,e,t,s){let a=typeof e=="string"?no(e):e,l=Ws(a.pathname||"/",t);if(l==null)return null;let c=Q0(n);hx(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let g=Sx(l);d=Ex(c[m],g,s)}return d}function Q0(n,e=[],t=[],s="",a=!1){let l=(c,d,m=a,g)=>{let y={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(s)&&m)return;vt(y.relativePath.startsWith(s),`Absolute route path "${y.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(s.length)}let E=qs([s,y.relativePath]),b=t.concat(y);c.children&&c.children.length>0&&(vt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),Q0(c.children,e,b,E,m)),!(c.path==null&&!c.index)&&e.push({path:E,score:yx(E,c.index),routesMeta:b})};return n.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let m of W0(c.path))l(c,d,!0,m)}),e}function W0(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let c=W0(s.join("/")),d=[];return d.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&d.push(...c),d.map(m=>n.startsWith("/")&&m===""?"/":m)}function hx(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:vx(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var fx=/^:[\w-]+$/,dx=3,mx=2,px=1,gx=10,_x=-2,Ib=n=>n==="*";function yx(n,e){let t=n.split("/"),s=t.length;return t.some(Ib)&&(s+=_x),e&&(s+=mx),t.filter(a=>!Ib(a)).reduce((a,l)=>a+(fx.test(l)?dx:l===""?px:gx),s)}function vx(n,e){return n.length===e.length&&n.slice(0,-1).every((s,a)=>s===e[a])?n[n.length-1]-e[e.length-1]:0}function Ex(n,e,t=!1){let{routesMeta:s}=n,a={},l="/",c=[];for(let d=0;d<s.length;++d){let m=s[d],g=d===s.length-1,y=l==="/"?e:e.slice(l.length)||"/",E=_d({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},y),b=m.route;if(!E&&g&&t&&!s[s.length-1].route.index&&(E=_d({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!E)return null;Object.assign(a,E.params),c.push({params:a,pathname:qs([l,E.pathname]),pathnameBase:Rx(qs([l,E.pathnameBase])),route:b}),E.pathnameBase!=="/"&&(l=qs([l,E.pathnameBase]))}return c}function _d(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=Tx(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:s.reduce((g,{paramName:y,isOptional:E},b)=>{if(y==="*"){let I=d[b]||"";c=l.slice(0,l.length-I.length).replace(/(.)\/+$/,"$1")}const A=d[b];return E&&!A?g[y]=void 0:g[y]=(A||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function Tx(n,e=!1,t=!0){Jn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(s.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(s.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function Sx(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Jn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ws(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}var bx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wx=n=>bx.test(n);function Cx(n,e="/"){let{pathname:t,search:s="",hash:a=""}=typeof n=="string"?no(n):n,l;if(t)if(wx(t))l=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),Jn(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?l=Nb(t.substring(1),"/"):l=Nb(t,e)}else l=e;return{pathname:l,search:Ix(s),hash:Nx(a)}}function Nb(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Gg(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ax(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ly(n){let e=Ax(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function uy(n,e,t,s=!1){let a;typeof n=="string"?a=no(n):(a={...n},vt(!a.pathname||!a.pathname.includes("?"),Gg("?","pathname","search",a)),vt(!a.pathname||!a.pathname.includes("#"),Gg("#","pathname","hash",a)),vt(!a.search||!a.search.includes("#"),Gg("#","search","hash",a)));let l=n===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let E=e.length-1;if(!s&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),E-=1;a.pathname=b.join("/")}d=E>=0?e[E]:"/"}let m=Cx(a,d),g=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||y)&&(m.pathname+="/"),m}var qs=n=>n.join("/").replace(/\/\/+/g,"/"),Rx=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Ix=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Nx=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function xx(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var X0=["POST","PUT","PATCH","DELETE"];new Set(X0);var Ox=["GET",...X0];new Set(Ox);var kl=P.createContext(null);kl.displayName="DataRouter";var em=P.createContext(null);em.displayName="DataRouterState";P.createContext(!1);var $0=P.createContext({isTransitioning:!1});$0.displayName="ViewTransition";var Dx=P.createContext(new Map);Dx.displayName="Fetchers";var kx=P.createContext(null);kx.displayName="Await";var Ui=P.createContext(null);Ui.displayName="Navigation";var Yc=P.createContext(null);Yc.displayName="Location";var yi=P.createContext({outlet:null,matches:[],isDataRoute:!1});yi.displayName="Route";var cy=P.createContext(null);cy.displayName="RouteError";function Px(n,{relative:e}={}){vt(Pl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=P.useContext(Ui),{hash:a,pathname:l,search:c}=Kc(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:qs([t,l])),s.createHref({pathname:d,search:c,hash:a})}function Pl(){return P.useContext(Yc)!=null}function ca(){return vt(Pl(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Yc).location}var J0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Z0(n){P.useContext(Ui).static||P.useLayoutEffect(n)}function hy(){let{isDataRoute:n}=P.useContext(yi);return n?Wx():Mx()}function Mx(){vt(Pl(),"useNavigate() may be used only in the context of a <Router> component.");let n=P.useContext(kl),{basename:e,navigator:t}=P.useContext(Ui),{matches:s}=P.useContext(yi),{pathname:a}=ca(),l=JSON.stringify(ly(s)),c=P.useRef(!1);return Z0(()=>{c.current=!0}),P.useCallback((m,g={})=>{if(Jn(c.current,J0),!c.current)return;if(typeof m=="number"){t.go(m);return}let y=uy(m,JSON.parse(l),a,g.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:qs([e,y.pathname])),(g.replace?t.replace:t.push)(y,g.state,g)},[e,t,l,a,n])}var Lx=P.createContext(null);function Vx(n){let e=P.useContext(yi).outlet;return P.useMemo(()=>e&&P.createElement(Lx.Provider,{value:n},e),[e,n])}function io(){let{matches:n}=P.useContext(yi),e=n[n.length-1];return e?e.params:{}}function Kc(n,{relative:e}={}){let{matches:t}=P.useContext(yi),{pathname:s}=ca(),a=JSON.stringify(ly(t));return P.useMemo(()=>uy(n,JSON.parse(a),s,e==="path"),[n,a,s,e])}function Ux(n,e){return eC(n,e)}function eC(n,e,t,s,a){vt(Pl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=P.useContext(Ui),{matches:c}=P.useContext(yi),d=c[c.length-1],m=d?d.params:{},g=d?d.pathname:"/",y=d?d.pathnameBase:"/",E=d&&d.route;{let K=E&&E.path||"";tC(g,!E||K.endsWith("*")||K.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${K}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${K}"> to <Route path="${K==="/"?"*":`${K}/*`}">.`)}let b=ca(),A;if(e){let K=typeof e=="string"?no(e):e;vt(y==="/"||K.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${K.pathname}" was given in the \`location\` prop.`),A=K}else A=b;let I=A.pathname||"/",j=I;if(y!=="/"){let K=y.replace(/^\//,"").split("/");j="/"+I.replace(/^\//,"").split("/").slice(K.length).join("/")}let V=K0(n,{pathname:j});Jn(E||V!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),Jn(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let $=Hx(V&&V.map(K=>Object.assign({},K,{params:Object.assign({},m,K.params),pathname:qs([y,l.encodeLocation?l.encodeLocation(K.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?y:qs([y,l.encodeLocation?l.encodeLocation(K.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathnameBase])})),c,t,s,a);return e&&$?P.createElement(Yc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},$):$}function jx(){let n=Qx(),e=xx(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:l},"ErrorBoundary")," or"," ",P.createElement("code",{style:l},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:a},t):null,c)}var zx=P.createElement(jx,null),Bx=class extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?P.createElement(yi.Provider,{value:this.props.routeContext},P.createElement(cy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Fx({routeContext:n,match:e,children:t}){let s=P.useContext(kl);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(yi.Provider,{value:n},t)}function Hx(n,e=[],t=null,s=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t?.errors;if(c!=null){let y=l.findIndex(E=>E.route.id&&c?.[E.route.id]!==void 0);vt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let d=!1,m=-1;if(t)for(let y=0;y<l.length;y++){let E=l[y];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(m=y),E.route.id){let{loaderData:b,errors:A}=t,I=E.route.loader&&!b.hasOwnProperty(E.route.id)&&(!A||A[E.route.id]===void 0);if(E.route.lazy||I){d=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}let g=t&&s?(y,E)=>{s(y,{location:t.location,params:t.matches?.[0]?.params??{},errorInfo:E})}:void 0;return l.reduceRight((y,E,b)=>{let A,I=!1,j=null,V=null;t&&(A=c&&E.route.id?c[E.route.id]:void 0,j=E.route.errorElement||zx,d&&(m<0&&b===0?(tC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,V=null):m===b&&(I=!0,V=E.route.hydrateFallbackElement||null)));let $=e.concat(l.slice(0,b+1)),K=()=>{let ee;return A?ee=j:I?ee=V:E.route.Component?ee=P.createElement(E.route.Component,null):E.route.element?ee=E.route.element:ee=y,P.createElement(Fx,{match:E,routeContext:{outlet:y,matches:$,isDataRoute:t!=null},children:ee})};return t&&(E.route.ErrorBoundary||E.route.errorElement||b===0)?P.createElement(Bx,{location:t.location,revalidation:t.revalidation,component:j,error:A,children:K(),routeContext:{outlet:null,matches:$,isDataRoute:!0},onError:g}):K()},null)}function fy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qx(n){let e=P.useContext(kl);return vt(e,fy(n)),e}function Gx(n){let e=P.useContext(em);return vt(e,fy(n)),e}function Yx(n){let e=P.useContext(yi);return vt(e,fy(n)),e}function dy(n){let e=Yx(n),t=e.matches[e.matches.length-1];return vt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function Kx(){return dy("useRouteId")}function Qx(){let n=P.useContext(cy),e=Gx("useRouteError"),t=dy("useRouteError");return n!==void 0?n:e.errors?.[t]}function Wx(){let{router:n}=qx("useNavigate"),e=dy("useNavigate"),t=P.useRef(!1);return Z0(()=>{t.current=!0}),P.useCallback(async(a,l={})=>{Jn(t.current,J0),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var xb={};function tC(n,e,t){!e&&!xb[n]&&(xb[n]=!0,Jn(!1,t))}P.memo(Xx);function Xx({routes:n,future:e,state:t,unstable_onError:s}){return eC(n,void 0,t,s,e)}function nC({to:n,replace:e,state:t,relative:s}){vt(Pl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=P.useContext(Ui);Jn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=P.useContext(yi),{pathname:c}=ca(),d=hy(),m=uy(n,ly(l),c,s==="path"),g=JSON.stringify(m);return P.useEffect(()=>{d(JSON.parse(g),{replace:e,state:t,relative:s})},[d,g,s,e,t]),null}function $x(n){return Vx(n.context)}function Qn(n){vt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Jx({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:a,static:l=!1}){vt(!Pl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),d=P.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=no(t));let{pathname:m="/",search:g="",hash:y="",state:E=null,key:b="default"}=t,A=P.useMemo(()=>{let I=Ws(m,c);return I==null?null:{location:{pathname:I,search:g,hash:y,state:E,key:b},navigationType:s}},[c,m,g,y,E,b,s]);return Jn(A!=null,`<Router basename="${c}"> is not able to match the URL "${m}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:P.createElement(Ui.Provider,{value:d},P.createElement(Yc.Provider,{children:e,value:A}))}function Zx({children:n,location:e}){return Ux(E_(n),e)}function E_(n,e=[]){let t=[];return P.Children.forEach(n,(s,a)=>{if(!P.isValidElement(s))return;let l=[...e,a];if(s.type===P.Fragment){t.push.apply(t,E_(s.props.children,l));return}vt(s.type===Qn,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),vt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=E_(s.props.children,l)),t.push(c)}),t}var sd="get",rd="application/x-www-form-urlencoded";function tm(n){return n!=null&&typeof n.tagName=="string"}function eO(n){return tm(n)&&n.tagName.toLowerCase()==="button"}function tO(n){return tm(n)&&n.tagName.toLowerCase()==="form"}function nO(n){return tm(n)&&n.tagName.toLowerCase()==="input"}function iO(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function sO(n,e){return n.button===0&&(!e||e==="_self")&&!iO(n)}var Kf=null;function rO(){if(Kf===null)try{new FormData(document.createElement("form"),0),Kf=!1}catch{Kf=!0}return Kf}var aO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Yg(n){return n!=null&&!aO.has(n)?(Jn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${rd}"`),null):n}function oO(n,e){let t,s,a,l,c;if(tO(n)){let d=n.getAttribute("action");s=d?Ws(d,e):null,t=n.getAttribute("method")||sd,a=Yg(n.getAttribute("enctype"))||rd,l=new FormData(n)}else if(eO(n)||nO(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||d.getAttribute("action");if(s=m?Ws(m,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||sd,a=Yg(n.getAttribute("formenctype"))||Yg(d.getAttribute("enctype"))||rd,l=new FormData(d,n),!rO()){let{name:g,type:y,value:E}=n;if(y==="image"){let b=g?`${g}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else g&&l.append(g,E)}}else{if(tm(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=sd,s=null,a=rd,c=n}return l&&a==="text/plain"&&(c=l,l=void 0),{action:s,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function my(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function lO(n,e,t){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return s.pathname==="/"?s.pathname=`_root.${t}`:e&&Ws(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${t}`,s}async function uO(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cO(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function hO(n,e,t){let s=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await uO(l,t);return c.links?c.links():[]}return[]}));return pO(s.flat(1).filter(cO).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Ob(n,e,t,s,a,l){let c=(m,g)=>t[g]?m.route.id!==t[g].route.id:!0,d=(m,g)=>t[g].pathname!==m.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==m.params["*"];return l==="assets"?e.filter((m,g)=>c(m,g)||d(m,g)):l==="data"?e.filter((m,g)=>{let y=s.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(c(m,g)||d(m,g))return!0;if(m.route.shouldRevalidate){let E=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function fO(n,e,{includeHydrateFallback:t}={}){return dO(n.map(s=>{let a=e.routes[s.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function dO(n){return[...new Set(n)]}function mO(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function pO(n,e){let t=new Set;return new Set(e),n.reduce((s,a)=>{let l=JSON.stringify(mO(a));return t.has(l)||(t.add(l),s.push({key:l,link:a})),s},[])}function iC(){let n=P.useContext(kl);return my(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function gO(){let n=P.useContext(em);return my(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var py=P.createContext(void 0);py.displayName="FrameworkContext";function sC(){let n=P.useContext(py);return my(n,"You must render this element inside a <HydratedRouter> element"),n}function _O(n,e){let t=P.useContext(py),[s,a]=P.useState(!1),[l,c]=P.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:g,onMouseLeave:y,onTouchStart:E}=e,b=P.useRef(null);P.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let j=$=>{$.forEach(K=>{c(K.isIntersecting)})},V=new IntersectionObserver(j,{threshold:.5});return b.current&&V.observe(b.current),()=>{V.disconnect()}}},[n]),P.useEffect(()=>{if(s){let j=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(j)}}},[s]);let A=()=>{a(!0)},I=()=>{a(!1),c(!1)};return t?n!=="intent"?[l,b,{}]:[l,b,{onFocus:Ju(d,A),onBlur:Ju(m,I),onMouseEnter:Ju(g,A),onMouseLeave:Ju(y,I),onTouchStart:Ju(E,A)}]:[!1,b,{}]}function Ju(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function yO({page:n,...e}){let{router:t}=iC(),s=P.useMemo(()=>K0(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?P.createElement(EO,{page:n,matches:s,...e}):null}function vO(n){let{manifest:e,routeModules:t}=sC(),[s,a]=P.useState([]);return P.useEffect(()=>{let l=!1;return hO(n,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[n,e,t]),s}function EO({page:n,matches:e,...t}){let s=ca(),{manifest:a,routeModules:l}=sC(),{basename:c}=iC(),{loaderData:d,matches:m}=gO(),g=P.useMemo(()=>Ob(n,e,m,a,s,"data"),[n,e,m,a,s]),y=P.useMemo(()=>Ob(n,e,m,a,s,"assets"),[n,e,m,a,s]),E=P.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let I=new Set,j=!1;if(e.forEach($=>{let K=a.routes[$.route.id];!K||!K.hasLoader||(!g.some(ee=>ee.route.id===$.route.id)&&$.route.id in d&&l[$.route.id]?.shouldRevalidate||K.hasClientLoader?j=!0:I.add($.route.id))}),I.size===0)return[];let V=lO(n,c,"data");return j&&I.size>0&&V.searchParams.set("_routes",e.filter($=>I.has($.route.id)).map($=>$.route.id).join(",")),[V.pathname+V.search]},[c,d,s,a,g,e,n,l]),b=P.useMemo(()=>fO(y,a),[y,a]),A=vO(y);return P.createElement(P.Fragment,null,E.map(I=>P.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...t})),b.map(I=>P.createElement("link",{key:I,rel:"modulepreload",href:I,...t})),A.map(({key:I,link:j})=>P.createElement("link",{key:I,nonce:t.nonce,...j})))}function TO(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var rC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{rC&&(window.__reactRouterVersion="7.9.6")}catch{}function SO({basename:n,children:e,window:t}){let s=P.useRef();s.current==null&&(s.current=ax({window:t,v5Compat:!0}));let a=s.current,[l,c]=P.useState({action:a.action,location:a.location}),d=P.useCallback(m=>{P.startTransition(()=>c(m))},[c]);return P.useLayoutEffect(()=>a.listen(d),[a,d]),P.createElement(Jx,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a})}var aC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Di=P.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:a,reloadDocument:l,replace:c,state:d,target:m,to:g,preventScrollReset:y,viewTransition:E,...b},A){let{basename:I}=P.useContext(Ui),j=typeof g=="string"&&aC.test(g),V,$=!1;if(typeof g=="string"&&j&&(V=g,rC))try{let N=new URL(window.location.href),U=g.startsWith("//")?new URL(N.protocol+g):new URL(g),k=Ws(U.pathname,I);U.origin===N.origin&&k!=null?g=k+U.search+U.hash:$=!0}catch{Jn(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let K=Px(g,{relative:a}),[ee,ue,_e]=_O(s,b),Se=AO(g,{replace:c,state:d,target:m,preventScrollReset:y,relative:a,viewTransition:E});function x(N){e&&e(N),N.defaultPrevented||Se(N)}let R=P.createElement("a",{...b,..._e,href:V||K,onClick:$||l?e:x,ref:TO(A,ue),target:m,"data-discover":!j&&t==="render"?"true":void 0});return ee&&!j?P.createElement(P.Fragment,null,R,P.createElement(yO,{page:K})):R});Di.displayName="Link";var bO=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:a=!1,style:l,to:c,viewTransition:d,children:m,...g},y){let E=Kc(c,{relative:g.relative}),b=ca(),A=P.useContext(em),{navigator:I,basename:j}=P.useContext(Ui),V=A!=null&&OO(E)&&d===!0,$=I.encodeLocation?I.encodeLocation(E).pathname:E.pathname,K=b.pathname,ee=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||(K=K.toLowerCase(),ee=ee?ee.toLowerCase():null,$=$.toLowerCase()),ee&&j&&(ee=Ws(ee,j)||ee);const ue=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let _e=K===$||!a&&K.startsWith($)&&K.charAt(ue)==="/",Se=ee!=null&&(ee===$||!a&&ee.startsWith($)&&ee.charAt($.length)==="/"),x={isActive:_e,isPending:Se,isTransitioning:V},R=_e?e:void 0,N;typeof s=="function"?N=s(x):N=[s,_e?"active":null,Se?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let U=typeof l=="function"?l(x):l;return P.createElement(Di,{...g,"aria-current":R,className:N,ref:y,style:U,to:c,viewTransition:d},typeof m=="function"?m(x):m)});bO.displayName="NavLink";var wO=P.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:a,state:l,method:c=sd,action:d,onSubmit:m,relative:g,preventScrollReset:y,viewTransition:E,...b},A)=>{let I=NO(),j=xO(d,{relative:g}),V=c.toLowerCase()==="get"?"get":"post",$=typeof d=="string"&&aC.test(d),K=ee=>{if(m&&m(ee),ee.defaultPrevented)return;ee.preventDefault();let ue=ee.nativeEvent.submitter,_e=ue?.getAttribute("formmethod")||c;I(ue||ee.currentTarget,{fetcherKey:e,method:_e,navigate:t,replace:a,state:l,relative:g,preventScrollReset:y,viewTransition:E})};return P.createElement("form",{ref:A,method:V,action:j,onSubmit:s?m:K,...b,"data-discover":!$&&n==="render"?"true":void 0})});wO.displayName="Form";function CO(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function oC(n){let e=P.useContext(kl);return vt(e,CO(n)),e}function AO(n,{target:e,replace:t,state:s,preventScrollReset:a,relative:l,viewTransition:c}={}){let d=hy(),m=ca(),g=Kc(n,{relative:l});return P.useCallback(y=>{if(sO(y,e)){y.preventDefault();let E=t!==void 0?t:Cc(m)===Cc(g);d(n,{replace:E,state:s,preventScrollReset:a,relative:l,viewTransition:c})}},[m,d,g,t,s,e,n,a,l,c])}var RO=0,IO=()=>`__${String(++RO)}__`;function NO(){let{router:n}=oC("useSubmit"),{basename:e}=P.useContext(Ui),t=Kx();return P.useCallback(async(s,a={})=>{let{action:l,method:c,encType:d,formData:m,body:g}=oO(s,e);if(a.navigate===!1){let y=a.fetcherKey||IO();await n.fetch(y,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:g,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await n.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:g,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function xO(n,{relative:e}={}){let{basename:t}=P.useContext(Ui),s=P.useContext(yi);vt(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),l={...Kc(n||".",{relative:e})},c=ca();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(y=>y==="")){d.delete("index"),m.filter(E=>E).forEach(E=>d.append("index",E));let y=d.toString();l.search=y?`?${y}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:qs([t,l.pathname])),Cc(l)}function OO(n,{relative:e}={}){let t=P.useContext($0);vt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=oC("useViewTransitionState"),a=Kc(n,{relative:e});if(!t.isTransitioning)return!1;let l=Ws(t.currentLocation.pathname,s)||t.currentLocation.pathname,c=Ws(t.nextLocation.pathname,s)||t.nextLocation.pathname;return _d(a.pathname,c)!=null||_d(a.pathname,l)!=null}const Ml="/skill-exchange/assets/logo-CZvJbn1G.png",DO=()=>{};var Db={};const lC={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const ae=function(n,e){if(!n)throw Ll(e)},Ll=function(n){return new Error("Firebase Database ("+lC.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};const uC=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let a=n.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},kO=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const a=n[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],d=n[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},gy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,d=c?n[a+1]:0,m=a+2<n.length,g=m?n[a+2]:0,y=l>>2,E=(l&3)<<4|d>>4;let b=(d&15)<<2|g>>6,A=g&63;m||(A=64,c||(b=64)),s.push(t[y],t[E],t[b],t[A])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(uC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):kO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],d=a<n.length?t[n.charAt(a)]:0;++a;const g=a<n.length?t[n.charAt(a)]:64;++a;const E=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||d==null||g==null||E==null)throw new PO;const b=l<<2|d>>4;if(s.push(b),g!==64){const A=d<<4&240|g>>2;if(s.push(A),E!==64){const I=g<<6&192|E;s.push(I)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class PO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cC=function(n){const e=uC(n);return gy.encodeByteArray(e,!0)},yd=function(n){return cC(n).replace(/\./g,"")},vd=function(n){try{return gy.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function MO(n){return hC(void 0,n)}function hC(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!LO(t)||(n[t]=hC(n[t],e[t]));return n}function LO(n){return n!=="__proto__"}function VO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const UO=()=>VO().__FIREBASE_DEFAULTS__,jO=()=>{if(typeof process>"u"||typeof Db>"u")return;const n=Db.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},zO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&vd(n[1]);return e&&JSON.parse(e)},nm=()=>{try{return DO()||UO()||jO()||zO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},fC=n=>nm()?.emulatorHosts?.[n],_y=n=>{const e=fC(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},dC=()=>nm()?.config,mC=n=>nm()?.[`_${n}`];class Qc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}function _s(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function im(n){return(await fetch(n,{credentials:"include"})).ok}function yy(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[yd(JSON.stringify(t)),yd(JSON.stringify(c)),""].join(".")}const uc={};function BO(){const n={prod:[],emulator:[]};for(const e of Object.keys(uc))uc[e]?n.emulator.push(e):n.prod.push(e);return n}function FO(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let kb=!1;function sm(n,e){if(typeof window>"u"||typeof document>"u"||!_s(window.location.host)||uc[n]===e||uc[n]||kb)return;uc[n]=e;function t(b){return`__firebase__banner__${b}`}const s="__firebase__banner",l=BO().prod.length>0;function c(){const b=document.getElementById(s);b&&b.remove()}function d(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function m(b,A){b.setAttribute("width","24"),b.setAttribute("id",A),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{kb=!0,c()},b}function y(b,A){b.setAttribute("id",A),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function E(){const b=FO(s),A=t("text"),I=document.getElementById(A)||document.createElement("span"),j=t("learnmore"),V=document.getElementById(j)||document.createElement("a"),$=t("preprendIcon"),K=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const ee=b.element;d(ee),y(V,j);const ue=g();m(K,$),ee.append(K,I,V,ue),document.body.appendChild(ee)}l?(I.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function En(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vy(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(En())}function HO(){const n=nm()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GO(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function pC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YO(){const n=En();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function KO(){return lC.NODE_ADMIN===!0}function QO(){return!HO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WO(){try{return typeof indexedDB=="object"}catch{return!1}}function XO(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const $O="FirebaseError";class ys extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=$O,Object.setPrototypeOf(this,ys.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wc.prototype.create)}}class Wc{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?JO(l,s):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new ys(a,d,s)}}function JO(n,e){return n.replace(ZO,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const ZO=/\{\$([^}]+)}/g;function Ac(n){return JSON.parse(n)}function Qt(n){return JSON.stringify(n)}const gC=function(n){let e={},t={},s={},a="";try{const l=n.split(".");e=Ac(vd(l[0])||""),t=Ac(vd(l[1])||""),a=l[2],s=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:s,signature:a}},eD=function(n){const e=gC(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},tD=function(n){const e=gC(n).claims;return typeof e=="object"&&e.admin===!0};function vs(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function _l(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function T_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ed(n,e,t){const s={};for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=e.call(t,n[a],a,n));return s}function Zr(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const l=n[a],c=e[a];if(Pb(l)&&Pb(c)){if(!Zr(l,c))return!1}else if(l!==c)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function Pb(n){return n!==null&&typeof n=="object"}function so(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}class nD{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const s=this.W_;if(typeof e=="string")for(let E=0;E<16;E++)s[E]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let E=0;E<16;E++)s[E]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let E=16;E<80;E++){const b=s[E-3]^s[E-8]^s[E-14]^s[E-16];s[E]=(b<<1|b>>>31)&4294967295}let a=this.chain_[0],l=this.chain_[1],c=this.chain_[2],d=this.chain_[3],m=this.chain_[4],g,y;for(let E=0;E<80;E++){E<40?E<20?(g=d^l&(c^d),y=1518500249):(g=l^c^d,y=1859775393):E<60?(g=l&c|d&(l|c),y=2400959708):(g=l^c^d,y=3395469782);const b=(a<<5|a>>>27)+g+m+y+s[E]&4294967295;m=d,d=c,c=(l<<30|l>>>2)&4294967295,l=a,a=b}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+d&4294967295,this.chain_[4]=this.chain_[4]+m&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const s=t-this.blockSize;let a=0;const l=this.buf_;let c=this.inbuf_;for(;a<t;){if(c===0)for(;a<=s;)this.compress_(e,a),a+=this.blockSize;if(typeof e=="string"){for(;a<t;)if(l[c]=e.charCodeAt(a),++c,++a,c===this.blockSize){this.compress_(l),c=0;break}}else for(;a<t;)if(l[c]=e[a],++c,++a,c===this.blockSize){this.compress_(l),c=0;break}}this.inbuf_=c,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let a=this.blockSize-1;a>=56;a--)this.buf_[a]=t&255,t/=256;this.compress_(this.buf_);let s=0;for(let a=0;a<5;a++)for(let l=24;l>=0;l-=8)e[s]=this.chain_[a]>>l&255,++s;return e}}function iD(n,e){const t=new sD(n,e);return t.subscribe.bind(t)}class sD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");rD(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=Kg),a.error===void 0&&(a.error=Kg),a.complete===void 0&&(a.complete=Kg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rD(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Kg(){}function rm(n,e){return`${n} failed: ${e} argument `}const aD=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let a=n.charCodeAt(s);if(a>=55296&&a<=56319){const l=a-55296;s++,ae(s<n.length,"Surrogate pair missing trail surrogate.");const c=n.charCodeAt(s)-56320;a=65536+(l<<10)+c}a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):a<65536?(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},am=function(n){let e=0;for(let t=0;t<n.length;t++){const s=n.charCodeAt(t);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,t++):e+=3}return e};function At(n){return n&&n._delegate?n._delegate:n}class Xs{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ha="[DEFAULT]";class oD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new Qc;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uD(e))try{this.getOrInitializeService({instanceIdentifier:Ha})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=Ha){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ha){return this.instances.has(e)}getOptions(e=Ha){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&c.resolve(a)}return a}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:lD(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ha){return this.component?this.component.multipleInstances?e:Ha:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lD(n){return n===Ha?void 0:n}function uD(n){return n.instantiationMode==="EAGER"}class cD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new oD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var je;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(je||(je={}));const hD={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},fD=je.INFO,dD={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},mD=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),a=dD[e];if(a)console[a](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class om{constructor(e){this.name=e,this._logLevel=fD,this._logHandler=mD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const pD=(n,e)=>e.some(t=>n instanceof t);let Mb,Lb;function gD(){return Mb||(Mb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _D(){return Lb||(Lb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _C=new WeakMap,S_=new WeakMap,yC=new WeakMap,Qg=new WeakMap,Ey=new WeakMap;function yD(n){const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Gr(n.result)),a()},c=()=>{s(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&_C.set(t,n)}).catch(()=>{}),Ey.set(e,n),e}function vD(n){if(S_.has(n))return;const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});S_.set(n,e)}let b_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return S_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||yC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Gr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ED(n){b_=n(b_)}function TD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Wg(this),e,...t);return yC.set(s,e.sort?e.sort():[e]),Gr(s)}:_D().includes(n)?function(...e){return n.apply(Wg(this),e),Gr(_C.get(this))}:function(...e){return Gr(n.apply(Wg(this),e))}}function SD(n){return typeof n=="function"?TD(n):(n instanceof IDBTransaction&&vD(n),pD(n,gD())?new Proxy(n,b_):n)}function Gr(n){if(n instanceof IDBRequest)return yD(n);if(Qg.has(n))return Qg.get(n);const e=SD(n);return e!==n&&(Qg.set(n,e),Ey.set(e,n)),e}const Wg=n=>Ey.get(n);function bD(n,e,{blocked:t,upgrade:s,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),d=Gr(c);return s&&c.addEventListener("upgradeneeded",m=>{s(Gr(c.result),m.oldVersion,m.newVersion,Gr(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const wD=["get","getKey","getAll","getAllKeys","count"],CD=["put","add","delete","clear"],Xg=new Map;function Vb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Xg.get(e))return Xg.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=CD.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||wD.includes(t)))return;const l=async function(c,...d){const m=this.transaction(c,a?"readwrite":"readonly");let g=m.store;return s&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&m.done]))[0]};return Xg.set(e,l),l}ED(n=>({...n,get:(e,t,s)=>Vb(e,t)||n.get(e,t,s),has:(e,t)=>!!Vb(e,t)||n.has(e,t)}));class AD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(RD(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function RD(n){return n.getComponent()?.type==="VERSION"}const w_="@firebase/app",Ub="0.14.6";const $s=new om("@firebase/app"),ID="@firebase/app-compat",ND="@firebase/analytics-compat",xD="@firebase/analytics",OD="@firebase/app-check-compat",DD="@firebase/app-check",kD="@firebase/auth",PD="@firebase/auth-compat",MD="@firebase/database",LD="@firebase/data-connect",VD="@firebase/database-compat",UD="@firebase/functions",jD="@firebase/functions-compat",zD="@firebase/installations",BD="@firebase/installations-compat",FD="@firebase/messaging",HD="@firebase/messaging-compat",qD="@firebase/performance",GD="@firebase/performance-compat",YD="@firebase/remote-config",KD="@firebase/remote-config-compat",QD="@firebase/storage",WD="@firebase/storage-compat",XD="@firebase/firestore",$D="@firebase/ai",JD="@firebase/firestore-compat",ZD="firebase",ek="12.6.0";const C_="[DEFAULT]",tk={[w_]:"fire-core",[ID]:"fire-core-compat",[xD]:"fire-analytics",[ND]:"fire-analytics-compat",[DD]:"fire-app-check",[OD]:"fire-app-check-compat",[kD]:"fire-auth",[PD]:"fire-auth-compat",[MD]:"fire-rtdb",[LD]:"fire-data-connect",[VD]:"fire-rtdb-compat",[UD]:"fire-fn",[jD]:"fire-fn-compat",[zD]:"fire-iid",[BD]:"fire-iid-compat",[FD]:"fire-fcm",[HD]:"fire-fcm-compat",[qD]:"fire-perf",[GD]:"fire-perf-compat",[YD]:"fire-rc",[KD]:"fire-rc-compat",[QD]:"fire-gcs",[WD]:"fire-gcs-compat",[XD]:"fire-fst",[JD]:"fire-fst-compat",[$D]:"fire-vertex","fire-js":"fire-js",[ZD]:"fire-js-all"};const Td=new Map,nk=new Map,A_=new Map;function jb(n,e){try{n.container.addComponent(e)}catch(t){$s.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ea(n){const e=n.name;if(A_.has(e))return $s.debug(`There were multiple attempts to register component ${e}.`),!1;A_.set(e,n);for(const t of Td.values())jb(t,n);for(const t of nk.values())jb(t,n);return!0}function Xc(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Wn(n){return n==null?!1:n.settings!==void 0}const ik={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yr=new Wc("app","Firebase",ik);class sk{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Xs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yr.create("app-deleted",{appName:this._name})}}const ha=ek;function vC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:C_,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw Yr.create("bad-app-name",{appName:String(a)});if(t||(t=dC()),!t)throw Yr.create("no-options");const l=Td.get(a);if(l){if(Zr(t,l.options)&&Zr(s,l.config))return l;throw Yr.create("duplicate-app",{appName:a})}const c=new cD(a);for(const m of A_.values())c.addComponent(m);const d=new sk(t,s,c);return Td.set(a,d),d}function lm(n=C_){const e=Td.get(n);if(!e&&n===C_&&dC())return vC();if(!e)throw Yr.create("no-app",{appName:n});return e}function gi(n,e,t){let s=tk[n]??n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${s}" with version "${e}":`];a&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$s.warn(c.join(" "));return}ea(new Xs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const rk="firebase-heartbeat-database",ak=1,Rc="firebase-heartbeat-store";let $g=null;function EC(){return $g||($g=bD(rk,ak,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Rc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Yr.create("idb-open",{originalErrorMessage:n.message})})),$g}async function ok(n){try{const t=(await EC()).transaction(Rc),s=await t.objectStore(Rc).get(TC(n));return await t.done,s}catch(e){if(e instanceof ys)$s.warn(e.message);else{const t=Yr.create("idb-get",{originalErrorMessage:e?.message});$s.warn(t.message)}}}async function zb(n,e){try{const s=(await EC()).transaction(Rc,"readwrite");await s.objectStore(Rc).put(e,TC(n)),await s.done}catch(t){if(t instanceof ys)$s.warn(t.message);else{const s=Yr.create("idb-set",{originalErrorMessage:t?.message});$s.warn(s.message)}}}function TC(n){return`${n.name}!${n.options.appId}`}const lk=1024,uk=30;class ck{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new fk(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Bb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>uk){const a=dk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){$s.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Bb(),{heartbeatsToSend:t,unsentEntries:s}=hk(this._heartbeatsCache.heartbeats),a=yd(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return $s.warn(e),""}}}function Bb(){return new Date().toISOString().substring(0,10)}function hk(n,e=lk){const t=[];let s=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),Fb(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Fb(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class fk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return WO()?XO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await ok(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return zb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return zb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Fb(n){return yd(JSON.stringify({version:2,heartbeats:n})).length}function dk(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}function mk(n){ea(new Xs("platform-logger",e=>new AD(e),"PRIVATE")),ea(new Xs("heartbeat",e=>new ck(e),"PRIVATE")),gi(w_,Ub,n),gi(w_,Ub,"esm2020"),gi("fire-js","")}mk("");var pk="firebase",gk="12.6.0";gi(pk,gk,"app");function SC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _k=SC,bC=new Wc("auth","Firebase",SC());const Sd=new om("@firebase/auth");function yk(n,...e){Sd.logLevel<=je.WARN&&Sd.warn(`Auth (${ha}): ${n}`,...e)}function ad(n,...e){Sd.logLevel<=je.ERROR&&Sd.error(`Auth (${ha}): ${n}`,...e)}function Js(n,...e){throw Ty(n,...e)}function $n(n,...e){return Ty(n,...e)}function wC(n,e,t){const s={..._k(),[e]:t};return new Wc("auth","Firebase",s).create(e,{appName:n.name})}function Kr(n){return wC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ty(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return bC.create(n,...e)}function fe(n,e,...t){if(!n)throw Ty(e,...t)}function Bs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ad(e),new Error(e)}function Zs(n,e){n||Bs(e)}function R_(){return typeof self<"u"&&self.location?.href||""}function CC(){return Hb()==="http:"||Hb()==="https:"}function Hb(){return typeof self<"u"&&self.location?.protocol||null}function vk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CC()||GO()||"connection"in navigator)?navigator.onLine:!0}function Ek(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class $c{constructor(e,t){this.shortDelay=e,this.longDelay=t,Zs(t>e,"Short delay should be less than long delay!"),this.isMobile=vy()||pC()}get(){return vk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Sy(n,e){Zs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class AC{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Tk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Sk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bk=new $c(3e4,6e4);function Es(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ji(n,e,t,s,a={}){return RC(n,a,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const d=so({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:m,...l};return qO()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&_s(n.emulatorConfig.host)&&(g.credentials="include"),AC.fetch()(await IC(n,n.config.apiHost,t,d),g)})}async function RC(n,e,t){n._canInitEmulator=!1;const s={...Tk,...e};try{const a=new Ck(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw sc(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[m,g]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw sc(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw sc(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw sc(n,"user-disabled",c);const y=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw wC(n,y,g);Js(n,y)}}catch(a){if(a instanceof ys)throw a;Js(n,"network-request-failed",{message:String(a)})}}async function um(n,e,t,s,a={}){const l=await ji(n,e,t,s,a);return"mfaPendingCredential"in l&&Js(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function IC(n,e,t,s){const a=`${e}${t}?${s}`,l=n,c=l.config.emulator?Sy(n.config,a):`${n.config.apiScheme}://${a}`;return Sk.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function wk(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ck{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s($n(this.auth,"network-request-failed")),bk.get())})}}function sc(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=$n(n,e,s);return a.customData._tokenResponse=t,a}function qb(n){return n!==void 0&&n.getResponse!==void 0}function Gb(n){return n!==void 0&&n.enterprise!==void 0}class NC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return wk(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Ak(n){return(await ji(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function xC(n,e){return ji(n,"GET","/v2/recaptchaConfig",Es(n,e))}async function Rk(n,e){return ji(n,"POST","/v1/accounts:delete",e)}async function bd(n,e){return ji(n,"POST","/v1/accounts:lookup",e)}function cc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Ik(n,e=!1){const t=At(n),s=await t.getIdToken(e),a=by(s);fe(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:s,authTime:cc(Jg(a.auth_time)),issuedAtTime:cc(Jg(a.iat)),expirationTime:cc(Jg(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Jg(n){return Number(n)*1e3}function by(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return ad("JWT malformed, contained fewer than 3 sections"),null;try{const a=vd(t);return a?JSON.parse(a):(ad("Failed to decode base64 JWT payload"),null)}catch(a){return ad("Caught error parsing JWT payload as JSON",a?.toString()),null}}function Yb(n){const e=by(n);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ic(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof ys&&Nk(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function Nk({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class xk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class I_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=cc(this.lastLoginAt),this.creationTime=cc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function wd(n){const e=n.auth,t=await n.getIdToken(),s=await Ic(n,bd(e,{idToken:t}));fe(s?.users.length,e,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const l=a.providerUserInfo?.length?OC(a.providerUserInfo):[],c=Dk(n.providerData,l),d=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!c?.length,g=d?m:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new I_(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(n,y)}async function Ok(n){const e=At(n);await wd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Dk(n,e){return[...n.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function OC(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function kk(n,e){const t=await RC(n,{},async()=>{const s=so({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await IC(n,a,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:s};return n.emulatorConfig&&_s(n.emulatorConfig.host)&&(m.credentials="include"),AC.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Pk(n,e){return ji(n,"POST","/v2/accounts:revokeToken",Es(n,e))}class cl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Yb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){fe(e.length!==0,"internal-error");const t=Yb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:l}=await kk(e,t);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:l}=t,c=new cl;return s&&(fe(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),a&&(fe(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(fe(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cl,this.toJSON())}_performRefresh(){return Bs("not implemented")}}function Vr(n,e){fe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Pi{constructor({uid:e,auth:t,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new xk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new I_(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Ic(this,this.stsTokenManager.getToken(this.auth,e));return fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Ik(this,e)}reload(){return Ok(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Pi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await wd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wn(this.auth.app))return Promise.reject(Kr(this.auth));const e=await this.getIdToken();return await Ic(this,Rk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,m=t._redirectEventId??void 0,g=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:E,emailVerified:b,isAnonymous:A,providerData:I,stsTokenManager:j}=t;fe(E&&j,e,"internal-error");const V=cl.fromJSON(this.name,j);fe(typeof E=="string",e,"internal-error"),Vr(s,e.name),Vr(a,e.name),fe(typeof b=="boolean",e,"internal-error"),fe(typeof A=="boolean",e,"internal-error"),Vr(l,e.name),Vr(c,e.name),Vr(d,e.name),Vr(m,e.name),Vr(g,e.name),Vr(y,e.name);const $=new Pi({uid:E,auth:e,email:a,emailVerified:b,displayName:s,isAnonymous:A,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:V,createdAt:g,lastLoginAt:y});return I&&Array.isArray(I)&&($.providerData=I.map(K=>({...K}))),m&&($._redirectEventId=m),$}static async _fromIdTokenResponse(e,t,s=!1){const a=new cl;a.updateFromServerResponse(t);const l=new Pi({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await wd(l),l}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];fe(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?OC(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new cl;d.updateFromIdToken(s);const m=new Pi({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new I_(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(m,g),m}}const Kb=new Map;function Fs(n){Zs(n instanceof Function,"Expected a class definition");let e=Kb.get(n);return e?(Zs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Kb.set(n,e),e)}class DC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}DC.type="NONE";const Qb=DC;function od(n,e,t){return`firebase:${n}:${e}:${t}`}class hl{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=od(this.userKey,a.apiKey,l),this.fullPersistenceKey=od("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await bd(this.auth,{idToken:e}).catch(()=>{});return t?Pi._fromGetAccountInfoResponse(this.auth,t,e):null}return Pi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new hl(Fs(Qb),e,s);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||Fs(Qb);const c=od(s,e.config.apiKey,e.name);let d=null;for(const g of t)try{const y=await g._get(c);if(y){let E;if(typeof y=="string"){const b=await bd(e,{idToken:y}).catch(()=>{});if(!b)break;E=await Pi._fromGetAccountInfoResponse(e,b,y)}else E=Pi._fromJSON(e,y);g!==l&&(d=E),l=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new hl(l,e,s):(l=m[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new hl(l,e,s))}}function Wb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UC(e))return"Blackberry";if(jC(e))return"Webos";if(PC(e))return"Safari";if((e.includes("chrome/")||MC(e))&&!e.includes("edge/"))return"Chrome";if(VC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if(s?.length===2)return s[1]}return"Other"}function kC(n=En()){return/firefox\//i.test(n)}function PC(n=En()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MC(n=En()){return/crios\//i.test(n)}function LC(n=En()){return/iemobile/i.test(n)}function VC(n=En()){return/android/i.test(n)}function UC(n=En()){return/blackberry/i.test(n)}function jC(n=En()){return/webos/i.test(n)}function wy(n=En()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Mk(n=En()){return wy(n)&&!!window.navigator?.standalone}function Lk(){return YO()&&document.documentMode===10}function zC(n=En()){return wy(n)||VC(n)||jC(n)||UC(n)||/windows phone/i.test(n)||LC(n)}function BC(n,e=[]){let t;switch(n){case"Browser":t=Wb(En());break;case"Worker":t=`${Wb(En())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ha}/${s}`}class Vk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,d)=>{try{const m=e(l);c(m)}catch(m){d(m)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function Uk(n,e={}){return ji(n,"GET","/v2/passwordPolicy",Es(n,e))}const jk=6;class zk{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??jk,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class Bk{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xb(this),this.idTokenSubscription=new Xb(this),this.beforeStateQueue=new Vk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Fs(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await hl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await bd(this,{idToken:e}),s=await Pi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Wn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=s?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&d?.user&&(s=d.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await wd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ek()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wn(this.app))return Promise.reject(Kr(this));const t=e?At(e):null;return t&&fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wn(this.app)?Promise.reject(Kr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wn(this.app)?Promise.reject(Kr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Uk(this),t=new zk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wc("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await Pk(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Fs(e)||this._popupRedirectResolver;fe(t,this,"argument-error"),this.redirectPersistenceManager=await hl.create(this,[Fs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,s,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&yk(`Error while retrieving App Check token: ${e.error}`),e?.token}}function fa(n){return At(n)}class Xb{constructor(e){this.auth=e,this.observer=null,this.addObserver=iD(t=>this.observer=t)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Jc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Fk(n){Jc=n}function Cy(n){return Jc.loadJS(n)}function Hk(){return Jc.recaptchaV2Script}function qk(){return Jc.recaptchaEnterpriseScript}function Gk(){return Jc.gapiScript}function FC(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const Yk=500,Kk=6e4,Qf=1e12;class Qk{constructor(e){this.auth=e,this.counter=Qf,this._widgets=new Map}render(e,t){const s=this.counter;return this._widgets.set(s,new $k(e,this.auth.name,t||{})),this.counter++,s}reset(e){const t=e||Qf;this._widgets.get(t)?.delete(),this._widgets.delete(t)}getResponse(e){const t=e||Qf;return this._widgets.get(t)?.getResponse()||""}async execute(e){const t=e||Qf;return this._widgets.get(t)?.execute(),""}}class Wk{constructor(){this.enterprise=new Xk}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Xk{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class $k{constructor(e,t,s){this.params=s,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const a=typeof e=="string"?document.getElementById(e):e;fe(a,"argument-error",{appName:t}),this.container=a,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=Jk(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},Kk)},Yk))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function Jk(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let s=0;s<n;s++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const Zk="recaptcha-enterprise",hc="NO_RECAPTCHA";class HC{constructor(e){this.type=Zk,this.auth=fa(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{xC(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new NC(m);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(m=>{d(m)})})}function a(l,c,d){const m=window.grecaptcha;Gb(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(hc)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Wk().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{s(this.auth).then(d=>{if(!t&&Gb(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=qk();m.length!==0&&(m+=d),Cy(m).then(()=>{a(d,l,c)}).catch(g=>{c(g)})}}).catch(d=>{c(d)})})}}async function Zg(n,e,t,s=!1,a=!1){const l=new HC(n);let c;if(a)c=hc;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const m=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const m=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return s?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function e_(n,e,t,s,a){if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const l=await Zg(n,e,t);return s(n,l).catch(async c=>{if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const d=await Zg(n,e,t,!1,!0);return s(n,d)}return Promise.reject(c)})}else{const l=await Zg(n,e,t,!1,!0);return s(n,l)}}async function eP(n){const e=fa(n),t=await xC(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),s=new NC(t);e.tenantId==null?e._agentRecaptchaConfig=s:e._tenantRecaptchaConfigs[e.tenantId]=s,s.isAnyProviderEnabled()&&new HC(e).verify()}function tP(n,e){const t=Xc(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Zr(l,e??{}))return a;Js(a,"already-initialized")}return t.initialize({options:e})}function nP(n,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Fs);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e?.popupRedirectResolver)}function iP(n,e,t){const s=fa(n);fe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,l=qC(e),{host:c,port:d}=sP(e),m=d===null?"":`:${d}`,g={url:`${l}//${c}${m}/`},y=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){fe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),fe(Zr(g,s.config.emulator)&&Zr(y,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=y,s.settings.appVerificationDisabledForTesting=!0,_s(c)?(im(`${l}//${c}${m}`),sm("Auth",!0)):rP()}function qC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function sP(n){const e=qC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:$b(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:$b(c)}}}function $b(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function rP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class Ay{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Bs("not implemented")}_getIdTokenResponse(e){return Bs("not implemented")}_linkToIdToken(e,t){return Bs("not implemented")}_getReauthenticationResolver(e){return Bs("not implemented")}}async function fl(n,e){return um(n,"POST","/v1/accounts:signInWithIdp",Es(n,e))}const aP="http://localhost";class Wa extends Ay{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Wa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Js("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...l}=t;if(!s||!a)return null;const c=new Wa(s,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return fl(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,fl(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,fl(e,t)}buildRequest(){const e={requestUri:aP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=so(t)}return e}}async function Jb(n,e){return ji(n,"POST","/v1/accounts:sendVerificationCode",Es(n,e))}async function oP(n,e){return um(n,"POST","/v1/accounts:signInWithPhoneNumber",Es(n,e))}async function lP(n,e){const t=await um(n,"POST","/v1/accounts:signInWithPhoneNumber",Es(n,e));if(t.temporaryProof)throw sc(n,"account-exists-with-different-credential",t);return t}const uP={USER_NOT_FOUND:"user-not-found"};async function cP(n,e){const t={...e,operation:"REAUTH"};return um(n,"POST","/v1/accounts:signInWithPhoneNumber",Es(n,t),uP)}class fc extends Ay{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new fc({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new fc({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return oP(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return lP(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return cP(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:s,verificationCode:a}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:s,code:a}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:s,phoneNumber:a,temporaryProof:l}=e;return!s&&!t&&!a&&!l?null:new fc({verificationId:t,verificationCode:s,phoneNumber:a,temporaryProof:l})}}class GC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Zc extends GC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ur extends Zc{constructor(){super("facebook.com")}static credential(e){return Wa._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ur.credential(e.oauthAccessToken)}catch{return null}}}Ur.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ur.PROVIDER_ID="facebook.com";class jr extends Zc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Wa._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return jr.credential(t,s)}catch{return null}}}jr.GOOGLE_SIGN_IN_METHOD="google.com";jr.PROVIDER_ID="google.com";class zr extends Zc{constructor(){super("github.com")}static credential(e){return Wa._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zr.credential(e.oauthAccessToken)}catch{return null}}}zr.GITHUB_SIGN_IN_METHOD="github.com";zr.PROVIDER_ID="github.com";class Br extends Zc{constructor(){super("twitter.com")}static credential(e,t){return Wa._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Br.credential(t,s)}catch{return null}}}Br.TWITTER_SIGN_IN_METHOD="twitter.com";Br.PROVIDER_ID="twitter.com";class yl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const l=await Pi._fromIdTokenResponse(e,s,a),c=Zb(s);return new yl({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=Zb(s);return new yl({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function Zb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Cd extends ys{constructor(e,t,s,a){super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,Cd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new Cd(e,t,s,a)}}function YC(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Cd._fromErrorAndOperation(n,l,e,s):l})}async function hP(n,e,t=!1){const s=await Ic(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return yl._forOperation(n,"link",s)}async function fP(n,e,t=!1){const{auth:s}=n;if(Wn(s.app))return Promise.reject(Kr(s));const a="reauthenticate";try{const l=await Ic(n,YC(s,a,e,n),t);fe(l.idToken,s,"internal-error");const c=by(l.idToken);fe(c,s,"internal-error");const{sub:d}=c;return fe(n.uid===d,s,"user-mismatch"),yl._forOperation(n,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Js(s,"user-mismatch"),l}}async function KC(n,e,t=!1){if(Wn(n.app))return Promise.reject(Kr(n));const s="signIn",a=await YC(n,s,e),l=await yl._fromIdTokenResponse(n,s,a);return t||await n._updateCurrentUser(l.user),l}async function dP(n,e){return KC(fa(n),e)}function mP(n,e,t,s){return At(n).onIdTokenChanged(e,t,s)}function pP(n,e,t){return At(n).beforeAuthStateChanged(e,t)}function ew(n,e){return ji(n,"POST","/v2/accounts/mfaEnrollment:start",Es(n,e))}const Ad="__sak";class QC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ad,"1"),this.storage.removeItem(Ad),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const gP=1e3,_P=10;class WC extends QC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);Lk()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,_P):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},gP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}WC.type="LOCAL";const yP=WC;class XC extends QC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}XC.type="SESSION";const $C=XC;function vP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class cm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new cm(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const d=Array.from(c).map(async g=>g(t.origin,l)),m=await vP(d);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cm.receivers=[];function Ry(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}class EP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,m)=>{const g=Ry("",20);a.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},s);c={messageChannel:a,onMessage(E){const b=E;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(b.data.response);break;default:clearTimeout(y),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Ft(){return window}function TP(n){Ft().location.href=n}function Iy(){return typeof Ft().WorkerGlobalScope<"u"&&typeof Ft().importScripts=="function"}async function SP(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bP(){return navigator?.serviceWorker?.controller||null}function wP(){return Iy()?self:null}const JC="firebaseLocalStorageDb",CP=1,Rd="firebaseLocalStorage",ZC="fbase_key";class eh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function hm(n,e){return n.transaction([Rd],e?"readwrite":"readonly").objectStore(Rd)}function AP(){const n=indexedDB.deleteDatabase(JC);return new eh(n).toPromise()}function N_(){const n=indexedDB.open(JC,CP);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Rd,{keyPath:ZC})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Rd)?e(s):(s.close(),await AP(),e(await N_()))})})}async function tw(n,e,t){const s=hm(n,!0).put({[ZC]:e,value:t});return new eh(s).toPromise()}async function RP(n,e){const t=hm(n,!1).get(e),s=await new eh(t).toPromise();return s===void 0?null:s.value}function nw(n,e){const t=hm(n,!0).delete(e);return new eh(t).toPromise()}const IP=800,NP=3;class eA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await N_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>NP)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Iy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cm._getInstance(wP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await SP(),!this.activeServiceWorker)return;this.sender=new EP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||bP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await N_();return await tw(e,Ad,"1"),await nw(e,Ad),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>tw(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>RP(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>nw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=hm(a,!1).getAll();return new eh(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),IP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eA.type="LOCAL";const xP=eA;function iw(n,e){return ji(n,"POST","/v2/accounts/mfaSignIn:start",Es(n,e))}const t_=FC("rcb"),OP=new $c(3e4,6e4);class DP{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Ft().grecaptcha?.render}load(e,t=""){return fe(kP(t),e,"argument-error"),this.shouldResolveImmediately(t)&&qb(Ft().grecaptcha)?Promise.resolve(Ft().grecaptcha):new Promise((s,a)=>{const l=Ft().setTimeout(()=>{a($n(e,"network-request-failed"))},OP.get());Ft()[t_]=()=>{Ft().clearTimeout(l),delete Ft()[t_];const d=Ft().grecaptcha;if(!d||!qb(d)){a($n(e,"internal-error"));return}const m=d.render;d.render=(g,y)=>{const E=m(g,y);return this.counter++,E},this.hostLanguage=t,s(d)};const c=`${Hk()}?${so({onload:t_,render:"explicit",hl:t})}`;Cy(c).catch(()=>{clearTimeout(l),a($n(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!Ft().grecaptcha?.render&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function kP(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class PP{async load(e){return new Qk(e)}clearedOneInstance(){}}const dc="recaptcha",MP={theme:"light",type:"image"};class Ny{constructor(e,t,s={...MP}){this.parameters=s,this.type=dc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=fa(e),this.isInvisible=this.parameters.size==="invisible",fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const a=typeof t=="string"?document.getElementById(t):t;fe(a,this.auth,"argument-error"),this.container=a,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new PP:new DP,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),s=t.getResponse(e);return s||new Promise(a=>{const l=c=>{c&&(this.tokenChangeListeners.delete(l),a(c))};this.tokenChangeListeners.add(l),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){fe(!this.parameters.sitekey,this.auth,"argument-error"),fe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(s=>s(t)),typeof e=="function")e(t);else if(typeof e=="string"){const s=Ft()[e];typeof s=="function"&&s(t)}}}assertNotDestroyed(){fe(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){fe(CC()&&!Iy(),this.auth,"internal-error"),await LP(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await Ak(this.auth);fe(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return fe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function LP(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}class VP{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=fc._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function xy(n,e,t){if(Wn(n.app))return Promise.reject(Kr(n));const s=fa(n),a=await UP(s,e,At(t));return new VP(a,l=>dP(s,l))}async function UP(n,e,t){if(!n._getRecaptchaConfig())try{await eP(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const a=s.session;if("phoneNumber"in s){fe(a.type==="enroll",n,"internal-error");const l={idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await e_(n,l,"mfaSmsEnrollment",async(g,y)=>{if(y.phoneEnrollmentInfo.captchaResponse===hc){fe(t?.type===dc,g,"argument-error");const E=await n_(g,y,t);return ew(g,E)}return ew(g,y)},"PHONE_PROVIDER").catch(g=>Promise.reject(g))).phoneSessionInfo.sessionInfo}else{fe(a.type==="signin",n,"internal-error");const l=s.multiFactorHint?.uid||s.multiFactorUid;fe(l,n,"missing-multi-factor-info");const c={mfaPendingCredential:a.credential,mfaEnrollmentId:l,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await e_(n,c,"mfaSmsSignIn",async(y,E)=>{if(E.phoneSignInInfo.captchaResponse===hc){fe(t?.type===dc,y,"argument-error");const b=await n_(y,E,t);return iw(y,b)}return iw(y,E)},"PHONE_PROVIDER").catch(y=>Promise.reject(y))).phoneResponseInfo.sessionInfo}}else{const a={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await e_(n,a,"sendVerificationCode",async(m,g)=>{if(g.captchaResponse===hc){fe(t?.type===dc,m,"argument-error");const y=await n_(m,g,t);return Jb(m,y)}return Jb(m,g)},"PHONE_PROVIDER").catch(m=>Promise.reject(m))).sessionInfo}}finally{t?._reset()}}async function n_(n,e,t){fe(t.type===dc,n,"argument-error");const s=await t.verify();fe(typeof s=="string",n,"argument-error");const a={...e};if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.captchaResponse,d=a.phoneEnrollmentInfo.clientType,m=a.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:s,captchaResponse:c,clientType:d,recaptchaVersion:m}}),a}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.captchaResponse,c=a.phoneSignInInfo.clientType,d=a.phoneSignInInfo.recaptchaVersion;return Object.assign(a,{phoneSignInInfo:{recaptchaToken:s,captchaResponse:l,clientType:c,recaptchaVersion:d}}),a}else return Object.assign(a,{recaptchaToken:s}),a}function jP(n,e){return e?Fs(e):(fe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Oy extends Ay{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return fl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return fl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function zP(n){return KC(n.auth,new Oy(n),n.bypassAuthState)}function BP(n){const{auth:e,user:t}=n;return fe(t,e,"internal-error"),fP(t,new Oy(n),n.bypassAuthState)}async function FP(n){const{auth:e,user:t}=n;return fe(t,e,"internal-error"),hP(t,new Oy(n),n.bypassAuthState)}class tA{constructor(e,t,s,a,l=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zP;case"linkViaPopup":case"linkViaRedirect":return FP;case"reauthViaPopup":case"reauthViaRedirect":return BP;default:Js(this.auth,"internal-error")}}resolve(e){Zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const HP=new $c(2e3,1e4);class ll extends tA{constructor(e,t,s,a,l){super(e,t,a,l),this.provider=s,this.authWindow=null,this.pollId=null,ll.currentPopupAction&&ll.currentPopupAction.cancel(),ll.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return fe(e,this.auth,"internal-error"),e}async onExecution(){Zs(this.filter.length===1,"Popup operations only handle one event");const e=Ry();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject($n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject($n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ll.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,HP.get())};e()}}ll.currentPopupAction=null;const qP="pendingRedirect",ld=new Map;class GP extends tA{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=ld.get(this.auth._key());if(!e){try{const s=await YP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}ld.set(this.auth._key(),e)}return this.bypassAuthState||ld.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YP(n,e){const t=WP(e),s=QP(n);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function KP(n,e){ld.set(n._key(),e)}function QP(n){return Fs(n._redirectPersistence)}function WP(n){return od(qP,n.config.apiKey,n.name)}async function XP(n,e,t=!1){if(Wn(n.app))return Promise.reject(Kr(n));const s=fa(n),a=jP(s,e),c=await new GP(s,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}const $P=600*1e3;class JP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZP(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!nA(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError($n(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$P&&this.cachedEventUids.clear(),this.cachedEventUids.has(sw(e))}saveEventToCache(e){this.cachedEventUids.add(sw(e)),this.lastProcessedEventTime=Date.now()}}function sw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function nA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function ZP(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nA(n);default:return!1}}async function eM(n,e={}){return ji(n,"GET","/v1/projects",e)}const tM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nM=/^https?/;async function iM(n){if(n.config.emulator)return;const{authorizedDomains:e}=await eM(n);for(const t of e)try{if(sM(t))return}catch{}Js(n,"unauthorized-domain")}function sM(n){const e=R_(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!nM.test(t))return!1;if(tM.test(n))return s===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}const rM=new $c(3e4,6e4);function rw(){const n=Ft().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function aM(n){return new Promise((e,t)=>{function s(){rw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{rw(),t($n(n,"network-request-failed"))},timeout:rM.get()})}if(Ft().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ft().gapi?.load)s();else{const a=FC("iframefcb");return Ft()[a]=()=>{gapi.load?s():t($n(n,"network-request-failed"))},Cy(`${Gk()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw ud=null,e})}let ud=null;function oM(n){return ud=ud||aM(n),ud}const lM=new $c(5e3,15e3),uM="__/auth/iframe",cM="emulator/auth/iframe",hM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dM(n){const e=n.config;fe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Sy(e,cM):`https://${n.config.authDomain}/${uM}`,s={apiKey:e.apiKey,appName:n.name,v:ha},a=fM.get(n.config.apiHost);a&&(s.eid=a);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${so(s).slice(1)}`}async function mM(n){const e=await oM(n),t=Ft().gapi;return fe(t,n,"internal-error"),e.open({where:document.body,url:dM(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hM,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const c=$n(n,"network-request-failed"),d=Ft().setTimeout(()=>{l(c)},lM.get());function m(){Ft().clearTimeout(d),a(s)}s.ping(m).then(m,()=>{l(c)})}))}const pM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gM=500,_M=600,yM="_blank",vM="http://localhost";class aw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EM(n,e,t,s=gM,a=_M){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const m={...pM,width:s.toString(),height:a.toString(),top:l,left:c},g=En().toLowerCase();t&&(d=MC(g)?yM:t),kC(g)&&(e=e||vM,m.scrollbars="yes");const y=Object.entries(m).reduce((b,[A,I])=>`${b}${A}=${I},`,"");if(Mk(g)&&d!=="_self")return TM(e||"",d),new aw(null);const E=window.open(e||"",d,y);fe(E,n,"popup-blocked");try{E.focus()}catch{}return new aw(E)}function TM(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}const SM="__/auth/handler",bM="emulator/auth/handler",wM=encodeURIComponent("fac");async function ow(n,e,t,s,a,l){fe(n.config.authDomain,n,"auth-domain-config-required"),fe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:ha,eventId:a};if(e instanceof GC){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",T_(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,E]of Object.entries({}))c[y]=E}if(e instanceof Zc){const y=e.getScopes().filter(E=>E!=="");y.length>0&&(c.scopes=y.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const m=await n._getAppCheckToken(),g=m?`#${wM}=${encodeURIComponent(m)}`:"";return`${CM(n)}?${so(d).slice(1)}${g}`}function CM({config:n}){return n.emulator?Sy(n,bM):`https://${n.authDomain}/${SM}`}const i_="webStorageSupport";class AM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$C,this._completeRedirectFn=XP,this._overrideRedirectResult=KP}async _openPopup(e,t,s,a){Zs(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await ow(e,t,s,R_(),a);return EM(e,l,Ry())}async _openRedirect(e,t,s,a){await this._originValidation(e);const l=await ow(e,t,s,R_(),a);return TP(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Zs(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await mM(e),s=new JP(e);return t.register("authEvent",a=>(fe(a?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(i_,{type:i_},a=>{const l=a?.[0]?.[i_];l!==void 0&&t(!!l),Js(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=iM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return zC()||PC()||wy()}}const RM=AM;var lw="@firebase/auth",uw="1.11.1";class IM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function NM(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xM(n){ea(new Xs("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=s.options;fe(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BC(n)},g=new Bk(s,a,l,m);return nP(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),ea(new Xs("auth-internal",e=>{const t=fa(e.getProvider("auth").getImmediate());return(s=>new IM(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),gi(lw,uw,NM(n)),gi(lw,uw,"esm2020")}const OM=300,DM=mC("authIdTokenMaxAge")||OM;let cw=null;const kM=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>DM)return;const a=t?.token;cw!==a&&(cw=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function PM(n=lm()){const e=Xc(n,"auth");if(e.isInitialized())return e.getImmediate();const t=tP(n,{popupRedirectResolver:RM,persistence:[xP,yP,$C]}),s=mC("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=kM(l.toString());pP(t,c,()=>c(t.currentUser)),mP(t,d=>c(d))}}const a=fC("auth");return a&&iP(t,`http://${a}`),t}function MM(){return document.getElementsByTagName("head")?.[0]??document}Fk({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=a=>{const l=$n("internal-error");l.customData=a,t(l)},s.type="text/javascript",s.charset="UTF-8",MM().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xM("Browser");var hw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Qr,iA;(function(){var n;function e(x,R){function N(){}N.prototype=R.prototype,x.F=R.prototype,x.prototype=new N,x.prototype.constructor=x,x.D=function(U,k,B){for(var O=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)O[Ze-2]=arguments[Ze];return R.prototype[k].apply(U,O)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(x,R,N){N||(N=0);const U=Array(16);if(typeof R=="string")for(var k=0;k<16;++k)U[k]=R.charCodeAt(N++)|R.charCodeAt(N++)<<8|R.charCodeAt(N++)<<16|R.charCodeAt(N++)<<24;else for(k=0;k<16;++k)U[k]=R[N++]|R[N++]<<8|R[N++]<<16|R[N++]<<24;R=x.g[0],N=x.g[1],k=x.g[2];let B=x.g[3],O;O=R+(B^N&(k^B))+U[0]+3614090360&4294967295,R=N+(O<<7&4294967295|O>>>25),O=B+(k^R&(N^k))+U[1]+3905402710&4294967295,B=R+(O<<12&4294967295|O>>>20),O=k+(N^B&(R^N))+U[2]+606105819&4294967295,k=B+(O<<17&4294967295|O>>>15),O=N+(R^k&(B^R))+U[3]+3250441966&4294967295,N=k+(O<<22&4294967295|O>>>10),O=R+(B^N&(k^B))+U[4]+4118548399&4294967295,R=N+(O<<7&4294967295|O>>>25),O=B+(k^R&(N^k))+U[5]+1200080426&4294967295,B=R+(O<<12&4294967295|O>>>20),O=k+(N^B&(R^N))+U[6]+2821735955&4294967295,k=B+(O<<17&4294967295|O>>>15),O=N+(R^k&(B^R))+U[7]+4249261313&4294967295,N=k+(O<<22&4294967295|O>>>10),O=R+(B^N&(k^B))+U[8]+1770035416&4294967295,R=N+(O<<7&4294967295|O>>>25),O=B+(k^R&(N^k))+U[9]+2336552879&4294967295,B=R+(O<<12&4294967295|O>>>20),O=k+(N^B&(R^N))+U[10]+4294925233&4294967295,k=B+(O<<17&4294967295|O>>>15),O=N+(R^k&(B^R))+U[11]+2304563134&4294967295,N=k+(O<<22&4294967295|O>>>10),O=R+(B^N&(k^B))+U[12]+1804603682&4294967295,R=N+(O<<7&4294967295|O>>>25),O=B+(k^R&(N^k))+U[13]+4254626195&4294967295,B=R+(O<<12&4294967295|O>>>20),O=k+(N^B&(R^N))+U[14]+2792965006&4294967295,k=B+(O<<17&4294967295|O>>>15),O=N+(R^k&(B^R))+U[15]+1236535329&4294967295,N=k+(O<<22&4294967295|O>>>10),O=R+(k^B&(N^k))+U[1]+4129170786&4294967295,R=N+(O<<5&4294967295|O>>>27),O=B+(N^k&(R^N))+U[6]+3225465664&4294967295,B=R+(O<<9&4294967295|O>>>23),O=k+(R^N&(B^R))+U[11]+643717713&4294967295,k=B+(O<<14&4294967295|O>>>18),O=N+(B^R&(k^B))+U[0]+3921069994&4294967295,N=k+(O<<20&4294967295|O>>>12),O=R+(k^B&(N^k))+U[5]+3593408605&4294967295,R=N+(O<<5&4294967295|O>>>27),O=B+(N^k&(R^N))+U[10]+38016083&4294967295,B=R+(O<<9&4294967295|O>>>23),O=k+(R^N&(B^R))+U[15]+3634488961&4294967295,k=B+(O<<14&4294967295|O>>>18),O=N+(B^R&(k^B))+U[4]+3889429448&4294967295,N=k+(O<<20&4294967295|O>>>12),O=R+(k^B&(N^k))+U[9]+568446438&4294967295,R=N+(O<<5&4294967295|O>>>27),O=B+(N^k&(R^N))+U[14]+3275163606&4294967295,B=R+(O<<9&4294967295|O>>>23),O=k+(R^N&(B^R))+U[3]+4107603335&4294967295,k=B+(O<<14&4294967295|O>>>18),O=N+(B^R&(k^B))+U[8]+1163531501&4294967295,N=k+(O<<20&4294967295|O>>>12),O=R+(k^B&(N^k))+U[13]+2850285829&4294967295,R=N+(O<<5&4294967295|O>>>27),O=B+(N^k&(R^N))+U[2]+4243563512&4294967295,B=R+(O<<9&4294967295|O>>>23),O=k+(R^N&(B^R))+U[7]+1735328473&4294967295,k=B+(O<<14&4294967295|O>>>18),O=N+(B^R&(k^B))+U[12]+2368359562&4294967295,N=k+(O<<20&4294967295|O>>>12),O=R+(N^k^B)+U[5]+4294588738&4294967295,R=N+(O<<4&4294967295|O>>>28),O=B+(R^N^k)+U[8]+2272392833&4294967295,B=R+(O<<11&4294967295|O>>>21),O=k+(B^R^N)+U[11]+1839030562&4294967295,k=B+(O<<16&4294967295|O>>>16),O=N+(k^B^R)+U[14]+4259657740&4294967295,N=k+(O<<23&4294967295|O>>>9),O=R+(N^k^B)+U[1]+2763975236&4294967295,R=N+(O<<4&4294967295|O>>>28),O=B+(R^N^k)+U[4]+1272893353&4294967295,B=R+(O<<11&4294967295|O>>>21),O=k+(B^R^N)+U[7]+4139469664&4294967295,k=B+(O<<16&4294967295|O>>>16),O=N+(k^B^R)+U[10]+3200236656&4294967295,N=k+(O<<23&4294967295|O>>>9),O=R+(N^k^B)+U[13]+681279174&4294967295,R=N+(O<<4&4294967295|O>>>28),O=B+(R^N^k)+U[0]+3936430074&4294967295,B=R+(O<<11&4294967295|O>>>21),O=k+(B^R^N)+U[3]+3572445317&4294967295,k=B+(O<<16&4294967295|O>>>16),O=N+(k^B^R)+U[6]+76029189&4294967295,N=k+(O<<23&4294967295|O>>>9),O=R+(N^k^B)+U[9]+3654602809&4294967295,R=N+(O<<4&4294967295|O>>>28),O=B+(R^N^k)+U[12]+3873151461&4294967295,B=R+(O<<11&4294967295|O>>>21),O=k+(B^R^N)+U[15]+530742520&4294967295,k=B+(O<<16&4294967295|O>>>16),O=N+(k^B^R)+U[2]+3299628645&4294967295,N=k+(O<<23&4294967295|O>>>9),O=R+(k^(N|~B))+U[0]+4096336452&4294967295,R=N+(O<<6&4294967295|O>>>26),O=B+(N^(R|~k))+U[7]+1126891415&4294967295,B=R+(O<<10&4294967295|O>>>22),O=k+(R^(B|~N))+U[14]+2878612391&4294967295,k=B+(O<<15&4294967295|O>>>17),O=N+(B^(k|~R))+U[5]+4237533241&4294967295,N=k+(O<<21&4294967295|O>>>11),O=R+(k^(N|~B))+U[12]+1700485571&4294967295,R=N+(O<<6&4294967295|O>>>26),O=B+(N^(R|~k))+U[3]+2399980690&4294967295,B=R+(O<<10&4294967295|O>>>22),O=k+(R^(B|~N))+U[10]+4293915773&4294967295,k=B+(O<<15&4294967295|O>>>17),O=N+(B^(k|~R))+U[1]+2240044497&4294967295,N=k+(O<<21&4294967295|O>>>11),O=R+(k^(N|~B))+U[8]+1873313359&4294967295,R=N+(O<<6&4294967295|O>>>26),O=B+(N^(R|~k))+U[15]+4264355552&4294967295,B=R+(O<<10&4294967295|O>>>22),O=k+(R^(B|~N))+U[6]+2734768916&4294967295,k=B+(O<<15&4294967295|O>>>17),O=N+(B^(k|~R))+U[13]+1309151649&4294967295,N=k+(O<<21&4294967295|O>>>11),O=R+(k^(N|~B))+U[4]+4149444226&4294967295,R=N+(O<<6&4294967295|O>>>26),O=B+(N^(R|~k))+U[11]+3174756917&4294967295,B=R+(O<<10&4294967295|O>>>22),O=k+(R^(B|~N))+U[2]+718787259&4294967295,k=B+(O<<15&4294967295|O>>>17),O=N+(B^(k|~R))+U[9]+3951481745&4294967295,x.g[0]=x.g[0]+R&4294967295,x.g[1]=x.g[1]+(k+(O<<21&4294967295|O>>>11))&4294967295,x.g[2]=x.g[2]+k&4294967295,x.g[3]=x.g[3]+B&4294967295}s.prototype.v=function(x,R){R===void 0&&(R=x.length);const N=R-this.blockSize,U=this.C;let k=this.h,B=0;for(;B<R;){if(k==0)for(;B<=N;)a(this,x,B),B+=this.blockSize;if(typeof x=="string"){for(;B<R;)if(U[k++]=x.charCodeAt(B++),k==this.blockSize){a(this,U),k=0;break}}else for(;B<R;)if(U[k++]=x[B++],k==this.blockSize){a(this,U),k=0;break}}this.h=k,this.o+=R},s.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var R=1;R<x.length-8;++R)x[R]=0;R=this.o*8;for(var N=x.length-8;N<x.length;++N)x[N]=R&255,R/=256;for(this.v(x),x=Array(16),R=0,N=0;N<4;++N)for(let U=0;U<32;U+=8)x[R++]=this.g[N]>>>U&255;return x};function l(x,R){var N=d;return Object.prototype.hasOwnProperty.call(N,x)?N[x]:N[x]=R(x)}function c(x,R){this.h=R;const N=[];let U=!0;for(let k=x.length-1;k>=0;k--){const B=x[k]|0;U&&B==R||(N[k]=B,U=!1)}this.g=N}var d={};function m(x){return-128<=x&&x<128?l(x,function(R){return new c([R|0],R<0?-1:0)}):new c([x|0],x<0?-1:0)}function g(x){if(isNaN(x)||!isFinite(x))return E;if(x<0)return V(g(-x));const R=[];let N=1;for(let U=0;x>=N;U++)R[U]=x/N|0,N*=4294967296;return new c(R,0)}function y(x,R){if(x.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(x.charAt(0)=="-")return V(y(x.substring(1),R));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=g(Math.pow(R,8));let U=E;for(let B=0;B<x.length;B+=8){var k=Math.min(8,x.length-B);const O=parseInt(x.substring(B,B+k),R);k<8?(k=g(Math.pow(R,k)),U=U.j(k).add(g(O))):(U=U.j(N),U=U.add(g(O)))}return U}var E=m(0),b=m(1),A=m(16777216);n=c.prototype,n.m=function(){if(j(this))return-V(this).m();let x=0,R=1;for(let N=0;N<this.g.length;N++){const U=this.i(N);x+=(U>=0?U:4294967296+U)*R,R*=4294967296}return x},n.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(I(this))return"0";if(j(this))return"-"+V(this).toString(x);const R=g(Math.pow(x,6));var N=this;let U="";for(;;){const k=ue(N,R).g;N=$(N,k.j(R));let B=((N.g.length>0?N.g[0]:N.h)>>>0).toString(x);if(N=k,I(N))return B+U;for(;B.length<6;)B="0"+B;U=B+U}},n.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function I(x){if(x.h!=0)return!1;for(let R=0;R<x.g.length;R++)if(x.g[R]!=0)return!1;return!0}function j(x){return x.h==-1}n.l=function(x){return x=$(this,x),j(x)?-1:I(x)?0:1};function V(x){const R=x.g.length,N=[];for(let U=0;U<R;U++)N[U]=~x.g[U];return new c(N,~x.h).add(b)}n.abs=function(){return j(this)?V(this):this},n.add=function(x){const R=Math.max(this.g.length,x.g.length),N=[];let U=0;for(let k=0;k<=R;k++){let B=U+(this.i(k)&65535)+(x.i(k)&65535),O=(B>>>16)+(this.i(k)>>>16)+(x.i(k)>>>16);U=O>>>16,B&=65535,O&=65535,N[k]=O<<16|B}return new c(N,N[N.length-1]&-2147483648?-1:0)};function $(x,R){return x.add(V(R))}n.j=function(x){if(I(this)||I(x))return E;if(j(this))return j(x)?V(this).j(V(x)):V(V(this).j(x));if(j(x))return V(this.j(V(x)));if(this.l(A)<0&&x.l(A)<0)return g(this.m()*x.m());const R=this.g.length+x.g.length,N=[];for(var U=0;U<2*R;U++)N[U]=0;for(U=0;U<this.g.length;U++)for(let k=0;k<x.g.length;k++){const B=this.i(U)>>>16,O=this.i(U)&65535,Ze=x.i(k)>>>16,Oe=x.i(k)&65535;N[2*U+2*k]+=O*Oe,K(N,2*U+2*k),N[2*U+2*k+1]+=B*Oe,K(N,2*U+2*k+1),N[2*U+2*k+1]+=O*Ze,K(N,2*U+2*k+1),N[2*U+2*k+2]+=B*Ze,K(N,2*U+2*k+2)}for(x=0;x<R;x++)N[x]=N[2*x+1]<<16|N[2*x];for(x=R;x<2*R;x++)N[x]=0;return new c(N,0)};function K(x,R){for(;(x[R]&65535)!=x[R];)x[R+1]+=x[R]>>>16,x[R]&=65535,R++}function ee(x,R){this.g=x,this.h=R}function ue(x,R){if(I(R))throw Error("division by zero");if(I(x))return new ee(E,E);if(j(x))return R=ue(V(x),R),new ee(V(R.g),V(R.h));if(j(R))return R=ue(x,V(R)),new ee(V(R.g),R.h);if(x.g.length>30){if(j(x)||j(R))throw Error("slowDivide_ only works with positive integers.");for(var N=b,U=R;U.l(x)<=0;)N=_e(N),U=_e(U);var k=Se(N,1),B=Se(U,1);for(U=Se(U,2),N=Se(N,2);!I(U);){var O=B.add(U);O.l(x)<=0&&(k=k.add(N),B=O),U=Se(U,1),N=Se(N,1)}return R=$(x,k.j(R)),new ee(k,R)}for(k=E;x.l(R)>=0;){for(N=Math.max(1,Math.floor(x.m()/R.m())),U=Math.ceil(Math.log(N)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),B=g(N),O=B.j(R);j(O)||O.l(x)>0;)N-=U,B=g(N),O=B.j(R);I(B)&&(B=b),k=k.add(B),x=$(x,O)}return new ee(k,x)}n.B=function(x){return ue(this,x).h},n.and=function(x){const R=Math.max(this.g.length,x.g.length),N=[];for(let U=0;U<R;U++)N[U]=this.i(U)&x.i(U);return new c(N,this.h&x.h)},n.or=function(x){const R=Math.max(this.g.length,x.g.length),N=[];for(let U=0;U<R;U++)N[U]=this.i(U)|x.i(U);return new c(N,this.h|x.h)},n.xor=function(x){const R=Math.max(this.g.length,x.g.length),N=[];for(let U=0;U<R;U++)N[U]=this.i(U)^x.i(U);return new c(N,this.h^x.h)};function _e(x){const R=x.g.length+1,N=[];for(let U=0;U<R;U++)N[U]=x.i(U)<<1|x.i(U-1)>>>31;return new c(N,x.h)}function Se(x,R){const N=R>>5;R%=32;const U=x.g.length-N,k=[];for(let B=0;B<U;B++)k[B]=R>0?x.i(B+N)>>>R|x.i(B+N+1)<<32-R:x.i(B+N);return new c(k,x.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,iA=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=y,Qr=c}).apply(typeof hw<"u"?hw:typeof self<"u"?self:typeof window<"u"?window:{});var Wf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var sA,rc,rA,cd,x_,aA,oA,lA;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wf=="object"&&Wf];for(var _=0;_<h.length;++_){var S=h[_];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var s=t(this);function a(h,_){if(_)e:{var S=s;h=h.split(".");for(var C=0;C<h.length-1;C++){var F=h[C];if(!(F in S))break e;S=S[F]}h=h[h.length-1],C=S[h],_=_(C),_!=C&&_!=null&&e(S,h,{configurable:!0,writable:!0,value:_})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(_){var S=[],C;for(C in _)Object.prototype.hasOwnProperty.call(_,C)&&S.push([C,_[C]]);return S}});var l=l||{},c=this||self;function d(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function m(h,_,S){return h.call.apply(h.bind,arguments)}function g(h,_,S){return g=m,g.apply(null,arguments)}function y(h,_){var S=Array.prototype.slice.call(arguments,1);return function(){var C=S.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function E(h,_){function S(){}S.prototype=_.prototype,h.Z=_.prototype,h.prototype=new S,h.prototype.constructor=h,h.Ob=function(C,F,Q){for(var oe=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)oe[Ie-2]=arguments[Ie];return _.prototype[F].apply(C,oe)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function A(h){const _=h.length;if(_>0){const S=Array(_);for(let C=0;C<_;C++)S[C]=h[C];return S}return[]}function I(h,_){for(let C=1;C<arguments.length;C++){const F=arguments[C];var S=typeof F;if(S=S!="object"?S:F?Array.isArray(F)?"array":S:"null",S=="array"||S=="object"&&typeof F.length=="number"){S=h.length||0;const Q=F.length||0;h.length=S+Q;for(let oe=0;oe<Q;oe++)h[S+oe]=F[oe]}else h.push(F)}}class j{constructor(_,S){this.i=_,this.j=S,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function V(h){c.setTimeout(()=>{throw h},0)}function $(){var h=x;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class K{constructor(){this.h=this.g=null}add(_,S){const C=ee.get();C.set(_,S),this.h?this.h.next=C:this.g=C,this.h=C}}var ee=new j(()=>new ue,h=>h.reset());class ue{constructor(){this.next=this.g=this.h=null}set(_,S){this.h=_,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let _e,Se=!1,x=new K,R=()=>{const h=Promise.resolve(void 0);_e=()=>{h.then(N)}};function N(){for(var h;h=$();){try{h.h.call(h.g)}catch(S){V(S)}var _=ee;_.j(h),_.h<100&&(_.h++,h.next=_.g,_.g=h)}Se=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const S=()=>{};c.addEventListener("test",S,_),c.removeEventListener("test",S,_)}catch{}return h})();function O(h){return/^[\s\xa0]*$/.test(h)}function Ze(h,_){k.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,_)}E(Ze,k),Ze.prototype.init=function(h,_){const S=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget,_||(S=="mouseover"?_=h.fromElement:S=="mouseout"&&(_=h.toElement)),this.relatedTarget=_,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ze.Z.h.call(this)},Ze.prototype.h=function(){Ze.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Oe="closure_listenable_"+(Math.random()*1e6|0),J=0;function se(h,_,S,C,F){this.listener=h,this.proxy=null,this.src=_,this.type=S,this.capture=!!C,this.ha=F,this.key=++J,this.da=this.fa=!1}function he(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ke(h,_,S){for(const C in h)_.call(S,h[C],C,h)}function Pe(h,_){for(const S in h)_.call(void 0,h[S],S,h)}function M(h){const _={};for(const S in h)_[S]=h[S];return _}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X(h,_){let S,C;for(let F=1;F<arguments.length;F++){C=arguments[F];for(S in C)h[S]=C[S];for(let Q=0;Q<G.length;Q++)S=G[Q],Object.prototype.hasOwnProperty.call(C,S)&&(h[S]=C[S])}}function le(h){this.src=h,this.g={},this.h=0}le.prototype.add=function(h,_,S,C,F){const Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);const oe=ve(h,_,C,F);return oe>-1?(_=h[oe],S||(_.fa=!1)):(_=new se(_,this.src,Q,!!C,F),_.fa=S,h.push(_)),_};function ye(h,_){const S=_.type;if(S in h.g){var C=h.g[S],F=Array.prototype.indexOf.call(C,_,void 0),Q;(Q=F>=0)&&Array.prototype.splice.call(C,F,1),Q&&(he(_),h.g[S].length==0&&(delete h.g[S],h.h--))}}function ve(h,_,S,C){for(let F=0;F<h.length;++F){const Q=h[F];if(!Q.da&&Q.listener==_&&Q.capture==!!S&&Q.ha==C)return F}return-1}var De="closure_lm_"+(Math.random()*1e6|0),ut={};function Xe(h,_,S,C,F){if(Array.isArray(_)){for(let Q=0;Q<_.length;Q++)Xe(h,_[Q],S,C,F);return null}return S=Ql(S),h&&h[Oe]?h.J(_,S,d(C)?!!C.capture:!1,F):vi(h,_,S,!1,C,F)}function vi(h,_,S,C,F,Q){if(!_)throw Error("Invalid event type");const oe=d(F)?!!F.capture:!!F;let Ie=da(h);if(Ie||(h[De]=Ie=new le(h)),S=Ie.add(_,S,C,oe,Q),S.proxy)return S;if(C=Zn(),S.proxy=C,C.src=h,C.listener=S,h.addEventListener)B||(F=oe),F===void 0&&(F=!1),h.addEventListener(_.toString(),C,F);else if(h.attachEvent)h.attachEvent(Bi(_.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return S}function Zn(){function h(S){return _.call(h.src,h.listener,S)}const _=Yl;return h}function zi(h,_,S,C,F){if(Array.isArray(_))for(var Q=0;Q<_.length;Q++)zi(h,_[Q],S,C,F);else C=d(C)?!!C.capture:!!C,S=Ql(S),h&&h[Oe]?(h=h.i,Q=String(_).toString(),Q in h.g&&(_=h.g[Q],S=ve(_,S,C,F),S>-1&&(he(_[S]),Array.prototype.splice.call(_,S,1),_.length==0&&(delete h.g[Q],h.h--)))):h&&(h=da(h))&&(_=h.g[_.toString()],h=-1,_&&(h=ve(_,S,C,F)),(S=h>-1?_[h]:null)&&fo(S))}function fo(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Oe])ye(_.i,h);else{var S=h.type,C=h.proxy;_.removeEventListener?_.removeEventListener(S,C,h.capture):_.detachEvent?_.detachEvent(Bi(S),C):_.addListener&&_.removeListener&&_.removeListener(C),(S=da(_))?(ye(S,h),S.h==0&&(S.src=null,_[De]=null)):he(h)}}}function Bi(h){return h in ut?ut[h]:ut[h]="on"+h}function Yl(h,_){if(h.da)h=!0;else{_=new Ze(_,this);const S=h.listener,C=h.ha||h.src;h.fa&&fo(h),h=S.call(C,_)}return h}function da(h){return h=h[De],h instanceof le?h:null}var Kl="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ql(h){return typeof h=="function"?h:(h[Kl]||(h[Kl]=function(_){return h.handleEvent(_)}),h[Kl])}function Dt(){U.call(this),this.i=new le(this),this.M=this,this.G=null}E(Dt,U),Dt.prototype[Oe]=!0,Dt.prototype.removeEventListener=function(h,_,S,C){zi(this,h,_,S,C)};function Gt(h,_){var S,C=h.G;if(C)for(S=[];C;C=C.G)S.push(C);if(h=h.M,C=_.type||_,typeof _=="string")_=new k(_,h);else if(_ instanceof k)_.target=_.target||h;else{var F=_;_=new k(C,h),X(_,F)}F=!0;let Q,oe;if(S)for(oe=S.length-1;oe>=0;oe--)Q=_.g=S[oe],F=sr(Q,C,!0,_)&&F;if(Q=_.g=h,F=sr(Q,C,!0,_)&&F,F=sr(Q,C,!1,_)&&F,S)for(oe=0;oe<S.length;oe++)Q=_.g=S[oe],F=sr(Q,C,!1,_)&&F}Dt.prototype.N=function(){if(Dt.Z.N.call(this),this.i){var h=this.i;for(const _ in h.g){const S=h.g[_];for(let C=0;C<S.length;C++)he(S[C]);delete h.g[_],h.h--}}this.G=null},Dt.prototype.J=function(h,_,S,C){return this.i.add(String(h),_,!1,S,C)},Dt.prototype.K=function(h,_,S,C){return this.i.add(String(h),_,!0,S,C)};function sr(h,_,S,C){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();let F=!0;for(let Q=0;Q<_.length;++Q){const oe=_[Q];if(oe&&!oe.da&&oe.capture==S){const Ie=oe.listener,It=oe.ha||oe.src;oe.fa&&ye(h.i,oe),F=Ie.call(It,C)!==!1&&F}}return F&&!C.defaultPrevented}function Bm(h,_){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:c.setTimeout(h,_||0)}function _h(h){h.g=Bm(()=>{h.g=null,h.i&&(h.i=!1,_h(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Tn extends U{constructor(_,S){super(),this.m=_,this.l=S,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:_h(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ma(h){U.call(this),this.h=h,this.g={}}E(ma,U);var Wl=[];function Xl(h){ke(h.g,function(_,S){this.g.hasOwnProperty(S)&&fo(_)},h),h.g={}}ma.prototype.N=function(){ma.Z.N.call(this),Xl(this)},ma.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rr=c.JSON.stringify,Fm=c.JSON.parse,yh=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function vh(){}function Eh(){}var Ei={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function rn(){k.call(this,"d")}E(rn,k);function ei(){k.call(this,"c")}E(ei,k);var Rt={},Th=null;function mo(){return Th=Th||new Dt}Rt.Ia="serverreachability";function Sh(h){k.call(this,Rt.Ia,h)}E(Sh,k);function Fi(h){const _=mo();Gt(_,new Sh(_))}Rt.STAT_EVENT="statevent";function pa(h,_){k.call(this,Rt.STAT_EVENT,h),this.stat=_}E(pa,k);function kt(h){const _=mo();Gt(_,new pa(_,h))}Rt.Ja="timingevent";function Hi(h,_){k.call(this,Rt.Ja,h),this.size=_}E(Hi,k);function qi(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},_)}function Ti(){this.g=!0}Ti.prototype.ua=function(){this.g=!1};function Hm(h,_,S,C,F,Q){h.info(function(){if(h.g)if(Q){var oe="",Ie=Q.split("&");for(let $e=0;$e<Ie.length;$e++){var It=Ie[$e].split("=");if(It.length>1){const _t=It[0];It=It[1];const si=_t.split("_");oe=si.length>=2&&si[1]=="type"?oe+(_t+"="+It+"&"):oe+(_t+"=redacted&")}}}else oe=null;else oe=Q;return"XMLHTTP REQ ("+C+") [attempt "+F+"]: "+_+`
`+S+`
`+oe})}function bh(h,_,S,C,F,Q,oe){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+F+"]: "+_+`
`+S+`
`+Q+" "+oe})}function Gi(h,_,S,C){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+qm(h,S)+(C?" "+C:"")})}function ga(h,_){h.info(function(){return"TIMEOUT: "+_})}Ti.prototype.info=function(){};function qm(h,_){if(!h.g)return _;if(!_)return null;try{const Q=JSON.parse(_);if(Q){for(h=0;h<Q.length;h++)if(Array.isArray(Q[h])){var S=Q[h];if(!(S.length<2)){var C=S[1];if(Array.isArray(C)&&!(C.length<1)){var F=C[0];if(F!="noop"&&F!="stop"&&F!="close")for(let oe=1;oe<C.length;oe++)C[oe]=""}}}}return rr(Q)}catch{return _}}var _a={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},$l={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Jl;function ya(){}E(ya,vh),ya.prototype.g=function(){return new XMLHttpRequest},Jl=new ya;function Ts(h){return encodeURIComponent(String(h))}function wh(h){var _=1;h=h.split(":");const S=[];for(;_>0&&h.length;)S.push(h.shift()),_--;return h.length&&S.push(h.join(":")),S}function Si(h,_,S,C){this.j=h,this.i=_,this.l=S,this.S=C||1,this.V=new ma(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new bi}function bi(){this.i=null,this.g="",this.h=!1}var Pt={},$t={};function Yi(h,_,S){h.M=1,h.A=va(Lt(_)),h.u=S,h.R=!0,po(h,null)}function po(h,_){h.F=Date.now(),Ki(h),h.B=Lt(h.A);var S=h.B,C=h.S;Array.isArray(C)||(C=[String(C)]),vo(S.i,"t",C),h.C=0,S=h.j.L,h.h=new bi,h.g=jh(h.j,S?_:null,!h.u),h.P>0&&(h.O=new Tn(g(h.Y,h,h.g),h.P)),_=h.V,S=h.g,C=h.ba;var F="readystatechange";Array.isArray(F)||(F&&(Wl[0]=F.toString()),F=Wl);for(let Q=0;Q<F.length;Q++){const oe=Xe(S,F[Q],C||_.handleEvent,!1,_.h||_);if(!oe)break;_.g[oe.key]=oe}_=h.J?M(h.J):{},h.u?(h.v||(h.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,_)):(h.v="GET",h.g.ea(h.B,h.v,null,_)),Fi(),Hm(h.i,h.v,h.B,h.l,h.S,h.u)}Si.prototype.ba=function(h){h=h.target;const _=this.O;_&&Ai(h)==3?_.j():this.Y(h)},Si.prototype.Y=function(h){try{if(h==this.g)e:{const Ie=Ai(this.g),It=this.g.ya(),$e=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||an(this.g)))){this.K||Ie!=4||It==7||(It==8||$e<=0?Fi(3):Fi(2)),Qi(this);var _=this.g.ca();this.X=_;var S=Gm(this);if(this.o=_==200,bh(this.i,this.v,this.B,this.l,this.S,Ie,_),this.o){if(this.U&&!this.L){t:{if(this.g){var C,F=this.g;if((C=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(C)){var Q=C;break t}}Q=null}if(h=Q)Gi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Wi(this,h);else{this.o=!1,this.m=3,kt(12),jn(this),ti(this);break e}}if(this.R){h=!0;let _t;for(;!this.K&&this.C<S.length;)if(_t=Ah(this,S),_t==$t){Ie==4&&(this.m=4,kt(14),h=!1),Gi(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==Pt){this.m=4,kt(15),Gi(this.i,this.l,S,"[Invalid Chunk]"),h=!1;break}else Gi(this.i,this.l,_t,null),Wi(this,_t);if(Ch(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||S.length!=0||this.h.h||(this.m=1,kt(16),h=!1),this.o=this.o&&h,!h)Gi(this.i,this.l,S,"[Invalid Chunked Response]"),jn(this),ti(this);else if(S.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),du(oe),oe.P=!0,kt(11))}}else Gi(this.i,this.l,S,null),Wi(this,S);Ie==4&&jn(this),this.o&&!this.K&&(Ie==4?Mh(this.j,this):(this.o=!1,Ki(this)))}else bs(this.g),_==400&&S.indexOf("Unknown SID")>0?(this.m=3,kt(12)):(this.m=0,kt(13)),jn(this),ti(this)}}}catch{}finally{}};function Gm(h){if(!Ch(h))return h.g.la();const _=an(h.g);if(_==="")return"";let S="";const C=_.length,F=Ai(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return jn(h),ti(h),"";h.h.i=new c.TextDecoder}for(let Q=0;Q<C;Q++)h.h.h=!0,S+=h.h.i.decode(_[Q],{stream:!(F&&Q==C-1)});return _.length=0,h.h.g+=S,h.C=0,h.h.g}function Ch(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ah(h,_){var S=h.C,C=_.indexOf(`
`,S);return C==-1?$t:(S=Number(_.substring(S,C)),isNaN(S)?Pt:(C+=1,C+S>_.length?$t:(_=_.slice(C,C+S),h.C=C+S,_)))}Si.prototype.cancel=function(){this.K=!0,jn(this)};function Ki(h){h.T=Date.now()+h.H,go(h,h.H)}function go(h,_){if(h.D!=null)throw Error("WatchDog timer not null");h.D=qi(g(h.aa,h),_)}function Qi(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Si.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(ga(this.i,this.B),this.M!=2&&(Fi(),kt(17)),jn(this),this.m=2,ti(this)):go(this,this.T-h)};function ti(h){h.j.I==0||h.K||Mh(h.j,h)}function jn(h){Qi(h);var _=h.O;_&&typeof _.dispose=="function"&&_.dispose(),h.O=null,Xl(h.V),h.g&&(_=h.g,h.g=null,_.abort(),_.dispose())}function Wi(h,_){try{var S=h.j;if(S.I!=0&&(S.g==h||$i(S.h,h))){if(!h.L&&$i(S.h,h)&&S.I==3){try{var C=S.Ba.g.parse(_)}catch{C=null}if(Array.isArray(C)&&C.length==3){var F=C;if(F[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<h.F)wo(S),dr(S);else break e;Aa(S),kt(18)}}else S.xa=F[1],0<S.xa-S.K&&F[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=qi(g(S.Va,S),6e3));Xi(S.h)<=1&&S.ta&&(S.ta=void 0)}else is(S,11)}else if((h.L||S.g==h)&&wo(S),!O(_))for(F=S.Ba.g.parse(_),_=0;_<F.length;_++){let $e=F[_];const _t=$e[0];if(!(_t<=S.K))if(S.K=_t,$e=$e[1],S.I==2)if($e[0]=="c"){S.M=$e[1],S.ba=$e[2];const si=$e[3];si!=null&&(S.ka=si,S.j.info("VER="+S.ka));const ss=$e[4];ss!=null&&(S.za=ss,S.j.info("SVER="+S.za));const Ri=$e[5];Ri!=null&&typeof Ri=="number"&&Ri>0&&(C=1.5*Ri,S.O=C,S.j.info("backChannelRequestTimeoutMs_="+C)),C=S;const Ii=h.g;if(Ii){const Ra=Ii.g?Ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ra){var Q=C.h;Q.g||Ra.indexOf("spdy")==-1&&Ra.indexOf("quic")==-1&&Ra.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(tu(Q,Q.h),Q.h=null))}if(C.G){const Co=Ii.g?Ii.g.getResponseHeader("X-HTTP-Session-Id"):null;Co&&(C.wa=Co,tt(C.J,C.G,Co))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-h.F,S.j.info("Handshake RTT: "+S.T+"ms")),C=S;var oe=h;if(C.na=Uh(C,C.L?C.ba:null,C.W),oe.L){nu(C.h,oe);var Ie=oe,It=C.O;It&&(Ie.H=It),Ie.D&&(Qi(Ie),Ki(Ie)),C.g=oe}else kh(C);S.i.length>0&&ns(S)}else $e[0]!="stop"&&$e[0]!="close"||is(S,7);else S.I==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?is(S,7):hu(S):$e[0]!="noop"&&S.l&&S.l.qa($e),S.A=0)}}Fi(4)}catch{}}var Mt=class{constructor(h,_){this.g=h,this.map=_}};function Zl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function eu(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Xi(h){return h.h?1:h.g?h.g.size:0}function $i(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function tu(h,_){h.g?h.g.add(_):h.h=_}function nu(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Zl.prototype.cancel=function(){if(this.i=iu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function iu(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const S of h.g.values())_=_.concat(S.G);return _}return A(h.i)}var Rh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _o(h,_){if(h){h=h.split("&");for(let S=0;S<h.length;S++){const C=h[S].indexOf("=");let F,Q=null;C>=0?(F=h[S].substring(0,C),Q=h[S].substring(C+1)):F=h[S],_(F,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function zn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;h instanceof zn?(this.l=h.l,Jt(this,h.j),this.o=h.o,this.g=h.g,ar(this,h.u),this.h=h.h,su(this,Oh(h.i)),this.m=h.m):h&&(_=String(h).match(Rh))?(this.l=!1,Jt(this,_[1]||"",!0),this.o=Ji(_[2]||""),this.g=Ji(_[3]||"",!0),ar(this,_[4]),this.h=Ji(_[5]||"",!0),su(this,_[6]||"",!0),this.m=Ji(_[7]||"")):(this.l=!1,this.i=new lr(null,this.l))}zn.prototype.toString=function(){const h=[];var _=this.j;_&&h.push(Ea(_,yo,!0),":");var S=this.g;return(S||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Ea(_,yo,!0),"@"),h.push(Ts(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&h.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&h.push("/"),h.push(Ea(S,S.charAt(0)=="/"?ru:Ih,!0))),(S=this.i.toString())&&h.push("?",S),(S=this.m)&&h.push("#",Ea(S,Nh)),h.join("")},zn.prototype.resolve=function(h){const _=Lt(this);let S=!!h.j;S?Jt(_,h.j):S=!!h.o,S?_.o=h.o:S=!!h.g,S?_.g=h.g:S=h.u!=null;var C=h.h;if(S)ar(_,h.u);else if(S=!!h.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var F=_.h.lastIndexOf("/");F!=-1&&(C=_.h.slice(0,F+1)+C)}if(F=C,F==".."||F==".")C="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){C=F.lastIndexOf("/",0)==0,F=F.split("/");const Q=[];for(let oe=0;oe<F.length;){const Ie=F[oe++];Ie=="."?C&&oe==F.length&&Q.push(""):Ie==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),C&&oe==F.length&&Q.push("")):(Q.push(Ie),C=!0)}C=Q.join("/")}else C=F}return S?_.h=C:S=h.i.toString()!=="",S?su(_,Oh(h.i)):S=!!h.m,S&&(_.m=h.m),_};function Lt(h){return new zn(h)}function Jt(h,_,S){h.j=S?Ji(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function ar(h,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);h.u=_}else h.u=null}function su(h,_,S){_ instanceof lr?(h.i=_,Eo(h.i,h.l)):(S||(_=Ea(_,or)),h.i=new lr(_,h.l))}function tt(h,_,S){h.i.set(_,S)}function va(h){return tt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ji(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ea(h,_,S){return typeof h=="string"?(h=encodeURI(h).replace(_,Nn),S&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Nn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var yo=/[#\/\?@]/g,Ih=/[#\?:]/g,ru=/[#\?]/g,or=/[#\?@]/g,Nh=/#/g;function lr(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function xn(h){h.g||(h.g=new Map,h.h=0,h.i&&_o(h.i,function(_,S){h.add(decodeURIComponent(_.replace(/\+/g," ")),S)}))}n=lr.prototype,n.add=function(h,_){xn(this),this.i=null,h=ur(this,h);let S=this.g.get(h);return S||this.g.set(h,S=[]),S.push(_),this.h+=1,this};function xh(h,_){xn(h),_=ur(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function au(h,_){return xn(h),_=ur(h,_),h.g.has(_)}n.forEach=function(h,_){xn(this),this.g.forEach(function(S,C){S.forEach(function(F){h.call(_,F,C,this)},this)},this)};function ou(h,_){xn(h);let S=[];if(typeof _=="string")au(h,_)&&(S=S.concat(h.g.get(ur(h,_))));else for(h=Array.from(h.g.values()),_=0;_<h.length;_++)S=S.concat(h[_]);return S}n.set=function(h,_){return xn(this),this.i=null,h=ur(this,h),au(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=ou(this,h),h.length>0?String(h[0]):_):_};function vo(h,_,S){xh(h,_),S.length>0&&(h.i=null,h.g.set(ur(h,_),A(S)),h.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(let C=0;C<_.length;C++){var S=_[C];const F=Ts(S);S=ou(this,S);for(let Q=0;Q<S.length;Q++){let oe=F;S[Q]!==""&&(oe+="="+Ts(S[Q])),h.push(oe)}}return this.i=h.join("&")};function Oh(h){const _=new lr;return _.i=h.i,h.g&&(_.g=new Map(h.g),_.h=h.h),_}function ur(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Eo(h,_){_&&!h.j&&(xn(h),h.i=null,h.g.forEach(function(S,C){const F=C.toLowerCase();C!=F&&(xh(this,C),vo(this,F,S))},h)),h.j=_}function wi(h,_){const S=new Ti;if(c.Image){const C=new Image;C.onload=y(ni,S,"TestLoadImage: loaded",!0,_,C),C.onerror=y(ni,S,"TestLoadImage: error",!1,_,C),C.onabort=y(ni,S,"TestLoadImage: abort",!1,_,C),C.ontimeout=y(ni,S,"TestLoadImage: timeout",!1,_,C),c.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else _(!1)}function lu(h,_){const S=new Ti,C=new AbortController,F=setTimeout(()=>{C.abort(),ni(S,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:C.signal}).then(Q=>{clearTimeout(F),Q.ok?ni(S,"TestPingServer: ok",!0,_):ni(S,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(F),ni(S,"TestPingServer: error",!1,_)})}function ni(h,_,S,C,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),C(S)}catch{}}function cr(){this.g=new yh}function Zi(h){this.i=h.Sb||null,this.h=h.ab||!1}E(Zi,vh),Zi.prototype.g=function(){return new Ta(this.i,this.h)};function Ta(h,_){Dt.call(this),this.H=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Ta,Dt),n=Ta.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=_,this.readyState=1,Ci(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(_.body=h),(this.H||c).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,hr(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ci(this)),this.g&&(this.readyState=3,Ci(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;To(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function To(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?hr(this):Ci(this),this.readyState==3&&To(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,hr(this))},n.Na=function(h){this.g&&(this.response=h,hr(this))},n.ga=function(){this.g&&hr(this)};function hr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Ci(h)}n.setRequestHeader=function(h,_){this.A.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var S=_.next();!S.done;)S=S.value,h.push(S[0]+": "+S[1]),S=_.next();return h.join(`\r
`)};function Ci(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ta.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ii(h){let _="";return ke(h,function(S,C){_+=C,_+=":",_+=S,_+=`\r
`}),_}function Sa(h,_,S){e:{for(C in S){var C=!1;break e}C=!0}C||(S=ii(S),typeof h=="string"?S!=null&&Ts(S):tt(h,_,S))}function st(h){Dt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(st,Dt);var es=/^https?$/i,uu=["POST","PUT"];n=st.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,_,S,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Jl.g(),this.g.onreadystatechange=b(g(this.Ca,this));try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(Q){ba(this,Q);return}if(h=S||"",S=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var F in C)S.set(F,C[F]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const Q of C.keys())S.set(Q,C.get(Q));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(S.keys()).find(Q=>Q.toLowerCase()=="content-type"),F=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(uu,_,void 0)>=0)||C||F||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,oe]of S)this.g.setRequestHeader(Q,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Q){ba(this,Q)}};function ba(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.o=5,cu(h),Ss(h)}function cu(h){h.A||(h.A=!0,Gt(h,"complete"),Gt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Gt(this,"complete"),Gt(this,"abort"),Ss(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ss(this,!0)),st.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?wa(this):this.Xa())},n.Xa=function(){wa(this)};function wa(h){if(h.h&&typeof l<"u"){if(h.v&&Ai(h)==4)setTimeout(h.Ca.bind(h),0);else if(Gt(h,"readystatechange"),Ai(h)==4){h.h=!1;try{const Q=h.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var S;if(!(S=_)){var C;if(C=Q===0){let oe=String(h.D).match(Rh)[1]||null;!oe&&c.self&&c.self.location&&(oe=c.self.location.protocol.slice(0,-1)),C=!es.test(oe?oe.toLowerCase():"")}S=C}if(S)Gt(h,"complete"),Gt(h,"success");else{h.o=6;try{var F=Ai(h)>2?h.g.statusText:""}catch{F=""}h.l=F+" ["+h.ca()+"]",cu(h)}}finally{Ss(h)}}}}function Ss(h,_){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const S=h.g;h.g=null,_||Gt(h,"ready");try{S.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ai(h){return h.g?h.g.readyState:0}n.ca=function(){try{return Ai(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Fm(_)}};function an(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function bs(h){const _={};h=(h.g&&Ai(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(O(h[C]))continue;var S=wh(h[C]);const F=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const Q=_[F]||[];_[F]=Q,Q.push(S)}Pe(_,function(C){return C.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ts(h,_,S){return S&&S.internalChannelParams&&S.internalChannelParams[h]||_}function fr(h){this.za=0,this.i=[],this.j=new Ti,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ts("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ts("baseRetryDelayMs",5e3,h),this.Za=ts("retryDelaySeedMs",1e4,h),this.Ta=ts("forwardChannelMaxRetries",2,h),this.va=ts("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Zl(h&&h.concurrentRequestLimit),this.Ba=new cr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=fr.prototype,n.ka=8,n.I=1,n.connect=function(h,_,S,C){kt(0),this.W=h,this.H=_||{},S&&C!==void 0&&(this.H.OSID=S,this.H.OAID=C),this.F=this.X,this.J=Uh(this,null,this.W),ns(this)};function hu(h){if(So(h),h.I==3){var _=h.V++,S=Lt(h.J);if(tt(S,"SID",h.M),tt(S,"RID",_),tt(S,"TYPE","terminate"),Ca(h,S),_=new Si(h,h.j,_),_.M=2,_.A=va(Lt(S)),S=!1,c.navigator&&c.navigator.sendBeacon)try{S=c.navigator.sendBeacon(_.A.toString(),"")}catch{}!S&&c.Image&&(new Image().src=_.A,S=!0),S||(_.g=jh(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Ki(_)}Vh(h)}function dr(h){h.g&&(du(h),h.g.cancel(),h.g=null)}function So(h){dr(h),h.v&&(c.clearTimeout(h.v),h.v=null),wo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function ns(h){if(!eu(h.h)&&!h.m){h.m=!0;var _=h.Ea;_e||R(),Se||(_e(),Se=!0),x.add(_,h),h.D=0}}function bo(h,_){return Xi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=_.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=qi(g(h.Ea,h,_),Lh(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const F=new Si(this,this.j,h);let Q=this.o;if(this.U&&(Q?(Q=M(Q),X(Q,this.U)):Q=this.U),this.u!==null||this.R||(F.J=Q,Q=null),this.S)e:{for(var _=0,S=0;S<this.i.length;S++){t:{var C=this.i[S];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(_+=C,_>4096){_=S;break e}if(_===4096||S===this.i.length-1){_=S+1;break e}}_=1e3}else _=1e3;_=Dh(this,F,_),S=Lt(this.J),tt(S,"RID",h),tt(S,"CVER",22),this.G&&tt(S,"X-HTTP-Session-Id",this.G),Ca(this,S),Q&&(this.R?_="headers="+Ts(ii(Q))+"&"+_:this.u&&Sa(S,this.u,Q)),tu(this.h,F),this.Ra&&tt(S,"TYPE","init"),this.S?(tt(S,"$req",_),tt(S,"SID","null"),F.U=!0,Yi(F,S,null)):Yi(F,S,_),this.I=2}}else this.I==3&&(h?fu(this,h):this.i.length==0||eu(this.h)||fu(this))};function fu(h,_){var S;_?S=_.l:S=h.V++;const C=Lt(h.J);tt(C,"SID",h.M),tt(C,"RID",S),tt(C,"AID",h.K),Ca(h,C),h.u&&h.o&&Sa(C,h.u,h.o),S=new Si(h,h.j,S,h.D+1),h.u===null&&(S.J=h.o),_&&(h.i=_.G.concat(h.i)),_=Dh(h,S,1e3),S.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),tu(h.h,S),Yi(S,C,_)}function Ca(h,_){h.H&&ke(h.H,function(S,C){tt(_,C,S)}),h.l&&ke({},function(S,C){tt(_,C,S)})}function Dh(h,_,S){S=Math.min(h.i.length,S);const C=h.l?g(h.l.Ka,h.l,h):null;e:{var F=h.i;let Ie=-1;for(;;){const It=["count="+S];Ie==-1?S>0?(Ie=F[0].g,It.push("ofs="+Ie)):Ie=0:It.push("ofs="+Ie);let $e=!0;for(let _t=0;_t<S;_t++){var Q=F[_t].g;const si=F[_t].map;if(Q-=Ie,Q<0)Ie=Math.max(0,F[_t].g-100),$e=!1;else try{Q="req"+Q+"_"||"";try{var oe=si instanceof Map?si:Object.entries(si);for(const[ss,Ri]of oe){let Ii=Ri;d(Ri)&&(Ii=rr(Ri)),It.push(Q+ss+"="+encodeURIComponent(Ii))}}catch(ss){throw It.push(Q+"type="+encodeURIComponent("_badmap")),ss}}catch{C&&C(si)}}if($e){oe=It.join("&");break e}}oe=void 0}return h=h.i.splice(0,S),_.G=h,oe}function kh(h){if(!h.g&&!h.v){h.Y=1;var _=h.Da;_e||R(),Se||(_e(),Se=!0),x.add(_,h),h.A=0}}function Aa(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=qi(g(h.Da,h),Lh(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,Ph(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=qi(g(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,kt(10),dr(this),Ph(this))};function du(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Ph(h){h.g=new Si(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var _=Lt(h.na);tt(_,"RID","rpc"),tt(_,"SID",h.M),tt(_,"AID",h.K),tt(_,"CI",h.F?"0":"1"),!h.F&&h.ia&&tt(_,"TO",h.ia),tt(_,"TYPE","xmlhttp"),Ca(h,_),h.u&&h.o&&Sa(_,h.u,h.o),h.O&&(h.g.H=h.O);var S=h.g;h=h.ba,S.M=1,S.A=va(Lt(_)),S.u=null,S.R=!0,po(S,h)}n.Va=function(){this.C!=null&&(this.C=null,dr(this),Aa(this),kt(19))};function wo(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Mh(h,_){var S=null;if(h.g==_){wo(h),du(h),h.g=null;var C=2}else if($i(h.h,_))S=_.G,nu(h.h,_),C=1;else return;if(h.I!=0){if(_.o)if(C==1){S=_.u?_.u.length:0,_=Date.now()-_.F;var F=h.D;C=mo(),Gt(C,new Hi(C,S)),ns(h)}else kh(h);else if(F=_.m,F==3||F==0&&_.X>0||!(C==1&&bo(h,_)||C==2&&Aa(h)))switch(S&&S.length>0&&(_=h.h,_.i=_.i.concat(S)),F){case 1:is(h,5);break;case 4:is(h,10);break;case 3:is(h,6);break;default:is(h,2)}}}function Lh(h,_){let S=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(S*=2),S*_}function is(h,_){if(h.j.info("Error code "+_),_==2){var S=g(h.bb,h),C=h.Ua;const F=!C;C=new zn(C||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Jt(C,"https"),va(C),F?wi(C.toString(),S):lu(C.toString(),S)}else kt(2);h.I=0,h.l&&h.l.pa(_),Vh(h),So(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function Vh(h){if(h.I=0,h.ja=[],h.l){const _=iu(h.h);(_.length!=0||h.i.length!=0)&&(I(h.ja,_),I(h.ja,h.i),h.h.i.length=0,A(h.i),h.i.length=0),h.l.oa()}}function Uh(h,_,S){var C=S instanceof zn?Lt(S):new zn(S);if(C.g!="")_&&(C.g=_+"."+C.g),ar(C,C.u);else{var F=c.location;C=F.protocol,_=_?_+"."+F.hostname:F.hostname,F=+F.port;const Q=new zn(null);C&&Jt(Q,C),_&&(Q.g=_),F&&ar(Q,F),S&&(Q.h=S),C=Q}return S=h.G,_=h.wa,S&&_&&tt(C,S,_),tt(C,"VER",h.ka),Ca(h,C),C}function jh(h,_,S){if(_&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Aa&&!h.ma?new st(new Zi({ab:S})):new st(h.ma),_.Fa(h.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function zh(){}n=zh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function mr(){}mr.prototype.g=function(h,_){return new Sn(h,_)};function Sn(h,_){Dt.call(this),this.g=new fr(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(h?h["X-WebChannel-Client-Profile"]=_.sa:h={"X-WebChannel-Client-Profile":_.sa}),this.g.U=h,(h=_&&_.Qb)&&!O(h)&&(this.g.u=h),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!O(_)&&(this.g.G=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new ws(this)}E(Sn,Dt),Sn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Sn.prototype.close=function(){hu(this.g)},Sn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var S={};S.__data__=h,h=S}else this.v&&(S={},S.__data__=rr(h),h=S);_.i.push(new Mt(_.Ya++,h)),_.I==3&&ns(_)},Sn.prototype.N=function(){this.g.l=null,delete this.j,hu(this.g),delete this.g,Sn.Z.N.call(this)};function Bh(h){rn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const S in _){h=S;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}E(Bh,rn);function Fh(){ei.call(this),this.status=1}E(Fh,ei);function ws(h){this.g=h}E(ws,zh),ws.prototype.ra=function(){Gt(this.g,"a")},ws.prototype.qa=function(h){Gt(this.g,new Bh(h))},ws.prototype.pa=function(h){Gt(this.g,new Fh)},ws.prototype.oa=function(){Gt(this.g,"b")},mr.prototype.createWebChannel=mr.prototype.g,Sn.prototype.send=Sn.prototype.o,Sn.prototype.open=Sn.prototype.m,Sn.prototype.close=Sn.prototype.close,lA=function(){return new mr},oA=function(){return mo()},aA=Rt,x_={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},_a.NO_ERROR=0,_a.TIMEOUT=8,_a.HTTP_ERROR=6,cd=_a,$l.COMPLETE="complete",rA=$l,Eh.EventType=Ei,Ei.OPEN="a",Ei.CLOSE="b",Ei.ERROR="c",Ei.MESSAGE="d",Dt.prototype.listen=Dt.prototype.J,rc=Eh,st.prototype.listenOnce=st.prototype.K,st.prototype.getLastError=st.prototype.Ha,st.prototype.getLastErrorCode=st.prototype.ya,st.prototype.getStatus=st.prototype.ca,st.prototype.getResponseJson=st.prototype.La,st.prototype.getResponseText=st.prototype.la,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Fa,sA=st}).apply(typeof Wf<"u"?Wf:typeof self<"u"?self:typeof window<"u"?window:{});const fw="@firebase/firestore",dw="4.9.2";class yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");let Vl="12.3.0";const Xa=new om("@firebase/firestore");function il(){return Xa.logLevel}function ce(n,...e){if(Xa.logLevel<=je.DEBUG){const t=e.map(Dy);Xa.debug(`Firestore (${Vl}): ${n}`,...t)}}function er(n,...e){if(Xa.logLevel<=je.ERROR){const t=e.map(Dy);Xa.error(`Firestore (${Vl}): ${n}`,...t)}}function vl(n,...e){if(Xa.logLevel<=je.WARN){const t=e.map(Dy);Xa.warn(`Firestore (${Vl}): ${n}`,...t)}}function Dy(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function we(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,uA(n,s,t)}function uA(n,e,t){let s=`FIRESTORE (${Vl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw er(s),new Error(s)}function et(n,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,n||uA(e,a,s)}function Re(n,e){return n}const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends ys{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Wr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class cA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(yn.UNAUTHENTICATED)))}shutdown(){}}class VM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class UM{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){et(this.o===void 0,42304);let s=this.i;const a=m=>this.i!==s?(s=this.i,t(m)):Promise.resolve();let l=new Wr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Wr,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},d=m=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Wr)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(et(typeof s.accessToken=="string",31837,{l:s}),new cA(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string",2055,{h:e}),new yn(e)}}class jM{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class zM{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new jM(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(yn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class mw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BM{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Wn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){et(this.o===void 0,3512);const s=l=>{l.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ce("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const a=l=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new mw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(et(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new mw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function FM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}class ky{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=FM(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%62))}return s}}function He(n,e){return n<e?-1:n>e?1:0}function O_(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const a=n.charAt(s),l=e.charAt(s);if(a!==l)return s_(a)===s_(l)?He(a,l):s_(a)?1:-1}return He(n.length,e.length)}const HM=55296,qM=57343;function s_(n){const e=n.charCodeAt(0);return e>=HM&&e<=qM}function El(n,e,t){return n.length===e.length&&n.every(((s,a)=>t(s,e[a])))}const pw="__name__";class us{constructor(e,t,s){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&we(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return us.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof us?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=us.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return He(e.length,t.length)}static compareSegments(e,t){const s=us.isNumericId(e),a=us.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?us.extractNumericId(e).compare(us.extractNumericId(t)):O_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qr.fromString(e.substring(4,e.length-2))}}class Et extends us{construct(e,t,s){return new Et(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new pe(re.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((a=>a.length>0)))}return new Et(t)}static emptyPath(){return new Et([])}}const GM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dn extends us{construct(e,t,s){return new dn(e,t,s)}static isValidIdentifier(e){return GM.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===pw}static keyField(){return new dn([pw])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(s.length===0)throw new pe(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new pe(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new pe(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(s+=d,a++):(l(),a++)}if(l(),c)throw new pe(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dn(t)}static emptyPath(){return new dn([])}}class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(Et.fromString(e))}static fromName(e){return new Ee(Et.fromString(e).popFirst(5))}static empty(){return new Ee(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new Et(e.slice()))}}function YM(n,e,t){if(!t)throw new pe(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function KM(n,e,t,s){if(e===!0&&s===!0)throw new pe(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function gw(n){if(!Ee.isDocumentKey(n))throw new pe(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function hA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Py(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":we(12329,{type:typeof n})}function Nc(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new pe(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Py(n);throw new pe(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Ht(n,e){const t={typeString:n};return e&&(t.value=e),t}function th(n,e){if(!hA(n))throw new pe(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(a&&typeof c!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new pe(re.INVALID_ARGUMENT,t);return!0}const _w=-62135596800,yw=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*yw);return new pt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<_w)throw new pe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/yw}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(th(e,pt._jsonSchema))return new pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-_w;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:Ht("string",pt._jsonSchemaVersion),seconds:Ht("number"),nanoseconds:Ht("number")};class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new pt(0,0))}static max(){return new Ce(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const xc=-1;function QM(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=Ce.fromTimestamp(s===1e9?new pt(t+1,0):new pt(t,s));return new ta(a,Ee.empty(),e)}function WM(n){return new ta(n.readTime,n.key,xc)}class ta{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ta(Ce.min(),Ee.empty(),xc)}static max(){return new ta(Ce.max(),Ee.empty(),xc)}}function XM(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:He(n.largestBatchId,e.largestBatchId))}const $M="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ul(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==$M)throw n;ce("LocalStore","Unexpectedly lost primary lease")}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,s)=>{t(e)}))}static reject(e){return new ie(((t,s)=>{s(e)}))}static waitFor(e){return new ie(((t,s)=>{let a=0,l=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++l,c&&l===a&&t()}),(m=>s(m)))})),c=!0,l===a&&t()}))}static or(e){let t=ie.resolve(!1);for(const s of e)t=t.next((a=>a?ie.resolve(a):s()));return t}static forEach(e,t){const s=[];return e.forEach(((a,l)=>{s.push(t.call(this,a,l))})),this.waitFor(s)}static mapArray(e,t){return new ie(((s,a)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next((y=>{c[g]=y,++d,d===l&&s(c)}),(y=>a(y)))}}))}static doWhile(e,t){return new ie(((s,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):s()};l()}))}}function ZM(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function jl(n){return n.name==="IndexedDbTransactionError"}class fm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}fm.ce=-1;const My=-1;function dm(n){return n==null}function Id(n){return n===0&&1/n==-1/0}function e2(n){return typeof n=="number"&&Number.isInteger(n)&&!Id(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const fA="";function t2(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=vw(e)),e=n2(n.get(t),e);return vw(e)}function n2(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case fA:t+="";break;default:t+=l}}return t}function vw(n){return n+fA+""}function Ew(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ro(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function dA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}let qt=class D_{constructor(e,t){this.comparator=e,this.root=t||Xr.EMPTY}insert(e,t){return new D_(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xr.BLACK,null,null))}remove(e){return new D_(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xf(this.root,e,this.comparator,!0)}},Xf=class{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Xr=class zs{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??zs.RED,this.left=a??zs.EMPTY,this.right=l??zs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new zs(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return zs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return zs.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}};Xr.EMPTY=null,Xr.RED=!0,Xr.BLACK=!1;Xr.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,s,a,l){return this}insert(e,t,s){return new Xr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Xt{constructor(e){this.comparator=e,this.data=new qt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Tw(this.data.getIterator())}getIteratorFrom(e){return new Tw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Xt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Xt(this.comparator);return t.data=e,t}}class Tw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Mi{constructor(e){this.fields=e,e.sort(dn.comparator)}static empty(){return new Mi([])}unionWith(e){let t=new Xt(dn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Mi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return El(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}class mA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class mn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new mA("Invalid base64 string: "+l):l}})(e);return new mn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new mn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mn.EMPTY_BYTE_STRING=new mn("");const i2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function na(n){if(et(!!n,39018),typeof n=="string"){let e=0;const t=i2.exec(n);if(et(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ot(n.seconds),nanos:Ot(n.nanos)}}function Ot(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ia(n){return typeof n=="string"?mn.fromBase64String(n):mn.fromUint8Array(n)}const pA="server_timestamp",gA="__type__",_A="__previous_value__",yA="__local_write_time__";function Ly(n){return(n?.mapValue?.fields||{})[gA]?.stringValue===pA}function mm(n){const e=n.mapValue.fields[_A];return Ly(e)?mm(e):e}function Oc(n){const e=na(n.mapValue.fields[yA].timestampValue);return new pt(e.seconds,e.nanos)}class s2{constructor(e,t,s,a,l,c,d,m,g,y){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=y}}const Nd="(default)";class Dc{constructor(e,t){this.projectId=e,this.database=t||Nd}static empty(){return new Dc("","")}get isDefaultDatabase(){return this.database===Nd}isEqual(e){return e instanceof Dc&&e.projectId===this.projectId&&e.database===this.database}}const vA="__type__",r2="__max__",$f={mapValue:{}},EA="__vector__",xd="value";function sa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ly(n)?4:o2(n)?9007199254740991:a2(n)?10:11:we(28295,{value:n})}function ps(n,e){if(n===e)return!0;const t=sa(n);if(t!==sa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Oc(n).isEqual(Oc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=na(a.timestampValue),d=na(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return ia(a.bytesValue).isEqual(ia(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return Ot(a.geoPointValue.latitude)===Ot(l.geoPointValue.latitude)&&Ot(a.geoPointValue.longitude)===Ot(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Ot(a.integerValue)===Ot(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Ot(a.doubleValue),d=Ot(l.doubleValue);return c===d?Id(c)===Id(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return El(n.arrayValue.values||[],e.arrayValue.values||[],ps);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(Ew(c)!==Ew(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!ps(c[m],d[m])))return!1;return!0})(n,e);default:return we(52216,{left:n})}}function kc(n,e){return(n.values||[]).find((t=>ps(t,e)))!==void 0}function Tl(n,e){if(n===e)return 0;const t=sa(n),s=sa(e);if(t!==s)return He(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return He(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=Ot(l.integerValue||l.doubleValue),m=Ot(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(n,e);case 3:return Sw(n.timestampValue,e.timestampValue);case 4:return Sw(Oc(n),Oc(e));case 5:return O_(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=ia(l),m=ia(c);return d.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),m=c.split("/");for(let g=0;g<d.length&&g<m.length;g++){const y=He(d[g],m[g]);if(y!==0)return y}return He(d.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=He(Ot(l.latitude),Ot(c.latitude));return d!==0?d:He(Ot(l.longitude),Ot(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return bw(n.arrayValue,e.arrayValue);case 10:return(function(l,c){const d=l.fields||{},m=c.fields||{},g=d[xd]?.arrayValue,y=m[xd]?.arrayValue,E=He(g?.values?.length||0,y?.values?.length||0);return E!==0?E:bw(g,y)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===$f.mapValue&&c===$f.mapValue)return 0;if(l===$f.mapValue)return 1;if(c===$f.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),g=c.fields||{},y=Object.keys(g);m.sort(),y.sort();for(let E=0;E<m.length&&E<y.length;++E){const b=O_(m[E],y[E]);if(b!==0)return b;const A=Tl(d[m[E]],g[y[E]]);if(A!==0)return A}return He(m.length,y.length)})(n.mapValue,e.mapValue);default:throw we(23264,{he:t})}}function Sw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return He(n,e);const t=na(n),s=na(e),a=He(t.seconds,s.seconds);return a!==0?a:He(t.nanos,s.nanos)}function bw(n,e){const t=n.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const l=Tl(t[a],s[a]);if(l)return l}return He(t.length,s.length)}function Sl(n){return k_(n)}function k_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=na(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ia(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ee.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",a=!0;for(const l of t.values||[])a?a=!1:s+=",",s+=k_(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of s)l?l=!1:a+=",",a+=`${c}:${k_(t.fields[c])}`;return a+"}"})(n.mapValue):we(61005,{value:n})}function hd(n){switch(sa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mm(n);return e?16+hd(e):16;case 5:return 2*n.stringValue.length;case 6:return ia(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,l)=>a+hd(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let a=0;return ro(s.fields,((l,c)=>{a+=l.length+hd(c)})),a})(n.mapValue);default:throw we(13486,{value:n})}}function P_(n){return!!n&&"integerValue"in n}function Vy(n){return!!n&&"arrayValue"in n}function ww(n){return!!n&&"nullValue"in n}function Cw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function fd(n){return!!n&&"mapValue"in n}function a2(n){return(n?.mapValue?.fields||{})[vA]?.stringValue===EA}function mc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ro(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=mc(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=mc(n.arrayValue.values[t]);return e}return{...n}}function o2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===r2}class di{constructor(e){this.value=e}static empty(){return new di({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!fd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mc(t)}setAll(e){let t=dn.emptyPath(),s={},a=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,s,a),s={},a=[],t=d.popLast()}c?s[d.lastSegment()]=mc(c):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());fd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ps(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];fd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){ro(t,((a,l)=>e[a]=l));for(const a of s)delete e[a]}clone(){return new di(mc(this.value))}}function TA(n){const e=[];return ro(n.fields,((t,s)=>{const a=new dn([t]);if(fd(s)){const l=TA(s.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new Mi(e)}class vn{constructor(e,t,s,a,l,c,d){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new vn(e,0,Ce.min(),Ce.min(),Ce.min(),di.empty(),0)}static newFoundDocument(e,t,s,a){return new vn(e,1,t,Ce.min(),s,a,0)}static newNoDocument(e,t){return new vn(e,2,t,Ce.min(),Ce.min(),di.empty(),0)}static newUnknownDocument(e,t){return new vn(e,3,t,Ce.min(),Ce.min(),di.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Od{constructor(e,t){this.position=e,this.inclusive=t}}function Aw(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?s=Ee.comparator(Ee.fromName(c.referenceValue),t.key):s=Tl(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Rw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ps(n.position[t],e.position[t]))return!1;return!0}class Dd{constructor(e,t="asc"){this.field=e,this.dir=t}}function l2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class SA{}class Wt extends SA{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new c2(e,t,s):t==="array-contains"?new d2(e,s):t==="in"?new m2(e,s):t==="not-in"?new p2(e,s):t==="array-contains-any"?new g2(e,s):new Wt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new h2(e,s):new f2(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Tl(t,this.value)):t!==null&&sa(this.value)===sa(t)&&this.matchesComparison(Tl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gs extends SA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new gs(e,t)}matches(e){return bA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function bA(n){return n.op==="and"}function wA(n){return u2(n)&&bA(n)}function u2(n){for(const e of n.filters)if(e instanceof gs)return!1;return!0}function M_(n){if(n instanceof Wt)return n.field.canonicalString()+n.op.toString()+Sl(n.value);if(wA(n))return n.filters.map((e=>M_(e))).join(",");{const e=n.filters.map((t=>M_(t))).join(",");return`${n.op}(${e})`}}function CA(n,e){return n instanceof Wt?(function(s,a){return a instanceof Wt&&s.op===a.op&&s.field.isEqual(a.field)&&ps(s.value,a.value)})(n,e):n instanceof gs?(function(s,a){return a instanceof gs&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((l,c,d)=>l&&CA(c,a.filters[d])),!0):!1})(n,e):void we(19439)}function AA(n){return n instanceof Wt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Sl(t.value)}`})(n):n instanceof gs?(function(t){return t.op.toString()+" {"+t.getFilters().map(AA).join(" ,")+"}"})(n):"Filter"}class c2 extends Wt{constructor(e,t,s){super(e,t,s),this.key=Ee.fromName(s.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class h2 extends Wt{constructor(e,t){super(e,"in",t),this.keys=RA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class f2 extends Wt{constructor(e,t){super(e,"not-in",t),this.keys=RA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function RA(n,e){return(e.arrayValue?.values||[]).map((t=>Ee.fromName(t.referenceValue)))}class d2 extends Wt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vy(t)&&kc(t.arrayValue,this.value)}}class m2 extends Wt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&kc(this.value.arrayValue,t)}}class p2 extends Wt{constructor(e,t){super(e,"not-in",t)}matches(e){if(kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!kc(this.value.arrayValue,t)}}class g2 extends Wt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>kc(this.value.arrayValue,s)))}}class _2{constructor(e,t=null,s=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function Iw(n,e=null,t=[],s=[],a=null,l=null,c=null){return new _2(n,e,t,s,a,l,c)}function Uy(n){const e=Re(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>M_(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),dm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Sl(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Sl(s))).join(",")),e.Te=t}return e.Te}function jy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!l2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!CA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Rw(n.startAt,e.startAt)&&Rw(n.endAt,e.endAt)}function L_(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class pm{constructor(e,t=null,s=[],a=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function y2(n,e,t,s,a,l,c,d){return new pm(n,e,t,s,a,l,c,d)}function zy(n){return new pm(n)}function Nw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function v2(n){return n.collectionGroup!==null}function pc(n){const e=Re(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Xt(dn.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Dd(l,s))})),t.has(dn.keyField().canonicalString())||e.Ie.push(new Dd(dn.keyField(),s))}return e.Ie}function hs(n){const e=Re(n);return e.Ee||(e.Ee=E2(e,pc(n))),e.Ee}function E2(n,e){if(n.limitType==="F")return Iw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Dd(a.field,l)}));const t=n.endAt?new Od(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Od(n.startAt.position,n.startAt.inclusive):null;return Iw(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function V_(n,e,t){return new pm(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function gm(n,e){return jy(hs(n),hs(e))&&n.limitType===e.limitType}function IA(n){return`${Uy(hs(n))}|lt:${n.limitType}`}function sl(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((a=>AA(a))).join(", ")}]`),dm(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>Sl(a))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>Sl(a))).join(",")),`Target(${s})`})(hs(n))}; limitType=${n.limitType})`}function _m(n,e){return e.isFoundDocument()&&(function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ee.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,a){for(const l of pc(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(s,a){return!(s.startAt&&!(function(c,d,m){const g=Aw(c,d,m);return c.inclusive?g<=0:g<0})(s.startAt,pc(s),a)||s.endAt&&!(function(c,d,m){const g=Aw(c,d,m);return c.inclusive?g>=0:g>0})(s.endAt,pc(s),a))})(n,e)}function T2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function NA(n){return(e,t)=>{let s=!1;for(const a of pc(n)){const l=S2(a,e,t);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function S2(n,e,t){const s=n.field.isKeyField()?Ee.comparator(e.key,t.key):(function(l,c,d){const m=c.data.field(l),g=d.data.field(l);return m!==null&&g!==null?Tl(m,g):we(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return we(19790,{direction:n.dir})}}class ao{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ro(this.inner,((t,s)=>{for(const[a,l]of s)e(a,l)}))}isEmpty(){return dA(this.inner)}size(){return this.innerSize}}const b2=new qt(Ee.comparator);function tr(){return b2}const xA=new qt(Ee.comparator);function ac(...n){let e=xA;for(const t of n)e=e.insert(t.key,t);return e}function OA(n){let e=xA;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Ga(){return gc()}function DA(){return gc()}function gc(){return new ao((n=>n.toString()),((n,e)=>n.isEqual(e)))}const w2=new qt(Ee.comparator),C2=new Xt(Ee.comparator);function qe(...n){let e=C2;for(const t of n)e=e.add(t);return e}const A2=new Xt(He);function R2(){return A2}function By(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Id(e)?"-0":e}}function kA(n){return{integerValue:""+n}}function I2(n,e){return e2(e)?kA(e):By(n,e)}class ym{constructor(){this._=void 0}}function N2(n,e,t){return n instanceof kd?(function(a,l){const c={fields:{[gA]:{stringValue:pA},[yA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Ly(l)&&(l=mm(l)),l&&(c.fields[_A]=l),{mapValue:c}})(t,e):n instanceof Pc?MA(n,e):n instanceof Mc?LA(n,e):(function(a,l){const c=PA(a,l),d=xw(c)+xw(a.Ae);return P_(c)&&P_(a.Ae)?kA(d):By(a.serializer,d)})(n,e)}function x2(n,e,t){return n instanceof Pc?MA(n,e):n instanceof Mc?LA(n,e):t}function PA(n,e){return n instanceof Pd?(function(s){return P_(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class kd extends ym{}class Pc extends ym{constructor(e){super(),this.elements=e}}function MA(n,e){const t=VA(e);for(const s of n.elements)t.some((a=>ps(a,s)))||t.push(s);return{arrayValue:{values:t}}}class Mc extends ym{constructor(e){super(),this.elements=e}}function LA(n,e){let t=VA(e);for(const s of n.elements)t=t.filter((a=>!ps(a,s)));return{arrayValue:{values:t}}}class Pd extends ym{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function xw(n){return Ot(n.integerValue||n.doubleValue)}function VA(n){return Vy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function O2(n,e){return n.field.isEqual(e.field)&&(function(s,a){return s instanceof Pc&&a instanceof Pc||s instanceof Mc&&a instanceof Mc?El(s.elements,a.elements,ps):s instanceof Pd&&a instanceof Pd?ps(s.Ae,a.Ae):s instanceof kd&&a instanceof kd})(n.transform,e.transform)}class D2{constructor(e,t){this.version=e,this.transformResults=t}}class Gs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Gs}static exists(e){return new Gs(void 0,e)}static updateTime(e){return new Gs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class vm{}function UA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new zA(n.key,Gs.none()):new nh(n.key,n.data,Gs.none());{const t=n.data,s=di.empty();let a=new Xt(dn.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),a=a.add(l)}return new oo(n.key,s,new Mi(a.toArray()),Gs.none())}}function k2(n,e,t){n instanceof nh?(function(a,l,c){const d=a.value.clone(),m=Dw(a.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof oo?(function(a,l,c){if(!dd(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=Dw(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(jA(a)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function _c(n,e,t,s){return n instanceof nh?(function(l,c,d,m){if(!dd(l.precondition,c))return d;const g=l.value.clone(),y=kw(l.fieldTransforms,m,c);return g.setAll(y),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,s):n instanceof oo?(function(l,c,d,m){if(!dd(l.precondition,c))return d;const g=kw(l.fieldTransforms,m,c),y=c.data;return y.setAll(jA(l)),y.setAll(g),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,s):(function(l,c,d){return dd(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function P2(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),l=PA(s.transform,a||null);l!=null&&(t===null&&(t=di.empty()),t.set(s.field,l))}return t||null}function Ow(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&El(s,a,((l,c)=>O2(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class nh extends vm{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class oo extends vm{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function jA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function Dw(n,e,t){const s=new Map;et(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,d=e.data.field(l.field);s.set(l.field,x2(c,d,t[a]))}return s}function kw(n,e,t){const s=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);s.set(a.field,N2(l,c,e))}return s}class zA extends vm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class M2 extends vm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class L2{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&k2(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=_c(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=_c(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=DA();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const m=UA(c,d);m!==null&&s.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Ce.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),qe())}isEqual(e){return this.batchId===e.batchId&&El(this.mutations,e.mutations,((t,s)=>Ow(t,s)))&&El(this.baseMutations,e.baseMutations,((t,s)=>Ow(t,s)))}}class Fy{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){et(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=(function(){return w2})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,s[c].version);return new Fy(e,t,s,a)}}class V2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class U2{constructor(e,t){this.count=e,this.unchangedNames=t}}var Bt,Ye;function j2(n){switch(n){case re.OK:return we(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return we(15467,{code:n})}}function BA(n){if(n===void 0)return er("GRPC error has no .code"),re.UNKNOWN;switch(n){case Bt.OK:return re.OK;case Bt.CANCELLED:return re.CANCELLED;case Bt.UNKNOWN:return re.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return re.INTERNAL;case Bt.UNAVAILABLE:return re.UNAVAILABLE;case Bt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Bt.NOT_FOUND:return re.NOT_FOUND;case Bt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Bt.ABORTED:return re.ABORTED;case Bt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Bt.DATA_LOSS:return re.DATA_LOSS;default:return we(39323,{code:n})}}(Ye=Bt||(Bt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";function z2(){return new TextEncoder}const B2=new Qr([4294967295,4294967295],0);function Pw(n){const e=z2().encode(n),t=new iA;return t.update(e),new Uint8Array(t.digest())}function Mw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Qr([t,s],0),new Qr([a,l],0)]}class Hy{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new oc(`Invalid padding: ${t}`);if(s<0)throw new oc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new oc(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new oc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Qr.fromNumber(this.ge)}ye(e,t,s){let a=e.add(t.multiply(Qr.fromNumber(s)));return a.compare(B2)===1&&(a=new Qr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Pw(e),[s,a]=Mw(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,a,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Hy(l,a,t);return s.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=Pw(e),[s,a]=Mw(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class oc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Em{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,ih.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Em(Ce.min(),a,new qt(He),tr(),qe())}}class ih{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new ih(s,t,qe(),qe(),qe())}}class md{constructor(e,t,s,a){this.be=e,this.removedTargetIds=t,this.key=s,this.De=a}}class FA{constructor(e,t){this.targetId=e,this.Ce=t}}class HA{constructor(e,t,s=mn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class Lw{constructor(){this.ve=0,this.Fe=Vw(),this.Me=mn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=qe(),t=qe(),s=qe();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:we(38017,{changeType:l})}})),new ih(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=Vw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,et(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class F2{constructor(e){this.Ge=e,this.ze=new Map,this.je=tr(),this.Je=Jf(),this.He=Jf(),this.Ye=new qt(He)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,s=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(L_(l))if(s===0){const c=new Ee(l.path);this.et(t,c,vn.newNoDocument(c,Ce.min()))}else et(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const d=this.ut(e),m=d?this.ct(d,e,c):1;if(m!==0){this.it(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=ia(s).toUint8Array()}catch(m){if(m instanceof mA)return vl("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new Hy(c,a,l)}catch(m){return vl(m instanceof oc?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.ge===0?null:d}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let a=0;return s.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&L_(d.target)){const m=new Ee(d.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,vn.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let s=qe();this.He.forEach(((l,c)=>{let d=!0;c.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new Em(e,t,this.Ye,this.je,s);return this.je=tr(),this.Je=Jf(),this.He=Jf(),this.Ye=new qt(He),a}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Lw,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Xt(He),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Xt(He),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Lw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Jf(){return new qt(Ee.comparator)}function Vw(){return new qt(Ee.comparator)}const H2={asc:"ASCENDING",desc:"DESCENDING"},q2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},G2={and:"AND",or:"OR"};class Y2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function U_(n,e){return n.useProto3Json||dm(e)?e:{value:e}}function Md(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function K2(n,e){return Md(n,e.toTimestamp())}function fs(n){return et(!!n,49232),Ce.fromTimestamp((function(t){const s=na(t);return new pt(s.seconds,s.nanos)})(n))}function qy(n,e){return j_(n,e).canonicalString()}function j_(n,e){const t=(function(a){return new Et(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function GA(n){const e=Et.fromString(n);return et(XA(e),10190,{key:e.toString()}),e}function z_(n,e){return qy(n.databaseId,e.path)}function r_(n,e){const t=GA(e);if(t.get(1)!==n.databaseId.projectId)throw new pe(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new pe(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(KA(t))}function YA(n,e){return qy(n.databaseId,e)}function Q2(n){const e=GA(n);return e.length===4?Et.emptyPath():KA(e)}function B_(n){return new Et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function KA(n){return et(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Uw(n,e,t){return{name:z_(n,e),fields:t.value.mapValue.fields}}function W2(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:we(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,y){return g.useProto3Json?(et(y===void 0||typeof y=="string",58123),mn.fromBase64String(y||"")):(et(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),mn.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const y=g.code===void 0?re.UNKNOWN:BA(g.code);return new pe(y,g.message||"")})(c);t=new HA(s,a,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=r_(n,s.document.name),l=fs(s.document.updateTime),c=s.document.createTime?fs(s.document.createTime):Ce.min(),d=new di({mapValue:{fields:s.document.fields}}),m=vn.newFoundDocument(a,l,c,d),g=s.targetIds||[],y=s.removedTargetIds||[];t=new md(g,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=r_(n,s.document),l=s.readTime?fs(s.readTime):Ce.min(),c=vn.newNoDocument(a,l),d=s.removedTargetIds||[];t=new md([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=r_(n,s.document),l=s.removedTargetIds||[];t=new md([],l,a,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,c=new U2(a,l),d=s.targetId;t=new FA(d,c)}}return t}function X2(n,e){let t;if(e instanceof nh)t={update:Uw(n,e.key,e.value)};else if(e instanceof zA)t={delete:z_(n,e.key)};else if(e instanceof oo)t={update:Uw(n,e.key,e.data),updateMask:rL(e.fieldMask)};else{if(!(e instanceof M2))return we(16599,{Vt:e.type});t={verify:z_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const d=c.transform;if(d instanceof kd)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Pc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Mc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Pd)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw we(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:K2(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:we(27497)})(n,e.precondition)),t}function $2(n,e){return n&&n.length>0?(et(e!==void 0,14353),n.map((t=>(function(a,l){let c=a.updateTime?fs(a.updateTime):fs(l);return c.isEqual(Ce.min())&&(c=fs(l)),new D2(c,a.transformResults||[])})(t,e)))):[]}function J2(n,e){return{documents:[YA(n,e.path)]}}function Z2(n,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=YA(n,a);const l=(function(g){if(g.length!==0)return WA(gs.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((y=>(function(b){return{field:rl(b.field),direction:nL(b.dir)}})(y)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=U_(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function eL(n){let e=Q2(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){et(s===1,65062);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=(function(E){const b=QA(E);return b instanceof gs&&wA(b)?b.getFilters():[b]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((b=>(function(I){return new Dd(al(I.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(b)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let b;return b=typeof E=="object"?E.value:E,dm(b)?null:b})(t.limit));let m=null;t.startAt&&(m=(function(E){const b=!!E.before,A=E.values||[];return new Od(A,b)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const b=!E.before,A=E.values||[];return new Od(A,b)})(t.endAt)),y2(e,a,c,l,d,"F",m,g)}function tL(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function QA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=al(t.unaryFilter.field);return Wt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=al(t.unaryFilter.field);return Wt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=al(t.unaryFilter.field);return Wt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=al(t.unaryFilter.field);return Wt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Wt.create(al(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return gs.create(t.compositeFilter.filters.map((s=>QA(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(n):we(30097,{filter:n})}function nL(n){return H2[n]}function iL(n){return q2[n]}function sL(n){return G2[n]}function rl(n){return{fieldPath:n.canonicalString()}}function al(n){return dn.fromServerFormat(n.fieldPath)}function WA(n){return n instanceof Wt?(function(t){if(t.op==="=="){if(Cw(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NAN"}};if(ww(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Cw(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NOT_NAN"}};if(ww(t.value))return{unaryFilter:{field:rl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rl(t.field),op:iL(t.op),value:t.value}}})(n):n instanceof gs?(function(t){const s=t.getFilters().map((a=>WA(a)));return s.length===1?s[0]:{compositeFilter:{op:sL(t.op),filters:s}}})(n):we(54877,{filter:n})}function rL(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function XA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Hr{constructor(e,t,s,a,l=Ce.min(),c=Ce.min(),d=mn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new Hr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class aL{constructor(e){this.yt=e}}function oL(n){const e=eL({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?V_(e,e.limit,"L"):e}class lL{constructor(){this.Cn=new uL}addToCollectionParentIndex(e,t){return this.Cn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(ta.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(ta.min())}updateCollectionGroup(e,t,s){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class uL{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new Xt(Et.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Xt(Et.comparator)).toArray()}}const jw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$A=41943040;class Ln{static withCacheSize(e){return new Ln(e,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}Ln.DEFAULT_COLLECTION_PERCENTILE=10,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ln.DEFAULT=new Ln($A,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ln.DISABLED=new Ln(-1,0,0);class bl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new bl(0)}static cr(){return new bl(-1)}}const zw="LruGarbageCollector",cL=1048576;function Bw([n,e],[t,s]){const a=He(n,t);return a===0?He(e,s):a}class hL{constructor(e){this.Ir=e,this.buffer=new Xt(Bw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Bw(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class fL{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ce(zw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){jl(t)?ce(zw,"Ignoring IndexedDB error during garbage collection: ",t):await Ul(t)}await this.Vr(3e5)}))}}class dL{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(fm.ce);const s=new hL(t);return this.mr.forEachTarget(e,(a=>s.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>s.Ar(a))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(jw)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jw):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,a,l,c,d,m,g;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,c=Date.now(),this.nthSequenceNumber(e,a)))).next((E=>(s=E,d=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(g=Date.now(),il()<=je.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${E} documents in `+(g-m)+`ms
Total Duration: ${g-y}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E}))))}}function mL(n,e){return new dL(n,e)}class pL{constructor(){this.changes=new ao((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ie.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class _L{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(s!==null&&_c(s.mutation,a,Mi.empty(),pt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,qe()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=qe()){const a=Ga();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,s).next((l=>{let c=ac();return l.forEach(((d,m)=>{c=c.insert(d,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=Ga();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,qe())))}populateOverlays(e,t,s){const a=[];return s.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,s,a){let l=tr();const c=gc(),d=(function(){return gc()})();return t.forEach(((m,g)=>{const y=s.get(g.key);a.has(g.key)&&(y===void 0||y.mutation instanceof oo)?l=l.insert(g.key,g):y!==void 0?(c.set(g.key,y.mutation.getFieldMask()),_c(y.mutation,g,y.mutation.getFieldMask(),pt.now())):c.set(g.key,Mi.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((g,y)=>c.set(g,y))),t.forEach(((g,y)=>d.set(g,new gL(y,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const s=gc();let a=new qt(((c,d)=>c-d)),l=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((m=>{const g=t.get(m);if(g===null)return;let y=s.get(m)||Mi.empty();y=d.applyToLocalView(g,y),s.set(m,y);const E=(a.get(d.batchId)||qe()).add(m);a=a.insert(d.batchId,E)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),g=m.key,y=m.value,E=DA();y.forEach((b=>{if(!l.has(b)){const A=UA(t.get(b),s.get(b));A!==null&&E.set(b,A),l=l.add(b)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return ie.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,a){return(function(c){return Ee.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):v2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):ie.resolve(Ga());let d=xc,m=l;return c.next((g=>ie.forEach(g,((y,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(y)?ie.resolve():this.remoteDocumentCache.getEntry(e,y).next((b=>{m=m.insert(y,b)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,m,g,qe()))).next((y=>({batchId:d,changes:OA(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((s=>{let a=ac();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const l=t.collectionGroup;let c=ac();return this.indexManager.getCollectionParents(e,l).next((d=>ie.forEach(d,(m=>{const g=(function(E,b){return new pm(b,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,s,a).next((y=>{y.forEach(((E,b)=>{c=c.insert(E,b)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,a)))).next((c=>{l.forEach(((m,g)=>{const y=g.getKey();c.get(y)===null&&(c=c.insert(y,vn.newInvalidDocument(y)))}));let d=ac();return c.forEach(((m,g)=>{const y=l.get(m);y!==void 0&&_c(y.mutation,g,Mi.empty(),pt.now()),_m(t,g)&&(d=d.insert(m,g))})),d}))}}class yL{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ie.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:fs(a.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:oL(a.bundledQuery),readTime:fs(a.readTime)}})(t)),ie.resolve()}}class vL{constructor(){this.overlays=new qt(Ee.comparator),this.qr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ga();return ie.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&s.set(a,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((a,l)=>{this.St(e,t,l)})),ie.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),ie.resolve()}getOverlaysForCollection(e,t,s){const a=Ga(),l=t.length+1,c=new Ee(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>s&&a.set(m.getKey(),m)}return ie.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new qt(((g,y)=>g-y));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>s){let y=l.get(g.largestBatchId);y===null&&(y=Ga(),l=l.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const d=Ga(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,y)=>d.set(g,y))),!(d.size()>=a)););return ie.resolve(d)}St(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new V2(t,s));let l=this.qr.get(t);l===void 0&&(l=qe(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}class EL{constructor(){this.sessionToken=mn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}class Gy{constructor(){this.Qr=new Xt(tn.$r),this.Ur=new Xt(tn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new tn(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new tn(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Ee(new Et([])),s=new tn(t,e),a=new tn(t,e+1),l=[];return this.Ur.forEachInRange([s,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ee(new Et([])),s=new tn(t,e),a=new tn(t,e+1);let l=qe();return this.Ur.forEachInRange([s,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new tn(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class tn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ee.comparator(e.key,t.key)||He(e.Yr,t.Yr)}static Kr(e,t){return He(e.Yr,t.Yr)||Ee.comparator(e.key,t.key)}}class TL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Xt(tn.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new L2(l,t,s,a);this.mutationQueue.push(c);for(const d of a)this.Zr=this.Zr.add(new tn(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ie.resolve(c)}lookupMutationBatch(e,t){return ie.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.ei(s),l=a<0?0:a;return ie.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?My:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new tn(t,0),a=new tn(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,a],(c=>{const d=this.Xr(c.Yr);l.push(d)})),ie.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Xt(He);return t.forEach((a=>{const l=new tn(a,0),c=new tn(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(d=>{s=s.add(d.Yr)}))})),ie.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;Ee.isDocumentKey(l)||(l=l.child(""));const c=new tn(new Ee(l),0);let d=new Xt(He);return this.Zr.forEachWhile((m=>{const g=m.key.path;return!!s.isPrefixOf(g)&&(g.length===a&&(d=d.add(m.Yr)),!0)}),c),ie.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((s=>{const a=this.Xr(s);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){et(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ie.forEach(t.mutations,(a=>{const l=new tn(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new tn(t,0),a=this.Zr.firstAfterOrEqual(s);return ie.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class SL{constructor(e){this.ri=e,this.docs=(function(){return new qt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ie.resolve(s?s.document.mutableCopy():vn.newInvalidDocument(t))}getEntries(e,t){let s=tr();return t.forEach((a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():vn.newInvalidDocument(a))})),ie.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=tr();const c=t.path,d=new Ee(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:g,value:{document:y}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||XM(WM(y),s)<=0||(a.has(y.key)||_m(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return ie.resolve(l)}getAllFromCollectionGroup(e,t,s,a){we(9500)}ii(e,t){return ie.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new bL(this)}getSize(e){return ie.resolve(this.size)}}class bL extends pL{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)})),ie.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class wL{constructor(e){this.persistence=e,this.si=new ao((t=>Uy(t)),jy),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new Gy,this.targetCount=0,this.ai=bl.ur()}forEachTarget(e,t){return this.si.forEach(((s,a)=>t(a))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),ie.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new bl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Pr(t),ie.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),ie.waitFor(l).next((()=>a))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return ie.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),ie.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),ie.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return ie.resolve(s)}containsKey(e,t){return ie.resolve(this._i.containsKey(t))}}class JA{constructor(e,t){this.ui={},this.overlays={},this.ci=new fm(0),this.li=!1,this.li=!0,this.hi=new EL,this.referenceDelegate=e(this),this.Pi=new wL(this),this.indexManager=new lL,this.remoteDocumentCache=(function(a){return new SL(a)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new aL(t),this.Ii=new yL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new vL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new TL(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ce("MemoryPersistence","Starting transaction:",e);const a=new CL(this.ci.next());return this.referenceDelegate.Ei(),s(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return ie.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class CL extends JM{constructor(e){super(),this.currentSequenceNumber=e}}class Yy{constructor(e){this.persistence=e,this.Ri=new Gy,this.Vi=null}static mi(e){return new Yy(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),ie.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(s=>{const a=Ee.fromPath(s);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Ce.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ie.or([()=>ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ld{constructor(e,t){this.persistence=e,this.pi=new ao((s=>t2(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=mL(this,t)}static mi(e,t){return new Ld(e,t)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((a=>s+a))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return ie.forEach(this.pi,((s,a)=>this.br(e,s,a).next((l=>l?ie.resolve():t(a)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((d=>{d||(s++,l.removeEntry(c,Ce.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=hd(e.data.value)),t}br(e,t,s){return ie.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return ie.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ky{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=a}static As(e,t){let s=qe(),a=qe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Ky(e,t.fromCache,s,a)}}class AL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class RL{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return QO()?8:ZM(En())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new AL;return this.Ss(e,t,c).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>l.result))}bs(e,t,s,a){return s.documentReadCount<this.fs?(il()<=je.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",sl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(il()<=je.DEBUG&&ce("QueryEngine","Query:",sl(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(il()<=je.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",sl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hs(t))):ie.resolve())}ys(e,t){if(Nw(t))return ie.resolve(null);let s=hs(t);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=V_(t,null,"F"),s=hs(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=qe(...l);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,s).next((m=>{const g=this.Ds(t,d);return this.Cs(t,g,c,m.readTime)?this.ys(e,V_(t,null,"F")):this.vs(e,g,t,m)}))))})))))}ws(e,t,s,a){return Nw(t)||a.isEqual(Ce.min())?ie.resolve(null):this.ps.getDocuments(e,s).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,s,a)?ie.resolve(null):(il()<=je.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),sl(t)),this.vs(e,c,t,QM(a,xc)).next((d=>d)))}))}Ds(e,t){let s=new Xt(NA(e));return t.forEach(((a,l)=>{_m(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,s){return il()<=je.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",sl(t)),this.ps.getDocumentsMatchingQuery(e,t,ta.min(),s)}vs(e,t,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const Qy="LocalStore",IL=3e8;class NL{constructor(e,t,s,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new qt(He),this.xs=new ao((l=>Uy(l)),jy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _L(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function xL(n,e,t,s){return new NL(n,e,t,s)}async function ZA(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],d=[];let m=qe();for(const g of a){c.push(g.batchId);for(const y of g.mutations)m=m.add(y.key)}for(const g of l){d.push(g.batchId);for(const y of g.mutations)m=m.add(y.key)}return t.localDocuments.getDocuments(s,m).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function OL(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,m,g,y){const E=g.batch,b=E.keys();let A=ie.resolve();return b.forEach((I=>{A=A.next((()=>y.getEntry(m,I))).next((j=>{const V=g.docVersions.get(I);et(V!==null,48541),j.version.compareTo(V)<0&&(E.applyToRemoteDocument(j,g),j.isValidDocument()&&(j.setReadTime(g.commitVersion),y.addEntry(j)))}))})),A.next((()=>d.mutationQueue.removeMutationBatch(m,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(d){let m=qe();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(m=m.add(d.batch.mutations[g].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(s,a)))}))}function eR(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function DL(n,e){const t=Re(n),s=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const d=[];e.targetChanges.forEach(((y,E)=>{const b=a.get(E);if(!b)return;d.push(t.Pi.removeMatchingKeys(l,y.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,y.addedDocuments,E))));let A=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?A=A.withResumeToken(mn.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):y.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(y.resumeToken,s)),a=a.insert(E,A),(function(j,V,$){return j.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=IL?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(b,A,y)&&d.push(t.Pi.updateTargetData(l,A))}));let m=tr(),g=qe();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))})),d.push(kL(l,c,e.documentUpdates).next((y=>{m=y.ks,g=y.qs}))),!s.isEqual(Ce.min())){const y=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));d.push(y)}return ie.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,g))).next((()=>m))})).then((l=>(t.Ms=a,l)))}function kL(n,e,t){let s=qe(),a=qe();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=tr();return t.forEach(((d,m)=>{const g=l.get(d);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(Ce.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):ce(Qy,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",m.version)})),{ks:c,qs:a}}))}function PL(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=My),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function ML(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return t.Pi.getTargetData(s,e).next((l=>l?(a=l,ie.resolve(a)):t.Pi.allocateTargetId(s).next((c=>(a=new Hr(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=t.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function F_(n,e,t){const s=Re(n),a=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!jl(c))throw c;ce(Qy,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function Fw(n,e,t){const s=Re(n);let a=Ce.min(),l=qe();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,y){const E=Re(m),b=E.xs.get(y);return b!==void 0?ie.resolve(E.Ms.get(b)):E.Pi.getTargetData(g,y)})(s,c,hs(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,d.targetId).next((m=>{l=m}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?a:Ce.min(),t?l:qe()))).next((d=>(LL(s,T2(e),d),{documents:d,Qs:l})))))}function LL(n,e,t){let s=n.Os.get(e)||Ce.min();t.forEach(((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class Hw{constructor(){this.activeTargetIds=R2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class VL{constructor(){this.Mo=new Hw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Hw,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class UL{Oo(e){}shutdown(){}}const qw="ConnectivityMonitor";class Gw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ce(qw,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ce(qw,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Zf=null;function H_(){return Zf===null?Zf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Zf++,"0x"+Zf.toString(16)}const a_="RestConnection",jL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===Nd?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,t,s,a,l){const c=H_(),d=this.zo(e,t.toUriEncodedString());ce(a_,`Sending RPC '${e}' ${c}:`,d,s);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,l);const{host:g}=new URL(d),y=_s(g);return this.Jo(e,d,m,s,y).then((E=>(ce(a_,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw vl(a_,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",s),E}))}Ho(e,t,s,a,l,c){return this.Go(e,t,s,a,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Vl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),s&&s.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const s=jL[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}class BL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const _n="WebChannelConnection";class FL extends zL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,a,l){const c=H_();return new Promise(((d,m)=>{const g=new sA;g.setWithCredentials(!0),g.listenOnce(rA.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case cd.NO_ERROR:const E=g.getResponseJson();ce(_n,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case cd.TIMEOUT:ce(_n,`RPC '${e}' ${c} timed out`),m(new pe(re.DEADLINE_EXCEEDED,"Request time out"));break;case cd.HTTP_ERROR:const b=g.getStatus();if(ce(_n,`RPC '${e}' ${c} failed with status:`,b,"response text:",g.getResponseText()),b>0){let A=g.getResponseJson();Array.isArray(A)&&(A=A[0]);const I=A?.error;if(I&&I.status&&I.message){const j=(function($){const K=$.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(K)>=0?K:re.UNKNOWN})(I.status);m(new pe(j,I.message))}else m(new pe(re.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new pe(re.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{ce(_n,`RPC '${e}' ${c} completed.`)}}));const y=JSON.stringify(a);ce(_n,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",y,s,15)}))}T_(e,t,s){const a=H_(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=lA(),d=oA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,s),m.encodeInitMessageHeaders=!0;const y=l.join("");ce(_n,`Creating RPC '${e}' stream ${a}: ${y}`,m);const E=c.createWebChannel(y,m);this.I_(E);let b=!1,A=!1;const I=new BL({Yo:V=>{A?ce(_n,`Not sending because RPC '${e}' stream ${a} is closed:`,V):(b||(ce(_n,`Opening RPC '${e}' stream ${a} transport.`),E.open(),b=!0),ce(_n,`RPC '${e}' stream ${a} sending:`,V),E.send(V))},Zo:()=>E.close()}),j=(V,$,K)=>{V.listen($,(ee=>{try{K(ee)}catch(ue){setTimeout((()=>{throw ue}),0)}}))};return j(E,rc.EventType.OPEN,(()=>{A||(ce(_n,`RPC '${e}' stream ${a} transport opened.`),I.o_())})),j(E,rc.EventType.CLOSE,(()=>{A||(A=!0,ce(_n,`RPC '${e}' stream ${a} transport closed`),I.a_(),this.E_(E))})),j(E,rc.EventType.ERROR,(V=>{A||(A=!0,vl(_n,`RPC '${e}' stream ${a} transport errored. Name:`,V.name,"Message:",V.message),I.a_(new pe(re.UNAVAILABLE,"The operation could not be completed")))})),j(E,rc.EventType.MESSAGE,(V=>{if(!A){const $=V.data[0];et(!!$,16349);const K=$,ee=K?.error||K[0]?.error;if(ee){ce(_n,`RPC '${e}' stream ${a} received error:`,ee);const ue=ee.status;let _e=(function(R){const N=Bt[R];if(N!==void 0)return BA(N)})(ue),Se=ee.message;_e===void 0&&(_e=re.INTERNAL,Se="Unknown error status: "+ue+" with message "+ee.message),A=!0,I.a_(new pe(_e,Se)),E.close()}else ce(_n,`RPC '${e}' stream ${a} received:`,$),I.u_($)}})),j(d,aA.STAT_EVENT,(V=>{V.stat===x_.PROXY?ce(_n,`RPC '${e}' stream ${a} detected buffering proxy`):V.stat===x_.NOPROXY&&ce(_n,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{I.__()}),0),I}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function o_(){return typeof document<"u"?document:null}function Tm(n){return new Y2(n,!0)}class tR{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-s);a>0&&ce("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Yw="PersistentStream";class nR{constructor(e,t,s,a,l,c,d,m){this.Mi=e,this.S_=s,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new tR(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(er(t.toString()),er("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===t&&this.G_(s,a)}),(s=>{e((()=>{const a=new pe(re.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(Yw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ce(Yw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class HL extends nR{constructor(e,t,s,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=W2(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Ce.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ce.min():c.readTime?fs(c.readTime):Ce.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=B_(this.serializer),t.addTarget=(function(l,c){let d;const m=c.target;if(d=L_(m)?{documents:J2(l,m)}:{query:Z2(l,m).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=qA(l,c.resumeToken);const g=U_(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Ce.min())>0){d.readTime=Md(l,c.snapshotVersion.toTimestamp());const g=U_(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const s=tL(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=B_(this.serializer),t.removeTarget=e,this.q_(t)}}class qL extends nR{constructor(e,t,s,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=$2(e.writeResults,e.commitTime),s=fs(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=B_(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>X2(this.serializer,s)))};this.q_(t)}}class GL{}class YL extends GL{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new pe(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,j_(t,s),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new pe(re.UNKNOWN,l.toString())}))}Ho(e,t,s,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,j_(t,s),a,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(re.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class KL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(er(t),this.aa=!1):ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const $a="RemoteStore";class QL{constructor(e,t,s,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{lo(this)&&(ce($a,"Restarting streams for network reachability change."),await(async function(m){const g=Re(m);g.Ea.add(4),await sh(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Sm(g)})(this))}))})),this.Ra=new KL(s,a)}}async function Sm(n){if(lo(n))for(const e of n.da)await e(!0)}async function sh(n){for(const e of n.da)await e(!1)}function iR(n,e){const t=Re(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Jy(t)?$y(t):zl(t).O_()&&Xy(t,e))}function Wy(n,e){const t=Re(n),s=zl(t);t.Ia.delete(e),s.O_()&&sR(t,e),t.Ia.size===0&&(s.O_()?s.L_():lo(t)&&t.Ra.set("Unknown"))}function Xy(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}zl(n).Y_(e)}function sR(n,e){n.Va.Ue(e),zl(n).Z_(e)}function $y(n){n.Va=new F2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),zl(n).start(),n.Ra.ua()}function Jy(n){return lo(n)&&!zl(n).x_()&&n.Ia.size>0}function lo(n){return Re(n).Ea.size===0}function rR(n){n.Va=void 0}async function WL(n){n.Ra.set("Online")}async function XL(n){n.Ia.forEach(((e,t)=>{Xy(n,e)}))}async function $L(n,e){rR(n),Jy(n)?(n.Ra.ha(e),$y(n)):n.Ra.set("Unknown")}async function JL(n,e,t){if(n.Ra.set("Online"),e instanceof HA&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.Va.removeTarget(d))})(n,e)}catch(s){ce($a,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Vd(n,s)}else if(e instanceof md?n.Va.Ze(e):e instanceof FA?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ce.min()))try{const s=await eR(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.Ia.get(g);y&&l.Ia.set(g,y.withResumeToken(m.resumeToken,c))}})),d.targetMismatches.forEach(((m,g)=>{const y=l.Ia.get(m);if(!y)return;l.Ia.set(m,y.withResumeToken(mn.EMPTY_BYTE_STRING,y.snapshotVersion)),sR(l,m);const E=new Hr(y.target,m,g,y.sequenceNumber);Xy(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(s){ce($a,"Failed to raise snapshot:",s),await Vd(n,s)}}async function Vd(n,e,t){if(!jl(e))throw e;n.Ea.add(1),await sh(n),n.Ra.set("Offline"),t||(t=()=>eR(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ce($a,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Sm(n)}))}function aR(n,e){return e().catch((t=>Vd(n,t,e)))}async function bm(n){const e=Re(n),t=ra(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:My;for(;ZL(e);)try{const a=await PL(e.localStore,s);if(a===null){e.Ta.length===0&&t.L_();break}s=a.batchId,eV(e,a)}catch(a){await Vd(e,a)}oR(e)&&lR(e)}function ZL(n){return lo(n)&&n.Ta.length<10}function eV(n,e){n.Ta.push(e);const t=ra(n);t.O_()&&t.X_&&t.ea(e.mutations)}function oR(n){return lo(n)&&!ra(n).x_()&&n.Ta.length>0}function lR(n){ra(n).start()}async function tV(n){ra(n).ra()}async function nV(n){const e=ra(n);for(const t of n.Ta)e.ea(t.mutations)}async function iV(n,e,t){const s=n.Ta.shift(),a=Fy.from(s,e,t);await aR(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await bm(n)}async function sV(n,e){e&&ra(n).X_&&await(async function(s,a){if((function(c){return j2(c)&&c!==re.ABORTED})(a.code)){const l=s.Ta.shift();ra(s).B_(),await aR(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a))),await bm(s)}})(n,e),oR(n)&&lR(n)}async function Kw(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),ce($a,"RemoteStore received new credentials");const s=lo(t);t.Ea.add(3),await sh(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Sm(t)}async function rV(n,e){const t=Re(n);e?(t.Ea.delete(2),await Sm(t)):e||(t.Ea.add(2),await sh(t),t.Ra.set("Unknown"))}function zl(n){return n.ma||(n.ma=(function(t,s,a){const l=Re(t);return l.sa(),new HL(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:WL.bind(null,n),t_:XL.bind(null,n),r_:$L.bind(null,n),H_:JL.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Jy(n)?$y(n):n.Ra.set("Unknown")):(await n.ma.stop(),rR(n))}))),n.ma}function ra(n){return n.fa||(n.fa=(function(t,s,a){const l=Re(t);return l.sa(),new qL(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:tV.bind(null,n),r_:sV.bind(null,n),ta:nV.bind(null,n),na:iV.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await bm(n)):(await n.fa.stop(),n.Ta.length>0&&(ce($a,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class Zy{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new Wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,l){const c=Date.now()+s,d=new Zy(e,t,c,a,l);return d.start(s),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ev(n,e){if(er("AsyncQueue",`${e}: ${n}`),jl(n))return new pe(re.UNAVAILABLE,`${e}: ${n}`);throw n}class dl{static emptySet(e){return new dl(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ee.comparator(t.key,s.key):(t,s)=>Ee.comparator(t.key,s.key),this.keyedMap=ac(),this.sortedSet=new qt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof dl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new dl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Qw{constructor(){this.ga=new qt(Ee.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class wl{constructor(e,t,s,a,l,c,d,m,g){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,s,a,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new wl(e,t,dl.emptySet(t),c,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class aV{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class oV{constructor(){this.queries=Ww(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const a=Re(t),l=a.queries;a.queries=Ww(),l.forEach(((c,d)=>{for(const m of d.Sa)m.onError(s)}))})(this,new pe(re.ABORTED,"Firestore shutting down"))}}function Ww(){return new ao((n=>IA(n)),gm)}async function lV(n,e){const t=Re(n);let s=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(s=2):(l=new aV,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=ev(c,`Initialization of query '${sl(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&tv(t)}async function uV(n,e){const t=Re(n),s=e.query;let a=3;const l=t.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function cV(n,e){const t=Re(n);let s=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(a)&&(s=!0);c.wa=a}}s&&tv(t)}function hV(n,e,t){const s=Re(n),a=s.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);s.queries.delete(e)}function tv(n){n.Ca.forEach((e=>{e.next()}))}var q_,Xw;(Xw=q_||(q_={})).Ma="default",Xw.Cache="cache";class fV{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new wl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=wl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==q_.Cache}}class uR{constructor(e){this.key=e}}class cR{constructor(e){this.key=e}}class dV{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=qe(),this.mutatedKeys=qe(),this.eu=NA(e),this.tu=new dl(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new Qw,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((y,E)=>{const b=a.get(y),A=_m(this.query,E)?E:null,I=!!b&&this.mutatedKeys.has(b.key),j=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let V=!1;b&&A?b.data.isEqual(A.data)?I!==j&&(s.track({type:3,doc:A}),V=!0):this.su(b,A)||(s.track({type:2,doc:A}),V=!0,(m&&this.eu(A,m)>0||g&&this.eu(A,g)<0)&&(d=!0)):!b&&A?(s.track({type:0,doc:A}),V=!0):b&&!A&&(s.track({type:1,doc:b}),V=!0,(m||g)&&(d=!0)),V&&(A?(c=c.add(A),l=j?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),s.track({type:1,doc:y})}return{tu:c,iu:s,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((y,E)=>(function(A,I){const j=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:V})}};return j(A)-j(I)})(y.type,E.type)||this.eu(y.doc,E.doc))),this.ou(s),a=a??!1;const d=t&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,g=m!==this.Za;return this.Za=m,c.length!==0||g?{snapshot:new wl(this.query,e.tu,l,c,e.mutatedKeys,m===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Qw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=qe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new cR(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new uR(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=qe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return wl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const nv="SyncEngine";class mV{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class pV{constructor(e){this.key=e,this.hu=!1}}class gV{constructor(e,t,s,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new ao((d=>IA(d)),gm),this.Iu=new Map,this.Eu=new Set,this.du=new qt(Ee.comparator),this.Au=new Map,this.Ru=new Gy,this.Vu={},this.mu=new Map,this.fu=bl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _V(n,e,t=!0){const s=gR(n);let a;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await hR(s,e,t,!0),a}async function yV(n,e){const t=gR(n);await hR(t,e,!0,!1)}async function hR(n,e,t,s){const a=await ML(n.localStore,hs(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return s&&(d=await vV(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&iR(n.remoteStore,a),d}async function vV(n,e,t,s,a){n.pu=(E,b,A)=>(async function(j,V,$,K){let ee=V.view.ru($);ee.Cs&&(ee=await Fw(j.localStore,V.query,!1).then((({documents:x})=>V.view.ru(x,ee))));const ue=K&&K.targetChanges.get(V.targetId),_e=K&&K.targetMismatches.get(V.targetId)!=null,Se=V.view.applyChanges(ee,j.isPrimaryClient,ue,_e);return Jw(j,V.targetId,Se.au),Se.snapshot})(n,E,b,A);const l=await Fw(n.localStore,e,!0),c=new dV(e,l.Qs),d=c.ru(l.documents),m=ih.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",a),g=c.applyChanges(d,n.isPrimaryClient,m);Jw(n,t,g.au);const y=new mV(e,t,c);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function EV(n,e,t){const s=Re(n),a=s.Tu.get(e),l=s.Iu.get(a.targetId);if(l.length>1)return s.Iu.set(a.targetId,l.filter((c=>!gm(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await F_(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),t&&Wy(s.remoteStore,a.targetId),G_(s,a.targetId)})).catch(Ul)):(G_(s,a.targetId),await F_(s.localStore,a.targetId,!0))}async function TV(n,e){const t=Re(n),s=t.Tu.get(e),a=t.Iu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Wy(t.remoteStore,s.targetId))}async function SV(n,e,t){const s=NV(n);try{const a=await(function(c,d){const m=Re(c),g=pt.now(),y=d.reduce(((A,I)=>A.add(I.key)),qe());let E,b;return m.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let I=tr(),j=qe();return m.Ns.getEntries(A,y).next((V=>{I=V,I.forEach((($,K)=>{K.isValidDocument()||(j=j.add($))}))})).next((()=>m.localDocuments.getOverlayedDocuments(A,I))).next((V=>{E=V;const $=[];for(const K of d){const ee=P2(K,E.get(K.key).overlayedDocument);ee!=null&&$.push(new oo(K.key,ee,TA(ee.value.mapValue),Gs.exists(!0)))}return m.mutationQueue.addMutationBatch(A,g,$,d)})).next((V=>{b=V;const $=V.applyToLocalDocumentSet(E,j);return m.documentOverlayCache.saveOverlays(A,V.batchId,$)}))})).then((()=>({batchId:b.batchId,changes:OA(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(c,d,m){let g=c.Vu[c.currentUser.toKey()];g||(g=new qt(He)),g=g.insert(d,m),c.Vu[c.currentUser.toKey()]=g})(s,a.batchId,t),await rh(s,a.changes),await bm(s.remoteStore)}catch(a){const l=ev(a,"Failed to persist write");t.reject(l)}}async function fR(n,e){const t=Re(n);try{const s=await DL(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(et(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?et(c.hu,14607):a.removedDocuments.size>0&&(et(c.hu,42227),c.hu=!1))})),await rh(t,s,e)}catch(s){await Ul(s)}}function $w(n,e,t){const s=Re(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const m=Re(c);m.onlineState=d;let g=!1;m.queries.forEach(((y,E)=>{for(const b of E.Sa)b.va(d)&&(g=!0)})),g&&tv(m)})(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function bV(n,e,t){const s=Re(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Au.get(e),l=a&&a.key;if(l){let c=new qt(Ee.comparator);c=c.insert(l,vn.newNoDocument(l,Ce.min()));const d=qe().add(l),m=new Em(Ce.min(),new Map,new qt(He),c,d);await fR(s,m),s.du=s.du.remove(l),s.Au.delete(e),iv(s)}else await F_(s.localStore,e,!1).then((()=>G_(s,e,t))).catch(Ul)}async function wV(n,e){const t=Re(n),s=e.batch.batchId;try{const a=await OL(t.localStore,e);mR(t,s,null),dR(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await rh(t,a)}catch(a){await Ul(a)}}async function CV(n,e,t){const s=Re(n);try{const a=await(function(c,d){const m=Re(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let y;return m.mutationQueue.lookupMutationBatch(g,d).next((E=>(et(E!==null,37113),y=E.keys(),m.mutationQueue.removeMutationBatch(g,E)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,y,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y))).next((()=>m.localDocuments.getDocuments(g,y)))}))})(s.localStore,e);mR(s,e,t),dR(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await rh(s,a)}catch(a){await Ul(a)}}function dR(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function mR(n,e,t){const s=Re(n);let a=s.Vu[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function G_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||pR(n,s)}))}function pR(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Wy(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),iv(n))}function Jw(n,e,t){for(const s of t)s instanceof uR?(n.Ru.addReference(s.key,e),AV(n,s)):s instanceof cR?(ce(nv,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||pR(n,s.key)):we(19791,{wu:s})}function AV(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(ce(nv,"New document in limbo: "+t),n.Eu.add(s),iv(n))}function iv(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ee(Et.fromString(e)),s=n.fu.next();n.Au.set(s,new pV(t)),n.du=n.du.insert(t,s),iR(n.remoteStore,new Hr(hs(zy(t.path)),s,"TargetPurposeLimboResolution",fm.ce))}}async function rh(n,e,t){const s=Re(n),a=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((d,m)=>{c.push(s.pu(m,e,t).then((g=>{if((g||t)&&s.isPrimaryClient){const y=g?!g.fromCache:t?.targetChanges.get(m.targetId)?.current;s.sharedClientState.updateQueryState(m.targetId,y?"current":"not-current")}if(g){a.push(g);const y=Ky.As(m.targetId,g);l.push(y)}})))})),await Promise.all(c),s.Pu.H_(a),await(async function(m,g){const y=Re(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ie.forEach(g,(b=>ie.forEach(b.Es,(A=>y.persistence.referenceDelegate.addReference(E,b.targetId,A))).next((()=>ie.forEach(b.ds,(A=>y.persistence.referenceDelegate.removeReference(E,b.targetId,A)))))))))}catch(E){if(!jl(E))throw E;ce(Qy,"Failed to update sequence numbers: "+E)}for(const E of g){const b=E.targetId;if(!E.fromCache){const A=y.Ms.get(b),I=A.snapshotVersion,j=A.withLastLimboFreeSnapshotVersion(I);y.Ms=y.Ms.insert(b,j)}}})(s.localStore,l))}async function RV(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){ce(nv,"User change. New user:",e.toKey());const s=await ZA(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((m=>{m.reject(new pe(re.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await rh(t,s.Ls)}}function IV(n,e){const t=Re(n),s=t.Au.get(e);if(s&&s.hu)return qe().add(s.key);{let a=qe();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const d=t.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}function gR(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=fR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bV.bind(null,e),e.Pu.H_=cV.bind(null,e.eventManager),e.Pu.yu=hV.bind(null,e.eventManager),e}function NV(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CV.bind(null,e),e}class Ud{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return xL(this.persistence,new RL,e.initialUser,this.serializer)}Cu(e){return new JA(Yy.mi,this.serializer)}Du(e){return new VL}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ud.provider={build:()=>new Ud};class xV extends Ud{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){et(this.persistence.referenceDelegate instanceof Ld,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new fL(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Ln.withCacheSize(this.cacheSizeBytes):Ln.DEFAULT;return new JA((s=>Ld.mi(s,t)),this.serializer)}}class Y_{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>$w(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=RV.bind(null,this.syncEngine),await rV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new oV})()}createDatastore(e){const t=Tm(e.databaseInfo.databaseId),s=(function(l){return new FL(l)})(e.databaseInfo);return(function(l,c,d,m){return new YL(l,c,d,m)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,a,l,c,d){return new QL(s,a,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>$w(this.syncEngine,t,0)),(function(){return Gw.v()?new Gw:new UL})())}createSyncEngine(e,t){return(function(a,l,c,d,m,g,y){const E=new gV(a,l,c,d,m,g);return y&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=Re(t);ce($a,"RemoteStore shutting down."),s.Ea.add(5),await sh(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Y_.provider={build:()=>new Y_};class OV{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):er("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const aa="FirestoreClient";class DV{constructor(e,t,s,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=yn.UNAUTHENTICATED,this.clientId=ky.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{ce(aa,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(ce(aa,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=ev(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function l_(n,e){n.asyncQueue.verifyOperationInProgress(),ce(aa,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async a=>{s.isEqual(a)||(await ZA(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Zw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await kV(n);ce(aa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>Kw(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,a)=>Kw(e.remoteStore,a))),n._onlineComponents=e}async function kV(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ce(aa,"Using user provided OfflineComponentProvider");try{await l_(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===re.FAILED_PRECONDITION||a.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;vl("Error using user provided cache. Falling back to memory cache: "+t),await l_(n,new Ud)}}else ce(aa,"Using default OfflineComponentProvider"),await l_(n,new xV(void 0));return n._offlineComponents}async function _R(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ce(aa,"Using user provided OnlineComponentProvider"),await Zw(n,n._uninitializedComponentsProvider._online)):(ce(aa,"Using default OnlineComponentProvider"),await Zw(n,new Y_))),n._onlineComponents}function PV(n){return _R(n).then((e=>e.syncEngine))}async function MV(n){const e=await _R(n),t=e.eventManager;return t.onListen=_V.bind(null,e.syncEngine),t.onUnlisten=EV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=yV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=TV.bind(null,e.syncEngine),t}function LV(n,e,t={}){const s=new Wr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,g){const y=new OV({next:b=>{y.Nu(),c.enqueueAndForget((()=>uV(l,E)));const A=b.docs.has(d);!A&&b.fromCache?g.reject(new pe(re.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&b.fromCache&&m&&m.source==="server"?g.reject(new pe(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(b)},error:b=>g.reject(b)}),E=new fV(zy(d.path),y,{includeMetadataChanges:!0,qa:!0});return lV(l,E)})(await MV(n),n.asyncQueue,e,t,s))),s.promise}function yR(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const e0=new Map;const vR="firestore.googleapis.com",t0=!0;class n0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vR,this.ssl=t0}else this.host=e.host,this.ssl=e.ssl??t0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$A;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cL)throw new pe(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yR(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sv{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new n0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new n0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new LM;switch(s.type){case"firstParty":return new zM(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new pe(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=e0.get(t);s&&(ce("ComponentProvider","Removing Datastore"),e0.delete(t),s.terminate())})(this),Promise.resolve()}}function VV(n,e,t,s={}){n=Nc(n,sv);const a=_s(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;a&&(im(`https://${d}`),sm("Firestore",!0)),l.host!==vR&&l.host!==d&&vl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:d,ssl:a,emulatorOptions:s};if(!Zr(m,c)&&(n._setSettings(m),s.mockUserToken)){let g,y;if(typeof s.mockUserToken=="string")g=s.mockUserToken,y=yn.MOCK_USER;else{g=yy(s.mockUserToken,n._app?.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new pe(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new yn(E)}n._authCredentials=new VM(new cA(g,y))}}class rv{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new rv(this.firestore,e,this._query)}}class sn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sn(this.firestore,e,this._key)}toJSON(){return{type:sn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(th(t,sn._jsonSchema))return new sn(e,s||null,new Ee(Et.fromString(t.referencePath)))}}sn._jsonSchemaVersion="firestore/documentReference/1.0",sn._jsonSchema={type:Ht("string",sn._jsonSchemaVersion),referencePath:Ht("string")};class Lc extends rv{constructor(e,t,s){super(e,t,zy(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sn(this.firestore,null,new Ee(e))}withConverter(e){return new Lc(this.firestore,e,this._path)}}function Cl(n,e,...t){if(n=At(n),arguments.length===1&&(e=ky.newId()),YM("doc","path",e),n instanceof sv){const s=Et.fromString(e,...t);return gw(s),new sn(n,null,new Ee(s))}{if(!(n instanceof sn||n instanceof Lc))throw new pe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Et.fromString(e,...t));return gw(s),new sn(n.firestore,n instanceof Lc?n.converter:null,new Ee(s))}}const i0="AsyncQueue";class s0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new tR(this,"async_queue_retry"),this._c=()=>{const s=o_();s&&ce(i0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=o_();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=o_();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Wr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!jl(e))throw e;ce(i0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,er("INTERNAL UNHANDLED ERROR: ",r0(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Zy.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&we(47125,{Pc:r0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function r0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class av extends sv{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new s0,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new s0(e),this._firestoreClient=void 0,await e}}}function UV(n,e){const t=typeof n=="object"?n:lm(),s=typeof n=="string"?n:Nd,a=Xc(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=_y("firestore");l&&VV(a,...l)}return a}function ER(n){if(n._terminated)throw new pe(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||jV(n),n._firestoreClient}function jV(n){const e=n._freezeSettings(),t=(function(a,l,c,d){return new s2(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,yR(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new DV(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(n._componentsProvider))}class mi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mi(mn.fromBase64String(e))}catch(t){throw new pe(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new mi(mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:mi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(th(e,mi._jsonSchema))return mi.fromBase64String(e.bytes)}}mi._jsonSchemaVersion="firestore/bytes/1.0",mi._jsonSchema={type:Ht("string",mi._jsonSchemaVersion),bytes:Ht("string")};class ov{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class TR{constructor(e){this._methodName=e}}class ds{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ds._jsonSchemaVersion}}static fromJSON(e){if(th(e,ds._jsonSchema))return new ds(e.latitude,e.longitude)}}ds._jsonSchemaVersion="firestore/geoPoint/1.0",ds._jsonSchema={type:Ht("string",ds._jsonSchemaVersion),latitude:Ht("number"),longitude:Ht("number")};class ms{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ms._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(th(e,ms._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ms(e.vectorValues);throw new pe(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ms._jsonSchemaVersion="firestore/vectorValue/1.0",ms._jsonSchema={type:Ht("string",ms._jsonSchemaVersion),vectorValues:Ht("object")};const zV=/^__.*__$/;class BV{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new oo(e,this.data,this.fieldMask,t,this.fieldTransforms):new nh(e,this.data,t,this.fieldTransforms)}}function SR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:n})}}class lv{constructor(e,t,s,a,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new lv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return jd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(SR(this.Ac)&&zV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class FV{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Tm(e)}Cc(e,t,s,a=!1){return new lv({Ac:e,methodName:t,Dc:s,path:dn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function HV(n){const e=n._freezeSettings(),t=Tm(n._databaseId);return new FV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function qV(n,e,t,s,a,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);AR("Data must be an object, but it was:",c,s);const d=wR(s,c);let m,g;if(l.merge)m=new Mi(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const E of l.mergeFields){const b=GV(e,E,t);if(!c.contains(b))throw new pe(re.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);KV(y,b)||y.push(b)}m=new Mi(y),g=c.fieldTransforms.filter((E=>m.covers(E.field)))}else m=null,g=c.fieldTransforms;return new BV(new di(d),m,g)}function bR(n,e){if(CR(n=At(n)))return AR("Unsupported field value:",e,n),wR(n,e);if(n instanceof TR)return(function(s,a){if(!SR(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,a){const l=[];let c=0;for(const d of s){let m=bR(d,a.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,a){if((s=At(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return I2(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=pt.fromDate(s);return{timestampValue:Md(a.serializer,l)}}if(s instanceof pt){const l=new pt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Md(a.serializer,l)}}if(s instanceof ds)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof mi)return{bytesValue:qA(a.serializer,s._byteString)};if(s instanceof sn){const l=a.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:qy(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof ms)return(function(c,d){return{mapValue:{fields:{[vA]:{stringValue:EA},[xd]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw d.Sc("VectorValues must only contain numeric values.");return By(d.serializer,g)}))}}}}}})(s,a);throw a.Sc(`Unsupported field value: ${Py(s)}`)})(n,e)}function wR(n,e){const t={};return dA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ro(n,((s,a)=>{const l=bR(a,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function CR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof pt||n instanceof ds||n instanceof mi||n instanceof sn||n instanceof TR||n instanceof ms)}function AR(n,e,t){if(!CR(t)||!hA(t)){const s=Py(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function GV(n,e,t){if((e=At(e))instanceof ov)return e._internalPath;if(typeof e=="string")return RR(n,e);throw jd("Field path arguments must be of type string or ",n,!1,void 0,t)}const YV=new RegExp("[~\\*/\\[\\]]");function RR(n,e,t){if(e.search(YV)>=0)throw jd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ov(...e.split("."))._internalPath}catch{throw jd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function jd(n,e,t,s,a){const l=s&&!s.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${s}`),c&&(m+=` in document ${a}`),m+=")"),new pe(re.INVALID_ARGUMENT,d+n+m)}function KV(n,e){return n.some((t=>t.isEqual(e)))}class IR{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(NR("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class QV extends IR{data(){return super.data()}}function NR(n,e){return typeof e=="string"?RR(n,e):e instanceof ov?e._internalPath:e._delegate._internalPath}class WV{convertValue(e,t="none"){switch(sa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ia(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ro(e,((a,l)=>{s[a]=this.convertValue(l,t)})),s}convertVectorValue(e){const t=e.fields?.[xd].arrayValue?.values?.map((s=>Ot(s.doubleValue)));return new ms(t)}convertGeoPoint(e){return new ds(Ot(e.latitude),Ot(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=mm(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Oc(e));default:return null}}convertTimestamp(e){const t=na(e);return new pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Et.fromString(e);et(XA(s),9688,{name:e});const a=new Dc(s.get(1),s.get(3)),l=new Ee(s.popFirst(5));return a.isEqual(t)||er(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function XV(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class lc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ka extends IR{constructor(e,t,s,a,l,c){super(e,t,s,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(NR("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ka._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ka._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ka._jsonSchema={type:Ht("string",Ka._jsonSchemaVersion),bundleSource:Ht("string","DocumentSnapshot"),bundleName:Ht("string"),bundle:Ht("string")};class pd extends Ka{data(e={}){return super.data(e)}}class yc{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new lc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new pd(this._firestore,this._userDataWriter,s.key,s,new lc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const m=new pd(a._firestore,a._userDataWriter,d.doc.key,d.doc,new lc(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const m=new pd(a._firestore,a._userDataWriter,d.doc.key,d.doc,new lc(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,y=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:$V(d.type),doc:m,oldIndex:g,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=yc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ky.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $V(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:n})}}function uv(n){n=Nc(n,sn);const e=Nc(n.firestore,av);return LV(ER(e),n._key).then((t=>eU(e,n,t)))}yc._jsonSchemaVersion="firestore/querySnapshot/1.0",yc._jsonSchema={type:Ht("string",yc._jsonSchemaVersion),bundleSource:Ht("string","QuerySnapshot"),bundleName:Ht("string"),bundle:Ht("string")};class JV extends WV{constructor(e){super(),this.firestore=e}convertBytes(e){return new mi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,t)}}function cv(n,e,t){n=Nc(n,sn);const s=Nc(n.firestore,av),a=XV(n.converter,e);return ZV(s,[qV(HV(s),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Gs.none())])}function ZV(n,e){return(function(s,a){const l=new Wr;return s.asyncQueue.enqueueAndForget((async()=>SV(await PV(s),a,l))),l.promise})(ER(n),e)}function eU(n,e,t){const s=t.docs.get(e._key),a=new JV(n);return new Ka(n,a,e._key,s,new lc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){Vl=a})(ha),ea(new Xs("firestore",((s,{instanceIdentifier:a,options:l})=>{const c=s.getProvider("app").getImmediate(),d=new av(new UM(s.getProvider("auth-internal")),new BM(c,s.getProvider("app-check-internal")),(function(g,y){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new pe(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dc(g.options.projectId,y)})(c,a),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),gi(fw,dw,e),gi(fw,dw,"esm2020")})();var a0={};const o0="@firebase/database",l0="1.1.0";let xR="";function tU(n){xR=n}class nU{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Qt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Ac(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class iU{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return vs(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const OR=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new nU(e)}}catch{}return new iU},Ya=OR("localStorage"),sU=OR("sessionStorage");const ml=new om("@firebase/database"),rU=(function(){let n=1;return function(){return n++}})(),DR=function(n){const e=aD(n),t=new nD;t.update(e);const s=t.digest();return gy.encodeByteArray(s)},ah=function(...n){let e="";for(let t=0;t<n.length;t++){const s=n[t];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=ah.apply(null,s):typeof s=="object"?e+=Qt(s):e+=s,e+=" "}return e};let vc=null,u0=!0;const aU=function(n,e){ae(!0,"Can't turn on custom loggers persistently."),ml.logLevel=je.VERBOSE,vc=ml.log.bind(ml)},hn=function(...n){if(u0===!0&&(u0=!1,vc===null&&sU.get("logging_enabled")===!0&&aU()),vc){const e=ah.apply(null,n);vc(e)}},oh=function(n){return function(...e){hn(n,...e)}},K_=function(...n){const e="FIREBASE INTERNAL ERROR: "+ah(...n);ml.error(e)},nr=function(...n){const e=`FIREBASE FATAL ERROR: ${ah(...n)}`;throw ml.error(e),new Error(e)},An=function(...n){const e="FIREBASE WARNING: "+ah(...n);ml.warn(e)},oU=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&An("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},hv=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},lU=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Al="[MIN_NAME]",Ja="[MAX_NAME]",uo=function(n,e){if(n===e)return 0;if(n===Al||e===Ja)return-1;if(e===Al||n===Ja)return 1;{const t=c0(n),s=c0(e);return t!==null?s!==null?t-s===0?n.length-e.length:t-s:-1:s!==null?1:n<e?-1:1}},uU=function(n,e){return n===e?0:n<e?-1:1},Zu=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Qt(e))},fv=function(n){if(typeof n!="object"||n===null)return Qt(n);const e=[];for(const s in n)e.push(s);e.sort();let t="{";for(let s=0;s<e.length;s++)s!==0&&(t+=","),t+=Qt(e[s]),t+=":",t+=fv(n[e[s]]);return t+="}",t},kR=function(n,e){const t=n.length;if(t<=e)return[n];const s=[];for(let a=0;a<t;a+=e)a+e>t?s.push(n.substring(a,t)):s.push(n.substring(a,a+e));return s};function pn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const PR=function(n){ae(!hv(n),"Invalid JSON number");const e=11,t=52,s=(1<<e-1)-1;let a,l,c,d,m;n===0?(l=0,c=0,a=1/n===-1/0?1:0):(a=n<0,n=Math.abs(n),n>=Math.pow(2,1-s)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),s),l=d+s,c=Math.round(n*Math.pow(2,t-d)-Math.pow(2,t))):(l=0,c=Math.round(n/Math.pow(2,1-s-t))));const g=[];for(m=t;m;m-=1)g.push(c%2?1:0),c=Math.floor(c/2);for(m=e;m;m-=1)g.push(l%2?1:0),l=Math.floor(l/2);g.push(a?1:0),g.reverse();const y=g.join("");let E="";for(m=0;m<64;m+=8){let b=parseInt(y.substr(m,8),2).toString(16);b.length===1&&(b="0"+b),E=E+b}return E.toLowerCase()},cU=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},hU=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function fU(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const s=new Error(n+" at "+e._path.toString()+": "+t);return s.code=n.toUpperCase(),s}const dU=new RegExp("^-?(0*)\\d{1,10}$"),mU=-2147483648,pU=2147483647,c0=function(n){if(dU.test(n)){const e=Number(n);if(e>=mU&&e<=pU)return e}return null},Bl=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw An("Exception was thrown by user callback.",t),e},Math.floor(0))}},gU=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ec=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};class _U{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Wn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,s):t(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){An(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class yU{constructor(e,t,s){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(a=>this.auth_=a)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(hn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,s):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',An(e)}}class gd{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}gd.OWNER="owner";const dv="5",MR="v",LR="s",VR="r",UR="f",jR=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,zR="ls",BR="p",Q_="ac",FR="websocket",HR="long_polling";class qR{constructor(e,t,s,a,l=!1,c="",d=!1,m=!1,g=null){this.secure=t,this.namespace=s,this.webSocketOnly=a,this.nodeAdmin=l,this.persistenceKey=c,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=m,this.emulatorOptions=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ya.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ya.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function vU(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function GR(n,e,t){ae(typeof e=="string","typeof type must == string"),ae(typeof t=="object","typeof params must == object");let s;if(e===FR)s=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===HR)s=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);vU(n)&&(t.ns=n.namespace);const a=[];return pn(t,(l,c)=>{a.push(l+"="+c)}),s+a.join("&")}class EU{constructor(){this.counters_={}}incrementCounter(e,t=1){vs(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return MO(this.counters_)}}const u_={},c_={};function mv(n){const e=n.toString();return u_[e]||(u_[e]=new EU),u_[e]}function TU(n,e){const t=n.toString();return c_[t]||(c_[t]=e()),c_[t]}class SU{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<s.length;++a)s[a]&&Bl(()=>{this.onMessage_(s[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const h0="start",bU="close",wU="pLPCommand",CU="pRTLPCB",YR="id",KR="pw",QR="ser",AU="cb",RU="seg",IU="ts",NU="d",xU="dframe",WR=1870,XR=30,OU=WR-XR,DU=25e3,kU=3e4;class ul{constructor(e,t,s,a,l,c,d){this.connId=e,this.repoInfo=t,this.applicationId=s,this.appCheckToken=a,this.authToken=l,this.transportSessionId=c,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=oh(e),this.stats_=mv(t),this.urlFn=m=>(this.appCheckToken&&(m[Q_]=this.appCheckToken),GR(t,HR,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new SU(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(kU)),lU(()=>{if(this.isClosed_)return;this.scriptTagHolder=new pv((...l)=>{const[c,d,m,g,y]=l;if(this.incrementIncomingBytes_(l),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===h0)this.id=d,this.password=m;else if(c===bU)d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...l)=>{const[c,d]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(c,d)},()=>{this.onClosed_()},this.urlFn);const s={};s[h0]="t",s[QR]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[AU]=this.scriptTagHolder.uniqueCallbackIdentifier),s[MR]=dv,this.transportSessionId&&(s[LR]=this.transportSessionId),this.lastSessionId&&(s[zR]=this.lastSessionId),this.applicationId&&(s[BR]=this.applicationId),this.appCheckToken&&(s[Q_]=this.appCheckToken),typeof location<"u"&&location.hostname&&jR.test(location.hostname)&&(s[VR]=UR);const a=this.urlFn(s);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ul.forceAllow_=!0}static forceDisallow(){ul.forceDisallow_=!0}static isAvailable(){return ul.forceAllow_?!0:!ul.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!cU()&&!hU()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Qt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const s=cC(t),a=kR(s,OU);for(let l=0;l<a.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[l]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const s={};s[xU]="t",s[YR]=e,s[KR]=t,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Qt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class pv{constructor(e,t,s,a){this.onDisconnect=s,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=rU(),window[wU+this.uniqueCallbackIdentifier]=e,window[CU+this.uniqueCallbackIdentifier]=t,this.myIFrame=pv.createIFrame_();let l="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(l='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(d){hn("frame writing exception"),d.stack&&hn(d.stack),hn(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||hn("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[YR]=this.myID,e[KR]=this.myPW,e[QR]=this.currentSerial;let t=this.urlFn(e),s="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+XR+s.length<=WR;){const c=this.pendingSegs.shift();s=s+"&"+RU+a+"="+c.seg+"&"+IU+a+"="+c.ts+"&"+NU+a+"="+c.d,a++}return t=t+s,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,s){this.pendingSegs.push({seg:e,ts:t,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const s=()=>{this.outstandingRequests.delete(t),this.newRequest_()},a=setTimeout(s,Math.floor(DU)),l=()=>{clearTimeout(a),s()};this.addTag(e,l)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const a=s.readyState;(!a||a==="loaded"||a==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),t())},s.onerror=()=>{hn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}const PU=16384,MU=45e3;let zd=null;typeof MozWebSocket<"u"?zd=MozWebSocket:typeof WebSocket<"u"&&(zd=WebSocket);class ki{constructor(e,t,s,a,l,c,d){this.connId=e,this.applicationId=s,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=oh(this.connId),this.stats_=mv(t),this.connURL=ki.connectionURL_(t,c,d,a,s),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,s,a,l){const c={};return c[MR]=dv,typeof location<"u"&&location.hostname&&jR.test(location.hostname)&&(c[VR]=UR),t&&(c[LR]=t),s&&(c[zR]=s),a&&(c[Q_]=a),l&&(c[BR]=l),GR(e,FR,c)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ya.set("previous_websocket_failure",!0);try{let s;KO(),this.mySock=new zd(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const a=s.message||s.data;a&&this.log_(a),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const a=s.message||s.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){ki.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(t);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&zd!==null&&!ki.forceDisallow_}static previouslyFailed(){return Ya.isInMemoryStorage||Ya.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ya.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const s=Ac(t);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ae(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const s=this.extractFrameCount_(t);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const t=Qt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const s=kR(t,PU);s.length>1&&this.sendString_(String(s.length));for(let a=0;a<s.length;a++)this.sendString_(s[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(MU))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ki.responsesRequiredToBeHealthy=2;ki.healthyTimeout=3e4;class Vc{static get ALL_TRANSPORTS(){return[ul,ki]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=ki&&ki.isAvailable();let s=t&&!ki.previouslyFailed();if(e.webSocketOnly&&(t||An("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[ki];else{const a=this.transports_=[];for(const l of Vc.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);Vc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Vc.globalTransportInitialized_=!1;const LU=6e4,VU=5e3,UU=10*1024,jU=100*1024,h_="t",f0="d",zU="s",d0="r",BU="e",m0="o",p0="a",g0="n",_0="p",FU="h";class HU{constructor(e,t,s,a,l,c,d,m,g,y){this.id=e,this.repoInfo_=t,this.applicationId_=s,this.appCheckToken_=a,this.authToken_=l,this.onMessage_=c,this.onReady_=d,this.onDisconnect_=m,this.onKill_=g,this.lastSessionId=y,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=oh("c:"+this.id+":"),this.transportManager_=new Vc(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,s)},Math.floor(0));const a=e.healthyTimeout||0;a>0&&(this.healthyTimeout_=Ec(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>jU?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>UU?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(h_ in e){const t=e[h_];t===p0?this.upgradeIfSecondaryHealthy_():t===d0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===m0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Zu("t",e),s=Zu("d",e);if(t==="c")this.onSecondaryControl_(s);else if(t==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:_0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:p0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:g0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Zu("t",e),s=Zu("d",e);t==="c"?this.onControl_(s):t==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Zu(h_,e);if(f0 in e){const s=e[f0];if(t===FU){const a={...s};this.repoInfo_.isUsingEmulator&&(a.h=this.repoInfo_.host),this.onHandshake_(a)}else if(t===g0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===zU?this.onConnectionShutdown_(s):t===d0?this.onReset_(s):t===BU?K_("Server Error: "+s):t===m0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):K_("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,s=e.v,a=e.h;this.sessionId=e.s,this.repoInfo_.host=a,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),dv!==s&&An("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,s),Ec(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(LU))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ec(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(VU))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:_0,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ya.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class $R{put(e,t,s,a){}merge(e,t,s,a){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,s){}onDisconnectMerge(e,t,s){}onDisconnectCancel(e,t){}reportStats(e){}}class JR{constructor(e){this.allowedEvents_=e,this.listeners_={},ae(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let a=0;a<s.length;a++)s[a].callback.apply(s[a].context,t)}}on(e,t,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:s});const a=this.getInitialEvent(e);a&&t.apply(s,a)}off(e,t,s){this.validateEventType_(e);const a=this.listeners_[e]||[];for(let l=0;l<a.length;l++)if(a[l].callback===t&&(!s||s===a[l].context)){a.splice(l,1);return}}validateEventType_(e){ae(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Bd extends JR{static getInstance(){return new Bd}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!vy()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ae(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const y0=32,v0=768;class lt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let s=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[s]=this.pieces_[a],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function We(){return new lt("")}function Me(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function oa(n){return n.pieces_.length-n.pieceNum_}function ft(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new lt(n.pieces_,e)}function gv(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function qU(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function Uc(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function ZR(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new lt(e,0)}function wt(n,e){const t=[];for(let s=n.pieceNum_;s<n.pieces_.length;s++)t.push(n.pieces_[s]);if(e instanceof lt)for(let s=e.pieceNum_;s<e.pieces_.length;s++)t.push(e.pieces_[s]);else{const s=e.split("/");for(let a=0;a<s.length;a++)s[a].length>0&&t.push(s[a])}return new lt(t,0)}function ze(n){return n.pieceNum_>=n.pieces_.length}function Cn(n,e){const t=Me(n),s=Me(e);if(t===null)return e;if(t===s)return Cn(ft(n),ft(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function GU(n,e){const t=Uc(n,0),s=Uc(e,0);for(let a=0;a<t.length&&a<s.length;a++){const l=uo(t[a],s[a]);if(l!==0)return l}return t.length===s.length?0:t.length<s.length?-1:1}function _v(n,e){if(oa(n)!==oa(e))return!1;for(let t=n.pieceNum_,s=e.pieceNum_;t<=n.pieces_.length;t++,s++)if(n.pieces_[t]!==e.pieces_[s])return!1;return!0}function pi(n,e){let t=n.pieceNum_,s=e.pieceNum_;if(oa(n)>oa(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[s])return!1;++t,++s}return!0}class YU{constructor(e,t){this.errorPrefix_=t,this.parts_=Uc(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=am(this.parts_[s]);eI(this)}}function KU(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=am(e),eI(n)}function QU(n){const e=n.parts_.pop();n.byteLength_-=am(e),n.parts_.length>0&&(n.byteLength_-=1)}function eI(n){if(n.byteLength_>v0)throw new Error(n.errorPrefix_+"has a key path longer than "+v0+" bytes ("+n.byteLength_+").");if(n.parts_.length>y0)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+y0+") or object contains a cycle "+qa(n))}function qa(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}class yv extends JR{static getInstance(){return new yv}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return ae(e==="visible","Unknown event type: "+e),[this.visible_]}}const ec=1e3,WU=300*1e3,E0=30*1e3,XU=1.3,$U=3e4,JU="server_kill",T0=3;class Ys extends $R{constructor(e,t,s,a,l,c,d,m){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=s,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=c,this.appCheckTokenProvider_=d,this.authOverride_=m,this.id=Ys.nextPersistentConnectionId_++,this.log_=oh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ec,this.maxReconnectDelay_=WU,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");yv.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Bd.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,s){const a=++this.requestNumber_,l={r:a,a:e,b:t};this.log_(Qt(l)),ae(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),s&&(this.requestCBHash_[a]=s)}get(e){this.initConnection_();const t=new Qc,a={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:c=>{const d=c.d;c.s==="ok"?t.resolve(d):t.reject(d)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(l),t.promise}listen(e,t,s,a){this.initConnection_();const l=e._queryIdentifier,c=e._path.toString();this.log_("Listen called for "+c+" "+l),this.listens.has(c)||this.listens.set(c,new Map),ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ae(!this.listens.get(c).has(l),"listen() called twice for same path/queryId.");const d={onComplete:a,hashFn:t,query:e,tag:s};this.listens.get(c).set(l,d),this.connected_&&this.sendListen_(d)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(s)})}sendListen_(e){const t=e.query,s=t._path.toString(),a=t._queryIdentifier;this.log_("Listen on "+s+" for "+a);const l={p:s},c="q";e.tag&&(l.q=t._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest(c,l,d=>{const m=d.d,g=d.s;Ys.warnOnListenWarnings_(m,t),(this.listens.get(s)&&this.listens.get(s).get(a))===e&&(this.log_("listen response",d),g!=="ok"&&this.removeListen_(s,a),e.onComplete&&e.onComplete(g,m))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&vs(e,"w")){const s=_l(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const a='".indexOn": "'+t._queryParams.getIndex().toString()+'"',l=t._path.toString();An(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||tD(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=E0)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=eD(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(t,s,a=>{const l=a.s,c=a.d||"error";this.authToken_===e&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,s=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,s)})}unlisten(e,t){const s=e._path.toString(),a=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+a),ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,a)&&this.connected_&&this.sendUnlisten_(s,a,e._queryObject,t)}sendUnlisten_(e,t,s,a){this.log_("Unlisten on "+e+" for "+t);const l={p:e},c="n";a&&(l.q=s,l.t=a),this.sendRequest(c,l)}onDisconnectPut(e,t,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:s})}onDisconnectMerge(e,t,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:s})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,s,a){const l={p:t,d:s};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,c=>{a&&setTimeout(()=>{a(c.s,c.d)},Math.floor(0))})}put(e,t,s,a){this.putInternal("p",e,t,s,a)}merge(e,t,s,a){this.putInternal("m",e,t,s,a)}putInternal(e,t,s,a,l){this.initConnection_();const c={p:t,d:s};l!==void 0&&(c.h=l),this.outstandingPuts_.push({action:e,request:c,onComplete:a}),this.outstandingPutCount_++;const d=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(d):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,a=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,s,l=>{this.log_(t+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,s=>{if(s.s!=="ok"){const l=s.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Qt(e));const t=e.r,s=this.requestCBHash_[t];s&&(delete this.requestCBHash_[t],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):K_("Unrecognized action received from server: "+Qt(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ae(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ec,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ec,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>$U&&(this.reconnectDelay_=ec),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*XU)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+Ys.nextConnectionId_++,l=this.lastSessionId;let c=!1,d=null;const m=function(){d?d.close():(c=!0,s())},g=function(E){ae(d,"sendRequest call when we're not connected not allowed."),d.sendRequest(E)};this.realtime_={close:m,sendRequest:g};const y=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[E,b]=await Promise.all([this.authTokenProvider_.getToken(y),this.appCheckTokenProvider_.getToken(y)]);c?hn("getToken() completed but was canceled"):(hn("getToken() completed. Creating connection."),this.authToken_=E&&E.accessToken,this.appCheckToken_=b&&b.token,d=new HU(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,s,A=>{An(A+" ("+this.repoInfo_.toString()+")"),this.interrupt(JU)},l))}catch(E){this.log_("Failed to get token: "+E),c||(this.repoInfo_.nodeAdmin&&An(E),m())}}}interrupt(e){hn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){hn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],T_(this.interruptReasons_)&&(this.reconnectDelay_=ec,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let s;t?s=t.map(l=>fv(l)).join("$"):s="default";const a=this.removeListen_(e,s);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(e,t){const s=new lt(e).toString();let a;if(this.listens.has(s)){const l=this.listens.get(s);a=l.get(t),l.delete(t),l.size===0&&this.listens.delete(s)}else a=void 0;return a}onAuthRevoked_(e,t){hn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=T0&&(this.reconnectDelay_=E0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){hn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=T0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+xR.replace(/\./g,"-")]=1,vy()?e["framework.cordova"]=1:pC()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Bd.getInstance().currentlyOnline();return T_(this.interruptReasons_)&&e}}Ys.nextPersistentConnectionId_=0;Ys.nextConnectionId_=0;class Le{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Le(e,t)}}class wm{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const s=new Le(Al,e),a=new Le(Al,t);return this.compare(s,a)!==0}minPost(){return Le.MIN}}let ed;class tI extends wm{static get __EMPTY_NODE(){return ed}static set __EMPTY_NODE(e){ed=e}compare(e,t){return uo(e.name,t.name)}isDefinedOn(e){throw Ll("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Le.MIN}maxPost(){return new Le(Ja,ed)}makePost(e,t){return ae(typeof e=="string","KeyIndex indexValue must always be a string."),new Le(e,ed)}toString(){return".key"}}const pl=new tI;class td{constructor(e,t,s,a,l=null){this.isReverse_=a,this.resultGenerator_=l,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?s(e.key,t):1,a&&(c*=-1),c<0)this.isReverse_?e=e.left:e=e.right;else if(c===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class nn{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??nn.RED,this.left=a??Un.EMPTY_NODE,this.right=l??Un.EMPTY_NODE}copy(e,t,s,a,l){return new nn(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return l<0?a=a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a=a.copy(null,t,null,null,null):a=a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Un.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let s,a;if(s=this,t(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),t(e,s.key)===0){if(s.right.isEmpty())return Un.EMPTY_NODE;a=s.right.min_(),s=s.copy(a.key,a.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}nn.RED=!0;nn.BLACK=!1;class ZU{copy(e,t,s,a,l){return this}insert(e,t,s){return new nn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Un{constructor(e,t=Un.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Un(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,nn.BLACK,null,null))}remove(e){return new Un(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,nn.BLACK,null,null))}get(e){let t,s=this.root_;for(;!s.isEmpty();){if(t=this.comparator_(e,s.key),t===0)return s.value;t<0?s=s.left:t>0&&(s=s.right)}return null}getPredecessorKey(e){let t,s=this.root_,a=null;for(;!s.isEmpty();)if(t=this.comparator_(e,s.key),t===0){if(s.left.isEmpty())return a?a.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else t<0?s=s.left:t>0&&(a=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new td(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new td(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new td(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new td(this.root_,null,this.comparator_,!0,e)}}Un.EMPTY_NODE=new ZU;function e4(n,e){return uo(n.name,e.name)}function vv(n,e){return uo(n,e)}let W_;function t4(n){W_=n}const nI=function(n){return typeof n=="number"?"number:"+PR(n):"string:"+n},iI=function(n){if(n.isLeafNode()){const e=n.val();ae(typeof e=="string"||typeof e=="number"||typeof e=="object"&&vs(e,".sv"),"Priority must be a string or number.")}else ae(n===W_||n.isEmpty(),"priority of unexpected type.");ae(n===W_||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let S0;class en{static set __childrenNodeConstructor(e){S0=e}static get __childrenNodeConstructor(){return S0}constructor(e,t=en.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ae(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),iI(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new en(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:en.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ze(e)?this:Me(e)===".priority"?this.priorityNode_:en.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:en.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const s=Me(e);return s===null?t:t.isEmpty()&&s!==".priority"?this:(ae(s!==".priority"||oa(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,en.__childrenNodeConstructor.EMPTY_NODE.updateChild(ft(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+nI(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=PR(this.value_):e+=this.value_,this.lazyHash_=DR(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===en.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof en.__childrenNodeConstructor?-1:(ae(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,s=typeof this.value_,a=en.VALUE_TYPE_ORDER.indexOf(t),l=en.VALUE_TYPE_ORDER.indexOf(s);return ae(a>=0,"Unknown leaf type: "+t),ae(l>=0,"Unknown leaf type: "+s),a===l?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}en.VALUE_TYPE_ORDER=["object","boolean","number","string"];let sI,rI;function n4(n){sI=n}function i4(n){rI=n}class s4 extends wm{compare(e,t){const s=e.node.getPriority(),a=t.node.getPriority(),l=s.compareTo(a);return l===0?uo(e.name,t.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Le.MIN}maxPost(){return new Le(Ja,new en("[PRIORITY-POST]",rI))}makePost(e,t){const s=sI(e);return new Le(t,new en("[PRIORITY-POST]",s))}toString(){return".priority"}}const Ct=new s4;const r4=Math.log(2);class a4{constructor(e){const t=l=>parseInt(Math.log(l)/r4,10),s=l=>parseInt(Array(l+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const a=s(this.count);this.bits_=e+1&a}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Fd=function(n,e,t,s){n.sort(e);const a=function(m,g){const y=g-m;let E,b;if(y===0)return null;if(y===1)return E=n[m],b=t?t(E):E,new nn(b,E.node,nn.BLACK,null,null);{const A=parseInt(y/2,10)+m,I=a(m,A),j=a(A+1,g);return E=n[A],b=t?t(E):E,new nn(b,E.node,nn.BLACK,I,j)}},l=function(m){let g=null,y=null,E=n.length;const b=function(I,j){const V=E-I,$=E;E-=I;const K=a(V+1,$),ee=n[V],ue=t?t(ee):ee;A(new nn(ue,ee.node,j,null,K))},A=function(I){g?(g.left=I,g=I):(y=I,g=I)};for(let I=0;I<m.count;++I){const j=m.nextBitIsOne(),V=Math.pow(2,m.count-(I+1));j?b(V,nn.BLACK):(b(V,nn.BLACK),b(V,nn.RED))}return y},c=new a4(n.length),d=l(c);return new Un(s||e,d)};let f_;const tl={};class Hs{static get Default(){return ae(tl&&Ct,"ChildrenNode.ts has not been loaded"),f_=f_||new Hs({".priority":tl},{".priority":Ct}),f_}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=_l(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Un?t:null}hasIndex(e){return vs(this.indexSet_,e.toString())}addIndex(e,t){ae(e!==pl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let a=!1;const l=t.getIterator(Le.Wrap);let c=l.getNext();for(;c;)a=a||e.isDefinedOn(c.node),s.push(c),c=l.getNext();let d;a?d=Fd(s,e.getCompare()):d=tl;const m=e.toString(),g={...this.indexSet_};g[m]=e;const y={...this.indexes_};return y[m]=d,new Hs(y,g)}addToIndexes(e,t){const s=Ed(this.indexes_,(a,l)=>{const c=_l(this.indexSet_,l);if(ae(c,"Missing index implementation for "+l),a===tl)if(c.isDefinedOn(e.node)){const d=[],m=t.getIterator(Le.Wrap);let g=m.getNext();for(;g;)g.name!==e.name&&d.push(g),g=m.getNext();return d.push(e),Fd(d,c.getCompare())}else return tl;else{const d=t.get(e.name);let m=a;return d&&(m=m.remove(new Le(e.name,d))),m.insert(e,e.node)}});return new Hs(s,this.indexSet_)}removeFromIndexes(e,t){const s=Ed(this.indexes_,a=>{if(a===tl)return a;{const l=t.get(e.name);return l?a.remove(new Le(e.name,l)):a}});return new Hs(s,this.indexSet_)}}let tc;class be{static get EMPTY_NODE(){return tc||(tc=new be(new Un(vv),null,Hs.Default))}constructor(e,t,s){this.children_=e,this.priorityNode_=t,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&iI(this.priorityNode_),this.children_.isEmpty()&&ae(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||tc}updatePriority(e){return this.children_.isEmpty()?this:new be(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?tc:t}}getChild(e){const t=Me(e);return t===null?this:this.getImmediateChild(t).getChild(ft(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(ae(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const s=new Le(e,t);let a,l;t.isEmpty()?(a=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(s,this.children_)):(a=this.children_.insert(e,t),l=this.indexMap_.addToIndexes(s,this.children_));const c=a.isEmpty()?tc:this.priorityNode_;return new be(a,c,l)}}updateChild(e,t){const s=Me(e);if(s===null)return t;{ae(Me(e)!==".priority"||oa(e)===1,".priority must be the last token in a path");const a=this.getImmediateChild(s).updateChild(ft(e),t);return this.updateImmediateChild(s,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let s=0,a=0,l=!0;if(this.forEachChild(Ct,(c,d)=>{t[c]=d.val(e),s++,l&&be.INTEGER_REGEXP_.test(c)?a=Math.max(a,Number(c)):l=!1}),!e&&l&&a<2*s){const c=[];for(const d in t)c[d]=t[d];return c}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+nI(this.getPriority().val())+":"),this.forEachChild(Ct,(t,s)=>{const a=s.hash();a!==""&&(e+=":"+t+":"+a)}),this.lazyHash_=e===""?"":DR(e)}return this.lazyHash_}getPredecessorChildName(e,t,s){const a=this.resolveIndex_(s);if(a){const l=a.getPredecessorKey(new Le(e,t));return l?l.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const s=t.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Le(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const s=t.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Le(t,this.children_.get(t)):null}forEachChild(e,t){const s=this.resolveIndex_(e);return s?s.inorderTraversal(a=>t(a.name,a.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const s=this.resolveIndex_(t);if(s)return s.getIteratorFrom(e,a=>a);{const a=this.children_.getIteratorFrom(e.name,Le.Wrap);let l=a.peek();for(;l!=null&&t.compare(l,e)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const s=this.resolveIndex_(t);if(s)return s.getReverseIteratorFrom(e,a=>a);{const a=this.children_.getReverseIteratorFrom(e.name,Le.Wrap);let l=a.peek();for(;l!=null&&t.compare(l,e)>0;)a.getNext(),l=a.peek();return a}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===lh?-1:0}withIndex(e){if(e===pl||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new be(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===pl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const s=this.getIterator(Ct),a=t.getIterator(Ct);let l=s.getNext(),c=a.getNext();for(;l&&c;){if(l.name!==c.name||!l.node.equals(c.node))return!1;l=s.getNext(),c=a.getNext()}return l===null&&c===null}else return!1;else return!1}}resolveIndex_(e){return e===pl?null:this.indexMap_.get(e.toString())}}be.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class o4 extends be{constructor(){super(new Un(vv),be.EMPTY_NODE,Hs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return be.EMPTY_NODE}isEmpty(){return!1}}const lh=new o4;Object.defineProperties(Le,{MIN:{value:new Le(Al,be.EMPTY_NODE)},MAX:{value:new Le(Ja,lh)}});tI.__EMPTY_NODE=be.EMPTY_NODE;en.__childrenNodeConstructor=be;t4(lh);i4(lh);const l4=!0;function Kt(n,e=null){if(n===null)return be.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),ae(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new en(t,Kt(e))}if(!(n instanceof Array)&&l4){const t=[];let s=!1;if(pn(n,(c,d)=>{if(c.substring(0,1)!=="."){const m=Kt(d);m.isEmpty()||(s=s||!m.getPriority().isEmpty(),t.push(new Le(c,m)))}}),t.length===0)return be.EMPTY_NODE;const l=Fd(t,e4,c=>c.name,vv);if(s){const c=Fd(t,Ct.getCompare());return new be(l,Kt(e),new Hs({".priority":c},{".priority":Ct}))}else return new be(l,Kt(e),Hs.Default)}else{let t=be.EMPTY_NODE;return pn(n,(s,a)=>{if(vs(n,s)&&s.substring(0,1)!=="."){const l=Kt(a);(l.isLeafNode()||!l.isEmpty())&&(t=t.updateImmediateChild(s,l))}}),t.updatePriority(Kt(e))}}n4(Kt);class u4 extends wm{constructor(e){super(),this.indexPath_=e,ae(!ze(e)&&Me(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const s=this.extractChild(e.node),a=this.extractChild(t.node),l=s.compareTo(a);return l===0?uo(e.name,t.name):l}makePost(e,t){const s=Kt(e),a=be.EMPTY_NODE.updateChild(this.indexPath_,s);return new Le(t,a)}maxPost(){const e=be.EMPTY_NODE.updateChild(this.indexPath_,lh);return new Le(Ja,e)}toString(){return Uc(this.indexPath_,0).join("/")}}class c4 extends wm{compare(e,t){const s=e.node.compareTo(t.node);return s===0?uo(e.name,t.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Le.MIN}maxPost(){return Le.MAX}makePost(e,t){const s=Kt(e);return new Le(t,s)}toString(){return".value"}}const h4=new c4;function aI(n){return{type:"value",snapshotNode:n}}function Rl(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function jc(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function zc(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function f4(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}class Ev{constructor(e){this.index_=e}updateChild(e,t,s,a,l,c){ae(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(a).equals(s.getChild(a))&&d.isEmpty()===s.isEmpty()||(c!=null&&(s.isEmpty()?e.hasChild(t)?c.trackChildChange(jc(t,d)):ae(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?c.trackChildChange(Rl(t,s)):c.trackChildChange(zc(t,s,d))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(t,s).withIndex(this.index_)}updateFullNode(e,t,s){return s!=null&&(e.isLeafNode()||e.forEachChild(Ct,(a,l)=>{t.hasChild(a)||s.trackChildChange(jc(a,l))}),t.isLeafNode()||t.forEachChild(Ct,(a,l)=>{if(e.hasChild(a)){const c=e.getImmediateChild(a);c.equals(l)||s.trackChildChange(zc(a,l,c))}else s.trackChildChange(Rl(a,l))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?be.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Bc{constructor(e){this.indexedFilter_=new Ev(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Bc.getStartPost_(e),this.endPost_=Bc.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&s}updateChild(e,t,s,a,l,c){return this.matches(new Le(t,s))||(s=be.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,s,a,l,c)}updateFullNode(e,t,s){t.isLeafNode()&&(t=be.EMPTY_NODE);let a=t.withIndex(this.index_);a=a.updatePriority(be.EMPTY_NODE);const l=this;return t.forEachChild(Ct,(c,d)=>{l.matches(new Le(c,d))||(a=a.updateImmediateChild(c,be.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,a,s)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}class d4{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=t=>{const s=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new Bc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,s,a,l,c){return this.rangedFilter_.matches(new Le(t,s))||(s=be.EMPTY_NODE),e.getImmediateChild(t).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,s,a,l,c):this.fullLimitUpdateChild_(e,t,s,l,c)}updateFullNode(e,t,s){let a;if(t.isLeafNode()||t.isEmpty())a=be.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){a=be.EMPTY_NODE.withIndex(this.index_);let l;this.reverse_?l=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;l.hasNext()&&c<this.limit_;){const d=l.getNext();if(this.withinDirectionalStart(d))if(this.withinDirectionalEnd(d))a=a.updateImmediateChild(d.name,d.node),c++;else break;else continue}}else{a=t.withIndex(this.index_),a=a.updatePriority(be.EMPTY_NODE);let l;this.reverse_?l=a.getReverseIterator(this.index_):l=a.getIterator(this.index_);let c=0;for(;l.hasNext();){const d=l.getNext();c<this.limit_&&this.withinDirectionalStart(d)&&this.withinDirectionalEnd(d)?c++:a=a.updateImmediateChild(d.name,be.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,a,s)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,s,a,l){let c;if(this.reverse_){const E=this.index_.getCompare();c=(b,A)=>E(A,b)}else c=this.index_.getCompare();const d=e;ae(d.numChildren()===this.limit_,"");const m=new Le(t,s),g=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),y=this.rangedFilter_.matches(m);if(d.hasChild(t)){const E=d.getImmediateChild(t);let b=a.getChildAfterChild(this.index_,g,this.reverse_);for(;b!=null&&(b.name===t||d.hasChild(b.name));)b=a.getChildAfterChild(this.index_,b,this.reverse_);const A=b==null?1:c(b,m);if(y&&!s.isEmpty()&&A>=0)return l?.trackChildChange(zc(t,s,E)),d.updateImmediateChild(t,s);{l?.trackChildChange(jc(t,E));const j=d.updateImmediateChild(t,be.EMPTY_NODE);return b!=null&&this.rangedFilter_.matches(b)?(l?.trackChildChange(Rl(b.name,b.node)),j.updateImmediateChild(b.name,b.node)):j}}else return s.isEmpty()?e:y&&c(g,m)>=0?(l!=null&&(l.trackChildChange(jc(g.name,g.node)),l.trackChildChange(Rl(t,s))),d.updateImmediateChild(t,s).updateImmediateChild(g.name,be.EMPTY_NODE)):e}}class Tv{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ct}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ae(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ae(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Al}hasEnd(){return this.endSet_}getIndexEndValue(){return ae(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ae(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ja}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ae(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ct}copy(){const e=new Tv;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function m4(n){return n.loadsAllData()?new Ev(n.getIndex()):n.hasLimit()?new d4(n):new Bc(n)}function b0(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Ct?t="$priority":n.index_===h4?t="$value":n.index_===pl?t="$key":(ae(n.index_ instanceof u4,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Qt(t),n.startSet_){const s=n.startAfterSet_?"startAfter":"startAt";e[s]=Qt(n.indexStartValue_),n.startNameSet_&&(e[s]+=","+Qt(n.indexStartName_))}if(n.endSet_){const s=n.endBeforeSet_?"endBefore":"endAt";e[s]=Qt(n.indexEndValue_),n.endNameSet_&&(e[s]+=","+Qt(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function w0(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Ct&&(e.i=n.index_.toString()),e}class Hd extends $R{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(ae(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,s,a){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=s,this.appCheckTokenProvider_=a,this.log_=oh("p:rest:"),this.listens_={}}listen(e,t,s,a){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const c=Hd.getListenId_(e,s),d={};this.listens_[c]=d;const m=b0(e._queryParams);this.restRequest_(l+".json",m,(g,y)=>{let E=y;if(g===404&&(E=null,g=null),g===null&&this.onDataUpdate_(l,E,!1,s),_l(this.listens_,c)===d){let b;g?g===401?b="permission_denied":b="rest_error:"+g:b="ok",a(b,null)}})}unlisten(e,t){const s=Hd.getListenId_(e,t);delete this.listens_[s]}get(e){const t=b0(e._queryParams),s=e._path.toString(),a=new Qc;return this.restRequest_(s+".json",t,(l,c)=>{let d=c;l===404&&(d=null,l=null),l===null?(this.onDataUpdate_(s,d,!1,null),a.resolve(d)):a.reject(new Error(d))}),a.promise}refreshAuthToken(e){}restRequest_(e,t={},s){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,l])=>{a&&a.accessToken&&(t.auth=a.accessToken),l&&l.token&&(t.ac=l.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+so(t);this.log_("Sending REST request for "+c);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(s&&d.readyState===4){this.log_("REST Response for "+c+" received. status:",d.status,"response:",d.responseText);let m=null;if(d.status>=200&&d.status<300){try{m=Ac(d.responseText)}catch{An("Failed to parse JSON response for "+c+": "+d.responseText)}s(null,m)}else d.status!==401&&d.status!==404&&An("Got unsuccessful REST response for "+c+" Status: "+d.status),s(d.status);s=null}},d.open("GET",c,!0),d.send()})}}class p4{constructor(){this.rootNode_=be.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function qd(){return{value:null,children:new Map}}function oI(n,e,t){if(ze(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const s=Me(e);n.children.has(s)||n.children.set(s,qd());const a=n.children.get(s);e=ft(e),oI(a,e,t)}}function X_(n,e,t){n.value!==null?t(e,n.value):g4(n,(s,a)=>{const l=new lt(e.toString()+"/"+s);X_(a,l,t)})}function g4(n,e){n.children.forEach((t,s)=>{e(s,t)})}class _4{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t={...e};return this.last_&&pn(this.last_,(s,a)=>{t[s]=t[s]-a}),this.last_=e,t}}const C0=10*1e3,y4=30*1e3,v4=300*1e3;class E4{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new _4(e);const s=C0+(y4-C0)*Math.random();Ec(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),t={};let s=!1;pn(e,(a,l)=>{l>0&&vs(this.statsToReport_,a)&&(t[a]=l,s=!0)}),s&&this.server_.reportStats(t),Ec(this.reportStats_.bind(this),Math.floor(Math.random()*2*v4))}}var Li;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Li||(Li={}));function Sv(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function bv(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function wv(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Gd{constructor(e,t,s){this.path=e,this.affectedTree=t,this.revert=s,this.type=Li.ACK_USER_WRITE,this.source=Sv()}operationForChild(e){if(ze(this.path)){if(this.affectedTree.value!=null)return ae(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new lt(e));return new Gd(We(),t,this.revert)}}else return ae(Me(this.path)===e,"operationForChild called for unrelated child."),new Gd(ft(this.path),this.affectedTree,this.revert)}}class Fc{constructor(e,t){this.source=e,this.path=t,this.type=Li.LISTEN_COMPLETE}operationForChild(e){return ze(this.path)?new Fc(this.source,We()):new Fc(this.source,ft(this.path))}}class Za{constructor(e,t,s){this.source=e,this.path=t,this.snap=s,this.type=Li.OVERWRITE}operationForChild(e){return ze(this.path)?new Za(this.source,We(),this.snap.getImmediateChild(e)):new Za(this.source,ft(this.path),this.snap)}}class Il{constructor(e,t,s){this.source=e,this.path=t,this.children=s,this.type=Li.MERGE}operationForChild(e){if(ze(this.path)){const t=this.children.subtree(new lt(e));return t.isEmpty()?null:t.value?new Za(this.source,We(),t.value):new Il(this.source,We(),t)}else return ae(Me(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Il(this.source,ft(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class la{constructor(e,t,s){this.node_=e,this.fullyInitialized_=t,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ze(e))return this.isFullyInitialized()&&!this.filtered_;const t=Me(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class T4{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function S4(n,e,t,s){const a=[],l=[];return e.forEach(c=>{c.type==="child_changed"&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&l.push(f4(c.childName,c.snapshotNode))}),nc(n,a,"child_removed",e,s,t),nc(n,a,"child_added",e,s,t),nc(n,a,"child_moved",l,s,t),nc(n,a,"child_changed",e,s,t),nc(n,a,"value",e,s,t),a}function nc(n,e,t,s,a,l){const c=s.filter(d=>d.type===t);c.sort((d,m)=>w4(n,d,m)),c.forEach(d=>{const m=b4(n,d,l);a.forEach(g=>{g.respondsTo(d.type)&&e.push(g.createEvent(m,n.query_))})})}function b4(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function w4(n,e,t){if(e.childName==null||t.childName==null)throw Ll("Should only compare child_ events.");const s=new Le(e.childName,e.snapshotNode),a=new Le(t.childName,t.snapshotNode);return n.index_.compare(s,a)}function Cm(n,e){return{eventCache:n,serverCache:e}}function Tc(n,e,t,s){return Cm(new la(e,t,s),n.serverCache)}function lI(n,e,t,s){return Cm(n.eventCache,new la(e,t,s))}function Yd(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function eo(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let d_;const C4=()=>(d_||(d_=new Un(uU)),d_);class ht{static fromObject(e){let t=new ht(null);return pn(e,(s,a)=>{t=t.set(new lt(s),a)}),t}constructor(e,t=C4()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:We(),value:this.value};if(ze(e))return null;{const s=Me(e),a=this.children.get(s);if(a!==null){const l=a.findRootMostMatchingPathAndValue(ft(e),t);return l!=null?{path:wt(new lt(s),l.path),value:l.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ze(e))return this;{const t=Me(e),s=this.children.get(t);return s!==null?s.subtree(ft(e)):new ht(null)}}set(e,t){if(ze(e))return new ht(t,this.children);{const s=Me(e),l=(this.children.get(s)||new ht(null)).set(ft(e),t),c=this.children.insert(s,l);return new ht(this.value,c)}}remove(e){if(ze(e))return this.children.isEmpty()?new ht(null):new ht(null,this.children);{const t=Me(e),s=this.children.get(t);if(s){const a=s.remove(ft(e));let l;return a.isEmpty()?l=this.children.remove(t):l=this.children.insert(t,a),this.value===null&&l.isEmpty()?new ht(null):new ht(this.value,l)}else return this}}get(e){if(ze(e))return this.value;{const t=Me(e),s=this.children.get(t);return s?s.get(ft(e)):null}}setTree(e,t){if(ze(e))return t;{const s=Me(e),l=(this.children.get(s)||new ht(null)).setTree(ft(e),t);let c;return l.isEmpty()?c=this.children.remove(s):c=this.children.insert(s,l),new ht(this.value,c)}}fold(e){return this.fold_(We(),e)}fold_(e,t){const s={};return this.children.inorderTraversal((a,l)=>{s[a]=l.fold_(wt(e,a),t)}),t(e,this.value,s)}findOnPath(e,t){return this.findOnPath_(e,We(),t)}findOnPath_(e,t,s){const a=this.value?s(t,this.value):!1;if(a)return a;if(ze(e))return null;{const l=Me(e),c=this.children.get(l);return c?c.findOnPath_(ft(e),wt(t,l),s):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,We(),t)}foreachOnPath_(e,t,s){if(ze(e))return this;{this.value&&s(t,this.value);const a=Me(e),l=this.children.get(a);return l?l.foreachOnPath_(ft(e),wt(t,a),s):new ht(null)}}foreach(e){this.foreach_(We(),e)}foreach_(e,t){this.children.inorderTraversal((s,a)=>{a.foreach_(wt(e,s),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,s)=>{s.value&&e(t,s.value)})}}class Vi{constructor(e){this.writeTree_=e}static empty(){return new Vi(new ht(null))}}function Sc(n,e,t){if(ze(e))return new Vi(new ht(t));{const s=n.writeTree_.findRootMostValueAndPath(e);if(s!=null){const a=s.path;let l=s.value;const c=Cn(a,e);return l=l.updateChild(c,t),new Vi(n.writeTree_.set(a,l))}else{const a=new ht(t),l=n.writeTree_.setTree(e,a);return new Vi(l)}}}function $_(n,e,t){let s=n;return pn(t,(a,l)=>{s=Sc(s,wt(e,a),l)}),s}function A0(n,e){if(ze(e))return Vi.empty();{const t=n.writeTree_.setTree(e,new ht(null));return new Vi(t)}}function J_(n,e){return co(n,e)!=null}function co(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Cn(t.path,e)):null}function R0(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Ct,(s,a)=>{e.push(new Le(s,a))}):n.writeTree_.children.inorderTraversal((s,a)=>{a.value!=null&&e.push(new Le(s,a.value))}),e}function $r(n,e){if(ze(e))return n;{const t=co(n,e);return t!=null?new Vi(new ht(t)):new Vi(n.writeTree_.subtree(e))}}function Z_(n){return n.writeTree_.isEmpty()}function Nl(n,e){return uI(We(),n.writeTree_,e)}function uI(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let s=null;return e.children.inorderTraversal((a,l)=>{a===".priority"?(ae(l.value!==null,"Priority writes must always be leaf nodes"),s=l.value):t=uI(wt(n,a),l,t)}),!t.getChild(n).isEmpty()&&s!==null&&(t=t.updateChild(wt(n,".priority"),s)),t}}function Am(n,e){return dI(e,n)}function A4(n,e,t,s,a){ae(s>n.lastWriteId,"Stacking an older write on top of newer ones"),a===void 0&&(a=!0),n.allWrites.push({path:e,snap:t,writeId:s,visible:a}),a&&(n.visibleWrites=Sc(n.visibleWrites,e,t)),n.lastWriteId=s}function R4(n,e,t,s){ae(s>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:s,visible:!0}),n.visibleWrites=$_(n.visibleWrites,e,t),n.lastWriteId=s}function I4(n,e){for(let t=0;t<n.allWrites.length;t++){const s=n.allWrites[t];if(s.writeId===e)return s}return null}function N4(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);ae(t>=0,"removeWrite called with nonexistent writeId.");const s=n.allWrites[t];n.allWrites.splice(t,1);let a=s.visible,l=!1,c=n.allWrites.length-1;for(;a&&c>=0;){const d=n.allWrites[c];d.visible&&(c>=t&&x4(d,s.path)?a=!1:pi(s.path,d.path)&&(l=!0)),c--}if(a){if(l)return O4(n),!0;if(s.snap)n.visibleWrites=A0(n.visibleWrites,s.path);else{const d=s.children;pn(d,m=>{n.visibleWrites=A0(n.visibleWrites,wt(s.path,m))})}return!0}else return!1}function x4(n,e){if(n.snap)return pi(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&pi(wt(n.path,t),e))return!0;return!1}function O4(n){n.visibleWrites=cI(n.allWrites,D4,We()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function D4(n){return n.visible}function cI(n,e,t){let s=Vi.empty();for(let a=0;a<n.length;++a){const l=n[a];if(e(l)){const c=l.path;let d;if(l.snap)pi(t,c)?(d=Cn(t,c),s=Sc(s,d,l.snap)):pi(c,t)&&(d=Cn(c,t),s=Sc(s,We(),l.snap.getChild(d)));else if(l.children){if(pi(t,c))d=Cn(t,c),s=$_(s,d,l.children);else if(pi(c,t))if(d=Cn(c,t),ze(d))s=$_(s,We(),l.children);else{const m=_l(l.children,Me(d));if(m){const g=m.getChild(ft(d));s=Sc(s,We(),g)}}}else throw Ll("WriteRecord should have .snap or .children")}}return s}function hI(n,e,t,s,a){if(!s&&!a){const l=co(n.visibleWrites,e);if(l!=null)return l;{const c=$r(n.visibleWrites,e);if(Z_(c))return t;if(t==null&&!J_(c,We()))return null;{const d=t||be.EMPTY_NODE;return Nl(c,d)}}}else{const l=$r(n.visibleWrites,e);if(!a&&Z_(l))return t;if(!a&&t==null&&!J_(l,We()))return null;{const c=function(g){return(g.visible||a)&&(!s||!~s.indexOf(g.writeId))&&(pi(g.path,e)||pi(e,g.path))},d=cI(n.allWrites,c,e),m=t||be.EMPTY_NODE;return Nl(d,m)}}}function k4(n,e,t){let s=be.EMPTY_NODE;const a=co(n.visibleWrites,e);if(a)return a.isLeafNode()||a.forEachChild(Ct,(l,c)=>{s=s.updateImmediateChild(l,c)}),s;if(t){const l=$r(n.visibleWrites,e);return t.forEachChild(Ct,(c,d)=>{const m=Nl($r(l,new lt(c)),d);s=s.updateImmediateChild(c,m)}),R0(l).forEach(c=>{s=s.updateImmediateChild(c.name,c.node)}),s}else{const l=$r(n.visibleWrites,e);return R0(l).forEach(c=>{s=s.updateImmediateChild(c.name,c.node)}),s}}function P4(n,e,t,s,a){ae(s||a,"Either existingEventSnap or existingServerSnap must exist");const l=wt(e,t);if(J_(n.visibleWrites,l))return null;{const c=$r(n.visibleWrites,l);return Z_(c)?a.getChild(t):Nl(c,a.getChild(t))}}function M4(n,e,t,s){const a=wt(e,t),l=co(n.visibleWrites,a);if(l!=null)return l;if(s.isCompleteForChild(t)){const c=$r(n.visibleWrites,a);return Nl(c,s.getNode().getImmediateChild(t))}else return null}function L4(n,e){return co(n.visibleWrites,e)}function V4(n,e,t,s,a,l,c){let d;const m=$r(n.visibleWrites,e),g=co(m,We());if(g!=null)d=g;else if(t!=null)d=Nl(m,t);else return[];if(d=d.withIndex(c),!d.isEmpty()&&!d.isLeafNode()){const y=[],E=c.getCompare(),b=l?d.getReverseIteratorFrom(s,c):d.getIteratorFrom(s,c);let A=b.getNext();for(;A&&y.length<a;)E(A,s)!==0&&y.push(A),A=b.getNext();return y}else return[]}function U4(){return{visibleWrites:Vi.empty(),allWrites:[],lastWriteId:-1}}function Kd(n,e,t,s){return hI(n.writeTree,n.treePath,e,t,s)}function Cv(n,e){return k4(n.writeTree,n.treePath,e)}function I0(n,e,t,s){return P4(n.writeTree,n.treePath,e,t,s)}function Qd(n,e){return L4(n.writeTree,wt(n.treePath,e))}function j4(n,e,t,s,a,l){return V4(n.writeTree,n.treePath,e,t,s,a,l)}function Av(n,e,t){return M4(n.writeTree,n.treePath,e,t)}function fI(n,e){return dI(wt(n.treePath,e),n.writeTree)}function dI(n,e){return{treePath:n,writeTree:e}}class z4{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,s=e.childName;ae(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ae(s!==".priority","Only non-priority child changes can be tracked.");const a=this.changeMap.get(s);if(a){const l=a.type;if(t==="child_added"&&l==="child_removed")this.changeMap.set(s,zc(s,e.snapshotNode,a.snapshotNode));else if(t==="child_removed"&&l==="child_added")this.changeMap.delete(s);else if(t==="child_removed"&&l==="child_changed")this.changeMap.set(s,jc(s,a.oldSnap));else if(t==="child_changed"&&l==="child_added")this.changeMap.set(s,Rl(s,e.snapshotNode));else if(t==="child_changed"&&l==="child_changed")this.changeMap.set(s,zc(s,e.snapshotNode,a.oldSnap));else throw Ll("Illegal combination of changes: "+e+" occurred after "+a)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}class B4{getCompleteChild(e){return null}getChildAfterChild(e,t,s){return null}}const mI=new B4;class Rv{constructor(e,t,s=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=s}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new la(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Av(this.writes_,e,s)}}getChildAfterChild(e,t,s){const a=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:eo(this.viewCache_),l=j4(this.writes_,a,t,1,s,e);return l.length===0?null:l[0]}}function F4(n){return{filter:n}}function H4(n,e){ae(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ae(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function q4(n,e,t,s,a){const l=new z4;let c,d;if(t.type===Li.OVERWRITE){const g=t;g.source.fromUser?c=ey(n,e,g.path,g.snap,s,a,l):(ae(g.source.fromServer,"Unknown source."),d=g.source.tagged||e.serverCache.isFiltered()&&!ze(g.path),c=Wd(n,e,g.path,g.snap,s,a,d,l))}else if(t.type===Li.MERGE){const g=t;g.source.fromUser?c=Y4(n,e,g.path,g.children,s,a,l):(ae(g.source.fromServer,"Unknown source."),d=g.source.tagged||e.serverCache.isFiltered(),c=ty(n,e,g.path,g.children,s,a,d,l))}else if(t.type===Li.ACK_USER_WRITE){const g=t;g.revert?c=W4(n,e,g.path,s,a,l):c=K4(n,e,g.path,g.affectedTree,s,a,l)}else if(t.type===Li.LISTEN_COMPLETE)c=Q4(n,e,t.path,s,l);else throw Ll("Unknown operation type: "+t.type);const m=l.getChanges();return G4(e,c,m),{viewCache:c,changes:m}}function G4(n,e,t){const s=e.eventCache;if(s.isFullyInitialized()){const a=s.getNode().isLeafNode()||s.getNode().isEmpty(),l=Yd(n);(t.length>0||!n.eventCache.isFullyInitialized()||a&&!s.getNode().equals(l)||!s.getNode().getPriority().equals(l.getPriority()))&&t.push(aI(Yd(e)))}}function pI(n,e,t,s,a,l){const c=e.eventCache;if(Qd(s,t)!=null)return e;{let d,m;if(ze(t))if(ae(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const g=eo(e),y=g instanceof be?g:be.EMPTY_NODE,E=Cv(s,y);d=n.filter.updateFullNode(e.eventCache.getNode(),E,l)}else{const g=Kd(s,eo(e));d=n.filter.updateFullNode(e.eventCache.getNode(),g,l)}else{const g=Me(t);if(g===".priority"){ae(oa(t)===1,"Can't have a priority with additional path components");const y=c.getNode();m=e.serverCache.getNode();const E=I0(s,t,y,m);E!=null?d=n.filter.updatePriority(y,E):d=c.getNode()}else{const y=ft(t);let E;if(c.isCompleteForChild(g)){m=e.serverCache.getNode();const b=I0(s,t,c.getNode(),m);b!=null?E=c.getNode().getImmediateChild(g).updateChild(y,b):E=c.getNode().getImmediateChild(g)}else E=Av(s,g,e.serverCache);E!=null?d=n.filter.updateChild(c.getNode(),g,E,y,a,l):d=c.getNode()}}return Tc(e,d,c.isFullyInitialized()||ze(t),n.filter.filtersNodes())}}function Wd(n,e,t,s,a,l,c,d){const m=e.serverCache;let g;const y=c?n.filter:n.filter.getIndexedFilter();if(ze(t))g=y.updateFullNode(m.getNode(),s,null);else if(y.filtersNodes()&&!m.isFiltered()){const A=m.getNode().updateChild(t,s);g=y.updateFullNode(m.getNode(),A,null)}else{const A=Me(t);if(!m.isCompleteForPath(t)&&oa(t)>1)return e;const I=ft(t),V=m.getNode().getImmediateChild(A).updateChild(I,s);A===".priority"?g=y.updatePriority(m.getNode(),V):g=y.updateChild(m.getNode(),A,V,I,mI,null)}const E=lI(e,g,m.isFullyInitialized()||ze(t),y.filtersNodes()),b=new Rv(a,E,l);return pI(n,E,t,a,b,d)}function ey(n,e,t,s,a,l,c){const d=e.eventCache;let m,g;const y=new Rv(a,e,l);if(ze(t))g=n.filter.updateFullNode(e.eventCache.getNode(),s,c),m=Tc(e,g,!0,n.filter.filtersNodes());else{const E=Me(t);if(E===".priority")g=n.filter.updatePriority(e.eventCache.getNode(),s),m=Tc(e,g,d.isFullyInitialized(),d.isFiltered());else{const b=ft(t),A=d.getNode().getImmediateChild(E);let I;if(ze(b))I=s;else{const j=y.getCompleteChild(E);j!=null?gv(b)===".priority"&&j.getChild(ZR(b)).isEmpty()?I=j:I=j.updateChild(b,s):I=be.EMPTY_NODE}if(A.equals(I))m=e;else{const j=n.filter.updateChild(d.getNode(),E,I,b,y,c);m=Tc(e,j,d.isFullyInitialized(),n.filter.filtersNodes())}}}return m}function N0(n,e){return n.eventCache.isCompleteForChild(e)}function Y4(n,e,t,s,a,l,c){let d=e;return s.foreach((m,g)=>{const y=wt(t,m);N0(e,Me(y))&&(d=ey(n,d,y,g,a,l,c))}),s.foreach((m,g)=>{const y=wt(t,m);N0(e,Me(y))||(d=ey(n,d,y,g,a,l,c))}),d}function x0(n,e,t){return t.foreach((s,a)=>{e=e.updateChild(s,a)}),e}function ty(n,e,t,s,a,l,c,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let m=e,g;ze(t)?g=s:g=new ht(null).setTree(t,s);const y=e.serverCache.getNode();return g.children.inorderTraversal((E,b)=>{if(y.hasChild(E)){const A=e.serverCache.getNode().getImmediateChild(E),I=x0(n,A,b);m=Wd(n,m,new lt(E),I,a,l,c,d)}}),g.children.inorderTraversal((E,b)=>{const A=!e.serverCache.isCompleteForChild(E)&&b.value===null;if(!y.hasChild(E)&&!A){const I=e.serverCache.getNode().getImmediateChild(E),j=x0(n,I,b);m=Wd(n,m,new lt(E),j,a,l,c,d)}}),m}function K4(n,e,t,s,a,l,c){if(Qd(a,t)!=null)return e;const d=e.serverCache.isFiltered(),m=e.serverCache;if(s.value!=null){if(ze(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return Wd(n,e,t,m.getNode().getChild(t),a,l,d,c);if(ze(t)){let g=new ht(null);return m.getNode().forEachChild(pl,(y,E)=>{g=g.set(new lt(y),E)}),ty(n,e,t,g,a,l,d,c)}else return e}else{let g=new ht(null);return s.foreach((y,E)=>{const b=wt(t,y);m.isCompleteForPath(b)&&(g=g.set(y,m.getNode().getChild(b)))}),ty(n,e,t,g,a,l,d,c)}}function Q4(n,e,t,s,a){const l=e.serverCache,c=lI(e,l.getNode(),l.isFullyInitialized()||ze(t),l.isFiltered());return pI(n,c,t,s,mI,a)}function W4(n,e,t,s,a,l){let c;if(Qd(s,t)!=null)return e;{const d=new Rv(s,e,a),m=e.eventCache.getNode();let g;if(ze(t)||Me(t)===".priority"){let y;if(e.serverCache.isFullyInitialized())y=Kd(s,eo(e));else{const E=e.serverCache.getNode();ae(E instanceof be,"serverChildren would be complete if leaf node"),y=Cv(s,E)}y=y,g=n.filter.updateFullNode(m,y,l)}else{const y=Me(t);let E=Av(s,y,e.serverCache);E==null&&e.serverCache.isCompleteForChild(y)&&(E=m.getImmediateChild(y)),E!=null?g=n.filter.updateChild(m,y,E,ft(t),d,l):e.eventCache.getNode().hasChild(y)?g=n.filter.updateChild(m,y,be.EMPTY_NODE,ft(t),d,l):g=m,g.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=Kd(s,eo(e)),c.isLeafNode()&&(g=n.filter.updateFullNode(g,c,l)))}return c=e.serverCache.isFullyInitialized()||Qd(s,We())!=null,Tc(e,g,c,n.filter.filtersNodes())}}class X4{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,a=new Ev(s.getIndex()),l=m4(s);this.processor_=F4(l);const c=t.serverCache,d=t.eventCache,m=a.updateFullNode(be.EMPTY_NODE,c.getNode(),null),g=l.updateFullNode(be.EMPTY_NODE,d.getNode(),null),y=new la(m,c.isFullyInitialized(),a.filtersNodes()),E=new la(g,d.isFullyInitialized(),l.filtersNodes());this.viewCache_=Cm(E,y),this.eventGenerator_=new T4(this.query_)}get query(){return this.query_}}function $4(n){return n.viewCache_.serverCache.getNode()}function J4(n){return Yd(n.viewCache_)}function Z4(n,e){const t=eo(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!ze(e)&&!t.getImmediateChild(Me(e)).isEmpty())?t.getChild(e):null}function O0(n){return n.eventRegistrations_.length===0}function ej(n,e){n.eventRegistrations_.push(e)}function D0(n,e,t){const s=[];if(t){ae(e==null,"A cancel should cancel all event registrations.");const a=n.query._path;n.eventRegistrations_.forEach(l=>{const c=l.createCancelEvent(t,a);c&&s.push(c)})}if(e){let a=[];for(let l=0;l<n.eventRegistrations_.length;++l){const c=n.eventRegistrations_[l];if(!c.matches(e))a.push(c);else if(e.hasAnyCallback()){a=a.concat(n.eventRegistrations_.slice(l+1));break}}n.eventRegistrations_=a}else n.eventRegistrations_=[];return s}function k0(n,e,t,s){e.type===Li.MERGE&&e.source.queryId!==null&&(ae(eo(n.viewCache_),"We should always have a full cache before handling merges"),ae(Yd(n.viewCache_),"Missing event cache, even though we have a server cache"));const a=n.viewCache_,l=q4(n.processor_,a,e,t,s);return H4(n.processor_,l.viewCache),ae(l.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,gI(n,l.changes,l.viewCache.eventCache.getNode(),null)}function tj(n,e){const t=n.viewCache_.eventCache,s=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Ct,(l,c)=>{s.push(Rl(l,c))}),t.isFullyInitialized()&&s.push(aI(t.getNode())),gI(n,s,t.getNode(),e)}function gI(n,e,t,s){const a=s?[s]:n.eventRegistrations_;return S4(n.eventGenerator_,e,t,a)}let Xd;class _I{constructor(){this.views=new Map}}function nj(n){ae(!Xd,"__referenceConstructor has already been defined"),Xd=n}function ij(){return ae(Xd,"Reference.ts has not been loaded"),Xd}function sj(n){return n.views.size===0}function Iv(n,e,t,s){const a=e.source.queryId;if(a!==null){const l=n.views.get(a);return ae(l!=null,"SyncTree gave us an op for an invalid query."),k0(l,e,t,s)}else{let l=[];for(const c of n.views.values())l=l.concat(k0(c,e,t,s));return l}}function yI(n,e,t,s,a){const l=e._queryIdentifier,c=n.views.get(l);if(!c){let d=Kd(t,a?s:null),m=!1;d?m=!0:s instanceof be?(d=Cv(t,s),m=!1):(d=be.EMPTY_NODE,m=!1);const g=Cm(new la(d,m,!1),new la(s,a,!1));return new X4(e,g)}return c}function rj(n,e,t,s,a,l){const c=yI(n,e,s,a,l);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),ej(c,t),tj(c,t)}function aj(n,e,t,s){const a=e._queryIdentifier,l=[];let c=[];const d=ua(n);if(a==="default")for(const[m,g]of n.views.entries())c=c.concat(D0(g,t,s)),O0(g)&&(n.views.delete(m),g.query._queryParams.loadsAllData()||l.push(g.query));else{const m=n.views.get(a);m&&(c=c.concat(D0(m,t,s)),O0(m)&&(n.views.delete(a),m.query._queryParams.loadsAllData()||l.push(m.query)))}return d&&!ua(n)&&l.push(new(ij())(e._repo,e._path)),{removed:l,events:c}}function vI(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Jr(n,e){let t=null;for(const s of n.views.values())t=t||Z4(s,e);return t}function EI(n,e){if(e._queryParams.loadsAllData())return Rm(n);{const s=e._queryIdentifier;return n.views.get(s)}}function TI(n,e){return EI(n,e)!=null}function ua(n){return Rm(n)!=null}function Rm(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let $d;function oj(n){ae(!$d,"__referenceConstructor has already been defined"),$d=n}function lj(){return ae($d,"Reference.ts has not been loaded"),$d}let uj=1;class P0{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ht(null),this.pendingWriteTree_=U4(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function SI(n,e,t,s,a){return A4(n.pendingWriteTree_,e,t,s,a),a?Fl(n,new Za(Sv(),e,t)):[]}function cj(n,e,t,s){R4(n.pendingWriteTree_,e,t,s);const a=ht.fromObject(t);return Fl(n,new Il(Sv(),e,a))}function qr(n,e,t=!1){const s=I4(n.pendingWriteTree_,e);if(N4(n.pendingWriteTree_,e)){let l=new ht(null);return s.snap!=null?l=l.set(We(),!0):pn(s.children,c=>{l=l.set(new lt(c),!0)}),Fl(n,new Gd(s.path,l,t))}else return[]}function uh(n,e,t){return Fl(n,new Za(bv(),e,t))}function hj(n,e,t){const s=ht.fromObject(t);return Fl(n,new Il(bv(),e,s))}function fj(n,e){return Fl(n,new Fc(bv(),e))}function dj(n,e,t){const s=xv(n,t);if(s){const a=Ov(s),l=a.path,c=a.queryId,d=Cn(l,e),m=new Fc(wv(c),d);return Dv(n,l,m)}else return[]}function Jd(n,e,t,s,a=!1){const l=e._path,c=n.syncPointTree_.get(l);let d=[];if(c&&(e._queryIdentifier==="default"||TI(c,e))){const m=aj(c,e,t,s);sj(c)&&(n.syncPointTree_=n.syncPointTree_.remove(l));const g=m.removed;if(d=m.events,!a){const y=g.findIndex(b=>b._queryParams.loadsAllData())!==-1,E=n.syncPointTree_.findOnPath(l,(b,A)=>ua(A));if(y&&!E){const b=n.syncPointTree_.subtree(l);if(!b.isEmpty()){const A=gj(b);for(let I=0;I<A.length;++I){const j=A[I],V=j.query,$=AI(n,j);n.listenProvider_.startListening(bc(V),Hc(n,V),$.hashFn,$.onComplete)}}}!E&&g.length>0&&!s&&(y?n.listenProvider_.stopListening(bc(e),null):g.forEach(b=>{const A=n.queryToTagMap.get(Im(b));n.listenProvider_.stopListening(bc(b),A)}))}_j(n,g)}return d}function bI(n,e,t,s){const a=xv(n,s);if(a!=null){const l=Ov(a),c=l.path,d=l.queryId,m=Cn(c,e),g=new Za(wv(d),m,t);return Dv(n,c,g)}else return[]}function mj(n,e,t,s){const a=xv(n,s);if(a){const l=Ov(a),c=l.path,d=l.queryId,m=Cn(c,e),g=ht.fromObject(t),y=new Il(wv(d),m,g);return Dv(n,c,y)}else return[]}function ny(n,e,t,s=!1){const a=e._path;let l=null,c=!1;n.syncPointTree_.foreachOnPath(a,(b,A)=>{const I=Cn(b,a);l=l||Jr(A,I),c=c||ua(A)});let d=n.syncPointTree_.get(a);d?(c=c||ua(d),l=l||Jr(d,We())):(d=new _I,n.syncPointTree_=n.syncPointTree_.set(a,d));let m;l!=null?m=!0:(m=!1,l=be.EMPTY_NODE,n.syncPointTree_.subtree(a).foreachChild((A,I)=>{const j=Jr(I,We());j&&(l=l.updateImmediateChild(A,j))}));const g=TI(d,e);if(!g&&!e._queryParams.loadsAllData()){const b=Im(e);ae(!n.queryToTagMap.has(b),"View does not exist, but we have a tag");const A=yj();n.queryToTagMap.set(b,A),n.tagToQueryMap.set(A,b)}const y=Am(n.pendingWriteTree_,a);let E=rj(d,e,t,y,l,m);if(!g&&!c&&!s){const b=EI(d,e);E=E.concat(vj(n,e,b))}return E}function Nv(n,e,t){const a=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(e,(c,d)=>{const m=Cn(c,e),g=Jr(d,m);if(g)return g});return hI(a,e,l,t,!0)}function pj(n,e){const t=e._path;let s=null;n.syncPointTree_.foreachOnPath(t,(g,y)=>{const E=Cn(g,t);s=s||Jr(y,E)});let a=n.syncPointTree_.get(t);a?s=s||Jr(a,We()):(a=new _I,n.syncPointTree_=n.syncPointTree_.set(t,a));const l=s!=null,c=l?new la(s,!0,!1):null,d=Am(n.pendingWriteTree_,e._path),m=yI(a,e,d,l?c.getNode():be.EMPTY_NODE,l);return J4(m)}function Fl(n,e){return wI(e,n.syncPointTree_,null,Am(n.pendingWriteTree_,We()))}function wI(n,e,t,s){if(ze(n.path))return CI(n,e,t,s);{const a=e.get(We());t==null&&a!=null&&(t=Jr(a,We()));let l=[];const c=Me(n.path),d=n.operationForChild(c),m=e.children.get(c);if(m&&d){const g=t?t.getImmediateChild(c):null,y=fI(s,c);l=l.concat(wI(d,m,g,y))}return a&&(l=l.concat(Iv(a,n,s,t))),l}}function CI(n,e,t,s){const a=e.get(We());t==null&&a!=null&&(t=Jr(a,We()));let l=[];return e.children.inorderTraversal((c,d)=>{const m=t?t.getImmediateChild(c):null,g=fI(s,c),y=n.operationForChild(c);y&&(l=l.concat(CI(y,d,m,g)))}),a&&(l=l.concat(Iv(a,n,s,t))),l}function AI(n,e){const t=e.query,s=Hc(n,t);return{hashFn:()=>($4(e)||be.EMPTY_NODE).hash(),onComplete:a=>{if(a==="ok")return s?dj(n,t._path,s):fj(n,t._path);{const l=fU(a,t);return Jd(n,t,null,l)}}}}function Hc(n,e){const t=Im(e);return n.queryToTagMap.get(t)}function Im(n){return n._path.toString()+"$"+n._queryIdentifier}function xv(n,e){return n.tagToQueryMap.get(e)}function Ov(n){const e=n.indexOf("$");return ae(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new lt(n.substr(0,e))}}function Dv(n,e,t){const s=n.syncPointTree_.get(e);ae(s,"Missing sync point for query tag that we're tracking");const a=Am(n.pendingWriteTree_,e);return Iv(s,t,a,null)}function gj(n){return n.fold((e,t,s)=>{if(t&&ua(t))return[Rm(t)];{let a=[];return t&&(a=vI(t)),pn(s,(l,c)=>{a=a.concat(c)}),a}})}function bc(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(lj())(n._repo,n._path):n}function _j(n,e){for(let t=0;t<e.length;++t){const s=e[t];if(!s._queryParams.loadsAllData()){const a=Im(s),l=n.queryToTagMap.get(a);n.queryToTagMap.delete(a),n.tagToQueryMap.delete(l)}}}function yj(){return uj++}function vj(n,e,t){const s=e._path,a=Hc(n,e),l=AI(n,t),c=n.listenProvider_.startListening(bc(e),a,l.hashFn,l.onComplete),d=n.syncPointTree_.subtree(s);if(a)ae(!ua(d.value),"If we're adding a query, it shouldn't be shadowed");else{const m=d.fold((g,y,E)=>{if(!ze(g)&&y&&ua(y))return[Rm(y).query];{let b=[];return y&&(b=b.concat(vI(y).map(A=>A.query))),pn(E,(A,I)=>{b=b.concat(I)}),b}});for(let g=0;g<m.length;++g){const y=m[g];n.listenProvider_.stopListening(bc(y),Hc(n,y))}}return c}class kv{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new kv(t)}node(){return this.node_}}class Pv{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=wt(this.path_,e);return new Pv(this.syncTree_,t)}node(){return Nv(this.syncTree_,this.path_)}}const Ej=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},M0=function(n,e,t){if(!n||typeof n!="object")return n;if(ae(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return Tj(n[".sv"],e,t);if(typeof n[".sv"]=="object")return Sj(n[".sv"],e);ae(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},Tj=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:ae(!1,"Unexpected server value: "+n)}},Sj=function(n,e,t){n.hasOwnProperty("increment")||ae(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const s=n.increment;typeof s!="number"&&ae(!1,"Unexpected increment value: "+s);const a=e.node();if(ae(a!==null&&typeof a<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return s;const c=a.getValue();return typeof c!="number"?s:c+s},RI=function(n,e,t,s){return Mv(e,new Pv(t,n),s)},II=function(n,e,t){return Mv(n,new kv(e),t)};function Mv(n,e,t){const s=n.getPriority().val(),a=M0(s,e.getImmediateChild(".priority"),t);let l;if(n.isLeafNode()){const c=n,d=M0(c.getValue(),e,t);return d!==c.getValue()||a!==c.getPriority().val()?new en(d,Kt(a)):n}else{const c=n;return l=c,a!==c.getPriority().val()&&(l=l.updatePriority(new en(a))),c.forEachChild(Ct,(d,m)=>{const g=Mv(m,e.getImmediateChild(d),t);g!==m&&(l=l.updateImmediateChild(d,g))}),l}}class Lv{constructor(e="",t=null,s={children:{},childCount:0}){this.name=e,this.parent=t,this.node=s}}function Vv(n,e){let t=e instanceof lt?e:new lt(e),s=n,a=Me(t);for(;a!==null;){const l=_l(s.node.children,a)||{children:{},childCount:0};s=new Lv(a,s,l),t=ft(t),a=Me(t)}return s}function Hl(n){return n.node.value}function NI(n,e){n.node.value=e,iy(n)}function xI(n){return n.node.childCount>0}function bj(n){return Hl(n)===void 0&&!xI(n)}function Nm(n,e){pn(n.node.children,(t,s)=>{e(new Lv(t,n,s))})}function OI(n,e,t,s){t&&e(n),Nm(n,a=>{OI(a,e,!0)})}function wj(n,e,t){let s=n.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function ch(n){return new lt(n.parent===null?n.name:ch(n.parent)+"/"+n.name)}function iy(n){n.parent!==null&&Cj(n.parent,n.name,n)}function Cj(n,e,t){const s=bj(t),a=vs(n.node.children,e);s&&a?(delete n.node.children[e],n.node.childCount--,iy(n)):!s&&!a&&(n.node.children[e]=t.node,n.node.childCount++,iy(n))}const Aj=/[\[\].#$\/\u0000-\u001F\u007F]/,Rj=/[\[\].#$\u0000-\u001F\u007F]/,m_=10*1024*1024,Uv=function(n){return typeof n=="string"&&n.length!==0&&!Aj.test(n)},DI=function(n){return typeof n=="string"&&n.length!==0&&!Rj.test(n)},Ij=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),DI(n)},Nj=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!hv(n)||n&&typeof n=="object"&&vs(n,".sv")},kI=function(n,e,t,s){s&&e===void 0||xm(rm(n,"value"),e,t)},xm=function(n,e,t){const s=t instanceof lt?new YU(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+qa(s));if(typeof e=="function")throw new Error(n+"contains a function "+qa(s)+" with contents = "+e.toString());if(hv(e))throw new Error(n+"contains "+e.toString()+" "+qa(s));if(typeof e=="string"&&e.length>m_/3&&am(e)>m_)throw new Error(n+"contains a string greater than "+m_+" utf8 bytes "+qa(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let a=!1,l=!1;if(pn(e,(c,d)=>{if(c===".value")a=!0;else if(c!==".priority"&&c!==".sv"&&(l=!0,!Uv(c)))throw new Error(n+" contains an invalid key ("+c+") "+qa(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);KU(s,c),xm(n,d,s),QU(s)}),a&&l)throw new Error(n+' contains ".value" child '+qa(s)+" in addition to actual children.")}},xj=function(n,e){let t,s;for(t=0;t<e.length;t++){s=e[t];const l=Uc(s);for(let c=0;c<l.length;c++)if(!(l[c]===".priority"&&c===l.length-1)){if(!Uv(l[c]))throw new Error(n+"contains an invalid key ("+l[c]+") in path "+s.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(GU);let a=null;for(t=0;t<e.length;t++){if(s=e[t],a!==null&&pi(a,s))throw new Error(n+"contains a path "+a.toString()+" that is ancestor of another path "+s.toString());a=s}},Oj=function(n,e,t,s){const a=rm(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(a+" must be an object containing the children to replace.");const l=[];pn(e,(c,d)=>{const m=new lt(c);if(xm(a,d,wt(t,m)),gv(m)===".priority"&&!Nj(d))throw new Error(a+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(m)}),xj(a,l)},PI=function(n,e,t,s){if(!DI(t))throw new Error(rm(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Dj=function(n,e,t,s){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),PI(n,e,t)},MI=function(n,e){if(Me(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},kj=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Uv(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!Ij(t))throw new Error(rm(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class Pj{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Om(n,e){let t=null;for(let s=0;s<e.length;s++){const a=e[s],l=a.getPath();t!==null&&!_v(l,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:l}),t.events.push(a)}t&&n.eventLists_.push(t)}function LI(n,e,t){Om(n,t),VI(n,s=>_v(s,e))}function _i(n,e,t){Om(n,t),VI(n,s=>pi(s,e)||pi(e,s))}function VI(n,e){n.recursionDepth_++;let t=!0;for(let s=0;s<n.eventLists_.length;s++){const a=n.eventLists_[s];if(a){const l=a.path;e(l)?(Mj(n.eventLists_[s]),n.eventLists_[s]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function Mj(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const s=t.getEventRunner();vc&&hn("event: "+t.toString()),Bl(s)}}}const Lj="repo_interrupt",Vj=25;class Uj{constructor(e,t,s,a){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=s,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Pj,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=qd(),this.transactionQueueTree_=new Lv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function jj(n,e,t){if(n.stats_=mv(n.repoInfo_),n.forceRestClient_||gU())n.server_=new Hd(n.repoInfo_,(s,a,l,c)=>{L0(n,s,a,l,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>V0(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Qt(t)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}n.persistentConnection_=new Ys(n.repoInfo_,e,(s,a,l,c)=>{L0(n,s,a,l,c)},s=>{V0(n,s)},s=>{zj(n,s)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(s=>{n.server_.refreshAuthToken(s)}),n.appCheckProvider_.addTokenChangeListener(s=>{n.server_.refreshAppCheckToken(s.token)}),n.statsReporter_=TU(n.repoInfo_,()=>new E4(n.stats_,n.server_)),n.infoData_=new p4,n.infoSyncTree_=new P0({startListening:(s,a,l,c)=>{let d=[];const m=n.infoData_.getNode(s._path);return m.isEmpty()||(d=uh(n.infoSyncTree_,s._path,m),setTimeout(()=>{c("ok")},0)),d},stopListening:()=>{}}),jv(n,"connected",!1),n.serverSyncTree_=new P0({startListening:(s,a,l,c)=>(n.server_.listen(s,l,a,(d,m)=>{const g=c(d,m);_i(n.eventQueue_,s._path,g)}),[]),stopListening:(s,a)=>{n.server_.unlisten(s,a)}})}function UI(n){const t=n.infoData_.getNode(new lt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function Dm(n){return Ej({timestamp:UI(n)})}function L0(n,e,t,s,a){n.dataUpdateCount++;const l=new lt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(a)if(s){const m=Ed(t,g=>Kt(g));c=mj(n.serverSyncTree_,l,m,a)}else{const m=Kt(t);c=bI(n.serverSyncTree_,l,m,a)}else if(s){const m=Ed(t,g=>Kt(g));c=hj(n.serverSyncTree_,l,m)}else{const m=Kt(t);c=uh(n.serverSyncTree_,l,m)}let d=l;c.length>0&&(d=xl(n,l)),_i(n.eventQueue_,d,c)}function V0(n,e){jv(n,"connected",e),e===!1&&qj(n)}function zj(n,e){pn(e,(t,s)=>{jv(n,t,s)})}function jv(n,e,t){const s=new lt("/.info/"+e),a=Kt(t);n.infoData_.updateSnapshot(s,a);const l=uh(n.infoSyncTree_,s,a);_i(n.eventQueue_,s,l)}function zv(n){return n.nextWriteId_++}function Bj(n,e,t){const s=pj(n.serverSyncTree_,e);return s!=null?Promise.resolve(s):n.server_.get(e).then(a=>{const l=Kt(a).withIndex(e._queryParams.getIndex());ny(n.serverSyncTree_,e,t,!0);let c;if(e._queryParams.loadsAllData())c=uh(n.serverSyncTree_,e._path,l);else{const d=Hc(n.serverSyncTree_,e);c=bI(n.serverSyncTree_,e._path,l,d)}return _i(n.eventQueue_,e._path,c),Jd(n.serverSyncTree_,e,t,null,!0),l},a=>(hh(n,"get for query "+Qt(e)+" failed: "+a),Promise.reject(new Error(a))))}function Fj(n,e,t,s,a){hh(n,"set",{path:e.toString(),value:t,priority:s});const l=Dm(n),c=Kt(t,s),d=Nv(n.serverSyncTree_,e),m=II(c,d,l),g=zv(n),y=SI(n.serverSyncTree_,e,m,g,!0);Om(n.eventQueue_,y),n.server_.put(e.toString(),c.val(!0),(b,A)=>{const I=b==="ok";I||An("set at "+e+" failed: "+b);const j=qr(n.serverSyncTree_,g,!I);_i(n.eventQueue_,e,j),sy(n,a,b,A)});const E=Fv(n,e);xl(n,E),_i(n.eventQueue_,E,[])}function Hj(n,e,t,s){hh(n,"update",{path:e.toString(),value:t});let a=!0;const l=Dm(n),c={};if(pn(t,(d,m)=>{a=!1,c[d]=RI(wt(e,d),Kt(m),n.serverSyncTree_,l)}),a)hn("update() called with empty data.  Don't do anything."),sy(n,s,"ok",void 0);else{const d=zv(n),m=cj(n.serverSyncTree_,e,c,d);Om(n.eventQueue_,m),n.server_.merge(e.toString(),t,(g,y)=>{const E=g==="ok";E||An("update at "+e+" failed: "+g);const b=qr(n.serverSyncTree_,d,!E),A=b.length>0?xl(n,e):e;_i(n.eventQueue_,A,b),sy(n,s,g,y)}),pn(t,g=>{const y=Fv(n,wt(e,g));xl(n,y)}),_i(n.eventQueue_,e,[])}}function qj(n){hh(n,"onDisconnectEvents");const e=Dm(n),t=qd();X_(n.onDisconnect_,We(),(a,l)=>{const c=RI(a,l,n.serverSyncTree_,e);oI(t,a,c)});let s=[];X_(t,We(),(a,l)=>{s=s.concat(uh(n.serverSyncTree_,a,l));const c=Fv(n,a);xl(n,c)}),n.onDisconnect_=qd(),_i(n.eventQueue_,We(),s)}function Gj(n,e,t){let s;Me(e._path)===".info"?s=ny(n.infoSyncTree_,e,t):s=ny(n.serverSyncTree_,e,t),LI(n.eventQueue_,e._path,s)}function Yj(n,e,t){let s;Me(e._path)===".info"?s=Jd(n.infoSyncTree_,e,t):s=Jd(n.serverSyncTree_,e,t),LI(n.eventQueue_,e._path,s)}function Kj(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Lj)}function hh(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),hn(t,...e)}function sy(n,e,t,s){e&&Bl(()=>{if(t==="ok")e(null);else{const a=(t||"error").toUpperCase();let l=a;s&&(l+=": "+s);const c=new Error(l);c.code=a,e(c)}})}function jI(n,e,t){return Nv(n.serverSyncTree_,e,t)||be.EMPTY_NODE}function Bv(n,e=n.transactionQueueTree_){if(e||km(n,e),Hl(e)){const t=BI(n,e);ae(t.length>0,"Sending zero length transaction queue"),t.every(a=>a.status===0)&&Qj(n,ch(e),t)}else xI(e)&&Nm(e,t=>{Bv(n,t)})}function Qj(n,e,t){const s=t.map(g=>g.currentWriteId),a=jI(n,e,s);let l=a;const c=a.hash();for(let g=0;g<t.length;g++){const y=t[g];ae(y.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),y.status=1,y.retryCount++;const E=Cn(e,y.path);l=l.updateChild(E,y.currentOutputSnapshotRaw)}const d=l.val(!0),m=e;n.server_.put(m.toString(),d,g=>{hh(n,"transaction put response",{path:m.toString(),status:g});let y=[];if(g==="ok"){const E=[];for(let b=0;b<t.length;b++)t[b].status=2,y=y.concat(qr(n.serverSyncTree_,t[b].currentWriteId)),t[b].onComplete&&E.push(()=>t[b].onComplete(null,!0,t[b].currentOutputSnapshotResolved)),t[b].unwatcher();km(n,Vv(n.transactionQueueTree_,e)),Bv(n,n.transactionQueueTree_),_i(n.eventQueue_,e,y);for(let b=0;b<E.length;b++)Bl(E[b])}else{if(g==="datastale")for(let E=0;E<t.length;E++)t[E].status===3?t[E].status=4:t[E].status=0;else{An("transaction at "+m.toString()+" failed: "+g);for(let E=0;E<t.length;E++)t[E].status=4,t[E].abortReason=g}xl(n,e)}},c)}function xl(n,e){const t=zI(n,e),s=ch(t),a=BI(n,t);return Wj(n,a,s),s}function Wj(n,e,t){if(e.length===0)return;const s=[];let a=[];const c=e.filter(d=>d.status===0).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const m=e[d],g=Cn(t,m.path);let y=!1,E;if(ae(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),m.status===4)y=!0,E=m.abortReason,a=a.concat(qr(n.serverSyncTree_,m.currentWriteId,!0));else if(m.status===0)if(m.retryCount>=Vj)y=!0,E="maxretry",a=a.concat(qr(n.serverSyncTree_,m.currentWriteId,!0));else{const b=jI(n,m.path,c);m.currentInputSnapshot=b;const A=e[d].update(b.val());if(A!==void 0){xm("transaction failed: Data returned ",A,m.path);let I=Kt(A);typeof A=="object"&&A!=null&&vs(A,".priority")||(I=I.updatePriority(b.getPriority()));const V=m.currentWriteId,$=Dm(n),K=II(I,b,$);m.currentOutputSnapshotRaw=I,m.currentOutputSnapshotResolved=K,m.currentWriteId=zv(n),c.splice(c.indexOf(V),1),a=a.concat(SI(n.serverSyncTree_,m.path,K,m.currentWriteId,m.applyLocally)),a=a.concat(qr(n.serverSyncTree_,V,!0))}else y=!0,E="nodata",a=a.concat(qr(n.serverSyncTree_,m.currentWriteId,!0))}_i(n.eventQueue_,t,a),a=[],y&&(e[d].status=2,(function(b){setTimeout(b,Math.floor(0))})(e[d].unwatcher),e[d].onComplete&&(E==="nodata"?s.push(()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot)):s.push(()=>e[d].onComplete(new Error(E),!1,null))))}km(n,n.transactionQueueTree_);for(let d=0;d<s.length;d++)Bl(s[d]);Bv(n,n.transactionQueueTree_)}function zI(n,e){let t,s=n.transactionQueueTree_;for(t=Me(e);t!==null&&Hl(s)===void 0;)s=Vv(s,t),e=ft(e),t=Me(e);return s}function BI(n,e){const t=[];return FI(n,e,t),t.sort((s,a)=>s.order-a.order),t}function FI(n,e,t){const s=Hl(e);if(s)for(let a=0;a<s.length;a++)t.push(s[a]);Nm(e,a=>{FI(n,a,t)})}function km(n,e){const t=Hl(e);if(t){let s=0;for(let a=0;a<t.length;a++)t[a].status!==2&&(t[s]=t[a],s++);t.length=s,NI(e,t.length>0?t:void 0)}Nm(e,s=>{km(n,s)})}function Fv(n,e){const t=ch(zI(n,e)),s=Vv(n.transactionQueueTree_,e);return wj(s,a=>{p_(n,a)}),p_(n,s),OI(s,a=>{p_(n,a)}),t}function p_(n,e){const t=Hl(e);if(t){const s=[];let a=[],l=-1;for(let c=0;c<t.length;c++)t[c].status===3||(t[c].status===1?(ae(l===c-1,"All SENT items should be at beginning of queue."),l=c,t[c].status=3,t[c].abortReason="set"):(ae(t[c].status===0,"Unexpected transaction status in abort"),t[c].unwatcher(),a=a.concat(qr(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&s.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));l===-1?NI(e,void 0):t.length=l+1,_i(n.eventQueue_,ch(e),a);for(let c=0;c<s.length;c++)Bl(s[c])}}function Xj(n){let e="";const t=n.split("/");for(let s=0;s<t.length;s++)if(t[s].length>0){let a=t[s];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch{}e+="/"+a}return e}function $j(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const s=t.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):An(`Invalid query segment '${t}' in query '${n}'`)}return e}const U0=function(n,e){const t=Jj(n),s=t.namespace;t.domain==="firebase.com"&&nr(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&t.domain!=="localhost"&&nr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||oU();const a=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new qR(t.host,t.secure,s,a,e,"",s!==t.subdomain),path:new lt(t.pathString)}},Jj=function(n){let e="",t="",s="",a="",l="",c=!0,d="https",m=443;if(typeof n=="string"){let g=n.indexOf("//");g>=0&&(d=n.substring(0,g-1),n=n.substring(g+2));let y=n.indexOf("/");y===-1&&(y=n.length);let E=n.indexOf("?");E===-1&&(E=n.length),e=n.substring(0,Math.min(y,E)),y<E&&(a=Xj(n.substring(y,E)));const b=$j(n.substring(Math.min(n.length,E)));g=e.indexOf(":"),g>=0?(c=d==="https"||d==="wss",m=parseInt(e.substring(g+1),10)):g=e.length;const A=e.slice(0,g);if(A.toLowerCase()==="localhost")t="localhost";else if(A.split(".").length<=2)t=A;else{const I=e.indexOf(".");s=e.substring(0,I).toLowerCase(),t=e.substring(I+1),l=s}"ns"in b&&(l=b.ns)}return{host:e,port:m,domain:t,subdomain:s,secure:c,scheme:d,pathString:a,namespace:l}};const j0="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Zj=(function(){let n=0;const e=[];return function(t){const s=t===n;n=t;let a;const l=new Array(8);for(a=7;a>=0;a--)l[a]=j0.charAt(t%64),t=Math.floor(t/64);ae(t===0,"Cannot push at time == 0");let c=l.join("");if(s){for(a=11;a>=0&&e[a]===63;a--)e[a]=0;e[a]++}else for(a=0;a<12;a++)e[a]=Math.floor(Math.random()*64);for(a=0;a<12;a++)c+=j0.charAt(e[a]);return ae(c.length===20,"nextPushId: Length should be 20."),c}})();class e6{constructor(e,t,s,a){this.eventType=e,this.eventRegistration=t,this.snapshot=s,this.prevName=a}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Qt(this.snapshot.exportVal())}}class t6{constructor(e,t,s){this.eventRegistration=e,this.error=t,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class HI{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return ae(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Hv{constructor(e,t,s,a){this._repo=e,this._path=t,this._queryParams=s,this._orderByCalled=a}get key(){return ze(this._path)?null:gv(this._path)}get ref(){return new ir(this._repo,this._path)}get _queryIdentifier(){const e=w0(this._queryParams),t=fv(e);return t==="{}"?"default":t}get _queryObject(){return w0(this._queryParams)}isEqual(e){if(e=At(e),!(e instanceof Hv))return!1;const t=this._repo===e._repo,s=_v(this._path,e._path),a=this._queryIdentifier===e._queryIdentifier;return t&&s&&a}toJSON(){return this.toString()}toString(){return this._repo.toString()+qU(this._path)}}class ir extends Hv{constructor(e,t){super(e,t,new Tv,!1)}get parent(){const e=ZR(this._path);return e===null?null:new ir(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class qc{constructor(e,t,s){this._node=e,this.ref=t,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new lt(e),s=Gc(this.ref,e);return new qc(this._node.getChild(t),s,Ct)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,a)=>e(new qc(a,Gc(this.ref,s),Ct)))}hasChild(e){const t=new lt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Rn(n,e){return n=At(n),n._checkNotDeleted("ref"),e!==void 0?Gc(n._root,e):n._root}function Gc(n,e){return n=At(n),Me(n._path)===null?Dj("child","path",e):PI("child","path",e),new ir(n._repo,wt(n._path,e))}function Pm(n,e){n=At(n),MI("push",n._path),kI("push",e,n._path,!0);const t=UI(n._repo),s=Zj(t),a=Gc(n,s),l=Gc(n,s);let c;return c=Promise.resolve(l),a.then=c.then.bind(c),a.catch=c.then.bind(c,void 0),a}function ho(n,e){n=At(n),MI("set",n._path),kI("set",e,n._path,!1);const t=new Qc;return Fj(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function n6(n,e){Oj("update",e,n._path);const t=new Qc;return Hj(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function gl(n){n=At(n);const e=new HI(()=>{}),t=new Mm(e);return Bj(n._repo,n,t).then(s=>new qc(s,new ir(n._repo,n._path),n._queryParams.getIndex()))}class Mm{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const s=t._queryParams.getIndex();return new e6("value",this,new qc(e.snapshotNode,new ir(t._repo,t._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new t6(this,e,t):null}matches(e){return e instanceof Mm?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function i6(n,e,t,s,a){const l=new HI(t,void 0),c=new Mm(l);return Gj(n._repo,n,c),()=>Yj(n._repo,n,c)}function s6(n,e,t,s){return i6(n,"value",e)}nj(ir);oj(ir);const r6="FIREBASE_DATABASE_EMULATOR_HOST",ry={};let a6=!1;function o6(n,e,t,s){const a=e.lastIndexOf(":"),l=e.substring(0,a),c=_s(l);n.repoInfo_=new qR(e,c,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),s&&(n.authTokenProvider_=s)}function l6(n,e,t,s,a){let l=s||n.options.databaseURL;l===void 0&&(n.options.projectId||nr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),hn("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let c=U0(l,a),d=c.repoInfo,m;typeof process<"u"&&a0&&(m=a0[r6]),m?(l=`http://${m}?ns=${d.namespace}`,c=U0(l,a),d=c.repoInfo):c.repoInfo.secure;const g=new yU(n.name,n.options,e);kj("Invalid Firebase Database URL",c),ze(c.path)||nr("Database URL must point to the root of a Firebase Database (not including a child path).");const y=c6(d,n,g,new _U(n,t));return new h6(y,n)}function u6(n,e){const t=ry[e];(!t||t[n.key]!==n)&&nr(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Kj(n),delete t[n.key]}function c6(n,e,t,s){let a=ry[e.name];a||(a={},ry[e.name]=a);let l=a[n.toURLString()];return l&&nr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new Uj(n,a6,t,s),a[n.toURLString()]=l,l}class h6{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(jj(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ir(this._repo,We())),this._rootInternal}_delete(){return this._rootInternal!==null&&(u6(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&nr("Cannot call "+e+" on a deleted database.")}}function f6(n=lm(),e){const t=Xc(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const s=_y("database");s&&d6(t,...s)}return t}function d6(n,e,t,s={}){n=At(n),n._checkNotDeleted("useEmulator");const a=`${e}:${t}`,l=n._repoInternal;if(n._instanceStarted){if(a===n._repoInternal.repoInfo_.host&&Zr(s,l.repoInfo_.emulatorOptions))return;nr("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let c;if(l.repoInfo_.nodeAdmin)s.mockUserToken&&nr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new gd(gd.OWNER);else if(s.mockUserToken){const d=typeof s.mockUserToken=="string"?s.mockUserToken:yy(s.mockUserToken,n.app.options.projectId);c=new gd(d)}_s(e)&&(im(e),sm("Database",!0)),o6(l,a,s,c)}function m6(n){tU(ha),ea(new Xs("database",(e,{instanceIdentifier:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),l=e.getProvider("app-check-internal");return l6(s,a,l,t)},"PUBLIC").setMultipleInstances(!0)),gi(o0,l0,n),gi(o0,l0,"esm2020")}Ys.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Ys.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};m6();const qI="firebasestorage.googleapis.com",GI="storageBucket",p6=120*1e3,g6=600*1e3,_6=1e3;class Tt extends ys{constructor(e,t,s=0){super(g_(e),`Firebase Storage: ${t} (${g_(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Tt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return g_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var gt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(gt||(gt={}));function g_(n){return"storage/"+n}function qv(){const n="An unknown error occurred, please check the error payload for server response.";return new Tt(gt.UNKNOWN,n)}function y6(n){return new Tt(gt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function v6(n){return new Tt(gt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function E6(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Tt(gt.UNAUTHENTICATED,n)}function T6(){return new Tt(gt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function S6(n){return new Tt(gt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function YI(){return new Tt(gt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function KI(){return new Tt(gt.CANCELED,"User canceled the upload/download.")}function b6(n){return new Tt(gt.INVALID_URL,"Invalid URL '"+n+"'.")}function w6(n){return new Tt(gt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function C6(){return new Tt(gt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+GI+"' property when initializing the app?")}function QI(){return new Tt(gt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function A6(){return new Tt(gt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function R6(){return new Tt(gt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function I6(n){return new Tt(gt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ay(n){return new Tt(gt.INVALID_ARGUMENT,n)}function WI(){return new Tt(gt.APP_DELETED,"The Firebase app was deleted.")}function N6(n){return new Tt(gt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function wc(n,e){return new Tt(gt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function ic(n){throw new Tt(gt.INTERNAL_ERROR,"Internal error: "+n)}class Xn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=Xn.makeFromUrl(e,t)}catch{return new Xn(e,"")}if(s.path==="")return s;throw w6(e)}static makeFromUrl(e,t){let s=null;const a="([A-Za-z0-9.\\-_]+)";function l(ue){ue.path.charAt(ue.path.length-1)==="/"&&(ue.path_=ue.path_.slice(0,-1))}const c="(/(.*))?$",d=new RegExp("^gs://"+a+c,"i"),m={bucket:1,path:3};function g(ue){ue.path_=decodeURIComponent(ue.path)}const y="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",A=new RegExp(`^https?://${E}/${y}/b/${a}/o${b}`,"i"),I={bucket:1,path:3},j=t===qI?"(?:storage.googleapis.com|storage.cloud.google.com)":t,V="([^?#]*)",$=new RegExp(`^https?://${j}/${a}/${V}`,"i"),ee=[{regex:d,indices:m,postModify:l},{regex:A,indices:I,postModify:g},{regex:$,indices:{bucket:1,path:2},postModify:g}];for(let ue=0;ue<ee.length;ue++){const _e=ee[ue],Se=_e.regex.exec(e);if(Se){const x=Se[_e.indices.bucket];let R=Se[_e.indices.path];R||(R=""),s=new Xn(x,R),_e.postModify(s);break}}if(s==null)throw b6(e);return s}}class x6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function O6(n,e,t){let s=1,a=null,l=null,c=!1,d=0;function m(){return d===2}let g=!1;function y(...V){g||(g=!0,e.apply(null,V))}function E(V){a=setTimeout(()=>{a=null,n(A,m())},V)}function b(){l&&clearTimeout(l)}function A(V,...$){if(g){b();return}if(V){b(),y.call(null,V,...$);return}if(m()||c){b(),y.call(null,V,...$);return}s<64&&(s*=2);let ee;d===1?(d=2,ee=0):ee=(s+Math.random())*1e3,E(ee)}let I=!1;function j(V){I||(I=!0,b(),!g&&(a!==null?(V||(d=2),clearTimeout(a),E(0)):V||(d=1)))}return E(0),l=setTimeout(()=>{c=!0,j(!0)},t),j}function D6(n){n(!1)}function k6(n){return n!==void 0}function P6(n){return typeof n=="function"}function M6(n){return typeof n=="object"&&!Array.isArray(n)}function Lm(n){return typeof n=="string"||n instanceof String}function z0(n){return Gv()&&n instanceof Blob}function Gv(){return typeof Blob<"u"}function B0(n,e,t,s){if(s<e)throw ay(`Invalid value for '${n}'. Expected ${e} or greater.`);if(s>t)throw ay(`Invalid value for '${n}'. Expected ${t} or less.`)}function fh(n,e,t){let s=e;return t==null&&(s=`https://${e}`),`${t}://${s}/v0${n}`}function XI(n){const e=encodeURIComponent;let t="?";for(const s in n)if(n.hasOwnProperty(s)){const a=e(s)+"="+e(n[s]);t=t+a+"&"}return t=t.slice(0,-1),t}var Qa;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Qa||(Qa={}));function $I(n,e){const t=n>=500&&n<600,a=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||a||l}class L6{constructor(e,t,s,a,l,c,d,m,g,y,E,b=!0,A=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=m,this.timeout_=g,this.progressCallback_=y,this.connectionFactory_=E,this.retry=b,this.isUsingEmulator=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,j)=>{this.resolve_=I,this.reject_=j,this.start_()})}start_(){const e=(s,a)=>{if(a){s(!1,new nd(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=d=>{const m=d.loaded,g=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,g)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const d=l.getErrorCode()===Qa.NO_ERROR,m=l.getStatus();if(!d||$I(m,this.additionalRetryCodes_)&&this.retry){const y=l.getErrorCode()===Qa.ABORT;s(!1,new nd(!1,null,y));return}const g=this.successCodes_.indexOf(m)!==-1;s(!0,new nd(g,l))})},t=(s,a)=>{const l=this.resolve_,c=this.reject_,d=a.connection;if(a.wasSuccessCode)try{const m=this.callback_(d,d.getResponse());k6(m)?l(m):l()}catch(m){c(m)}else if(d!==null){const m=qv();m.serverResponse=d.getErrorText(),this.errorCallback_?c(this.errorCallback_(d,m)):c(m)}else if(a.canceled){const m=this.appDelete_?WI():KI();c(m)}else{const m=YI();c(m)}};this.canceled_?t(!1,new nd(!1,null,!0)):this.backoffId_=O6(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&D6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class nd{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function V6(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function U6(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function j6(n,e){e&&(n["X-Firebase-GMPID"]=e)}function z6(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function B6(n,e,t,s,a,l,c=!0,d=!1){const m=XI(n.urlParams),g=n.url+m,y=Object.assign({},n.headers);return j6(y,e),V6(y,t),U6(y,l),z6(y,s),new L6(g,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,c,d)}function F6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function H6(...n){const e=F6();if(e!==void 0){const t=new e;for(let s=0;s<n.length;s++)t.append(n[s]);return t.getBlob()}else{if(Gv())return new Blob(n);throw new Tt(gt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function q6(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function G6(n){if(typeof atob>"u")throw I6("base-64");return atob(n)}const cs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class __{constructor(e,t){this.data=e,this.contentType=t||null}}function Y6(n,e){switch(n){case cs.RAW:return new __(JI(e));case cs.BASE64:case cs.BASE64URL:return new __(ZI(n,e));case cs.DATA_URL:return new __(Q6(e),W6(e))}throw qv()}function JI(n){const e=[];for(let t=0;t<n.length;t++){let s=n.charCodeAt(t);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=s,c=n.charCodeAt(++t);s=65536|(l&1023)<<10|c&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function K6(n){let e;try{e=decodeURIComponent(n)}catch{throw wc(cs.DATA_URL,"Malformed data URL.")}return JI(e)}function ZI(n,e){switch(n){case cs.BASE64:{const a=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(a||l)throw wc(n,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case cs.BASE64URL:{const a=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(a||l)throw wc(n,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=G6(e)}catch(a){throw a.message.includes("polyfill")?a:wc(n,"Invalid character found")}const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s}class e1{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw wc(cs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;s!=null&&(this.base64=X6(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function Q6(n){const e=new e1(n);return e.base64?ZI(cs.BASE64,e.rest):K6(e.rest)}function W6(n){return new e1(n).contentType}function X6(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}class Fr{constructor(e,t){let s=0,a="";z0(e)?(this.data_=e,s=e.size,a=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,t){if(z0(this.data_)){const s=this.data_,a=q6(s,e,t);return a===null?null:new Fr(a)}else{const s=new Uint8Array(this.data_.buffer,e,t-e);return new Fr(s,!0)}}static getBlob(...e){if(Gv()){const t=e.map(s=>s instanceof Fr?s.data_:s);return new Fr(H6.apply(null,t))}else{const t=e.map(c=>Lm(c)?Y6(cs.RAW,c).data:c.data_);let s=0;t.forEach(c=>{s+=c.byteLength});const a=new Uint8Array(s);let l=0;return t.forEach(c=>{for(let d=0;d<c.length;d++)a[l++]=c[d]}),new Fr(a,!0)}}uploadData(){return this.data_}}function t1(n){let e;try{e=JSON.parse(n)}catch{return null}return M6(e)?e:null}function $6(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function J6(n,e){const t=e.split("/").filter(s=>s.length>0).join("/");return n.length===0?t:n+"/"+t}function n1(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function Z6(n,e){return e}class wn{constructor(e,t,s,a){this.server=e,this.local=t||e,this.writable=!!s,this.xform=a||Z6}}let id=null;function e3(n){return!Lm(n)||n.length<2?n:n1(n)}function i1(){if(id)return id;const n=[];n.push(new wn("bucket")),n.push(new wn("generation")),n.push(new wn("metageneration")),n.push(new wn("name","fullPath",!0));function e(l,c){return e3(c)}const t=new wn("name");t.xform=e,n.push(t);function s(l,c){return c!==void 0?Number(c):c}const a=new wn("size");return a.xform=s,n.push(a),n.push(new wn("timeCreated")),n.push(new wn("updated")),n.push(new wn("md5Hash",null,!0)),n.push(new wn("cacheControl",null,!0)),n.push(new wn("contentDisposition",null,!0)),n.push(new wn("contentEncoding",null,!0)),n.push(new wn("contentLanguage",null,!0)),n.push(new wn("contentType",null,!0)),n.push(new wn("metadata","customMetadata",!0)),id=n,id}function t3(n,e){function t(){const s=n.bucket,a=n.fullPath,l=new Xn(s,a);return e._makeStorageReference(l)}Object.defineProperty(n,"ref",{get:t})}function n3(n,e,t){const s={};s.type="file";const a=t.length;for(let l=0;l<a;l++){const c=t[l];s[c.local]=c.xform(s,e[c.server])}return t3(s,n),s}function s1(n,e,t){const s=t1(e);return s===null?null:n3(n,s,t)}function i3(n,e,t,s){const a=t1(e);if(a===null||!Lm(a.downloadTokens))return null;const l=a.downloadTokens;if(l.length===0)return null;const c=encodeURIComponent;return l.split(",").map(g=>{const y=n.bucket,E=n.fullPath,b="/b/"+c(y)+"/o/"+c(E),A=fh(b,t,s),I=XI({alt:"media",token:g});return A+I})[0]}function r1(n,e){const t={},s=e.length;for(let a=0;a<s;a++){const l=e[a];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}class ql{constructor(e,t,s,a){this.url=e,this.method=t,this.handler=s,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ks(n){if(!n)throw qv()}function Yv(n,e){function t(s,a){const l=s1(n,a,e);return Ks(l!==null),l}return t}function s3(n,e){function t(s,a){const l=s1(n,a,e);return Ks(l!==null),i3(l,a,n.host,n._protocol)}return t}function dh(n){function e(t,s){let a;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?a=T6():a=E6():t.getStatus()===402?a=v6(n.bucket):t.getStatus()===403?a=S6(n.path):a=s,a.status=t.getStatus(),a.serverResponse=s.serverResponse,a}return e}function a1(n){const e=dh(n);function t(s,a){let l=e(s,a);return s.getStatus()===404&&(l=y6(n.path)),l.serverResponse=a.serverResponse,l}return t}function r3(n,e,t){const s=e.fullServerUrl(),a=fh(s,n.host,n._protocol),l="GET",c=n.maxOperationRetryTime,d=new ql(a,l,Yv(n,t),c);return d.errorHandler=a1(e),d}function a3(n,e,t){const s=e.fullServerUrl(),a=fh(s,n.host,n._protocol),l="GET",c=n.maxOperationRetryTime,d=new ql(a,l,s3(n,t),c);return d.errorHandler=a1(e),d}function o3(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function o1(n,e,t){const s=Object.assign({},t);return s.fullPath=n.path,s.size=e.size(),s.contentType||(s.contentType=o3(null,e)),s}function l3(n,e,t,s,a){const l=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function d(){let ee="";for(let ue=0;ue<2;ue++)ee=ee+Math.random().toString().slice(2);return ee}const m=d();c["Content-Type"]="multipart/related; boundary="+m;const g=o1(e,s,a),y=r1(g,t),E="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+m+`\r
Content-Type: `+g.contentType+`\r
\r
`,b=`\r
--`+m+"--",A=Fr.getBlob(E,s,b);if(A===null)throw QI();const I={name:g.fullPath},j=fh(l,n.host,n._protocol),V="POST",$=n.maxUploadRetryTime,K=new ql(j,V,Yv(n,t),$);return K.urlParams=I,K.headers=c,K.body=A.uploadData(),K.errorHandler=dh(e),K}class Zd{constructor(e,t,s,a){this.current=e,this.total=t,this.finalized=!!s,this.metadata=a||null}}function Kv(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Ks(!1)}return Ks(!!t&&(e||["active"]).indexOf(t)!==-1),t}function u3(n,e,t,s,a){const l=e.bucketOnlyServerUrl(),c=o1(e,s,a),d={name:c.fullPath},m=fh(l,n.host,n._protocol),g="POST",y={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},E=r1(c,t),b=n.maxUploadRetryTime;function A(j){Kv(j);let V;try{V=j.getResponseHeader("X-Goog-Upload-URL")}catch{Ks(!1)}return Ks(Lm(V)),V}const I=new ql(m,g,A,b);return I.urlParams=d,I.headers=y,I.body=E,I.errorHandler=dh(e),I}function c3(n,e,t,s){const a={"X-Goog-Upload-Command":"query"};function l(g){const y=Kv(g,["active","final"]);let E=null;try{E=g.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ks(!1)}E||Ks(!1);const b=Number(E);return Ks(!isNaN(b)),new Zd(b,s.size(),y==="final")}const c="POST",d=n.maxUploadRetryTime,m=new ql(t,c,l,d);return m.headers=a,m.errorHandler=dh(e),m}const F0=256*1024;function h3(n,e,t,s,a,l,c,d){const m=new Zd(0,0);if(c?(m.current=c.current,m.total=c.total):(m.current=0,m.total=s.size()),s.size()!==m.total)throw A6();const g=m.total-m.current;let y=g;a>0&&(y=Math.min(y,a));const E=m.current,b=E+y;let A="";y===0?A="finalize":g===y?A="upload, finalize":A="upload";const I={"X-Goog-Upload-Command":A,"X-Goog-Upload-Offset":`${m.current}`},j=s.slice(E,b);if(j===null)throw QI();function V(ue,_e){const Se=Kv(ue,["active","final"]),x=m.current+y,R=s.size();let N;return Se==="final"?N=Yv(e,l)(ue,_e):N=null,new Zd(x,R,Se==="final",N)}const $="POST",K=e.maxUploadRetryTime,ee=new ql(t,$,V,K);return ee.headers=I,ee.body=j.uploadData(),ee.progressCallback=d||null,ee.errorHandler=dh(n),ee}const Vn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function y_(n){switch(n){case"running":case"pausing":case"canceling":return Vn.RUNNING;case"paused":return Vn.PAUSED;case"success":return Vn.SUCCESS;case"canceled":return Vn.CANCELED;case"error":return Vn.ERROR;default:return Vn.ERROR}}class f3{constructor(e,t,s){if(P6(e)||t!=null||s!=null)this.next=e,this.error=t??void 0,this.complete=s??void 0;else{const l=e;this.next=l.next,this.error=l.error,this.complete=l.complete}}}function nl(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class d3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Qa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Qa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Qa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,a,l){if(this.sent_)throw ic("cannot .send() more than once");if(_s(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const c in l)l.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,l[c].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ic("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ic("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ic("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ic("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class m3 extends d3{initXhr(){this.xhr_.responseType="text"}}function ol(){return new m3}class p3{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,s=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=s,this._mappings=i1(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals(gt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const l=this.isExponentialBackoffExpired();if($I(a.status,[]))if(l)a=YI();else{this.sleepTime=Math.max(this.sleepTime*2,_6),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals(gt.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,l)=>{this._resolve=a,this._reject=l,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,s])=>{switch(this._state){case"running":e(t,s);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const s=u3(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(s,ol,e,t);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,s)=>{const a=c3(this._ref.storage,this._ref._location,e,this._blob),l=this._ref.storage._makeRequest(a,ol,t,s);this._request=l,l.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=F0*this._chunkMultiplier,t=new Zd(this._transferred,this._blob.size()),s=this._uploadUrl;this._resolveToken((a,l)=>{let c;try{c=h3(this._ref._location,this._ref.storage,s,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){this._error=m,this._transition("error");return}const d=this._ref.storage._makeRequest(c,ol,a,l,!1);this._request=d,d.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){F0*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const s=r3(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(s,ol,e,t);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const s=l3(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(s,ol,e,t);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=KI(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=y_(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,s,a){const l=new f3(t||void 0,s||void 0,a||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(y_(this._state)){case Vn.SUCCESS:nl(this._resolve.bind(null,this.snapshot))();break;case Vn.CANCELED:case Vn.ERROR:const t=this._reject;nl(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(y_(this._state)){case Vn.RUNNING:case Vn.PAUSED:e.next&&nl(e.next.bind(e,this.snapshot))();break;case Vn.SUCCESS:e.complete&&nl(e.complete.bind(e))();break;case Vn.CANCELED:case Vn.ERROR:e.error&&nl(e.error.bind(e,this._error))();break;default:e.error&&nl(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}class to{constructor(e,t){this._service=e,t instanceof Xn?this._location=t:this._location=Xn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new to(e,t)}get root(){const e=new Xn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return n1(this._location.path)}get storage(){return this._service}get parent(){const e=$6(this._location.path);if(e===null)return null;const t=new Xn(this._location.bucket,e);return new to(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw N6(e)}}function g3(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new p3(n,new Fr(e),t)}function _3(n){n._throwIfRoot("getDownloadURL");const e=a3(n.storage,n._location,i1());return n.storage.makeRequestWithTokens(e,ol).then(t=>{if(t===null)throw R6();return t})}function y3(n,e){const t=J6(n._location.path,e),s=new Xn(n._location.bucket,t);return new to(n.storage,s)}function v3(n){return/^[A-Za-z]+:\/\//.test(n)}function E3(n,e){return new to(n,e)}function l1(n,e){if(n instanceof Qv){const t=n;if(t._bucket==null)throw C6();const s=new to(t,t._bucket);return e!=null?l1(s,e):s}else return e!==void 0?y3(n,e):n}function T3(n,e){if(e&&v3(e)){if(n instanceof Qv)return E3(n,e);throw ay("To use ref(service, url), the first argument must be a Storage instance.")}else return l1(n,e)}function H0(n,e){const t=e?.[GI];return t==null?null:Xn.makeFromBucketSpec(t,n)}function S3(n,e,t,s={}){n.host=`${e}:${t}`;const a=_s(e);a&&(im(`https://${n.host}/b`),sm("Storage",!0)),n._isUsingEmulator=!0,n._protocol=a?"https":"http";const{mockUserToken:l}=s;l&&(n._overrideAuthToken=typeof l=="string"?l:yy(l,n.app.options.projectId))}class Qv{constructor(e,t,s,a,l,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=qI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=p6,this._maxUploadRetryTime=g6,this._requests=new Set,a!=null?this._bucket=Xn.makeFromBucketSpec(a,this._host):this._bucket=H0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Xn.makeFromBucketSpec(this._url,e):this._bucket=H0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){B0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){B0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new to(this,e)}_makeRequest(e,t,s,a,l=!0){if(this._deleted)return new x6(WI());{const c=B6(e,this._appId,s,a,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[s,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,a).getPromise()}}const q0="@firebase/storage",G0="0.14.0";const u1="storage";function Vm(n,e,t){return n=At(n),g3(n,e,t)}function Um(n){return n=At(n),_3(n)}function jm(n,e){return n=At(n),T3(n,e)}function mh(n=lm(),e){n=At(n);const s=Xc(n,u1).getImmediate({identifier:e}),a=_y("storage");return a&&b3(s,...a),s}function b3(n,e,t,s={}){S3(n,e,t,s)}function w3(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),s=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new Qv(t,s,a,e,ha)}function C3(){ea(new Xs(u1,w3,"PUBLIC").setMultipleInstances(!0)),gi(q0,G0,""),gi(q0,G0,"esm2020")}C3();const A3={apiKey:"AIzaSyDlpnsAM7VzcUVUB5Dfln9iOdWIGQtmGso",authDomain:"skillx-7b55c.firebaseapp.com",projectId:"skillx-7b55c",storageBucket:"skillx-7b55c.firebasestorage.app",messagingSenderId:"805907988145",appId:"1:805907988145:web:4c5c06e3ce8027a118ac90",measurementId:"G-4JP775V103"},zm=vC(A3),Ol=PM(zm),Dl=UV(zm),In=f6(zm);mh(zm);const c1=P.createContext(),R3=({children:n})=>{const[e,t]=P.useState([]),[s,a]=P.useState([]),[l,c]=P.useState([]),d=async()=>{try{const E=(await gl(Rn(In,"Students"))).val();if(!E){t([]);return}const b=Object.keys(E).map(A=>({id:A,...E[A]}));t(b)}catch(y){console.log(y),alert("Services currently unavailable, please try again later")}},m=async()=>{try{const E=(await gl(Rn(In,"Organizations"))).val();if(!E){a([]);return}const b=Object.keys(E).map(A=>({id:A,...E[A]}));a(b)}catch(y){console.log(y),alert("Services currently unavailable, please try again later")}},g=async()=>{try{const E=(await gl(Rn(In,"Mentors"))).val();if(!E){c([]);return}const b=Object.keys(E).map(A=>({id:A,...E[A]}));c(b)}catch(y){console.log(y),alert("Services currently unavailable, please try again later")}};return P.useEffect(()=>{d(),m(),g()},[]),v.jsx(c1.Provider,{value:{studentData:e,OrganizationData:s,MentorData:l},children:n})},h1=()=>{const[n,e]=P.useState(""),[t,s]=P.useState(""),{studentData:a,OrganizationData:l,MentorData:c}=P.useContext(c1);function d(y){y.preventDefault(),console.log(a,l,c);try{const E=a?.find(I=>I.id==n.trim()&&I.passwordId==t),b=l?.find(I=>I.id==n.trim()&&I.passwordId==t.trim()),A=c?.find(I=>I.id==n.trim()&&I.passwordId==t.trim());if(E){localStorage.setItem("loggedInUserSkillExchange",JSON.stringify({...E,role:"student"})),alert("Logging in as student..."),window.location.reload();return}else if(b){localStorage.setItem("loggedInUserSkillExchange",JSON.stringify({...b,role:"organization"})),alert("Logging in as organization..."),window.location.reload();return}else if(A){console.log("mentor"),localStorage.setItem("loggedInUserSkillExchange",JSON.stringify({...A,role:"mentor"})),alert("Logging in as mentor..."),window.location.reload();return}else alert("User not found")}catch(E){alert(E)}}function m(y){e(y.target.value)}function g(y){s(y.target.value)}return v.jsx(v.Fragment,{children:v.jsxs("div",{className:"login-page",children:[v.jsx("h1",{children:"Skill Exchange Login"}),v.jsxs("form",{className:"login-page-content",autoComplete:"off",onSubmit:y=>{d(y)},children:[v.jsx("img",{src:Ml,alt:"skillx logo"}),v.jsx("input",{type:"text",placeholder:"Enter user id",autoComplete:"off",required:!0,onChange:y=>{m(y)},value:n}),v.jsx("input",{type:"text",placeholder:"Enter your password",autoComplete:"off",required:!0,onChange:y=>{g(y)},value:t}),v.jsxs("h3",{children:["Don't have any account? ",v.jsx(Di,{to:"/register",children:"RegisterNow"})]}),v.jsx("button",{type:"submit",children:"Login"})]}),v.jsx("h3",{children:v.jsx(Di,{children:"Forgotten Password"})})]})})},I3=()=>{function n(){return v.jsx(h1,{})}return v.jsx(v.Fragment,{children:v.jsxs("nav",{className:"navLanding",children:[v.jsx("div",{className:"logo",children:v.jsx("img",{src:Ml,alt:""})}),v.jsx("div",{className:"cta-nav",children:v.jsxs(Di,{to:"/login",children:[" ",v.jsxs("button",{className:"login-cta",onClick:n,children:[v.jsx("i",{className:"fa-solid fa-arrow-right-to-bracket"}),"Login"]})]})})]})})},N3="/skill-exchange/assets/hero_sec_img-xu7NUY8L.png",x3="/skill-exchange/assets/hero_background-DbhdSA7v.png",O3=()=>v.jsx(v.Fragment,{children:v.jsxs("section",{class:"hero-sec",children:[v.jsx("img",{src:x3,alt:"bg-hero",class:"hero-bg"}),v.jsxs("div",{class:"hero-left",children:[v.jsx("h1",{children:"Connect, Learn, Collaborate, Grow with SkillX"}),v.jsx("p",{children:"Empowering students to showcase their skills, connect with mentors, and work on real Organization projects  all in one smart AI-driven ecosystem."}),v.jsxs("div",{class:"btn-hero-left",children:[v.jsxs("button",{class:"login-cta",onclick:"window.location.href='roleReg.html'",children:[v.jsx("i",{class:"fa-solid fa-arrow-right-to-bracket"}),"Login"]}),v.jsx("button",{class:"learn-btn-hero",children:"Learn More"})]})]}),v.jsx("div",{class:"hero-right",children:v.jsx("img",{src:N3,alt:"SkillX related image"})})]})}),D3=()=>v.jsxs("div",{children:[v.jsx(I3,{}),v.jsx(O3,{})]});class ph{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const k3=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},fn={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:k3()},Wv=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},P3=(n,e="https://api.emailjs.com")=>{if(!n)return;const t=Wv(n);fn.publicKey=t.publicKey,fn.blockHeadless=t.blockHeadless,fn.storageProvider=t.storageProvider,fn.blockList=t.blockList,fn.limitRate=t.limitRate,fn.origin=t.origin||e},f1=async(n,e,t={})=>{const s=await fetch(fn.origin+n,{method:"POST",headers:t,body:e}),a=await s.text(),l=new ph(s.status,a);if(s.ok)return l;throw l},d1=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},M3=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},m1=n=>n.webdriver||!n.languages||n.languages.length===0,p1=()=>new ph(451,"Unavailable For Headless Browser"),L3=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},V3=n=>!n.list?.length||!n.watchVariable,U3=(n,e)=>n instanceof FormData?n.get(e):n[e],g1=(n,e)=>{if(V3(n))return!1;L3(n.list,n.watchVariable);const t=U3(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},_1=()=>new ph(403,"Forbidden"),j3=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},z3=async(n,e,t)=>{const s=Number(await t.get(n)||0);return e-Date.now()+s},y1=async(n,e,t)=>{if(!e.throttle||!t)return!1;j3(e.throttle,e.id);const s=e.id||n;return await z3(s,e.throttle,t)>0?!0:(await t.set(s,Date.now().toString()),!1)},v1=()=>new ph(429,"Too Many Requests"),B3=async(n,e,t,s)=>{const a=Wv(s),l=a.publicKey||fn.publicKey,c=a.blockHeadless||fn.blockHeadless,d=a.storageProvider||fn.storageProvider,m={...fn.blockList,...a.blockList},g={...fn.limitRate,...a.limitRate};return c&&m1(navigator)?Promise.reject(p1()):(d1(l,n,e),M3(t),t&&g1(m,t)?Promise.reject(_1()):await y1(location.pathname,g,d)?Promise.reject(v1()):f1("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:l,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},F3=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},H3=n=>typeof n=="string"?document.querySelector(n):n,q3=async(n,e,t,s)=>{const a=Wv(s),l=a.publicKey||fn.publicKey,c=a.blockHeadless||fn.blockHeadless,d=fn.storageProvider||a.storageProvider,m={...fn.blockList,...a.blockList},g={...fn.limitRate,...a.limitRate};if(c&&m1(navigator))return Promise.reject(p1());const y=H3(t);d1(l,n,e),F3(y);const E=new FormData(y);return g1(m,E)?Promise.reject(_1()):await y1(location.pathname,g,d)?Promise.reject(v1()):(E.append("lib_version","4.4.1"),E.append("service_id",n),E.append("template_id",e),E.append("user_id",l),f1("/api/v1.0/email/send-form",E))},Qs={init:P3,send:B3,sendForm:q3,EmailJSResponseStatus:ph},gh=()=>v.jsx(v.Fragment,{children:v.jsxs("div",{className:"loader-main",children:[v.jsx("div",{className:"bg-main-loader"}),v.jsx("div",{className:"loader"})]})}),G3=({role:n})=>{const[e,t]=P.useState(""),[s,a]=P.useState(""),[l,c]=P.useState(""),[d,m]=P.useState(""),[g,y]=P.useState(""),[E,b]=P.useState(""),[A,I]=P.useState(!1),[j,V]=P.useState(null),[$,K]=P.useState(!1),[ee,ue]=P.useState(""),[_e,Se]=P.useState(!1),[x,R]=P.useState(!1),[N,U]=P.useState();P.useEffect(()=>{Qs.init("O1eqMF__l75Le_ffM")},[]);const k=()=>{window.recaptchaVerifier||(window.recaptchaVerifier=new Ny(Ol,"recaptcha-container",{size:"invisible",callback:()=>console.log("reCAPTCHA solved")}),window.recaptchaVerifier.render())};async function B(){if(!s)return alert("Enter email");I(!0);const se=Math.floor(1e5+Math.random()*9e5).toString();ue(se),await cv(Cl(Dl,"emailOtps",s),{otp:se,timestamp:Date.now()}),Qs.send("service_rjgtrdr","template_vru0qpj",{to_email:s,name:e,otp:se}).then(()=>{K(!0),alert("Email OTP sent!")}).catch(he=>alert("Email send error: "+he.text)),I(!1)}async function O(){if(!g)return alert("Enter OTP");I(!0);const se=await uv(Cl(Dl,"emailOtps",s));if(!se.exists())return alert("No OTP found for this email");se.data().otp===g?(Se(!0),alert("Email verified!")):alert("Incorrect OTP"),I(!1)}function Ze(){if(!l)return alert("Enter mobile number");I(!0),k();const se=window.recaptchaVerifier;xy(Ol,l,se).then(he=>{V(he),alert("OTP sent successfully!")}).catch(he=>{console.error(he),alert("Error sending OTP: "+he.message)}),I(!1)}function Oe(){if(!j)return alert("Please send OTP first");I(!0),j.confirm(E).then(se=>{R(!0),alert("Phone verified successfully!"),console.log(se.user),window.recaptchaVerifier&&window.recaptchaVerifier.clear()}).catch(se=>{console.error(se),alert("Invalid OTP")}),I(!1)}async function J(se){if(se.preventDefault(),I(!0),!_e||!x)return I(!1),alert("Verify both email & mobile first");const he={name:e.trim(),email:s.trim(),mobileNum:l.trim(),passwordId:d.trim()},Pe=(await gl(Rn(In,"Students"))).val();if(Pe){const X=Object.values(Pe),le=X.some(ve=>ve.email===s),ye=X.some(ve=>ve.mobileNum===l);if(le)return I(!1),alert("Email already exists. Try another one.");if(ye)return I(!1),alert("Mobile number already exists. Try another one.")}const M=Pe?Object.keys(Pe).length:0,G="STU"+Math.floor(1e3+Math.random()*9e3)+(M+1);await ho(Rn(In,`Students/${G}`),he).then(()=>{alert("Registered Successfully "),Qs.send("service_rjgtrdr","template_l3c853f",{to_email:s.trim(),userId:G.trim(),password:d.trim(),name:e.trim()}).then(()=>alert("Credentials sent to email"))}).catch(X=>console.log(X)),t(""),a(""),c(""),m(""),y(""),b(""),I(!1)}return v.jsxs("form",{className:"registerForm",onSubmit:J,children:[v.jsxs("h3",{children:["Registering as ",n]}),v.jsx("input",{type:"text",placeholder:"Enter Your Name",value:e,onChange:se=>t(se.target.value),required:!0}),v.jsxs("div",{className:"send-otp",children:[v.jsx("input",{type:"email",placeholder:"Enter Your Email",value:s,onChange:se=>a(se.target.value),required:!0}),v.jsx("button",{type:"button",onClick:B,children:"Send OTP"})]}),v.jsxs("div",{className:"verify-otp",children:[v.jsx("input",{type:"text",placeholder:"Enter Email OTP",value:g,onChange:se=>y(se.target.value),required:!0}),v.jsx("button",{type:"button",onClick:O,children:"Verify OTP"})]}),v.jsxs("div",{className:"send-otp",children:[v.jsx("input",{type:"text",placeholder:"Enter Mobile",value:l,onChange:se=>c(se.target.value),required:!0}),v.jsx("button",{id:"sendMobileOtpBtn",type:"button",onClick:Ze,children:"Send OTP"})]}),v.jsx("div",{id:"recaptcha-container"}),v.jsxs("div",{className:"verify-otp",children:[v.jsx("input",{type:"text",placeholder:"Enter Mobile OTP",value:E,onChange:se=>b(se.target.value),required:!0}),v.jsx("button",{type:"button",onClick:Oe,children:"Verify OTP"})]}),v.jsx("input",{type:"password",placeholder:"Enter Password",value:d,onChange:se=>m(se.target.value),required:!0}),v.jsx("button",{type:"submit",children:"Submit"}),A==!0&&v.jsx(gh,{})]})},Y3=({role:n})=>{const[e,t]=P.useState(""),[s,a]=P.useState(""),[l,c]=P.useState(""),[d,m]=P.useState(""),[g,y]=P.useState(""),[E,b]=P.useState(""),[A,I]=P.useState(""),[j,V]=P.useState(""),[$,K]=P.useState(!1);function ee(X){t(X.target.value)}function ue(X){a(X.target.value)}function _e(X){b(X.target.value)}function Se(X){c(X.target.value)}const[x,R]=P.useState(null),[N,U]=P.useState(!1),[k,B]=P.useState(""),[O,Ze]=P.useState(!1),[Oe,J]=P.useState(!1);P.useEffect(()=>{Qs.init("O1eqMF__l75Le_ffM")},[]);const se=()=>{window.recaptchaVerifier||(window.recaptchaVerifier=new Ny(Ol,"recaptcha-container",{size:"invisible",callback:()=>console.log("reCAPTCHA solved")}),window.recaptchaVerifier.render())};async function he(){if(!d)return alert("Enter email");K(!0);const X=Math.floor(1e5+Math.random()*9e5).toString();B(X),await cv(Cl(Dl,"emailOtps",d),{otp:X,timestamp:Date.now()}),Qs.send("service_rjgtrdr","template_vru0qpj",{to_email:d,name:e,otp:X}).then(()=>{U(!0),alert("Email OTP sent!")}).catch(le=>alert("Email send error: "+le.text)),K(!1)}async function ke(){if(!A)return alert("Enter OTP");K(!0);const X=await uv(Cl(Dl,"emailOtps",d));if(!X.exists())return alert("No OTP found for this email");X.data().otp===A?(Ze(!0),alert("Email verified!")):alert("Incorrect OTP"),K(!1)}function Pe(){if(!g)return alert("Enter mobile number");K(!0),se();const X=window.recaptchaVerifier;xy(Ol,g,X).then(le=>{R(le),alert("OTP sent successfully!")}).catch(le=>{console.error(le),alert("Error sending OTP: "+le.message)}),K(!1)}function M(){if(!x)return alert("Please send OTP first");K(!0),x.confirm(j).then(X=>{J(!0),alert("Phone verified successfully!"),console.log(X.user),window.recaptchaVerifier&&window.recaptchaVerifier.clear()}).catch(X=>{console.error(X),alert("Invalid OTP")}),K(!1)}async function G(X){if(X.preventDefault(),K(!0),!O||!Oe)return K(!1),alert("Verify both email & mobile first");const le={name:e.trim(),RegisterationNum:s.trim(),Address:l.trim(),email:d.trim(),mobileNum:g.trim(),passwordId:E.trim()},ve=(await gl(Rn(In,"Organizations"))).val();if(ve){const Xe=Object.values(ve),vi=Xe.some(zi=>zi.email===d),Zn=Xe.some(zi=>zi.mobileNum===g);if(vi)return K(!1),alert("Email already exists. Try another one.");if(Zn)return K(!1),alert("Mobile number already exists. Try another one.")}const De=ve?Object.keys(ve).length:0,ut="ORG"+Math.floor(1e3+Math.random()*9e3)+(De+1);await ho(Rn(In,`Organizations/${ut}`),le).then(()=>{alert("Registered Successfully "),Qs.send("service_rjgtrdr","template_l3c853f",{to_email:d.trim(),userId:ut.trim(),password:E.trim(),name:e.trim()}).then(()=>alert("Credentials sent to email"))}).catch(Xe=>console.log(Xe)),t(""),setEmailOrganization(""),setMobileOrganization(""),setPasswordOrganization(""),I(""),V(""),K(!1)}return v.jsx(v.Fragment,{children:v.jsxs("form",{className:"registerForm",onSubmit:X=>{G(X)},children:[v.jsxs("h3",{children:["Registering as ",n]}),v.jsx("input",{type:"text",placeholder:"Enter Your Name",onChange:X=>{ee(X)},value:e,required:!0}),v.jsx("input",{type:"text",placeholder:"Enter Registration Number",onChange:X=>{ue(X)},value:s,required:!0}),v.jsx("input",{type:"text",placeholder:"Address of Organization",onChange:X=>{Se(X)},value:l,required:!0}),v.jsxs("div",{className:"send-otp",children:[v.jsx("input",{type:"email",placeholder:"Enter Your Email",value:d,onChange:X=>m(X.target.value),required:!0}),v.jsx("button",{type:"button",onClick:he,children:"Send OTP"})]}),v.jsxs("div",{className:"verify-otp",children:[v.jsx("input",{type:"text",placeholder:"Enter Email OTP",value:A,onChange:X=>I(X.target.value),required:!0}),v.jsx("button",{type:"button",onClick:ke,children:"Verify OTP"})]}),v.jsxs("div",{className:"send-otp",children:[v.jsx("input",{type:"text",placeholder:"Enter Mobile",value:g,onChange:X=>y(X.target.value),required:!0}),v.jsx("button",{id:"sendMobileOtpBtn",type:"button",onClick:Pe,children:"Send OTP"})]}),v.jsx("div",{id:"recaptcha-container"}),v.jsxs("div",{className:"verify-otp",children:[v.jsx("input",{type:"text",placeholder:"Enter Mobile OTP",value:j,onChange:X=>V(X.target.value),required:!0}),v.jsx("button",{type:"button",onClick:M,children:"Verify OTP"})]}),v.jsx("input",{type:"text",placeholder:"Enter Password",onChange:X=>{_e(X)},value:E,required:!0}),v.jsx("button",{type:"submit",children:" Submit"}),$==!0&&v.jsx(gh,{})]})})},K3=({role:n})=>{const[e,t]=P.useState(""),[s,a]=P.useState(""),[l,c]=P.useState(""),[d,m]=P.useState(""),[g,y]=P.useState(""),[E,b]=P.useState(""),[A,I]=P.useState(""),[j,V]=P.useState("");function $(G){t(G.target.value)}function K(G){a(G.target.value)}function ee(G){b(G.target.value)}const[ue,_e]=P.useState(null),[Se,x]=P.useState(!1),[R,N]=P.useState(""),[U,k]=P.useState(!1),[B,O]=P.useState(!1),[Ze,Oe]=P.useState(!1);P.useEffect(()=>{Qs.init("O1eqMF__l75Le_ffM")},[]);const J=()=>{window.recaptchaVerifier||(window.recaptchaVerifier=new Ny(Ol,"recaptcha-container",{size:"invisible",callback:()=>console.log("reCAPTCHA solved")}),window.recaptchaVerifier.render())};async function se(){if(Oe(!0),!d)return alert("Enter email");const G=Math.floor(1e5+Math.random()*9e5).toString();N(G),await cv(Cl(Dl,"emailOtps",d),{otp:G,timestamp:Date.now()}),Qs.send("service_rjgtrdr","template_vru0qpj",{to_email:d,name:e,otp:G}).then(()=>{x(!0),alert("Email OTP sent!")}).catch(X=>alert("Email send error: "+X.text)),Oe(!1)}async function he(){if(Oe(!0),!A)return alert("Enter OTP");const G=await uv(Cl(Dl,"emailOtps",d));if(!G.exists())return alert("No OTP found for this email");G.data().otp===A?(k(!0),alert("Email verified!")):alert("Incorrect OTP"),Oe(!1)}function ke(){if(Oe(!0),!g)return alert("Enter mobile number");J();const G=window.recaptchaVerifier;xy(Ol,g,G).then(X=>{_e(X),alert("OTP sent successfully!")}).catch(X=>{console.error(X),alert("Error sending OTP: "+X.message)}),Oe(!1)}function Pe(){if(Oe(!0),!ue)return alert("Please send OTP first");ue.confirm(j).then(G=>{O(!0),alert("Phone verified successfully!"),console.log(G.user),window.recaptchaVerifier&&window.recaptchaVerifier.clear()}).catch(G=>{console.error(G),alert("Invalid OTP")}),Oe(!1)}async function M(G){if(G.preventDefault(),Oe(!0),!U||!B)return Oe(!1),alert("Verify both email & mobile first");const X={name:e.trim(),Education:s.trim(),Address:l.trim(),email:d.trim(),mobileNum:g.trim(),passwordId:E.trim()},ye=(await gl(Rn(In,"Mentors"))).val();if(ye){const ut=Object.values(ye),Xe=ut.some(Zn=>Zn.email===d),vi=ut.some(Zn=>Zn.mobileNum===g);if(Xe)return Oe(!1),alert("Email already exists. Try another one.");if(vi)return Oe(!1),alert("Mobile number already exists. Try another one.")}const ve=ye?Object.keys(ye).length:0,De="MENT"+Math.floor(1e3+Math.random()*9e3)+(ve+1);await ho(Rn(In,`Mentors/${De}`),X).then(()=>{alert("Registered Successfully  sending cerentials...wait..."),Oe(!0),Qs.send("service_rjgtrdr","template_l3c853f",{to_email:d.trim(),userId:De.trim(),password:E.trim(),name:e.trim()}).then(()=>{alert("Credentials sent to email"),Oe(!1)})}).catch(ut=>console.log(ut)),t(""),m(""),y(""),b(""),I(""),V(""),Oe(!1)}return v.jsxs(v.Fragment,{children:[v.jsxs("form",{className:"registerForm",onSubmit:G=>{M(G)},children:[v.jsxs("h3",{children:["Registering as ",n]}),v.jsx("input",{type:"text",placeholder:"Enter Your Name",onChange:G=>{$(G)},value:e,required:!0}),v.jsx("input",{type:"text",placeholder:"Enter Education Details",onChange:G=>{K(G)},value:s,required:!0}),v.jsxs("div",{className:"send-otp",children:[v.jsx("input",{type:"email",placeholder:"Enter Your Email",value:d,onChange:G=>m(G.target.value),required:!0}),v.jsx("button",{type:"button",onClick:se,children:"Send OTP"})]}),v.jsxs("div",{className:"verify-otp",children:[v.jsx("input",{type:"text",placeholder:"Enter Email OTP",value:A,onChange:G=>I(G.target.value),required:!0}),v.jsx("button",{type:"button",onClick:he,children:"Verify OTP"})]}),v.jsxs("div",{className:"send-otp",children:[v.jsx("input",{type:"text",placeholder:"Enter Mobile",value:g,onChange:G=>y(G.target.value),required:!0}),v.jsx("button",{id:"sendMobileOtpBtn",type:"button",onClick:ke,children:"Send OTP"})]}),v.jsx("div",{id:"recaptcha-container"}),v.jsxs("div",{className:"verify-otp",children:[v.jsx("input",{type:"text",placeholder:"Enter Mobile OTP",value:j,onChange:G=>V(G.target.value),required:!0}),v.jsx("button",{type:"button",onClick:Pe,children:"Verify OTP"})]}),v.jsx("input",{type:"text",placeholder:"Enter Password",onChange:G=>{ee(G)},value:E,required:!0}),v.jsx("button",{type:"submit",children:" Submit"})]}),Ze==!0&&v.jsx(gh,{})]})},Q3=()=>{const[n,e]=P.useState("");function t(s){e(s.target.value),console.log(n)}return v.jsx(v.Fragment,{children:v.jsxs("div",{className:"register-main",children:[v.jsx("h1",{children:"Register In SKill Exchange"}),v.jsxs("div",{className:"register-content",children:[v.jsx("img",{src:Ml,alt:"skillx logo"}),v.jsxs("select",{name:"",id:"",placeholder:"select role",onChange:s=>{t(s)},children:[v.jsx("option",{value:"role_select",children:"Select Your Role"}),v.jsx("option",{value:"student",children:"Student"}),v.jsx("option",{value:"organization",children:"Organization"}),v.jsx("option",{value:"mentor",children:"Mentor"})]}),n==""&&v.jsx("h4",{children:v.jsx("b",{children:"Select Your Role First"})}),n=="role_select"&&v.jsx("h4",{children:v.jsx("b",{children:"Select Your Role First"})}),n=="student"&&v.jsx(G3,{role:n}),n=="organization"&&v.jsx(Y3,{role:n}),n=="mentor"&&v.jsx(K3,{role:n})]})]})})},Gl=P.createContext(),W3=({children:n})=>{const[e,t]=P.useState(!0),s=io(),[a,l]=P.useState(null);return P.useEffect(()=>{const c=Rn(In,`Students/${s.id}`),d=s6(c,m=>{m.exists()?l(m.val()):console.log("No Data Found"),t(!1)});return()=>d()},[s.id]),e?v.jsx(gh,{}):v.jsx(Gl.Provider,{value:a,children:n})},X3=()=>{const{id:n}=io();return v.jsx("div",{className:"navigation-dash-main",children:v.jsxs("div",{className:"main-left",children:[v.jsxs("ul",{children:[v.jsx(Di,{to:`/student-dashboard/${n}/dashboard`,children:v.jsxs("li",{children:[v.jsx("i",{className:"fa-regular fa-house"}),"Dashboard"]})}),v.jsxs(Di,{to:`/student-dashboard/${n}/`,children:["   ",v.jsxs("li",{children:[v.jsx("i",{className:"fa-regular fa-user"}),"My Profile"]})]}),v.jsxs(Di,{to:`/student-dashboard/${n}/skill-exchange`,children:["  ",v.jsxs("li",{children:[v.jsx("i",{className:"fa-solid fa-rotate"}),"Skill-Exchange"]})]}),v.jsxs(Di,{to:`/student-dashboard/${n}/projects`,children:["   ",v.jsxs("li",{children:[v.jsx("i",{className:"fa-regular fa-building"}),"Projects"]})]}),v.jsxs(Di,{to:`/student-dashboard/${n}/mentorship`,children:["   ",v.jsxs("li",{children:[v.jsx("i",{className:"fa-regular fa-id-badge"}),"Mentorship"]})]}),v.jsxs(Di,{to:`/student-dashboard/${n}/events`,children:["  ",v.jsxs("li",{children:[v.jsx("i",{className:"fa-regular fa-calendar-days"}),"Events"]})]})]}),v.jsx("button",{className:"logout-btn",onClick:()=>(localStorage.removeItem("loggedInUserSkillExchange"),window.location.reload(),v.jsx(nC,{to:"/login",replace:!0})),children:"Logout"})]})})},$3=()=>v.jsxs("nav",{className:"navStudentDashboard",children:[v.jsx("div",{className:"logo",children:v.jsx("img",{src:Ml,alt:"Logo"})}),v.jsxs("div",{className:"nav-right",children:[v.jsx("input",{type:"search",placeholder:"Search projects, skills, mentors",className:"searchBarStud"}),v.jsx("i",{className:"fa-regular fa-bell"})]}),v.jsx("label",{htmlFor:"menu-toggle",children:v.jsxs("div",{className:"hamburger",id:"menu-toggle",children:[v.jsx("div",{}),v.jsx("div",{}),v.jsx("div",{})]})})]}),J3=({close:n})=>{const[e,t]=P.useState(!1),[s,a]=P.useState(""),[l,c]=P.useState(""),[d,m]=P.useState(null),[g,y]=P.useState(0),{id:E}=io();console.log("Editing Student ID:",E);const b=j=>{m(j.target.files[0])},A=async(j,V)=>{await n6(Rn(In,`Students/${j}`),V)},I=async j=>{j.preventDefault();const V={};if(s.trim()!==""&&(V.name=s.trim()),l.trim()!==""&&(V.description=l.trim()),!d&&Object.keys(V).length===0){alert("No changes to update");return}t(!0);try{if(d){const $=mh(),K=jm($,`ProfilePictures/${d.name}`),ee=Vm(K,d);ee.on("state_changed",ue=>{const _e=ue.bytesTransferred/ue.totalBytes*100;y(Math.round(_e))},ue=>{console.error("Upload error:",ue),t(!1)},async()=>{const ue=await Um(ee.snapshot.ref);console.log("File available at:",ue);const _e=Pm(Rn(In,"images"));ho(_e,{name:d.name,url:ue}),V.profileImage=ue,await A(E,V),alert("All changes made!"),t(!1),y(0)})}else await A(E,V),alert("All changes made!"),t(!1)}catch($){console.error("Error updating profile:",$),t(!1)}};return v.jsxs("div",{className:"edit-profile-Student",children:[v.jsx("h3",{children:"Edit Your Profile:"}),v.jsxs("form",{onSubmit:I,children:[v.jsx("h6",{children:"Upload your profile picture"}),v.jsx("input",{type:"file",onChange:b}),d&&v.jsxs("p",{children:["Upload Progress: ",g,"%"]}),v.jsx("input",{type:"text",placeholder:"Edit your name",value:s,onChange:j=>a(j.target.value)}),v.jsx("textarea",{placeholder:"Write About Yourself",value:l,onChange:j=>c(j.target.value)}),v.jsx("h5",{children:"You can edit Your Skills by uploading skills from your profile or skill exchange"}),v.jsx("button",{type:"button",className:"close-btn",onClick:n,children:v.jsx("i",{className:"fa-solid fa-x"})}),v.jsx("button",{type:"submit",children:"Save Changes"})]}),e&&v.jsx(gh,{})]})},Z3=()=>{const[n,e]=P.useState(!1),t=P.useContext(Gl),s=t?.skills||{},a=Object.entries(s).map(([l,c])=>({id:l,...c}));return v.jsx(v.Fragment,{children:v.jsxs("div",{className:"profile-intro-stu-outer",children:[v.jsxs("div",{className:"profile-intro-stu",children:[v.jsx("div",{className:"profile-img-stu",children:v.jsx("img",{src:t?.profileImage||Ml,alt:"profile-image"})}),v.jsxs("div",{className:"pr-int-stu",children:[v.jsx("h2",{id:"name",children:t?.name||"Student Name"}),v.jsx("p",{id:"about",children:t?.desciption||"Add about yourself"})]}),v.jsx("br",{}),v.jsx("br",{})]}),v.jsxs("div",{className:"skill-tags-stu",children:[a.length==0&&v.jsx("h6",{children:"no skills yet"}),v.jsx("button",{children:"Skill Exchange Member"}),a.map(l=>v.jsx("button",{children:l.title},l.id))]}),v.jsxs("div",{className:"impact-score",children:[v.jsx("div",{children:v.jsx("p",{children:"Organization Impact Score:"})}),v.jsx("div",{className:"progress-bar",children:v.jsx("div",{className:"progress-fill"})}),v.jsx("div",{children:v.jsx("p",{children:"75/100"})})]}),v.jsxs("div",{className:"profile-intro-buttons",children:[v.jsx("button",{children:v.jsx("a",{href:`tel:${t?.mobileNum||""}`,children:"Contact"})}),v.jsx("button",{children:v.jsx("a",{href:`mailto:${t?.email||""}`,children:"Email"})}),v.jsx("button",{onClick:()=>e(!0),children:"Edit Profile"}),n&&v.jsx(J3,{close:()=>e(!1)})]})]})})},e9=({close:n})=>{const[e,t]=P.useState(""),[s,a]=P.useState(""),[l,c]=P.useState(null),[d,m]=P.useState(0),[g,y]=P.useState(!1),{id:E}=io(),b=async I=>{const j=Rn(In,`Students/${E}/skills`),V=Pm(j);await ho(V,I)},A=async I=>{if(I.preventDefault(),!l){alert("Please upload a certificate");return}y(!0);try{const j=mh(),V=jm(j,`Certificates/${Date.now()}_${l.name}`),$=Vm(V,l);$.on("state_changed",K=>{const ee=K.bytesTransferred/K.totalBytes*100;m(Math.round(ee))},K=>{console.error("Upload error:",K),y(!1)},async()=>{const K=await Um($.snapshot.ref),ee={title:e,description:s,certificateURL:K,certificateName:l.name,addedAt:new Date().toISOString()};await b(ee),alert("Skill Added Successfully!"),y(!1),t(""),a(""),c(null),m(0)})}catch(j){console.error("Error adding skill:",j),y(!1)}};return v.jsxs("div",{className:"edit-profile-Student",children:[v.jsx("h3",{children:"Add New Skill"}),v.jsxs("form",{onSubmit:A,children:[v.jsx("input",{type:"text",placeholder:"Enter Skill Title",value:e,onChange:I=>t(I.target.value),required:!0}),v.jsx("h6",{children:"Upload your certificate"}),v.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",onChange:I=>c(I.target.files[0]),required:!0}),l&&v.jsxs("p",{children:["Upload Progress: ",d,"%"]}),v.jsx("textarea",{placeholder:"Write about this skill",value:s,onChange:I=>a(I.target.value),required:!0}),v.jsx("button",{type:"button",className:"close-btn",onClick:n,children:v.jsx("i",{className:"fa-solid fa-x"})}),v.jsx("button",{type:"submit",children:"Save Skill"})]}),g&&v.jsx("p",{children:"Uploading... Please wait."})]})},t9=()=>{const[n,e]=P.useState(!1),t=P.useContext(Gl);console.log(t?.skills);const s=t?.skills||{},a=Object.entries(s).map(([l,c])=>({id:l,...c}));return console.log(a[0]),v.jsxs("div",{className:"skills-stu",children:[v.jsxs("div",{className:"skills-head",children:[v.jsx("h2",{children:"My Skills :"}),v.jsx("button",{onClick:()=>e(!0),children:"Add New"})]}),v.jsxs("div",{className:"skills-collection",children:[a.length===0&&v.jsxs("h6",{children:[v.jsx("br",{}),v.jsx("br",{}),"No skills added yet"]}),a.map(l=>v.jsxs("div",{className:"skills-card",children:[v.jsxs("h2",{children:[v.jsx("i",{className:"fa-solid fa-trophy"})," ",l.title]}),v.jsx("img",{src:l.certificateURL?l.certificateURL:Ml,alt:"certificate"}),v.jsx("h3",{children:"Description:"}),v.jsx("p",{children:l.description})]},l.id))]}),n&&v.jsx(e9,{close:()=>e(!1)})]})},n9=({close:n})=>{const[e,t]=P.useState(""),[s,a]=P.useState(""),[l,c]=P.useState(null),[d,m]=P.useState(0),[g,y]=P.useState(!1),{id:E}=io(),b=async I=>{const j=Rn(In,`Students/${E}/Achievements`),V=Pm(j);await ho(V,I)},A=async I=>{if(I.preventDefault(),!l){alert("Please upload a certificate");return}y(!0);try{const j=mh(),V=jm(j,`Certificates/${Date.now()}_${l.name}`),$=Vm(V,l);$.on("state_changed",K=>{const ee=K.bytesTransferred/K.totalBytes*100;m(Math.round(ee))},K=>{console.error("Upload error:",K),y(!1)},async()=>{const K=await Um($.snapshot.ref),ee={title:e,description:s,certificateURL:K,certificateName:l.name,addedAt:new Date().toISOString()};await b(ee),alert("Achievement Added Successfully!"),y(!1),t(""),a(""),c(null),m(0)})}catch(j){console.error("Error adding Achievement:",j),y(!1)}};return v.jsxs("div",{className:"edit-profile-Student",children:[v.jsx("h3",{children:"Add New Achievement"}),v.jsxs("form",{onSubmit:A,children:[v.jsx("input",{type:"text",placeholder:"Enter Achievement Title",value:e,onChange:I=>t(I.target.value),required:!0}),v.jsx("h6",{children:"Upload your certificate"}),v.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",onChange:I=>c(I.target.files[0]),required:!0}),l&&v.jsxs("p",{children:["Upload Progress: ",d,"%"]}),v.jsx("textarea",{placeholder:"Write about this Achievement",value:s,onChange:I=>a(I.target.value),required:!0}),v.jsx("button",{type:"button",className:"close-btn",onClick:n,children:v.jsx("i",{className:"fa-solid fa-x"})}),v.jsx("button",{type:"submit",children:"Save Achievement"})]}),g&&v.jsx("p",{children:"Uploading... Please wait."})]})},i9=()=>{const[n,e]=P.useState(!1),s=P.useContext(Gl)?.Achievements||{},a=Object.entries(s).map(([l,c])=>({id:l,...c}));return v.jsxs("div",{children:[v.jsxs("div",{className:"certificates-stu",children:[v.jsxs("div",{className:"cert-head",children:[v.jsx("h2",{children:"Photos & Achievements :"}),v.jsx("button",{onClick:()=>e(!0),children:"Upload Achievements"})]}),a.length===0&&v.jsxs("h6",{children:[" ",v.jsx("br",{})," ",v.jsx("br",{}),"No skill Added yet"]}),v.jsx("div",{className:"certificates-collection",children:a.map(l=>v.jsxs("div",{className:"cert-card",id:l.id,children:[v.jsxs("h2",{children:[v.jsx("i",{className:"fa-solid fa-trophy"}),l.title]}),v.jsx("img",{src:l.certificateURL,alt:""}),v.jsx("h3",{children:"About journey:-"}),v.jsx("p",{children:l.description})]}))})]}),n&&v.jsx(n9,{close:()=>e(!1)})]})},s9=({close:n})=>{const[e,t]=P.useState(""),[s,a]=P.useState(""),[l,c]=P.useState(null),[d,m]=P.useState(0),[g,y]=P.useState(!1),{id:E}=io(),b=async I=>{const j=Rn(In,`Students/${E}/Projects`),V=Pm(j);await ho(V,I)},A=async I=>{if(I.preventDefault(),!l){alert("Please upload a certificate");return}y(!0);try{const j=mh(),V=jm(j,`Certificates/${Date.now()}_${l.name}`),$=Vm(V,l);$.on("state_changed",K=>{const ee=K.bytesTransferred/K.totalBytes*100;m(Math.round(ee))},K=>{console.error("Upload error:",K),y(!1)},async()=>{const K=await Um($.snapshot.ref),ee={title:e,description:s,certificateURL:K,certificateName:l.name,addedAt:new Date().toISOString()};await b(ee),alert("Project Added Successfully!"),y(!1),t(""),a(""),c(null),m(0)})}catch(j){console.error("Error adding Project:",j),y(!1)}};return v.jsxs("div",{className:"edit-profile-Student",children:[v.jsx("h3",{children:"Add New Project"}),v.jsxs("form",{onSubmit:A,children:[v.jsx("input",{type:"text",placeholder:"Enter Project Title",value:e,onChange:I=>t(I.target.value),required:!0}),v.jsx("h6",{children:"Upload your certificate"}),v.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",onChange:I=>c(I.target.files[0]),required:!0}),l&&v.jsxs("p",{children:["Upload Progress: ",d,"%"]}),v.jsx("textarea",{placeholder:"Write about this Project",value:s,onChange:I=>a(I.target.value),required:!0}),v.jsx("button",{type:"button",className:"close-btn",onClick:n,children:v.jsx("i",{className:"fa-solid fa-x"})}),v.jsx("button",{type:"submit",children:"Save Project"})]}),g&&v.jsx("h6",{children:"Uploading... Please wait."})]})},r9=()=>{const[n,e]=P.useState(!1),s=P.useContext(Gl)?.Projects||{},a=Object.entries(s).map(([l,c])=>({id:l,...c}));return v.jsxs("div",{children:[v.jsxs("div",{className:"projects-stu",children:[v.jsxs("div",{className:"projects-head",children:[v.jsx("h2",{children:"Projects :"}),v.jsx("button",{onClick:()=>e(!0),children:"Upload Projects"})]}),v.jsx("div",{className:"projects-collection",children:a.map(l=>v.jsxs("div",{className:"projects-card",children:[v.jsxs("h2",{children:[v.jsx("i",{className:"fa-solid fa-trophy"}),l.title]}),v.jsx("img",{src:l.certificateURL,alt:""}),v.jsx("h3",{children:"About Project:-"}),v.jsx("p",{children:l.description})]},l.id))})]}),n&&v.jsx(s9,{close:()=>e(!1)})]})},a9=()=>v.jsxs("div",{children:[v.jsx(Z3,{}),v.jsx(t9,{}),v.jsx(i9,{}),v.jsx(r9,{})]}),o9=()=>(P.useContext(Gl),io(),v.jsxs("div",{children:[v.jsx("input",{type:"checkbox",id:"menu-toggle",className:"menu-toggle",hidden:!0}),v.jsx($3,{}),v.jsx(X3,{}),v.jsx("div",{className:"main-right",children:v.jsx($x,{})})]})),l9=()=>v.jsx("div",{children:"Mentor Dashboard"}),u9=()=>v.jsx("div",{children:"Organization"}),Y0=({children:n})=>localStorage.getItem("loggedInUserSkillExchange")?n:v.jsx(nC,{to:"/login",replace:!0}),c9=()=>v.jsx("div",{children:"Dashboard"}),h9=()=>v.jsx("div",{children:"Events stu"}),f9=()=>v.jsx("div",{children:"Mentorship"}),d9=()=>v.jsx("div",{children:"Projects"}),m9=()=>v.jsx("div",{children:v.jsxs("div",{class:"my-skill-flow",children:[v.jsx("h3",{children:"My Skills:-"}),v.jsx("div",{class:"skill-list-flow",children:v.jsxs("ul",{children:[v.jsxs("li",{children:[v.jsx("p",{children:"React"}),v.jsx("button",{children:v.jsx("i",{class:"fa-solid fa-xmark"})})]}),v.jsxs("li",{children:[v.jsx("p",{children:"Video Editing"}),v.jsx("button",{children:v.jsx("i",{class:"fa-solid fa-xmark"})})]}),v.jsxs("li",{children:[v.jsx("p",{children:"JavaScript"}),v.jsx("button",{children:v.jsx("i",{class:"fa-solid fa-xmark"})})]}),v.jsxs("li",{children:[v.jsx("p",{children:"Project Management"}),v.jsx("button",{children:v.jsx("i",{class:"fa-solid fa-xmark"})})]}),v.jsxs("li",{children:[v.jsx("p",{children:"Graphic designing"}),v.jsx("button",{children:v.jsx("i",{class:"fa-solid fa-xmark"})})]}),v.jsxs("li",{children:[v.jsx("p",{children:"Digital Marketing"}),v.jsx("button",{children:v.jsx("i",{class:"fa-solid fa-xmark"})})]}),v.jsxs("li",{children:[v.jsx("p",{children:"Public Speaking"}),v.jsx("button",{children:v.jsx("i",{class:"fa-solid fa-xmark"})})]})]})}),v.jsxs("div",{class:"add-new-skill-flow",children:[v.jsx("input",{type:"text",placeholder:"Add Skills..."}),v.jsxs("button",{children:["Add",v.jsx("i",{class:"fa-solid fa-plus"})]})]})]})}),p9=()=>v.jsx("div",{children:v.jsxs("div",{class:"desired-skill-flow",children:[v.jsx("h3",{children:"Desired Skills:-"}),v.jsx("div",{class:"desired-skill-list-flow",children:v.jsxs("ul",{children:[v.jsxs("li",{children:[v.jsx("p",{children:"Gaming"}),v.jsx("button",{children:v.jsx("i",{class:"fa-solid fa-xmark"})})]}),v.jsxs("li",{children:[v.jsx("p",{children:"Photo Editing"}),v.jsx("button",{children:v.jsx("i",{class:"fa-solid fa-xmark"})})]}),v.jsxs("li",{children:[v.jsx("p",{children:"Database Management"}),v.jsx("button",{children:v.jsx("i",{class:"fa-solid fa-xmark"})})]}),v.jsxs("li",{children:[v.jsx("p",{children:"Server side scripting"}),v.jsx("button",{children:v.jsx("i",{class:"fa-solid fa-xmark"})})]}),v.jsxs("li",{children:[v.jsx("p",{children:"Enterpreneurship"}),v.jsx("button",{children:v.jsx("i",{class:"fa-solid fa-xmark"})})]})]})}),v.jsxs("div",{class:"add-new-desired-skill-flow",children:[v.jsx("input",{type:"text",placeholder:"Add Desired Skills..."}),v.jsxs("button",{children:["Add",v.jsx("i",{class:"fa-solid fa-plus"})]})]})]})}),g9=()=>v.jsxs("div",{children:[v.jsx("h3",{className:"skill-matches",children:"AI Skill Matches:"}),v.jsx("div",{className:"skill-profiles",children:v.jsxs("div",{className:"profile-cards",children:[v.jsxs("div",{className:"skill-profile-card",children:[v.jsx("img",{src:"../../../images/94c68ab8d5989f1b06a7cdef0a5dd89c.jpg",alt:"Profile"}),v.jsx("h3",{children:"Alice Johnson"}),v.jsx("p",{children:"Skilled in full-stack web development using HTML, CSS, JavaScript, Node.js, and MongoDB. Passionate about creating efficient, user-friendly, and innovative digital solutions."}),v.jsx("hr",{}),v.jsxs("div",{className:"user-skills",children:[v.jsx("h2",{children:"Current skills:-"}),v.jsxs("ul",{children:[v.jsx("li",{children:"React"}),v.jsx("li",{children:"Graphic Designing"}),v.jsx("li",{children:"Project Management"}),v.jsx("li",{children:"Video Editing"})]})]}),v.jsxs("div",{className:"user-desired-skills",children:[v.jsx("h2",{children:"Desired skills:-"}),v.jsxs("ul",{children:[v.jsx("li",{children:"Photo editing"}),v.jsx("li",{children:"Music mixing"}),v.jsx("li",{children:"Digital Marketing"}),v.jsx("li",{children:"Painting"})]})]}),v.jsxs("div",{className:"buttons-cont-skills",children:[v.jsxs("button",{className:"view-pro-skill-card-stu",children:[v.jsx("i",{className:"fa-solid fa-eye"})," View Profile"]}),v.jsxs("button",{className:"chat-skill-card",style:{backgroundColor:"black"},children:[v.jsx("i",{className:"fa-solid fa-comment"})," Chat"]})]})]}),v.jsxs("div",{className:"skill-profile-card",children:[v.jsx("img",{src:"../../../images/94c68ab8d5989f1b06a7cdef0a5dd89c.jpg",alt:"Profile"}),v.jsx("h3",{children:"Alice Johnson"}),v.jsx("p",{children:"Skilled in full-stack web development using HTML, CSS, JavaScript, Node.js, and MongoDB. Passionate about creating efficient, user-friendly, and innovative digital solutions."}),v.jsx("hr",{}),v.jsxs("div",{className:"user-skills",children:[v.jsx("h2",{children:"Current skills:-"}),v.jsxs("ul",{children:[v.jsx("li",{children:"React"}),v.jsx("li",{children:"Graphic Designing"}),v.jsx("li",{children:"Project Management"}),v.jsx("li",{children:"Video Editing"})]})]}),v.jsxs("div",{className:"user-desired-skills",children:[v.jsx("h2",{children:"Desired skills:-"}),v.jsxs("ul",{children:[v.jsx("li",{children:"Photo editing"}),v.jsx("li",{children:"Music mixing"}),v.jsx("li",{children:"Digital Marketing"}),v.jsx("li",{children:"Painting"})]})]}),v.jsxs("div",{className:"buttons-cont-skills",children:[v.jsxs("button",{className:"view-pro-skill-card-stu",children:[v.jsx("i",{className:"fa-solid fa-eye"})," View Profile"]}),v.jsxs("button",{className:"chat-skill-card",style:{backgroundColor:"black"},children:[v.jsx("i",{className:"fa-solid fa-comment"})," Chat"]})]})]}),v.jsxs("div",{className:"skill-profile-card",children:[v.jsx("img",{src:"../../../images/94c68ab8d5989f1b06a7cdef0a5dd89c.jpg",alt:"Profile"}),v.jsx("h3",{children:"Alice Johnson"}),v.jsx("p",{children:"Skilled in full-stack web development using HTML, CSS, JavaScript, Node.js, and MongoDB. Passionate about creating efficient, user-friendly, and innovative digital solutions."}),v.jsx("hr",{}),v.jsxs("div",{className:"user-skills",children:[v.jsx("h2",{children:"Current skills:-"}),v.jsxs("ul",{children:[v.jsx("li",{children:"React"}),v.jsx("li",{children:"Graphic Designing"}),v.jsx("li",{children:"Project Management"}),v.jsx("li",{children:"Video Editing"})]})]}),v.jsxs("div",{className:"user-desired-skills",children:[v.jsx("h2",{children:"Desired skills:-"}),v.jsxs("ul",{children:[v.jsx("li",{children:"Photo editing"}),v.jsx("li",{children:"Music mixing"}),v.jsx("li",{children:"Digital Marketing"}),v.jsx("li",{children:"Painting"})]})]}),v.jsxs("div",{className:"buttons-cont-skills",children:[v.jsxs("button",{children:[v.jsx("i",{className:"fa-solid fa-eye"}),"View Profile"]}),v.jsxs("button",{className:"chat-skill-card",style:{backgroundColor:"black"},children:[v.jsx("i",{className:"fa-solid fa-comment"})," Chat"]})]})]})]})})]}),_9=()=>v.jsx("div",{children:v.jsxs("div",{class:"skill-flow-top",children:[v.jsx(m9,{}),v.jsx(p9,{})]})}),y9=()=>v.jsx("div",{children:v.jsxs("div",{class:"recent-notifications",children:[v.jsx("h4",{children:"Recent Notifications"}),v.jsxs("div",{class:"notification-box",children:[v.jsxs("div",{class:"not-title",children:[v.jsx("i",{class:"fa-solid fa-bolt"}),"",v.jsx("p",{children:"New Skill Match Found with Alice Johnson "})," "]}),v.jsx("p",{class:"time-not",children:"2 hours ago"})]}),v.jsxs("div",{class:"notification-box",children:[v.jsxs("div",{class:"not-title",children:[v.jsx("i",{class:"fa-regular fa-comments"}),"",v.jsx("p",{children:"Bob Willaiams sent you a message "})," "]}),v.jsx("p",{class:"time-not",children:"1 day ago"})]}),v.jsxs("div",{class:"notification-box",children:[v.jsxs("div",{class:"not-title",children:[v.jsx("i",{class:"fa-solid fa-bolt"}),"",v.jsx("p",{children:"Your recent skills #react is in trending! "})," "]}),v.jsx("p",{class:"time-not",children:"5 hours ago"})]}),v.jsxs("div",{class:"notification-box",children:[v.jsxs("div",{class:"not-title",children:[v.jsx("i",{class:"fa-solid fa-bolt"}),"",v.jsx("p",{children:"New Skill Match Found with Alice Johnson "})," "]}),v.jsx("p",{class:"time-not",children:"2 hours ago"})]}),v.jsxs("div",{class:"notification-box",children:[v.jsxs("div",{class:"not-title",children:[v.jsx("i",{class:"fa-regular fa-comments"}),"",v.jsx("p",{children:"Bob Willaiams sent you a message "})," "]}),v.jsx("p",{class:"time-not",children:"1 day ago"})]}),v.jsxs("div",{class:"notification-box",children:[v.jsxs("div",{class:"not-title",children:[v.jsx("i",{class:"fa-solid fa-bolt"}),"",v.jsx("p",{children:"Your recent skills #react is in trending! "})," "]}),v.jsx("p",{class:"time-not",children:"5 hours ago"})]}),v.jsxs("div",{class:"notification-box",children:[v.jsxs("div",{class:"not-title",children:[v.jsx("i",{class:"fa-solid fa-bolt"}),"",v.jsx("p",{children:"New Skill Match Found with Alice Johnson "})," "]}),v.jsx("p",{class:"time-not",children:"2 hours ago"})]}),v.jsxs("div",{class:"notification-box",children:[v.jsxs("div",{class:"not-title",children:[v.jsx("i",{class:"fa-regular fa-comments"}),"",v.jsx("p",{children:"Bob Willaiams sent you a message "})," "]}),v.jsx("p",{class:"time-not",children:"1 day ago"})]}),v.jsxs("div",{class:"notification-box",children:[v.jsxs("div",{class:"not-title",children:[v.jsx("i",{class:"fa-solid fa-bolt"}),"",v.jsx("p",{children:"Your recent skills #react is in trending! "})," "]}),v.jsx("p",{class:"time-not",children:"5 hours ago"})]}),v.jsxs("div",{class:"notification-box",children:[v.jsxs("div",{class:"not-title",children:[v.jsx("i",{class:"fa-solid fa-bolt"}),"",v.jsx("p",{children:"New Skill Match Found with Alice Johnson "})," "]}),v.jsx("p",{class:"time-not",children:"2 hours ago"})]}),v.jsxs("div",{class:"notification-box",children:[v.jsxs("div",{class:"not-title",children:[v.jsx("i",{class:"fa-regular fa-comments"}),"",v.jsx("p",{children:"Bob Willaiams sent you a message "})," "]}),v.jsx("p",{class:"time-not",children:"1 day ago"})]}),v.jsxs("div",{class:"notification-box",children:[v.jsxs("div",{class:"not-title",children:[v.jsx("i",{class:"fa-solid fa-bolt"}),"",v.jsx("p",{children:"Your recent skills #react is in trending! "})," "]}),v.jsx("p",{class:"time-not",children:"5 hours ago"})]})]})}),v9=()=>v.jsxs(v.Fragment,{children:[v.jsx("h3",{children:"Skill Exchange Flow"}),v.jsx(_9,{}),v.jsxs("div",{className:"skill-ex-bottom",children:[v.jsx(g9,{}),v.jsx(y9,{})]})]}),E9=()=>{const[n,e]=P.useState(null),t=hy();return P.useEffect(()=>{const s=JSON.parse(localStorage.getItem("loggedInUserSkillExchange"));s&&(e(s.role),s.role==="student"?t(`/student-dashboard/${s.id}`):s.role==="mentor"?t(`/mentor-dashboard/${s.id}`):s.role==="organization"?t(`/organization-dashboard/${s.id}`):alert("user not exist"))},[]),v.jsx(v.Fragment,{children:v.jsxs(Zx,{children:[v.jsx(Qn,{path:"/",element:v.jsx(D3,{})}),v.jsx(Qn,{path:"/login",element:v.jsx(h1,{})}),v.jsx(Qn,{path:"/register",element:v.jsx(Q3,{})}),v.jsxs(Qn,{path:"/student-dashboard/:id/*",element:v.jsxs(Y0,{children:[" ",v.jsxs(W3,{children:[" ",v.jsx(o9,{})," "]})," "]}),children:[v.jsx(Qn,{path:"",element:v.jsx(a9,{})}),v.jsx(Qn,{path:"dashboard",element:v.jsx(c9,{})}),v.jsx(Qn,{path:"skill-exchange",element:v.jsx(v9,{})}),v.jsx(Qn,{path:"projects",element:v.jsx(d9,{})}),v.jsx(Qn,{path:"mentorship",element:v.jsx(f9,{})}),v.jsx(Qn,{path:"events",element:v.jsx(h9,{})})]}),v.jsx(Qn,{path:"/mentor-dashboard/:id/*",element:v.jsx(Y0,{children:v.jsx(l9,{})})}),v.jsx(Qn,{path:"/organization-dashboard/:id/*",element:v.jsx(u9,{})})]})})};rx.createRoot(document.getElementById("root")).render(v.jsx(R3,{children:v.jsx(SO,{children:v.jsx(E9,{})})}));
