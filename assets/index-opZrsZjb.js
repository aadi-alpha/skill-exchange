(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var jg={exports:{}},Xu={};var _b;function $N(){if(_b)return Xu;_b=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:c,ref:a!==void 0?a:null,props:l}}return Xu.Fragment=e,Xu.jsx=t,Xu.jsxs=t,Xu}var yb;function JN(){return yb||(yb=1,jg.exports=$N()),jg.exports}var T=JN(),zg={exports:{}},Ae={};var vb;function ZN(){if(vb)return Ae;vb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),b=Symbol.iterator;function A(M){return M===null||typeof M!="object"?null:(M=b&&M[b]||M["@@iterator"],typeof M=="function"?M:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,V={};function $(M,G,X){this.props=M,this.context=G,this.refs=V,this.updater=X||I}$.prototype.isReactComponent={},$.prototype.setState=function(M,G){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,G,"setState")},$.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function K(){}K.prototype=$.prototype;function ee(M,G,X){this.props=M,this.context=G,this.refs=V,this.updater=X||I}var ue=ee.prototype=new K;ue.constructor=ee,j(ue,$.prototype),ue.isPureReactComponent=!0;var _e=Array.isArray;function Se(){}var x={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function N(M,G,X){var le=X.ref;return{$$typeof:n,type:M,key:G,ref:le!==void 0?le:null,props:X}}function U(M,G){return N(M.type,G,M.props)}function P(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function B(M){var G={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(X){return G[X]})}var O=/\/+/g;function Ze(M,G){return typeof M=="object"&&M!==null&&M.key!=null?B(""+M.key):G.toString(36)}function Oe(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(Se,Se):(M.status="pending",M.then(function(G){M.status==="pending"&&(M.status="fulfilled",M.value=G)},function(G){M.status==="pending"&&(M.status="rejected",M.reason=G)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function J(M,G,X,le,ye){var ve=typeof M;(ve==="undefined"||ve==="boolean")&&(M=null);var De=!1;if(M===null)De=!0;else switch(ve){case"bigint":case"string":case"number":De=!0;break;case"object":switch(M.$$typeof){case n:case e:De=!0;break;case y:return De=M._init,J(De(M._payload),G,X,le,ye)}}if(De)return ye=ye(M),De=le===""?"."+Ze(M,0):le,_e(ye)?(X="",De!=null&&(X=De.replace(O,"$&/")+"/"),J(ye,G,X,"",function(vi){return vi})):ye!=null&&(P(ye)&&(ye=U(ye,X+(ye.key==null||M&&M.key===ye.key?"":(""+ye.key).replace(O,"$&/")+"/")+De)),G.push(ye)),1;De=0;var ut=le===""?".":le+":";if(_e(M))for(var Xe=0;Xe<M.length;Xe++)le=M[Xe],ve=ut+Ze(le,Xe),De+=J(le,G,X,ve,ye);else if(Xe=A(M),typeof Xe=="function")for(M=Xe.call(M),Xe=0;!(le=M.next()).done;)le=le.value,ve=ut+Ze(le,Xe++),De+=J(le,G,X,ve,ye);else if(ve==="object"){if(typeof M.then=="function")return J(Oe(M),G,X,le,ye);throw G=String(M),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return De}function se(M,G,X){if(M==null)return M;var le=[],ye=0;return J(M,le,"","",function(ve){return G.call(X,ve,ye++)}),le}function he(M){if(M._status===-1){var G=M._result;G=G(),G.then(function(X){(M._status===0||M._status===-1)&&(M._status=1,M._result=X)},function(X){(M._status===0||M._status===-1)&&(M._status=2,M._result=X)}),M._status===-1&&(M._status=0,M._result=G)}if(M._status===1)return M._result.default;throw M._result}var ke=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Pe={map:se,forEach:function(M,G,X){se(M,function(){G.apply(this,arguments)},X)},count:function(M){var G=0;return se(M,function(){G++}),G},toArray:function(M){return se(M,function(G){return G})||[]},only:function(M){if(!P(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Ae.Activity=v,Ae.Children=Pe,Ae.Component=$,Ae.Fragment=t,Ae.Profiler=a,Ae.PureComponent=ee,Ae.StrictMode=i,Ae.Suspense=m,Ae.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,Ae.__COMPILER_RUNTIME={__proto__:null,c:function(M){return x.H.useMemoCache(M)}},Ae.cache=function(M){return function(){return M.apply(null,arguments)}},Ae.cacheSignal=function(){return null},Ae.cloneElement=function(M,G,X){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var le=j({},M.props),ye=M.key;if(G!=null)for(ve in G.key!==void 0&&(ye=""+G.key),G)!R.call(G,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&G.ref===void 0||(le[ve]=G[ve]);var ve=arguments.length-2;if(ve===1)le.children=X;else if(1<ve){for(var De=Array(ve),ut=0;ut<ve;ut++)De[ut]=arguments[ut+2];le.children=De}return N(M.type,ye,le)},Ae.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},Ae.createElement=function(M,G,X){var le,ye={},ve=null;if(G!=null)for(le in G.key!==void 0&&(ve=""+G.key),G)R.call(G,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(ye[le]=G[le]);var De=arguments.length-2;if(De===1)ye.children=X;else if(1<De){for(var ut=Array(De),Xe=0;Xe<De;Xe++)ut[Xe]=arguments[Xe+2];ye.children=ut}if(M&&M.defaultProps)for(le in De=M.defaultProps,De)ye[le]===void 0&&(ye[le]=De[le]);return N(M,ve,ye)},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(M){return{$$typeof:f,render:M}},Ae.isValidElement=P,Ae.lazy=function(M){return{$$typeof:y,_payload:{_status:-1,_result:M},_init:he}},Ae.memo=function(M,G){return{$$typeof:g,type:M,compare:G===void 0?null:G}},Ae.startTransition=function(M){var G=x.T,X={};x.T=X;try{var le=M(),ye=x.S;ye!==null&&ye(X,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(Se,ke)}catch(ve){ke(ve)}finally{G!==null&&X.types!==null&&(G.types=X.types),x.T=G}},Ae.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},Ae.use=function(M){return x.H.use(M)},Ae.useActionState=function(M,G,X){return x.H.useActionState(M,G,X)},Ae.useCallback=function(M,G){return x.H.useCallback(M,G)},Ae.useContext=function(M){return x.H.useContext(M)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(M,G){return x.H.useDeferredValue(M,G)},Ae.useEffect=function(M,G){return x.H.useEffect(M,G)},Ae.useEffectEvent=function(M){return x.H.useEffectEvent(M)},Ae.useId=function(){return x.H.useId()},Ae.useImperativeHandle=function(M,G,X){return x.H.useImperativeHandle(M,G,X)},Ae.useInsertionEffect=function(M,G){return x.H.useInsertionEffect(M,G)},Ae.useLayoutEffect=function(M,G){return x.H.useLayoutEffect(M,G)},Ae.useMemo=function(M,G){return x.H.useMemo(M,G)},Ae.useOptimistic=function(M,G){return x.H.useOptimistic(M,G)},Ae.useReducer=function(M,G,X){return x.H.useReducer(M,G,X)},Ae.useRef=function(M){return x.H.useRef(M)},Ae.useState=function(M){return x.H.useState(M)},Ae.useSyncExternalStore=function(M,G,X){return x.H.useSyncExternalStore(M,G,X)},Ae.useTransition=function(){return x.H.useTransition()},Ae.version="19.2.0",Ae}var Eb;function ly(){return Eb||(Eb=1,zg.exports=ZN()),zg.exports}var k=ly(),Bg={exports:{}},$u={},Fg={exports:{}},Hg={};var Tb;function ex(){return Tb||(Tb=1,(function(n){function e(J,se){var he=J.length;J.push(se);e:for(;0<he;){var ke=he-1>>>1,Pe=J[ke];if(0<a(Pe,se))J[ke]=se,J[he]=Pe,he=ke;else break e}}function t(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var se=J[0],he=J.pop();if(he!==se){J[0]=he;e:for(var ke=0,Pe=J.length,M=Pe>>>1;ke<M;){var G=2*(ke+1)-1,X=J[G],le=G+1,ye=J[le];if(0>a(X,he))le<Pe&&0>a(ye,X)?(J[ke]=ye,J[le]=he,ke=le):(J[ke]=X,J[G]=he,ke=G);else if(le<Pe&&0>a(ye,he))J[ke]=ye,J[le]=he,ke=le;else break e}}return se}function a(J,se){var he=J.sortIndex-se.sortIndex;return he!==0?he:J.id-se.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var m=[],g=[],y=1,v=null,b=3,A=!1,I=!1,j=!1,V=!1,$=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;function ue(J){for(var se=t(g);se!==null;){if(se.callback===null)i(g);else if(se.startTime<=J)i(g),se.sortIndex=se.expirationTime,e(m,se);else break;se=t(g)}}function _e(J){if(j=!1,ue(J),!I)if(t(m)!==null)I=!0,Se||(Se=!0,B());else{var se=t(g);se!==null&&Oe(_e,se.startTime-J)}}var Se=!1,x=-1,R=5,N=-1;function U(){return V?!0:!(n.unstable_now()-N<R)}function P(){if(V=!1,Se){var J=n.unstable_now();N=J;var se=!0;try{e:{I=!1,j&&(j=!1,K(x),x=-1),A=!0;var he=b;try{t:{for(ue(J),v=t(m);v!==null&&!(v.expirationTime>J&&U());){var ke=v.callback;if(typeof ke=="function"){v.callback=null,b=v.priorityLevel;var Pe=ke(v.expirationTime<=J);if(J=n.unstable_now(),typeof Pe=="function"){v.callback=Pe,ue(J),se=!0;break t}v===t(m)&&i(m),ue(J)}else i(m);v=t(m)}if(v!==null)se=!0;else{var M=t(g);M!==null&&Oe(_e,M.startTime-J),se=!1}}break e}finally{v=null,b=he,A=!1}se=void 0}}finally{se?B():Se=!1}}}var B;if(typeof ee=="function")B=function(){ee(P)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,Ze=O.port2;O.port1.onmessage=P,B=function(){Ze.postMessage(null)}}else B=function(){$(P,0)};function Oe(J,se){x=$(function(){J(n.unstable_now())},se)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(J){switch(b){case 1:case 2:case 3:var se=3;break;default:se=b}var he=b;b=se;try{return J()}finally{b=he}},n.unstable_requestPaint=function(){V=!0},n.unstable_runWithPriority=function(J,se){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var he=b;b=J;try{return se()}finally{b=he}},n.unstable_scheduleCallback=function(J,se,he){var ke=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?ke+he:ke):he=ke,J){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=he+Pe,J={id:y++,callback:se,priorityLevel:J,startTime:he,expirationTime:Pe,sortIndex:-1},he>ke?(J.sortIndex=he,e(g,J),t(m)===null&&J===t(g)&&(j?(K(x),x=-1):j=!0,Oe(_e,he-ke))):(J.sortIndex=Pe,e(m,J),I||A||(I=!0,Se||(Se=!0,B()))),J},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(J){var se=b;return function(){var he=b;b=se;try{return J.apply(this,arguments)}finally{b=he}}}})(Hg)),Hg}var Sb;function tx(){return Sb||(Sb=1,Fg.exports=ex()),Fg.exports}var qg={exports:{}},yn={};var bb;function nx(){if(bb)return yn;bb=1;var n=ly();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:m,containerInfo:g,implementation:y}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,yn.createPortal=function(m,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,y)},yn.flushSync=function(m){var g=c.T,y=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=g,i.p=y,i.d.f()}},yn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(m,g))},yn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},yn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var y=g.as,v=f(y,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,A=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?i.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:A}):y==="script"&&i.d.X(m,{crossOrigin:v,integrity:b,fetchPriority:A,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},yn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=f(g.as,g.crossOrigin);i.d.M(m,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(m)},yn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,v=f(y,g.crossOrigin);i.d.L(m,y,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},yn.preloadModule=function(m,g){if(typeof m=="string")if(g){var y=f(g.as,g.crossOrigin);i.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(m)},yn.requestFormReset=function(m){i.d.r(m)},yn.unstable_batchedUpdates=function(m,g){return m(g)},yn.useFormState=function(m,g,y){return c.H.useFormState(m,g,y)},yn.useFormStatus=function(){return c.H.useHostTransitionStatus()},yn.version="19.2.0",yn}var wb;function ix(){if(wb)return qg.exports;wb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),qg.exports=nx(),qg.exports}var Cb;function sx(){if(Cb)return $u;Cb=1;var n=tx(),e=ly(),t=ix();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var r=s,o=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(o=r.return),s=r.return;while(s)}return r.tag===3?o:null}function c(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function f(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function m(s){if(l(s)!==s)throw Error(i(188))}function g(s){var r=s.alternate;if(!r){if(r=l(s),r===null)throw Error(i(188));return r!==s?null:s}for(var o=s,u=r;;){var d=o.return;if(d===null)break;var p=d.alternate;if(p===null){if(u=d.return,u!==null){o=u;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===o)return m(d),s;if(p===u)return m(d),r;p=p.sibling}throw Error(i(188))}if(o.return!==u.return)o=d,u=p;else{for(var E=!1,w=d.child;w;){if(w===o){E=!0,o=d,u=p;break}if(w===u){E=!0,u=d,o=p;break}w=w.sibling}if(!E){for(w=p.child;w;){if(w===o){E=!0,o=p,u=d;break}if(w===u){E=!0,u=p,o=d;break}w=w.sibling}if(!E)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?s:r}function y(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=y(s),r!==null)return r;s=s.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),ee=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),_e=Symbol.for("react.suspense"),Se=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function B(s){return s===null||typeof s!="object"?null:(s=P&&s[P]||s["@@iterator"],typeof s=="function"?s:null)}var O=Symbol.for("react.client.reference");function Ze(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===O?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case j:return"Fragment";case $:return"Profiler";case V:return"StrictMode";case _e:return"Suspense";case Se:return"SuspenseList";case N:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case I:return"Portal";case ee:return s.displayName||"Context";case K:return(s._context.displayName||"Context")+".Consumer";case ue:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case x:return r=s.displayName||null,r!==null?r:Ze(s.type)||"Memo";case R:r=s._payload,s=s._init;try{return Ze(s(r))}catch{}}return null}var Oe=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},ke=[],Pe=-1;function M(s){return{current:s}}function G(s){0>Pe||(s.current=ke[Pe],ke[Pe]=null,Pe--)}function X(s,r){Pe++,ke[Pe]=s.current,s.current=r}var le=M(null),ye=M(null),ve=M(null),De=M(null);function ut(s,r){switch(X(ve,r),X(ye,s),X(le,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?zS(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=zS(r),s=BS(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}G(le),X(le,s)}function Xe(){G(le),G(ye),G(ve)}function vi(s){s.memoizedState!==null&&X(De,s);var r=le.current,o=BS(r,s.type);r!==o&&(X(ye,s),X(le,o))}function Zn(s){ye.current===s&&(G(le),G(ye)),De.current===s&&(G(De),Yu._currentValue=he)}var zi,go;function Bi(s){if(zi===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);zi=r&&r[1]||"",go=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zi+s+go}var Yl=!1;function ga(s,r){if(!s||Yl)return"";Yl=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(W){var Y=W}Reflect.construct(s,[],ne)}else{try{ne.call()}catch(W){Y=W}s.call(ne.prototype)}}else{try{throw Error()}catch(W){Y=W}(ne=s())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(W){if(W&&Y&&typeof W.stack=="string")return[W.stack,Y.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),E=p[0],w=p[1];if(E&&w){var D=E.split(`
`),q=w.split(`
`);for(d=u=0;u<D.length&&!D[u].includes("DetermineComponentFrameRoot");)u++;for(;d<q.length&&!q[d].includes("DetermineComponentFrameRoot");)d++;if(u===D.length||d===q.length)for(u=D.length-1,d=q.length-1;1<=u&&0<=d&&D[u]!==q[d];)d--;for(;1<=u&&0<=d;u--,d--)if(D[u]!==q[d]){if(u!==1||d!==1)do if(u--,d--,0>d||D[u]!==q[d]){var Z=`
`+D[u].replace(" at new "," at ");return s.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",s.displayName)),Z}while(1<=u&&0<=d);break}}}finally{Yl=!1,Error.prepareStackTrace=o}return(o=s?s.displayName||s.name:"")?Bi(o):""}function Kl(s,r){switch(s.tag){case 26:case 27:case 5:return Bi(s.type);case 16:return Bi("Lazy");case 13:return s.child!==r&&r!==null?Bi("Suspense Fallback"):Bi("Suspense");case 19:return Bi("SuspenseList");case 0:case 15:return ga(s.type,!1);case 11:return ga(s.type.render,!1);case 1:return ga(s.type,!0);case 31:return Bi("Activity");default:return""}}function Ql(s){try{var r="",o=null;do r+=Kl(s,o),o=s,s=s.return;while(s);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Dt=Object.prototype.hasOwnProperty,Kt=n.unstable_scheduleCallback,rr=n.unstable_cancelCallback,Bm=n.unstable_shouldYield,_h=n.unstable_requestPaint,bn=n.unstable_now,_a=n.unstable_getCurrentPriorityLevel,Wl=n.unstable_ImmediatePriority,Xl=n.unstable_UserBlockingPriority,ar=n.unstable_NormalPriority,Fm=n.unstable_LowPriority,yh=n.unstable_IdlePriority,vh=n.log,Eh=n.unstable_setDisableYieldValue,Ei=null,on=null;function ei(s){if(typeof vh=="function"&&Eh(s),on&&typeof on.setStrictMode=="function")try{on.setStrictMode(Ei,s)}catch{}}var Rt=Math.clz32?Math.clz32:Sh,Th=Math.log,_o=Math.LN2;function Sh(s){return s>>>=0,s===0?32:31-(Th(s)/_o|0)|0}var Fi=256,ya=262144,kt=4194304;function Hi(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function qi(s,r,o){var u=s.pendingLanes;if(u===0)return 0;var d=0,p=s.suspendedLanes,E=s.pingedLanes;s=s.warmLanes;var w=u&134217727;return w!==0?(u=w&~p,u!==0?d=Hi(u):(E&=w,E!==0?d=Hi(E):o||(o=w&~s,o!==0&&(d=Hi(o))))):(w=u&~p,w!==0?d=Hi(w):E!==0?d=Hi(E):o||(o=u&~s,o!==0&&(d=Hi(o)))),d===0?0:r!==0&&r!==d&&(r&p)===0&&(p=d&-d,o=r&-r,p>=o||p===32&&(o&4194048)!==0)?r:d}function Ti(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function Hm(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bh(){var s=kt;return kt<<=1,(kt&62914560)===0&&(kt=4194304),s}function Gi(s){for(var r=[],o=0;31>o;o++)r.push(s);return r}function va(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function qm(s,r,o,u,d,p){var E=s.pendingLanes;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=o,s.entangledLanes&=o,s.errorRecoveryDisabledLanes&=o,s.shellSuspendCounter=0;var w=s.entanglements,D=s.expirationTimes,q=s.hiddenUpdates;for(o=E&~o;0<o;){var Z=31-Rt(o),ne=1<<Z;w[Z]=0,D[Z]=-1;var Y=q[Z];if(Y!==null)for(q[Z]=null,Z=0;Z<Y.length;Z++){var W=Y[Z];W!==null&&(W.lane&=-536870913)}o&=~ne}u!==0&&Ea(s,u,0),p!==0&&d===0&&s.tag!==0&&(s.suspendedLanes|=p&~(E&~r))}function Ea(s,r,o){s.pendingLanes|=r,s.suspendedLanes&=~r;var u=31-Rt(r);s.entangledLanes|=r,s.entanglements[u]=s.entanglements[u]|1073741824|o&261930}function $l(s,r){var o=s.entangledLanes|=r;for(s=s.entanglements;o;){var u=31-Rt(o),d=1<<u;d&r|s[u]&r&&(s[u]|=r),o&=~d}}function Jl(s,r){var o=r&-r;return o=(o&42)!==0?1:Ta(o),(o&(s.suspendedLanes|r))!==0?0:o}function Ta(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ts(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function wh(){var s=se.p;return s!==0?s:(s=window.event,s===void 0?32:cb(s.type))}function Si(s,r){var o=se.p;try{return se.p=s,r()}finally{se.p=o}}var bi=Math.random().toString(36).slice(2),Pt="__reactFiber$"+bi,Zt="__reactProps$"+bi,Yi="__reactContainer$"+bi,yo="__reactEvents$"+bi,Gm="__reactListeners$"+bi,Ch="__reactHandles$"+bi,Ah="__reactResources$"+bi,Ki="__reactMarker$"+bi;function vo(s){delete s[Pt],delete s[Zt],delete s[yo],delete s[Gm],delete s[Ch]}function Qi(s){var r=s[Pt];if(r)return r;for(var o=s.parentNode;o;){if(r=o[Yi]||o[Pt]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(s=QS(s);s!==null;){if(o=s[Pt])return o;s=QS(s)}return r}s=o,o=s.parentNode}return null}function ti(s){if(s=s[Pt]||s[Yi]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function jn(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function Wi(s){var r=s[Ah];return r||(r=s[Ah]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Mt(s){s[Ki]=!0}var Zl=new Set,eu={};function Xi(s,r){$i(s,r),$i(s+"Capture",r)}function $i(s,r){for(eu[s]=r,s=0;s<r.length;s++)Zl.add(r[s])}var tu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nu={},iu={};function Rh(s){return Dt.call(iu,s)?!0:Dt.call(nu,s)?!1:tu.test(s)?iu[s]=!0:(nu[s]=!0,!1)}function Eo(s,r,o){if(Rh(r))if(o===null)s.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+o)}}function zn(s,r,o){if(o===null)s.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+o)}}function Lt(s,r,o,u){if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttributeNS(r,o,""+u)}}function en(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function or(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function su(s,r,o){var u=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var d=u.get,p=u.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return d.call(this)},set:function(E){o=""+E,p.call(this,E)}}),Object.defineProperty(s,r,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(E){o=""+E},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function tt(s){if(!s._valueTracker){var r=or(s)?"checked":"value";s._valueTracker=su(s,r,""+s[r])}}function Sa(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return s&&(u=or(s)?s.checked?"true":"false":s.value),s=u,s!==o?(r.setValue(s),!0):!1}function Ji(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var ba=/[\n"\\]/g;function Nn(s){return s.replace(ba,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function To(s,r,o,u,d,p,E,w){s.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?s.type=E:s.removeAttribute("type"),r!=null?E==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+en(r)):s.value!==""+en(r)&&(s.value=""+en(r)):E!=="submit"&&E!=="reset"||s.removeAttribute("value"),r!=null?ru(s,E,en(r)):o!=null?ru(s,E,en(o)):u!=null&&s.removeAttribute("value"),d==null&&p!=null&&(s.defaultChecked=!!p),d!=null&&(s.checked=d&&typeof d!="function"&&typeof d!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.name=""+en(w):s.removeAttribute("name")}function Ih(s,r,o,u,d,p,E,w){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(s.type=p),r!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||r!=null)){tt(s);return}o=o!=null?""+en(o):"",r=r!=null?""+en(r):o,w||r===s.value||(s.value=r),s.defaultValue=r}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=w?s.checked:!!u,s.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.name=E),tt(s)}function ru(s,r,o){r==="number"&&Ji(s.ownerDocument)===s||s.defaultValue===""+o||(s.defaultValue=""+o)}function lr(s,r,o,u){if(s=s.options,r){r={};for(var d=0;d<o.length;d++)r["$"+o[d]]=!0;for(o=0;o<s.length;o++)d=r.hasOwnProperty("$"+s[o].value),s[o].selected!==d&&(s[o].selected=d),d&&u&&(s[o].defaultSelected=!0)}else{for(o=""+en(o),r=null,d=0;d<s.length;d++){if(s[d].value===o){s[d].selected=!0,u&&(s[d].defaultSelected=!0);return}r!==null||s[d].disabled||(r=s[d])}r!==null&&(r.selected=!0)}}function Nh(s,r,o){if(r!=null&&(r=""+en(r),r!==s.value&&(s.value=r),o==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=o!=null?""+en(o):""}function ur(s,r,o,u){if(r==null){if(u!=null){if(o!=null)throw Error(i(92));if(Oe(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),r=o}o=en(r),s.defaultValue=o,u=s.textContent,u===o&&u!==""&&u!==null&&(s.value=u),tt(s)}function xn(s,r){if(r){var o=s.firstChild;if(o&&o===s.lastChild&&o.nodeType===3){o.nodeValue=r;return}}s.textContent=r}var xh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function au(s,r,o){var u=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":u?s.setProperty(r,o):typeof o!="number"||o===0||xh.has(r)?r==="float"?s.cssFloat=o:s[r]=(""+o).trim():s[r]=o+"px"}function ou(s,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var d in r)u=r[d],r.hasOwnProperty(d)&&o[d]!==u&&au(s,d,u)}else for(var p in r)r.hasOwnProperty(p)&&au(s,p,r[p])}function So(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bo(s){return cr.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function wi(){}var lu=null;function ni(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var hr=null,Zi=null;function wa(s){var r=ti(s);if(r&&(s=r.stateNode)){var o=s[Zt]||null;e:switch(s=r.stateNode,r.type){case"input":if(To(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=s;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Nn(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==s&&u.form===s.form){var d=u[Zt]||null;if(!d)throw Error(i(90));To(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(r=0;r<o.length;r++)u=o[r],u.form===s.form&&Sa(u)}break e;case"textarea":Nh(s,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&lr(s,!!o.multiple,r,!1)}}}var wo=!1;function fr(s,r,o){if(wo)return s(r,o);wo=!0;try{var u=s(r);return u}finally{if(wo=!1,(hr!==null||Zi!==null)&&(Cf(),hr&&(r=hr,s=Zi,Zi=hr=null,wa(r),s)))for(r=0;r<s.length;r++)wa(s[r])}}function Ci(s,r){var o=s.stateNode;if(o===null)return null;var u=o[Zt]||null;if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ca=!1;if(ii)try{var st={};Object.defineProperty(st,"passive",{get:function(){Ca=!0}}),window.addEventListener("test",st,st),window.removeEventListener("test",st,st)}catch{Ca=!1}var es=null,uu=null,Aa=null;function cu(){if(Aa)return Aa;var s,r=uu,o=r.length,u,d="value"in es?es.value:es.textContent,p=d.length;for(s=0;s<o&&r[s]===d[s];s++);var E=o-s;for(u=1;u<=E&&r[o-u]===d[p-u];u++);return Aa=d.slice(s,1<u?1-u:void 0)}function Ra(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function Ss(){return!0}function Ai(){return!1}function ln(s){function r(o,u,d,p,E){this._reactName=o,this._targetInst=d,this.type=u,this.nativeEvent=p,this.target=E,this.currentTarget=null;for(var w in s)s.hasOwnProperty(w)&&(o=s[w],this[w]=o?o(p):p[w]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Ss:Ai,this.isPropagationStopped=Ai,this}return v(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ss)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ss)},persist:function(){},isPersistent:Ss}),r}var bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ts=ln(bs),dr=v({},bs,{view:0,detail:0}),hu=ln(dr),mr,Co,ns,Ao=v({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ns&&(ns&&s.type==="mousemove"?(mr=s.screenX-ns.screenX,Co=s.screenY-ns.screenY):Co=mr=0,ns=s),mr)},movementY:function(s){return"movementY"in s?s.movementY:Co}}),fu=ln(Ao),Ia=v({},Ao,{dataTransfer:0}),Dh=ln(Ia),kh=v({},dr,{relatedTarget:0}),Na=ln(kh),du=v({},bs,{animationName:0,elapsedTime:0,pseudoElement:0}),Ph=ln(du),Ro=v({},bs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Mh=ln(Ro),Lh=v({},bs,{data:0}),is=ln(Lh),Vh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zh(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=jh[s])?!!r[s]:!1}function pr(){return zh}var wn=v({},dr,{key:function(s){if(s.key){var r=Vh[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=Ra(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Uh[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pr,charCode:function(s){return s.type==="keypress"?Ra(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ra(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Bh=ln(wn),Fh=v({},Ao,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ws=ln(Fh),h=v({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pr}),_=ln(h),S=v({},bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=ln(S),F=v({},Ao,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=ln(F),oe=v({},bs,{newState:0,oldState:0}),Ie=ln(oe),It=[9,13,27,32],$e=ii&&"CompositionEvent"in window,_t=null;ii&&"documentMode"in document&&(_t=document.documentMode);var si=ii&&"TextEvent"in window&&!_t,ss=ii&&(!$e||_t&&8<_t&&11>=_t),Ri=" ",Ii=!1;function xa(s,r){switch(s){case"keyup":return It.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Io(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var No=!1;function T1(s,r){switch(s){case"compositionend":return Io(r);case"keypress":return r.which!==32?null:(Ii=!0,Ri);case"textInput":return s=r.data,s===Ri&&Ii?null:s;default:return null}}function S1(s,r){if(No)return s==="compositionend"||!$e&&xa(s,r)?(s=cu(),Aa=uu=es=null,No=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return ss&&r.locale!=="ko"?null:r.data;default:return null}}var b1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $v(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!b1[s.type]:r==="textarea"}function Jv(s,r,o,u){hr?Zi?Zi.push(u):Zi=[u]:hr=u,r=Df(r,"onChange"),0<r.length&&(o=new ts("onChange","change",null,o,u),s.push({event:o,listeners:r}))}var mu=null,pu=null;function w1(s){PS(s,0)}function Hh(s){var r=jn(s);if(Sa(r))return s}function Zv(s,r){if(s==="change")return r}var eE=!1;if(ii){var Ym;if(ii){var Km="oninput"in document;if(!Km){var tE=document.createElement("div");tE.setAttribute("oninput","return;"),Km=typeof tE.oninput=="function"}Ym=Km}else Ym=!1;eE=Ym&&(!document.documentMode||9<document.documentMode)}function nE(){mu&&(mu.detachEvent("onpropertychange",iE),pu=mu=null)}function iE(s){if(s.propertyName==="value"&&Hh(pu)){var r=[];Jv(r,pu,s,ni(s)),fr(w1,r)}}function C1(s,r,o){s==="focusin"?(nE(),mu=r,pu=o,mu.attachEvent("onpropertychange",iE)):s==="focusout"&&nE()}function A1(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Hh(pu)}function R1(s,r){if(s==="click")return Hh(r)}function I1(s,r){if(s==="input"||s==="change")return Hh(r)}function N1(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var Bn=typeof Object.is=="function"?Object.is:N1;function gu(s,r){if(Bn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var o=Object.keys(s),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var d=o[u];if(!Dt.call(r,d)||!Bn(s[d],r[d]))return!1}return!0}function sE(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function rE(s,r){var o=sE(s);s=0;for(var u;o;){if(o.nodeType===3){if(u=s+o.textContent.length,s<=r&&u>=r)return{node:o,offset:r-s};s=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=sE(o)}}function aE(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?aE(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function oE(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=Ji(s.document);r instanceof s.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)s=r.contentWindow;else break;r=Ji(s.document)}return r}function Qm(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var x1=ii&&"documentMode"in document&&11>=document.documentMode,xo=null,Wm=null,_u=null,Xm=!1;function lE(s,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Xm||xo==null||xo!==Ji(u)||(u=xo,"selectionStart"in u&&Qm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),_u&&gu(_u,u)||(_u=u,u=Df(Wm,"onSelect"),0<u.length&&(r=new ts("onSelect","select",null,r,o),s.push({event:r,listeners:u}),r.target=xo)))}function Oa(s,r){var o={};return o[s.toLowerCase()]=r.toLowerCase(),o["Webkit"+s]="webkit"+r,o["Moz"+s]="moz"+r,o}var Oo={animationend:Oa("Animation","AnimationEnd"),animationiteration:Oa("Animation","AnimationIteration"),animationstart:Oa("Animation","AnimationStart"),transitionrun:Oa("Transition","TransitionRun"),transitionstart:Oa("Transition","TransitionStart"),transitioncancel:Oa("Transition","TransitionCancel"),transitionend:Oa("Transition","TransitionEnd")},$m={},uE={};ii&&(uE=document.createElement("div").style,"AnimationEvent"in window||(delete Oo.animationend.animation,delete Oo.animationiteration.animation,delete Oo.animationstart.animation),"TransitionEvent"in window||delete Oo.transitionend.transition);function Da(s){if($m[s])return $m[s];if(!Oo[s])return s;var r=Oo[s],o;for(o in r)if(r.hasOwnProperty(o)&&o in uE)return $m[s]=r[o];return s}var cE=Da("animationend"),hE=Da("animationiteration"),fE=Da("animationstart"),O1=Da("transitionrun"),D1=Da("transitionstart"),k1=Da("transitioncancel"),dE=Da("transitionend"),mE=new Map,Jm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jm.push("scrollEnd");function Ni(s,r){mE.set(s,r),Xi(r,[s])}var qh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ri=[],Do=0,Zm=0;function Gh(){for(var s=Do,r=Zm=Do=0;r<s;){var o=ri[r];ri[r++]=null;var u=ri[r];ri[r++]=null;var d=ri[r];ri[r++]=null;var p=ri[r];if(ri[r++]=null,u!==null&&d!==null){var E=u.pending;E===null?d.next=d:(d.next=E.next,E.next=d),u.pending=d}p!==0&&pE(o,d,p)}}function Yh(s,r,o,u){ri[Do++]=s,ri[Do++]=r,ri[Do++]=o,ri[Do++]=u,Zm|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function ep(s,r,o,u){return Yh(s,r,o,u),Kh(s)}function ka(s,r){return Yh(s,null,null,r),Kh(s)}function pE(s,r,o){s.lanes|=o;var u=s.alternate;u!==null&&(u.lanes|=o);for(var d=!1,p=s.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(s=p.stateNode,s===null||s._visibility&1||(d=!0)),s=p,p=p.return;return s.tag===3?(p=s.stateNode,d&&r!==null&&(d=31-Rt(o),s=p.hiddenUpdates,u=s[d],u===null?s[d]=[r]:u.push(r),r.lane=o|536870912),p):null}function Kh(s){if(50<ju)throw ju=0,ug=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var ko={};function P1(s,r,o,u){this.tag=s,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(s,r,o,u){return new P1(s,r,o,u)}function tp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Cs(s,r){var o=s.alternate;return o===null?(o=Fn(s.tag,r,s.key,s.mode),o.elementType=s.elementType,o.type=s.type,o.stateNode=s.stateNode,o.alternate=s,s.alternate=o):(o.pendingProps=r,o.type=s.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=s.flags&65011712,o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,r=s.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=s.sibling,o.index=s.index,o.ref=s.ref,o.refCleanup=s.refCleanup,o}function gE(s,r){s.flags&=65011714;var o=s.alternate;return o===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,r=o.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function Qh(s,r,o,u,d,p){var E=0;if(u=s,typeof s=="function")tp(s)&&(E=1);else if(typeof s=="string")E=jN(s,o,le.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case N:return s=Fn(31,o,r,d),s.elementType=N,s.lanes=p,s;case j:return Pa(o.children,d,p,r);case V:E=8,d|=24;break;case $:return s=Fn(12,o,r,d|2),s.elementType=$,s.lanes=p,s;case _e:return s=Fn(13,o,r,d),s.elementType=_e,s.lanes=p,s;case Se:return s=Fn(19,o,r,d),s.elementType=Se,s.lanes=p,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case ee:E=10;break e;case K:E=9;break e;case ue:E=11;break e;case x:E=14;break e;case R:E=16,u=null;break e}E=29,o=Error(i(130,s===null?"null":typeof s,"")),u=null}return r=Fn(E,o,r,d),r.elementType=s,r.type=u,r.lanes=p,r}function Pa(s,r,o,u){return s=Fn(7,s,u,r),s.lanes=o,s}function np(s,r,o){return s=Fn(6,s,null,r),s.lanes=o,s}function _E(s){var r=Fn(18,null,null,0);return r.stateNode=s,r}function ip(s,r,o){return r=Fn(4,s.children!==null?s.children:[],s.key,r),r.lanes=o,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var yE=new WeakMap;function ai(s,r){if(typeof s=="object"&&s!==null){var o=yE.get(s);return o!==void 0?o:(r={value:s,source:r,stack:Ql(r)},yE.set(s,r),r)}return{value:s,source:r,stack:Ql(r)}}var Po=[],Mo=0,Wh=null,yu=0,oi=[],li=0,gr=null,rs=1,as="";function As(s,r){Po[Mo++]=yu,Po[Mo++]=Wh,Wh=s,yu=r}function vE(s,r,o){oi[li++]=rs,oi[li++]=as,oi[li++]=gr,gr=s;var u=rs;s=as;var d=32-Rt(u)-1;u&=~(1<<d),o+=1;var p=32-Rt(r)+d;if(30<p){var E=d-d%5;p=(u&(1<<E)-1).toString(32),u>>=E,d-=E,rs=1<<32-Rt(r)+d|o<<d|u,as=p+s}else rs=1<<p|o<<d|u,as=s}function sp(s){s.return!==null&&(As(s,1),vE(s,1,0))}function rp(s){for(;s===Wh;)Wh=Po[--Mo],Po[Mo]=null,yu=Po[--Mo],Po[Mo]=null;for(;s===gr;)gr=oi[--li],oi[li]=null,as=oi[--li],oi[li]=null,rs=oi[--li],oi[li]=null}function EE(s,r){oi[li++]=rs,oi[li++]=as,oi[li++]=gr,rs=r.id,as=r.overflow,gr=s}var un=null,dt=null,Ge=!1,_r=null,ui=!1,ap=Error(i(519));function yr(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw vu(ai(r,s)),ap}function TE(s){var r=s.stateNode,o=s.type,u=s.memoizedProps;switch(r[Pt]=s,r[Zt]=u,o){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(o=0;o<Bu.length;o++)Ue(Bu[o],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":Ue("invalid",r),Ih(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ue("invalid",r);break;case"textarea":Ue("invalid",r),ur(r,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||u.suppressHydrationWarning===!0||US(r.textContent,o)?(u.popover!=null&&(Ue("beforetoggle",r),Ue("toggle",r)),u.onScroll!=null&&Ue("scroll",r),u.onScrollEnd!=null&&Ue("scrollend",r),u.onClick!=null&&(r.onclick=wi),r=!0):r=!1,r||yr(s,!0)}function SE(s){for(un=s.return;un;)switch(un.tag){case 5:case 31:case 13:ui=!1;return;case 27:case 3:ui=!0;return;default:un=un.return}}function Lo(s){if(s!==un)return!1;if(!Ge)return SE(s),Ge=!0,!1;var r=s.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=s.type,o=!(o!=="form"&&o!=="button")||wg(s.type,s.memoizedProps)),o=!o),o&&dt&&yr(s),SE(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));dt=KS(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));dt=KS(s)}else r===27?(r=dt,Dr(s.type)?(s=Ng,Ng=null,dt=s):dt=r):dt=un?hi(s.stateNode.nextSibling):null;return!0}function Ma(){dt=un=null,Ge=!1}function op(){var s=_r;return s!==null&&(Pn===null?Pn=s:Pn.push.apply(Pn,s),_r=null),s}function vu(s){_r===null?_r=[s]:_r.push(s)}var lp=M(null),La=null,Rs=null;function vr(s,r,o){X(lp,r._currentValue),r._currentValue=o}function Is(s){s._currentValue=lp.current,G(lp)}function up(s,r,o){for(;s!==null;){var u=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),s===o)break;s=s.return}}function cp(s,r,o,u){var d=s.child;for(d!==null&&(d.return=s);d!==null;){var p=d.dependencies;if(p!==null){var E=d.child;p=p.firstContext;e:for(;p!==null;){var w=p;p=d;for(var D=0;D<r.length;D++)if(w.context===r[D]){p.lanes|=o,w=p.alternate,w!==null&&(w.lanes|=o),up(p.return,o,s),u||(E=null);break e}p=w.next}}else if(d.tag===18){if(E=d.return,E===null)throw Error(i(341));E.lanes|=o,p=E.alternate,p!==null&&(p.lanes|=o),up(E,o,s),E=null}else E=d.child;if(E!==null)E.return=d;else for(E=d;E!==null;){if(E===s){E=null;break}if(d=E.sibling,d!==null){d.return=E.return,E=d;break}E=E.return}d=E}}function Vo(s,r,o,u){s=null;for(var d=r,p=!1;d!==null;){if(!p){if((d.flags&524288)!==0)p=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var E=d.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var w=d.type;Bn(d.pendingProps.value,E.value)||(s!==null?s.push(w):s=[w])}}else if(d===De.current){if(E=d.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(s!==null?s.push(Yu):s=[Yu])}d=d.return}s!==null&&cp(r,s,o,u),r.flags|=262144}function Xh(s){for(s=s.firstContext;s!==null;){if(!Bn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Va(s){La=s,Rs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function cn(s){return bE(La,s)}function $h(s,r){return La===null&&Va(s),bE(s,r)}function bE(s,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},Rs===null){if(s===null)throw Error(i(308));Rs=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else Rs=Rs.next=r;return o}var M1=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(o,u){s.push(u)}};this.abort=function(){r.aborted=!0,s.forEach(function(o){return o()})}},L1=n.unstable_scheduleCallback,V1=n.unstable_NormalPriority,Vt={$$typeof:ee,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hp(){return{controller:new M1,data:new Map,refCount:0}}function Eu(s){s.refCount--,s.refCount===0&&L1(V1,function(){s.controller.abort()})}var Tu=null,fp=0,Uo=0,jo=null;function U1(s,r){if(Tu===null){var o=Tu=[];fp=0,Uo=pg(),jo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return fp++,r.then(wE,wE),r}function wE(){if(--fp===0&&Tu!==null){jo!==null&&(jo.status="fulfilled");var s=Tu;Tu=null,Uo=0,jo=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function j1(s,r){var o=[],u={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return s.then(function(){u.status="fulfilled",u.value=r;for(var d=0;d<o.length;d++)(0,o[d])(r)},function(d){for(u.status="rejected",u.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),u}var CE=J.S;J.S=function(s,r){lS=bn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&U1(s,r),CE!==null&&CE(s,r)};var Ua=M(null);function dp(){var s=Ua.current;return s!==null?s:ct.pooledCache}function Jh(s,r){r===null?X(Ua,Ua.current):X(Ua,r.pool)}function AE(){var s=dp();return s===null?null:{parent:Vt._currentValue,pool:s}}var zo=Error(i(460)),mp=Error(i(474)),Zh=Error(i(542)),ef={then:function(){}};function RE(s){return s=s.status,s==="fulfilled"||s==="rejected"}function IE(s,r,o){switch(o=s[o],o===void 0?s.push(r):o!==r&&(r.then(wi,wi),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,xE(s),s;default:if(typeof r.status=="string")r.then(wi,wi);else{if(s=ct,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(u){if(r.status==="pending"){var d=r;d.status="fulfilled",d.value=u}},function(u){if(r.status==="pending"){var d=r;d.status="rejected",d.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,xE(s),s}throw za=r,zo}}function ja(s){try{var r=s._init;return r(s._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(za=o,zo):o}}var za=null;function NE(){if(za===null)throw Error(i(459));var s=za;return za=null,s}function xE(s){if(s===zo||s===Zh)throw Error(i(483))}var Bo=null,Su=0;function tf(s){var r=Su;return Su+=1,Bo===null&&(Bo=[]),IE(Bo,s,r)}function bu(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function nf(s,r){throw r.$$typeof===b?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function OE(s){function r(z,L){if(s){var H=z.deletions;H===null?(z.deletions=[L],z.flags|=16):H.push(L)}}function o(z,L){if(!s)return null;for(;L!==null;)r(z,L),L=L.sibling;return null}function u(z){for(var L=new Map;z!==null;)z.key!==null?L.set(z.key,z):L.set(z.index,z),z=z.sibling;return L}function d(z,L){return z=Cs(z,L),z.index=0,z.sibling=null,z}function p(z,L,H){return z.index=H,s?(H=z.alternate,H!==null?(H=H.index,H<L?(z.flags|=67108866,L):H):(z.flags|=67108866,L)):(z.flags|=1048576,L)}function E(z){return s&&z.alternate===null&&(z.flags|=67108866),z}function w(z,L,H,te){return L===null||L.tag!==6?(L=np(H,z.mode,te),L.return=z,L):(L=d(L,H),L.return=z,L)}function D(z,L,H,te){var ge=H.type;return ge===j?Z(z,L,H.props.children,te,H.key):L!==null&&(L.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===R&&ja(ge)===L.type)?(L=d(L,H.props),bu(L,H),L.return=z,L):(L=Qh(H.type,H.key,H.props,null,z.mode,te),bu(L,H),L.return=z,L)}function q(z,L,H,te){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=ip(H,z.mode,te),L.return=z,L):(L=d(L,H.children||[]),L.return=z,L)}function Z(z,L,H,te,ge){return L===null||L.tag!==7?(L=Pa(H,z.mode,te,ge),L.return=z,L):(L=d(L,H),L.return=z,L)}function ne(z,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=np(""+L,z.mode,H),L.return=z,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case A:return H=Qh(L.type,L.key,L.props,null,z.mode,H),bu(H,L),H.return=z,H;case I:return L=ip(L,z.mode,H),L.return=z,L;case R:return L=ja(L),ne(z,L,H)}if(Oe(L)||B(L))return L=Pa(L,z.mode,H,null),L.return=z,L;if(typeof L.then=="function")return ne(z,tf(L),H);if(L.$$typeof===ee)return ne(z,$h(z,L),H);nf(z,L)}return null}function Y(z,L,H,te){var ge=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ge!==null?null:w(z,L,""+H,te);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case A:return H.key===ge?D(z,L,H,te):null;case I:return H.key===ge?q(z,L,H,te):null;case R:return H=ja(H),Y(z,L,H,te)}if(Oe(H)||B(H))return ge!==null?null:Z(z,L,H,te,null);if(typeof H.then=="function")return Y(z,L,tf(H),te);if(H.$$typeof===ee)return Y(z,L,$h(z,H),te);nf(z,H)}return null}function W(z,L,H,te,ge){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return z=z.get(H)||null,w(L,z,""+te,ge);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case A:return z=z.get(te.key===null?H:te.key)||null,D(L,z,te,ge);case I:return z=z.get(te.key===null?H:te.key)||null,q(L,z,te,ge);case R:return te=ja(te),W(z,L,H,te,ge)}if(Oe(te)||B(te))return z=z.get(H)||null,Z(L,z,te,ge,null);if(typeof te.then=="function")return W(z,L,H,tf(te),ge);if(te.$$typeof===ee)return W(z,L,H,$h(L,te),ge);nf(L,te)}return null}function de(z,L,H,te){for(var ge=null,Ke=null,me=L,xe=L=0,Fe=null;me!==null&&xe<H.length;xe++){me.index>xe?(Fe=me,me=null):Fe=me.sibling;var Qe=Y(z,me,H[xe],te);if(Qe===null){me===null&&(me=Fe);break}s&&me&&Qe.alternate===null&&r(z,me),L=p(Qe,L,xe),Ke===null?ge=Qe:Ke.sibling=Qe,Ke=Qe,me=Fe}if(xe===H.length)return o(z,me),Ge&&As(z,xe),ge;if(me===null){for(;xe<H.length;xe++)me=ne(z,H[xe],te),me!==null&&(L=p(me,L,xe),Ke===null?ge=me:Ke.sibling=me,Ke=me);return Ge&&As(z,xe),ge}for(me=u(me);xe<H.length;xe++)Fe=W(me,z,xe,H[xe],te),Fe!==null&&(s&&Fe.alternate!==null&&me.delete(Fe.key===null?xe:Fe.key),L=p(Fe,L,xe),Ke===null?ge=Fe:Ke.sibling=Fe,Ke=Fe);return s&&me.forEach(function(Vr){return r(z,Vr)}),Ge&&As(z,xe),ge}function Te(z,L,H,te){if(H==null)throw Error(i(151));for(var ge=null,Ke=null,me=L,xe=L=0,Fe=null,Qe=H.next();me!==null&&!Qe.done;xe++,Qe=H.next()){me.index>xe?(Fe=me,me=null):Fe=me.sibling;var Vr=Y(z,me,Qe.value,te);if(Vr===null){me===null&&(me=Fe);break}s&&me&&Vr.alternate===null&&r(z,me),L=p(Vr,L,xe),Ke===null?ge=Vr:Ke.sibling=Vr,Ke=Vr,me=Fe}if(Qe.done)return o(z,me),Ge&&As(z,xe),ge;if(me===null){for(;!Qe.done;xe++,Qe=H.next())Qe=ne(z,Qe.value,te),Qe!==null&&(L=p(Qe,L,xe),Ke===null?ge=Qe:Ke.sibling=Qe,Ke=Qe);return Ge&&As(z,xe),ge}for(me=u(me);!Qe.done;xe++,Qe=H.next())Qe=W(me,z,xe,Qe.value,te),Qe!==null&&(s&&Qe.alternate!==null&&me.delete(Qe.key===null?xe:Qe.key),L=p(Qe,L,xe),Ke===null?ge=Qe:Ke.sibling=Qe,Ke=Qe);return s&&me.forEach(function(XN){return r(z,XN)}),Ge&&As(z,xe),ge}function ot(z,L,H,te){if(typeof H=="object"&&H!==null&&H.type===j&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case A:e:{for(var ge=H.key;L!==null;){if(L.key===ge){if(ge=H.type,ge===j){if(L.tag===7){o(z,L.sibling),te=d(L,H.props.children),te.return=z,z=te;break e}}else if(L.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===R&&ja(ge)===L.type){o(z,L.sibling),te=d(L,H.props),bu(te,H),te.return=z,z=te;break e}o(z,L);break}else r(z,L);L=L.sibling}H.type===j?(te=Pa(H.props.children,z.mode,te,H.key),te.return=z,z=te):(te=Qh(H.type,H.key,H.props,null,z.mode,te),bu(te,H),te.return=z,z=te)}return E(z);case I:e:{for(ge=H.key;L!==null;){if(L.key===ge)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){o(z,L.sibling),te=d(L,H.children||[]),te.return=z,z=te;break e}else{o(z,L);break}else r(z,L);L=L.sibling}te=ip(H,z.mode,te),te.return=z,z=te}return E(z);case R:return H=ja(H),ot(z,L,H,te)}if(Oe(H))return de(z,L,H,te);if(B(H)){if(ge=B(H),typeof ge!="function")throw Error(i(150));return H=ge.call(H),Te(z,L,H,te)}if(typeof H.then=="function")return ot(z,L,tf(H),te);if(H.$$typeof===ee)return ot(z,L,$h(z,H),te);nf(z,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(o(z,L.sibling),te=d(L,H),te.return=z,z=te):(o(z,L),te=np(H,z.mode,te),te.return=z,z=te),E(z)):o(z,L)}return function(z,L,H,te){try{Su=0;var ge=ot(z,L,H,te);return Bo=null,ge}catch(me){if(me===zo||me===Zh)throw me;var Ke=Fn(29,me,null,z.mode);return Ke.lanes=te,Ke.return=z,Ke}finally{}}}var Ba=OE(!0),DE=OE(!1),Er=!1;function pp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gp(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Tr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Sr(s,r,o){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(Je&2)!==0){var d=u.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),u.pending=r,r=Kh(s),pE(s,null,o),r}return Yh(s,u,r,o),Kh(s)}function wu(s,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var u=r.lanes;u&=s.pendingLanes,o|=u,r.lanes=o,$l(s,o)}}function _p(s,r){var o=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var d=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?d=p=E:p=p.next=E,o=o.next}while(o!==null);p===null?d=p=r:p=p.next=r}else d=p=r;o={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},s.updateQueue=o;return}s=o.lastBaseUpdate,s===null?o.firstBaseUpdate=r:s.next=r,o.lastBaseUpdate=r}var yp=!1;function Cu(){if(yp){var s=jo;if(s!==null)throw s}}function Au(s,r,o,u){yp=!1;var d=s.updateQueue;Er=!1;var p=d.firstBaseUpdate,E=d.lastBaseUpdate,w=d.shared.pending;if(w!==null){d.shared.pending=null;var D=w,q=D.next;D.next=null,E===null?p=q:E.next=q,E=D;var Z=s.alternate;Z!==null&&(Z=Z.updateQueue,w=Z.lastBaseUpdate,w!==E&&(w===null?Z.firstBaseUpdate=q:w.next=q,Z.lastBaseUpdate=D))}if(p!==null){var ne=d.baseState;E=0,Z=q=D=null,w=p;do{var Y=w.lane&-536870913,W=Y!==w.lane;if(W?(Be&Y)===Y:(u&Y)===Y){Y!==0&&Y===Uo&&(yp=!0),Z!==null&&(Z=Z.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var de=s,Te=w;Y=r;var ot=o;switch(Te.tag){case 1:if(de=Te.payload,typeof de=="function"){ne=de.call(ot,ne,Y);break e}ne=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=Te.payload,Y=typeof de=="function"?de.call(ot,ne,Y):de,Y==null)break e;ne=v({},ne,Y);break e;case 2:Er=!0}}Y=w.callback,Y!==null&&(s.flags|=64,W&&(s.flags|=8192),W=d.callbacks,W===null?d.callbacks=[Y]:W.push(Y))}else W={lane:Y,tag:w.tag,payload:w.payload,callback:w.callback,next:null},Z===null?(q=Z=W,D=ne):Z=Z.next=W,E|=Y;if(w=w.next,w===null){if(w=d.shared.pending,w===null)break;W=w,w=W.next,W.next=null,d.lastBaseUpdate=W,d.shared.pending=null}}while(!0);Z===null&&(D=ne),d.baseState=D,d.firstBaseUpdate=q,d.lastBaseUpdate=Z,p===null&&(d.shared.lanes=0),Rr|=E,s.lanes=E,s.memoizedState=ne}}function kE(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function PE(s,r){var o=s.callbacks;if(o!==null)for(s.callbacks=null,s=0;s<o.length;s++)kE(o[s],r)}var Fo=M(null),sf=M(0);function ME(s,r){s=Vs,X(sf,s),X(Fo,r),Vs=s|r.baseLanes}function vp(){X(sf,Vs),X(Fo,Fo.current)}function Ep(){Vs=sf.current,G(Fo),G(sf)}var Hn=M(null),ci=null;function br(s){var r=s.alternate;X(Nt,Nt.current&1),X(Hn,s),ci===null&&(r===null||Fo.current!==null||r.memoizedState!==null)&&(ci=s)}function Tp(s){X(Nt,Nt.current),X(Hn,s),ci===null&&(ci=s)}function LE(s){s.tag===22?(X(Nt,Nt.current),X(Hn,s),ci===null&&(ci=s)):wr()}function wr(){X(Nt,Nt.current),X(Hn,Hn.current)}function qn(s){G(Hn),ci===s&&(ci=null),G(Nt)}var Nt=M(0);function rf(s){for(var r=s;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Rg(o)||Ig(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ns=0,Ne=null,rt=null,Ut=null,af=!1,Ho=!1,Fa=!1,of=0,Ru=0,qo=null,z1=0;function St(){throw Error(i(321))}function Sp(s,r){if(r===null)return!1;for(var o=0;o<r.length&&o<s.length;o++)if(!Bn(s[o],r[o]))return!1;return!0}function bp(s,r,o,u,d,p){return Ns=p,Ne=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,J.H=s===null||s.memoizedState===null?vT:Up,Fa=!1,p=o(u,d),Fa=!1,Ho&&(p=UE(r,o,u,d)),VE(s),p}function VE(s){J.H=xu;var r=rt!==null&&rt.next!==null;if(Ns=0,Ut=rt=Ne=null,af=!1,Ru=0,qo=null,r)throw Error(i(300));s===null||jt||(s=s.dependencies,s!==null&&Xh(s)&&(jt=!0))}function UE(s,r,o,u){Ne=s;var d=0;do{if(Ho&&(qo=null),Ru=0,Ho=!1,25<=d)throw Error(i(301));if(d+=1,Ut=rt=null,s.updateQueue!=null){var p=s.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}J.H=ET,p=r(o,u)}while(Ho);return p}function B1(){var s=J.H,r=s.useState()[0];return r=typeof r.then=="function"?Iu(r):r,s=s.useState()[0],(rt!==null?rt.memoizedState:null)!==s&&(Ne.flags|=1024),r}function wp(){var s=of!==0;return of=0,s}function Cp(s,r,o){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~o}function Ap(s){if(af){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}af=!1}Ns=0,Ut=rt=Ne=null,Ho=!1,Ru=of=0,qo=null}function Cn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?Ne.memoizedState=Ut=s:Ut=Ut.next=s,Ut}function xt(){if(rt===null){var s=Ne.alternate;s=s!==null?s.memoizedState:null}else s=rt.next;var r=Ut===null?Ne.memoizedState:Ut.next;if(r!==null)Ut=r,rt=s;else{if(s===null)throw Ne.alternate===null?Error(i(467)):Error(i(310));rt=s,s={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},Ut===null?Ne.memoizedState=Ut=s:Ut=Ut.next=s}return Ut}function lf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Iu(s){var r=Ru;return Ru+=1,qo===null&&(qo=[]),s=IE(qo,s,r),r=Ne,(Ut===null?r.memoizedState:Ut.next)===null&&(r=r.alternate,J.H=r===null||r.memoizedState===null?vT:Up),s}function uf(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Iu(s);if(s.$$typeof===ee)return cn(s)}throw Error(i(438,String(s)))}function Rp(s){var r=null,o=Ne.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var u=Ne.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(d){return d.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=lf(),Ne.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(s),u=0;u<s;u++)o[u]=U;return r.index++,o}function xs(s,r){return typeof r=="function"?r(s):r}function cf(s){var r=xt();return Ip(r,rt,s)}function Ip(s,r,o){var u=s.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var d=s.baseQueue,p=u.pending;if(p!==null){if(d!==null){var E=d.next;d.next=p.next,p.next=E}r.baseQueue=d=p,u.pending=null}if(p=s.baseState,d===null)s.memoizedState=p;else{r=d.next;var w=E=null,D=null,q=r,Z=!1;do{var ne=q.lane&-536870913;if(ne!==q.lane?(Be&ne)===ne:(Ns&ne)===ne){var Y=q.revertLane;if(Y===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),ne===Uo&&(Z=!0);else if((Ns&Y)===Y){q=q.next,Y===Uo&&(Z=!0);continue}else ne={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(w=D=ne,E=p):D=D.next=ne,Ne.lanes|=Y,Rr|=Y;ne=q.action,Fa&&o(p,ne),p=q.hasEagerState?q.eagerState:o(p,ne)}else Y={lane:ne,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(w=D=Y,E=p):D=D.next=Y,Ne.lanes|=ne,Rr|=ne;q=q.next}while(q!==null&&q!==r);if(D===null?E=p:D.next=w,!Bn(p,s.memoizedState)&&(jt=!0,Z&&(o=jo,o!==null)))throw o;s.memoizedState=p,s.baseState=E,s.baseQueue=D,u.lastRenderedState=p}return d===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function Np(s){var r=xt(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=s;var u=o.dispatch,d=o.pending,p=r.memoizedState;if(d!==null){o.pending=null;var E=d=d.next;do p=s(p,E.action),E=E.next;while(E!==d);Bn(p,r.memoizedState)||(jt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),o.lastRenderedState=p}return[p,u]}function jE(s,r,o){var u=Ne,d=xt(),p=Ge;if(p){if(o===void 0)throw Error(i(407));o=o()}else o=r();var E=!Bn((rt||d).memoizedState,o);if(E&&(d.memoizedState=o,jt=!0),d=d.queue,Dp(FE.bind(null,u,d,s),[s]),d.getSnapshot!==r||E||Ut!==null&&Ut.memoizedState.tag&1){if(u.flags|=2048,Go(9,{destroy:void 0},BE.bind(null,u,d,o,r),null),ct===null)throw Error(i(349));p||(Ns&127)!==0||zE(u,r,o)}return o}function zE(s,r,o){s.flags|=16384,s={getSnapshot:r,value:o},r=Ne.updateQueue,r===null?(r=lf(),Ne.updateQueue=r,r.stores=[s]):(o=r.stores,o===null?r.stores=[s]:o.push(s))}function BE(s,r,o,u){r.value=o,r.getSnapshot=u,HE(r)&&qE(s)}function FE(s,r,o){return o(function(){HE(r)&&qE(s)})}function HE(s){var r=s.getSnapshot;s=s.value;try{var o=r();return!Bn(s,o)}catch{return!0}}function qE(s){var r=ka(s,2);r!==null&&Mn(r,s,2)}function xp(s){var r=Cn();if(typeof s=="function"){var o=s;if(s=o(),Fa){ei(!0);try{o()}finally{ei(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xs,lastRenderedState:s},r}function GE(s,r,o,u){return s.baseState=o,Ip(s,rt,typeof u=="function"?u:xs)}function F1(s,r,o,u,d){if(df(s))throw Error(i(485));if(s=r.action,s!==null){var p={payload:d,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){p.listeners.push(E)}};J.T!==null?o(!0):p.isTransition=!1,u(p),o=r.pending,o===null?(p.next=r.pending=p,YE(r,p)):(p.next=o.next,r.pending=o.next=p)}}function YE(s,r){var o=r.action,u=r.payload,d=s.state;if(r.isTransition){var p=J.T,E={};J.T=E;try{var w=o(d,u),D=J.S;D!==null&&D(E,w),KE(s,r,w)}catch(q){Op(s,r,q)}finally{p!==null&&E.types!==null&&(p.types=E.types),J.T=p}}else try{p=o(d,u),KE(s,r,p)}catch(q){Op(s,r,q)}}function KE(s,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){QE(s,r,u)},function(u){return Op(s,r,u)}):QE(s,r,o)}function QE(s,r,o){r.status="fulfilled",r.value=o,WE(r),s.state=o,r=s.pending,r!==null&&(o=r.next,o===r?s.pending=null:(o=o.next,r.next=o,YE(s,o)))}function Op(s,r,o){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=o,WE(r),r=r.next;while(r!==u)}s.action=null}function WE(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function XE(s,r){return r}function $E(s,r){if(Ge){var o=ct.formState;if(o!==null){e:{var u=Ne;if(Ge){if(dt){t:{for(var d=dt,p=ui;d.nodeType!==8;){if(!p){d=null;break t}if(d=hi(d.nextSibling),d===null){d=null;break t}}p=d.data,d=p==="F!"||p==="F"?d:null}if(d){dt=hi(d.nextSibling),u=d.data==="F!";break e}}yr(u)}u=!1}u&&(r=o[0])}}return o=Cn(),o.memoizedState=o.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:XE,lastRenderedState:r},o.queue=u,o=gT.bind(null,Ne,u),u.dispatch=o,u=xp(!1),p=Vp.bind(null,Ne,!1,u.queue),u=Cn(),d={state:r,dispatch:null,action:s,pending:null},u.queue=d,o=F1.bind(null,Ne,d,p,o),d.dispatch=o,u.memoizedState=s,[r,o,!1]}function JE(s){var r=xt();return ZE(r,rt,s)}function ZE(s,r,o){if(r=Ip(s,r,XE)[0],s=cf(xs)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=Iu(r)}catch(E){throw E===zo?Zh:E}else u=r;r=xt();var d=r.queue,p=d.dispatch;return o!==r.memoizedState&&(Ne.flags|=2048,Go(9,{destroy:void 0},H1.bind(null,d,o),null)),[u,p,s]}function H1(s,r){s.action=r}function eT(s){var r=xt(),o=rt;if(o!==null)return ZE(r,o,s);xt(),r=r.memoizedState,o=xt();var u=o.queue.dispatch;return o.memoizedState=s,[r,u,!1]}function Go(s,r,o,u){return s={tag:s,create:o,deps:u,inst:r,next:null},r=Ne.updateQueue,r===null&&(r=lf(),Ne.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=s.next=s:(u=o.next,o.next=s,s.next=u,r.lastEffect=s),s}function tT(){return xt().memoizedState}function hf(s,r,o,u){var d=Cn();Ne.flags|=s,d.memoizedState=Go(1|r,{destroy:void 0},o,u===void 0?null:u)}function ff(s,r,o,u){var d=xt();u=u===void 0?null:u;var p=d.memoizedState.inst;rt!==null&&u!==null&&Sp(u,rt.memoizedState.deps)?d.memoizedState=Go(r,p,o,u):(Ne.flags|=s,d.memoizedState=Go(1|r,p,o,u))}function nT(s,r){hf(8390656,8,s,r)}function Dp(s,r){ff(2048,8,s,r)}function q1(s){Ne.flags|=4;var r=Ne.updateQueue;if(r===null)r=lf(),Ne.updateQueue=r,r.events=[s];else{var o=r.events;o===null?r.events=[s]:o.push(s)}}function iT(s){var r=xt().memoizedState;return q1({ref:r,nextImpl:s}),function(){if((Je&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function sT(s,r){return ff(4,2,s,r)}function rT(s,r){return ff(4,4,s,r)}function aT(s,r){if(typeof r=="function"){s=s();var o=r(s);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function oT(s,r,o){o=o!=null?o.concat([s]):null,ff(4,4,aT.bind(null,r,s),o)}function kp(){}function lT(s,r){var o=xt();r=r===void 0?null:r;var u=o.memoizedState;return r!==null&&Sp(r,u[1])?u[0]:(o.memoizedState=[s,r],s)}function uT(s,r){var o=xt();r=r===void 0?null:r;var u=o.memoizedState;if(r!==null&&Sp(r,u[1]))return u[0];if(u=s(),Fa){ei(!0);try{s()}finally{ei(!1)}}return o.memoizedState=[u,r],u}function Pp(s,r,o){return o===void 0||(Ns&1073741824)!==0&&(Be&261930)===0?s.memoizedState=r:(s.memoizedState=o,s=cS(),Ne.lanes|=s,Rr|=s,o)}function cT(s,r,o,u){return Bn(o,r)?o:Fo.current!==null?(s=Pp(s,o,u),Bn(s,r)||(jt=!0),s):(Ns&42)===0||(Ns&1073741824)!==0&&(Be&261930)===0?(jt=!0,s.memoizedState=o):(s=cS(),Ne.lanes|=s,Rr|=s,r)}function hT(s,r,o,u,d){var p=se.p;se.p=p!==0&&8>p?p:8;var E=J.T,w={};J.T=w,Vp(s,!1,r,o);try{var D=d(),q=J.S;if(q!==null&&q(w,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var Z=j1(D,u);Nu(s,r,Z,Kn(s))}else Nu(s,r,u,Kn(s))}catch(ne){Nu(s,r,{then:function(){},status:"rejected",reason:ne},Kn())}finally{se.p=p,E!==null&&w.types!==null&&(E.types=w.types),J.T=E}}function G1(){}function Mp(s,r,o,u){if(s.tag!==5)throw Error(i(476));var d=fT(s).queue;hT(s,d,r,he,o===null?G1:function(){return dT(s),o(u)})}function fT(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xs,lastRenderedState:he},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xs,lastRenderedState:o},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function dT(s){var r=fT(s);r.next===null&&(r=s.alternate.memoizedState),Nu(s,r.next.queue,{},Kn())}function Lp(){return cn(Yu)}function mT(){return xt().memoizedState}function pT(){return xt().memoizedState}function Y1(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var o=Kn();s=Tr(o);var u=Sr(r,s,o);u!==null&&(Mn(u,r,o),wu(u,r,o)),r={cache:hp()},s.payload=r;return}r=r.return}}function K1(s,r,o){var u=Kn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},df(s)?_T(r,o):(o=ep(s,r,o,u),o!==null&&(Mn(o,s,u),yT(o,r,u)))}function gT(s,r,o){var u=Kn();Nu(s,r,o,u)}function Nu(s,r,o,u){var d={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(df(s))_T(r,d);else{var p=s.alternate;if(s.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var E=r.lastRenderedState,w=p(E,o);if(d.hasEagerState=!0,d.eagerState=w,Bn(w,E))return Yh(s,r,d,0),ct===null&&Gh(),!1}catch{}finally{}if(o=ep(s,r,d,u),o!==null)return Mn(o,s,u),yT(o,r,u),!0}return!1}function Vp(s,r,o,u){if(u={lane:2,revertLane:pg(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},df(s)){if(r)throw Error(i(479))}else r=ep(s,o,u,2),r!==null&&Mn(r,s,2)}function df(s){var r=s.alternate;return s===Ne||r!==null&&r===Ne}function _T(s,r){Ho=af=!0;var o=s.pending;o===null?r.next=r:(r.next=o.next,o.next=r),s.pending=r}function yT(s,r,o){if((o&4194048)!==0){var u=r.lanes;u&=s.pendingLanes,o|=u,r.lanes=o,$l(s,o)}}var xu={readContext:cn,use:uf,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St};xu.useEffectEvent=St;var vT={readContext:cn,use:uf,useCallback:function(s,r){return Cn().memoizedState=[s,r===void 0?null:r],s},useContext:cn,useEffect:nT,useImperativeHandle:function(s,r,o){o=o!=null?o.concat([s]):null,hf(4194308,4,aT.bind(null,r,s),o)},useLayoutEffect:function(s,r){return hf(4194308,4,s,r)},useInsertionEffect:function(s,r){hf(4,2,s,r)},useMemo:function(s,r){var o=Cn();r=r===void 0?null:r;var u=s();if(Fa){ei(!0);try{s()}finally{ei(!1)}}return o.memoizedState=[u,r],u},useReducer:function(s,r,o){var u=Cn();if(o!==void 0){var d=o(r);if(Fa){ei(!0);try{o(r)}finally{ei(!1)}}}else d=r;return u.memoizedState=u.baseState=d,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:d},u.queue=s,s=s.dispatch=K1.bind(null,Ne,s),[u.memoizedState,s]},useRef:function(s){var r=Cn();return s={current:s},r.memoizedState=s},useState:function(s){s=xp(s);var r=s.queue,o=gT.bind(null,Ne,r);return r.dispatch=o,[s.memoizedState,o]},useDebugValue:kp,useDeferredValue:function(s,r){var o=Cn();return Pp(o,s,r)},useTransition:function(){var s=xp(!1);return s=hT.bind(null,Ne,s.queue,!0,!1),Cn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,o){var u=Ne,d=Cn();if(Ge){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),ct===null)throw Error(i(349));(Be&127)!==0||zE(u,r,o)}d.memoizedState=o;var p={value:o,getSnapshot:r};return d.queue=p,nT(FE.bind(null,u,p,s),[s]),u.flags|=2048,Go(9,{destroy:void 0},BE.bind(null,u,p,o,r),null),o},useId:function(){var s=Cn(),r=ct.identifierPrefix;if(Ge){var o=as,u=rs;o=(u&~(1<<32-Rt(u)-1)).toString(32)+o,r="_"+r+"R_"+o,o=of++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=z1++,r="_"+r+"r_"+o.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:Lp,useFormState:$E,useActionState:$E,useOptimistic:function(s){var r=Cn();r.memoizedState=r.baseState=s;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Vp.bind(null,Ne,!0,o),o.dispatch=r,[s,r]},useMemoCache:Rp,useCacheRefresh:function(){return Cn().memoizedState=Y1.bind(null,Ne)},useEffectEvent:function(s){var r=Cn(),o={impl:s};return r.memoizedState=o,function(){if((Je&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},Up={readContext:cn,use:uf,useCallback:lT,useContext:cn,useEffect:Dp,useImperativeHandle:oT,useInsertionEffect:sT,useLayoutEffect:rT,useMemo:uT,useReducer:cf,useRef:tT,useState:function(){return cf(xs)},useDebugValue:kp,useDeferredValue:function(s,r){var o=xt();return cT(o,rt.memoizedState,s,r)},useTransition:function(){var s=cf(xs)[0],r=xt().memoizedState;return[typeof s=="boolean"?s:Iu(s),r]},useSyncExternalStore:jE,useId:mT,useHostTransitionStatus:Lp,useFormState:JE,useActionState:JE,useOptimistic:function(s,r){var o=xt();return GE(o,rt,s,r)},useMemoCache:Rp,useCacheRefresh:pT};Up.useEffectEvent=iT;var ET={readContext:cn,use:uf,useCallback:lT,useContext:cn,useEffect:Dp,useImperativeHandle:oT,useInsertionEffect:sT,useLayoutEffect:rT,useMemo:uT,useReducer:Np,useRef:tT,useState:function(){return Np(xs)},useDebugValue:kp,useDeferredValue:function(s,r){var o=xt();return rt===null?Pp(o,s,r):cT(o,rt.memoizedState,s,r)},useTransition:function(){var s=Np(xs)[0],r=xt().memoizedState;return[typeof s=="boolean"?s:Iu(s),r]},useSyncExternalStore:jE,useId:mT,useHostTransitionStatus:Lp,useFormState:eT,useActionState:eT,useOptimistic:function(s,r){var o=xt();return rt!==null?GE(o,rt,s,r):(o.baseState=s,[s,o.queue.dispatch])},useMemoCache:Rp,useCacheRefresh:pT};ET.useEffectEvent=iT;function jp(s,r,o,u){r=s.memoizedState,o=o(u,r),o=o==null?r:v({},r,o),s.memoizedState=o,s.lanes===0&&(s.updateQueue.baseState=o)}var zp={enqueueSetState:function(s,r,o){s=s._reactInternals;var u=Kn(),d=Tr(u);d.payload=r,o!=null&&(d.callback=o),r=Sr(s,d,u),r!==null&&(Mn(r,s,u),wu(r,s,u))},enqueueReplaceState:function(s,r,o){s=s._reactInternals;var u=Kn(),d=Tr(u);d.tag=1,d.payload=r,o!=null&&(d.callback=o),r=Sr(s,d,u),r!==null&&(Mn(r,s,u),wu(r,s,u))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var o=Kn(),u=Tr(o);u.tag=2,r!=null&&(u.callback=r),r=Sr(s,u,o),r!==null&&(Mn(r,s,o),wu(r,s,o))}};function TT(s,r,o,u,d,p,E){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,p,E):r.prototype&&r.prototype.isPureReactComponent?!gu(o,u)||!gu(d,p):!0}function ST(s,r,o,u){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==s&&zp.enqueueReplaceState(r,r.state,null)}function Ha(s,r){var o=r;if("ref"in r){o={};for(var u in r)u!=="ref"&&(o[u]=r[u])}if(s=s.defaultProps){o===r&&(o=v({},o));for(var d in s)o[d]===void 0&&(o[d]=s[d])}return o}function bT(s){qh(s)}function wT(s){console.error(s)}function CT(s){qh(s)}function mf(s,r){try{var o=s.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function AT(s,r,o){try{var u=s.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Bp(s,r,o){return o=Tr(o),o.tag=3,o.payload={element:null},o.callback=function(){mf(s,r)},o}function RT(s){return s=Tr(s),s.tag=3,s}function IT(s,r,o,u){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var p=u.value;s.payload=function(){return d(p)},s.callback=function(){AT(r,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(s.callback=function(){AT(r,o,u),typeof d!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var w=u.stack;this.componentDidCatch(u.value,{componentStack:w!==null?w:""})})}function Q1(s,r,o,u,d){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=o.alternate,r!==null&&Vo(r,o,d,!0),o=Hn.current,o!==null){switch(o.tag){case 31:case 13:return ci===null?Af():o.alternate===null&&bt===0&&(bt=3),o.flags&=-257,o.flags|=65536,o.lanes=d,u===ef?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([u]):r.add(u),fg(s,u,d)),!1;case 22:return o.flags|=65536,u===ef?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([u]):o.add(u)),fg(s,u,d)),!1}throw Error(i(435,o.tag))}return fg(s,u,d),Af(),!1}if(Ge)return r=Hn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=d,u!==ap&&(s=Error(i(422),{cause:u}),vu(ai(s,o)))):(u!==ap&&(r=Error(i(423),{cause:u}),vu(ai(r,o))),s=s.current.alternate,s.flags|=65536,d&=-d,s.lanes|=d,u=ai(u,o),d=Bp(s.stateNode,u,d),_p(s,d),bt!==4&&(bt=2)),!1;var p=Error(i(520),{cause:u});if(p=ai(p,o),Uu===null?Uu=[p]:Uu.push(p),bt!==4&&(bt=2),r===null)return!0;u=ai(u,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,s=d&-d,o.lanes|=s,s=Bp(o.stateNode,u,s),_p(o,s),!1;case 1:if(r=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Ir===null||!Ir.has(p))))return o.flags|=65536,d&=-d,o.lanes|=d,d=RT(d),IT(d,s,o,u),_p(o,d),!1}o=o.return}while(o!==null);return!1}var Fp=Error(i(461)),jt=!1;function hn(s,r,o,u){r.child=s===null?DE(r,null,o,u):Ba(r,s.child,o,u)}function NT(s,r,o,u,d){o=o.render;var p=r.ref;if("ref"in u){var E={};for(var w in u)w!=="ref"&&(E[w]=u[w])}else E=u;return Va(r),u=bp(s,r,o,E,p,d),w=wp(),s!==null&&!jt?(Cp(s,r,d),Os(s,r,d)):(Ge&&w&&sp(r),r.flags|=1,hn(s,r,u,d),r.child)}function xT(s,r,o,u,d){if(s===null){var p=o.type;return typeof p=="function"&&!tp(p)&&p.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=p,OT(s,r,p,u,d)):(s=Qh(o.type,null,u,r,r.mode,d),s.ref=r.ref,s.return=r,r.child=s)}if(p=s.child,!Xp(s,d)){var E=p.memoizedProps;if(o=o.compare,o=o!==null?o:gu,o(E,u)&&s.ref===r.ref)return Os(s,r,d)}return r.flags|=1,s=Cs(p,u),s.ref=r.ref,s.return=r,r.child=s}function OT(s,r,o,u,d){if(s!==null){var p=s.memoizedProps;if(gu(p,u)&&s.ref===r.ref)if(jt=!1,r.pendingProps=u=p,Xp(s,d))(s.flags&131072)!==0&&(jt=!0);else return r.lanes=s.lanes,Os(s,r,d)}return Hp(s,r,o,u,d)}function DT(s,r,o,u){var d=u.children,p=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,s!==null){for(u=r.child=s.child,d=0;u!==null;)d=d|u.lanes|u.childLanes,u=u.sibling;u=d&~p}else u=0,r.child=null;return kT(s,r,p,o,u)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&Jh(r,p!==null?p.cachePool:null),p!==null?ME(r,p):vp(),LE(r);else return u=r.lanes=536870912,kT(s,r,p!==null?p.baseLanes|o:o,o,u)}else p!==null?(Jh(r,p.cachePool),ME(r,p),wr(),r.memoizedState=null):(s!==null&&Jh(r,null),vp(),wr());return hn(s,r,d,o),r.child}function Ou(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function kT(s,r,o,u,d){var p=dp();return p=p===null?null:{parent:Vt._currentValue,pool:p},r.memoizedState={baseLanes:o,cachePool:p},s!==null&&Jh(r,null),vp(),LE(r),s!==null&&Vo(s,r,u,!0),r.childLanes=d,null}function pf(s,r){return r=_f({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function PT(s,r,o){return Ba(r,s.child,null,o),s=pf(r,r.pendingProps),s.flags|=2,qn(r),r.memoizedState=null,s}function W1(s,r,o){var u=r.pendingProps,d=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(Ge){if(u.mode==="hidden")return s=pf(r,u),r.lanes=536870912,Ou(null,s);if(Tp(r),(s=dt)?(s=YS(s,ui),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:gr!==null?{id:rs,overflow:as}:null,retryLane:536870912,hydrationErrors:null},o=_E(s),o.return=r,r.child=o,un=r,dt=null)):s=null,s===null)throw yr(r);return r.lanes=536870912,null}return pf(r,u)}var p=s.memoizedState;if(p!==null){var E=p.dehydrated;if(Tp(r),d)if(r.flags&256)r.flags&=-257,r=PT(s,r,o);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(jt||Vo(s,r,o,!1),d=(o&s.childLanes)!==0,jt||d){if(u=ct,u!==null&&(E=Jl(u,o),E!==0&&E!==p.retryLane))throw p.retryLane=E,ka(s,E),Mn(u,s,E),Fp;Af(),r=PT(s,r,o)}else s=p.treeContext,dt=hi(E.nextSibling),un=r,Ge=!0,_r=null,ui=!1,s!==null&&EE(r,s),r=pf(r,u),r.flags|=4096;return r}return s=Cs(s.child,{mode:u.mode,children:u.children}),s.ref=r.ref,r.child=s,s.return=r,s}function gf(s,r){var o=r.ref;if(o===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(s===null||s.ref!==o)&&(r.flags|=4194816)}}function Hp(s,r,o,u,d){return Va(r),o=bp(s,r,o,u,void 0,d),u=wp(),s!==null&&!jt?(Cp(s,r,d),Os(s,r,d)):(Ge&&u&&sp(r),r.flags|=1,hn(s,r,o,d),r.child)}function MT(s,r,o,u,d,p){return Va(r),r.updateQueue=null,o=UE(r,u,o,d),VE(s),u=wp(),s!==null&&!jt?(Cp(s,r,p),Os(s,r,p)):(Ge&&u&&sp(r),r.flags|=1,hn(s,r,o,p),r.child)}function LT(s,r,o,u,d){if(Va(r),r.stateNode===null){var p=ko,E=o.contextType;typeof E=="object"&&E!==null&&(p=cn(E)),p=new o(u,p),r.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=zp,r.stateNode=p,p._reactInternals=r,p=r.stateNode,p.props=u,p.state=r.memoizedState,p.refs={},pp(r),E=o.contextType,p.context=typeof E=="object"&&E!==null?cn(E):ko,p.state=r.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(jp(r,o,E,u),p.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(E=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),E!==p.state&&zp.enqueueReplaceState(p,p.state,null),Au(r,u,p,d),Cu(),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(s===null){p=r.stateNode;var w=r.memoizedProps,D=Ha(o,w);p.props=D;var q=p.context,Z=o.contextType;E=ko,typeof Z=="object"&&Z!==null&&(E=cn(Z));var ne=o.getDerivedStateFromProps;Z=typeof ne=="function"||typeof p.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,Z||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w||q!==E)&&ST(r,p,u,E),Er=!1;var Y=r.memoizedState;p.state=Y,Au(r,u,p,d),Cu(),q=r.memoizedState,w||Y!==q||Er?(typeof ne=="function"&&(jp(r,o,ne,u),q=r.memoizedState),(D=Er||TT(r,o,D,u,Y,q,E))?(Z||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(r.flags|=4194308)):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=q),p.props=u,p.state=q,p.context=E,u=D):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{p=r.stateNode,gp(s,r),E=r.memoizedProps,Z=Ha(o,E),p.props=Z,ne=r.pendingProps,Y=p.context,q=o.contextType,D=ko,typeof q=="object"&&q!==null&&(D=cn(q)),w=o.getDerivedStateFromProps,(q=typeof w=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E!==ne||Y!==D)&&ST(r,p,u,D),Er=!1,Y=r.memoizedState,p.state=Y,Au(r,u,p,d),Cu();var W=r.memoizedState;E!==ne||Y!==W||Er||s!==null&&s.dependencies!==null&&Xh(s.dependencies)?(typeof w=="function"&&(jp(r,o,w,u),W=r.memoizedState),(Z=Er||TT(r,o,Z,u,Y,W,D)||s!==null&&s.dependencies!==null&&Xh(s.dependencies))?(q||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,W,D),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,W,D)),typeof p.componentDidUpdate=="function"&&(r.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof p.componentDidUpdate!="function"||E===s.memoizedProps&&Y===s.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&Y===s.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=W),p.props=u,p.state=W,p.context=D,u=Z):(typeof p.componentDidUpdate!="function"||E===s.memoizedProps&&Y===s.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&Y===s.memoizedState||(r.flags|=1024),u=!1)}return p=u,gf(s,r),u=(r.flags&128)!==0,p||u?(p=r.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),r.flags|=1,s!==null&&u?(r.child=Ba(r,s.child,null,d),r.child=Ba(r,null,o,d)):hn(s,r,o,d),r.memoizedState=p.state,s=r.child):s=Os(s,r,d),s}function VT(s,r,o,u){return Ma(),r.flags|=256,hn(s,r,o,u),r.child}var qp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gp(s){return{baseLanes:s,cachePool:AE()}}function Yp(s,r,o){return s=s!==null?s.childLanes&~o:0,r&&(s|=Yn),s}function UT(s,r,o){var u=r.pendingProps,d=!1,p=(r.flags&128)!==0,E;if((E=p)||(E=s!==null&&s.memoizedState===null?!1:(Nt.current&2)!==0),E&&(d=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,s===null){if(Ge){if(d?br(r):wr(),(s=dt)?(s=YS(s,ui),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:gr!==null?{id:rs,overflow:as}:null,retryLane:536870912,hydrationErrors:null},o=_E(s),o.return=r,r.child=o,un=r,dt=null)):s=null,s===null)throw yr(r);return Ig(s)?r.lanes=32:r.lanes=536870912,null}var w=u.children;return u=u.fallback,d?(wr(),d=r.mode,w=_f({mode:"hidden",children:w},d),u=Pa(u,d,o,null),w.return=r,u.return=r,w.sibling=u,r.child=w,u=r.child,u.memoizedState=Gp(o),u.childLanes=Yp(s,E,o),r.memoizedState=qp,Ou(null,u)):(br(r),Kp(r,w))}var D=s.memoizedState;if(D!==null&&(w=D.dehydrated,w!==null)){if(p)r.flags&256?(br(r),r.flags&=-257,r=Qp(s,r,o)):r.memoizedState!==null?(wr(),r.child=s.child,r.flags|=128,r=null):(wr(),w=u.fallback,d=r.mode,u=_f({mode:"visible",children:u.children},d),w=Pa(w,d,o,null),w.flags|=2,u.return=r,w.return=r,u.sibling=w,r.child=u,Ba(r,s.child,null,o),u=r.child,u.memoizedState=Gp(o),u.childLanes=Yp(s,E,o),r.memoizedState=qp,r=Ou(null,u));else if(br(r),Ig(w)){if(E=w.nextSibling&&w.nextSibling.dataset,E)var q=E.dgst;E=q,u=Error(i(419)),u.stack="",u.digest=E,vu({value:u,source:null,stack:null}),r=Qp(s,r,o)}else if(jt||Vo(s,r,o,!1),E=(o&s.childLanes)!==0,jt||E){if(E=ct,E!==null&&(u=Jl(E,o),u!==0&&u!==D.retryLane))throw D.retryLane=u,ka(s,u),Mn(E,s,u),Fp;Rg(w)||Af(),r=Qp(s,r,o)}else Rg(w)?(r.flags|=192,r.child=s.child,r=null):(s=D.treeContext,dt=hi(w.nextSibling),un=r,Ge=!0,_r=null,ui=!1,s!==null&&EE(r,s),r=Kp(r,u.children),r.flags|=4096);return r}return d?(wr(),w=u.fallback,d=r.mode,D=s.child,q=D.sibling,u=Cs(D,{mode:"hidden",children:u.children}),u.subtreeFlags=D.subtreeFlags&65011712,q!==null?w=Cs(q,w):(w=Pa(w,d,o,null),w.flags|=2),w.return=r,u.return=r,u.sibling=w,r.child=u,Ou(null,u),u=r.child,w=s.child.memoizedState,w===null?w=Gp(o):(d=w.cachePool,d!==null?(D=Vt._currentValue,d=d.parent!==D?{parent:D,pool:D}:d):d=AE(),w={baseLanes:w.baseLanes|o,cachePool:d}),u.memoizedState=w,u.childLanes=Yp(s,E,o),r.memoizedState=qp,Ou(s.child,u)):(br(r),o=s.child,s=o.sibling,o=Cs(o,{mode:"visible",children:u.children}),o.return=r,o.sibling=null,s!==null&&(E=r.deletions,E===null?(r.deletions=[s],r.flags|=16):E.push(s)),r.child=o,r.memoizedState=null,o)}function Kp(s,r){return r=_f({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function _f(s,r){return s=Fn(22,s,null,r),s.lanes=0,s}function Qp(s,r,o){return Ba(r,s.child,null,o),s=Kp(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function jT(s,r,o){s.lanes|=r;var u=s.alternate;u!==null&&(u.lanes|=r),up(s.return,r,o)}function Wp(s,r,o,u,d,p){var E=s.memoizedState;E===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:d,treeForkCount:p}:(E.isBackwards=r,E.rendering=null,E.renderingStartTime=0,E.last=u,E.tail=o,E.tailMode=d,E.treeForkCount=p)}function zT(s,r,o){var u=r.pendingProps,d=u.revealOrder,p=u.tail;u=u.children;var E=Nt.current,w=(E&2)!==0;if(w?(E=E&1|2,r.flags|=128):E&=1,X(Nt,E),hn(s,r,u,o),u=Ge?yu:0,!w&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&jT(s,o,r);else if(s.tag===19)jT(s,o,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(d){case"forwards":for(o=r.child,d=null;o!==null;)s=o.alternate,s!==null&&rf(s)===null&&(d=o),o=o.sibling;o=d,o===null?(d=r.child,r.child=null):(d=o.sibling,o.sibling=null),Wp(r,!1,d,o,p,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,d=r.child,r.child=null;d!==null;){if(s=d.alternate,s!==null&&rf(s)===null){r.child=d;break}s=d.sibling,d.sibling=o,o=d,d=s}Wp(r,!0,o,null,p,u);break;case"together":Wp(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function Os(s,r,o){if(s!==null&&(r.dependencies=s.dependencies),Rr|=r.lanes,(o&r.childLanes)===0)if(s!==null){if(Vo(s,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,o=Cs(s,s.pendingProps),r.child=o,o.return=r;s.sibling!==null;)s=s.sibling,o=o.sibling=Cs(s,s.pendingProps),o.return=r;o.sibling=null}return r.child}function Xp(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&Xh(s)))}function X1(s,r,o){switch(r.tag){case 3:ut(r,r.stateNode.containerInfo),vr(r,Vt,s.memoizedState.cache),Ma();break;case 27:case 5:vi(r);break;case 4:ut(r,r.stateNode.containerInfo);break;case 10:vr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Tp(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(br(r),r.flags|=128,null):(o&r.child.childLanes)!==0?UT(s,r,o):(br(r),s=Os(s,r,o),s!==null?s.sibling:null);br(r);break;case 19:var d=(s.flags&128)!==0;if(u=(o&r.childLanes)!==0,u||(Vo(s,r,o,!1),u=(o&r.childLanes)!==0),d){if(u)return zT(s,r,o);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),X(Nt,Nt.current),u)break;return null;case 22:return r.lanes=0,DT(s,r,o,r.pendingProps);case 24:vr(r,Vt,s.memoizedState.cache)}return Os(s,r,o)}function BT(s,r,o){if(s!==null)if(s.memoizedProps!==r.pendingProps)jt=!0;else{if(!Xp(s,o)&&(r.flags&128)===0)return jt=!1,X1(s,r,o);jt=(s.flags&131072)!==0}else jt=!1,Ge&&(r.flags&1048576)!==0&&vE(r,yu,r.index);switch(r.lanes=0,r.tag){case 16:e:{var u=r.pendingProps;if(s=ja(r.elementType),r.type=s,typeof s=="function")tp(s)?(u=Ha(s,u),r.tag=1,r=LT(null,r,s,u,o)):(r.tag=0,r=Hp(null,r,s,u,o));else{if(s!=null){var d=s.$$typeof;if(d===ue){r.tag=11,r=NT(null,r,s,u,o);break e}else if(d===x){r.tag=14,r=xT(null,r,s,u,o);break e}}throw r=Ze(s)||s,Error(i(306,r,""))}}return r;case 0:return Hp(s,r,r.type,r.pendingProps,o);case 1:return u=r.type,d=Ha(u,r.pendingProps),LT(s,r,u,d,o);case 3:e:{if(ut(r,r.stateNode.containerInfo),s===null)throw Error(i(387));u=r.pendingProps;var p=r.memoizedState;d=p.element,gp(s,r),Au(r,u,null,o);var E=r.memoizedState;if(u=E.cache,vr(r,Vt,u),u!==p.cache&&cp(r,[Vt],o,!0),Cu(),u=E.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){r=VT(s,r,u,o);break e}else if(u!==d){d=ai(Error(i(424)),r),vu(d),r=VT(s,r,u,o);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(dt=hi(s.firstChild),un=r,Ge=!0,_r=null,ui=!0,o=DE(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Ma(),u===d){r=Os(s,r,o);break e}hn(s,r,u,o)}r=r.child}return r;case 26:return gf(s,r),s===null?(o=JS(r.type,null,r.pendingProps,null))?r.memoizedState=o:Ge||(o=r.type,s=r.pendingProps,u=kf(ve.current).createElement(o),u[Pt]=r,u[Zt]=s,fn(u,o,s),Mt(u),r.stateNode=u):r.memoizedState=JS(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return vi(r),s===null&&Ge&&(u=r.stateNode=WS(r.type,r.pendingProps,ve.current),un=r,ui=!0,d=dt,Dr(r.type)?(Ng=d,dt=hi(u.firstChild)):dt=d),hn(s,r,r.pendingProps.children,o),gf(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&Ge&&((d=u=dt)&&(u=AN(u,r.type,r.pendingProps,ui),u!==null?(r.stateNode=u,un=r,dt=hi(u.firstChild),ui=!1,d=!0):d=!1),d||yr(r)),vi(r),d=r.type,p=r.pendingProps,E=s!==null?s.memoizedProps:null,u=p.children,wg(d,p)?u=null:E!==null&&wg(d,E)&&(r.flags|=32),r.memoizedState!==null&&(d=bp(s,r,B1,null,null,o),Yu._currentValue=d),gf(s,r),hn(s,r,u,o),r.child;case 6:return s===null&&Ge&&((s=o=dt)&&(o=RN(o,r.pendingProps,ui),o!==null?(r.stateNode=o,un=r,dt=null,s=!0):s=!1),s||yr(r)),null;case 13:return UT(s,r,o);case 4:return ut(r,r.stateNode.containerInfo),u=r.pendingProps,s===null?r.child=Ba(r,null,u,o):hn(s,r,u,o),r.child;case 11:return NT(s,r,r.type,r.pendingProps,o);case 7:return hn(s,r,r.pendingProps,o),r.child;case 8:return hn(s,r,r.pendingProps.children,o),r.child;case 12:return hn(s,r,r.pendingProps.children,o),r.child;case 10:return u=r.pendingProps,vr(r,r.type,u.value),hn(s,r,u.children,o),r.child;case 9:return d=r.type._context,u=r.pendingProps.children,Va(r),d=cn(d),u=u(d),r.flags|=1,hn(s,r,u,o),r.child;case 14:return xT(s,r,r.type,r.pendingProps,o);case 15:return OT(s,r,r.type,r.pendingProps,o);case 19:return zT(s,r,o);case 31:return W1(s,r,o);case 22:return DT(s,r,o,r.pendingProps);case 24:return Va(r),u=cn(Vt),s===null?(d=dp(),d===null&&(d=ct,p=hp(),d.pooledCache=p,p.refCount++,p!==null&&(d.pooledCacheLanes|=o),d=p),r.memoizedState={parent:u,cache:d},pp(r),vr(r,Vt,d)):((s.lanes&o)!==0&&(gp(s,r),Au(r,null,null,o),Cu()),d=s.memoizedState,p=r.memoizedState,d.parent!==u?(d={parent:u,cache:u},r.memoizedState=d,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=d),vr(r,Vt,u)):(u=p.cache,vr(r,Vt,u),u!==d.cache&&cp(r,[Vt],o,!0))),hn(s,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Ds(s){s.flags|=4}function $p(s,r,o,u,d){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(d&335544128)===d)if(s.stateNode.complete)s.flags|=8192;else if(mS())s.flags|=8192;else throw za=ef,mp}else s.flags&=-16777217}function FT(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!ib(r))if(mS())s.flags|=8192;else throw za=ef,mp}function yf(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?bh():536870912,s.lanes|=r,Wo|=r)}function Du(s,r){if(!Ge)switch(s.tailMode){case"hidden":r=s.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?s.tail=null:o.sibling=null;break;case"collapsed":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function mt(s){var r=s.alternate!==null&&s.alternate.child===s.child,o=0,u=0;if(r)for(var d=s.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=s,d=d.sibling;else for(d=s.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=s,d=d.sibling;return s.subtreeFlags|=u,s.childLanes=o,r}function $1(s,r,o){var u=r.pendingProps;switch(rp(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(r),null;case 1:return mt(r),null;case 3:return o=r.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),Is(Vt),Xe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(s===null||s.child===null)&&(Lo(r)?Ds(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,op())),mt(r),null;case 26:var d=r.type,p=r.memoizedState;return s===null?(Ds(r),p!==null?(mt(r),FT(r,p)):(mt(r),$p(r,d,null,u,o))):p?p!==s.memoizedState?(Ds(r),mt(r),FT(r,p)):(mt(r),r.flags&=-16777217):(s=s.memoizedProps,s!==u&&Ds(r),mt(r),$p(r,d,s,u,o)),null;case 27:if(Zn(r),o=ve.current,d=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==u&&Ds(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return mt(r),null}s=le.current,Lo(r)?TE(r):(s=WS(d,u,o),r.stateNode=s,Ds(r))}return mt(r),null;case 5:if(Zn(r),d=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==u&&Ds(r);else{if(!u){if(r.stateNode===null)throw Error(i(166));return mt(r),null}if(p=le.current,Lo(r))TE(r);else{var E=kf(ve.current);switch(p){case 1:p=E.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:p=E.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":p=E.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":p=E.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":p=E.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof u.is=="string"?E.createElement("select",{is:u.is}):E.createElement("select"),u.multiple?p.multiple=!0:u.size&&(p.size=u.size);break;default:p=typeof u.is=="string"?E.createElement(d,{is:u.is}):E.createElement(d)}}p[Pt]=r,p[Zt]=u;e:for(E=r.child;E!==null;){if(E.tag===5||E.tag===6)p.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===r)break e;for(;E.sibling===null;){if(E.return===null||E.return===r)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}r.stateNode=p;e:switch(fn(p,d,u),d){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Ds(r)}}return mt(r),$p(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,o),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==u&&Ds(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(i(166));if(s=ve.current,Lo(r)){if(s=r.stateNode,o=r.memoizedProps,u=null,d=un,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}s[Pt]=r,s=!!(s.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||US(s.nodeValue,o)),s||yr(r,!0)}else s=kf(s).createTextNode(u),s[Pt]=r,r.stateNode=s}return mt(r),null;case 31:if(o=r.memoizedState,s===null||s.memoizedState!==null){if(u=Lo(r),o!==null){if(s===null){if(!u)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Pt]=r}else Ma(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;mt(r),s=!1}else o=op(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=o),s=!0;if(!s)return r.flags&256?(qn(r),r):(qn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return mt(r),null;case 13:if(u=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(d=Lo(r),u!==null&&u.dehydrated!==null){if(s===null){if(!d)throw Error(i(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[Pt]=r}else Ma(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;mt(r),d=!1}else d=op(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=d),d=!0;if(!d)return r.flags&256?(qn(r),r):(qn(r),null)}return qn(r),(r.flags&128)!==0?(r.lanes=o,r):(o=u!==null,s=s!==null&&s.memoizedState!==null,o&&(u=r.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==d&&(u.flags|=2048)),o!==s&&o&&(r.child.flags|=8192),yf(r,r.updateQueue),mt(r),null);case 4:return Xe(),s===null&&vg(r.stateNode.containerInfo),mt(r),null;case 10:return Is(r.type),mt(r),null;case 19:if(G(Nt),u=r.memoizedState,u===null)return mt(r),null;if(d=(r.flags&128)!==0,p=u.rendering,p===null)if(d)Du(u,!1);else{if(bt!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(p=rf(s),p!==null){for(r.flags|=128,Du(u,!1),s=p.updateQueue,r.updateQueue=s,yf(r,s),r.subtreeFlags=0,s=o,o=r.child;o!==null;)gE(o,s),o=o.sibling;return X(Nt,Nt.current&1|2),Ge&&As(r,u.treeForkCount),r.child}s=s.sibling}u.tail!==null&&bn()>bf&&(r.flags|=128,d=!0,Du(u,!1),r.lanes=4194304)}else{if(!d)if(s=rf(p),s!==null){if(r.flags|=128,d=!0,s=s.updateQueue,r.updateQueue=s,yf(r,s),Du(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!Ge)return mt(r),null}else 2*bn()-u.renderingStartTime>bf&&o!==536870912&&(r.flags|=128,d=!0,Du(u,!1),r.lanes=4194304);u.isBackwards?(p.sibling=r.child,r.child=p):(s=u.last,s!==null?s.sibling=p:r.child=p,u.last=p)}return u.tail!==null?(s=u.tail,u.rendering=s,u.tail=s.sibling,u.renderingStartTime=bn(),s.sibling=null,o=Nt.current,X(Nt,d?o&1|2:o&1),Ge&&As(r,u.treeForkCount),s):(mt(r),null);case 22:case 23:return qn(r),Ep(),u=r.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(o&536870912)!==0&&(r.flags&128)===0&&(mt(r),r.subtreeFlags&6&&(r.flags|=8192)):mt(r),o=r.updateQueue,o!==null&&yf(r,o.retryQueue),o=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==o&&(r.flags|=2048),s!==null&&G(Ua),null;case 24:return o=null,s!==null&&(o=s.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),Is(Vt),mt(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function J1(s,r){switch(rp(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return Is(Vt),Xe(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return Zn(r),null;case 31:if(r.memoizedState!==null){if(qn(r),r.alternate===null)throw Error(i(340));Ma()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(qn(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Ma()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return G(Nt),null;case 4:return Xe(),null;case 10:return Is(r.type),null;case 22:case 23:return qn(r),Ep(),s!==null&&G(Ua),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return Is(Vt),null;case 25:return null;default:return null}}function HT(s,r){switch(rp(r),r.tag){case 3:Is(Vt),Xe();break;case 26:case 27:case 5:Zn(r);break;case 4:Xe();break;case 31:r.memoizedState!==null&&qn(r);break;case 13:qn(r);break;case 19:G(Nt);break;case 10:Is(r.type);break;case 22:case 23:qn(r),Ep(),s!==null&&G(Ua);break;case 24:Is(Vt)}}function ku(s,r){try{var o=r.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var d=u.next;o=d;do{if((o.tag&s)===s){u=void 0;var p=o.create,E=o.inst;u=p(),E.destroy=u}o=o.next}while(o!==d)}}catch(w){it(r,r.return,w)}}function Cr(s,r,o){try{var u=r.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var p=d.next;u=p;do{if((u.tag&s)===s){var E=u.inst,w=E.destroy;if(w!==void 0){E.destroy=void 0,d=r;var D=o,q=w;try{q()}catch(Z){it(d,D,Z)}}}u=u.next}while(u!==p)}}catch(Z){it(r,r.return,Z)}}function qT(s){var r=s.updateQueue;if(r!==null){var o=s.stateNode;try{PE(r,o)}catch(u){it(s,s.return,u)}}}function GT(s,r,o){o.props=Ha(s.type,s.memoizedProps),o.state=s.memoizedState;try{o.componentWillUnmount()}catch(u){it(s,r,u)}}function Pu(s,r){try{var o=s.ref;if(o!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof o=="function"?s.refCleanup=o(u):o.current=u}}catch(d){it(s,r,d)}}function os(s,r){var o=s.ref,u=s.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(d){it(s,r,d)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){it(s,r,d)}else o.current=null}function YT(s){var r=s.type,o=s.memoizedProps,u=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(d){it(s,s.return,d)}}function Jp(s,r,o){try{var u=s.stateNode;EN(u,s.type,o,r),u[Zt]=r}catch(d){it(s,s.return,d)}}function KT(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Dr(s.type)||s.tag===4}function Zp(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||KT(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Dr(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function eg(s,r,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(s,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(s),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=wi));else if(u!==4&&(u===27&&Dr(s.type)&&(o=s.stateNode,r=null),s=s.child,s!==null))for(eg(s,r,o),s=s.sibling;s!==null;)eg(s,r,o),s=s.sibling}function vf(s,r,o){var u=s.tag;if(u===5||u===6)s=s.stateNode,r?o.insertBefore(s,r):o.appendChild(s);else if(u!==4&&(u===27&&Dr(s.type)&&(o=s.stateNode),s=s.child,s!==null))for(vf(s,r,o),s=s.sibling;s!==null;)vf(s,r,o),s=s.sibling}function QT(s){var r=s.stateNode,o=s.memoizedProps;try{for(var u=s.type,d=r.attributes;d.length;)r.removeAttributeNode(d[0]);fn(r,u,o),r[Pt]=s,r[Zt]=o}catch(p){it(s,s.return,p)}}var ks=!1,zt=!1,tg=!1,WT=typeof WeakSet=="function"?WeakSet:Set,tn=null;function Z1(s,r){if(s=s.containerInfo,Sg=zf,s=oE(s),Qm(s)){if("selectionStart"in s)var o={start:s.selectionStart,end:s.selectionEnd};else e:{o=(o=s.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var d=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var E=0,w=-1,D=-1,q=0,Z=0,ne=s,Y=null;t:for(;;){for(var W;ne!==o||d!==0&&ne.nodeType!==3||(w=E+d),ne!==p||u!==0&&ne.nodeType!==3||(D=E+u),ne.nodeType===3&&(E+=ne.nodeValue.length),(W=ne.firstChild)!==null;)Y=ne,ne=W;for(;;){if(ne===s)break t;if(Y===o&&++q===d&&(w=E),Y===p&&++Z===u&&(D=E),(W=ne.nextSibling)!==null)break;ne=Y,Y=ne.parentNode}ne=W}o=w===-1||D===-1?null:{start:w,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(bg={focusedElem:s,selectionRange:o},zf=!1,tn=r;tn!==null;)if(r=tn,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,tn=s;else for(;tn!==null;){switch(r=tn,p=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(o=0;o<s.length;o++)d=s[o],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&p!==null){s=void 0,o=r,d=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var de=Ha(o.type,d);s=u.getSnapshotBeforeUpdate(de,p),u.__reactInternalSnapshotBeforeUpdate=s}catch(Te){it(o,o.return,Te)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,o=s.nodeType,o===9)Ag(s);else if(o===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Ag(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,tn=s;break}tn=r.return}}function XT(s,r,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Ms(s,o),u&4&&ku(5,o);break;case 1:if(Ms(s,o),u&4)if(s=o.stateNode,r===null)try{s.componentDidMount()}catch(E){it(o,o.return,E)}else{var d=Ha(o.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(d,r,s.__reactInternalSnapshotBeforeUpdate)}catch(E){it(o,o.return,E)}}u&64&&qT(o),u&512&&Pu(o,o.return);break;case 3:if(Ms(s,o),u&64&&(s=o.updateQueue,s!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{PE(s,r)}catch(E){it(o,o.return,E)}}break;case 27:r===null&&u&4&&QT(o);case 26:case 5:Ms(s,o),r===null&&u&4&&YT(o),u&512&&Pu(o,o.return);break;case 12:Ms(s,o);break;case 31:Ms(s,o),u&4&&ZT(s,o);break;case 13:Ms(s,o),u&4&&eS(s,o),u&64&&(s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(o=lN.bind(null,o),IN(s,o))));break;case 22:if(u=o.memoizedState!==null||ks,!u){r=r!==null&&r.memoizedState!==null||zt,d=ks;var p=zt;ks=u,(zt=r)&&!p?Ls(s,o,(o.subtreeFlags&8772)!==0):Ms(s,o),ks=d,zt=p}break;case 30:break;default:Ms(s,o)}}function $T(s){var r=s.alternate;r!==null&&(s.alternate=null,$T(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&vo(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var yt=null,On=!1;function Ps(s,r,o){for(o=o.child;o!==null;)JT(s,r,o),o=o.sibling}function JT(s,r,o){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(Ei,o)}catch{}switch(o.tag){case 26:zt||os(o,r),Ps(s,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:zt||os(o,r);var u=yt,d=On;Dr(o.type)&&(yt=o.stateNode,On=!1),Ps(s,r,o),Hu(o.stateNode),yt=u,On=d;break;case 5:zt||os(o,r);case 6:if(u=yt,d=On,yt=null,Ps(s,r,o),yt=u,On=d,yt!==null)if(On)try{(yt.nodeType===9?yt.body:yt.nodeName==="HTML"?yt.ownerDocument.body:yt).removeChild(o.stateNode)}catch(p){it(o,r,p)}else try{yt.removeChild(o.stateNode)}catch(p){it(o,r,p)}break;case 18:yt!==null&&(On?(s=yt,qS(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,o.stateNode),il(s)):qS(yt,o.stateNode));break;case 4:u=yt,d=On,yt=o.stateNode.containerInfo,On=!0,Ps(s,r,o),yt=u,On=d;break;case 0:case 11:case 14:case 15:Cr(2,o,r),zt||Cr(4,o,r),Ps(s,r,o);break;case 1:zt||(os(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"&&GT(o,r,u)),Ps(s,r,o);break;case 21:Ps(s,r,o);break;case 22:zt=(u=zt)||o.memoizedState!==null,Ps(s,r,o),zt=u;break;default:Ps(s,r,o)}}function ZT(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{il(s)}catch(o){it(r,r.return,o)}}}function eS(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{il(s)}catch(o){it(r,r.return,o)}}function eN(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new WT),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new WT),r;default:throw Error(i(435,s.tag))}}function Ef(s,r){var o=eN(s);r.forEach(function(u){if(!o.has(u)){o.add(u);var d=uN.bind(null,s,u);u.then(d,d)}})}function Dn(s,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var d=o[u],p=s,E=r,w=E;e:for(;w!==null;){switch(w.tag){case 27:if(Dr(w.type)){yt=w.stateNode,On=!1;break e}break;case 5:yt=w.stateNode,On=!1;break e;case 3:case 4:yt=w.stateNode.containerInfo,On=!0;break e}w=w.return}if(yt===null)throw Error(i(160));JT(p,E,d),yt=null,On=!1,p=d.alternate,p!==null&&(p.return=null),d.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)tS(r,s),r=r.sibling}var xi=null;function tS(s,r){var o=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Dn(r,s),kn(s),u&4&&(Cr(3,s,s.return),ku(3,s),Cr(5,s,s.return));break;case 1:Dn(r,s),kn(s),u&512&&(zt||o===null||os(o,o.return)),u&64&&ks&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(o=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var d=xi;if(Dn(r,s),kn(s),u&512&&(zt||o===null||os(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=s.memoizedState,o===null)if(u===null)if(s.stateNode===null){e:{u=s.type,o=s.memoizedProps,d=d.ownerDocument||d;t:switch(u){case"title":p=d.getElementsByTagName("title")[0],(!p||p[Ki]||p[Pt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=d.createElement(u),d.head.insertBefore(p,d.querySelector("head > title"))),fn(p,u,o),p[Pt]=s,Mt(p),u=p;break e;case"link":var E=tb("link","href",d).get(u+(o.href||""));if(E){for(var w=0;w<E.length;w++)if(p=E[w],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(w,1);break t}}p=d.createElement(u),fn(p,u,o),d.head.appendChild(p);break;case"meta":if(E=tb("meta","content",d).get(u+(o.content||""))){for(w=0;w<E.length;w++)if(p=E[w],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(w,1);break t}}p=d.createElement(u),fn(p,u,o),d.head.appendChild(p);break;default:throw Error(i(468,u))}p[Pt]=s,Mt(p),u=p}s.stateNode=u}else nb(d,s.type,s.stateNode);else s.stateNode=eb(d,u,s.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?nb(d,s.type,s.stateNode):eb(d,u,s.memoizedProps)):u===null&&s.stateNode!==null&&Jp(s,s.memoizedProps,o.memoizedProps)}break;case 27:Dn(r,s),kn(s),u&512&&(zt||o===null||os(o,o.return)),o!==null&&u&4&&Jp(s,s.memoizedProps,o.memoizedProps);break;case 5:if(Dn(r,s),kn(s),u&512&&(zt||o===null||os(o,o.return)),s.flags&32){d=s.stateNode;try{xn(d,"")}catch(de){it(s,s.return,de)}}u&4&&s.stateNode!=null&&(d=s.memoizedProps,Jp(s,d,o!==null?o.memoizedProps:d)),u&1024&&(tg=!0);break;case 6:if(Dn(r,s),kn(s),u&4){if(s.stateNode===null)throw Error(i(162));u=s.memoizedProps,o=s.stateNode;try{o.nodeValue=u}catch(de){it(s,s.return,de)}}break;case 3:if(Lf=null,d=xi,xi=Pf(r.containerInfo),Dn(r,s),xi=d,kn(s),u&4&&o!==null&&o.memoizedState.isDehydrated)try{il(r.containerInfo)}catch(de){it(s,s.return,de)}tg&&(tg=!1,nS(s));break;case 4:u=xi,xi=Pf(s.stateNode.containerInfo),Dn(r,s),kn(s),xi=u;break;case 12:Dn(r,s),kn(s);break;case 31:Dn(r,s),kn(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Ef(s,u)));break;case 13:Dn(r,s),kn(s),s.child.flags&8192&&s.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Sf=bn()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Ef(s,u)));break;case 22:d=s.memoizedState!==null;var D=o!==null&&o.memoizedState!==null,q=ks,Z=zt;if(ks=q||d,zt=Z||D,Dn(r,s),zt=Z,ks=q,kn(s),u&8192)e:for(r=s.stateNode,r._visibility=d?r._visibility&-2:r._visibility|1,d&&(o===null||D||ks||zt||qa(s)),o=null,r=s;;){if(r.tag===5||r.tag===26){if(o===null){D=o=r;try{if(p=D.stateNode,d)E=p.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{w=D.stateNode;var ne=D.memoizedProps.style,Y=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;w.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(de){it(D,D.return,de)}}}else if(r.tag===6){if(o===null){D=r;try{D.stateNode.nodeValue=d?"":D.memoizedProps}catch(de){it(D,D.return,de)}}}else if(r.tag===18){if(o===null){D=r;try{var W=D.stateNode;d?GS(W,!0):GS(D.stateNode,!1)}catch(de){it(D,D.return,de)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=s.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Ef(s,o))));break;case 19:Dn(r,s),kn(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Ef(s,u)));break;case 30:break;case 21:break;default:Dn(r,s),kn(s)}}function kn(s){var r=s.flags;if(r&2){try{for(var o,u=s.return;u!==null;){if(KT(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var d=o.stateNode,p=Zp(s);vf(s,p,d);break;case 5:var E=o.stateNode;o.flags&32&&(xn(E,""),o.flags&=-33);var w=Zp(s);vf(s,w,E);break;case 3:case 4:var D=o.stateNode.containerInfo,q=Zp(s);eg(s,q,D);break;default:throw Error(i(161))}}catch(Z){it(s,s.return,Z)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function nS(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;nS(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function Ms(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)XT(s,r.alternate,r),r=r.sibling}function qa(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:Cr(4,r,r.return),qa(r);break;case 1:os(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&GT(r,r.return,o),qa(r);break;case 27:Hu(r.stateNode);case 26:case 5:os(r,r.return),qa(r);break;case 22:r.memoizedState===null&&qa(r);break;case 30:qa(r);break;default:qa(r)}s=s.sibling}}function Ls(s,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,d=s,p=r,E=p.flags;switch(p.tag){case 0:case 11:case 15:Ls(d,p,o),ku(4,p);break;case 1:if(Ls(d,p,o),u=p,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(q){it(u,u.return,q)}if(u=p,d=u.updateQueue,d!==null){var w=u.stateNode;try{var D=d.shared.hiddenCallbacks;if(D!==null)for(d.shared.hiddenCallbacks=null,d=0;d<D.length;d++)kE(D[d],w)}catch(q){it(u,u.return,q)}}o&&E&64&&qT(p),Pu(p,p.return);break;case 27:QT(p);case 26:case 5:Ls(d,p,o),o&&u===null&&E&4&&YT(p),Pu(p,p.return);break;case 12:Ls(d,p,o);break;case 31:Ls(d,p,o),o&&E&4&&ZT(d,p);break;case 13:Ls(d,p,o),o&&E&4&&eS(d,p);break;case 22:p.memoizedState===null&&Ls(d,p,o),Pu(p,p.return);break;case 30:break;default:Ls(d,p,o)}r=r.sibling}}function ng(s,r){var o=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==o&&(s!=null&&s.refCount++,o!=null&&Eu(o))}function ig(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Eu(s))}function Oi(s,r,o,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)iS(s,r,o,u),r=r.sibling}function iS(s,r,o,u){var d=r.flags;switch(r.tag){case 0:case 11:case 15:Oi(s,r,o,u),d&2048&&ku(9,r);break;case 1:Oi(s,r,o,u);break;case 3:Oi(s,r,o,u),d&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Eu(s)));break;case 12:if(d&2048){Oi(s,r,o,u),s=r.stateNode;try{var p=r.memoizedProps,E=p.id,w=p.onPostCommit;typeof w=="function"&&w(E,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(D){it(r,r.return,D)}}else Oi(s,r,o,u);break;case 31:Oi(s,r,o,u);break;case 13:Oi(s,r,o,u);break;case 23:break;case 22:p=r.stateNode,E=r.alternate,r.memoizedState!==null?p._visibility&2?Oi(s,r,o,u):Mu(s,r):p._visibility&2?Oi(s,r,o,u):(p._visibility|=2,Yo(s,r,o,u,(r.subtreeFlags&10256)!==0||!1)),d&2048&&ng(E,r);break;case 24:Oi(s,r,o,u),d&2048&&ig(r.alternate,r);break;default:Oi(s,r,o,u)}}function Yo(s,r,o,u,d){for(d=d&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var p=s,E=r,w=o,D=u,q=E.flags;switch(E.tag){case 0:case 11:case 15:Yo(p,E,w,D,d),ku(8,E);break;case 23:break;case 22:var Z=E.stateNode;E.memoizedState!==null?Z._visibility&2?Yo(p,E,w,D,d):Mu(p,E):(Z._visibility|=2,Yo(p,E,w,D,d)),d&&q&2048&&ng(E.alternate,E);break;case 24:Yo(p,E,w,D,d),d&&q&2048&&ig(E.alternate,E);break;default:Yo(p,E,w,D,d)}r=r.sibling}}function Mu(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=s,u=r,d=u.flags;switch(u.tag){case 22:Mu(o,u),d&2048&&ng(u.alternate,u);break;case 24:Mu(o,u),d&2048&&ig(u.alternate,u);break;default:Mu(o,u)}r=r.sibling}}var Lu=8192;function Ko(s,r,o){if(s.subtreeFlags&Lu)for(s=s.child;s!==null;)sS(s,r,o),s=s.sibling}function sS(s,r,o){switch(s.tag){case 26:Ko(s,r,o),s.flags&Lu&&s.memoizedState!==null&&zN(o,xi,s.memoizedState,s.memoizedProps);break;case 5:Ko(s,r,o);break;case 3:case 4:var u=xi;xi=Pf(s.stateNode.containerInfo),Ko(s,r,o),xi=u;break;case 22:s.memoizedState===null&&(u=s.alternate,u!==null&&u.memoizedState!==null?(u=Lu,Lu=16777216,Ko(s,r,o),Lu=u):Ko(s,r,o));break;default:Ko(s,r,o)}}function rS(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Vu(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];tn=u,oS(u,s)}rS(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)aS(s),s=s.sibling}function aS(s){switch(s.tag){case 0:case 11:case 15:Vu(s),s.flags&2048&&Cr(9,s,s.return);break;case 3:Vu(s);break;case 12:Vu(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,Tf(s)):Vu(s);break;default:Vu(s)}}function Tf(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var u=r[o];tn=u,oS(u,s)}rS(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:Cr(8,r,r.return),Tf(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Tf(r));break;default:Tf(r)}s=s.sibling}}function oS(s,r){for(;tn!==null;){var o=tn;switch(o.tag){case 0:case 11:case 15:Cr(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Eu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,tn=u;else e:for(o=s;tn!==null;){u=tn;var d=u.sibling,p=u.return;if($T(u),u===o){tn=null;break e}if(d!==null){d.return=p,tn=d;break e}tn=p}}}var tN={getCacheForType:function(s){var r=cn(Vt),o=r.data.get(s);return o===void 0&&(o=s(),r.data.set(s,o)),o},cacheSignal:function(){return cn(Vt).controller.signal}},nN=typeof WeakMap=="function"?WeakMap:Map,Je=0,ct=null,Ve=null,Be=0,nt=0,Gn=null,Ar=!1,Qo=!1,sg=!1,Vs=0,bt=0,Rr=0,Ga=0,rg=0,Yn=0,Wo=0,Uu=null,Pn=null,ag=!1,Sf=0,lS=0,bf=1/0,wf=null,Ir=null,Qt=0,Nr=null,Xo=null,Us=0,og=0,lg=null,uS=null,ju=0,ug=null;function Kn(){return(Je&2)!==0&&Be!==0?Be&-Be:J.T!==null?pg():wh()}function cS(){if(Yn===0)if((Be&536870912)===0||Ge){var s=ya;ya<<=1,(ya&3932160)===0&&(ya=262144),Yn=s}else Yn=536870912;return s=Hn.current,s!==null&&(s.flags|=32),Yn}function Mn(s,r,o){(s===ct&&(nt===2||nt===9)||s.cancelPendingCommit!==null)&&($o(s,0),xr(s,Be,Yn,!1)),va(s,o),((Je&2)===0||s!==ct)&&(s===ct&&((Je&2)===0&&(Ga|=o),bt===4&&xr(s,Be,Yn,!1)),ls(s))}function hS(s,r,o){if((Je&6)!==0)throw Error(i(327));var u=!o&&(r&127)===0&&(r&s.expiredLanes)===0||Ti(s,r),d=u?rN(s,r):hg(s,r,!0),p=u;do{if(d===0){Qo&&!u&&xr(s,r,0,!1);break}else{if(o=s.current.alternate,p&&!iN(o)){d=hg(s,r,!1),p=!1;continue}if(d===2){if(p=r,s.errorRecoveryDisabledLanes&p)var E=0;else E=s.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;e:{var w=s;d=Uu;var D=w.current.memoizedState.isDehydrated;if(D&&($o(w,E).flags|=256),E=hg(w,E,!1),E!==2){if(sg&&!D){w.errorRecoveryDisabledLanes|=p,Ga|=p,d=4;break e}p=Pn,Pn=d,p!==null&&(Pn===null?Pn=p:Pn.push.apply(Pn,p))}d=E}if(p=!1,d!==2)continue}}if(d===1){$o(s,0),xr(s,r,0,!0);break}e:{switch(u=s,p=d,p){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:xr(u,r,Yn,!Ar);break e;case 2:Pn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(d=Sf+300-bn(),10<d)){if(xr(u,r,Yn,!Ar),qi(u,0,!0)!==0)break e;Us=r,u.timeoutHandle=FS(fS.bind(null,u,o,Pn,wf,ag,r,Yn,Ga,Wo,Ar,p,"Throttled",-0,0),d);break e}fS(u,o,Pn,wf,ag,r,Yn,Ga,Wo,Ar,p,null,-0,0)}}break}while(!0);ls(s)}function fS(s,r,o,u,d,p,E,w,D,q,Z,ne,Y,W){if(s.timeoutHandle=-1,ne=r.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:wi},sS(r,p,ne);var de=(p&62914560)===p?Sf-bn():(p&4194048)===p?lS-bn():0;if(de=BN(ne,de),de!==null){Us=p,s.cancelPendingCommit=de(ES.bind(null,s,r,p,o,u,d,E,w,D,Z,ne,null,Y,W)),xr(s,p,E,!q);return}}ES(s,r,p,o,u,d,E,w,D)}function iN(s){for(var r=s;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var d=o[u],p=d.getSnapshot;d=d.value;try{if(!Bn(p(),d))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function xr(s,r,o,u){r&=~rg,r&=~Ga,s.suspendedLanes|=r,s.pingedLanes&=~r,u&&(s.warmLanes|=r),u=s.expirationTimes;for(var d=r;0<d;){var p=31-Rt(d),E=1<<p;u[p]=-1,d&=~E}o!==0&&Ea(s,o,r)}function Cf(){return(Je&6)===0?(zu(0),!1):!0}function cg(){if(Ve!==null){if(nt===0)var s=Ve.return;else s=Ve,Rs=La=null,Ap(s),Bo=null,Su=0,s=Ve;for(;s!==null;)HT(s.alternate,s),s=s.return;Ve=null}}function $o(s,r){var o=s.timeoutHandle;o!==-1&&(s.timeoutHandle=-1,bN(o)),o=s.cancelPendingCommit,o!==null&&(s.cancelPendingCommit=null,o()),Us=0,cg(),ct=s,Ve=o=Cs(s.current,null),Be=r,nt=0,Gn=null,Ar=!1,Qo=Ti(s,r),sg=!1,Wo=Yn=rg=Ga=Rr=bt=0,Pn=Uu=null,ag=!1,(r&8)!==0&&(r|=r&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=r;0<u;){var d=31-Rt(u),p=1<<d;r|=s[d],u&=~p}return Vs=r,Gh(),o}function dS(s,r){Ne=null,J.H=xu,r===zo||r===Zh?(r=NE(),nt=3):r===mp?(r=NE(),nt=4):nt=r===Fp?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Gn=r,Ve===null&&(bt=1,mf(s,ai(r,s.current)))}function mS(){var s=Hn.current;return s===null?!0:(Be&4194048)===Be?ci===null:(Be&62914560)===Be||(Be&536870912)!==0?s===ci:!1}function pS(){var s=J.H;return J.H=xu,s===null?xu:s}function gS(){var s=J.A;return J.A=tN,s}function Af(){bt=4,Ar||(Be&4194048)!==Be&&Hn.current!==null||(Qo=!0),(Rr&134217727)===0&&(Ga&134217727)===0||ct===null||xr(ct,Be,Yn,!1)}function hg(s,r,o){var u=Je;Je|=2;var d=pS(),p=gS();(ct!==s||Be!==r)&&(wf=null,$o(s,r)),r=!1;var E=bt;e:do try{if(nt!==0&&Ve!==null){var w=Ve,D=Gn;switch(nt){case 8:cg(),E=6;break e;case 3:case 2:case 9:case 6:Hn.current===null&&(r=!0);var q=nt;if(nt=0,Gn=null,Jo(s,w,D,q),o&&Qo){E=0;break e}break;default:q=nt,nt=0,Gn=null,Jo(s,w,D,q)}}sN(),E=bt;break}catch(Z){dS(s,Z)}while(!0);return r&&s.shellSuspendCounter++,Rs=La=null,Je=u,J.H=d,J.A=p,Ve===null&&(ct=null,Be=0,Gh()),E}function sN(){for(;Ve!==null;)_S(Ve)}function rN(s,r){var o=Je;Je|=2;var u=pS(),d=gS();ct!==s||Be!==r?(wf=null,bf=bn()+500,$o(s,r)):Qo=Ti(s,r);e:do try{if(nt!==0&&Ve!==null){r=Ve;var p=Gn;t:switch(nt){case 1:nt=0,Gn=null,Jo(s,r,p,1);break;case 2:case 9:if(RE(p)){nt=0,Gn=null,yS(r);break}r=function(){nt!==2&&nt!==9||ct!==s||(nt=7),ls(s)},p.then(r,r);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:RE(p)?(nt=0,Gn=null,yS(r)):(nt=0,Gn=null,Jo(s,r,p,7));break;case 5:var E=null;switch(Ve.tag){case 26:E=Ve.memoizedState;case 5:case 27:var w=Ve;if(E?ib(E):w.stateNode.complete){nt=0,Gn=null;var D=w.sibling;if(D!==null)Ve=D;else{var q=w.return;q!==null?(Ve=q,Rf(q)):Ve=null}break t}}nt=0,Gn=null,Jo(s,r,p,5);break;case 6:nt=0,Gn=null,Jo(s,r,p,6);break;case 8:cg(),bt=6;break e;default:throw Error(i(462))}}aN();break}catch(Z){dS(s,Z)}while(!0);return Rs=La=null,J.H=u,J.A=d,Je=o,Ve!==null?0:(ct=null,Be=0,Gh(),bt)}function aN(){for(;Ve!==null&&!Bm();)_S(Ve)}function _S(s){var r=BT(s.alternate,s,Vs);s.memoizedProps=s.pendingProps,r===null?Rf(s):Ve=r}function yS(s){var r=s,o=r.alternate;switch(r.tag){case 15:case 0:r=MT(o,r,r.pendingProps,r.type,void 0,Be);break;case 11:r=MT(o,r,r.pendingProps,r.type.render,r.ref,Be);break;case 5:Ap(r);default:HT(o,r),r=Ve=gE(r,Vs),r=BT(o,r,Vs)}s.memoizedProps=s.pendingProps,r===null?Rf(s):Ve=r}function Jo(s,r,o,u){Rs=La=null,Ap(r),Bo=null,Su=0;var d=r.return;try{if(Q1(s,d,r,o,Be)){bt=1,mf(s,ai(o,s.current)),Ve=null;return}}catch(p){if(d!==null)throw Ve=d,p;bt=1,mf(s,ai(o,s.current)),Ve=null;return}r.flags&32768?(Ge||u===1?s=!0:Qo||(Be&536870912)!==0?s=!1:(Ar=s=!0,(u===2||u===9||u===3||u===6)&&(u=Hn.current,u!==null&&u.tag===13&&(u.flags|=16384))),vS(r,s)):Rf(r)}function Rf(s){var r=s;do{if((r.flags&32768)!==0){vS(r,Ar);return}s=r.return;var o=$1(r.alternate,r,Vs);if(o!==null){Ve=o;return}if(r=r.sibling,r!==null){Ve=r;return}Ve=r=s}while(r!==null);bt===0&&(bt=5)}function vS(s,r){do{var o=J1(s.alternate,s);if(o!==null){o.flags&=32767,Ve=o;return}if(o=s.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(s=s.sibling,s!==null)){Ve=s;return}Ve=s=o}while(s!==null);bt=6,Ve=null}function ES(s,r,o,u,d,p,E,w,D){s.cancelPendingCommit=null;do If();while(Qt!==0);if((Je&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(p=r.lanes|r.childLanes,p|=Zm,qm(s,o,p,E,w,D),s===ct&&(Ve=ct=null,Be=0),Xo=r,Nr=s,Us=o,og=p,lg=d,uS=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,cN(ar,function(){return CS(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=J.T,J.T=null,d=se.p,se.p=2,E=Je,Je|=4;try{Z1(s,r,o)}finally{Je=E,se.p=d,J.T=u}}Qt=1,TS(),SS(),bS()}}function TS(){if(Qt===1){Qt=0;var s=Nr,r=Xo,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=J.T,J.T=null;var u=se.p;se.p=2;var d=Je;Je|=4;try{tS(r,s);var p=bg,E=oE(s.containerInfo),w=p.focusedElem,D=p.selectionRange;if(E!==w&&w&&w.ownerDocument&&aE(w.ownerDocument.documentElement,w)){if(D!==null&&Qm(w)){var q=D.start,Z=D.end;if(Z===void 0&&(Z=q),"selectionStart"in w)w.selectionStart=q,w.selectionEnd=Math.min(Z,w.value.length);else{var ne=w.ownerDocument||document,Y=ne&&ne.defaultView||window;if(Y.getSelection){var W=Y.getSelection(),de=w.textContent.length,Te=Math.min(D.start,de),ot=D.end===void 0?Te:Math.min(D.end,de);!W.extend&&Te>ot&&(E=ot,ot=Te,Te=E);var z=rE(w,Te),L=rE(w,ot);if(z&&L&&(W.rangeCount!==1||W.anchorNode!==z.node||W.anchorOffset!==z.offset||W.focusNode!==L.node||W.focusOffset!==L.offset)){var H=ne.createRange();H.setStart(z.node,z.offset),W.removeAllRanges(),Te>ot?(W.addRange(H),W.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),W.addRange(H))}}}}for(ne=[],W=w;W=W.parentNode;)W.nodeType===1&&ne.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ne.length;w++){var te=ne[w];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}zf=!!Sg,bg=Sg=null}finally{Je=d,se.p=u,J.T=o}}s.current=r,Qt=2}}function SS(){if(Qt===2){Qt=0;var s=Nr,r=Xo,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=J.T,J.T=null;var u=se.p;se.p=2;var d=Je;Je|=4;try{XT(s,r.alternate,r)}finally{Je=d,se.p=u,J.T=o}}Qt=3}}function bS(){if(Qt===4||Qt===3){Qt=0,_h();var s=Nr,r=Xo,o=Us,u=uS;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Qt=5:(Qt=0,Xo=Nr=null,wS(s,s.pendingLanes));var d=s.pendingLanes;if(d===0&&(Ir=null),Ts(o),r=r.stateNode,on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(Ei,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=J.T,d=se.p,se.p=2,J.T=null;try{for(var p=s.onRecoverableError,E=0;E<u.length;E++){var w=u[E];p(w.value,{componentStack:w.stack})}}finally{J.T=r,se.p=d}}(Us&3)!==0&&If(),ls(s),d=s.pendingLanes,(o&261930)!==0&&(d&42)!==0?s===ug?ju++:(ju=0,ug=s):ju=0,zu(0)}}function wS(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,Eu(r)))}function If(){return TS(),SS(),bS(),CS()}function CS(){if(Qt!==5)return!1;var s=Nr,r=og;og=0;var o=Ts(Us),u=J.T,d=se.p;try{se.p=32>o?32:o,J.T=null,o=lg,lg=null;var p=Nr,E=Us;if(Qt=0,Xo=Nr=null,Us=0,(Je&6)!==0)throw Error(i(331));var w=Je;if(Je|=4,aS(p.current),iS(p,p.current,E,o),Je=w,zu(0,!1),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(Ei,p)}catch{}return!0}finally{se.p=d,J.T=u,wS(s,r)}}function AS(s,r,o){r=ai(o,r),r=Bp(s.stateNode,r,2),s=Sr(s,r,2),s!==null&&(va(s,2),ls(s))}function it(s,r,o){if(s.tag===3)AS(s,s,o);else for(;r!==null;){if(r.tag===3){AS(r,s,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ir===null||!Ir.has(u))){s=ai(o,s),o=RT(2),u=Sr(r,o,2),u!==null&&(IT(o,u,r,s),va(u,2),ls(u));break}}r=r.return}}function fg(s,r,o){var u=s.pingCache;if(u===null){u=s.pingCache=new nN;var d=new Set;u.set(r,d)}else d=u.get(r),d===void 0&&(d=new Set,u.set(r,d));d.has(o)||(sg=!0,d.add(o),s=oN.bind(null,s,r,o),r.then(s,s))}function oN(s,r,o){var u=s.pingCache;u!==null&&u.delete(r),s.pingedLanes|=s.suspendedLanes&o,s.warmLanes&=~o,ct===s&&(Be&o)===o&&(bt===4||bt===3&&(Be&62914560)===Be&&300>bn()-Sf?(Je&2)===0&&$o(s,0):rg|=o,Wo===Be&&(Wo=0)),ls(s)}function RS(s,r){r===0&&(r=bh()),s=ka(s,r),s!==null&&(va(s,r),ls(s))}function lN(s){var r=s.memoizedState,o=0;r!==null&&(o=r.retryLane),RS(s,o)}function uN(s,r){var o=0;switch(s.tag){case 31:case 13:var u=s.stateNode,d=s.memoizedState;d!==null&&(o=d.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(r),RS(s,o)}function cN(s,r){return Kt(s,r)}var Nf=null,Zo=null,dg=!1,xf=!1,mg=!1,Or=0;function ls(s){s!==Zo&&s.next===null&&(Zo===null?Nf=Zo=s:Zo=Zo.next=s),xf=!0,dg||(dg=!0,fN())}function zu(s,r){if(!mg&&xf){mg=!0;do for(var o=!1,u=Nf;u!==null;){if(s!==0){var d=u.pendingLanes;if(d===0)var p=0;else{var E=u.suspendedLanes,w=u.pingedLanes;p=(1<<31-Rt(42|s)+1)-1,p&=d&~(E&~w),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,OS(u,p))}else p=Be,p=qi(u,u===ct?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Ti(u,p)||(o=!0,OS(u,p));u=u.next}while(o);mg=!1}}function hN(){IS()}function IS(){xf=dg=!1;var s=0;Or!==0&&SN()&&(s=Or);for(var r=bn(),o=null,u=Nf;u!==null;){var d=u.next,p=NS(u,r);p===0?(u.next=null,o===null?Nf=d:o.next=d,d===null&&(Zo=o)):(o=u,(s!==0||(p&3)!==0)&&(xf=!0)),u=d}Qt!==0&&Qt!==5||zu(s),Or!==0&&(Or=0)}function NS(s,r){for(var o=s.suspendedLanes,u=s.pingedLanes,d=s.expirationTimes,p=s.pendingLanes&-62914561;0<p;){var E=31-Rt(p),w=1<<E,D=d[E];D===-1?((w&o)===0||(w&u)!==0)&&(d[E]=Hm(w,r)):D<=r&&(s.expiredLanes|=w),p&=~w}if(r=ct,o=Be,o=qi(s,s===r?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,o===0||s===r&&(nt===2||nt===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&rr(u),s.callbackNode=null,s.callbackPriority=0;if((o&3)===0||Ti(s,o)){if(r=o&-o,r===s.callbackPriority)return r;switch(u!==null&&rr(u),Ts(o)){case 2:case 8:o=Xl;break;case 32:o=ar;break;case 268435456:o=yh;break;default:o=ar}return u=xS.bind(null,s),o=Kt(o,u),s.callbackPriority=r,s.callbackNode=o,r}return u!==null&&u!==null&&rr(u),s.callbackPriority=2,s.callbackNode=null,2}function xS(s,r){if(Qt!==0&&Qt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var o=s.callbackNode;if(If()&&s.callbackNode!==o)return null;var u=Be;return u=qi(s,s===ct?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(hS(s,u,r),NS(s,bn()),s.callbackNode!=null&&s.callbackNode===o?xS.bind(null,s):null)}function OS(s,r){if(If())return null;hS(s,r,!0)}function fN(){wN(function(){(Je&6)!==0?Kt(Wl,hN):IS()})}function pg(){if(Or===0){var s=Uo;s===0&&(s=Fi,Fi<<=1,(Fi&261888)===0&&(Fi=256)),Or=s}return Or}function DS(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:bo(""+s)}function kS(s,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,s.id&&o.setAttribute("form",s.id),r.parentNode.insertBefore(o,r),s=new FormData(s),o.parentNode.removeChild(o),s}function dN(s,r,o,u,d){if(r==="submit"&&o&&o.stateNode===d){var p=DS((d[Zt]||null).action),E=u.submitter;E&&(r=(r=E[Zt]||null)?DS(r.formAction):E.getAttribute("formAction"),r!==null&&(p=r,E=null));var w=new ts("action","action",null,u,d);s.push({event:w,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Or!==0){var D=E?kS(d,E):new FormData(d);Mp(o,{pending:!0,data:D,method:d.method,action:p},null,D)}}else typeof p=="function"&&(w.preventDefault(),D=E?kS(d,E):new FormData(d),Mp(o,{pending:!0,data:D,method:d.method,action:p},p,D))},currentTarget:d}]})}}for(var gg=0;gg<Jm.length;gg++){var _g=Jm[gg],mN=_g.toLowerCase(),pN=_g[0].toUpperCase()+_g.slice(1);Ni(mN,"on"+pN)}Ni(cE,"onAnimationEnd"),Ni(hE,"onAnimationIteration"),Ni(fE,"onAnimationStart"),Ni("dblclick","onDoubleClick"),Ni("focusin","onFocus"),Ni("focusout","onBlur"),Ni(O1,"onTransitionRun"),Ni(D1,"onTransitionStart"),Ni(k1,"onTransitionCancel"),Ni(dE,"onTransitionEnd"),$i("onMouseEnter",["mouseout","mouseover"]),$i("onMouseLeave",["mouseout","mouseover"]),$i("onPointerEnter",["pointerout","pointerover"]),$i("onPointerLeave",["pointerout","pointerover"]),Xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bu));function PS(s,r){r=(r&4)!==0;for(var o=0;o<s.length;o++){var u=s[o],d=u.event;u=u.listeners;e:{var p=void 0;if(r)for(var E=u.length-1;0<=E;E--){var w=u[E],D=w.instance,q=w.currentTarget;if(w=w.listener,D!==p&&d.isPropagationStopped())break e;p=w,d.currentTarget=q;try{p(d)}catch(Z){qh(Z)}d.currentTarget=null,p=D}else for(E=0;E<u.length;E++){if(w=u[E],D=w.instance,q=w.currentTarget,w=w.listener,D!==p&&d.isPropagationStopped())break e;p=w,d.currentTarget=q;try{p(d)}catch(Z){qh(Z)}d.currentTarget=null,p=D}}}}function Ue(s,r){var o=r[yo];o===void 0&&(o=r[yo]=new Set);var u=s+"__bubble";o.has(u)||(MS(r,s,2,!1),o.add(u))}function yg(s,r,o){var u=0;r&&(u|=4),MS(o,s,u,r)}var Of="_reactListening"+Math.random().toString(36).slice(2);function vg(s){if(!s[Of]){s[Of]=!0,Zl.forEach(function(o){o!=="selectionchange"&&(gN.has(o)||yg(o,!1,s),yg(o,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[Of]||(r[Of]=!0,yg("selectionchange",!1,r))}}function MS(s,r,o,u){switch(cb(r)){case 2:var d=qN;break;case 8:d=GN;break;default:d=Pg}o=d.bind(null,r,o,s),d=void 0,!Ca||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),u?d!==void 0?s.addEventListener(r,o,{capture:!0,passive:d}):s.addEventListener(r,o,!0):d!==void 0?s.addEventListener(r,o,{passive:d}):s.addEventListener(r,o,!1)}function Eg(s,r,o,u,d){var p=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var w=u.stateNode.containerInfo;if(w===d)break;if(E===4)for(E=u.return;E!==null;){var D=E.tag;if((D===3||D===4)&&E.stateNode.containerInfo===d)return;E=E.return}for(;w!==null;){if(E=Qi(w),E===null)return;if(D=E.tag,D===5||D===6||D===26||D===27){u=p=E;continue e}w=w.parentNode}}u=u.return}fr(function(){var q=p,Z=ni(o),ne=[];e:{var Y=mE.get(s);if(Y!==void 0){var W=ts,de=s;switch(s){case"keypress":if(Ra(o)===0)break e;case"keydown":case"keyup":W=Bh;break;case"focusin":de="focus",W=Na;break;case"focusout":de="blur",W=Na;break;case"beforeblur":case"afterblur":W=Na;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=fu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Dh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=_;break;case cE:case hE:case fE:W=Ph;break;case dE:W=C;break;case"scroll":case"scrollend":W=hu;break;case"wheel":W=Q;break;case"copy":case"cut":case"paste":W=Mh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=ws;break;case"toggle":case"beforetoggle":W=Ie}var Te=(r&4)!==0,ot=!Te&&(s==="scroll"||s==="scrollend"),z=Te?Y!==null?Y+"Capture":null:Y;Te=[];for(var L=q,H;L!==null;){var te=L;if(H=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||H===null||z===null||(te=Ci(L,z),te!=null&&Te.push(Fu(L,te,H))),ot)break;L=L.return}0<Te.length&&(Y=new W(Y,de,null,o,Z),ne.push({event:Y,listeners:Te}))}}if((r&7)===0){e:{if(Y=s==="mouseover"||s==="pointerover",W=s==="mouseout"||s==="pointerout",Y&&o!==lu&&(de=o.relatedTarget||o.fromElement)&&(Qi(de)||de[Yi]))break e;if((W||Y)&&(Y=Z.window===Z?Z:(Y=Z.ownerDocument)?Y.defaultView||Y.parentWindow:window,W?(de=o.relatedTarget||o.toElement,W=q,de=de?Qi(de):null,de!==null&&(ot=l(de),Te=de.tag,de!==ot||Te!==5&&Te!==27&&Te!==6)&&(de=null)):(W=null,de=q),W!==de)){if(Te=fu,te="onMouseLeave",z="onMouseEnter",L="mouse",(s==="pointerout"||s==="pointerover")&&(Te=ws,te="onPointerLeave",z="onPointerEnter",L="pointer"),ot=W==null?Y:jn(W),H=de==null?Y:jn(de),Y=new Te(te,L+"leave",W,o,Z),Y.target=ot,Y.relatedTarget=H,te=null,Qi(Z)===q&&(Te=new Te(z,L+"enter",de,o,Z),Te.target=H,Te.relatedTarget=ot,te=Te),ot=te,W&&de)t:{for(Te=_N,z=W,L=de,H=0,te=z;te;te=Te(te))H++;te=0;for(var ge=L;ge;ge=Te(ge))te++;for(;0<H-te;)z=Te(z),H--;for(;0<te-H;)L=Te(L),te--;for(;H--;){if(z===L||L!==null&&z===L.alternate){Te=z;break t}z=Te(z),L=Te(L)}Te=null}else Te=null;W!==null&&LS(ne,Y,W,Te,!1),de!==null&&ot!==null&&LS(ne,ot,de,Te,!0)}}e:{if(Y=q?jn(q):window,W=Y.nodeName&&Y.nodeName.toLowerCase(),W==="select"||W==="input"&&Y.type==="file")var Ke=Zv;else if($v(Y))if(eE)Ke=I1;else{Ke=A1;var me=C1}else W=Y.nodeName,!W||W.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?q&&So(q.elementType)&&(Ke=Zv):Ke=R1;if(Ke&&(Ke=Ke(s,q))){Jv(ne,Ke,o,Z);break e}me&&me(s,Y,q),s==="focusout"&&q&&Y.type==="number"&&q.memoizedProps.value!=null&&ru(Y,"number",Y.value)}switch(me=q?jn(q):window,s){case"focusin":($v(me)||me.contentEditable==="true")&&(xo=me,Wm=q,_u=null);break;case"focusout":_u=Wm=xo=null;break;case"mousedown":Xm=!0;break;case"contextmenu":case"mouseup":case"dragend":Xm=!1,lE(ne,o,Z);break;case"selectionchange":if(x1)break;case"keydown":case"keyup":lE(ne,o,Z)}var xe;if($e)e:{switch(s){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else No?xa(s,o)&&(Fe="onCompositionEnd"):s==="keydown"&&o.keyCode===229&&(Fe="onCompositionStart");Fe&&(ss&&o.locale!=="ko"&&(No||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&No&&(xe=cu()):(es=Z,uu="value"in es?es.value:es.textContent,No=!0)),me=Df(q,Fe),0<me.length&&(Fe=new is(Fe,s,null,o,Z),ne.push({event:Fe,listeners:me}),xe?Fe.data=xe:(xe=Io(o),xe!==null&&(Fe.data=xe)))),(xe=si?T1(s,o):S1(s,o))&&(Fe=Df(q,"onBeforeInput"),0<Fe.length&&(me=new is("onBeforeInput","beforeinput",null,o,Z),ne.push({event:me,listeners:Fe}),me.data=xe)),dN(ne,s,q,o,Z)}PS(ne,r)})}function Fu(s,r,o){return{instance:s,listener:r,currentTarget:o}}function Df(s,r){for(var o=r+"Capture",u=[];s!==null;){var d=s,p=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||p===null||(d=Ci(s,o),d!=null&&u.unshift(Fu(s,d,p)),d=Ci(s,r),d!=null&&u.push(Fu(s,d,p))),s.tag===3)return u;s=s.return}return[]}function _N(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function LS(s,r,o,u,d){for(var p=r._reactName,E=[];o!==null&&o!==u;){var w=o,D=w.alternate,q=w.stateNode;if(w=w.tag,D!==null&&D===u)break;w!==5&&w!==26&&w!==27||q===null||(D=q,d?(q=Ci(o,p),q!=null&&E.unshift(Fu(o,q,D))):d||(q=Ci(o,p),q!=null&&E.push(Fu(o,q,D)))),o=o.return}E.length!==0&&s.push({event:r,listeners:E})}var yN=/\r\n?/g,vN=/\u0000|\uFFFD/g;function VS(s){return(typeof s=="string"?s:""+s).replace(yN,`
`).replace(vN,"")}function US(s,r){return r=VS(r),VS(s)===r}function at(s,r,o,u,d,p){switch(o){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||xn(s,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&xn(s,""+u);break;case"className":zn(s,"class",u);break;case"tabIndex":zn(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":zn(s,o,u);break;case"style":ou(s,u,p);break;case"data":if(r!=="object"){zn(s,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||o!=="href")){s.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=bo(""+u),s.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(r!=="input"&&at(s,r,"name",d.name,d,null),at(s,r,"formEncType",d.formEncType,d,null),at(s,r,"formMethod",d.formMethod,d,null),at(s,r,"formTarget",d.formTarget,d,null)):(at(s,r,"encType",d.encType,d,null),at(s,r,"method",d.method,d,null),at(s,r,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(o);break}u=bo(""+u),s.setAttribute(o,u);break;case"onClick":u!=null&&(s.onclick=wi);break;case"onScroll":u!=null&&Ue("scroll",s);break;case"onScrollEnd":u!=null&&Ue("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(i(60));s.innerHTML=o}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}o=bo(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""+u):s.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,""):s.removeAttribute(o);break;case"capture":case"download":u===!0?s.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(o,u):s.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(o,u):s.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(o):s.setAttribute(o,u);break;case"popover":Ue("beforetoggle",s),Ue("toggle",s),Eo(s,"popover",u);break;case"xlinkActuate":Lt(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Lt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Lt(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Lt(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Lt(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Lt(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Lt(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Lt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Lt(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Eo(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Oh.get(o)||o,Eo(s,o,u))}}function Tg(s,r,o,u,d,p){switch(o){case"style":ou(s,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(i(60));s.innerHTML=o}}break;case"children":typeof u=="string"?xn(s,u):(typeof u=="number"||typeof u=="bigint")&&xn(s,""+u);break;case"onScroll":u!=null&&Ue("scroll",s);break;case"onScrollEnd":u!=null&&Ue("scrollend",s);break;case"onClick":u!=null&&(s.onclick=wi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!eu.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),r=o.slice(2,d?o.length-7:void 0),p=s[Zt]||null,p=p!=null?p[o]:null,typeof p=="function"&&s.removeEventListener(r,p,d),typeof u=="function")){typeof p!="function"&&p!==null&&(o in s?s[o]=null:s.hasAttribute(o)&&s.removeAttribute(o)),s.addEventListener(r,u,d);break e}o in s?s[o]=u:u===!0?s.setAttribute(o,""):Eo(s,o,u)}}}function fn(s,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",s),Ue("load",s);var u=!1,d=!1,p;for(p in o)if(o.hasOwnProperty(p)){var E=o[p];if(E!=null)switch(p){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:at(s,r,p,E,o,null)}}d&&at(s,r,"srcSet",o.srcSet,o,null),u&&at(s,r,"src",o.src,o,null);return;case"input":Ue("invalid",s);var w=p=E=d=null,D=null,q=null;for(u in o)if(o.hasOwnProperty(u)){var Z=o[u];if(Z!=null)switch(u){case"name":d=Z;break;case"type":E=Z;break;case"checked":D=Z;break;case"defaultChecked":q=Z;break;case"value":p=Z;break;case"defaultValue":w=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,r));break;default:at(s,r,u,Z,o,null)}}Ih(s,p,w,D,q,E,d,!1);return;case"select":Ue("invalid",s),u=E=p=null;for(d in o)if(o.hasOwnProperty(d)&&(w=o[d],w!=null))switch(d){case"value":p=w;break;case"defaultValue":E=w;break;case"multiple":u=w;default:at(s,r,d,w,o,null)}r=p,o=E,s.multiple=!!u,r!=null?lr(s,!!u,r,!1):o!=null&&lr(s,!!u,o,!0);return;case"textarea":Ue("invalid",s),p=d=u=null;for(E in o)if(o.hasOwnProperty(E)&&(w=o[E],w!=null))switch(E){case"value":u=w;break;case"defaultValue":d=w;break;case"children":p=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:at(s,r,E,w,o,null)}ur(s,u,d,p);return;case"option":for(D in o)if(o.hasOwnProperty(D)&&(u=o[D],u!=null))switch(D){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:at(s,r,D,u,o,null)}return;case"dialog":Ue("beforetoggle",s),Ue("toggle",s),Ue("cancel",s),Ue("close",s);break;case"iframe":case"object":Ue("load",s);break;case"video":case"audio":for(u=0;u<Bu.length;u++)Ue(Bu[u],s);break;case"image":Ue("error",s),Ue("load",s);break;case"details":Ue("toggle",s);break;case"embed":case"source":case"link":Ue("error",s),Ue("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in o)if(o.hasOwnProperty(q)&&(u=o[q],u!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:at(s,r,q,u,o,null)}return;default:if(So(r)){for(Z in o)o.hasOwnProperty(Z)&&(u=o[Z],u!==void 0&&Tg(s,r,Z,u,o,void 0));return}}for(w in o)o.hasOwnProperty(w)&&(u=o[w],u!=null&&at(s,r,w,u,o,null))}function EN(s,r,o,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,p=null,E=null,w=null,D=null,q=null,Z=null;for(W in o){var ne=o[W];if(o.hasOwnProperty(W)&&ne!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":D=ne;default:u.hasOwnProperty(W)||at(s,r,W,null,u,ne)}}for(var Y in u){var W=u[Y];if(ne=o[Y],u.hasOwnProperty(Y)&&(W!=null||ne!=null))switch(Y){case"type":p=W;break;case"name":d=W;break;case"checked":q=W;break;case"defaultChecked":Z=W;break;case"value":E=W;break;case"defaultValue":w=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:W!==ne&&at(s,r,Y,W,u,ne)}}To(s,E,w,D,q,Z,p,d);return;case"select":W=E=w=Y=null;for(p in o)if(D=o[p],o.hasOwnProperty(p)&&D!=null)switch(p){case"value":break;case"multiple":W=D;default:u.hasOwnProperty(p)||at(s,r,p,null,u,D)}for(d in u)if(p=u[d],D=o[d],u.hasOwnProperty(d)&&(p!=null||D!=null))switch(d){case"value":Y=p;break;case"defaultValue":w=p;break;case"multiple":E=p;default:p!==D&&at(s,r,d,p,u,D)}r=w,o=E,u=W,Y!=null?lr(s,!!o,Y,!1):!!u!=!!o&&(r!=null?lr(s,!!o,r,!0):lr(s,!!o,o?[]:"",!1));return;case"textarea":W=Y=null;for(w in o)if(d=o[w],o.hasOwnProperty(w)&&d!=null&&!u.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:at(s,r,w,null,u,d)}for(E in u)if(d=u[E],p=o[E],u.hasOwnProperty(E)&&(d!=null||p!=null))switch(E){case"value":Y=d;break;case"defaultValue":W=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==p&&at(s,r,E,d,u,p)}Nh(s,Y,W);return;case"option":for(var de in o)if(Y=o[de],o.hasOwnProperty(de)&&Y!=null&&!u.hasOwnProperty(de))switch(de){case"selected":s.selected=!1;break;default:at(s,r,de,null,u,Y)}for(D in u)if(Y=u[D],W=o[D],u.hasOwnProperty(D)&&Y!==W&&(Y!=null||W!=null))switch(D){case"selected":s.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:at(s,r,D,Y,u,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in o)Y=o[Te],o.hasOwnProperty(Te)&&Y!=null&&!u.hasOwnProperty(Te)&&at(s,r,Te,null,u,Y);for(q in u)if(Y=u[q],W=o[q],u.hasOwnProperty(q)&&Y!==W&&(Y!=null||W!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,r));break;default:at(s,r,q,Y,u,W)}return;default:if(So(r)){for(var ot in o)Y=o[ot],o.hasOwnProperty(ot)&&Y!==void 0&&!u.hasOwnProperty(ot)&&Tg(s,r,ot,void 0,u,Y);for(Z in u)Y=u[Z],W=o[Z],!u.hasOwnProperty(Z)||Y===W||Y===void 0&&W===void 0||Tg(s,r,Z,Y,u,W);return}}for(var z in o)Y=o[z],o.hasOwnProperty(z)&&Y!=null&&!u.hasOwnProperty(z)&&at(s,r,z,null,u,Y);for(ne in u)Y=u[ne],W=o[ne],!u.hasOwnProperty(ne)||Y===W||Y==null&&W==null||at(s,r,ne,Y,u,W)}function jS(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function TN(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var d=o[u],p=d.transferSize,E=d.initiatorType,w=d.duration;if(p&&w&&jS(E)){for(E=0,w=d.responseEnd,u+=1;u<o.length;u++){var D=o[u],q=D.startTime;if(q>w)break;var Z=D.transferSize,ne=D.initiatorType;Z&&jS(ne)&&(D=D.responseEnd,E+=Z*(D<w?1:(w-q)/(D-q)))}if(--u,r+=8*(p+E)/(d.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Sg=null,bg=null;function kf(s){return s.nodeType===9?s:s.ownerDocument}function zS(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function BS(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function wg(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Cg=null;function SN(){var s=window.event;return s&&s.type==="popstate"?s===Cg?!1:(Cg=s,!0):(Cg=null,!1)}var FS=typeof setTimeout=="function"?setTimeout:void 0,bN=typeof clearTimeout=="function"?clearTimeout:void 0,HS=typeof Promise=="function"?Promise:void 0,wN=typeof queueMicrotask=="function"?queueMicrotask:typeof HS<"u"?function(s){return HS.resolve(null).then(s).catch(CN)}:FS;function CN(s){setTimeout(function(){throw s})}function Dr(s){return s==="head"}function qS(s,r){var o=r,u=0;do{var d=o.nextSibling;if(s.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"||o==="/&"){if(u===0){s.removeChild(d),il(r);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Hu(s.ownerDocument.documentElement);else if(o==="head"){o=s.ownerDocument.head,Hu(o);for(var p=o.firstChild;p;){var E=p.nextSibling,w=p.nodeName;p[Ki]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=E}}else o==="body"&&Hu(s.ownerDocument.body);o=d}while(o);il(r)}function GS(s,r){var o=s;s=0;do{var u=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(s===0)break;s--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||s++;o=u}while(o)}function Ag(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Ag(o),vo(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}s.removeChild(o)}}function AN(s,r,o,u){for(;s.nodeType===1;){var d=o;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[Ki])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(p=s.getAttribute("rel"),p==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(p!==d.rel||s.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||s.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||s.getAttribute("title")!==(d.title==null?null:d.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(p=s.getAttribute("src"),(p!==(d.src==null?null:d.src)||s.getAttribute("type")!==(d.type==null?null:d.type)||s.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&p&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var p=d.name==null?null:""+d.name;if(d.type==="hidden"&&s.getAttribute("name")===p)return s}else return s;if(s=hi(s.nextSibling),s===null)break}return null}function RN(s,r,o){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=hi(s.nextSibling),s===null))return null;return s}function YS(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=hi(s.nextSibling),s===null))return null;return s}function Rg(s){return s.data==="$?"||s.data==="$~"}function Ig(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function IN(s,r){var o=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||o.readyState!=="loading")r();else{var u=function(){r(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function hi(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var Ng=null;function KS(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var o=s.data;if(o==="/$"||o==="/&"){if(r===0)return hi(s.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}s=s.nextSibling}return null}function QS(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var o=s.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return s;r--}else o!=="/$"&&o!=="/&"||r++}s=s.previousSibling}return null}function WS(s,r,o){switch(r=kf(o),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Hu(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);vo(s)}var fi=new Map,XS=new Set;function Pf(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var js=se.d;se.d={f:NN,r:xN,D:ON,C:DN,L:kN,m:PN,X:LN,S:MN,M:VN};function NN(){var s=js.f(),r=Cf();return s||r}function xN(s){var r=ti(s);r!==null&&r.tag===5&&r.type==="form"?dT(r):js.r(s)}var el=typeof document>"u"?null:document;function $S(s,r,o){var u=el;if(u&&typeof r=="string"&&r){var d=Nn(r);d='link[rel="'+s+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),XS.has(d)||(XS.add(d),s={rel:s,crossOrigin:o,href:r},u.querySelector(d)===null&&(r=u.createElement("link"),fn(r,"link",s),Mt(r),u.head.appendChild(r)))}}function ON(s){js.D(s),$S("dns-prefetch",s,null)}function DN(s,r){js.C(s,r),$S("preconnect",s,r)}function kN(s,r,o){js.L(s,r,o);var u=el;if(u&&s&&r){var d='link[rel="preload"][as="'+Nn(r)+'"]';r==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+Nn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+Nn(o.imageSizes)+'"]')):d+='[href="'+Nn(s)+'"]';var p=d;switch(r){case"style":p=tl(s);break;case"script":p=nl(s)}fi.has(p)||(s=v({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:s,as:r},o),fi.set(p,s),u.querySelector(d)!==null||r==="style"&&u.querySelector(qu(p))||r==="script"&&u.querySelector(Gu(p))||(r=u.createElement("link"),fn(r,"link",s),Mt(r),u.head.appendChild(r)))}}function PN(s,r){js.m(s,r);var o=el;if(o&&s){var u=r&&typeof r.as=="string"?r.as:"script",d='link[rel="modulepreload"][as="'+Nn(u)+'"][href="'+Nn(s)+'"]',p=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=nl(s)}if(!fi.has(p)&&(s=v({rel:"modulepreload",href:s},r),fi.set(p,s),o.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Gu(p)))return}u=o.createElement("link"),fn(u,"link",s),Mt(u),o.head.appendChild(u)}}}function MN(s,r,o){js.S(s,r,o);var u=el;if(u&&s){var d=Wi(u).hoistableStyles,p=tl(s);r=r||"default";var E=d.get(p);if(!E){var w={loading:0,preload:null};if(E=u.querySelector(qu(p)))w.loading=5;else{s=v({rel:"stylesheet",href:s,"data-precedence":r},o),(o=fi.get(p))&&xg(s,o);var D=E=u.createElement("link");Mt(D),fn(D,"link",s),D._p=new Promise(function(q,Z){D.onload=q,D.onerror=Z}),D.addEventListener("load",function(){w.loading|=1}),D.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Mf(E,r,u)}E={type:"stylesheet",instance:E,count:1,state:w},d.set(p,E)}}}function LN(s,r){js.X(s,r);var o=el;if(o&&s){var u=Wi(o).hoistableScripts,d=nl(s),p=u.get(d);p||(p=o.querySelector(Gu(d)),p||(s=v({src:s,async:!0},r),(r=fi.get(d))&&Og(s,r),p=o.createElement("script"),Mt(p),fn(p,"link",s),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(d,p))}}function VN(s,r){js.M(s,r);var o=el;if(o&&s){var u=Wi(o).hoistableScripts,d=nl(s),p=u.get(d);p||(p=o.querySelector(Gu(d)),p||(s=v({src:s,async:!0,type:"module"},r),(r=fi.get(d))&&Og(s,r),p=o.createElement("script"),Mt(p),fn(p,"link",s),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(d,p))}}function JS(s,r,o,u){var d=(d=ve.current)?Pf(d):null;if(!d)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=tl(o.href),o=Wi(d).hoistableStyles,u=o.get(r),u||(u={type:"style",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){s=tl(o.href);var p=Wi(d).hoistableStyles,E=p.get(s);if(E||(d=d.ownerDocument||d,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(s,E),(p=d.querySelector(qu(s)))&&!p._p&&(E.instance=p,E.state.loading=5),fi.has(s)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},fi.set(s,o),p||UN(d,s,o,E.state))),r&&u===null)throw Error(i(528,""));return E}if(r&&u!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=nl(o),o=Wi(d).hoistableScripts,u=o.get(r),u||(u={type:"script",instance:null,count:0,state:null},o.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function tl(s){return'href="'+Nn(s)+'"'}function qu(s){return'link[rel="stylesheet"]['+s+"]"}function ZS(s){return v({},s,{"data-precedence":s.precedence,precedence:null})}function UN(s,r,o,u){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=s.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),fn(r,"link",o),Mt(r),s.head.appendChild(r))}function nl(s){return'[src="'+Nn(s)+'"]'}function Gu(s){return"script[async]"+s}function eb(s,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var u=s.querySelector('style[data-href~="'+Nn(o.href)+'"]');if(u)return r.instance=u,Mt(u),u;var d=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),Mt(u),fn(u,"style",d),Mf(u,o.precedence,s),r.instance=u;case"stylesheet":d=tl(o.href);var p=s.querySelector(qu(d));if(p)return r.state.loading|=4,r.instance=p,Mt(p),p;u=ZS(o),(d=fi.get(d))&&xg(u,d),p=(s.ownerDocument||s).createElement("link"),Mt(p);var E=p;return E._p=new Promise(function(w,D){E.onload=w,E.onerror=D}),fn(p,"link",u),r.state.loading|=4,Mf(p,o.precedence,s),r.instance=p;case"script":return p=nl(o.src),(d=s.querySelector(Gu(p)))?(r.instance=d,Mt(d),d):(u=o,(d=fi.get(p))&&(u=v({},o),Og(u,d)),s=s.ownerDocument||s,d=s.createElement("script"),Mt(d),fn(d,"link",u),s.head.appendChild(d),r.instance=d);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,Mf(u,o.precedence,s));return r.instance}function Mf(s,r,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,p=d,E=0;E<u.length;E++){var w=u[E];if(w.dataset.precedence===r)p=w;else if(p!==d)break}p?p.parentNode.insertBefore(s,p.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(s,r.firstChild))}function xg(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function Og(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var Lf=null;function tb(s,r,o){if(Lf===null){var u=new Map,d=Lf=new Map;d.set(o,u)}else d=Lf,u=d.get(o),u||(u=new Map,d.set(o,u));if(u.has(s))return u;for(u.set(s,null),o=o.getElementsByTagName(s),d=0;d<o.length;d++){var p=o[d];if(!(p[Ki]||p[Pt]||s==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var E=p.getAttribute(r)||"";E=s+E;var w=u.get(E);w?w.push(p):u.set(E,[p])}}return u}function nb(s,r,o){s=s.ownerDocument||s,s.head.insertBefore(o,r==="title"?s.querySelector("head > title"):null)}function jN(s,r,o){if(o===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function ib(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function zN(s,r,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var d=tl(u.href),p=r.querySelector(qu(d));if(p){r=p._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=Vf.bind(s),r.then(s,s)),o.state.loading|=4,o.instance=p,Mt(p);return}p=r.ownerDocument||r,u=ZS(u),(d=fi.get(d))&&xg(u,d),p=p.createElement("link"),Mt(p);var E=p;E._p=new Promise(function(w,D){E.onload=w,E.onerror=D}),fn(p,"link",u),o.instance=p}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(s.count++,o=Vf.bind(s),r.addEventListener("load",o),r.addEventListener("error",o))}}var Dg=0;function BN(s,r){return s.stylesheets&&s.count===0&&jf(s,s.stylesheets),0<s.count||0<s.imgCount?function(o){var u=setTimeout(function(){if(s.stylesheets&&jf(s,s.stylesheets),s.unsuspend){var p=s.unsuspend;s.unsuspend=null,p()}},6e4+r);0<s.imgBytes&&Dg===0&&(Dg=62500*TN());var d=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&jf(s,s.stylesheets),s.unsuspend)){var p=s.unsuspend;s.unsuspend=null,p()}},(s.imgBytes>Dg?50:800)+r);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(u),clearTimeout(d)}}:null}function Vf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)jf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Uf=null;function jf(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Uf=new Map,r.forEach(FN,s),Uf=null,Vf.call(s))}function FN(s,r){if(!(r.state.loading&4)){var o=Uf.get(s);if(o)var u=o.get(null);else{o=new Map,Uf.set(s,o);for(var d=s.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<d.length;p++){var E=d[p];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}d=r.instance,E=d.getAttribute("data-precedence"),p=o.get(E)||u,p===u&&o.set(null,d),o.set(E,d),this.count++,u=Vf.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),p?p.parentNode.insertBefore(d,p.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(d,s.firstChild)),r.state.loading|=4}}var Yu={$$typeof:ee,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function HN(s,r,o,u,d,p,E,w,D){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gi(0),this.hiddenUpdates=Gi(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=p,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function sb(s,r,o,u,d,p,E,w,D,q,Z,ne){return s=new HN(s,r,o,E,D,q,Z,ne,w),r=1,p===!0&&(r|=24),p=Fn(3,null,null,r),s.current=p,p.stateNode=s,r=hp(),r.refCount++,s.pooledCache=r,r.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:r},pp(p),s}function rb(s){return s?(s=ko,s):ko}function ab(s,r,o,u,d,p){d=rb(d),u.context===null?u.context=d:u.pendingContext=d,u=Tr(r),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=Sr(s,u,r),o!==null&&(Mn(o,s,r),wu(o,s,r))}function ob(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var o=s.retryLane;s.retryLane=o!==0&&o<r?o:r}}function kg(s,r){ob(s,r),(s=s.alternate)&&ob(s,r)}function lb(s){if(s.tag===13||s.tag===31){var r=ka(s,67108864);r!==null&&Mn(r,s,67108864),kg(s,67108864)}}function ub(s){if(s.tag===13||s.tag===31){var r=Kn();r=Ta(r);var o=ka(s,r);o!==null&&Mn(o,s,r),kg(s,r)}}var zf=!0;function qN(s,r,o,u){var d=J.T;J.T=null;var p=se.p;try{se.p=2,Pg(s,r,o,u)}finally{se.p=p,J.T=d}}function GN(s,r,o,u){var d=J.T;J.T=null;var p=se.p;try{se.p=8,Pg(s,r,o,u)}finally{se.p=p,J.T=d}}function Pg(s,r,o,u){if(zf){var d=Mg(u);if(d===null)Eg(s,r,u,Bf,o),hb(s,u);else if(KN(d,s,r,o,u))u.stopPropagation();else if(hb(s,u),r&4&&-1<YN.indexOf(s)){for(;d!==null;){var p=ti(d);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var E=Hi(p.pendingLanes);if(E!==0){var w=p;for(w.pendingLanes|=2,w.entangledLanes|=2;E;){var D=1<<31-Rt(E);w.entanglements[1]|=D,E&=~D}ls(p),(Je&6)===0&&(bf=bn()+500,zu(0))}}break;case 31:case 13:w=ka(p,2),w!==null&&Mn(w,p,2),Cf(),kg(p,2)}if(p=Mg(u),p===null&&Eg(s,r,u,Bf,o),p===d)break;d=p}d!==null&&u.stopPropagation()}else Eg(s,r,u,null,o)}}function Mg(s){return s=ni(s),Lg(s)}var Bf=null;function Lg(s){if(Bf=null,s=Qi(s),s!==null){var r=l(s);if(r===null)s=null;else{var o=r.tag;if(o===13){if(s=c(r),s!==null)return s;s=null}else if(o===31){if(s=f(r),s!==null)return s;s=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return Bf=s,null}function cb(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_a()){case Wl:return 2;case Xl:return 8;case ar:case Fm:return 32;case yh:return 268435456;default:return 32}default:return 32}}var Vg=!1,kr=null,Pr=null,Mr=null,Ku=new Map,Qu=new Map,Lr=[],YN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hb(s,r){switch(s){case"focusin":case"focusout":kr=null;break;case"dragenter":case"dragleave":Pr=null;break;case"mouseover":case"mouseout":Mr=null;break;case"pointerover":case"pointerout":Ku.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qu.delete(r.pointerId)}}function Wu(s,r,o,u,d,p){return s===null||s.nativeEvent!==p?(s={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[d]},r!==null&&(r=ti(r),r!==null&&lb(r)),s):(s.eventSystemFlags|=u,r=s.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),s)}function KN(s,r,o,u,d){switch(r){case"focusin":return kr=Wu(kr,s,r,o,u,d),!0;case"dragenter":return Pr=Wu(Pr,s,r,o,u,d),!0;case"mouseover":return Mr=Wu(Mr,s,r,o,u,d),!0;case"pointerover":var p=d.pointerId;return Ku.set(p,Wu(Ku.get(p)||null,s,r,o,u,d)),!0;case"gotpointercapture":return p=d.pointerId,Qu.set(p,Wu(Qu.get(p)||null,s,r,o,u,d)),!0}return!1}function fb(s){var r=Qi(s.target);if(r!==null){var o=l(r);if(o!==null){if(r=o.tag,r===13){if(r=c(o),r!==null){s.blockedOn=r,Si(s.priority,function(){ub(o)});return}}else if(r===31){if(r=f(o),r!==null){s.blockedOn=r,Si(s.priority,function(){ub(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){s.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ff(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var o=Mg(s.nativeEvent);if(o===null){o=s.nativeEvent;var u=new o.constructor(o.type,o);lu=u,o.target.dispatchEvent(u),lu=null}else return r=ti(o),r!==null&&lb(r),s.blockedOn=o,!1;r.shift()}return!0}function db(s,r,o){Ff(s)&&o.delete(r)}function QN(){Vg=!1,kr!==null&&Ff(kr)&&(kr=null),Pr!==null&&Ff(Pr)&&(Pr=null),Mr!==null&&Ff(Mr)&&(Mr=null),Ku.forEach(db),Qu.forEach(db)}function Hf(s,r){s.blockedOn===r&&(s.blockedOn=null,Vg||(Vg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,QN)))}var qf=null;function mb(s){qf!==s&&(qf=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){qf===s&&(qf=null);for(var r=0;r<s.length;r+=3){var o=s[r],u=s[r+1],d=s[r+2];if(typeof u!="function"){if(Lg(u||o)===null)continue;break}var p=ti(o);p!==null&&(s.splice(r,3),r-=3,Mp(p,{pending:!0,data:d,method:o.method,action:u},u,d))}}))}function il(s){function r(D){return Hf(D,s)}kr!==null&&Hf(kr,s),Pr!==null&&Hf(Pr,s),Mr!==null&&Hf(Mr,s),Ku.forEach(r),Qu.forEach(r);for(var o=0;o<Lr.length;o++){var u=Lr[o];u.blockedOn===s&&(u.blockedOn=null)}for(;0<Lr.length&&(o=Lr[0],o.blockedOn===null);)fb(o),o.blockedOn===null&&Lr.shift();if(o=(s.ownerDocument||s).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var d=o[u],p=o[u+1],E=d[Zt]||null;if(typeof p=="function")E||mb(o);else if(E){var w=null;if(p&&p.hasAttribute("formAction")){if(d=p,E=p[Zt]||null)w=E.formAction;else if(Lg(d)!==null)continue}else w=E.action;typeof w=="function"?o[u+1]=w:(o.splice(u,3),u-=3),mb(o)}}}function pb(){function s(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(E){return d=E})},focusReset:"manual",scroll:"manual"})}function r(){d!==null&&(d(),d=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,d=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),d!==null&&(d(),d=null)}}}function Ug(s){this._internalRoot=s}Gf.prototype.render=Ug.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,u=Kn();ab(o,u,s,r,null,null)},Gf.prototype.unmount=Ug.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;ab(s.current,2,null,s,null,null),Cf(),r[Yi]=null}};function Gf(s){this._internalRoot=s}Gf.prototype.unstable_scheduleHydration=function(s){if(s){var r=wh();s={blockedOn:null,target:s,priority:r};for(var o=0;o<Lr.length&&r!==0&&r<Lr[o].priority;o++);Lr.splice(o,0,s),o===0&&fb(s)}};var gb=e.version;if(gb!=="19.2.0")throw Error(i(527,gb,"19.2.0"));se.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=g(r),s=s!==null?y(s):null,s=s===null?null:s.stateNode,s};var WN={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yf.isDisabled&&Yf.supportsFiber)try{Ei=Yf.inject(WN),on=Yf}catch{}}return $u.createRoot=function(s,r){if(!a(s))throw Error(i(299));var o=!1,u="",d=bT,p=wT,E=CT;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(p=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError)),r=sb(s,1,!1,null,null,o,u,null,d,p,E,pb),s[Yi]=r.current,vg(s),new Ug(r)},$u.hydrateRoot=function(s,r,o){if(!a(s))throw Error(i(299));var u=!1,d="",p=bT,E=wT,w=CT,D=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.formState!==void 0&&(D=o.formState)),r=sb(s,1,!0,r,o??null,u,d,D,p,E,w,pb),r.context=rb(null),o=r.current,u=Kn(),u=Ta(u),d=Tr(u),d.callback=null,Sr(o,d,u),o=u,r.current.lanes=o,va(r,o),ls(r),s[Yi]=r.current,vg(s),new Gf(r)},$u.version="19.2.0",$u}var Ab;function rx(){if(Ab)return Bg.exports;Ab=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Bg.exports=sx(),Bg.exports}var ax=rx();var Rb="popstate";function ox(n={}){function e(a,l){let{pathname:c="/",search:f="",hash:m=""}=ro(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),v_("",{pathname:c,search:f,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let c=a.document.querySelector("base"),f="";if(c&&c.getAttribute("href")){let m=a.location.href,g=m.indexOf("#");f=g===-1?m:m.slice(0,g)}return f+"#"+(typeof l=="string"?l:Cc(l))}function i(a,l){Jn(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return ux(e,t,i,n)}function vt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Jn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function lx(){return Math.random().toString(36).substring(2,10)}function Ib(n,e){return{usr:n.state,key:n.key,idx:e}}function v_(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ro(e):e,state:t,key:e&&e.key||i||lx()}}function Cc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ro(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function ux(n,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,c=a.history,f="POP",m=null,g=y();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function y(){return(c.state||{idx:null}).idx}function v(){f="POP";let V=y(),$=V==null?null:V-g;g=V,m&&m({action:f,location:j.location,delta:$})}function b(V,$){f="PUSH";let K=v_(j.location,V,$);t&&t(K,V),g=y()+1;let ee=Ib(K,g),ue=j.createHref(K);try{c.pushState(ee,"",ue)}catch(_e){if(_e instanceof DOMException&&_e.name==="DataCloneError")throw _e;a.location.assign(ue)}l&&m&&m({action:f,location:j.location,delta:1})}function A(V,$){f="REPLACE";let K=v_(j.location,V,$);t&&t(K,V),g=y();let ee=Ib(K,g),ue=j.createHref(K);c.replaceState(ee,"",ue),l&&m&&m({action:f,location:j.location,delta:0})}function I(V){return cx(V)}let j={get action(){return f},get location(){return n(a,c)},listen(V){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(Rb,v),m=V,()=>{a.removeEventListener(Rb,v),m=null}},createHref(V){return e(a,V)},createURL:I,encodeLocation(V){let $=I(V);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:b,replace:A,go(V){return c.go(V)}};return j}function cx(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),vt(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Cc(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function Q0(n,e,t="/"){return hx(n,e,t,!1)}function hx(n,e,t,i){let a=typeof e=="string"?ro(e):e,l=Xs(a.pathname||"/",t);if(l==null)return null;let c=W0(n);fx(c);let f=null;for(let m=0;f==null&&m<c.length;++m){let g=bx(l);f=Tx(c[m],g,i)}return f}function W0(n,e=[],t=[],i="",a=!1){let l=(c,f,m=a,g)=>{let y={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(i)&&m)return;vt(y.relativePath.startsWith(i),`Absolute route path "${y.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(i.length)}let v=qs([i,y.relativePath]),b=t.concat(y);c.children&&c.children.length>0&&(vt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),W0(c.children,e,b,v,m)),!(c.path==null&&!c.index)&&e.push({path:v,score:vx(v,c.index),routesMeta:b})};return n.forEach((c,f)=>{if(c.path===""||!c.path?.includes("?"))l(c,f);else for(let m of X0(c.path))l(c,f,!0,m)}),e}function X0(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let c=X0(i.join("/")),f=[];return f.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&f.push(...c),f.map(m=>n.startsWith("/")&&m===""?"/":m)}function fx(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Ex(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var dx=/^:[\w-]+$/,mx=3,px=2,gx=1,_x=10,yx=-2,Nb=n=>n==="*";function vx(n,e){let t=n.split("/"),i=t.length;return t.some(Nb)&&(i+=yx),e&&(i+=px),t.filter(a=>!Nb(a)).reduce((a,l)=>a+(dx.test(l)?mx:l===""?gx:_x),i)}function Ex(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function Tx(n,e,t=!1){let{routesMeta:i}=n,a={},l="/",c=[];for(let f=0;f<i.length;++f){let m=i[f],g=f===i.length-1,y=l==="/"?e:e.slice(l.length)||"/",v=_d({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},y),b=m.route;if(!v&&g&&t&&!i[i.length-1].route.index&&(v=_d({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!v)return null;Object.assign(a,v.params),c.push({params:a,pathname:qs([l,v.pathname]),pathnameBase:Ix(qs([l,v.pathnameBase])),route:b}),v.pathnameBase!=="/"&&(l=qs([l,v.pathnameBase]))}return c}function _d(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=Sx(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:i.reduce((g,{paramName:y,isOptional:v},b)=>{if(y==="*"){let I=f[b]||"";c=l.slice(0,l.length-I.length).replace(/(.)\/+$/,"$1")}const A=f[b];return v&&!A?g[y]=void 0:g[y]=(A||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function Sx(n,e=!1,t=!0){Jn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,m)=>(i.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function bx(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Jn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Xs(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}var wx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Cx=n=>wx.test(n);function Ax(n,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof n=="string"?ro(n):n,l;if(t)if(Cx(t))l=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),Jn(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?l=xb(t.substring(1),"/"):l=xb(t,e)}else l=e;return{pathname:l,search:Nx(i),hash:xx(a)}}function xb(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Gg(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Rx(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function uy(n){let e=Rx(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function cy(n,e,t,i=!1){let a;typeof n=="string"?a=ro(n):(a={...n},vt(!a.pathname||!a.pathname.includes("?"),Gg("?","pathname","search",a)),vt(!a.pathname||!a.pathname.includes("#"),Gg("#","pathname","hash",a)),vt(!a.search||!a.search.includes("#"),Gg("#","search","hash",a)));let l=n===""||a.pathname==="",c=l?"/":a.pathname,f;if(c==null)f=t;else{let v=e.length-1;if(!i&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),v-=1;a.pathname=b.join("/")}f=v>=0?e[v]:"/"}let m=Ax(a,f),g=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||y)&&(m.pathname+="/"),m}var qs=n=>n.join("/").replace(/\/\/+/g,"/"),Ix=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Nx=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,xx=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Ox(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var $0=["POST","PUT","PATCH","DELETE"];new Set($0);var Dx=["GET",...$0];new Set(Dx);var Ml=k.createContext(null);Ml.displayName="DataRouter";var em=k.createContext(null);em.displayName="DataRouterState";k.createContext(!1);var J0=k.createContext({isTransitioning:!1});J0.displayName="ViewTransition";var kx=k.createContext(new Map);kx.displayName="Fetchers";var Px=k.createContext(null);Px.displayName="Await";var Ui=k.createContext(null);Ui.displayName="Navigation";var Yc=k.createContext(null);Yc.displayName="Location";var yi=k.createContext({outlet:null,matches:[],isDataRoute:!1});yi.displayName="Route";var hy=k.createContext(null);hy.displayName="RouteError";function Mx(n,{relative:e}={}){vt(Ll(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=k.useContext(Ui),{hash:a,pathname:l,search:c}=Kc(n,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:qs([t,l])),i.createHref({pathname:f,search:c,hash:a})}function Ll(){return k.useContext(Yc)!=null}function ha(){return vt(Ll(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(Yc).location}var Z0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function eC(n){k.useContext(Ui).static||k.useLayoutEffect(n)}function fy(){let{isDataRoute:n}=k.useContext(yi);return n?Xx():Lx()}function Lx(){vt(Ll(),"useNavigate() may be used only in the context of a <Router> component.");let n=k.useContext(Ml),{basename:e,navigator:t}=k.useContext(Ui),{matches:i}=k.useContext(yi),{pathname:a}=ha(),l=JSON.stringify(uy(i)),c=k.useRef(!1);return eC(()=>{c.current=!0}),k.useCallback((m,g={})=>{if(Jn(c.current,Z0),!c.current)return;if(typeof m=="number"){t.go(m);return}let y=cy(m,JSON.parse(l),a,g.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:qs([e,y.pathname])),(g.replace?t.replace:t.push)(y,g.state,g)},[e,t,l,a,n])}var Vx=k.createContext(null);function Ux(n){let e=k.useContext(yi).outlet;return k.useMemo(()=>e&&k.createElement(Vx.Provider,{value:n},e),[e,n])}function fa(){let{matches:n}=k.useContext(yi),e=n[n.length-1];return e?e.params:{}}function Kc(n,{relative:e}={}){let{matches:t}=k.useContext(yi),{pathname:i}=ha(),a=JSON.stringify(uy(t));return k.useMemo(()=>cy(n,JSON.parse(a),i,e==="path"),[n,a,i,e])}function jx(n,e){return tC(n,e)}function tC(n,e,t,i,a){vt(Ll(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=k.useContext(Ui),{matches:c}=k.useContext(yi),f=c[c.length-1],m=f?f.params:{},g=f?f.pathname:"/",y=f?f.pathnameBase:"/",v=f&&f.route;{let K=v&&v.path||"";nC(g,!v||K.endsWith("*")||K.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${K}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${K}"> to <Route path="${K==="/"?"*":`${K}/*`}">.`)}let b=ha(),A;if(e){let K=typeof e=="string"?ro(e):e;vt(y==="/"||K.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${K.pathname}" was given in the \`location\` prop.`),A=K}else A=b;let I=A.pathname||"/",j=I;if(y!=="/"){let K=y.replace(/^\//,"").split("/");j="/"+I.replace(/^\//,"").split("/").slice(K.length).join("/")}let V=Q0(n,{pathname:j});Jn(v||V!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),Jn(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let $=qx(V&&V.map(K=>Object.assign({},K,{params:Object.assign({},m,K.params),pathname:qs([y,l.encodeLocation?l.encodeLocation(K.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?y:qs([y,l.encodeLocation?l.encodeLocation(K.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathnameBase])})),c,t,i,a);return e&&$?k.createElement(Yc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},$):$}function zx(){let n=Wx(),e=Ox(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:l},"ErrorBoundary")," or"," ",k.createElement("code",{style:l},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),t?k.createElement("pre",{style:a},t):null,c)}var Bx=k.createElement(zx,null),Fx=class extends k.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?k.createElement(yi.Provider,{value:this.props.routeContext},k.createElement(hy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Hx({routeContext:n,match:e,children:t}){let i=k.useContext(Ml);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(yi.Provider,{value:n},t)}function qx(n,e=[],t=null,i=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t?.errors;if(c!=null){let y=l.findIndex(v=>v.route.id&&c?.[v.route.id]!==void 0);vt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let f=!1,m=-1;if(t)for(let y=0;y<l.length;y++){let v=l[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(m=y),v.route.id){let{loaderData:b,errors:A}=t,I=v.route.loader&&!b.hasOwnProperty(v.route.id)&&(!A||A[v.route.id]===void 0);if(v.route.lazy||I){f=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}let g=t&&i?(y,v)=>{i(y,{location:t.location,params:t.matches?.[0]?.params??{},errorInfo:v})}:void 0;return l.reduceRight((y,v,b)=>{let A,I=!1,j=null,V=null;t&&(A=c&&v.route.id?c[v.route.id]:void 0,j=v.route.errorElement||Bx,f&&(m<0&&b===0?(nC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,V=null):m===b&&(I=!0,V=v.route.hydrateFallbackElement||null)));let $=e.concat(l.slice(0,b+1)),K=()=>{let ee;return A?ee=j:I?ee=V:v.route.Component?ee=k.createElement(v.route.Component,null):v.route.element?ee=v.route.element:ee=y,k.createElement(Hx,{match:v,routeContext:{outlet:y,matches:$,isDataRoute:t!=null},children:ee})};return t&&(v.route.ErrorBoundary||v.route.errorElement||b===0)?k.createElement(Fx,{location:t.location,revalidation:t.revalidation,component:j,error:A,children:K(),routeContext:{outlet:null,matches:$,isDataRoute:!0},onError:g}):K()},null)}function dy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Gx(n){let e=k.useContext(Ml);return vt(e,dy(n)),e}function Yx(n){let e=k.useContext(em);return vt(e,dy(n)),e}function Kx(n){let e=k.useContext(yi);return vt(e,dy(n)),e}function my(n){let e=Kx(n),t=e.matches[e.matches.length-1];return vt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function Qx(){return my("useRouteId")}function Wx(){let n=k.useContext(hy),e=Yx("useRouteError"),t=my("useRouteError");return n!==void 0?n:e.errors?.[t]}function Xx(){let{router:n}=Gx("useNavigate"),e=my("useNavigate"),t=k.useRef(!1);return eC(()=>{t.current=!0}),k.useCallback(async(a,l={})=>{Jn(t.current,Z0),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var Ob={};function nC(n,e,t){!e&&!Ob[n]&&(Ob[n]=!0,Jn(!1,t))}k.memo($x);function $x({routes:n,future:e,state:t,unstable_onError:i}){return tC(n,void 0,t,i,e)}function iC({to:n,replace:e,state:t,relative:i}){vt(Ll(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=k.useContext(Ui);Jn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=k.useContext(yi),{pathname:c}=ha(),f=fy(),m=cy(n,uy(l),c,i==="path"),g=JSON.stringify(m);return k.useEffect(()=>{f(JSON.parse(g),{replace:e,state:t,relative:i})},[f,g,i,e,t]),null}function Jx(n){return Ux(n.context)}function Qn(n){vt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Zx({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1}){vt(!Ll(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),f=k.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=ro(t));let{pathname:m="/",search:g="",hash:y="",state:v=null,key:b="default"}=t,A=k.useMemo(()=>{let I=Xs(m,c);return I==null?null:{location:{pathname:I,search:g,hash:y,state:v,key:b},navigationType:i}},[c,m,g,y,v,b,i]);return Jn(A!=null,`<Router basename="${c}"> is not able to match the URL "${m}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:k.createElement(Ui.Provider,{value:f},k.createElement(Yc.Provider,{children:e,value:A}))}function eO({children:n,location:e}){return jx(E_(n),e)}function E_(n,e=[]){let t=[];return k.Children.forEach(n,(i,a)=>{if(!k.isValidElement(i))return;let l=[...e,a];if(i.type===k.Fragment){t.push.apply(t,E_(i.props.children,l));return}vt(i.type===Qn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),vt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=E_(i.props.children,l)),t.push(c)}),t}var sd="get",rd="application/x-www-form-urlencoded";function tm(n){return n!=null&&typeof n.tagName=="string"}function tO(n){return tm(n)&&n.tagName.toLowerCase()==="button"}function nO(n){return tm(n)&&n.tagName.toLowerCase()==="form"}function iO(n){return tm(n)&&n.tagName.toLowerCase()==="input"}function sO(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function rO(n,e){return n.button===0&&(!e||e==="_self")&&!sO(n)}var Kf=null;function aO(){if(Kf===null)try{new FormData(document.createElement("form"),0),Kf=!1}catch{Kf=!0}return Kf}var oO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Yg(n){return n!=null&&!oO.has(n)?(Jn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${rd}"`),null):n}function lO(n,e){let t,i,a,l,c;if(nO(n)){let f=n.getAttribute("action");i=f?Xs(f,e):null,t=n.getAttribute("method")||sd,a=Yg(n.getAttribute("enctype"))||rd,l=new FormData(n)}else if(tO(n)||iO(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||f.getAttribute("action");if(i=m?Xs(m,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||sd,a=Yg(n.getAttribute("formenctype"))||Yg(f.getAttribute("enctype"))||rd,l=new FormData(f,n),!aO()){let{name:g,type:y,value:v}=n;if(y==="image"){let b=g?`${g}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else g&&l.append(g,v)}}else{if(tm(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=sd,i=null,a=rd,c=n}return l&&a==="text/plain"&&(c=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function py(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function uO(n,e,t){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&Xs(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function cO(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function hO(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function fO(n,e,t){let i=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await cO(l,t);return c.links?c.links():[]}return[]}));return gO(i.flat(1).filter(hO).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Db(n,e,t,i,a,l){let c=(m,g)=>t[g]?m.route.id!==t[g].route.id:!0,f=(m,g)=>t[g].pathname!==m.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==m.params["*"];return l==="assets"?e.filter((m,g)=>c(m,g)||f(m,g)):l==="data"?e.filter((m,g)=>{let y=i.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(c(m,g)||f(m,g))return!0;if(m.route.shouldRevalidate){let v=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function dO(n,e,{includeHydrateFallback:t}={}){return mO(n.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function mO(n){return[...new Set(n)]}function pO(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function gO(n,e){let t=new Set;return new Set(e),n.reduce((i,a)=>{let l=JSON.stringify(pO(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}function sC(){let n=k.useContext(Ml);return py(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function _O(){let n=k.useContext(em);return py(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var gy=k.createContext(void 0);gy.displayName="FrameworkContext";function rC(){let n=k.useContext(gy);return py(n,"You must render this element inside a <HydratedRouter> element"),n}function yO(n,e){let t=k.useContext(gy),[i,a]=k.useState(!1),[l,c]=k.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:g,onMouseLeave:y,onTouchStart:v}=e,b=k.useRef(null);k.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let j=$=>{$.forEach(K=>{c(K.isIntersecting)})},V=new IntersectionObserver(j,{threshold:.5});return b.current&&V.observe(b.current),()=>{V.disconnect()}}},[n]),k.useEffect(()=>{if(i){let j=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(j)}}},[i]);let A=()=>{a(!0)},I=()=>{a(!1),c(!1)};return t?n!=="intent"?[l,b,{}]:[l,b,{onFocus:Ju(f,A),onBlur:Ju(m,I),onMouseEnter:Ju(g,A),onMouseLeave:Ju(y,I),onTouchStart:Ju(v,A)}]:[!1,b,{}]}function Ju(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function vO({page:n,...e}){let{router:t}=sC(),i=k.useMemo(()=>Q0(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?k.createElement(TO,{page:n,matches:i,...e}):null}function EO(n){let{manifest:e,routeModules:t}=rC(),[i,a]=k.useState([]);return k.useEffect(()=>{let l=!1;return fO(n,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[n,e,t]),i}function TO({page:n,matches:e,...t}){let i=ha(),{manifest:a,routeModules:l}=rC(),{basename:c}=sC(),{loaderData:f,matches:m}=_O(),g=k.useMemo(()=>Db(n,e,m,a,i,"data"),[n,e,m,a,i]),y=k.useMemo(()=>Db(n,e,m,a,i,"assets"),[n,e,m,a,i]),v=k.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let I=new Set,j=!1;if(e.forEach($=>{let K=a.routes[$.route.id];!K||!K.hasLoader||(!g.some(ee=>ee.route.id===$.route.id)&&$.route.id in f&&l[$.route.id]?.shouldRevalidate||K.hasClientLoader?j=!0:I.add($.route.id))}),I.size===0)return[];let V=uO(n,c,"data");return j&&I.size>0&&V.searchParams.set("_routes",e.filter($=>I.has($.route.id)).map($=>$.route.id).join(",")),[V.pathname+V.search]},[c,f,i,a,g,e,n,l]),b=k.useMemo(()=>dO(y,a),[y,a]),A=EO(y);return k.createElement(k.Fragment,null,v.map(I=>k.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...t})),b.map(I=>k.createElement("link",{key:I,rel:"modulepreload",href:I,...t})),A.map(({key:I,link:j})=>k.createElement("link",{key:I,nonce:t.nonce,...j})))}function SO(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var aC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{aC&&(window.__reactRouterVersion="7.9.6")}catch{}function bO({basename:n,children:e,window:t}){let i=k.useRef();i.current==null&&(i.current=ox({window:t,v5Compat:!0}));let a=i.current,[l,c]=k.useState({action:a.action,location:a.location}),f=k.useCallback(m=>{k.startTransition(()=>c(m))},[c]);return k.useLayoutEffect(()=>a.listen(f),[a,f]),k.createElement(Zx,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a})}var oC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Di=k.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:c,state:f,target:m,to:g,preventScrollReset:y,viewTransition:v,...b},A){let{basename:I}=k.useContext(Ui),j=typeof g=="string"&&oC.test(g),V,$=!1;if(typeof g=="string"&&j&&(V=g,aC))try{let N=new URL(window.location.href),U=g.startsWith("//")?new URL(N.protocol+g):new URL(g),P=Xs(U.pathname,I);U.origin===N.origin&&P!=null?g=P+U.search+U.hash:$=!0}catch{Jn(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let K=Mx(g,{relative:a}),[ee,ue,_e]=yO(i,b),Se=RO(g,{replace:c,state:f,target:m,preventScrollReset:y,relative:a,viewTransition:v});function x(N){e&&e(N),N.defaultPrevented||Se(N)}let R=k.createElement("a",{...b,..._e,href:V||K,onClick:$||l?e:x,ref:SO(A,ue),target:m,"data-discover":!j&&t==="render"?"true":void 0});return ee&&!j?k.createElement(k.Fragment,null,R,k.createElement(vO,{page:K})):R});Di.displayName="Link";var wO=k.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:f,children:m,...g},y){let v=Kc(c,{relative:g.relative}),b=ha(),A=k.useContext(em),{navigator:I,basename:j}=k.useContext(Ui),V=A!=null&&DO(v)&&f===!0,$=I.encodeLocation?I.encodeLocation(v).pathname:v.pathname,K=b.pathname,ee=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||(K=K.toLowerCase(),ee=ee?ee.toLowerCase():null,$=$.toLowerCase()),ee&&j&&(ee=Xs(ee,j)||ee);const ue=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let _e=K===$||!a&&K.startsWith($)&&K.charAt(ue)==="/",Se=ee!=null&&(ee===$||!a&&ee.startsWith($)&&ee.charAt($.length)==="/"),x={isActive:_e,isPending:Se,isTransitioning:V},R=_e?e:void 0,N;typeof i=="function"?N=i(x):N=[i,_e?"active":null,Se?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let U=typeof l=="function"?l(x):l;return k.createElement(Di,{...g,"aria-current":R,className:N,ref:y,style:U,to:c,viewTransition:f},typeof m=="function"?m(x):m)});wO.displayName="NavLink";var CO=k.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:c=sd,action:f,onSubmit:m,relative:g,preventScrollReset:y,viewTransition:v,...b},A)=>{let I=xO(),j=OO(f,{relative:g}),V=c.toLowerCase()==="get"?"get":"post",$=typeof f=="string"&&oC.test(f),K=ee=>{if(m&&m(ee),ee.defaultPrevented)return;ee.preventDefault();let ue=ee.nativeEvent.submitter,_e=ue?.getAttribute("formmethod")||c;I(ue||ee.currentTarget,{fetcherKey:e,method:_e,navigate:t,replace:a,state:l,relative:g,preventScrollReset:y,viewTransition:v})};return k.createElement("form",{ref:A,method:V,action:j,onSubmit:i?m:K,...b,"data-discover":!$&&n==="render"?"true":void 0})});CO.displayName="Form";function AO(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lC(n){let e=k.useContext(Ml);return vt(e,AO(n)),e}function RO(n,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:c}={}){let f=fy(),m=ha(),g=Kc(n,{relative:l});return k.useCallback(y=>{if(rO(y,e)){y.preventDefault();let v=t!==void 0?t:Cc(m)===Cc(g);f(n,{replace:v,state:i,preventScrollReset:a,relative:l,viewTransition:c})}},[m,f,g,t,i,e,n,a,l,c])}var IO=0,NO=()=>`__${String(++IO)}__`;function xO(){let{router:n}=lC("useSubmit"),{basename:e}=k.useContext(Ui),t=Qx();return k.useCallback(async(i,a={})=>{let{action:l,method:c,encType:f,formData:m,body:g}=lO(i,e);if(a.navigate===!1){let y=a.fetcherKey||NO();await n.fetch(y,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:g,formMethod:a.method||c,formEncType:a.encType||f,flushSync:a.flushSync})}else await n.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:g,formMethod:a.method||c,formEncType:a.encType||f,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function OO(n,{relative:e}={}){let{basename:t}=k.useContext(Ui),i=k.useContext(yi);vt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...Kc(n||".",{relative:e})},c=ha();if(n==null){l.search=c.search;let f=new URLSearchParams(l.search),m=f.getAll("index");if(m.some(y=>y==="")){f.delete("index"),m.filter(v=>v).forEach(v=>f.append("index",v));let y=f.toString();l.search=y?`?${y}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:qs([t,l.pathname])),Cc(l)}function DO(n,{relative:e}={}){let t=k.useContext(J0);vt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=lC("useViewTransitionState"),a=Kc(n,{relative:e});if(!t.isTransitioning)return!1;let l=Xs(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=Xs(t.nextLocation.pathname,i)||t.nextLocation.pathname;return _d(a.pathname,c)!=null||_d(a.pathname,l)!=null}const ao="/skill-exchange/assets/logo-CZvJbn1G.png",kO=()=>{};var kb={};const uC={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const ae=function(n,e){if(!n)throw Vl(e)},Vl=function(n){return new Error("Firebase Database ("+uC.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};const cC=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},PO=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],f=n[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},_y={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,f=c?n[a+1]:0,m=a+2<n.length,g=m?n[a+2]:0,y=l>>2,v=(l&3)<<4|f>>4;let b=(f&15)<<2|g>>6,A=g&63;m||(A=64,c||(b=64)),i.push(t[y],t[v],t[b],t[A])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(cC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):PO(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],f=a<n.length?t[n.charAt(a)]:0;++a;const g=a<n.length?t[n.charAt(a)]:64;++a;const v=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||f==null||g==null||v==null)throw new MO;const b=l<<2|f>>4;if(i.push(b),g!==64){const A=f<<4&240|g>>2;if(i.push(A),v!==64){const I=g<<6&192|v;i.push(I)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class MO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hC=function(n){const e=cC(n);return _y.encodeByteArray(e,!0)},yd=function(n){return hC(n).replace(/\./g,"")},vd=function(n){try{return _y.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function LO(n){return fC(void 0,n)}function fC(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!VO(t)||(n[t]=fC(n[t],e[t]));return n}function VO(n){return n!=="__proto__"}function UO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const jO=()=>UO().__FIREBASE_DEFAULTS__,zO=()=>{if(typeof process>"u"||typeof kb>"u")return;const n=kb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},BO=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&vd(n[1]);return e&&JSON.parse(e)},nm=()=>{try{return kO()||jO()||zO()||BO()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},dC=n=>nm()?.emulatorHosts?.[n],yy=n=>{const e=dC(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},mC=()=>nm()?.config,pC=n=>nm()?.[`_${n}`];class Qc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function _s(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function im(n){return(await fetch(n,{credentials:"include"})).ok}function vy(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[yd(JSON.stringify(t)),yd(JSON.stringify(c)),""].join(".")}const uc={};function FO(){const n={prod:[],emulator:[]};for(const e of Object.keys(uc))uc[e]?n.emulator.push(e):n.prod.push(e);return n}function HO(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Pb=!1;function sm(n,e){if(typeof window>"u"||typeof document>"u"||!_s(window.location.host)||uc[n]===e||uc[n]||Pb)return;uc[n]=e;function t(b){return`__firebase__banner__${b}`}const i="__firebase__banner",l=FO().prod.length>0;function c(){const b=document.getElementById(i);b&&b.remove()}function f(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function m(b,A){b.setAttribute("width","24"),b.setAttribute("id",A),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{Pb=!0,c()},b}function y(b,A){b.setAttribute("id",A),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function v(){const b=HO(i),A=t("text"),I=document.getElementById(A)||document.createElement("span"),j=t("learnmore"),V=document.getElementById(j)||document.createElement("a"),$=t("preprendIcon"),K=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const ee=b.element;f(ee),y(V,j);const ue=g();m(K,$),ee.append(K,I,V,ue),document.body.appendChild(ee)}l?(I.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function Sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ey(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sn())}function qO(){const n=nm()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function YO(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function gC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KO(){const n=Sn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function QO(){return uC.NODE_ADMIN===!0}function WO(){return!qO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XO(){try{return typeof indexedDB=="object"}catch{return!1}}function $O(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const JO="FirebaseError";class ys extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=JO,Object.setPrototypeOf(this,ys.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wc.prototype.create)}}class Wc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?ZO(l,i):"Error",f=`${this.serviceName}: ${c} (${a}).`;return new ys(a,f,i)}}function ZO(n,e){return n.replace(eD,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const eD=/\{\$([^}]+)}/g;function Ac(n){return JSON.parse(n)}function Xt(n){return JSON.stringify(n)}const _C=function(n){let e={},t={},i={},a="";try{const l=n.split(".");e=Ac(vd(l[0])||""),t=Ac(vd(l[1])||""),a=l[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:a}},tD=function(n){const e=_C(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},nD=function(n){const e=_C(n).claims;return typeof e=="object"&&e.admin===!0};function vs(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function vl(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function T_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ed(n,e,t){const i={};for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=e.call(t,n[a],a,n));return i}function ea(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=n[a],c=e[a];if(Mb(l)&&Mb(c)){if(!ea(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function Mb(n){return n!==null&&typeof n=="object"}function oo(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}class iD{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let v=0;v<16;v++)i[v]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let v=0;v<16;v++)i[v]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let v=16;v<80;v++){const b=i[v-3]^i[v-8]^i[v-14]^i[v-16];i[v]=(b<<1|b>>>31)&4294967295}let a=this.chain_[0],l=this.chain_[1],c=this.chain_[2],f=this.chain_[3],m=this.chain_[4],g,y;for(let v=0;v<80;v++){v<40?v<20?(g=f^l&(c^f),y=1518500249):(g=l^c^f,y=1859775393):v<60?(g=l&c|f&(l|c),y=2400959708):(g=l^c^f,y=3395469782);const b=(a<<5|a>>>27)+g+m+y+i[v]&4294967295;m=f,f=c,c=(l<<30|l>>>2)&4294967295,l=a,a=b}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+m&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let a=0;const l=this.buf_;let c=this.inbuf_;for(;a<t;){if(c===0)for(;a<=i;)this.compress_(e,a),a+=this.blockSize;if(typeof e=="string"){for(;a<t;)if(l[c]=e.charCodeAt(a),++c,++a,c===this.blockSize){this.compress_(l),c=0;break}}else for(;a<t;)if(l[c]=e[a],++c,++a,c===this.blockSize){this.compress_(l),c=0;break}}this.inbuf_=c,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let a=this.blockSize-1;a>=56;a--)this.buf_[a]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let a=0;a<5;a++)for(let l=24;l>=0;l-=8)e[i]=this.chain_[a]>>l&255,++i;return e}}function sD(n,e){const t=new rD(n,e);return t.subscribe.bind(t)}class rD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");aD(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=Kg),a.error===void 0&&(a.error=Kg),a.complete===void 0&&(a.complete=Kg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aD(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Kg(){}function rm(n,e){return`${n} failed: ${e} argument `}const oD=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);if(a>=55296&&a<=56319){const l=a-55296;i++,ae(i<n.length,"Surrogate pair missing trail surrogate.");const c=n.charCodeAt(i)-56320;a=65536+(l<<10)+c}a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):a<65536?(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},am=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};function At(n){return n&&n._delegate?n._delegate:n}class $s{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ya="[DEFAULT]";class lD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Qc;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cD(e))try{this.getOrInitializeService({instanceIdentifier:Ya})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=Ya){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ya){return this.instances.has(e)}getOptions(e=Ya){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&c.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:uD(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ya){return this.component?this.component.multipleInstances?e:Ya:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uD(n){return n===Ya?void 0:n}function cD(n){return n.instantiationMode==="EAGER"}class hD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var je;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(je||(je={}));const fD={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},dD=je.INFO,mD={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},pD=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=mD[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class om{constructor(e){this.name=e,this._logLevel=dD,this._logHandler=pD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const gD=(n,e)=>e.some(t=>n instanceof t);let Lb,Vb;function _D(){return Lb||(Lb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yD(){return Vb||(Vb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yC=new WeakMap,S_=new WeakMap,vC=new WeakMap,Qg=new WeakMap,Ty=new WeakMap;function vD(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Yr(n.result)),a()},c=()=>{i(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&yC.set(t,n)}).catch(()=>{}),Ty.set(e,n),e}function ED(n){if(S_.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});S_.set(n,e)}let b_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return S_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||vC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Yr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function TD(n){b_=n(b_)}function SD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Wg(this),e,...t);return vC.set(i,e.sort?e.sort():[e]),Yr(i)}:yD().includes(n)?function(...e){return n.apply(Wg(this),e),Yr(yC.get(this))}:function(...e){return Yr(n.apply(Wg(this),e))}}function bD(n){return typeof n=="function"?SD(n):(n instanceof IDBTransaction&&ED(n),gD(n,_D())?new Proxy(n,b_):n)}function Yr(n){if(n instanceof IDBRequest)return vD(n);if(Qg.has(n))return Qg.get(n);const e=bD(n);return e!==n&&(Qg.set(n,e),Ty.set(e,n)),e}const Wg=n=>Ty.get(n);function wD(n,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),f=Yr(c);return i&&c.addEventListener("upgradeneeded",m=>{i(Yr(c.result),m.oldVersion,m.newVersion,Yr(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const CD=["get","getKey","getAll","getAllKeys","count"],AD=["put","add","delete","clear"],Xg=new Map;function Ub(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Xg.get(e))return Xg.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=AD.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||CD.includes(t)))return;const l=async function(c,...f){const m=this.transaction(c,a?"readwrite":"readonly");let g=m.store;return i&&(g=g.index(f.shift())),(await Promise.all([g[t](...f),a&&m.done]))[0]};return Xg.set(e,l),l}TD(n=>({...n,get:(e,t,i)=>Ub(e,t)||n.get(e,t,i),has:(e,t)=>!!Ub(e,t)||n.has(e,t)}));class RD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ID(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function ID(n){return n.getComponent()?.type==="VERSION"}const w_="@firebase/app",jb="0.14.6";const Js=new om("@firebase/app"),ND="@firebase/app-compat",xD="@firebase/analytics-compat",OD="@firebase/analytics",DD="@firebase/app-check-compat",kD="@firebase/app-check",PD="@firebase/auth",MD="@firebase/auth-compat",LD="@firebase/database",VD="@firebase/data-connect",UD="@firebase/database-compat",jD="@firebase/functions",zD="@firebase/functions-compat",BD="@firebase/installations",FD="@firebase/installations-compat",HD="@firebase/messaging",qD="@firebase/messaging-compat",GD="@firebase/performance",YD="@firebase/performance-compat",KD="@firebase/remote-config",QD="@firebase/remote-config-compat",WD="@firebase/storage",XD="@firebase/storage-compat",$D="@firebase/firestore",JD="@firebase/ai",ZD="@firebase/firestore-compat",ek="firebase",tk="12.6.0";const C_="[DEFAULT]",nk={[w_]:"fire-core",[ND]:"fire-core-compat",[OD]:"fire-analytics",[xD]:"fire-analytics-compat",[kD]:"fire-app-check",[DD]:"fire-app-check-compat",[PD]:"fire-auth",[MD]:"fire-auth-compat",[LD]:"fire-rtdb",[VD]:"fire-data-connect",[UD]:"fire-rtdb-compat",[jD]:"fire-fn",[zD]:"fire-fn-compat",[BD]:"fire-iid",[FD]:"fire-iid-compat",[HD]:"fire-fcm",[qD]:"fire-fcm-compat",[GD]:"fire-perf",[YD]:"fire-perf-compat",[KD]:"fire-rc",[QD]:"fire-rc-compat",[WD]:"fire-gcs",[XD]:"fire-gcs-compat",[$D]:"fire-fst",[ZD]:"fire-fst-compat",[JD]:"fire-vertex","fire-js":"fire-js",[ek]:"fire-js-all"};const Td=new Map,ik=new Map,A_=new Map;function zb(n,e){try{n.container.addComponent(e)}catch(t){Js.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ta(n){const e=n.name;if(A_.has(e))return Js.debug(`There were multiple attempts to register component ${e}.`),!1;A_.set(e,n);for(const t of Td.values())zb(t,n);for(const t of ik.values())zb(t,n);return!0}function Xc(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Wn(n){return n==null?!1:n.settings!==void 0}const sk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Kr=new Wc("app","Firebase",sk);class rk{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new $s("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Kr.create("app-deleted",{appName:this._name})}}const da=tk;function EC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:C_,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw Kr.create("bad-app-name",{appName:String(a)});if(t||(t=mC()),!t)throw Kr.create("no-options");const l=Td.get(a);if(l){if(ea(t,l.options)&&ea(i,l.config))return l;throw Kr.create("duplicate-app",{appName:a})}const c=new hD(a);for(const m of A_.values())c.addComponent(m);const f=new rk(t,i,c);return Td.set(a,f),f}function lm(n=C_){const e=Td.get(n);if(!e&&n===C_&&mC())return EC();if(!e)throw Kr.create("no-app",{appName:n});return e}function gi(n,e,t){let i=nk[n]??n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Js.warn(c.join(" "));return}ta(new $s(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const ak="firebase-heartbeat-database",ok=1,Rc="firebase-heartbeat-store";let $g=null;function TC(){return $g||($g=wD(ak,ok,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Rc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Kr.create("idb-open",{originalErrorMessage:n.message})})),$g}async function lk(n){try{const t=(await TC()).transaction(Rc),i=await t.objectStore(Rc).get(SC(n));return await t.done,i}catch(e){if(e instanceof ys)Js.warn(e.message);else{const t=Kr.create("idb-get",{originalErrorMessage:e?.message});Js.warn(t.message)}}}async function Bb(n,e){try{const i=(await TC()).transaction(Rc,"readwrite");await i.objectStore(Rc).put(e,SC(n)),await i.done}catch(t){if(t instanceof ys)Js.warn(t.message);else{const i=Kr.create("idb-set",{originalErrorMessage:t?.message});Js.warn(i.message)}}}function SC(n){return`${n.name}!${n.options.appId}`}const uk=1024,ck=30;class hk{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new dk(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Fb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>ck){const a=mk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Js.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Fb(),{heartbeatsToSend:t,unsentEntries:i}=fk(this._heartbeatsCache.heartbeats),a=yd(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Js.warn(e),""}}}function Fb(){return new Date().toISOString().substring(0,10)}function fk(n,e=uk){const t=[];let i=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),Hb(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Hb(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class dk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XO()?$O().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await lk(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Bb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Bb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Hb(n){return yd(JSON.stringify({version:2,heartbeats:n})).length}function mk(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function pk(n){ta(new $s("platform-logger",e=>new RD(e),"PRIVATE")),ta(new $s("heartbeat",e=>new hk(e),"PRIVATE")),gi(w_,jb,n),gi(w_,jb,"esm2020"),gi("fire-js","")}pk("");var gk="firebase",_k="12.6.0";gi(gk,_k,"app");function bC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yk=bC,wC=new Wc("auth","Firebase",bC());const Sd=new om("@firebase/auth");function vk(n,...e){Sd.logLevel<=je.WARN&&Sd.warn(`Auth (${da}): ${n}`,...e)}function ad(n,...e){Sd.logLevel<=je.ERROR&&Sd.error(`Auth (${da}): ${n}`,...e)}function Zs(n,...e){throw Sy(n,...e)}function $n(n,...e){return Sy(n,...e)}function CC(n,e,t){const i={...yk(),[e]:t};return new Wc("auth","Firebase",i).create(e,{appName:n.name})}function Qr(n){return CC(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sy(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return wC.create(n,...e)}function fe(n,e,...t){if(!n)throw Sy(e,...t)}function Bs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ad(e),new Error(e)}function er(n,e){n||Bs(e)}function R_(){return typeof self<"u"&&self.location?.href||""}function AC(){return qb()==="http:"||qb()==="https:"}function qb(){return typeof self<"u"&&self.location?.protocol||null}function Ek(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AC()||YO()||"connection"in navigator)?navigator.onLine:!0}function Tk(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class $c{constructor(e,t){this.shortDelay=e,this.longDelay=t,er(t>e,"Short delay should be less than long delay!"),this.isMobile=Ey()||gC()}get(){return Ek()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function by(n,e){er(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class RC{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Sk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const bk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wk=new $c(3e4,6e4);function Es(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ji(n,e,t,i,a={}){return IC(n,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const f=oo({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:m,...l};return GO()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&_s(n.emulatorConfig.host)&&(g.credentials="include"),RC.fetch()(await NC(n,n.config.apiHost,t,f),g)})}async function IC(n,e,t){n._canInitEmulator=!1;const i={...Sk,...e};try{const a=new Ak(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw sc(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[m,g]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw sc(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw sc(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw sc(n,"user-disabled",c);const y=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw CC(n,y,g);Zs(n,y)}}catch(a){if(a instanceof ys)throw a;Zs(n,"network-request-failed",{message:String(a)})}}async function um(n,e,t,i,a={}){const l=await ji(n,e,t,i,a);return"mfaPendingCredential"in l&&Zs(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function NC(n,e,t,i){const a=`${e}${t}?${i}`,l=n,c=l.config.emulator?by(n.config,a):`${n.config.apiScheme}://${a}`;return bk.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function Ck(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ak{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i($n(this.auth,"network-request-failed")),wk.get())})}}function sc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=$n(n,e,i);return a.customData._tokenResponse=t,a}function Gb(n){return n!==void 0&&n.getResponse!==void 0}function Yb(n){return n!==void 0&&n.enterprise!==void 0}class xC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ck(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Rk(n){return(await ji(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function OC(n,e){return ji(n,"GET","/v2/recaptchaConfig",Es(n,e))}async function Ik(n,e){return ji(n,"POST","/v1/accounts:delete",e)}async function bd(n,e){return ji(n,"POST","/v1/accounts:lookup",e)}function cc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Nk(n,e=!1){const t=At(n),i=await t.getIdToken(e),a=wy(i);fe(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:i,authTime:cc(Jg(a.auth_time)),issuedAtTime:cc(Jg(a.iat)),expirationTime:cc(Jg(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Jg(n){return Number(n)*1e3}function wy(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return ad("JWT malformed, contained fewer than 3 sections"),null;try{const a=vd(t);return a?JSON.parse(a):(ad("Failed to decode base64 JWT payload"),null)}catch(a){return ad("Caught error parsing JWT payload as JSON",a?.toString()),null}}function Kb(n){const e=wy(n);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ic(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ys&&xk(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function xk({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class Ok{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class I_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=cc(this.lastLoginAt),this.creationTime=cc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function wd(n){const e=n.auth,t=await n.getIdToken(),i=await Ic(n,bd(e,{idToken:t}));fe(i?.users.length,e,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const l=a.providerUserInfo?.length?DC(a.providerUserInfo):[],c=kk(n.providerData,l),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!c?.length,g=f?m:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new I_(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(n,y)}async function Dk(n){const e=At(n);await wd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kk(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function DC(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function Pk(n,e){const t=await IC(n,{},async()=>{const i=oo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await NC(n,a,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:i};return n.emulatorConfig&&_s(n.emulatorConfig.host)&&(m.credentials="include"),RC.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Mk(n,e){return ji(n,"POST","/v2/accounts:revokeToken",Es(n,e))}class dl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Kb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){fe(e.length!==0,"internal-error");const t=Kb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await Pk(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,c=new dl;return i&&(fe(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(fe(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(fe(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new dl,this.toJSON())}_performRefresh(){return Bs("not implemented")}}function Ur(n,e){fe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Pi{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new Ok(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new I_(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Ic(this,this.stsTokenManager.getToken(this.auth,e));return fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Nk(this,e)}reload(){return Dk(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Pi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await wd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wn(this.auth.app))return Promise.reject(Qr(this.auth));const e=await this.getIdToken();return await Ic(this,Ik(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,m=t._redirectEventId??void 0,g=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:v,emailVerified:b,isAnonymous:A,providerData:I,stsTokenManager:j}=t;fe(v&&j,e,"internal-error");const V=dl.fromJSON(this.name,j);fe(typeof v=="string",e,"internal-error"),Ur(i,e.name),Ur(a,e.name),fe(typeof b=="boolean",e,"internal-error"),fe(typeof A=="boolean",e,"internal-error"),Ur(l,e.name),Ur(c,e.name),Ur(f,e.name),Ur(m,e.name),Ur(g,e.name),Ur(y,e.name);const $=new Pi({uid:v,auth:e,email:a,emailVerified:b,displayName:i,isAnonymous:A,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:V,createdAt:g,lastLoginAt:y});return I&&Array.isArray(I)&&($.providerData=I.map(K=>({...K}))),m&&($._redirectEventId=m),$}static async _fromIdTokenResponse(e,t,i=!1){const a=new dl;a.updateFromServerResponse(t);const l=new Pi({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await wd(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];fe(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?DC(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,f=new dl;f.updateFromIdToken(i);const m=new Pi({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new I_(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(m,g),m}}const Qb=new Map;function Fs(n){er(n instanceof Function,"Expected a class definition");let e=Qb.get(n);return e?(er(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Qb.set(n,e),e)}class kC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}kC.type="NONE";const Wb=kC;function od(n,e,t){return`firebase:${n}:${e}:${t}`}class ml{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=od(this.userKey,a.apiKey,l),this.fullPersistenceKey=od("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await bd(this.auth,{idToken:e}).catch(()=>{});return t?Pi._fromGetAccountInfoResponse(this.auth,t,e):null}return Pi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new ml(Fs(Wb),e,i);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||Fs(Wb);const c=od(i,e.config.apiKey,e.name);let f=null;for(const g of t)try{const y=await g._get(c);if(y){let v;if(typeof y=="string"){const b=await bd(e,{idToken:y}).catch(()=>{});if(!b)break;v=await Pi._fromGetAccountInfoResponse(e,b,y)}else v=Pi._fromJSON(e,y);g!==l&&(f=v),l=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new ml(l,e,i):(l=m[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new ml(l,e,i))}}function Xb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(VC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(PC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jC(e))return"Blackberry";if(zC(e))return"Webos";if(MC(e))return"Safari";if((e.includes("chrome/")||LC(e))&&!e.includes("edge/"))return"Chrome";if(UC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function PC(n=Sn()){return/firefox\//i.test(n)}function MC(n=Sn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LC(n=Sn()){return/crios\//i.test(n)}function VC(n=Sn()){return/iemobile/i.test(n)}function UC(n=Sn()){return/android/i.test(n)}function jC(n=Sn()){return/blackberry/i.test(n)}function zC(n=Sn()){return/webos/i.test(n)}function Cy(n=Sn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Lk(n=Sn()){return Cy(n)&&!!window.navigator?.standalone}function Vk(){return KO()&&document.documentMode===10}function BC(n=Sn()){return Cy(n)||UC(n)||zC(n)||jC(n)||/windows phone/i.test(n)||VC(n)}function FC(n,e=[]){let t;switch(n){case"Browser":t=Xb(Sn());break;case"Worker":t=`${Xb(Sn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${da}/${i}`}class Uk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,f)=>{try{const m=e(l);c(m)}catch(m){f(m)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function jk(n,e={}){return ji(n,"GET","/v2/passwordPolicy",Es(n,e))}const zk=6;class Bk{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??zk,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class Fk{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $b(this),this.idTokenSubscription=new $b(this),this.beforeStateQueue=new Uk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Fs(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ml.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await bd(this,{idToken:e}),i=await Pi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Wn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=i?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===c)&&f?.user&&(i=f.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await wd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Tk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wn(this.app))return Promise.reject(Qr(this));const t=e?At(e):null;return t&&fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wn(this.app)?Promise.reject(Qr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wn(this.app)?Promise.reject(Qr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jk(this),t=new Bk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await Mk(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Fs(e)||this._popupRedirectResolver;fe(t,this,"argument-error"),this.redirectPersistenceManager=await ml.create(this,[Fs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=FC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&vk(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ma(n){return At(n)}class $b{constructor(e){this.auth=e,this.observer=null,this.addObserver=sD(t=>this.observer=t)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Jc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Hk(n){Jc=n}function Ay(n){return Jc.loadJS(n)}function qk(){return Jc.recaptchaV2Script}function Gk(){return Jc.recaptchaEnterpriseScript}function Yk(){return Jc.gapiScript}function HC(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const Kk=500,Qk=6e4,Qf=1e12;class Wk{constructor(e){this.auth=e,this.counter=Qf,this._widgets=new Map}render(e,t){const i=this.counter;return this._widgets.set(i,new Jk(e,this.auth.name,t||{})),this.counter++,i}reset(e){const t=e||Qf;this._widgets.get(t)?.delete(),this._widgets.delete(t)}getResponse(e){const t=e||Qf;return this._widgets.get(t)?.getResponse()||""}async execute(e){const t=e||Qf;return this._widgets.get(t)?.execute(),""}}class Xk{constructor(){this.enterprise=new $k}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class $k{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Jk{constructor(e,t,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const a=typeof e=="string"?document.getElementById(e):e;fe(a,"argument-error",{appName:t}),this.container=a,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=Zk(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},Qk)},Kk))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function Zk(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<n;i++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const eP="recaptcha-enterprise",hc="NO_RECAPTCHA";class qC{constructor(e){this.type=eP,this.auth=ma(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,f)=>{OC(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const g=new xC(m);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(m=>{f(m)})})}function a(l,c,f){const m=window.grecaptcha;Yb(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(hc)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Xk().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(f=>{if(!t&&Yb(window.grecaptcha))a(f,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=Gk();m.length!==0&&(m+=f),Ay(m).then(()=>{a(f,l,c)}).catch(g=>{c(g)})}}).catch(f=>{c(f)})})}}async function Zg(n,e,t,i=!1,a=!1){const l=new qC(n);let c;if(a)c=hc;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,g=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function e_(n,e,t,i,a){if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const l=await Zg(n,e,t);return i(n,l).catch(async c=>{if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const f=await Zg(n,e,t,!1,!0);return i(n,f)}return Promise.reject(c)})}else{const l=await Zg(n,e,t,!1,!0);return i(n,l)}}async function tP(n){const e=ma(n),t=await OC(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new xC(t);e.tenantId==null?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,i.isAnyProviderEnabled()&&new qC(e).verify()}function nP(n,e){const t=Xc(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(ea(l,e??{}))return a;Zs(a,"already-initialized")}return t.initialize({options:e})}function iP(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Fs);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function sP(n,e,t){const i=ma(n);fe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=GC(e),{host:c,port:f}=rP(e),m=f===null?"":`:${f}`,g={url:`${l}//${c}${m}/`},y=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){fe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),fe(ea(g,i.config.emulator)&&ea(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,_s(c)?(im(`${l}//${c}${m}`),sm("Auth",!0)):aP()}function GC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function rP(n){const e=GC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:Jb(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:Jb(c)}}}function Jb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function aP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class Ry{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Bs("not implemented")}_getIdTokenResponse(e){return Bs("not implemented")}_linkToIdToken(e,t){return Bs("not implemented")}_getReauthenticationResolver(e){return Bs("not implemented")}}async function pl(n,e){return um(n,"POST","/v1/accounts:signInWithIdp",Es(n,e))}const oP="http://localhost";class Ja extends Ry{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ja(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Zs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const c=new Ja(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return pl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,pl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,pl(e,t)}buildRequest(){const e={requestUri:oP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=oo(t)}return e}}async function Zb(n,e){return ji(n,"POST","/v1/accounts:sendVerificationCode",Es(n,e))}async function lP(n,e){return um(n,"POST","/v1/accounts:signInWithPhoneNumber",Es(n,e))}async function uP(n,e){const t=await um(n,"POST","/v1/accounts:signInWithPhoneNumber",Es(n,e));if(t.temporaryProof)throw sc(n,"account-exists-with-different-credential",t);return t}const cP={USER_NOT_FOUND:"user-not-found"};async function hP(n,e){const t={...e,operation:"REAUTH"};return um(n,"POST","/v1/accounts:signInWithPhoneNumber",Es(n,t),cP)}class fc extends Ry{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new fc({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new fc({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return lP(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return uP(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return hP(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:i,verificationCode:a}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:i,code:a}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:i,phoneNumber:a,temporaryProof:l}=e;return!i&&!t&&!a&&!l?null:new fc({verificationId:t,verificationCode:i,phoneNumber:a,temporaryProof:l})}}class YC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Zc extends YC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class jr extends Zc{constructor(){super("facebook.com")}static credential(e){return Ja._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jr.credential(e.oauthAccessToken)}catch{return null}}}jr.FACEBOOK_SIGN_IN_METHOD="facebook.com";jr.PROVIDER_ID="facebook.com";class zr extends Zc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ja._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return zr.credential(t,i)}catch{return null}}}zr.GOOGLE_SIGN_IN_METHOD="google.com";zr.PROVIDER_ID="google.com";class Br extends Zc{constructor(){super("github.com")}static credential(e){return Ja._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Br.credential(e.oauthAccessToken)}catch{return null}}}Br.GITHUB_SIGN_IN_METHOD="github.com";Br.PROVIDER_ID="github.com";class Fr extends Zc{constructor(){super("twitter.com")}static credential(e,t){return Ja._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Fr.credential(t,i)}catch{return null}}}Fr.TWITTER_SIGN_IN_METHOD="twitter.com";Fr.PROVIDER_ID="twitter.com";class El{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await Pi._fromIdTokenResponse(e,i,a),c=ew(i);return new El({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=ew(i);return new El({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function ew(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Cd extends ys{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Cd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new Cd(e,t,i,a)}}function KC(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Cd._fromErrorAndOperation(n,l,e,i):l})}async function fP(n,e,t=!1){const i=await Ic(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return El._forOperation(n,"link",i)}async function dP(n,e,t=!1){const{auth:i}=n;if(Wn(i.app))return Promise.reject(Qr(i));const a="reauthenticate";try{const l=await Ic(n,KC(i,a,e,n),t);fe(l.idToken,i,"internal-error");const c=wy(l.idToken);fe(c,i,"internal-error");const{sub:f}=c;return fe(n.uid===f,i,"user-mismatch"),El._forOperation(n,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Zs(i,"user-mismatch"),l}}async function QC(n,e,t=!1){if(Wn(n.app))return Promise.reject(Qr(n));const i="signIn",a=await KC(n,i,e),l=await El._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(l.user),l}async function mP(n,e){return QC(ma(n),e)}function pP(n,e,t,i){return At(n).onIdTokenChanged(e,t,i)}function gP(n,e,t){return At(n).beforeAuthStateChanged(e,t)}function tw(n,e){return ji(n,"POST","/v2/accounts/mfaEnrollment:start",Es(n,e))}const Ad="__sak";class WC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ad,"1"),this.storage.removeItem(Ad),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const _P=1e3,yP=10;class XC extends WC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,m)=>{this.notifyListeners(c,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);Vk()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,yP):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},_P)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}XC.type="LOCAL";const vP=XC;class $C extends WC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}$C.type="SESSION";const JC=$C;function EP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class cm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new cm(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const f=Array.from(c).map(async g=>g(t.origin,l)),m=await EP(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cm.receivers=[];function Iy(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}class TP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((f,m)=>{const g=Iy("",20);a.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(v){const b=v;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(b.data.response);break;default:clearTimeout(y),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Ft(){return window}function SP(n){Ft().location.href=n}function Ny(){return typeof Ft().WorkerGlobalScope<"u"&&typeof Ft().importScripts=="function"}async function bP(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wP(){return navigator?.serviceWorker?.controller||null}function CP(){return Ny()?self:null}const ZC="firebaseLocalStorageDb",AP=1,Rd="firebaseLocalStorage",eA="fbase_key";class eh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function hm(n,e){return n.transaction([Rd],e?"readwrite":"readonly").objectStore(Rd)}function RP(){const n=indexedDB.deleteDatabase(ZC);return new eh(n).toPromise()}function N_(){const n=indexedDB.open(ZC,AP);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Rd,{keyPath:eA})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Rd)?e(i):(i.close(),await RP(),e(await N_()))})})}async function nw(n,e,t){const i=hm(n,!0).put({[eA]:e,value:t});return new eh(i).toPromise()}async function IP(n,e){const t=hm(n,!1).get(e),i=await new eh(t).toPromise();return i===void 0?null:i.value}function iw(n,e){const t=hm(n,!0).delete(e);return new eh(t).toPromise()}const NP=800,xP=3;class tA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await N_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>xP)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ny()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cm._getInstance(CP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await bP(),!this.activeServiceWorker)return;this.sender=new TP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||wP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await N_();return await nw(e,Ad,"1"),await iw(e,Ad),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>nw(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>IP(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>iw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=hm(a,!1).getAll();return new eh(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),NP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tA.type="LOCAL";const OP=tA;function sw(n,e){return ji(n,"POST","/v2/accounts/mfaSignIn:start",Es(n,e))}const t_=HC("rcb"),DP=new $c(3e4,6e4);class kP{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Ft().grecaptcha?.render}load(e,t=""){return fe(PP(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Gb(Ft().grecaptcha)?Promise.resolve(Ft().grecaptcha):new Promise((i,a)=>{const l=Ft().setTimeout(()=>{a($n(e,"network-request-failed"))},DP.get());Ft()[t_]=()=>{Ft().clearTimeout(l),delete Ft()[t_];const f=Ft().grecaptcha;if(!f||!Gb(f)){a($n(e,"internal-error"));return}const m=f.render;f.render=(g,y)=>{const v=m(g,y);return this.counter++,v},this.hostLanguage=t,i(f)};const c=`${qk()}?${oo({onload:t_,render:"explicit",hl:t})}`;Ay(c).catch(()=>{clearTimeout(l),a($n(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!Ft().grecaptcha?.render&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function PP(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class MP{async load(e){return new Wk(e)}clearedOneInstance(){}}const dc="recaptcha",LP={theme:"light",type:"image"};class xy{constructor(e,t,i={...LP}){this.parameters=i,this.type=dc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ma(e),this.isInvisible=this.parameters.size==="invisible",fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const a=typeof t=="string"?document.getElementById(t):t;fe(a,this.auth,"argument-error"),this.container=a,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new MP:new kP,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),i=t.getResponse(e);return i||new Promise(a=>{const l=c=>{c&&(this.tokenChangeListeners.delete(l),a(c))};this.tokenChangeListeners.add(l),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){fe(!this.parameters.sitekey,this.auth,"argument-error"),fe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(i=>i(t)),typeof e=="function")e(t);else if(typeof e=="string"){const i=Ft()[e];typeof i=="function"&&i(t)}}}assertNotDestroyed(){fe(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){fe(AC()&&!Ny(),this.auth,"internal-error"),await VP(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await Rk(this.auth);fe(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return fe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function VP(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}class UP{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=fc._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Oy(n,e,t){if(Wn(n.app))return Promise.reject(Qr(n));const i=ma(n),a=await jP(i,e,At(t));return new UP(a,l=>mP(i,l))}async function jP(n,e,t){if(!n._getRecaptchaConfig())try{await tP(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const a=i.session;if("phoneNumber"in i){fe(a.type==="enroll",n,"internal-error");const l={idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await e_(n,l,"mfaSmsEnrollment",async(g,y)=>{if(y.phoneEnrollmentInfo.captchaResponse===hc){fe(t?.type===dc,g,"argument-error");const v=await n_(g,y,t);return tw(g,v)}return tw(g,y)},"PHONE_PROVIDER").catch(g=>Promise.reject(g))).phoneSessionInfo.sessionInfo}else{fe(a.type==="signin",n,"internal-error");const l=i.multiFactorHint?.uid||i.multiFactorUid;fe(l,n,"missing-multi-factor-info");const c={mfaPendingCredential:a.credential,mfaEnrollmentId:l,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await e_(n,c,"mfaSmsSignIn",async(y,v)=>{if(v.phoneSignInInfo.captchaResponse===hc){fe(t?.type===dc,y,"argument-error");const b=await n_(y,v,t);return sw(y,b)}return sw(y,v)},"PHONE_PROVIDER").catch(y=>Promise.reject(y))).phoneResponseInfo.sessionInfo}}else{const a={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await e_(n,a,"sendVerificationCode",async(m,g)=>{if(g.captchaResponse===hc){fe(t?.type===dc,m,"argument-error");const y=await n_(m,g,t);return Zb(m,y)}return Zb(m,g)},"PHONE_PROVIDER").catch(m=>Promise.reject(m))).sessionInfo}}finally{t?._reset()}}async function n_(n,e,t){fe(t.type===dc,n,"argument-error");const i=await t.verify();fe(typeof i=="string",n,"argument-error");const a={...e};if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.captchaResponse,f=a.phoneEnrollmentInfo.clientType,m=a.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:i,captchaResponse:c,clientType:f,recaptchaVersion:m}}),a}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.captchaResponse,c=a.phoneSignInInfo.clientType,f=a.phoneSignInInfo.recaptchaVersion;return Object.assign(a,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:l,clientType:c,recaptchaVersion:f}}),a}else return Object.assign(a,{recaptchaToken:i}),a}function zP(n,e){return e?Fs(e):(fe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Dy extends Ry{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return pl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return pl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function BP(n){return QC(n.auth,new Dy(n),n.bypassAuthState)}function FP(n){const{auth:e,user:t}=n;return fe(t,e,"internal-error"),dP(t,new Dy(n),n.bypassAuthState)}async function HP(n){const{auth:e,user:t}=n;return fe(t,e,"internal-error"),fP(t,new Dy(n),n.bypassAuthState)}class nA{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BP;case"linkViaPopup":case"linkViaRedirect":return HP;case"reauthViaPopup":case"reauthViaRedirect":return FP;default:Zs(this.auth,"internal-error")}}resolve(e){er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const qP=new $c(2e3,1e4);class hl extends nA{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,hl.currentPopupAction&&hl.currentPopupAction.cancel(),hl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return fe(e,this.auth,"internal-error"),e}async onExecution(){er(this.filter.length===1,"Popup operations only handle one event");const e=Iy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject($n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject($n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qP.get())};e()}}hl.currentPopupAction=null;const GP="pendingRedirect",ld=new Map;class YP extends nA{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=ld.get(this.auth._key());if(!e){try{const i=await KP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}ld.set(this.auth._key(),e)}return this.bypassAuthState||ld.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KP(n,e){const t=XP(e),i=WP(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function QP(n,e){ld.set(n._key(),e)}function WP(n){return Fs(n._redirectPersistence)}function XP(n){return od(GP,n.config.apiKey,n.name)}async function $P(n,e,t=!1){if(Wn(n.app))return Promise.reject(Qr(n));const i=ma(n),a=zP(i,e),c=await new YP(i,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}const JP=600*1e3;class ZP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!iA(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError($n(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JP&&this.cachedEventUids.clear(),this.cachedEventUids.has(rw(e))}saveEventToCache(e){this.cachedEventUids.add(rw(e)),this.lastProcessedEventTime=Date.now()}}function rw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function iA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function eM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iA(n);default:return!1}}async function tM(n,e={}){return ji(n,"GET","/v1/projects",e)}const nM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iM=/^https?/;async function sM(n){if(n.config.emulator)return;const{authorizedDomains:e}=await tM(n);for(const t of e)try{if(rM(t))return}catch{}Zs(n,"unauthorized-domain")}function rM(n){const e=R_(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!iM.test(t))return!1;if(nM.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}const aM=new $c(3e4,6e4);function aw(){const n=Ft().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function oM(n){return new Promise((e,t)=>{function i(){aw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{aw(),t($n(n,"network-request-failed"))},timeout:aM.get()})}if(Ft().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ft().gapi?.load)i();else{const a=HC("iframefcb");return Ft()[a]=()=>{gapi.load?i():t($n(n,"network-request-failed"))},Ay(`${Yk()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw ud=null,e})}let ud=null;function lM(n){return ud=ud||oM(n),ud}const uM=new $c(5e3,15e3),cM="__/auth/iframe",hM="emulator/auth/iframe",fM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mM(n){const e=n.config;fe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?by(e,hM):`https://${n.config.authDomain}/${cM}`,i={apiKey:e.apiKey,appName:n.name,v:da},a=dM.get(n.config.apiHost);a&&(i.eid=a);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${oo(i).slice(1)}`}async function pM(n){const e=await lM(n),t=Ft().gapi;return fe(t,n,"internal-error"),e.open({where:document.body,url:mM(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fM,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=$n(n,"network-request-failed"),f=Ft().setTimeout(()=>{l(c)},uM.get());function m(){Ft().clearTimeout(f),a(i)}i.ping(m).then(m,()=>{l(c)})}))}const gM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_M=500,yM=600,vM="_blank",EM="http://localhost";class ow{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function TM(n,e,t,i=_M,a=yM){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const m={...gM,width:i.toString(),height:a.toString(),top:l,left:c},g=Sn().toLowerCase();t&&(f=LC(g)?vM:t),PC(g)&&(e=e||EM,m.scrollbars="yes");const y=Object.entries(m).reduce((b,[A,I])=>`${b}${A}=${I},`,"");if(Lk(g)&&f!=="_self")return SM(e||"",f),new ow(null);const v=window.open(e||"",f,y);fe(v,n,"popup-blocked");try{v.focus()}catch{}return new ow(v)}function SM(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const bM="__/auth/handler",wM="emulator/auth/handler",CM=encodeURIComponent("fac");async function lw(n,e,t,i,a,l){fe(n.config.authDomain,n,"auth-domain-config-required"),fe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:da,eventId:a};if(e instanceof YC){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",T_(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))c[y]=v}if(e instanceof Zc){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(c.scopes=y.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const y of Object.keys(f))f[y]===void 0&&delete f[y];const m=await n._getAppCheckToken(),g=m?`#${CM}=${encodeURIComponent(m)}`:"";return`${AM(n)}?${oo(f).slice(1)}${g}`}function AM({config:n}){return n.emulator?by(n,wM):`https://${n.authDomain}/${bM}`}const i_="webStorageSupport";class RM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=JC,this._completeRedirectFn=$P,this._overrideRedirectResult=QP}async _openPopup(e,t,i,a){er(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await lw(e,t,i,R_(),a);return TM(e,l,Iy())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await lw(e,t,i,R_(),a);return SP(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(er(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await pM(e),i=new ZP(e);return t.register("authEvent",a=>(fe(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(i_,{type:i_},a=>{const l=a?.[0]?.[i_];l!==void 0&&t(!!l),Zs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=sM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return BC()||MC()||Cy()}}const IM=RM;var uw="@firebase/auth",cw="1.11.1";class NM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function xM(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OM(n){ta(new $s("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=i.options;fe(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:FC(n)},g=new Fk(i,a,l,m);return iP(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ta(new $s("auth-internal",e=>{const t=ma(e.getProvider("auth").getImmediate());return(i=>new NM(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),gi(uw,cw,xM(n)),gi(uw,cw,"esm2020")}const DM=300,kM=pC("authIdTokenMaxAge")||DM;let hw=null;const PM=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>kM)return;const a=t?.token;hw!==a&&(hw=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function MM(n=lm()){const e=Xc(n,"auth");if(e.isInitialized())return e.getImmediate();const t=nP(n,{popupRedirectResolver:IM,persistence:[OP,vP,JC]}),i=pC("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=PM(l.toString());gP(t,c,()=>c(t.currentUser)),pP(t,f=>c(f))}}const a=dC("auth");return a&&sP(t,`http://${a}`),t}function LM(){return document.getElementsByTagName("head")?.[0]??document}Hk({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const l=$n("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",LM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OM("Browser");var fw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Wr,sA;(function(){var n;function e(x,R){function N(){}N.prototype=R.prototype,x.F=R.prototype,x.prototype=new N,x.prototype.constructor=x,x.D=function(U,P,B){for(var O=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)O[Ze-2]=arguments[Ze];return R.prototype[P].apply(U,O)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(x,R,N){N||(N=0);const U=Array(16);if(typeof R=="string")for(var P=0;P<16;++P)U[P]=R.charCodeAt(N++)|R.charCodeAt(N++)<<8|R.charCodeAt(N++)<<16|R.charCodeAt(N++)<<24;else for(P=0;P<16;++P)U[P]=R[N++]|R[N++]<<8|R[N++]<<16|R[N++]<<24;R=x.g[0],N=x.g[1],P=x.g[2];let B=x.g[3],O;O=R+(B^N&(P^B))+U[0]+3614090360&4294967295,R=N+(O<<7&4294967295|O>>>25),O=B+(P^R&(N^P))+U[1]+3905402710&4294967295,B=R+(O<<12&4294967295|O>>>20),O=P+(N^B&(R^N))+U[2]+606105819&4294967295,P=B+(O<<17&4294967295|O>>>15),O=N+(R^P&(B^R))+U[3]+3250441966&4294967295,N=P+(O<<22&4294967295|O>>>10),O=R+(B^N&(P^B))+U[4]+4118548399&4294967295,R=N+(O<<7&4294967295|O>>>25),O=B+(P^R&(N^P))+U[5]+1200080426&4294967295,B=R+(O<<12&4294967295|O>>>20),O=P+(N^B&(R^N))+U[6]+2821735955&4294967295,P=B+(O<<17&4294967295|O>>>15),O=N+(R^P&(B^R))+U[7]+4249261313&4294967295,N=P+(O<<22&4294967295|O>>>10),O=R+(B^N&(P^B))+U[8]+1770035416&4294967295,R=N+(O<<7&4294967295|O>>>25),O=B+(P^R&(N^P))+U[9]+2336552879&4294967295,B=R+(O<<12&4294967295|O>>>20),O=P+(N^B&(R^N))+U[10]+4294925233&4294967295,P=B+(O<<17&4294967295|O>>>15),O=N+(R^P&(B^R))+U[11]+2304563134&4294967295,N=P+(O<<22&4294967295|O>>>10),O=R+(B^N&(P^B))+U[12]+1804603682&4294967295,R=N+(O<<7&4294967295|O>>>25),O=B+(P^R&(N^P))+U[13]+4254626195&4294967295,B=R+(O<<12&4294967295|O>>>20),O=P+(N^B&(R^N))+U[14]+2792965006&4294967295,P=B+(O<<17&4294967295|O>>>15),O=N+(R^P&(B^R))+U[15]+1236535329&4294967295,N=P+(O<<22&4294967295|O>>>10),O=R+(P^B&(N^P))+U[1]+4129170786&4294967295,R=N+(O<<5&4294967295|O>>>27),O=B+(N^P&(R^N))+U[6]+3225465664&4294967295,B=R+(O<<9&4294967295|O>>>23),O=P+(R^N&(B^R))+U[11]+643717713&4294967295,P=B+(O<<14&4294967295|O>>>18),O=N+(B^R&(P^B))+U[0]+3921069994&4294967295,N=P+(O<<20&4294967295|O>>>12),O=R+(P^B&(N^P))+U[5]+3593408605&4294967295,R=N+(O<<5&4294967295|O>>>27),O=B+(N^P&(R^N))+U[10]+38016083&4294967295,B=R+(O<<9&4294967295|O>>>23),O=P+(R^N&(B^R))+U[15]+3634488961&4294967295,P=B+(O<<14&4294967295|O>>>18),O=N+(B^R&(P^B))+U[4]+3889429448&4294967295,N=P+(O<<20&4294967295|O>>>12),O=R+(P^B&(N^P))+U[9]+568446438&4294967295,R=N+(O<<5&4294967295|O>>>27),O=B+(N^P&(R^N))+U[14]+3275163606&4294967295,B=R+(O<<9&4294967295|O>>>23),O=P+(R^N&(B^R))+U[3]+4107603335&4294967295,P=B+(O<<14&4294967295|O>>>18),O=N+(B^R&(P^B))+U[8]+1163531501&4294967295,N=P+(O<<20&4294967295|O>>>12),O=R+(P^B&(N^P))+U[13]+2850285829&4294967295,R=N+(O<<5&4294967295|O>>>27),O=B+(N^P&(R^N))+U[2]+4243563512&4294967295,B=R+(O<<9&4294967295|O>>>23),O=P+(R^N&(B^R))+U[7]+1735328473&4294967295,P=B+(O<<14&4294967295|O>>>18),O=N+(B^R&(P^B))+U[12]+2368359562&4294967295,N=P+(O<<20&4294967295|O>>>12),O=R+(N^P^B)+U[5]+4294588738&4294967295,R=N+(O<<4&4294967295|O>>>28),O=B+(R^N^P)+U[8]+2272392833&4294967295,B=R+(O<<11&4294967295|O>>>21),O=P+(B^R^N)+U[11]+1839030562&4294967295,P=B+(O<<16&4294967295|O>>>16),O=N+(P^B^R)+U[14]+4259657740&4294967295,N=P+(O<<23&4294967295|O>>>9),O=R+(N^P^B)+U[1]+2763975236&4294967295,R=N+(O<<4&4294967295|O>>>28),O=B+(R^N^P)+U[4]+1272893353&4294967295,B=R+(O<<11&4294967295|O>>>21),O=P+(B^R^N)+U[7]+4139469664&4294967295,P=B+(O<<16&4294967295|O>>>16),O=N+(P^B^R)+U[10]+3200236656&4294967295,N=P+(O<<23&4294967295|O>>>9),O=R+(N^P^B)+U[13]+681279174&4294967295,R=N+(O<<4&4294967295|O>>>28),O=B+(R^N^P)+U[0]+3936430074&4294967295,B=R+(O<<11&4294967295|O>>>21),O=P+(B^R^N)+U[3]+3572445317&4294967295,P=B+(O<<16&4294967295|O>>>16),O=N+(P^B^R)+U[6]+76029189&4294967295,N=P+(O<<23&4294967295|O>>>9),O=R+(N^P^B)+U[9]+3654602809&4294967295,R=N+(O<<4&4294967295|O>>>28),O=B+(R^N^P)+U[12]+3873151461&4294967295,B=R+(O<<11&4294967295|O>>>21),O=P+(B^R^N)+U[15]+530742520&4294967295,P=B+(O<<16&4294967295|O>>>16),O=N+(P^B^R)+U[2]+3299628645&4294967295,N=P+(O<<23&4294967295|O>>>9),O=R+(P^(N|~B))+U[0]+4096336452&4294967295,R=N+(O<<6&4294967295|O>>>26),O=B+(N^(R|~P))+U[7]+1126891415&4294967295,B=R+(O<<10&4294967295|O>>>22),O=P+(R^(B|~N))+U[14]+2878612391&4294967295,P=B+(O<<15&4294967295|O>>>17),O=N+(B^(P|~R))+U[5]+4237533241&4294967295,N=P+(O<<21&4294967295|O>>>11),O=R+(P^(N|~B))+U[12]+1700485571&4294967295,R=N+(O<<6&4294967295|O>>>26),O=B+(N^(R|~P))+U[3]+2399980690&4294967295,B=R+(O<<10&4294967295|O>>>22),O=P+(R^(B|~N))+U[10]+4293915773&4294967295,P=B+(O<<15&4294967295|O>>>17),O=N+(B^(P|~R))+U[1]+2240044497&4294967295,N=P+(O<<21&4294967295|O>>>11),O=R+(P^(N|~B))+U[8]+1873313359&4294967295,R=N+(O<<6&4294967295|O>>>26),O=B+(N^(R|~P))+U[15]+4264355552&4294967295,B=R+(O<<10&4294967295|O>>>22),O=P+(R^(B|~N))+U[6]+2734768916&4294967295,P=B+(O<<15&4294967295|O>>>17),O=N+(B^(P|~R))+U[13]+1309151649&4294967295,N=P+(O<<21&4294967295|O>>>11),O=R+(P^(N|~B))+U[4]+4149444226&4294967295,R=N+(O<<6&4294967295|O>>>26),O=B+(N^(R|~P))+U[11]+3174756917&4294967295,B=R+(O<<10&4294967295|O>>>22),O=P+(R^(B|~N))+U[2]+718787259&4294967295,P=B+(O<<15&4294967295|O>>>17),O=N+(B^(P|~R))+U[9]+3951481745&4294967295,x.g[0]=x.g[0]+R&4294967295,x.g[1]=x.g[1]+(P+(O<<21&4294967295|O>>>11))&4294967295,x.g[2]=x.g[2]+P&4294967295,x.g[3]=x.g[3]+B&4294967295}i.prototype.v=function(x,R){R===void 0&&(R=x.length);const N=R-this.blockSize,U=this.C;let P=this.h,B=0;for(;B<R;){if(P==0)for(;B<=N;)a(this,x,B),B+=this.blockSize;if(typeof x=="string"){for(;B<R;)if(U[P++]=x.charCodeAt(B++),P==this.blockSize){a(this,U),P=0;break}}else for(;B<R;)if(U[P++]=x[B++],P==this.blockSize){a(this,U),P=0;break}}this.h=P,this.o+=R},i.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var R=1;R<x.length-8;++R)x[R]=0;R=this.o*8;for(var N=x.length-8;N<x.length;++N)x[N]=R&255,R/=256;for(this.v(x),x=Array(16),R=0,N=0;N<4;++N)for(let U=0;U<32;U+=8)x[R++]=this.g[N]>>>U&255;return x};function l(x,R){var N=f;return Object.prototype.hasOwnProperty.call(N,x)?N[x]:N[x]=R(x)}function c(x,R){this.h=R;const N=[];let U=!0;for(let P=x.length-1;P>=0;P--){const B=x[P]|0;U&&B==R||(N[P]=B,U=!1)}this.g=N}var f={};function m(x){return-128<=x&&x<128?l(x,function(R){return new c([R|0],R<0?-1:0)}):new c([x|0],x<0?-1:0)}function g(x){if(isNaN(x)||!isFinite(x))return v;if(x<0)return V(g(-x));const R=[];let N=1;for(let U=0;x>=N;U++)R[U]=x/N|0,N*=4294967296;return new c(R,0)}function y(x,R){if(x.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(x.charAt(0)=="-")return V(y(x.substring(1),R));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=g(Math.pow(R,8));let U=v;for(let B=0;B<x.length;B+=8){var P=Math.min(8,x.length-B);const O=parseInt(x.substring(B,B+P),R);P<8?(P=g(Math.pow(R,P)),U=U.j(P).add(g(O))):(U=U.j(N),U=U.add(g(O)))}return U}var v=m(0),b=m(1),A=m(16777216);n=c.prototype,n.m=function(){if(j(this))return-V(this).m();let x=0,R=1;for(let N=0;N<this.g.length;N++){const U=this.i(N);x+=(U>=0?U:4294967296+U)*R,R*=4294967296}return x},n.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(I(this))return"0";if(j(this))return"-"+V(this).toString(x);const R=g(Math.pow(x,6));var N=this;let U="";for(;;){const P=ue(N,R).g;N=$(N,P.j(R));let B=((N.g.length>0?N.g[0]:N.h)>>>0).toString(x);if(N=P,I(N))return B+U;for(;B.length<6;)B="0"+B;U=B+U}},n.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function I(x){if(x.h!=0)return!1;for(let R=0;R<x.g.length;R++)if(x.g[R]!=0)return!1;return!0}function j(x){return x.h==-1}n.l=function(x){return x=$(this,x),j(x)?-1:I(x)?0:1};function V(x){const R=x.g.length,N=[];for(let U=0;U<R;U++)N[U]=~x.g[U];return new c(N,~x.h).add(b)}n.abs=function(){return j(this)?V(this):this},n.add=function(x){const R=Math.max(this.g.length,x.g.length),N=[];let U=0;for(let P=0;P<=R;P++){let B=U+(this.i(P)&65535)+(x.i(P)&65535),O=(B>>>16)+(this.i(P)>>>16)+(x.i(P)>>>16);U=O>>>16,B&=65535,O&=65535,N[P]=O<<16|B}return new c(N,N[N.length-1]&-2147483648?-1:0)};function $(x,R){return x.add(V(R))}n.j=function(x){if(I(this)||I(x))return v;if(j(this))return j(x)?V(this).j(V(x)):V(V(this).j(x));if(j(x))return V(this.j(V(x)));if(this.l(A)<0&&x.l(A)<0)return g(this.m()*x.m());const R=this.g.length+x.g.length,N=[];for(var U=0;U<2*R;U++)N[U]=0;for(U=0;U<this.g.length;U++)for(let P=0;P<x.g.length;P++){const B=this.i(U)>>>16,O=this.i(U)&65535,Ze=x.i(P)>>>16,Oe=x.i(P)&65535;N[2*U+2*P]+=O*Oe,K(N,2*U+2*P),N[2*U+2*P+1]+=B*Oe,K(N,2*U+2*P+1),N[2*U+2*P+1]+=O*Ze,K(N,2*U+2*P+1),N[2*U+2*P+2]+=B*Ze,K(N,2*U+2*P+2)}for(x=0;x<R;x++)N[x]=N[2*x+1]<<16|N[2*x];for(x=R;x<2*R;x++)N[x]=0;return new c(N,0)};function K(x,R){for(;(x[R]&65535)!=x[R];)x[R+1]+=x[R]>>>16,x[R]&=65535,R++}function ee(x,R){this.g=x,this.h=R}function ue(x,R){if(I(R))throw Error("division by zero");if(I(x))return new ee(v,v);if(j(x))return R=ue(V(x),R),new ee(V(R.g),V(R.h));if(j(R))return R=ue(x,V(R)),new ee(V(R.g),R.h);if(x.g.length>30){if(j(x)||j(R))throw Error("slowDivide_ only works with positive integers.");for(var N=b,U=R;U.l(x)<=0;)N=_e(N),U=_e(U);var P=Se(N,1),B=Se(U,1);for(U=Se(U,2),N=Se(N,2);!I(U);){var O=B.add(U);O.l(x)<=0&&(P=P.add(N),B=O),U=Se(U,1),N=Se(N,1)}return R=$(x,P.j(R)),new ee(P,R)}for(P=v;x.l(R)>=0;){for(N=Math.max(1,Math.floor(x.m()/R.m())),U=Math.ceil(Math.log(N)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),B=g(N),O=B.j(R);j(O)||O.l(x)>0;)N-=U,B=g(N),O=B.j(R);I(B)&&(B=b),P=P.add(B),x=$(x,O)}return new ee(P,x)}n.B=function(x){return ue(this,x).h},n.and=function(x){const R=Math.max(this.g.length,x.g.length),N=[];for(let U=0;U<R;U++)N[U]=this.i(U)&x.i(U);return new c(N,this.h&x.h)},n.or=function(x){const R=Math.max(this.g.length,x.g.length),N=[];for(let U=0;U<R;U++)N[U]=this.i(U)|x.i(U);return new c(N,this.h|x.h)},n.xor=function(x){const R=Math.max(this.g.length,x.g.length),N=[];for(let U=0;U<R;U++)N[U]=this.i(U)^x.i(U);return new c(N,this.h^x.h)};function _e(x){const R=x.g.length+1,N=[];for(let U=0;U<R;U++)N[U]=x.i(U)<<1|x.i(U-1)>>>31;return new c(N,x.h)}function Se(x,R){const N=R>>5;R%=32;const U=x.g.length-N,P=[];for(let B=0;B<U;B++)P[B]=R>0?x.i(B+N)>>>R|x.i(B+N+1)<<32-R:x.i(B+N);return new c(P,x.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,sA=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=y,Wr=c}).apply(typeof fw<"u"?fw:typeof self<"u"?self:typeof window<"u"?window:{});var Wf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var rA,rc,aA,cd,x_,oA,lA,uA;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wf=="object"&&Wf];for(var _=0;_<h.length;++_){var S=h[_];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var i=t(this);function a(h,_){if(_)e:{var S=i;h=h.split(".");for(var C=0;C<h.length-1;C++){var F=h[C];if(!(F in S))break e;S=S[F]}h=h[h.length-1],C=S[h],_=_(C),_!=C&&_!=null&&e(S,h,{configurable:!0,writable:!0,value:_})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(_){var S=[],C;for(C in _)Object.prototype.hasOwnProperty.call(_,C)&&S.push([C,_[C]]);return S}});var l=l||{},c=this||self;function f(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function m(h,_,S){return h.call.apply(h.bind,arguments)}function g(h,_,S){return g=m,g.apply(null,arguments)}function y(h,_){var S=Array.prototype.slice.call(arguments,1);return function(){var C=S.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function v(h,_){function S(){}S.prototype=_.prototype,h.Z=_.prototype,h.prototype=new S,h.prototype.constructor=h,h.Ob=function(C,F,Q){for(var oe=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)oe[Ie-2]=arguments[Ie];return _.prototype[F].apply(C,oe)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function A(h){const _=h.length;if(_>0){const S=Array(_);for(let C=0;C<_;C++)S[C]=h[C];return S}return[]}function I(h,_){for(let C=1;C<arguments.length;C++){const F=arguments[C];var S=typeof F;if(S=S!="object"?S:F?Array.isArray(F)?"array":S:"null",S=="array"||S=="object"&&typeof F.length=="number"){S=h.length||0;const Q=F.length||0;h.length=S+Q;for(let oe=0;oe<Q;oe++)h[S+oe]=F[oe]}else h.push(F)}}class j{constructor(_,S){this.i=_,this.j=S,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function V(h){c.setTimeout(()=>{throw h},0)}function $(){var h=x;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class K{constructor(){this.h=this.g=null}add(_,S){const C=ee.get();C.set(_,S),this.h?this.h.next=C:this.g=C,this.h=C}}var ee=new j(()=>new ue,h=>h.reset());class ue{constructor(){this.next=this.g=this.h=null}set(_,S){this.h=_,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let _e,Se=!1,x=new K,R=()=>{const h=Promise.resolve(void 0);_e=()=>{h.then(N)}};function N(){for(var h;h=$();){try{h.h.call(h.g)}catch(S){V(S)}var _=ee;_.j(h),_.h<100&&(_.h++,h.next=_.g,_.g=h)}Se=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const S=()=>{};c.addEventListener("test",S,_),c.removeEventListener("test",S,_)}catch{}return h})();function O(h){return/^[\s\xa0]*$/.test(h)}function Ze(h,_){P.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,_)}v(Ze,P),Ze.prototype.init=function(h,_){const S=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget,_||(S=="mouseover"?_=h.fromElement:S=="mouseout"&&(_=h.toElement)),this.relatedTarget=_,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ze.Z.h.call(this)},Ze.prototype.h=function(){Ze.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Oe="closure_listenable_"+(Math.random()*1e6|0),J=0;function se(h,_,S,C,F){this.listener=h,this.proxy=null,this.src=_,this.type=S,this.capture=!!C,this.ha=F,this.key=++J,this.da=this.fa=!1}function he(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ke(h,_,S){for(const C in h)_.call(S,h[C],C,h)}function Pe(h,_){for(const S in h)_.call(void 0,h[S],S,h)}function M(h){const _={};for(const S in h)_[S]=h[S];return _}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X(h,_){let S,C;for(let F=1;F<arguments.length;F++){C=arguments[F];for(S in C)h[S]=C[S];for(let Q=0;Q<G.length;Q++)S=G[Q],Object.prototype.hasOwnProperty.call(C,S)&&(h[S]=C[S])}}function le(h){this.src=h,this.g={},this.h=0}le.prototype.add=function(h,_,S,C,F){const Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);const oe=ve(h,_,C,F);return oe>-1?(_=h[oe],S||(_.fa=!1)):(_=new se(_,this.src,Q,!!C,F),_.fa=S,h.push(_)),_};function ye(h,_){const S=_.type;if(S in h.g){var C=h.g[S],F=Array.prototype.indexOf.call(C,_,void 0),Q;(Q=F>=0)&&Array.prototype.splice.call(C,F,1),Q&&(he(_),h.g[S].length==0&&(delete h.g[S],h.h--))}}function ve(h,_,S,C){for(let F=0;F<h.length;++F){const Q=h[F];if(!Q.da&&Q.listener==_&&Q.capture==!!S&&Q.ha==C)return F}return-1}var De="closure_lm_"+(Math.random()*1e6|0),ut={};function Xe(h,_,S,C,F){if(Array.isArray(_)){for(let Q=0;Q<_.length;Q++)Xe(h,_[Q],S,C,F);return null}return S=Ql(S),h&&h[Oe]?h.J(_,S,f(C)?!!C.capture:!1,F):vi(h,_,S,!1,C,F)}function vi(h,_,S,C,F,Q){if(!_)throw Error("Invalid event type");const oe=f(F)?!!F.capture:!!F;let Ie=ga(h);if(Ie||(h[De]=Ie=new le(h)),S=Ie.add(_,S,C,oe,Q),S.proxy)return S;if(C=Zn(),S.proxy=C,C.src=h,C.listener=S,h.addEventListener)B||(F=oe),F===void 0&&(F=!1),h.addEventListener(_.toString(),C,F);else if(h.attachEvent)h.attachEvent(Bi(_.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return S}function Zn(){function h(S){return _.call(h.src,h.listener,S)}const _=Yl;return h}function zi(h,_,S,C,F){if(Array.isArray(_))for(var Q=0;Q<_.length;Q++)zi(h,_[Q],S,C,F);else C=f(C)?!!C.capture:!!C,S=Ql(S),h&&h[Oe]?(h=h.i,Q=String(_).toString(),Q in h.g&&(_=h.g[Q],S=ve(_,S,C,F),S>-1&&(he(_[S]),Array.prototype.splice.call(_,S,1),_.length==0&&(delete h.g[Q],h.h--)))):h&&(h=ga(h))&&(_=h.g[_.toString()],h=-1,_&&(h=ve(_,S,C,F)),(S=h>-1?_[h]:null)&&go(S))}function go(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Oe])ye(_.i,h);else{var S=h.type,C=h.proxy;_.removeEventListener?_.removeEventListener(S,C,h.capture):_.detachEvent?_.detachEvent(Bi(S),C):_.addListener&&_.removeListener&&_.removeListener(C),(S=ga(_))?(ye(S,h),S.h==0&&(S.src=null,_[De]=null)):he(h)}}}function Bi(h){return h in ut?ut[h]:ut[h]="on"+h}function Yl(h,_){if(h.da)h=!0;else{_=new Ze(_,this);const S=h.listener,C=h.ha||h.src;h.fa&&go(h),h=S.call(C,_)}return h}function ga(h){return h=h[De],h instanceof le?h:null}var Kl="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ql(h){return typeof h=="function"?h:(h[Kl]||(h[Kl]=function(_){return h.handleEvent(_)}),h[Kl])}function Dt(){U.call(this),this.i=new le(this),this.M=this,this.G=null}v(Dt,U),Dt.prototype[Oe]=!0,Dt.prototype.removeEventListener=function(h,_,S,C){zi(this,h,_,S,C)};function Kt(h,_){var S,C=h.G;if(C)for(S=[];C;C=C.G)S.push(C);if(h=h.M,C=_.type||_,typeof _=="string")_=new P(_,h);else if(_ instanceof P)_.target=_.target||h;else{var F=_;_=new P(C,h),X(_,F)}F=!0;let Q,oe;if(S)for(oe=S.length-1;oe>=0;oe--)Q=_.g=S[oe],F=rr(Q,C,!0,_)&&F;if(Q=_.g=h,F=rr(Q,C,!0,_)&&F,F=rr(Q,C,!1,_)&&F,S)for(oe=0;oe<S.length;oe++)Q=_.g=S[oe],F=rr(Q,C,!1,_)&&F}Dt.prototype.N=function(){if(Dt.Z.N.call(this),this.i){var h=this.i;for(const _ in h.g){const S=h.g[_];for(let C=0;C<S.length;C++)he(S[C]);delete h.g[_],h.h--}}this.G=null},Dt.prototype.J=function(h,_,S,C){return this.i.add(String(h),_,!1,S,C)},Dt.prototype.K=function(h,_,S,C){return this.i.add(String(h),_,!0,S,C)};function rr(h,_,S,C){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();let F=!0;for(let Q=0;Q<_.length;++Q){const oe=_[Q];if(oe&&!oe.da&&oe.capture==S){const Ie=oe.listener,It=oe.ha||oe.src;oe.fa&&ye(h.i,oe),F=Ie.call(It,C)!==!1&&F}}return F&&!C.defaultPrevented}function Bm(h,_){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:c.setTimeout(h,_||0)}function _h(h){h.g=Bm(()=>{h.g=null,h.i&&(h.i=!1,_h(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class bn extends U{constructor(_,S){super(),this.m=_,this.l=S,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:_h(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _a(h){U.call(this),this.h=h,this.g={}}v(_a,U);var Wl=[];function Xl(h){ke(h.g,function(_,S){this.g.hasOwnProperty(S)&&go(_)},h),h.g={}}_a.prototype.N=function(){_a.Z.N.call(this),Xl(this)},_a.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ar=c.JSON.stringify,Fm=c.JSON.parse,yh=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function vh(){}function Eh(){}var Ei={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function on(){P.call(this,"d")}v(on,P);function ei(){P.call(this,"c")}v(ei,P);var Rt={},Th=null;function _o(){return Th=Th||new Dt}Rt.Ia="serverreachability";function Sh(h){P.call(this,Rt.Ia,h)}v(Sh,P);function Fi(h){const _=_o();Kt(_,new Sh(_))}Rt.STAT_EVENT="statevent";function ya(h,_){P.call(this,Rt.STAT_EVENT,h),this.stat=_}v(ya,P);function kt(h){const _=_o();Kt(_,new ya(_,h))}Rt.Ja="timingevent";function Hi(h,_){P.call(this,Rt.Ja,h),this.size=_}v(Hi,P);function qi(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},_)}function Ti(){this.g=!0}Ti.prototype.ua=function(){this.g=!1};function Hm(h,_,S,C,F,Q){h.info(function(){if(h.g)if(Q){var oe="",Ie=Q.split("&");for(let $e=0;$e<Ie.length;$e++){var It=Ie[$e].split("=");if(It.length>1){const _t=It[0];It=It[1];const si=_t.split("_");oe=si.length>=2&&si[1]=="type"?oe+(_t+"="+It+"&"):oe+(_t+"=redacted&")}}}else oe=null;else oe=Q;return"XMLHTTP REQ ("+C+") [attempt "+F+"]: "+_+`
`+S+`
`+oe})}function bh(h,_,S,C,F,Q,oe){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+F+"]: "+_+`
`+S+`
`+Q+" "+oe})}function Gi(h,_,S,C){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+qm(h,S)+(C?" "+C:"")})}function va(h,_){h.info(function(){return"TIMEOUT: "+_})}Ti.prototype.info=function(){};function qm(h,_){if(!h.g)return _;if(!_)return null;try{const Q=JSON.parse(_);if(Q){for(h=0;h<Q.length;h++)if(Array.isArray(Q[h])){var S=Q[h];if(!(S.length<2)){var C=S[1];if(Array.isArray(C)&&!(C.length<1)){var F=C[0];if(F!="noop"&&F!="stop"&&F!="close")for(let oe=1;oe<C.length;oe++)C[oe]=""}}}}return ar(Q)}catch{return _}}var Ea={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},$l={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Jl;function Ta(){}v(Ta,vh),Ta.prototype.g=function(){return new XMLHttpRequest},Jl=new Ta;function Ts(h){return encodeURIComponent(String(h))}function wh(h){var _=1;h=h.split(":");const S=[];for(;_>0&&h.length;)S.push(h.shift()),_--;return h.length&&S.push(h.join(":")),S}function Si(h,_,S,C){this.j=h,this.i=_,this.l=S,this.S=C||1,this.V=new _a(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new bi}function bi(){this.i=null,this.g="",this.h=!1}var Pt={},Zt={};function Yi(h,_,S){h.M=1,h.A=Sa(Lt(_)),h.u=S,h.R=!0,yo(h,null)}function yo(h,_){h.F=Date.now(),Ki(h),h.B=Lt(h.A);var S=h.B,C=h.S;Array.isArray(C)||(C=[String(C)]),So(S.i,"t",C),h.C=0,S=h.j.L,h.h=new bi,h.g=jh(h.j,S?_:null,!h.u),h.P>0&&(h.O=new bn(g(h.Y,h,h.g),h.P)),_=h.V,S=h.g,C=h.ba;var F="readystatechange";Array.isArray(F)||(F&&(Wl[0]=F.toString()),F=Wl);for(let Q=0;Q<F.length;Q++){const oe=Xe(S,F[Q],C||_.handleEvent,!1,_.h||_);if(!oe)break;_.g[oe.key]=oe}_=h.J?M(h.J):{},h.u?(h.v||(h.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,_)):(h.v="GET",h.g.ea(h.B,h.v,null,_)),Fi(),Hm(h.i,h.v,h.B,h.l,h.S,h.u)}Si.prototype.ba=function(h){h=h.target;const _=this.O;_&&Ai(h)==3?_.j():this.Y(h)},Si.prototype.Y=function(h){try{if(h==this.g)e:{const Ie=Ai(this.g),It=this.g.ya(),$e=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||ln(this.g)))){this.K||Ie!=4||It==7||(It==8||$e<=0?Fi(3):Fi(2)),Qi(this);var _=this.g.ca();this.X=_;var S=Gm(this);if(this.o=_==200,bh(this.i,this.v,this.B,this.l,this.S,Ie,_),this.o){if(this.U&&!this.L){t:{if(this.g){var C,F=this.g;if((C=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(C)){var Q=C;break t}}Q=null}if(h=Q)Gi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Wi(this,h);else{this.o=!1,this.m=3,kt(12),jn(this),ti(this);break e}}if(this.R){h=!0;let _t;for(;!this.K&&this.C<S.length;)if(_t=Ah(this,S),_t==Zt){Ie==4&&(this.m=4,kt(14),h=!1),Gi(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==Pt){this.m=4,kt(15),Gi(this.i,this.l,S,"[Invalid Chunk]"),h=!1;break}else Gi(this.i,this.l,_t,null),Wi(this,_t);if(Ch(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||S.length!=0||this.h.h||(this.m=1,kt(16),h=!1),this.o=this.o&&h,!h)Gi(this.i,this.l,S,"[Invalid Chunked Response]"),jn(this),ti(this);else if(S.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),du(oe),oe.P=!0,kt(11))}}else Gi(this.i,this.l,S,null),Wi(this,S);Ie==4&&jn(this),this.o&&!this.K&&(Ie==4?Mh(this.j,this):(this.o=!1,Ki(this)))}else bs(this.g),_==400&&S.indexOf("Unknown SID")>0?(this.m=3,kt(12)):(this.m=0,kt(13)),jn(this),ti(this)}}}catch{}finally{}};function Gm(h){if(!Ch(h))return h.g.la();const _=ln(h.g);if(_==="")return"";let S="";const C=_.length,F=Ai(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return jn(h),ti(h),"";h.h.i=new c.TextDecoder}for(let Q=0;Q<C;Q++)h.h.h=!0,S+=h.h.i.decode(_[Q],{stream:!(F&&Q==C-1)});return _.length=0,h.h.g+=S,h.C=0,h.h.g}function Ch(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ah(h,_){var S=h.C,C=_.indexOf(`
`,S);return C==-1?Zt:(S=Number(_.substring(S,C)),isNaN(S)?Pt:(C+=1,C+S>_.length?Zt:(_=_.slice(C,C+S),h.C=C+S,_)))}Si.prototype.cancel=function(){this.K=!0,jn(this)};function Ki(h){h.T=Date.now()+h.H,vo(h,h.H)}function vo(h,_){if(h.D!=null)throw Error("WatchDog timer not null");h.D=qi(g(h.aa,h),_)}function Qi(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Si.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(va(this.i,this.B),this.M!=2&&(Fi(),kt(17)),jn(this),this.m=2,ti(this)):vo(this,this.T-h)};function ti(h){h.j.I==0||h.K||Mh(h.j,h)}function jn(h){Qi(h);var _=h.O;_&&typeof _.dispose=="function"&&_.dispose(),h.O=null,Xl(h.V),h.g&&(_=h.g,h.g=null,_.abort(),_.dispose())}function Wi(h,_){try{var S=h.j;if(S.I!=0&&(S.g==h||$i(S.h,h))){if(!h.L&&$i(S.h,h)&&S.I==3){try{var C=S.Ba.g.parse(_)}catch{C=null}if(Array.isArray(C)&&C.length==3){var F=C;if(F[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<h.F)Ro(S),mr(S);else break e;Na(S),kt(18)}}else S.xa=F[1],0<S.xa-S.K&&F[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=qi(g(S.Va,S),6e3));Xi(S.h)<=1&&S.ta&&(S.ta=void 0)}else is(S,11)}else if((h.L||S.g==h)&&Ro(S),!O(_))for(F=S.Ba.g.parse(_),_=0;_<F.length;_++){let $e=F[_];const _t=$e[0];if(!(_t<=S.K))if(S.K=_t,$e=$e[1],S.I==2)if($e[0]=="c"){S.M=$e[1],S.ba=$e[2];const si=$e[3];si!=null&&(S.ka=si,S.j.info("VER="+S.ka));const ss=$e[4];ss!=null&&(S.za=ss,S.j.info("SVER="+S.za));const Ri=$e[5];Ri!=null&&typeof Ri=="number"&&Ri>0&&(C=1.5*Ri,S.O=C,S.j.info("backChannelRequestTimeoutMs_="+C)),C=S;const Ii=h.g;if(Ii){const xa=Ii.g?Ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xa){var Q=C.h;Q.g||xa.indexOf("spdy")==-1&&xa.indexOf("quic")==-1&&xa.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(tu(Q,Q.h),Q.h=null))}if(C.G){const Io=Ii.g?Ii.g.getResponseHeader("X-HTTP-Session-Id"):null;Io&&(C.wa=Io,tt(C.J,C.G,Io))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-h.F,S.j.info("Handshake RTT: "+S.T+"ms")),C=S;var oe=h;if(C.na=Uh(C,C.L?C.ba:null,C.W),oe.L){nu(C.h,oe);var Ie=oe,It=C.O;It&&(Ie.H=It),Ie.D&&(Qi(Ie),Ki(Ie)),C.g=oe}else kh(C);S.i.length>0&&ns(S)}else $e[0]!="stop"&&$e[0]!="close"||is(S,7);else S.I==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?is(S,7):hu(S):$e[0]!="noop"&&S.l&&S.l.qa($e),S.A=0)}}Fi(4)}catch{}}var Mt=class{constructor(h,_){this.g=h,this.map=_}};function Zl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function eu(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Xi(h){return h.h?1:h.g?h.g.size:0}function $i(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function tu(h,_){h.g?h.g.add(_):h.h=_}function nu(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Zl.prototype.cancel=function(){if(this.i=iu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function iu(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const S of h.g.values())_=_.concat(S.G);return _}return A(h.i)}var Rh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Eo(h,_){if(h){h=h.split("&");for(let S=0;S<h.length;S++){const C=h[S].indexOf("=");let F,Q=null;C>=0?(F=h[S].substring(0,C),Q=h[S].substring(C+1)):F=h[S],_(F,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function zn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;h instanceof zn?(this.l=h.l,en(this,h.j),this.o=h.o,this.g=h.g,or(this,h.u),this.h=h.h,su(this,Oh(h.i)),this.m=h.m):h&&(_=String(h).match(Rh))?(this.l=!1,en(this,_[1]||"",!0),this.o=Ji(_[2]||""),this.g=Ji(_[3]||"",!0),or(this,_[4]),this.h=Ji(_[5]||"",!0),su(this,_[6]||"",!0),this.m=Ji(_[7]||"")):(this.l=!1,this.i=new ur(null,this.l))}zn.prototype.toString=function(){const h=[];var _=this.j;_&&h.push(ba(_,To,!0),":");var S=this.g;return(S||_=="file")&&(h.push("//"),(_=this.o)&&h.push(ba(_,To,!0),"@"),h.push(Ts(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&h.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&h.push("/"),h.push(ba(S,S.charAt(0)=="/"?ru:Ih,!0))),(S=this.i.toString())&&h.push("?",S),(S=this.m)&&h.push("#",ba(S,Nh)),h.join("")},zn.prototype.resolve=function(h){const _=Lt(this);let S=!!h.j;S?en(_,h.j):S=!!h.o,S?_.o=h.o:S=!!h.g,S?_.g=h.g:S=h.u!=null;var C=h.h;if(S)or(_,h.u);else if(S=!!h.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var F=_.h.lastIndexOf("/");F!=-1&&(C=_.h.slice(0,F+1)+C)}if(F=C,F==".."||F==".")C="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){C=F.lastIndexOf("/",0)==0,F=F.split("/");const Q=[];for(let oe=0;oe<F.length;){const Ie=F[oe++];Ie=="."?C&&oe==F.length&&Q.push(""):Ie==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),C&&oe==F.length&&Q.push("")):(Q.push(Ie),C=!0)}C=Q.join("/")}else C=F}return S?_.h=C:S=h.i.toString()!=="",S?su(_,Oh(h.i)):S=!!h.m,S&&(_.m=h.m),_};function Lt(h){return new zn(h)}function en(h,_,S){h.j=S?Ji(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function or(h,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);h.u=_}else h.u=null}function su(h,_,S){_ instanceof ur?(h.i=_,bo(h.i,h.l)):(S||(_=ba(_,lr)),h.i=new ur(_,h.l))}function tt(h,_,S){h.i.set(_,S)}function Sa(h){return tt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ji(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ba(h,_,S){return typeof h=="string"?(h=encodeURI(h).replace(_,Nn),S&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Nn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var To=/[#\/\?@]/g,Ih=/[#\?:]/g,ru=/[#\?]/g,lr=/[#\?@]/g,Nh=/#/g;function ur(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function xn(h){h.g||(h.g=new Map,h.h=0,h.i&&Eo(h.i,function(_,S){h.add(decodeURIComponent(_.replace(/\+/g," ")),S)}))}n=ur.prototype,n.add=function(h,_){xn(this),this.i=null,h=cr(this,h);let S=this.g.get(h);return S||this.g.set(h,S=[]),S.push(_),this.h+=1,this};function xh(h,_){xn(h),_=cr(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function au(h,_){return xn(h),_=cr(h,_),h.g.has(_)}n.forEach=function(h,_){xn(this),this.g.forEach(function(S,C){S.forEach(function(F){h.call(_,F,C,this)},this)},this)};function ou(h,_){xn(h);let S=[];if(typeof _=="string")au(h,_)&&(S=S.concat(h.g.get(cr(h,_))));else for(h=Array.from(h.g.values()),_=0;_<h.length;_++)S=S.concat(h[_]);return S}n.set=function(h,_){return xn(this),this.i=null,h=cr(this,h),au(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=ou(this,h),h.length>0?String(h[0]):_):_};function So(h,_,S){xh(h,_),S.length>0&&(h.i=null,h.g.set(cr(h,_),A(S)),h.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(let C=0;C<_.length;C++){var S=_[C];const F=Ts(S);S=ou(this,S);for(let Q=0;Q<S.length;Q++){let oe=F;S[Q]!==""&&(oe+="="+Ts(S[Q])),h.push(oe)}}return this.i=h.join("&")};function Oh(h){const _=new ur;return _.i=h.i,h.g&&(_.g=new Map(h.g),_.h=h.h),_}function cr(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function bo(h,_){_&&!h.j&&(xn(h),h.i=null,h.g.forEach(function(S,C){const F=C.toLowerCase();C!=F&&(xh(this,C),So(this,F,S))},h)),h.j=_}function wi(h,_){const S=new Ti;if(c.Image){const C=new Image;C.onload=y(ni,S,"TestLoadImage: loaded",!0,_,C),C.onerror=y(ni,S,"TestLoadImage: error",!1,_,C),C.onabort=y(ni,S,"TestLoadImage: abort",!1,_,C),C.ontimeout=y(ni,S,"TestLoadImage: timeout",!1,_,C),c.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else _(!1)}function lu(h,_){const S=new Ti,C=new AbortController,F=setTimeout(()=>{C.abort(),ni(S,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:C.signal}).then(Q=>{clearTimeout(F),Q.ok?ni(S,"TestPingServer: ok",!0,_):ni(S,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(F),ni(S,"TestPingServer: error",!1,_)})}function ni(h,_,S,C,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),C(S)}catch{}}function hr(){this.g=new yh}function Zi(h){this.i=h.Sb||null,this.h=h.ab||!1}v(Zi,vh),Zi.prototype.g=function(){return new wa(this.i,this.h)};function wa(h,_){Dt.call(this),this.H=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(wa,Dt),n=wa.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=_,this.readyState=1,Ci(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(_.body=h),(this.H||c).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,fr(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ci(this)),this.g&&(this.readyState=3,Ci(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;wo(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function wo(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?fr(this):Ci(this),this.readyState==3&&wo(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,fr(this))},n.Na=function(h){this.g&&(this.response=h,fr(this))},n.ga=function(){this.g&&fr(this)};function fr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Ci(h)}n.setRequestHeader=function(h,_){this.A.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var S=_.next();!S.done;)S=S.value,h.push(S[0]+": "+S[1]),S=_.next();return h.join(`\r
`)};function Ci(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(wa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ii(h){let _="";return ke(h,function(S,C){_+=C,_+=":",_+=S,_+=`\r
`}),_}function Ca(h,_,S){e:{for(C in S){var C=!1;break e}C=!0}C||(S=ii(S),typeof h=="string"?S!=null&&Ts(S):tt(h,_,S))}function st(h){Dt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(st,Dt);var es=/^https?$/i,uu=["POST","PUT"];n=st.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,_,S,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Jl.g(),this.g.onreadystatechange=b(g(this.Ca,this));try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(Q){Aa(this,Q);return}if(h=S||"",S=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var F in C)S.set(F,C[F]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const Q of C.keys())S.set(Q,C.get(Q));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(S.keys()).find(Q=>Q.toLowerCase()=="content-type"),F=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(uu,_,void 0)>=0)||C||F||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,oe]of S)this.g.setRequestHeader(Q,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Q){Aa(this,Q)}};function Aa(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.o=5,cu(h),Ss(h)}function cu(h){h.A||(h.A=!0,Kt(h,"complete"),Kt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Kt(this,"complete"),Kt(this,"abort"),Ss(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ss(this,!0)),st.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ra(this):this.Xa())},n.Xa=function(){Ra(this)};function Ra(h){if(h.h&&typeof l<"u"){if(h.v&&Ai(h)==4)setTimeout(h.Ca.bind(h),0);else if(Kt(h,"readystatechange"),Ai(h)==4){h.h=!1;try{const Q=h.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var S;if(!(S=_)){var C;if(C=Q===0){let oe=String(h.D).match(Rh)[1]||null;!oe&&c.self&&c.self.location&&(oe=c.self.location.protocol.slice(0,-1)),C=!es.test(oe?oe.toLowerCase():"")}S=C}if(S)Kt(h,"complete"),Kt(h,"success");else{h.o=6;try{var F=Ai(h)>2?h.g.statusText:""}catch{F=""}h.l=F+" ["+h.ca()+"]",cu(h)}}finally{Ss(h)}}}}function Ss(h,_){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const S=h.g;h.g=null,_||Kt(h,"ready");try{S.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ai(h){return h.g?h.g.readyState:0}n.ca=function(){try{return Ai(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Fm(_)}};function ln(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function bs(h){const _={};h=(h.g&&Ai(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(O(h[C]))continue;var S=wh(h[C]);const F=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const Q=_[F]||[];_[F]=Q,Q.push(S)}Pe(_,function(C){return C.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ts(h,_,S){return S&&S.internalChannelParams&&S.internalChannelParams[h]||_}function dr(h){this.za=0,this.i=[],this.j=new Ti,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ts("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ts("baseRetryDelayMs",5e3,h),this.Za=ts("retryDelaySeedMs",1e4,h),this.Ta=ts("forwardChannelMaxRetries",2,h),this.va=ts("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Zl(h&&h.concurrentRequestLimit),this.Ba=new hr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=dr.prototype,n.ka=8,n.I=1,n.connect=function(h,_,S,C){kt(0),this.W=h,this.H=_||{},S&&C!==void 0&&(this.H.OSID=S,this.H.OAID=C),this.F=this.X,this.J=Uh(this,null,this.W),ns(this)};function hu(h){if(Co(h),h.I==3){var _=h.V++,S=Lt(h.J);if(tt(S,"SID",h.M),tt(S,"RID",_),tt(S,"TYPE","terminate"),Ia(h,S),_=new Si(h,h.j,_),_.M=2,_.A=Sa(Lt(S)),S=!1,c.navigator&&c.navigator.sendBeacon)try{S=c.navigator.sendBeacon(_.A.toString(),"")}catch{}!S&&c.Image&&(new Image().src=_.A,S=!0),S||(_.g=jh(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Ki(_)}Vh(h)}function mr(h){h.g&&(du(h),h.g.cancel(),h.g=null)}function Co(h){mr(h),h.v&&(c.clearTimeout(h.v),h.v=null),Ro(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function ns(h){if(!eu(h.h)&&!h.m){h.m=!0;var _=h.Ea;_e||R(),Se||(_e(),Se=!0),x.add(_,h),h.D=0}}function Ao(h,_){return Xi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=_.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=qi(g(h.Ea,h,_),Lh(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const F=new Si(this,this.j,h);let Q=this.o;if(this.U&&(Q?(Q=M(Q),X(Q,this.U)):Q=this.U),this.u!==null||this.R||(F.J=Q,Q=null),this.S)e:{for(var _=0,S=0;S<this.i.length;S++){t:{var C=this.i[S];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(_+=C,_>4096){_=S;break e}if(_===4096||S===this.i.length-1){_=S+1;break e}}_=1e3}else _=1e3;_=Dh(this,F,_),S=Lt(this.J),tt(S,"RID",h),tt(S,"CVER",22),this.G&&tt(S,"X-HTTP-Session-Id",this.G),Ia(this,S),Q&&(this.R?_="headers="+Ts(ii(Q))+"&"+_:this.u&&Ca(S,this.u,Q)),tu(this.h,F),this.Ra&&tt(S,"TYPE","init"),this.S?(tt(S,"$req",_),tt(S,"SID","null"),F.U=!0,Yi(F,S,null)):Yi(F,S,_),this.I=2}}else this.I==3&&(h?fu(this,h):this.i.length==0||eu(this.h)||fu(this))};function fu(h,_){var S;_?S=_.l:S=h.V++;const C=Lt(h.J);tt(C,"SID",h.M),tt(C,"RID",S),tt(C,"AID",h.K),Ia(h,C),h.u&&h.o&&Ca(C,h.u,h.o),S=new Si(h,h.j,S,h.D+1),h.u===null&&(S.J=h.o),_&&(h.i=_.G.concat(h.i)),_=Dh(h,S,1e3),S.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),tu(h.h,S),Yi(S,C,_)}function Ia(h,_){h.H&&ke(h.H,function(S,C){tt(_,C,S)}),h.l&&ke({},function(S,C){tt(_,C,S)})}function Dh(h,_,S){S=Math.min(h.i.length,S);const C=h.l?g(h.l.Ka,h.l,h):null;e:{var F=h.i;let Ie=-1;for(;;){const It=["count="+S];Ie==-1?S>0?(Ie=F[0].g,It.push("ofs="+Ie)):Ie=0:It.push("ofs="+Ie);let $e=!0;for(let _t=0;_t<S;_t++){var Q=F[_t].g;const si=F[_t].map;if(Q-=Ie,Q<0)Ie=Math.max(0,F[_t].g-100),$e=!1;else try{Q="req"+Q+"_"||"";try{var oe=si instanceof Map?si:Object.entries(si);for(const[ss,Ri]of oe){let Ii=Ri;f(Ri)&&(Ii=ar(Ri)),It.push(Q+ss+"="+encodeURIComponent(Ii))}}catch(ss){throw It.push(Q+"type="+encodeURIComponent("_badmap")),ss}}catch{C&&C(si)}}if($e){oe=It.join("&");break e}}oe=void 0}return h=h.i.splice(0,S),_.G=h,oe}function kh(h){if(!h.g&&!h.v){h.Y=1;var _=h.Da;_e||R(),Se||(_e(),Se=!0),x.add(_,h),h.A=0}}function Na(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=qi(g(h.Da,h),Lh(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,Ph(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=qi(g(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,kt(10),mr(this),Ph(this))};function du(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Ph(h){h.g=new Si(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var _=Lt(h.na);tt(_,"RID","rpc"),tt(_,"SID",h.M),tt(_,"AID",h.K),tt(_,"CI",h.F?"0":"1"),!h.F&&h.ia&&tt(_,"TO",h.ia),tt(_,"TYPE","xmlhttp"),Ia(h,_),h.u&&h.o&&Ca(_,h.u,h.o),h.O&&(h.g.H=h.O);var S=h.g;h=h.ba,S.M=1,S.A=Sa(Lt(_)),S.u=null,S.R=!0,yo(S,h)}n.Va=function(){this.C!=null&&(this.C=null,mr(this),Na(this),kt(19))};function Ro(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Mh(h,_){var S=null;if(h.g==_){Ro(h),du(h),h.g=null;var C=2}else if($i(h.h,_))S=_.G,nu(h.h,_),C=1;else return;if(h.I!=0){if(_.o)if(C==1){S=_.u?_.u.length:0,_=Date.now()-_.F;var F=h.D;C=_o(),Kt(C,new Hi(C,S)),ns(h)}else kh(h);else if(F=_.m,F==3||F==0&&_.X>0||!(C==1&&Ao(h,_)||C==2&&Na(h)))switch(S&&S.length>0&&(_=h.h,_.i=_.i.concat(S)),F){case 1:is(h,5);break;case 4:is(h,10);break;case 3:is(h,6);break;default:is(h,2)}}}function Lh(h,_){let S=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(S*=2),S*_}function is(h,_){if(h.j.info("Error code "+_),_==2){var S=g(h.bb,h),C=h.Ua;const F=!C;C=new zn(C||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||en(C,"https"),Sa(C),F?wi(C.toString(),S):lu(C.toString(),S)}else kt(2);h.I=0,h.l&&h.l.pa(_),Vh(h),Co(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function Vh(h){if(h.I=0,h.ja=[],h.l){const _=iu(h.h);(_.length!=0||h.i.length!=0)&&(I(h.ja,_),I(h.ja,h.i),h.h.i.length=0,A(h.i),h.i.length=0),h.l.oa()}}function Uh(h,_,S){var C=S instanceof zn?Lt(S):new zn(S);if(C.g!="")_&&(C.g=_+"."+C.g),or(C,C.u);else{var F=c.location;C=F.protocol,_=_?_+"."+F.hostname:F.hostname,F=+F.port;const Q=new zn(null);C&&en(Q,C),_&&(Q.g=_),F&&or(Q,F),S&&(Q.h=S),C=Q}return S=h.G,_=h.wa,S&&_&&tt(C,S,_),tt(C,"VER",h.ka),Ia(h,C),C}function jh(h,_,S){if(_&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Aa&&!h.ma?new st(new Zi({ab:S})):new st(h.ma),_.Fa(h.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function zh(){}n=zh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function pr(){}pr.prototype.g=function(h,_){return new wn(h,_)};function wn(h,_){Dt.call(this),this.g=new dr(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(h?h["X-WebChannel-Client-Profile"]=_.sa:h={"X-WebChannel-Client-Profile":_.sa}),this.g.U=h,(h=_&&_.Qb)&&!O(h)&&(this.g.u=h),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!O(_)&&(this.g.G=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new ws(this)}v(wn,Dt),wn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){hu(this.g)},wn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var S={};S.__data__=h,h=S}else this.v&&(S={},S.__data__=ar(h),h=S);_.i.push(new Mt(_.Ya++,h)),_.I==3&&ns(_)},wn.prototype.N=function(){this.g.l=null,delete this.j,hu(this.g),delete this.g,wn.Z.N.call(this)};function Bh(h){on.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const S in _){h=S;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}v(Bh,on);function Fh(){ei.call(this),this.status=1}v(Fh,ei);function ws(h){this.g=h}v(ws,zh),ws.prototype.ra=function(){Kt(this.g,"a")},ws.prototype.qa=function(h){Kt(this.g,new Bh(h))},ws.prototype.pa=function(h){Kt(this.g,new Fh)},ws.prototype.oa=function(){Kt(this.g,"b")},pr.prototype.createWebChannel=pr.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,uA=function(){return new pr},lA=function(){return _o()},oA=Rt,x_={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ea.NO_ERROR=0,Ea.TIMEOUT=8,Ea.HTTP_ERROR=6,cd=Ea,$l.COMPLETE="complete",aA=$l,Eh.EventType=Ei,Ei.OPEN="a",Ei.CLOSE="b",Ei.ERROR="c",Ei.MESSAGE="d",Dt.prototype.listen=Dt.prototype.J,rc=Eh,st.prototype.listenOnce=st.prototype.K,st.prototype.getLastError=st.prototype.Ha,st.prototype.getLastErrorCode=st.prototype.ya,st.prototype.getStatus=st.prototype.ca,st.prototype.getResponseJson=st.prototype.La,st.prototype.getResponseText=st.prototype.la,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Fa,rA=st}).apply(typeof Wf<"u"?Wf:typeof self<"u"?self:typeof window<"u"?window:{});const dw="@firebase/firestore",mw="4.9.2";class En{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");let Ul="12.3.0";const Za=new om("@firebase/firestore");function al(){return Za.logLevel}function ce(n,...e){if(Za.logLevel<=je.DEBUG){const t=e.map(ky);Za.debug(`Firestore (${Ul}): ${n}`,...t)}}function tr(n,...e){if(Za.logLevel<=je.ERROR){const t=e.map(ky);Za.error(`Firestore (${Ul}): ${n}`,...t)}}function Tl(n,...e){if(Za.logLevel<=je.WARN){const t=e.map(ky);Za.warn(`Firestore (${Ul}): ${n}`,...t)}}function ky(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function we(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,cA(n,i,t)}function cA(n,e,t){let i=`FIRESTORE (${Ul}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw tr(i),new Error(i)}function et(n,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,n||cA(e,a,i)}function Re(n,e){return n}const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends ys{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class hA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(En.UNAUTHENTICATED)))}shutdown(){}}class UM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class jM{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){et(this.o===void 0,42304);let i=this.i;const a=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new Xr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Xr,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},f=m=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Xr)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(et(typeof i.accessToken=="string",31837,{l:i}),new hA(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string",2055,{h:e}),new En(e)}}class zM{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=En.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class BM{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new zM(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(En.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class pw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FM{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Wn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){et(this.o===void 0,3512);const i=l=>{l.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ce("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new pw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(et(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new pw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function HM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class Py{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=HM(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function He(n,e){return n<e?-1:n>e?1:0}function O_(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const a=n.charAt(i),l=e.charAt(i);if(a!==l)return s_(a)===s_(l)?He(a,l):s_(a)?1:-1}return He(n.length,e.length)}const qM=55296,GM=57343;function s_(n){const e=n.charCodeAt(0);return e>=qM&&e<=GM}function Sl(n,e,t){return n.length===e.length&&n.every(((i,a)=>t(i,e[a])))}const gw="__name__";class us{constructor(e,t,i){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&we(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return us.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof us?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=us.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return He(e.length,t.length)}static compareSegments(e,t){const i=us.isNumericId(e),a=us.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?us.extractNumericId(e).compare(us.extractNumericId(t)):O_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Wr.fromString(e.substring(4,e.length-2))}}class Et extends us{construct(e,t,i){return new Et(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new pe(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new Et(t)}static emptyPath(){return new Et([])}}const YM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pn extends us{construct(e,t,i){return new pn(e,t,i)}static isValidIdentifier(e){return YM.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gw}static keyField(){return new pn([gw])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new pe(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new pe(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new pe(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,a+=2}else f==="`"?(c=!c,a++):f!=="."||c?(i+=f,a++):(l(),a++)}if(l(),c)throw new pe(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pn(t)}static emptyPath(){return new pn([])}}class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(Et.fromString(e))}static fromName(e){return new Ee(Et.fromString(e).popFirst(5))}static empty(){return new Ee(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new Et(e.slice()))}}function KM(n,e,t){if(!t)throw new pe(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function QM(n,e,t,i){if(e===!0&&i===!0)throw new pe(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function _w(n){if(!Ee.isDocumentKey(n))throw new pe(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function fA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function My(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":we(12329,{type:typeof n})}function Nc(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new pe(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=My(n);throw new pe(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Ht(n,e){const t={typeString:n};return e&&(t.value=e),t}function th(n,e){if(!fA(n))throw new pe(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const c=n[i];if(a&&typeof c!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new pe(re.INVALID_ARGUMENT,t);return!0}const yw=-62135596800,vw=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*vw);return new pt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<yw)throw new pe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/vw}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(th(e,pt._jsonSchema))return new pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-yw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:Ht("string",pt._jsonSchemaVersion),seconds:Ht("number"),nanoseconds:Ht("number")};class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new pt(0,0))}static max(){return new Ce(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const xc=-1;function WM(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=Ce.fromTimestamp(i===1e9?new pt(t+1,0):new pt(t,i));return new na(a,Ee.empty(),e)}function XM(n){return new na(n.readTime,n.key,xc)}class na{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new na(Ce.min(),Ee.empty(),xc)}static max(){return new na(Ce.max(),Ee.empty(),xc)}}function $M(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:He(n.largestBatchId,e.largestBatchId))}const JM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function jl(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==JM)throw n;ce("LocalStore","Unexpectedly lost primary lease")}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,i)=>{t(e)}))}static reject(e){return new ie(((t,i)=>{i(e)}))}static waitFor(e){return new ie(((t,i)=>{let a=0,l=0,c=!1;e.forEach((f=>{++a,f.next((()=>{++l,c&&l===a&&t()}),(m=>i(m)))})),c=!0,l===a&&t()}))}static or(e){let t=ie.resolve(!1);for(const i of e)t=t.next((a=>a?ie.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new ie(((i,a)=>{const l=e.length,c=new Array(l);let f=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next((y=>{c[g]=y,++f,f===l&&i(c)}),(y=>a(y)))}}))}static doWhile(e,t){return new ie(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}function e2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function zl(n){return n.name==="IndexedDbTransactionError"}class fm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}fm.ce=-1;const Ly=-1;function dm(n){return n==null}function Id(n){return n===0&&1/n==-1/0}function t2(n){return typeof n=="number"&&Number.isInteger(n)&&!Id(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const dA="";function n2(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ew(e)),e=i2(n.get(t),e);return Ew(e)}function i2(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case dA:t+="";break;default:t+=l}}return t}function Ew(n){return n+dA+""}function Tw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function lo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function mA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}let Yt=class D_{constructor(e,t){this.comparator=e,this.root=t||$r.EMPTY}insert(e,t){return new D_(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$r.BLACK,null,null))}remove(e){return new D_(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$r.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xf(this.root,e,this.comparator,!0)}},Xf=class{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},$r=class zs{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??zs.RED,this.left=a??zs.EMPTY,this.right=l??zs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new zs(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return zs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return zs.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}};$r.EMPTY=null,$r.RED=!0,$r.BLACK=!1;$r.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new $r(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Jt{constructor(e){this.comparator=e,this.data=new Yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Sw(this.data.getIterator())}getIteratorFrom(e){return new Sw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Jt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Jt(this.comparator);return t.data=e,t}}class Sw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Mi{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new Mi([])}unionWith(e){let t=new Jt(pn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Mi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Sl(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class pA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class gn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new pA("Invalid base64 string: "+l):l}})(e);return new gn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new gn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gn.EMPTY_BYTE_STRING=new gn("");const s2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ia(n){if(et(!!n,39018),typeof n=="string"){let e=0;const t=s2.exec(n);if(et(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ot(n.seconds),nanos:Ot(n.nanos)}}function Ot(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function sa(n){return typeof n=="string"?gn.fromBase64String(n):gn.fromUint8Array(n)}const gA="server_timestamp",_A="__type__",yA="__previous_value__",vA="__local_write_time__";function Vy(n){return(n?.mapValue?.fields||{})[_A]?.stringValue===gA}function mm(n){const e=n.mapValue.fields[yA];return Vy(e)?mm(e):e}function Oc(n){const e=ia(n.mapValue.fields[vA].timestampValue);return new pt(e.seconds,e.nanos)}class r2{constructor(e,t,i,a,l,c,f,m,g,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=y}}const Nd="(default)";class Dc{constructor(e,t){this.projectId=e,this.database=t||Nd}static empty(){return new Dc("","")}get isDefaultDatabase(){return this.database===Nd}isEqual(e){return e instanceof Dc&&e.projectId===this.projectId&&e.database===this.database}}const EA="__type__",a2="__max__",$f={mapValue:{}},TA="__vector__",xd="value";function ra(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Vy(n)?4:l2(n)?9007199254740991:o2(n)?10:11:we(28295,{value:n})}function ps(n,e){if(n===e)return!0;const t=ra(n);if(t!==ra(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Oc(n).isEqual(Oc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=ia(a.timestampValue),f=ia(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return sa(a.bytesValue).isEqual(sa(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return Ot(a.geoPointValue.latitude)===Ot(l.geoPointValue.latitude)&&Ot(a.geoPointValue.longitude)===Ot(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Ot(a.integerValue)===Ot(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Ot(a.doubleValue),f=Ot(l.doubleValue);return c===f?Id(c)===Id(f):isNaN(c)&&isNaN(f)}return!1})(n,e);case 9:return Sl(n.arrayValue.values||[],e.arrayValue.values||[],ps);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},f=l.mapValue.fields||{};if(Tw(c)!==Tw(f))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(f[m]===void 0||!ps(c[m],f[m])))return!1;return!0})(n,e);default:return we(52216,{left:n})}}function kc(n,e){return(n.values||[]).find((t=>ps(t,e)))!==void 0}function bl(n,e){if(n===e)return 0;const t=ra(n),i=ra(e);if(t!==i)return He(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return He(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=Ot(l.integerValue||l.doubleValue),m=Ot(c.integerValue||c.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(n,e);case 3:return bw(n.timestampValue,e.timestampValue);case 4:return bw(Oc(n),Oc(e));case 5:return O_(n.stringValue,e.stringValue);case 6:return(function(l,c){const f=sa(l),m=sa(c);return f.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),m=c.split("/");for(let g=0;g<f.length&&g<m.length;g++){const y=He(f[g],m[g]);if(y!==0)return y}return He(f.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=He(Ot(l.latitude),Ot(c.latitude));return f!==0?f:He(Ot(l.longitude),Ot(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return ww(n.arrayValue,e.arrayValue);case 10:return(function(l,c){const f=l.fields||{},m=c.fields||{},g=f[xd]?.arrayValue,y=m[xd]?.arrayValue,v=He(g?.values?.length||0,y?.values?.length||0);return v!==0?v:ww(g,y)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===$f.mapValue&&c===$f.mapValue)return 0;if(l===$f.mapValue)return 1;if(c===$f.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),g=c.fields||{},y=Object.keys(g);m.sort(),y.sort();for(let v=0;v<m.length&&v<y.length;++v){const b=O_(m[v],y[v]);if(b!==0)return b;const A=bl(f[m[v]],g[y[v]]);if(A!==0)return A}return He(m.length,y.length)})(n.mapValue,e.mapValue);default:throw we(23264,{he:t})}}function bw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return He(n,e);const t=ia(n),i=ia(e),a=He(t.seconds,i.seconds);return a!==0?a:He(t.nanos,i.nanos)}function ww(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=bl(t[a],i[a]);if(l)return l}return He(t.length,i.length)}function wl(n){return k_(n)}function k_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=ia(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return sa(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ee.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=k_(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${k_(t.fields[c])}`;return a+"}"})(n.mapValue):we(61005,{value:n})}function hd(n){switch(ra(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mm(n);return e?16+hd(e):16;case 5:return 2*n.stringValue.length;case 6:return sa(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+hd(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let a=0;return lo(i.fields,((l,c)=>{a+=l.length+hd(c)})),a})(n.mapValue);default:throw we(13486,{value:n})}}function P_(n){return!!n&&"integerValue"in n}function Uy(n){return!!n&&"arrayValue"in n}function Cw(n){return!!n&&"nullValue"in n}function Aw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function fd(n){return!!n&&"mapValue"in n}function o2(n){return(n?.mapValue?.fields||{})[EA]?.stringValue===TA}function mc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return lo(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=mc(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=mc(n.arrayValue.values[t]);return e}return{...n}}function l2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===a2}class di{constructor(e){this.value=e}static empty(){return new di({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!fd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mc(t)}setAll(e){let t=pn.emptyPath(),i={},a=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,i,a),i={},a=[],t=f.popLast()}c?i[f.lastSegment()]=mc(c):a.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());fd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ps(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];fd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){lo(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new di(mc(this.value))}}function SA(n){const e=[];return lo(n.fields,((t,i)=>{const a=new pn([t]);if(fd(i)){const l=SA(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new Mi(e)}class Tn{constructor(e,t,i,a,l,c,f){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new Tn(e,0,Ce.min(),Ce.min(),Ce.min(),di.empty(),0)}static newFoundDocument(e,t,i,a){return new Tn(e,1,t,Ce.min(),i,a,0)}static newNoDocument(e,t){return new Tn(e,2,t,Ce.min(),Ce.min(),di.empty(),0)}static newUnknownDocument(e,t){return new Tn(e,3,t,Ce.min(),Ce.min(),di.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Od{constructor(e,t){this.position=e,this.inclusive=t}}function Rw(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?i=Ee.comparator(Ee.fromName(c.referenceValue),t.key):i=bl(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Iw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ps(n.position[t],e.position[t]))return!1;return!0}class Dd{constructor(e,t="asc"){this.field=e,this.dir=t}}function u2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class bA{}class $t extends bA{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new h2(e,t,i):t==="array-contains"?new m2(e,i):t==="in"?new p2(e,i):t==="not-in"?new g2(e,i):t==="array-contains-any"?new _2(e,i):new $t(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new f2(e,i):new d2(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(bl(t,this.value)):t!==null&&ra(this.value)===ra(t)&&this.matchesComparison(bl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gs extends bA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new gs(e,t)}matches(e){return wA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function wA(n){return n.op==="and"}function CA(n){return c2(n)&&wA(n)}function c2(n){for(const e of n.filters)if(e instanceof gs)return!1;return!0}function M_(n){if(n instanceof $t)return n.field.canonicalString()+n.op.toString()+wl(n.value);if(CA(n))return n.filters.map((e=>M_(e))).join(",");{const e=n.filters.map((t=>M_(t))).join(",");return`${n.op}(${e})`}}function AA(n,e){return n instanceof $t?(function(i,a){return a instanceof $t&&i.op===a.op&&i.field.isEqual(a.field)&&ps(i.value,a.value)})(n,e):n instanceof gs?(function(i,a){return a instanceof gs&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,c,f)=>l&&AA(c,a.filters[f])),!0):!1})(n,e):void we(19439)}function RA(n){return n instanceof $t?(function(t){return`${t.field.canonicalString()} ${t.op} ${wl(t.value)}`})(n):n instanceof gs?(function(t){return t.op.toString()+" {"+t.getFilters().map(RA).join(" ,")+"}"})(n):"Filter"}class h2 extends $t{constructor(e,t,i){super(e,t,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class f2 extends $t{constructor(e,t){super(e,"in",t),this.keys=IA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class d2 extends $t{constructor(e,t){super(e,"not-in",t),this.keys=IA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function IA(n,e){return(e.arrayValue?.values||[]).map((t=>Ee.fromName(t.referenceValue)))}class m2 extends $t{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Uy(t)&&kc(t.arrayValue,this.value)}}class p2 extends $t{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&kc(this.value.arrayValue,t)}}class g2 extends $t{constructor(e,t){super(e,"not-in",t)}matches(e){if(kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!kc(this.value.arrayValue,t)}}class _2 extends $t{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Uy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>kc(this.value.arrayValue,i)))}}class y2{constructor(e,t=null,i=[],a=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function Nw(n,e=null,t=[],i=[],a=null,l=null,c=null){return new y2(n,e,t,i,a,l,c)}function jy(n){const e=Re(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>M_(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),dm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>wl(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>wl(i))).join(",")),e.Te=t}return e.Te}function zy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!u2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!AA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Iw(n.startAt,e.startAt)&&Iw(n.endAt,e.endAt)}function L_(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class pm{constructor(e,t=null,i=[],a=[],l=null,c="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function v2(n,e,t,i,a,l,c,f){return new pm(n,e,t,i,a,l,c,f)}function By(n){return new pm(n)}function xw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function E2(n){return n.collectionGroup!==null}function pc(n){const e=Re(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new Jt(pn.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(f=f.add(g.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Dd(l,i))})),t.has(pn.keyField().canonicalString())||e.Ie.push(new Dd(pn.keyField(),i))}return e.Ie}function hs(n){const e=Re(n);return e.Ee||(e.Ee=T2(e,pc(n))),e.Ee}function T2(n,e){if(n.limitType==="F")return Nw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Dd(a.field,l)}));const t=n.endAt?new Od(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Od(n.startAt.position,n.startAt.inclusive):null;return Nw(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function V_(n,e,t){return new pm(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function gm(n,e){return zy(hs(n),hs(e))&&n.limitType===e.limitType}function NA(n){return`${jy(hs(n))}|lt:${n.limitType}`}function ol(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>RA(a))).join(", ")}]`),dm(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>wl(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>wl(a))).join(",")),`Target(${i})`})(hs(n))}; limitType=${n.limitType})`}function _m(n,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Ee.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,a){for(const l of pc(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(i,a){return!(i.startAt&&!(function(c,f,m){const g=Rw(c,f,m);return c.inclusive?g<=0:g<0})(i.startAt,pc(i),a)||i.endAt&&!(function(c,f,m){const g=Rw(c,f,m);return c.inclusive?g>=0:g>0})(i.endAt,pc(i),a))})(n,e)}function S2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function xA(n){return(e,t)=>{let i=!1;for(const a of pc(n)){const l=b2(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function b2(n,e,t){const i=n.field.isKeyField()?Ee.comparator(e.key,t.key):(function(l,c,f){const m=c.data.field(l),g=f.data.field(l);return m!==null&&g!==null?bl(m,g):we(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:n.dir})}}class uo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){lo(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return mA(this.inner)}size(){return this.innerSize}}const w2=new Yt(Ee.comparator);function nr(){return w2}const OA=new Yt(Ee.comparator);function ac(...n){let e=OA;for(const t of n)e=e.insert(t.key,t);return e}function DA(n){let e=OA;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Qa(){return gc()}function kA(){return gc()}function gc(){return new uo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const C2=new Yt(Ee.comparator),A2=new Jt(Ee.comparator);function qe(...n){let e=A2;for(const t of n)e=e.add(t);return e}const R2=new Jt(He);function I2(){return R2}function Fy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Id(e)?"-0":e}}function PA(n){return{integerValue:""+n}}function N2(n,e){return t2(e)?PA(e):Fy(n,e)}class ym{constructor(){this._=void 0}}function x2(n,e,t){return n instanceof kd?(function(a,l){const c={fields:{[_A]:{stringValue:gA},[vA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Vy(l)&&(l=mm(l)),l&&(c.fields[yA]=l),{mapValue:c}})(t,e):n instanceof Pc?LA(n,e):n instanceof Mc?VA(n,e):(function(a,l){const c=MA(a,l),f=Ow(c)+Ow(a.Ae);return P_(c)&&P_(a.Ae)?PA(f):Fy(a.serializer,f)})(n,e)}function O2(n,e,t){return n instanceof Pc?LA(n,e):n instanceof Mc?VA(n,e):t}function MA(n,e){return n instanceof Pd?(function(i){return P_(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class kd extends ym{}class Pc extends ym{constructor(e){super(),this.elements=e}}function LA(n,e){const t=UA(e);for(const i of n.elements)t.some((a=>ps(a,i)))||t.push(i);return{arrayValue:{values:t}}}class Mc extends ym{constructor(e){super(),this.elements=e}}function VA(n,e){let t=UA(e);for(const i of n.elements)t=t.filter((a=>!ps(a,i)));return{arrayValue:{values:t}}}class Pd extends ym{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Ow(n){return Ot(n.integerValue||n.doubleValue)}function UA(n){return Uy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function D2(n,e){return n.field.isEqual(e.field)&&(function(i,a){return i instanceof Pc&&a instanceof Pc||i instanceof Mc&&a instanceof Mc?Sl(i.elements,a.elements,ps):i instanceof Pd&&a instanceof Pd?ps(i.Ae,a.Ae):i instanceof kd&&a instanceof kd})(n.transform,e.transform)}class k2{constructor(e,t){this.version=e,this.transformResults=t}}class Gs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Gs}static exists(e){return new Gs(void 0,e)}static updateTime(e){return new Gs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class vm{}function jA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new BA(n.key,Gs.none()):new nh(n.key,n.data,Gs.none());{const t=n.data,i=di.empty();let a=new Jt(pn.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new co(n.key,i,new Mi(a.toArray()),Gs.none())}}function P2(n,e,t){n instanceof nh?(function(a,l,c){const f=a.value.clone(),m=kw(a.fieldTransforms,l,c.transformResults);f.setAll(m),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):n instanceof co?(function(a,l,c){if(!dd(a.precondition,l))return void l.convertToUnknownDocument(c.version);const f=kw(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(zA(a)),m.setAll(f),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function _c(n,e,t,i){return n instanceof nh?(function(l,c,f,m){if(!dd(l.precondition,c))return f;const g=l.value.clone(),y=Pw(l.fieldTransforms,m,c);return g.setAll(y),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,i):n instanceof co?(function(l,c,f,m){if(!dd(l.precondition,c))return f;const g=Pw(l.fieldTransforms,m,c),y=c.data;return y.setAll(zA(l)),y.setAll(g),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((v=>v.field)))})(n,e,t,i):(function(l,c,f){return dd(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(n,e,t)}function M2(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),l=MA(i.transform,a||null);l!=null&&(t===null&&(t=di.empty()),t.set(i.field,l))}return t||null}function Dw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Sl(i,a,((l,c)=>D2(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class nh extends vm{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class co extends vm{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function zA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function kw(n,e,t){const i=new Map;et(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,f=e.data.field(l.field);i.set(l.field,O2(c,f,t[a]))}return i}function Pw(n,e,t){const i=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);i.set(a.field,x2(l,c,e))}return i}class BA extends vm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class L2 extends vm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class V2{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&P2(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=_c(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=_c(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=kA();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(a.key)?null:f;const m=jA(c,f);m!==null&&i.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Ce.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),qe())}isEqual(e){return this.batchId===e.batchId&&Sl(this.mutations,e.mutations,((t,i)=>Dw(t,i)))&&Sl(this.baseMutations,e.baseMutations,((t,i)=>Dw(t,i)))}}class Hy{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){et(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return C2})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new Hy(e,t,i,a)}}class U2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class j2{constructor(e,t){this.count=e,this.unchangedNames=t}}var Bt,Ye;function z2(n){switch(n){case re.OK:return we(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return we(15467,{code:n})}}function FA(n){if(n===void 0)return tr("GRPC error has no .code"),re.UNKNOWN;switch(n){case Bt.OK:return re.OK;case Bt.CANCELLED:return re.CANCELLED;case Bt.UNKNOWN:return re.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return re.INTERNAL;case Bt.UNAVAILABLE:return re.UNAVAILABLE;case Bt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Bt.NOT_FOUND:return re.NOT_FOUND;case Bt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Bt.ABORTED:return re.ABORTED;case Bt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Bt.DATA_LOSS:return re.DATA_LOSS;default:return we(39323,{code:n})}}(Ye=Bt||(Bt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";function B2(){return new TextEncoder}const F2=new Wr([4294967295,4294967295],0);function Mw(n){const e=B2().encode(n),t=new sA;return t.update(e),new Uint8Array(t.digest())}function Lw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Wr([t,i],0),new Wr([a,l],0)]}class qy{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new oc(`Invalid padding: ${t}`);if(i<0)throw new oc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new oc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new oc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Wr.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(Wr.fromNumber(i)));return a.compare(F2)===1&&(a=new Wr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Mw(e),[i,a]=Lw(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);if(!this.we(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new qy(l,a,t);return i.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=Mw(e),[i,a]=Lw(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class oc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Em{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,ih.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Em(Ce.min(),a,new Yt(He),nr(),qe())}}class ih{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new ih(i,t,qe(),qe(),qe())}}class md{constructor(e,t,i,a){this.be=e,this.removedTargetIds=t,this.key=i,this.De=a}}class HA{constructor(e,t){this.targetId=e,this.Ce=t}}class qA{constructor(e,t,i=gn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class Vw{constructor(){this.ve=0,this.Fe=Uw(),this.Me=gn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=qe(),t=qe(),i=qe();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:we(38017,{changeType:l})}})),new ih(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=Uw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,et(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class H2{constructor(e){this.Ge=e,this.ze=new Map,this.je=nr(),this.Je=Jf(),this.He=Jf(),this.Ye=new Yt(He)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(L_(l))if(i===0){const c=new Ee(l.path);this.et(t,c,Tn.newNoDocument(c,Ce.min()))}else et(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const f=this.ut(e),m=f?this.ct(f,e,c):1;if(m!==0){this.it(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let c,f;try{c=sa(i).toUint8Array()}catch(m){if(m instanceof pA)return Tl("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new qy(c,a,l)}catch(m){return Tl(m instanceof oc?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&L_(f.target)){const m=new Ee(f.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,Tn.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let i=qe();this.He.forEach(((l,c)=>{let f=!0;c.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new Em(e,t,this.Ye,this.je,i);return this.je=nr(),this.Je=Jf(),this.He=Jf(),this.Ye=new Yt(He),a}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Vw,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Jt(He),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Jt(He),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Vw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Jf(){return new Yt(Ee.comparator)}function Uw(){return new Yt(Ee.comparator)}const q2={asc:"ASCENDING",desc:"DESCENDING"},G2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Y2={and:"AND",or:"OR"};class K2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function U_(n,e){return n.useProto3Json||dm(e)?e:{value:e}}function Md(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Q2(n,e){return Md(n,e.toTimestamp())}function fs(n){return et(!!n,49232),Ce.fromTimestamp((function(t){const i=ia(t);return new pt(i.seconds,i.nanos)})(n))}function Gy(n,e){return j_(n,e).canonicalString()}function j_(n,e){const t=(function(a){return new Et(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function YA(n){const e=Et.fromString(n);return et($A(e),10190,{key:e.toString()}),e}function z_(n,e){return Gy(n.databaseId,e.path)}function r_(n,e){const t=YA(e);if(t.get(1)!==n.databaseId.projectId)throw new pe(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new pe(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(QA(t))}function KA(n,e){return Gy(n.databaseId,e)}function W2(n){const e=YA(n);return e.length===4?Et.emptyPath():QA(e)}function B_(n){return new Et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function QA(n){return et(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function jw(n,e,t){return{name:z_(n,e),fields:t.value.mapValue.fields}}function X2(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:we(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,y){return g.useProto3Json?(et(y===void 0||typeof y=="string",58123),gn.fromBase64String(y||"")):(et(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),gn.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(g){const y=g.code===void 0?re.UNKNOWN:FA(g.code);return new pe(y,g.message||"")})(c);t=new qA(i,a,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=r_(n,i.document.name),l=fs(i.document.updateTime),c=i.document.createTime?fs(i.document.createTime):Ce.min(),f=new di({mapValue:{fields:i.document.fields}}),m=Tn.newFoundDocument(a,l,c,f),g=i.targetIds||[],y=i.removedTargetIds||[];t=new md(g,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=r_(n,i.document),l=i.readTime?fs(i.readTime):Ce.min(),c=Tn.newNoDocument(a,l),f=i.removedTargetIds||[];t=new md([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=r_(n,i.document),l=i.removedTargetIds||[];t=new md([],l,a,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new j2(a,l),f=i.targetId;t=new HA(f,c)}}return t}function $2(n,e){let t;if(e instanceof nh)t={update:jw(n,e.key,e.value)};else if(e instanceof BA)t={delete:z_(n,e.key)};else if(e instanceof co)t={update:jw(n,e.key,e.data),updateMask:aL(e.fieldMask)};else{if(!(e instanceof L2))return we(16599,{Vt:e.type});t={verify:z_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const f=c.transform;if(f instanceof kd)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Pc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Mc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Pd)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw we(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:Q2(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:we(27497)})(n,e.precondition)),t}function J2(n,e){return n&&n.length>0?(et(e!==void 0,14353),n.map((t=>(function(a,l){let c=a.updateTime?fs(a.updateTime):fs(l);return c.isEqual(Ce.min())&&(c=fs(l)),new k2(c,a.transformResults||[])})(t,e)))):[]}function Z2(n,e){return{documents:[KA(n,e.path)]}}function eL(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=KA(n,a);const l=(function(g){if(g.length!==0)return XA(gs.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((y=>(function(b){return{field:ll(b.field),direction:iL(b.dir)}})(y)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=U_(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:a}}function tL(n){let e=W2(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){et(i===1,65062);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=(function(v){const b=WA(v);return b instanceof gs&&CA(b)?b.getFilters():[b]})(t.where));let c=[];t.orderBy&&(c=(function(v){return v.map((b=>(function(I){return new Dd(ul(I.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(b)))})(t.orderBy));let f=null;t.limit&&(f=(function(v){let b;return b=typeof v=="object"?v.value:v,dm(b)?null:b})(t.limit));let m=null;t.startAt&&(m=(function(v){const b=!!v.before,A=v.values||[];return new Od(A,b)})(t.startAt));let g=null;return t.endAt&&(g=(function(v){const b=!v.before,A=v.values||[];return new Od(A,b)})(t.endAt)),v2(e,a,c,l,f,"F",m,g)}function nL(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function WA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=ul(t.unaryFilter.field);return $t.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=ul(t.unaryFilter.field);return $t.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ul(t.unaryFilter.field);return $t.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ul(t.unaryFilter.field);return $t.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(n):n.fieldFilter!==void 0?(function(t){return $t.create(ul(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return gs.create(t.compositeFilter.filters.map((i=>WA(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(n):we(30097,{filter:n})}function iL(n){return q2[n]}function sL(n){return G2[n]}function rL(n){return Y2[n]}function ll(n){return{fieldPath:n.canonicalString()}}function ul(n){return pn.fromServerFormat(n.fieldPath)}function XA(n){return n instanceof $t?(function(t){if(t.op==="=="){if(Aw(t.value))return{unaryFilter:{field:ll(t.field),op:"IS_NAN"}};if(Cw(t.value))return{unaryFilter:{field:ll(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Aw(t.value))return{unaryFilter:{field:ll(t.field),op:"IS_NOT_NAN"}};if(Cw(t.value))return{unaryFilter:{field:ll(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ll(t.field),op:sL(t.op),value:t.value}}})(n):n instanceof gs?(function(t){const i=t.getFilters().map((a=>XA(a)));return i.length===1?i[0]:{compositeFilter:{op:rL(t.op),filters:i}}})(n):we(54877,{filter:n})}function aL(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function $A(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class qr{constructor(e,t,i,a,l=Ce.min(),c=Ce.min(),f=gn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new qr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new qr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class oL{constructor(e){this.yt=e}}function lL(n){const e=tL({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?V_(e,e.limit,"L"):e}class uL{constructor(){this.Cn=new cL}addToCollectionParentIndex(e,t){return this.Cn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(na.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(na.min())}updateCollectionGroup(e,t,i){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class cL{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new Jt(Et.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Jt(Et.comparator)).toArray()}}const zw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},JA=41943040;class Ln{static withCacheSize(e){return new Ln(e,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}Ln.DEFAULT_COLLECTION_PERCENTILE=10,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ln.DEFAULT=new Ln(JA,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ln.DISABLED=new Ln(-1,0,0);class Cl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Cl(0)}static cr(){return new Cl(-1)}}const Bw="LruGarbageCollector",hL=1048576;function Fw([n,e],[t,i]){const a=He(n,t);return a===0?He(e,i):a}class fL{constructor(e){this.Ir=e,this.buffer=new Jt(Fw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Fw(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class dL{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ce(Bw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){zl(t)?ce(Bw,"Ignoring IndexedDB error during garbage collection: ",t):await jl(t)}await this.Vr(3e5)}))}}class mL{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(fm.ce);const i=new fL(t);return this.mr.forEachTarget(e,(a=>i.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>i.Ar(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(zw)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zw):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,a,l,c,f,m,g;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,c=Date.now(),this.nthSequenceNumber(e,a)))).next((v=>(i=v,f=Date.now(),this.removeTargets(e,i,t)))).next((v=>(l=v,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((v=>(g=Date.now(),al()<=je.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(f-c)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${v} documents in `+(g-m)+`ms
Total Duration: ${g-y}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:v}))))}}function pL(n,e){return new mL(n,e)}class gL{constructor(){this.changes=new uo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ie.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class _L{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class yL{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&_c(i.mutation,a,Mi.empty(),pt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,qe()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=qe()){const a=Qa();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let c=ac();return l.forEach(((f,m)=>{c=c.insert(f,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=Qa();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,qe())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,i,a){let l=nr();const c=gc(),f=(function(){return gc()})();return t.forEach(((m,g)=>{const y=i.get(g.key);a.has(g.key)&&(y===void 0||y.mutation instanceof co)?l=l.insert(g.key,g):y!==void 0?(c.set(g.key,y.mutation.getFieldMask()),_c(y.mutation,g,y.mutation.getFieldMask(),pt.now())):c.set(g.key,Mi.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((g,y)=>c.set(g,y))),t.forEach(((g,y)=>f.set(g,new _L(y,c.get(g)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=gc();let a=new Yt(((c,f)=>c-f)),l=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((m=>{const g=t.get(m);if(g===null)return;let y=i.get(m)||Mi.empty();y=f.applyToLocalView(g,y),i.set(m,y);const v=(a.get(f.batchId)||qe()).add(m);a=a.insert(f.batchId,v)}))})).next((()=>{const c=[],f=a.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),g=m.key,y=m.value,v=kA();y.forEach((b=>{if(!l.has(b)){const A=jA(t.get(b),i.get(b));A!==null&&v.set(b,A),l=l.add(b)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,v))}return ie.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return(function(c){return Ee.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):E2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):ie.resolve(Qa());let f=xc,m=l;return c.next((g=>ie.forEach(g,((y,v)=>(f<v.largestBatchId&&(f=v.largestBatchId),l.get(y)?ie.resolve():this.remoteDocumentCache.getEntry(e,y).next((b=>{m=m.insert(y,b)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,m,g,qe()))).next((y=>({batchId:f,changes:DA(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((i=>{let a=ac();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let c=ac();return this.indexManager.getCollectionParents(e,l).next((f=>ie.forEach(f,(m=>{const g=(function(v,b){return new pm(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,i,a).next((y=>{y.forEach(((v,b)=>{c=c.insert(v,b)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((c=>{l.forEach(((m,g)=>{const y=g.getKey();c.get(y)===null&&(c=c.insert(y,Tn.newInvalidDocument(y)))}));let f=ac();return c.forEach(((m,g)=>{const y=l.get(m);y!==void 0&&_c(y.mutation,g,Mi.empty(),pt.now()),_m(t,g)&&(f=f.insert(m,g))})),f}))}}class vL{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ie.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:fs(a.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:lL(a.bundledQuery),readTime:fs(a.readTime)}})(t)),ie.resolve()}}class EL{constructor(){this.overlays=new Yt(Ee.comparator),this.qr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Qa();return ie.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.St(e,t,l)})),ie.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.qr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),ie.resolve()}getOverlaysForCollection(e,t,i){const a=Qa(),l=t.length+1,c=new Ee(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>i&&a.set(m.getKey(),m)}return ie.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new Yt(((g,y)=>g-y));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>i){let y=l.get(g.largestBatchId);y===null&&(y=Qa(),l=l.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const f=Qa(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,y)=>f.set(g,y))),!(f.size()>=a)););return ie.resolve(f)}St(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(i.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new U2(t,i));let l=this.qr.get(t);l===void 0&&(l=qe(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}class TL{constructor(){this.sessionToken=gn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}class Yy{constructor(){this.Qr=new Jt(sn.$r),this.Ur=new Jt(sn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new sn(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new sn(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Ee(new Et([])),i=new sn(t,e),a=new sn(t,e+1),l=[];return this.Ur.forEachInRange([i,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ee(new Et([])),i=new sn(t,e),a=new sn(t,e+1);let l=qe();return this.Ur.forEachInRange([i,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new sn(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class sn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ee.comparator(e.key,t.key)||He(e.Yr,t.Yr)}static Kr(e,t){return He(e.Yr,t.Yr)||Ee.comparator(e.key,t.key)}}class SL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Jt(sn.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new V2(l,t,i,a);this.mutationQueue.push(c);for(const f of a)this.Zr=this.Zr.add(new sn(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ie.resolve(c)}lookupMutationBatch(e,t){return ie.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.ei(i),l=a<0?0:a;return ie.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?Ly:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new sn(t,0),a=new sn(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,a],(c=>{const f=this.Xr(c.Yr);l.push(f)})),ie.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Jt(He);return t.forEach((a=>{const l=new sn(a,0),c=new sn(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(f=>{i=i.add(f.Yr)}))})),ie.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;Ee.isDocumentKey(l)||(l=l.child(""));const c=new sn(new Ee(l),0);let f=new Jt(He);return this.Zr.forEachWhile((m=>{const g=m.key.path;return!!i.isPrefixOf(g)&&(g.length===a&&(f=f.add(m.Yr)),!0)}),c),ie.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((i=>{const a=this.Xr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){et(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ie.forEach(t.mutations,(a=>{const l=new sn(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new sn(t,0),a=this.Zr.firstAfterOrEqual(i);return ie.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class bL{constructor(e){this.ri=e,this.docs=(function(){return new Yt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ie.resolve(i?i.document.mutableCopy():Tn.newInvalidDocument(t))}getEntries(e,t){let i=nr();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():Tn.newInvalidDocument(a))})),ie.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=nr();const c=t.path,f=new Ee(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:g,value:{document:y}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||$M(XM(y),i)<=0||(a.has(y.key)||_m(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return ie.resolve(l)}getAllFromCollectionGroup(e,t,i,a){we(9500)}ii(e,t){return ie.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new wL(this)}getSize(e){return ie.resolve(this.size)}}class wL extends gL{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(i)})),ie.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class CL{constructor(e){this.persistence=e,this.si=new uo((t=>jy(t)),zy),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new Yy,this.targetCount=0,this.ai=Cl.ur()}forEachTarget(e,t){return this.si.forEach(((i,a)=>t(a))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),ie.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Cl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Pr(t),ie.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.si.forEach(((c,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),ie.waitFor(l).next((()=>a))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return ie.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),ie.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),ie.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return ie.resolve(i)}containsKey(e,t){return ie.resolve(this._i.containsKey(t))}}class ZA{constructor(e,t){this.ui={},this.overlays={},this.ci=new fm(0),this.li=!1,this.li=!0,this.hi=new TL,this.referenceDelegate=e(this),this.Pi=new CL(this),this.indexManager=new uL,this.remoteDocumentCache=(function(a){return new bL(a)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new oL(t),this.Ii=new vL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new EL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new SL(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ce("MemoryPersistence","Starting transaction:",e);const a=new AL(this.ci.next());return this.referenceDelegate.Ei(),i(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return ie.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class AL extends ZM{constructor(e){super(),this.currentSequenceNumber=e}}class Ky{constructor(e){this.persistence=e,this.Ri=new Yy,this.Vi=null}static mi(e){return new Ky(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),ie.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(i=>{const a=Ee.fromPath(i);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Ce.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ie.or([()=>ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ld{constructor(e,t){this.persistence=e,this.pi=new uo((i=>n2(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=pL(this,t)}static mi(e,t){return new Ld(e,t)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return ie.forEach(this.pi,((i,a)=>this.br(e,i,a).next((l=>l?ie.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((f=>{f||(i++,l.removeEntry(c,Ce.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=hd(e.data.value)),t}br(e,t,i){return ie.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return ie.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Qy{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=a}static As(e,t){let i=qe(),a=qe();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Qy(e,t.fromCache,i,a)}}class RL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class IL{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return WO()?8:e2(Sn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new RL;return this.Ss(e,t,c).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,c,f.size)}))})).next((()=>l.result))}bs(e,t,i,a){return i.documentReadCount<this.fs?(al()<=je.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",ol(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(al()<=je.DEBUG&&ce("QueryEngine","Query:",ol(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.gs*a?(al()<=je.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",ol(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hs(t))):ie.resolve())}ys(e,t){if(xw(t))return ie.resolve(null);let i=hs(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=V_(t,null,"F"),i=hs(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=qe(...l);return this.ps.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,i).next((m=>{const g=this.Ds(t,f);return this.Cs(t,g,c,m.readTime)?this.ys(e,V_(t,null,"F")):this.vs(e,g,t,m)}))))})))))}ws(e,t,i,a){return xw(t)||a.isEqual(Ce.min())?ie.resolve(null):this.ps.getDocuments(e,i).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,i,a)?ie.resolve(null):(al()<=je.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),ol(t)),this.vs(e,c,t,WM(a,xc)).next((f=>f)))}))}Ds(e,t){let i=new Jt(xA(e));return t.forEach(((a,l)=>{_m(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,i){return al()<=je.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",ol(t)),this.ps.getDocumentsMatchingQuery(e,t,na.min(),i)}vs(e,t,i,a){return this.ps.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const Wy="LocalStore",NL=3e8;class xL{constructor(e,t,i,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new Yt(He),this.xs=new uo((l=>jy(l)),zy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yL(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function OL(n,e,t,i){return new xL(n,e,t,i)}async function eR(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],f=[];let m=qe();for(const g of a){c.push(g.batchId);for(const y of g.mutations)m=m.add(y.key)}for(const g of l){f.push(g.batchId);for(const y of g.mutations)m=m.add(y.key)}return t.localDocuments.getDocuments(i,m).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:f})))}))}))}function DL(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,m,g,y){const v=g.batch,b=v.keys();let A=ie.resolve();return b.forEach((I=>{A=A.next((()=>y.getEntry(m,I))).next((j=>{const V=g.docVersions.get(I);et(V!==null,48541),j.version.compareTo(V)<0&&(v.applyToRemoteDocument(j,g),j.isValidDocument()&&(j.setReadTime(g.commitVersion),y.addEntry(j)))}))})),A.next((()=>f.mutationQueue.removeMutationBatch(m,v)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let m=qe();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(m=m.add(f.batch.mutations[g].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function tR(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function kL(n,e){const t=Re(n),i=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const f=[];e.targetChanges.forEach(((y,v)=>{const b=a.get(v);if(!b)return;f.push(t.Pi.removeMatchingKeys(l,y.removedDocuments,v).next((()=>t.Pi.addMatchingKeys(l,y.addedDocuments,v))));let A=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(v)!==null?A=A.withResumeToken(gn.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):y.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(y.resumeToken,i)),a=a.insert(v,A),(function(j,V,$){return j.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=NL?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(b,A,y)&&f.push(t.Pi.updateTargetData(l,A))}));let m=nr(),g=qe();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))})),f.push(PL(l,c,e.documentUpdates).next((y=>{m=y.ks,g=y.qs}))),!i.isEqual(Ce.min())){const y=t.Pi.getLastRemoteSnapshotVersion(l).next((v=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(y)}return ie.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,g))).next((()=>m))})).then((l=>(t.Ms=a,l)))}function PL(n,e,t){let i=qe(),a=qe();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let c=nr();return t.forEach(((f,m)=>{const g=l.get(f);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(f)),m.isNoDocument()&&m.version.isEqual(Ce.min())?(e.removeEntry(f,m.readTime),c=c.insert(f,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(f,m)):ce(Wy,"Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",m.version)})),{ks:c,qs:a}}))}function ML(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Ly),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function LL(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.Pi.getTargetData(i,e).next((l=>l?(a=l,ie.resolve(a)):t.Pi.allocateTargetId(i).next((c=>(a=new qr(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.Ms.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function F_(n,e,t){const i=Re(n),a=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!zl(c))throw c;ce(Wy,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ms=i.Ms.remove(e),i.xs.delete(a.target)}function Hw(n,e,t){const i=Re(n);let a=Ce.min(),l=qe();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,y){const v=Re(m),b=v.xs.get(y);return b!==void 0?ie.resolve(v.Ms.get(b)):v.Pi.getTargetData(g,y)})(i,c,hs(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,f.targetId).next((m=>{l=m}))})).next((()=>i.Fs.getDocumentsMatchingQuery(c,e,t?a:Ce.min(),t?l:qe()))).next((f=>(VL(i,S2(e),f),{documents:f,Qs:l})))))}function VL(n,e,t){let i=n.Os.get(e)||Ce.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Os.set(e,i)}class qw{constructor(){this.activeTargetIds=I2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class UL{constructor(){this.Mo=new qw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new qw,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class jL{Oo(e){}shutdown(){}}const Gw="ConnectivityMonitor";class Yw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ce(Gw,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ce(Gw,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Zf=null;function H_(){return Zf===null?Zf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Zf++,"0x"+Zf.toString(16)}const a_="RestConnection",zL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class BL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${a}`,this.Wo=this.databaseId.database===Nd?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Go(e,t,i,a,l){const c=H_(),f=this.zo(e,t.toUriEncodedString());ce(a_,`Sending RPC '${e}' ${c}:`,f,i);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,l);const{host:g}=new URL(f),y=_s(g);return this.Jo(e,f,m,i,y).then((v=>(ce(a_,`Received RPC '${e}' ${c}: `,v),v)),(v=>{throw Tl(a_,`RPC '${e}' ${c} failed with error: `,v,"url: ",f,"request:",i),v}))}Ho(e,t,i,a,l,c){return this.Go(e,t,i,a,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ul})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const i=zL[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}class FL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const vn="WebChannelConnection";class HL extends BL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,a,l){const c=H_();return new Promise(((f,m)=>{const g=new rA;g.setWithCredentials(!0),g.listenOnce(aA.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case cd.NO_ERROR:const v=g.getResponseJson();ce(vn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),f(v);break;case cd.TIMEOUT:ce(vn,`RPC '${e}' ${c} timed out`),m(new pe(re.DEADLINE_EXCEEDED,"Request time out"));break;case cd.HTTP_ERROR:const b=g.getStatus();if(ce(vn,`RPC '${e}' ${c} failed with status:`,b,"response text:",g.getResponseText()),b>0){let A=g.getResponseJson();Array.isArray(A)&&(A=A[0]);const I=A?.error;if(I&&I.status&&I.message){const j=(function($){const K=$.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(K)>=0?K:re.UNKNOWN})(I.status);m(new pe(j,I.message))}else m(new pe(re.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new pe(re.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{ce(vn,`RPC '${e}' ${c} completed.`)}}));const y=JSON.stringify(a);ce(vn,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",y,i,15)}))}T_(e,t,i){const a=H_(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=uA(),f=lA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const y=l.join("");ce(vn,`Creating RPC '${e}' stream ${a}: ${y}`,m);const v=c.createWebChannel(y,m);this.I_(v);let b=!1,A=!1;const I=new FL({Yo:V=>{A?ce(vn,`Not sending because RPC '${e}' stream ${a} is closed:`,V):(b||(ce(vn,`Opening RPC '${e}' stream ${a} transport.`),v.open(),b=!0),ce(vn,`RPC '${e}' stream ${a} sending:`,V),v.send(V))},Zo:()=>v.close()}),j=(V,$,K)=>{V.listen($,(ee=>{try{K(ee)}catch(ue){setTimeout((()=>{throw ue}),0)}}))};return j(v,rc.EventType.OPEN,(()=>{A||(ce(vn,`RPC '${e}' stream ${a} transport opened.`),I.o_())})),j(v,rc.EventType.CLOSE,(()=>{A||(A=!0,ce(vn,`RPC '${e}' stream ${a} transport closed`),I.a_(),this.E_(v))})),j(v,rc.EventType.ERROR,(V=>{A||(A=!0,Tl(vn,`RPC '${e}' stream ${a} transport errored. Name:`,V.name,"Message:",V.message),I.a_(new pe(re.UNAVAILABLE,"The operation could not be completed")))})),j(v,rc.EventType.MESSAGE,(V=>{if(!A){const $=V.data[0];et(!!$,16349);const K=$,ee=K?.error||K[0]?.error;if(ee){ce(vn,`RPC '${e}' stream ${a} received error:`,ee);const ue=ee.status;let _e=(function(R){const N=Bt[R];if(N!==void 0)return FA(N)})(ue),Se=ee.message;_e===void 0&&(_e=re.INTERNAL,Se="Unknown error status: "+ue+" with message "+ee.message),A=!0,I.a_(new pe(_e,Se)),v.close()}else ce(vn,`RPC '${e}' stream ${a} received:`,$),I.u_($)}})),j(f,oA.STAT_EVENT,(V=>{V.stat===x_.PROXY?ce(vn,`RPC '${e}' stream ${a} detected buffering proxy`):V.stat===x_.NOPROXY&&ce(vn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{I.__()}),0),I}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function o_(){return typeof document<"u"?document:null}function Tm(n){return new K2(n,!0)}class nR{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&ce("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Kw="PersistentStream";class iR{constructor(e,t,i,a,l,c,f,m){this.Mi=e,this.S_=i,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new nR(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(tr(t.toString()),tr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new pe(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(Kw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ce(Kw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class qL extends iR{constructor(e,t,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=X2(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ce.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ce.min():c.readTime?fs(c.readTime):Ce.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=B_(this.serializer),t.addTarget=(function(l,c){let f;const m=c.target;if(f=L_(m)?{documents:Z2(l,m)}:{query:eL(l,m).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=GA(l,c.resumeToken);const g=U_(l,c.expectedCount);g!==null&&(f.expectedCount=g)}else if(c.snapshotVersion.compareTo(Ce.min())>0){f.readTime=Md(l,c.snapshotVersion.toTimestamp());const g=U_(l,c.expectedCount);g!==null&&(f.expectedCount=g)}return f})(this.serializer,e);const i=nL(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=B_(this.serializer),t.removeTarget=e,this.q_(t)}}class GL extends iR{constructor(e,t,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=J2(e.writeResults,e.commitTime),i=fs(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=B_(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>$2(this.serializer,i)))};this.q_(t)}}class YL{}class KL extends YL{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new pe(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,j_(t,i),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new pe(re.UNKNOWN,l.toString())}))}Ho(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Ho(e,j_(t,i),a,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(re.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class QL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(tr(t),this.aa=!1):ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const eo="RemoteStore";class WL{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{i.enqueueAndForget((async()=>{ho(this)&&(ce(eo,"Restarting streams for network reachability change."),await(async function(m){const g=Re(m);g.Ea.add(4),await sh(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Sm(g)})(this))}))})),this.Ra=new QL(i,a)}}async function Sm(n){if(ho(n))for(const e of n.da)await e(!0)}async function sh(n){for(const e of n.da)await e(!1)}function sR(n,e){const t=Re(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Zy(t)?Jy(t):Bl(t).O_()&&$y(t,e))}function Xy(n,e){const t=Re(n),i=Bl(t);t.Ia.delete(e),i.O_()&&rR(t,e),t.Ia.size===0&&(i.O_()?i.L_():ho(t)&&t.Ra.set("Unknown"))}function $y(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Bl(n).Y_(e)}function rR(n,e){n.Va.Ue(e),Bl(n).Z_(e)}function Jy(n){n.Va=new H2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Bl(n).start(),n.Ra.ua()}function Zy(n){return ho(n)&&!Bl(n).x_()&&n.Ia.size>0}function ho(n){return Re(n).Ea.size===0}function aR(n){n.Va=void 0}async function XL(n){n.Ra.set("Online")}async function $L(n){n.Ia.forEach(((e,t)=>{$y(n,e)}))}async function JL(n,e){aR(n),Zy(n)?(n.Ra.ha(e),Jy(n)):n.Ra.set("Unknown")}async function ZL(n,e,t){if(n.Ra.set("Online"),e instanceof qA&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const f of l.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,c),a.Ia.delete(f),a.Va.removeTarget(f))})(n,e)}catch(i){ce(eo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Vd(n,i)}else if(e instanceof md?n.Va.Ze(e):e instanceof HA?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ce.min()))try{const i=await tR(n.localStore);t.compareTo(i)>=0&&await(function(l,c){const f=l.Va.Tt(c);return f.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.Ia.get(g);y&&l.Ia.set(g,y.withResumeToken(m.resumeToken,c))}})),f.targetMismatches.forEach(((m,g)=>{const y=l.Ia.get(m);if(!y)return;l.Ia.set(m,y.withResumeToken(gn.EMPTY_BYTE_STRING,y.snapshotVersion)),rR(l,m);const v=new qr(y.target,m,g,y.sequenceNumber);$y(l,v)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){ce(eo,"Failed to raise snapshot:",i),await Vd(n,i)}}async function Vd(n,e,t){if(!zl(e))throw e;n.Ea.add(1),await sh(n),n.Ra.set("Offline"),t||(t=()=>tR(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ce(eo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Sm(n)}))}function oR(n,e){return e().catch((t=>Vd(n,t,e)))}async function bm(n){const e=Re(n),t=aa(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ly;for(;eV(e);)try{const a=await ML(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,tV(e,a)}catch(a){await Vd(e,a)}lR(e)&&uR(e)}function eV(n){return ho(n)&&n.Ta.length<10}function tV(n,e){n.Ta.push(e);const t=aa(n);t.O_()&&t.X_&&t.ea(e.mutations)}function lR(n){return ho(n)&&!aa(n).x_()&&n.Ta.length>0}function uR(n){aa(n).start()}async function nV(n){aa(n).ra()}async function iV(n){const e=aa(n);for(const t of n.Ta)e.ea(t.mutations)}async function sV(n,e,t){const i=n.Ta.shift(),a=Hy.from(i,e,t);await oR(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await bm(n)}async function rV(n,e){e&&aa(n).X_&&await(async function(i,a){if((function(c){return z2(c)&&c!==re.ABORTED})(a.code)){const l=i.Ta.shift();aa(i).B_(),await oR(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await bm(i)}})(n,e),lR(n)&&uR(n)}async function Qw(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),ce(eo,"RemoteStore received new credentials");const i=ho(t);t.Ea.add(3),await sh(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Sm(t)}async function aV(n,e){const t=Re(n);e?(t.Ea.delete(2),await Sm(t)):e||(t.Ea.add(2),await sh(t),t.Ra.set("Unknown"))}function Bl(n){return n.ma||(n.ma=(function(t,i,a){const l=Re(t);return l.sa(),new qL(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:XL.bind(null,n),t_:$L.bind(null,n),r_:JL.bind(null,n),H_:ZL.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Zy(n)?Jy(n):n.Ra.set("Unknown")):(await n.ma.stop(),aR(n))}))),n.ma}function aa(n){return n.fa||(n.fa=(function(t,i,a){const l=Re(t);return l.sa(),new GL(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:nV.bind(null,n),r_:rV.bind(null,n),ta:iV.bind(null,n),na:sV.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await bm(n)):(await n.fa.stop(),n.Ta.length>0&&(ce(eo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class ev{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const c=Date.now()+i,f=new ev(e,t,c,a,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tv(n,e){if(tr("AsyncQueue",`${e}: ${n}`),zl(n))return new pe(re.UNAVAILABLE,`${e}: ${n}`);throw n}class gl{static emptySet(e){return new gl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ee.comparator(t.key,i.key):(t,i)=>Ee.comparator(t.key,i.key),this.keyedMap=ac(),this.sortedSet=new Yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof gl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new gl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class Ww{constructor(){this.ga=new Yt(Ee.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Al{constructor(e,t,i,a,l,c,f,m,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,i,a,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new Al(e,t,gl.emptySet(t),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}class oV{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class lV{constructor(){this.queries=Xw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=Re(t),l=a.queries;a.queries=Xw(),l.forEach(((c,f)=>{for(const m of f.Sa)m.onError(i)}))})(this,new pe(re.ABORTED,"Firestore shutting down"))}}function Xw(){return new uo((n=>NA(n)),gm)}async function uV(n,e){const t=Re(n);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(i=2):(l=new oV,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const f=tv(c,`Initialization of query '${ol(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&nv(t)}async function cV(n,e){const t=Re(n),i=e.query;let a=3;const l=t.queries.get(i);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function hV(n,e){const t=Re(n);let i=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const f of c.Sa)f.Fa(a)&&(i=!0);c.wa=a}}i&&nv(t)}function fV(n,e,t){const i=Re(n),a=i.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);i.queries.delete(e)}function nv(n){n.Ca.forEach((e=>{e.next()}))}var q_,$w;($w=q_||(q_={})).Ma="default",$w.Cache="cache";class dV{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Al(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Al.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==q_.Cache}}class cR{constructor(e){this.key=e}}class hR{constructor(e){this.key=e}}class mV{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=qe(),this.mutatedKeys=qe(),this.eu=xA(e),this.tu=new gl(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new Ww,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,f=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((y,v)=>{const b=a.get(y),A=_m(this.query,v)?v:null,I=!!b&&this.mutatedKeys.has(b.key),j=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let V=!1;b&&A?b.data.isEqual(A.data)?I!==j&&(i.track({type:3,doc:A}),V=!0):this.su(b,A)||(i.track({type:2,doc:A}),V=!0,(m&&this.eu(A,m)>0||g&&this.eu(A,g)<0)&&(f=!0)):!b&&A?(i.track({type:0,doc:A}),V=!0):b&&!A&&(i.track({type:1,doc:b}),V=!0,(m||g)&&(f=!0)),V&&(A?(c=c.add(A),l=j?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),i.track({type:1,doc:y})}return{tu:c,iu:i,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((y,v)=>(function(A,I){const j=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:V})}};return j(A)-j(I)})(y.type,v.type)||this.eu(y.doc,v.doc))),this.ou(i),a=a??!1;const f=t&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,g=m!==this.Za;return this.Za=m,c.length!==0||g?{snapshot:new Al(this.query,e.tu,l,c,e.mutatedKeys,m===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ww,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=qe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new hR(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new cR(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=qe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Al.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const iv="SyncEngine";class pV{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class gV{constructor(e){this.key=e,this.hu=!1}}class _V{constructor(e,t,i,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new uo((f=>NA(f)),gm),this.Iu=new Map,this.Eu=new Set,this.du=new Yt(Ee.comparator),this.Au=new Map,this.Ru=new Yy,this.Vu={},this.mu=new Map,this.fu=Cl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function yV(n,e,t=!0){const i=_R(n);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await fR(i,e,t,!0),a}async function vV(n,e){const t=_R(n);await fR(t,e,!0,!1)}async function fR(n,e,t,i){const a=await LL(n.localStore,hs(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await EV(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&sR(n.remoteStore,a),f}async function EV(n,e,t,i,a){n.pu=(v,b,A)=>(async function(j,V,$,K){let ee=V.view.ru($);ee.Cs&&(ee=await Hw(j.localStore,V.query,!1).then((({documents:x})=>V.view.ru(x,ee))));const ue=K&&K.targetChanges.get(V.targetId),_e=K&&K.targetMismatches.get(V.targetId)!=null,Se=V.view.applyChanges(ee,j.isPrimaryClient,ue,_e);return Zw(j,V.targetId,Se.au),Se.snapshot})(n,v,b,A);const l=await Hw(n.localStore,e,!0),c=new mV(e,l.Qs),f=c.ru(l.documents),m=ih.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),g=c.applyChanges(f,n.isPrimaryClient,m);Zw(n,t,g.au);const y=new pV(e,t,c);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function TV(n,e,t){const i=Re(n),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((c=>!gm(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await F_(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&Xy(i.remoteStore,a.targetId),G_(i,a.targetId)})).catch(jl)):(G_(i,a.targetId),await F_(i.localStore,a.targetId,!0))}async function SV(n,e){const t=Re(n),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Xy(t.remoteStore,i.targetId))}async function bV(n,e,t){const i=xV(n);try{const a=await(function(c,f){const m=Re(c),g=pt.now(),y=f.reduce(((A,I)=>A.add(I.key)),qe());let v,b;return m.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let I=nr(),j=qe();return m.Ns.getEntries(A,y).next((V=>{I=V,I.forEach((($,K)=>{K.isValidDocument()||(j=j.add($))}))})).next((()=>m.localDocuments.getOverlayedDocuments(A,I))).next((V=>{v=V;const $=[];for(const K of f){const ee=M2(K,v.get(K.key).overlayedDocument);ee!=null&&$.push(new co(K.key,ee,SA(ee.value.mapValue),Gs.exists(!0)))}return m.mutationQueue.addMutationBatch(A,g,$,f)})).next((V=>{b=V;const $=V.applyToLocalDocumentSet(v,j);return m.documentOverlayCache.saveOverlays(A,V.batchId,$)}))})).then((()=>({batchId:b.batchId,changes:DA(v)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(c,f,m){let g=c.Vu[c.currentUser.toKey()];g||(g=new Yt(He)),g=g.insert(f,m),c.Vu[c.currentUser.toKey()]=g})(i,a.batchId,t),await rh(i,a.changes),await bm(i.remoteStore)}catch(a){const l=tv(a,"Failed to persist write");t.reject(l)}}async function dR(n,e){const t=Re(n);try{const i=await kL(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(et(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?et(c.hu,14607):a.removedDocuments.size>0&&(et(c.hu,42227),c.hu=!1))})),await rh(t,i,e)}catch(i){await jl(i)}}function Jw(n,e,t){const i=Re(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(c,f){const m=Re(c);m.onlineState=f;let g=!1;m.queries.forEach(((y,v)=>{for(const b of v.Sa)b.va(f)&&(g=!0)})),g&&nv(m)})(i.eventManager,e),a.length&&i.Pu.H_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function wV(n,e,t){const i=Re(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let c=new Yt(Ee.comparator);c=c.insert(l,Tn.newNoDocument(l,Ce.min()));const f=qe().add(l),m=new Em(Ce.min(),new Map,new Yt(He),c,f);await dR(i,m),i.du=i.du.remove(l),i.Au.delete(e),sv(i)}else await F_(i.localStore,e,!1).then((()=>G_(i,e,t))).catch(jl)}async function CV(n,e){const t=Re(n),i=e.batch.batchId;try{const a=await DL(t.localStore,e);pR(t,i,null),mR(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await rh(t,a)}catch(a){await jl(a)}}async function AV(n,e,t){const i=Re(n);try{const a=await(function(c,f){const m=Re(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let y;return m.mutationQueue.lookupMutationBatch(g,f).next((v=>(et(v!==null,37113),y=v.keys(),m.mutationQueue.removeMutationBatch(g,v)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,y,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y))).next((()=>m.localDocuments.getDocuments(g,y)))}))})(i.localStore,e);pR(i,e,t),mR(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await rh(i,a)}catch(a){await jl(a)}}function mR(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function pR(n,e,t){const i=Re(n);let a=i.Vu[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.Vu[i.currentUser.toKey()]=a}}function G_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||gR(n,i)}))}function gR(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Xy(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),sv(n))}function Zw(n,e,t){for(const i of t)i instanceof cR?(n.Ru.addReference(i.key,e),RV(n,i)):i instanceof hR?(ce(iv,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||gR(n,i.key)):we(19791,{wu:i})}function RV(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(ce(iv,"New document in limbo: "+t),n.Eu.add(i),sv(n))}function sv(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ee(Et.fromString(e)),i=n.fu.next();n.Au.set(i,new gV(t)),n.du=n.du.insert(t,i),sR(n.remoteStore,new qr(hs(By(t.path)),i,"TargetPurposeLimboResolution",fm.ce))}}async function rh(n,e,t){const i=Re(n),a=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,m)=>{c.push(i.pu(m,e,t).then((g=>{if((g||t)&&i.isPrimaryClient){const y=g?!g.fromCache:t?.targetChanges.get(m.targetId)?.current;i.sharedClientState.updateQueryState(m.targetId,y?"current":"not-current")}if(g){a.push(g);const y=Qy.As(m.targetId,g);l.push(y)}})))})),await Promise.all(c),i.Pu.H_(a),await(async function(m,g){const y=Re(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>ie.forEach(g,(b=>ie.forEach(b.Es,(A=>y.persistence.referenceDelegate.addReference(v,b.targetId,A))).next((()=>ie.forEach(b.ds,(A=>y.persistence.referenceDelegate.removeReference(v,b.targetId,A)))))))))}catch(v){if(!zl(v))throw v;ce(Wy,"Failed to update sequence numbers: "+v)}for(const v of g){const b=v.targetId;if(!v.fromCache){const A=y.Ms.get(b),I=A.snapshotVersion,j=A.withLastLimboFreeSnapshotVersion(I);y.Ms=y.Ms.insert(b,j)}}})(i.localStore,l))}async function IV(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){ce(iv,"User change. New user:",e.toKey());const i=await eR(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((f=>{f.forEach((m=>{m.reject(new pe(re.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await rh(t,i.Ls)}}function NV(n,e){const t=Re(n),i=t.Au.get(e);if(i&&i.hu)return qe().add(i.key);{let a=qe();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const f=t.Tu.get(c);a=a.unionWith(f.view.nu)}return a}}function _R(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=dR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wV.bind(null,e),e.Pu.H_=hV.bind(null,e.eventManager),e.Pu.yu=fV.bind(null,e.eventManager),e}function xV(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AV.bind(null,e),e}class Ud{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return OL(this.persistence,new IL,e.initialUser,this.serializer)}Cu(e){return new ZA(Ky.mi,this.serializer)}Du(e){return new UL}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ud.provider={build:()=>new Ud};class OV extends Ud{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){et(this.persistence.referenceDelegate instanceof Ld,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new dL(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Ln.withCacheSize(this.cacheSizeBytes):Ln.DEFAULT;return new ZA((i=>Ld.mi(i,t)),this.serializer)}}class Y_{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Jw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=IV.bind(null,this.syncEngine),await aV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new lV})()}createDatastore(e){const t=Tm(e.databaseInfo.databaseId),i=(function(l){return new HL(l)})(e.databaseInfo);return(function(l,c,f,m){return new KL(l,c,f,m)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,c,f){return new WL(i,a,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>Jw(this.syncEngine,t,0)),(function(){return Yw.v()?new Yw:new jL})())}createSyncEngine(e,t){return(function(a,l,c,f,m,g,y){const v=new _V(a,l,c,f,m,g);return y&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Re(t);ce(eo,"RemoteStore shutting down."),i.Ea.add(5),await sh(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Y_.provider={build:()=>new Y_};class DV{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):tr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const oa="FirestoreClient";class kV{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=En.UNAUTHENTICATED,this.clientId=Py.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{ce(oa,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(ce(oa,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=tv(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function l_(n,e){n.asyncQueue.verifyOperationInProgress(),ce(oa,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async a=>{i.isEqual(a)||(await eR(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function e0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await PV(n);ce(oa,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>Qw(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,a)=>Qw(e.remoteStore,a))),n._onlineComponents=e}async function PV(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ce(oa,"Using user provided OfflineComponentProvider");try{await l_(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===re.FAILED_PRECONDITION||a.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Tl("Error using user provided cache. Falling back to memory cache: "+t),await l_(n,new Ud)}}else ce(oa,"Using default OfflineComponentProvider"),await l_(n,new OV(void 0));return n._offlineComponents}async function yR(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ce(oa,"Using user provided OnlineComponentProvider"),await e0(n,n._uninitializedComponentsProvider._online)):(ce(oa,"Using default OnlineComponentProvider"),await e0(n,new Y_))),n._onlineComponents}function MV(n){return yR(n).then((e=>e.syncEngine))}async function LV(n){const e=await yR(n),t=e.eventManager;return t.onListen=yV.bind(null,e.syncEngine),t.onUnlisten=TV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=vV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=SV.bind(null,e.syncEngine),t}function VV(n,e,t={}){const i=new Xr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,m,g){const y=new DV({next:b=>{y.Nu(),c.enqueueAndForget((()=>cV(l,v)));const A=b.docs.has(f);!A&&b.fromCache?g.reject(new pe(re.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&b.fromCache&&m&&m.source==="server"?g.reject(new pe(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(b)},error:b=>g.reject(b)}),v=new dV(By(f.path),y,{includeMetadataChanges:!0,qa:!0});return uV(l,v)})(await LV(n),n.asyncQueue,e,t,i))),i.promise}function vR(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const t0=new Map;const ER="firestore.googleapis.com",n0=!0;class i0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ER,this.ssl=n0}else this.host=e.host,this.ssl=e.ssl??n0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=JA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<hL)throw new pe(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vR(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rv{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new i0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new i0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new VM;switch(i.type){case"firstParty":return new BM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new pe(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=t0.get(t);i&&(ce("ComponentProvider","Removing Datastore"),t0.delete(t),i.terminate())})(this),Promise.resolve()}}function UV(n,e,t,i={}){n=Nc(n,rv);const a=_s(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;a&&(im(`https://${f}`),sm("Firestore",!0)),l.host!==ER&&l.host!==f&&Tl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:f,ssl:a,emulatorOptions:i};if(!ea(m,c)&&(n._setSettings(m),i.mockUserToken)){let g,y;if(typeof i.mockUserToken=="string")g=i.mockUserToken,y=En.MOCK_USER;else{g=vy(i.mockUserToken,n._app?.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new pe(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new En(v)}n._authCredentials=new UM(new hA(g,y))}}class av{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new av(this.firestore,e,this._query)}}class an{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new an(this.firestore,e,this._key)}toJSON(){return{type:an._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(th(t,an._jsonSchema))return new an(e,i||null,new Ee(Et.fromString(t.referencePath)))}}an._jsonSchemaVersion="firestore/documentReference/1.0",an._jsonSchema={type:Ht("string",an._jsonSchemaVersion),referencePath:Ht("string")};class Lc extends av{constructor(e,t,i){super(e,t,By(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new an(this.firestore,null,new Ee(e))}withConverter(e){return new Lc(this.firestore,e,this._path)}}function Rl(n,e,...t){if(n=At(n),arguments.length===1&&(e=Py.newId()),KM("doc","path",e),n instanceof rv){const i=Et.fromString(e,...t);return _w(i),new an(n,null,new Ee(i))}{if(!(n instanceof an||n instanceof Lc))throw new pe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Et.fromString(e,...t));return _w(i),new an(n.firestore,n instanceof Lc?n.converter:null,new Ee(i))}}const s0="AsyncQueue";class r0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new nR(this,"async_queue_retry"),this._c=()=>{const i=o_();i&&ce(s0,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=o_();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=o_();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Xr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!zl(e))throw e;ce(s0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,tr("INTERNAL UNHANDLED ERROR: ",a0(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=ev.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&we(47125,{Pc:a0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function a0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class ov extends rv{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new r0,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new r0(e),this._firestoreClient=void 0,await e}}}function jV(n,e){const t=typeof n=="object"?n:lm(),i=typeof n=="string"?n:Nd,a=Xc(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=yy("firestore");l&&UV(a,...l)}return a}function TR(n){if(n._terminated)throw new pe(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||zV(n),n._firestoreClient}function zV(n){const e=n._freezeSettings(),t=(function(a,l,c,f){return new r2(a,l,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,vR(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new kV(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(n._componentsProvider))}class mi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mi(gn.fromBase64String(e))}catch(t){throw new pe(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new mi(gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:mi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(th(e,mi._jsonSchema))return mi.fromBase64String(e.bytes)}}mi._jsonSchemaVersion="firestore/bytes/1.0",mi._jsonSchema={type:Ht("string",mi._jsonSchemaVersion),bytes:Ht("string")};class lv{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class SR{constructor(e){this._methodName=e}}class ds{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ds._jsonSchemaVersion}}static fromJSON(e){if(th(e,ds._jsonSchema))return new ds(e.latitude,e.longitude)}}ds._jsonSchemaVersion="firestore/geoPoint/1.0",ds._jsonSchema={type:Ht("string",ds._jsonSchemaVersion),latitude:Ht("number"),longitude:Ht("number")};class ms{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ms._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(th(e,ms._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ms(e.vectorValues);throw new pe(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ms._jsonSchemaVersion="firestore/vectorValue/1.0",ms._jsonSchema={type:Ht("string",ms._jsonSchemaVersion),vectorValues:Ht("object")};const BV=/^__.*__$/;class FV{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new co(e,this.data,this.fieldMask,t,this.fieldTransforms):new nh(e,this.data,t,this.fieldTransforms)}}function bR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:n})}}class uv{constructor(e,t,i,a,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new uv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return jd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(bR(this.Ac)&&BV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class HV{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Tm(e)}Cc(e,t,i,a=!1){return new uv({Ac:e,methodName:t,Dc:i,path:pn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qV(n){const e=n._freezeSettings(),t=Tm(n._databaseId);return new HV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function GV(n,e,t,i,a,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);RR("Data must be an object, but it was:",c,i);const f=CR(i,c);let m,g;if(l.merge)m=new Mi(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const v of l.mergeFields){const b=YV(e,v,t);if(!c.contains(b))throw new pe(re.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);QV(y,b)||y.push(b)}m=new Mi(y),g=c.fieldTransforms.filter((v=>m.covers(v.field)))}else m=null,g=c.fieldTransforms;return new FV(new di(f),m,g)}function wR(n,e){if(AR(n=At(n)))return RR("Unsupported field value:",e,n),CR(n,e);if(n instanceof SR)return(function(i,a){if(!bR(a.Ac))throw a.Sc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,a){const l=[];let c=0;for(const f of i){let m=wR(f,a.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(n,e)}return(function(i,a){if((i=At(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return N2(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=pt.fromDate(i);return{timestampValue:Md(a.serializer,l)}}if(i instanceof pt){const l=new pt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Md(a.serializer,l)}}if(i instanceof ds)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof mi)return{bytesValue:GA(a.serializer,i._byteString)};if(i instanceof an){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Gy(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof ms)return(function(c,f){return{mapValue:{fields:{[EA]:{stringValue:TA},[xd]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw f.Sc("VectorValues must only contain numeric values.");return Fy(f.serializer,g)}))}}}}}})(i,a);throw a.Sc(`Unsupported field value: ${My(i)}`)})(n,e)}function CR(n,e){const t={};return mA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lo(n,((i,a)=>{const l=wR(a,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function AR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof pt||n instanceof ds||n instanceof mi||n instanceof an||n instanceof SR||n instanceof ms)}function RR(n,e,t){if(!AR(t)||!fA(t)){const i=My(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function YV(n,e,t){if((e=At(e))instanceof lv)return e._internalPath;if(typeof e=="string")return IR(n,e);throw jd("Field path arguments must be of type string or ",n,!1,void 0,t)}const KV=new RegExp("[~\\*/\\[\\]]");function IR(n,e,t){if(e.search(KV)>=0)throw jd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new lv(...e.split("."))._internalPath}catch{throw jd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function jd(n,e,t,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${i}`),c&&(m+=` in document ${a}`),m+=")"),new pe(re.INVALID_ARGUMENT,f+n+m)}function QV(n,e){return n.some((t=>t.isEqual(e)))}class NR{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new an(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new WV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xR("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class WV extends NR{data(){return super.data()}}function xR(n,e){return typeof e=="string"?IR(n,e):e instanceof lv?e._internalPath:e._delegate._internalPath}class XV{convertValue(e,t="none"){switch(ra(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(sa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return lo(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){const t=e.fields?.[xd].arrayValue?.values?.map((i=>Ot(i.doubleValue)));return new ms(t)}convertGeoPoint(e){return new ds(Ot(e.latitude),Ot(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=mm(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Oc(e));default:return null}}convertTimestamp(e){const t=ia(e);return new pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Et.fromString(e);et($A(i),9688,{name:e});const a=new Dc(i.get(1),i.get(3)),l=new Ee(i.popFirst(5));return a.isEqual(t)||tr(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function $V(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class lc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xa extends NR{constructor(e,t,i,a,l,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(xR("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Xa._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Xa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xa._jsonSchema={type:Ht("string",Xa._jsonSchemaVersion),bundleSource:Ht("string","DocumentSnapshot"),bundleName:Ht("string"),bundle:Ht("string")};class pd extends Xa{data(e={}){return super.data(e)}}class yc{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new lc(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new pd(this._firestore,this._userDataWriter,i.key,i,new lc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((f=>{const m=new pd(a._firestore,a._userDataWriter,f.doc.key,f.doc,new lc(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const m=new pd(a._firestore,a._userDataWriter,f.doc.key,f.doc,new lc(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,y=-1;return f.type!==0&&(g=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),y=c.indexOf(f.doc.key)),{type:JV(f.type),doc:m,oldIndex:g,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=yc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Py.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function JV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:n})}}function cv(n){n=Nc(n,an);const e=Nc(n.firestore,ov);return VV(TR(e),n._key).then((t=>tU(e,n,t)))}yc._jsonSchemaVersion="firestore/querySnapshot/1.0",yc._jsonSchema={type:Ht("string",yc._jsonSchemaVersion),bundleSource:Ht("string","QuerySnapshot"),bundleName:Ht("string"),bundle:Ht("string")};class ZV extends XV{constructor(e){super(),this.firestore=e}convertBytes(e){return new mi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new an(this.firestore,null,t)}}function hv(n,e,t){n=Nc(n,an);const i=Nc(n.firestore,ov),a=$V(n.converter,e);return eU(i,[GV(qV(i),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Gs.none())])}function eU(n,e){return(function(i,a){const l=new Xr;return i.asyncQueue.enqueueAndForget((async()=>bV(await MV(i),a,l))),l.promise})(TR(n),e)}function tU(n,e,t){const i=t.docs.get(e._key),a=new ZV(n);return new Xa(n,a,e._key,i,new lc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){Ul=a})(da),ta(new $s("firestore",((i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),f=new ov(new jM(i.getProvider("auth-internal")),new FM(c,i.getProvider("app-check-internal")),(function(g,y){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new pe(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dc(g.options.projectId,y)})(c,a),c);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),gi(dw,mw,e),gi(dw,mw,"esm2020")})();var o0={};const l0="@firebase/database",u0="1.1.0";let OR="";function nU(n){OR=n}class iU{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Xt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Ac(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class sU{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return vs(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const DR=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new iU(e)}}catch{}return new sU},Wa=DR("localStorage"),rU=DR("sessionStorage");const _l=new om("@firebase/database"),aU=(function(){let n=1;return function(){return n++}})(),kR=function(n){const e=oD(n),t=new iD;t.update(e);const i=t.digest();return _y.encodeByteArray(i)},ah=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=ah.apply(null,i):typeof i=="object"?e+=Xt(i):e+=i,e+=" "}return e};let vc=null,c0=!0;const oU=function(n,e){ae(!0,"Can't turn on custom loggers persistently."),_l.logLevel=je.VERBOSE,vc=_l.log.bind(_l)},dn=function(...n){if(c0===!0&&(c0=!1,vc===null&&rU.get("logging_enabled")===!0&&oU()),vc){const e=ah.apply(null,n);vc(e)}},oh=function(n){return function(...e){dn(n,...e)}},K_=function(...n){const e="FIREBASE INTERNAL ERROR: "+ah(...n);_l.error(e)},ir=function(...n){const e=`FIREBASE FATAL ERROR: ${ah(...n)}`;throw _l.error(e),new Error(e)},In=function(...n){const e="FIREBASE WARNING: "+ah(...n);_l.warn(e)},lU=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&In("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},fv=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},uU=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Il="[MIN_NAME]",to="[MAX_NAME]",fo=function(n,e){if(n===e)return 0;if(n===Il||e===to)return-1;if(e===Il||n===to)return 1;{const t=h0(n),i=h0(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},cU=function(n,e){return n===e?0:n<e?-1:1},Zu=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Xt(e))},dv=function(n){if(typeof n!="object"||n===null)return Xt(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=Xt(e[i]),t+=":",t+=dv(n[e[i]]);return t+="}",t},PR=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let a=0;a<t;a+=e)a+e>t?i.push(n.substring(a,t)):i.push(n.substring(a,a+e));return i};function _n(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const MR=function(n){ae(!fv(n),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let a,l,c,f,m;n===0?(l=0,c=0,a=1/n===-1/0?1:0):(a=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),i),l=f+i,c=Math.round(n*Math.pow(2,t-f)-Math.pow(2,t))):(l=0,c=Math.round(n/Math.pow(2,1-i-t))));const g=[];for(m=t;m;m-=1)g.push(c%2?1:0),c=Math.floor(c/2);for(m=e;m;m-=1)g.push(l%2?1:0),l=Math.floor(l/2);g.push(a?1:0),g.reverse();const y=g.join("");let v="";for(m=0;m<64;m+=8){let b=parseInt(y.substr(m,8),2).toString(16);b.length===1&&(b="0"+b),v=v+b}return v.toLowerCase()},hU=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},fU=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function dU(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}const mU=new RegExp("^-?(0*)\\d{1,10}$"),pU=-2147483648,gU=2147483647,h0=function(n){if(mU.test(n)){const e=Number(n);if(e>=pU&&e<=gU)return e}return null},Fl=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw In("Exception was thrown by user callback.",t),e},Math.floor(0))}},_U=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ec=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};class yU{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Wn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){In(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class vU{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(a=>this.auth_=a)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(dn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',In(e)}}class gd{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}gd.OWNER="owner";const mv="5",LR="v",VR="s",UR="r",jR="f",zR=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,BR="ls",FR="p",Q_="ac",HR="websocket",qR="long_polling";class GR{constructor(e,t,i,a,l=!1,c="",f=!1,m=!1,g=null){this.secure=t,this.namespace=i,this.webSocketOnly=a,this.nodeAdmin=l,this.persistenceKey=c,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=m,this.emulatorOptions=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Wa.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Wa.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function EU(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function YR(n,e,t){ae(typeof e=="string","typeof type must == string"),ae(typeof t=="object","typeof params must == object");let i;if(e===HR)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===qR)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);EU(n)&&(t.ns=n.namespace);const a=[];return _n(t,(l,c)=>{a.push(l+"="+c)}),i+a.join("&")}class TU{constructor(){this.counters_={}}incrementCounter(e,t=1){vs(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return LO(this.counters_)}}const u_={},c_={};function pv(n){const e=n.toString();return u_[e]||(u_[e]=new TU),u_[e]}function SU(n,e){const t=n.toString();return c_[t]||(c_[t]=e()),c_[t]}class bU{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<i.length;++a)i[a]&&Fl(()=>{this.onMessage_(i[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const f0="start",wU="close",CU="pLPCommand",AU="pRTLPCB",KR="id",QR="pw",WR="ser",RU="cb",IU="seg",NU="ts",xU="d",OU="dframe",XR=1870,$R=30,DU=XR-$R,kU=25e3,PU=3e4;class fl{constructor(e,t,i,a,l,c,f){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.transportSessionId=c,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=oh(e),this.stats_=pv(t),this.urlFn=m=>(this.appCheckToken&&(m[Q_]=this.appCheckToken),YR(t,qR,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new bU(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(PU)),uU(()=>{if(this.isClosed_)return;this.scriptTagHolder=new gv((...l)=>{const[c,f,m,g,y]=l;if(this.incrementIncomingBytes_(l),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===f0)this.id=f,this.password=m;else if(c===wU)f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...l)=>{const[c,f]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(c,f)},()=>{this.onClosed_()},this.urlFn);const i={};i[f0]="t",i[WR]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[RU]=this.scriptTagHolder.uniqueCallbackIdentifier),i[LR]=mv,this.transportSessionId&&(i[VR]=this.transportSessionId),this.lastSessionId&&(i[BR]=this.lastSessionId),this.applicationId&&(i[FR]=this.applicationId),this.appCheckToken&&(i[Q_]=this.appCheckToken),typeof location<"u"&&location.hostname&&zR.test(location.hostname)&&(i[UR]=jR);const a=this.urlFn(i);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){fl.forceAllow_=!0}static forceDisallow(){fl.forceDisallow_=!0}static isAvailable(){return fl.forceAllow_?!0:!fl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!hU()&&!fU()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Xt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=hC(t),a=PR(i,DU);for(let l=0;l<a.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[l]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[OU]="t",i[KR]=e,i[QR]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Xt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class gv{constructor(e,t,i,a){this.onDisconnect=i,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=aU(),window[CU+this.uniqueCallbackIdentifier]=e,window[AU+this.uniqueCallbackIdentifier]=t,this.myIFrame=gv.createIFrame_();let l="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(l='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(f){dn("frame writing exception"),f.stack&&dn(f.stack),dn(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||dn("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[KR]=this.myID,e[QR]=this.myPW,e[WR]=this.currentSerial;let t=this.urlFn(e),i="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+$R+i.length<=XR;){const c=this.pendingSegs.shift();i=i+"&"+IU+a+"="+c.seg+"&"+NU+a+"="+c.ts+"&"+xU+a+"="+c.d,a++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},a=setTimeout(i,Math.floor(kU)),l=()=>{clearTimeout(a),i()};this.addTag(e,l)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const a=i.readyState;(!a||a==="loaded"||a==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{dn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}const MU=16384,LU=45e3;let zd=null;typeof MozWebSocket<"u"?zd=MozWebSocket:typeof WebSocket<"u"&&(zd=WebSocket);class ki{constructor(e,t,i,a,l,c,f){this.connId=e,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=oh(this.connId),this.stats_=pv(t),this.connURL=ki.connectionURL_(t,c,f,a,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,a,l){const c={};return c[LR]=mv,typeof location<"u"&&location.hostname&&zR.test(location.hostname)&&(c[UR]=jR),t&&(c[VR]=t),i&&(c[BR]=i),a&&(c[Q_]=a),l&&(c[FR]=l),YR(e,HR,c)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Wa.set("previous_websocket_failure",!0);try{let i;QO(),this.mySock=new zd(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){ki.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&zd!==null&&!ki.forceDisallow_}static previouslyFailed(){return Wa.isInMemoryStorage||Wa.get("previous_websocket_failure")===!0}markConnectionHealthy(){Wa.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=Ac(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ae(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=Xt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=PR(t,MU);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(LU))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ki.responsesRequiredToBeHealthy=2;ki.healthyTimeout=3e4;class Vc{static get ALL_TRANSPORTS(){return[fl,ki]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=ki&&ki.isAvailable();let i=t&&!ki.previouslyFailed();if(e.webSocketOnly&&(t||In("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ki];else{const a=this.transports_=[];for(const l of Vc.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);Vc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Vc.globalTransportInitialized_=!1;const VU=6e4,UU=5e3,jU=10*1024,zU=100*1024,h_="t",d0="d",BU="s",m0="r",FU="e",p0="o",g0="a",_0="n",y0="p",HU="h";class qU{constructor(e,t,i,a,l,c,f,m,g,y){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=a,this.authToken_=l,this.onMessage_=c,this.onReady_=f,this.onDisconnect_=m,this.onKill_=g,this.lastSessionId=y,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=oh("c:"+this.id+":"),this.transportManager_=new Vc(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const a=e.healthyTimeout||0;a>0&&(this.healthyTimeout_=Ec(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>zU?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>jU?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(h_ in e){const t=e[h_];t===g0?this.upgradeIfSecondaryHealthy_():t===m0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===p0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Zu("t",e),i=Zu("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:y0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:g0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:_0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Zu("t",e),i=Zu("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Zu(h_,e);if(d0 in e){const i=e[d0];if(t===HU){const a={...i};this.repoInfo_.isUsingEmulator&&(a.h=this.repoInfo_.host),this.onHandshake_(a)}else if(t===_0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===BU?this.onConnectionShutdown_(i):t===m0?this.onReset_(i):t===FU?K_("Server Error: "+i):t===p0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):K_("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,a=e.h;this.sessionId=e.s,this.repoInfo_.host=a,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),mv!==i&&In("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),Ec(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(VU))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ec(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(UU))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:y0,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Wa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class JR{put(e,t,i,a){}merge(e,t,i,a){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class ZR{constructor(e){this.allowedEvents_=e,this.listeners_={},ae(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let a=0;a<i.length;a++)i[a].callback.apply(i[a].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const a=this.getInitialEvent(e);a&&t.apply(i,a)}off(e,t,i){this.validateEventType_(e);const a=this.listeners_[e]||[];for(let l=0;l<a.length;l++)if(a[l].callback===t&&(!i||i===a[l].context)){a.splice(l,1);return}}validateEventType_(e){ae(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Bd extends ZR{static getInstance(){return new Bd}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Ey()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ae(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const v0=32,E0=768;class lt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[i]=this.pieces_[a],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function We(){return new lt("")}function Me(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function la(n){return n.pieces_.length-n.pieceNum_}function ft(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new lt(n.pieces_,e)}function _v(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function GU(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function Uc(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function eI(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new lt(e,0)}function wt(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof lt)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let a=0;a<i.length;a++)i[a].length>0&&t.push(i[a])}return new lt(t,0)}function ze(n){return n.pieceNum_>=n.pieces_.length}function Rn(n,e){const t=Me(n),i=Me(e);if(t===null)return e;if(t===i)return Rn(ft(n),ft(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function YU(n,e){const t=Uc(n,0),i=Uc(e,0);for(let a=0;a<t.length&&a<i.length;a++){const l=fo(t[a],i[a]);if(l!==0)return l}return t.length===i.length?0:t.length<i.length?-1:1}function yv(n,e){if(la(n)!==la(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function pi(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(la(n)>la(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class KU{constructor(e,t){this.errorPrefix_=t,this.parts_=Uc(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=am(this.parts_[i]);tI(this)}}function QU(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=am(e),tI(n)}function WU(n){const e=n.parts_.pop();n.byteLength_-=am(e),n.parts_.length>0&&(n.byteLength_-=1)}function tI(n){if(n.byteLength_>E0)throw new Error(n.errorPrefix_+"has a key path longer than "+E0+" bytes ("+n.byteLength_+").");if(n.parts_.length>v0)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+v0+") or object contains a cycle "+Ka(n))}function Ka(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}class vv extends ZR{static getInstance(){return new vv}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return ae(e==="visible","Unknown event type: "+e),[this.visible_]}}const ec=1e3,XU=300*1e3,T0=30*1e3,$U=1.3,JU=3e4,ZU="server_kill",S0=3;class Ys extends JR{constructor(e,t,i,a,l,c,f,m){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=c,this.appCheckTokenProvider_=f,this.authOverride_=m,this.id=Ys.nextPersistentConnectionId_++,this.log_=oh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ec,this.maxReconnectDelay_=XU,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");vv.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Bd.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const a=++this.requestNumber_,l={r:a,a:e,b:t};this.log_(Xt(l)),ae(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(e){this.initConnection_();const t=new Qc,a={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:c=>{const f=c.d;c.s==="ok"?t.resolve(f):t.reject(f)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(l),t.promise}listen(e,t,i,a){this.initConnection_();const l=e._queryIdentifier,c=e._path.toString();this.log_("Listen called for "+c+" "+l),this.listens.has(c)||this.listens.set(c,new Map),ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ae(!this.listens.get(c).has(l),"listen() called twice for same path/queryId.");const f={onComplete:a,hashFn:t,query:e,tag:i};this.listens.get(c).set(l,f),this.connected_&&this.sendListen_(f)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),a=t._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i},c="q";e.tag&&(l.q=t._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest(c,l,f=>{const m=f.d,g=f.s;Ys.warnOnListenWarnings_(m,t),(this.listens.get(i)&&this.listens.get(i).get(a))===e&&(this.log_("listen response",f),g!=="ok"&&this.removeListen_(i,a),e.onComplete&&e.onComplete(g,m))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&vs(e,"w")){const i=vl(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+t._queryParams.getIndex().toString()+'"',l=t._path.toString();In(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||nD(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=T0)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=tD(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,a=>{const l=a.s,c=a.d||"error";this.authToken_===e&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),a=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,e._queryObject,t)}sendUnlisten_(e,t,i,a){this.log_("Unlisten on "+e+" for "+t);const l={p:e},c="n";a&&(l.q=i,l.t=a),this.sendRequest(c,l)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,a){const l={p:t,d:i};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,c=>{a&&setTimeout(()=>{a(c.s,c.d)},Math.floor(0))})}put(e,t,i,a){this.putInternal("p",e,t,i,a)}merge(e,t,i,a){this.putInternal("m",e,t,i,a)}putInternal(e,t,i,a,l){this.initConnection_();const c={p:t,d:i};l!==void 0&&(c.h=l),this.outstandingPuts_.push({action:e,request:c,onComplete:a}),this.outstandingPutCount_++;const f=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(f):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,a=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,l=>{this.log_(t+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const l=i.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Xt(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):K_("Unrecognized action received from server: "+Xt(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ae(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ec,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ec,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>JU&&(this.reconnectDelay_=ec),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*$U)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+Ys.nextConnectionId_++,l=this.lastSessionId;let c=!1,f=null;const m=function(){f?f.close():(c=!0,i())},g=function(v){ae(f,"sendRequest call when we're not connected not allowed."),f.sendRequest(v)};this.realtime_={close:m,sendRequest:g};const y=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[v,b]=await Promise.all([this.authTokenProvider_.getToken(y),this.appCheckTokenProvider_.getToken(y)]);c?dn("getToken() completed but was canceled"):(dn("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=b&&b.token,f=new qU(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,A=>{In(A+" ("+this.repoInfo_.toString()+")"),this.interrupt(ZU)},l))}catch(v){this.log_("Failed to get token: "+v),c||(this.repoInfo_.nodeAdmin&&In(v),m())}}}interrupt(e){dn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){dn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],T_(this.interruptReasons_)&&(this.reconnectDelay_=ec,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(l=>dv(l)).join("$"):i="default";const a=this.removeListen_(e,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(e,t){const i=new lt(e).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(t),l.delete(t),l.size===0&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(e,t){dn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=S0&&(this.reconnectDelay_=T0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){dn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=S0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+OR.replace(/\./g,"-")]=1,Ey()?e["framework.cordova"]=1:gC()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Bd.getInstance().currentlyOnline();return T_(this.interruptReasons_)&&e}}Ys.nextPersistentConnectionId_=0;Ys.nextConnectionId_=0;class Le{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Le(e,t)}}class wm{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Le(Il,e),a=new Le(Il,t);return this.compare(i,a)!==0}minPost(){return Le.MIN}}let ed;class nI extends wm{static get __EMPTY_NODE(){return ed}static set __EMPTY_NODE(e){ed=e}compare(e,t){return fo(e.name,t.name)}isDefinedOn(e){throw Vl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Le.MIN}maxPost(){return new Le(to,ed)}makePost(e,t){return ae(typeof e=="string","KeyIndex indexValue must always be a string."),new Le(e,ed)}toString(){return".key"}}const yl=new nI;class td{constructor(e,t,i,a,l=null){this.isReverse_=a,this.resultGenerator_=l,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?i(e.key,t):1,a&&(c*=-1),c<0)this.isReverse_?e=e.left:e=e.right;else if(c===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class rn{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??rn.RED,this.left=a??Un.EMPTY_NODE,this.right=l??Un.EMPTY_NODE}copy(e,t,i,a,l){return new rn(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return l<0?a=a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a=a.copy(null,t,null,null,null):a=a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Un.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,a;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return Un.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}rn.RED=!0;rn.BLACK=!1;class e4{copy(e,t,i,a,l){return this}insert(e,t,i){return new rn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Un{constructor(e,t=Un.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Un(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,rn.BLACK,null,null))}remove(e){return new Un(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,rn.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,a=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return a?a.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(a=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new td(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new td(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new td(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new td(this.root_,null,this.comparator_,!0,e)}}Un.EMPTY_NODE=new e4;function t4(n,e){return fo(n.name,e.name)}function Ev(n,e){return fo(n,e)}let W_;function n4(n){W_=n}const iI=function(n){return typeof n=="number"?"number:"+MR(n):"string:"+n},sI=function(n){if(n.isLeafNode()){const e=n.val();ae(typeof e=="string"||typeof e=="number"||typeof e=="object"&&vs(e,".sv"),"Priority must be a string or number.")}else ae(n===W_||n.isEmpty(),"priority of unexpected type.");ae(n===W_||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let b0;class nn{static set __childrenNodeConstructor(e){b0=e}static get __childrenNodeConstructor(){return b0}constructor(e,t=nn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ae(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),sI(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new nn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:nn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ze(e)?this:Me(e)===".priority"?this.priorityNode_:nn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:nn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=Me(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(ae(i!==".priority"||la(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,nn.__childrenNodeConstructor.EMPTY_NODE.updateChild(ft(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+iI(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=MR(this.value_):e+=this.value_,this.lazyHash_=kR(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===nn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof nn.__childrenNodeConstructor?-1:(ae(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,a=nn.VALUE_TYPE_ORDER.indexOf(t),l=nn.VALUE_TYPE_ORDER.indexOf(i);return ae(a>=0,"Unknown leaf type: "+t),ae(l>=0,"Unknown leaf type: "+i),a===l?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}nn.VALUE_TYPE_ORDER=["object","boolean","number","string"];let rI,aI;function i4(n){rI=n}function s4(n){aI=n}class r4 extends wm{compare(e,t){const i=e.node.getPriority(),a=t.node.getPriority(),l=i.compareTo(a);return l===0?fo(e.name,t.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Le.MIN}maxPost(){return new Le(to,new nn("[PRIORITY-POST]",aI))}makePost(e,t){const i=rI(e);return new Le(t,new nn("[PRIORITY-POST]",i))}toString(){return".priority"}}const Ct=new r4;const a4=Math.log(2);class o4{constructor(e){const t=l=>parseInt(Math.log(l)/a4,10),i=l=>parseInt(Array(l+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const a=i(this.count);this.bits_=e+1&a}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Fd=function(n,e,t,i){n.sort(e);const a=function(m,g){const y=g-m;let v,b;if(y===0)return null;if(y===1)return v=n[m],b=t?t(v):v,new rn(b,v.node,rn.BLACK,null,null);{const A=parseInt(y/2,10)+m,I=a(m,A),j=a(A+1,g);return v=n[A],b=t?t(v):v,new rn(b,v.node,rn.BLACK,I,j)}},l=function(m){let g=null,y=null,v=n.length;const b=function(I,j){const V=v-I,$=v;v-=I;const K=a(V+1,$),ee=n[V],ue=t?t(ee):ee;A(new rn(ue,ee.node,j,null,K))},A=function(I){g?(g.left=I,g=I):(y=I,g=I)};for(let I=0;I<m.count;++I){const j=m.nextBitIsOne(),V=Math.pow(2,m.count-(I+1));j?b(V,rn.BLACK):(b(V,rn.BLACK),b(V,rn.RED))}return y},c=new o4(n.length),f=l(c);return new Un(i||e,f)};let f_;const sl={};class Hs{static get Default(){return ae(sl&&Ct,"ChildrenNode.ts has not been loaded"),f_=f_||new Hs({".priority":sl},{".priority":Ct}),f_}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=vl(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Un?t:null}hasIndex(e){return vs(this.indexSet_,e.toString())}addIndex(e,t){ae(e!==yl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let a=!1;const l=t.getIterator(Le.Wrap);let c=l.getNext();for(;c;)a=a||e.isDefinedOn(c.node),i.push(c),c=l.getNext();let f;a?f=Fd(i,e.getCompare()):f=sl;const m=e.toString(),g={...this.indexSet_};g[m]=e;const y={...this.indexes_};return y[m]=f,new Hs(y,g)}addToIndexes(e,t){const i=Ed(this.indexes_,(a,l)=>{const c=vl(this.indexSet_,l);if(ae(c,"Missing index implementation for "+l),a===sl)if(c.isDefinedOn(e.node)){const f=[],m=t.getIterator(Le.Wrap);let g=m.getNext();for(;g;)g.name!==e.name&&f.push(g),g=m.getNext();return f.push(e),Fd(f,c.getCompare())}else return sl;else{const f=t.get(e.name);let m=a;return f&&(m=m.remove(new Le(e.name,f))),m.insert(e,e.node)}});return new Hs(i,this.indexSet_)}removeFromIndexes(e,t){const i=Ed(this.indexes_,a=>{if(a===sl)return a;{const l=t.get(e.name);return l?a.remove(new Le(e.name,l)):a}});return new Hs(i,this.indexSet_)}}let tc;class be{static get EMPTY_NODE(){return tc||(tc=new be(new Un(Ev),null,Hs.Default))}constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&sI(this.priorityNode_),this.children_.isEmpty()&&ae(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||tc}updatePriority(e){return this.children_.isEmpty()?this:new be(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?tc:t}}getChild(e){const t=Me(e);return t===null?this:this.getImmediateChild(t).getChild(ft(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(ae(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new Le(e,t);let a,l;t.isEmpty()?(a=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(e,t),l=this.indexMap_.addToIndexes(i,this.children_));const c=a.isEmpty()?tc:this.priorityNode_;return new be(a,c,l)}}updateChild(e,t){const i=Me(e);if(i===null)return t;{ae(Me(e)!==".priority"||la(e)===1,".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(ft(e),t);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,a=0,l=!0;if(this.forEachChild(Ct,(c,f)=>{t[c]=f.val(e),i++,l&&be.INTEGER_REGEXP_.test(c)?a=Math.max(a,Number(c)):l=!1}),!e&&l&&a<2*i){const c=[];for(const f in t)c[f]=t[f];return c}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+iI(this.getPriority().val())+":"),this.forEachChild(Ct,(t,i)=>{const a=i.hash();a!==""&&(e+=":"+t+":"+a)}),this.lazyHash_=e===""?"":kR(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new Le(e,t));return l?l.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Le(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Le(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(a=>t(a.name,a.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,a=>a);{const a=this.children_.getIteratorFrom(e.name,Le.Wrap);let l=a.peek();for(;l!=null&&t.compare(l,e)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,a=>a);{const a=this.children_.getReverseIteratorFrom(e.name,Le.Wrap);let l=a.peek();for(;l!=null&&t.compare(l,e)>0;)a.getNext(),l=a.peek();return a}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===lh?-1:0}withIndex(e){if(e===yl||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new be(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===yl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(Ct),a=t.getIterator(Ct);let l=i.getNext(),c=a.getNext();for(;l&&c;){if(l.name!==c.name||!l.node.equals(c.node))return!1;l=i.getNext(),c=a.getNext()}return l===null&&c===null}else return!1;else return!1}}resolveIndex_(e){return e===yl?null:this.indexMap_.get(e.toString())}}be.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class l4 extends be{constructor(){super(new Un(Ev),be.EMPTY_NODE,Hs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return be.EMPTY_NODE}isEmpty(){return!1}}const lh=new l4;Object.defineProperties(Le,{MIN:{value:new Le(Il,be.EMPTY_NODE)},MAX:{value:new Le(to,lh)}});nI.__EMPTY_NODE=be.EMPTY_NODE;nn.__childrenNodeConstructor=be;n4(lh);s4(lh);const u4=!0;function Wt(n,e=null){if(n===null)return be.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),ae(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new nn(t,Wt(e))}if(!(n instanceof Array)&&u4){const t=[];let i=!1;if(_n(n,(c,f)=>{if(c.substring(0,1)!=="."){const m=Wt(f);m.isEmpty()||(i=i||!m.getPriority().isEmpty(),t.push(new Le(c,m)))}}),t.length===0)return be.EMPTY_NODE;const l=Fd(t,t4,c=>c.name,Ev);if(i){const c=Fd(t,Ct.getCompare());return new be(l,Wt(e),new Hs({".priority":c},{".priority":Ct}))}else return new be(l,Wt(e),Hs.Default)}else{let t=be.EMPTY_NODE;return _n(n,(i,a)=>{if(vs(n,i)&&i.substring(0,1)!=="."){const l=Wt(a);(l.isLeafNode()||!l.isEmpty())&&(t=t.updateImmediateChild(i,l))}}),t.updatePriority(Wt(e))}}i4(Wt);class c4 extends wm{constructor(e){super(),this.indexPath_=e,ae(!ze(e)&&Me(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),a=this.extractChild(t.node),l=i.compareTo(a);return l===0?fo(e.name,t.name):l}makePost(e,t){const i=Wt(e),a=be.EMPTY_NODE.updateChild(this.indexPath_,i);return new Le(t,a)}maxPost(){const e=be.EMPTY_NODE.updateChild(this.indexPath_,lh);return new Le(to,e)}toString(){return Uc(this.indexPath_,0).join("/")}}class h4 extends wm{compare(e,t){const i=e.node.compareTo(t.node);return i===0?fo(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Le.MIN}maxPost(){return Le.MAX}makePost(e,t){const i=Wt(e);return new Le(t,i)}toString(){return".value"}}const f4=new h4;function oI(n){return{type:"value",snapshotNode:n}}function Nl(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function jc(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function zc(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function d4(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}class Tv{constructor(e){this.index_=e}updateChild(e,t,i,a,l,c){ae(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(a).equals(i.getChild(a))&&f.isEmpty()===i.isEmpty()||(c!=null&&(i.isEmpty()?e.hasChild(t)?c.trackChildChange(jc(t,f)):ae(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?c.trackChildChange(Nl(t,i)):c.trackChildChange(zc(t,i,f))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(Ct,(a,l)=>{t.hasChild(a)||i.trackChildChange(jc(a,l))}),t.isLeafNode()||t.forEachChild(Ct,(a,l)=>{if(e.hasChild(a)){const c=e.getImmediateChild(a);c.equals(l)||i.trackChildChange(zc(a,l,c))}else i.trackChildChange(Nl(a,l))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?be.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Bc{constructor(e){this.indexedFilter_=new Tv(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Bc.getStartPost_(e),this.endPost_=Bc.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,a,l,c){return this.matches(new Le(t,i))||(i=be.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,a,l,c)}updateFullNode(e,t,i){t.isLeafNode()&&(t=be.EMPTY_NODE);let a=t.withIndex(this.index_);a=a.updatePriority(be.EMPTY_NODE);const l=this;return t.forEachChild(Ct,(c,f)=>{l.matches(new Le(c,f))||(a=a.updateImmediateChild(c,be.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,a,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}class m4{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Bc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,a,l,c){return this.rangedFilter_.matches(new Le(t,i))||(i=be.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,a,l,c):this.fullLimitUpdateChild_(e,t,i,l,c)}updateFullNode(e,t,i){let a;if(t.isLeafNode()||t.isEmpty())a=be.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){a=be.EMPTY_NODE.withIndex(this.index_);let l;this.reverse_?l=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;l.hasNext()&&c<this.limit_;){const f=l.getNext();if(this.withinDirectionalStart(f))if(this.withinDirectionalEnd(f))a=a.updateImmediateChild(f.name,f.node),c++;else break;else continue}}else{a=t.withIndex(this.index_),a=a.updatePriority(be.EMPTY_NODE);let l;this.reverse_?l=a.getReverseIterator(this.index_):l=a.getIterator(this.index_);let c=0;for(;l.hasNext();){const f=l.getNext();c<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?c++:a=a.updateImmediateChild(f.name,be.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,a,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,a,l){let c;if(this.reverse_){const v=this.index_.getCompare();c=(b,A)=>v(A,b)}else c=this.index_.getCompare();const f=e;ae(f.numChildren()===this.limit_,"");const m=new Le(t,i),g=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),y=this.rangedFilter_.matches(m);if(f.hasChild(t)){const v=f.getImmediateChild(t);let b=a.getChildAfterChild(this.index_,g,this.reverse_);for(;b!=null&&(b.name===t||f.hasChild(b.name));)b=a.getChildAfterChild(this.index_,b,this.reverse_);const A=b==null?1:c(b,m);if(y&&!i.isEmpty()&&A>=0)return l?.trackChildChange(zc(t,i,v)),f.updateImmediateChild(t,i);{l?.trackChildChange(jc(t,v));const j=f.updateImmediateChild(t,be.EMPTY_NODE);return b!=null&&this.rangedFilter_.matches(b)?(l?.trackChildChange(Nl(b.name,b.node)),j.updateImmediateChild(b.name,b.node)):j}}else return i.isEmpty()?e:y&&c(g,m)>=0?(l!=null&&(l.trackChildChange(jc(g.name,g.node)),l.trackChildChange(Nl(t,i))),f.updateImmediateChild(t,i).updateImmediateChild(g.name,be.EMPTY_NODE)):e}}class Sv{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ct}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ae(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ae(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Il}hasEnd(){return this.endSet_}getIndexEndValue(){return ae(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ae(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:to}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ae(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ct}copy(){const e=new Sv;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function p4(n){return n.loadsAllData()?new Tv(n.getIndex()):n.hasLimit()?new m4(n):new Bc(n)}function w0(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Ct?t="$priority":n.index_===f4?t="$value":n.index_===yl?t="$key":(ae(n.index_ instanceof c4,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Xt(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=Xt(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+Xt(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=Xt(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+Xt(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function C0(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Ct&&(e.i=n.index_.toString()),e}class Hd extends JR{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(ae(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,i,a){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=a,this.log_=oh("p:rest:"),this.listens_={}}listen(e,t,i,a){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const c=Hd.getListenId_(e,i),f={};this.listens_[c]=f;const m=w0(e._queryParams);this.restRequest_(l+".json",m,(g,y)=>{let v=y;if(g===404&&(v=null,g=null),g===null&&this.onDataUpdate_(l,v,!1,i),vl(this.listens_,c)===f){let b;g?g===401?b="permission_denied":b="rest_error:"+g:b="ok",a(b,null)}})}unlisten(e,t){const i=Hd.getListenId_(e,t);delete this.listens_[i]}get(e){const t=w0(e._queryParams),i=e._path.toString(),a=new Qc;return this.restRequest_(i+".json",t,(l,c)=>{let f=c;l===404&&(f=null,l=null),l===null?(this.onDataUpdate_(i,f,!1,null),a.resolve(f)):a.reject(new Error(f))}),a.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,l])=>{a&&a.accessToken&&(t.auth=a.accessToken),l&&l.token&&(t.ac=l.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+oo(t);this.log_("Sending REST request for "+c);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(i&&f.readyState===4){this.log_("REST Response for "+c+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=Ac(f.responseText)}catch{In("Failed to parse JSON response for "+c+": "+f.responseText)}i(null,m)}else f.status!==401&&f.status!==404&&In("Got unsuccessful REST response for "+c+" Status: "+f.status),i(f.status);i=null}},f.open("GET",c,!0),f.send()})}}class g4{constructor(){this.rootNode_=be.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function qd(){return{value:null,children:new Map}}function lI(n,e,t){if(ze(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const i=Me(e);n.children.has(i)||n.children.set(i,qd());const a=n.children.get(i);e=ft(e),lI(a,e,t)}}function X_(n,e,t){n.value!==null?t(e,n.value):_4(n,(i,a)=>{const l=new lt(e.toString()+"/"+i);X_(a,l,t)})}function _4(n,e){n.children.forEach((t,i)=>{e(i,t)})}class y4{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t={...e};return this.last_&&_n(this.last_,(i,a)=>{t[i]=t[i]-a}),this.last_=e,t}}const A0=10*1e3,v4=30*1e3,E4=300*1e3;class T4{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new y4(e);const i=A0+(v4-A0)*Math.random();Ec(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;_n(e,(a,l)=>{l>0&&vs(this.statsToReport_,a)&&(t[a]=l,i=!0)}),i&&this.server_.reportStats(t),Ec(this.reportStats_.bind(this),Math.floor(Math.random()*2*E4))}}var Li;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Li||(Li={}));function bv(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function wv(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Cv(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Gd{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Li.ACK_USER_WRITE,this.source=bv()}operationForChild(e){if(ze(this.path)){if(this.affectedTree.value!=null)return ae(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new lt(e));return new Gd(We(),t,this.revert)}}else return ae(Me(this.path)===e,"operationForChild called for unrelated child."),new Gd(ft(this.path),this.affectedTree,this.revert)}}class Fc{constructor(e,t){this.source=e,this.path=t,this.type=Li.LISTEN_COMPLETE}operationForChild(e){return ze(this.path)?new Fc(this.source,We()):new Fc(this.source,ft(this.path))}}class no{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Li.OVERWRITE}operationForChild(e){return ze(this.path)?new no(this.source,We(),this.snap.getImmediateChild(e)):new no(this.source,ft(this.path),this.snap)}}class xl{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Li.MERGE}operationForChild(e){if(ze(this.path)){const t=this.children.subtree(new lt(e));return t.isEmpty()?null:t.value?new no(this.source,We(),t.value):new xl(this.source,We(),t)}else return ae(Me(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new xl(this.source,ft(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ua{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ze(e))return this.isFullyInitialized()&&!this.filtered_;const t=Me(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class S4{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function b4(n,e,t,i){const a=[],l=[];return e.forEach(c=>{c.type==="child_changed"&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&l.push(d4(c.childName,c.snapshotNode))}),nc(n,a,"child_removed",e,i,t),nc(n,a,"child_added",e,i,t),nc(n,a,"child_moved",l,i,t),nc(n,a,"child_changed",e,i,t),nc(n,a,"value",e,i,t),a}function nc(n,e,t,i,a,l){const c=i.filter(f=>f.type===t);c.sort((f,m)=>C4(n,f,m)),c.forEach(f=>{const m=w4(n,f,l);a.forEach(g=>{g.respondsTo(f.type)&&e.push(g.createEvent(m,n.query_))})})}function w4(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function C4(n,e,t){if(e.childName==null||t.childName==null)throw Vl("Should only compare child_ events.");const i=new Le(e.childName,e.snapshotNode),a=new Le(t.childName,t.snapshotNode);return n.index_.compare(i,a)}function Cm(n,e){return{eventCache:n,serverCache:e}}function Tc(n,e,t,i){return Cm(new ua(e,t,i),n.serverCache)}function uI(n,e,t,i){return Cm(n.eventCache,new ua(e,t,i))}function Yd(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function io(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let d_;const A4=()=>(d_||(d_=new Un(cU)),d_);class ht{static fromObject(e){let t=new ht(null);return _n(e,(i,a)=>{t=t.set(new lt(i),a)}),t}constructor(e,t=A4()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:We(),value:this.value};if(ze(e))return null;{const i=Me(e),a=this.children.get(i);if(a!==null){const l=a.findRootMostMatchingPathAndValue(ft(e),t);return l!=null?{path:wt(new lt(i),l.path),value:l.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ze(e))return this;{const t=Me(e),i=this.children.get(t);return i!==null?i.subtree(ft(e)):new ht(null)}}set(e,t){if(ze(e))return new ht(t,this.children);{const i=Me(e),l=(this.children.get(i)||new ht(null)).set(ft(e),t),c=this.children.insert(i,l);return new ht(this.value,c)}}remove(e){if(ze(e))return this.children.isEmpty()?new ht(null):new ht(null,this.children);{const t=Me(e),i=this.children.get(t);if(i){const a=i.remove(ft(e));let l;return a.isEmpty()?l=this.children.remove(t):l=this.children.insert(t,a),this.value===null&&l.isEmpty()?new ht(null):new ht(this.value,l)}else return this}}get(e){if(ze(e))return this.value;{const t=Me(e),i=this.children.get(t);return i?i.get(ft(e)):null}}setTree(e,t){if(ze(e))return t;{const i=Me(e),l=(this.children.get(i)||new ht(null)).setTree(ft(e),t);let c;return l.isEmpty()?c=this.children.remove(i):c=this.children.insert(i,l),new ht(this.value,c)}}fold(e){return this.fold_(We(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((a,l)=>{i[a]=l.fold_(wt(e,a),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,We(),t)}findOnPath_(e,t,i){const a=this.value?i(t,this.value):!1;if(a)return a;if(ze(e))return null;{const l=Me(e),c=this.children.get(l);return c?c.findOnPath_(ft(e),wt(t,l),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,We(),t)}foreachOnPath_(e,t,i){if(ze(e))return this;{this.value&&i(t,this.value);const a=Me(e),l=this.children.get(a);return l?l.foreachOnPath_(ft(e),wt(t,a),i):new ht(null)}}foreach(e){this.foreach_(We(),e)}foreach_(e,t){this.children.inorderTraversal((i,a)=>{a.foreach_(wt(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class Vi{constructor(e){this.writeTree_=e}static empty(){return new Vi(new ht(null))}}function Sc(n,e,t){if(ze(e))return new Vi(new ht(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){const a=i.path;let l=i.value;const c=Rn(a,e);return l=l.updateChild(c,t),new Vi(n.writeTree_.set(a,l))}else{const a=new ht(t),l=n.writeTree_.setTree(e,a);return new Vi(l)}}}function $_(n,e,t){let i=n;return _n(t,(a,l)=>{i=Sc(i,wt(e,a),l)}),i}function R0(n,e){if(ze(e))return Vi.empty();{const t=n.writeTree_.setTree(e,new ht(null));return new Vi(t)}}function J_(n,e){return mo(n,e)!=null}function mo(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Rn(t.path,e)):null}function I0(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Ct,(i,a)=>{e.push(new Le(i,a))}):n.writeTree_.children.inorderTraversal((i,a)=>{a.value!=null&&e.push(new Le(i,a.value))}),e}function Jr(n,e){if(ze(e))return n;{const t=mo(n,e);return t!=null?new Vi(new ht(t)):new Vi(n.writeTree_.subtree(e))}}function Z_(n){return n.writeTree_.isEmpty()}function Ol(n,e){return cI(We(),n.writeTree_,e)}function cI(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((a,l)=>{a===".priority"?(ae(l.value!==null,"Priority writes must always be leaf nodes"),i=l.value):t=cI(wt(n,a),l,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(wt(n,".priority"),i)),t}}function Am(n,e){return mI(e,n)}function R4(n,e,t,i,a){ae(i>n.lastWriteId,"Stacking an older write on top of newer ones"),a===void 0&&(a=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:a}),a&&(n.visibleWrites=Sc(n.visibleWrites,e,t)),n.lastWriteId=i}function I4(n,e,t,i){ae(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=$_(n.visibleWrites,e,t),n.lastWriteId=i}function N4(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}function x4(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);ae(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let a=i.visible,l=!1,c=n.allWrites.length-1;for(;a&&c>=0;){const f=n.allWrites[c];f.visible&&(c>=t&&O4(f,i.path)?a=!1:pi(i.path,f.path)&&(l=!0)),c--}if(a){if(l)return D4(n),!0;if(i.snap)n.visibleWrites=R0(n.visibleWrites,i.path);else{const f=i.children;_n(f,m=>{n.visibleWrites=R0(n.visibleWrites,wt(i.path,m))})}return!0}else return!1}function O4(n,e){if(n.snap)return pi(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&pi(wt(n.path,t),e))return!0;return!1}function D4(n){n.visibleWrites=hI(n.allWrites,k4,We()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function k4(n){return n.visible}function hI(n,e,t){let i=Vi.empty();for(let a=0;a<n.length;++a){const l=n[a];if(e(l)){const c=l.path;let f;if(l.snap)pi(t,c)?(f=Rn(t,c),i=Sc(i,f,l.snap)):pi(c,t)&&(f=Rn(c,t),i=Sc(i,We(),l.snap.getChild(f)));else if(l.children){if(pi(t,c))f=Rn(t,c),i=$_(i,f,l.children);else if(pi(c,t))if(f=Rn(c,t),ze(f))i=$_(i,We(),l.children);else{const m=vl(l.children,Me(f));if(m){const g=m.getChild(ft(f));i=Sc(i,We(),g)}}}else throw Vl("WriteRecord should have .snap or .children")}}return i}function fI(n,e,t,i,a){if(!i&&!a){const l=mo(n.visibleWrites,e);if(l!=null)return l;{const c=Jr(n.visibleWrites,e);if(Z_(c))return t;if(t==null&&!J_(c,We()))return null;{const f=t||be.EMPTY_NODE;return Ol(c,f)}}}else{const l=Jr(n.visibleWrites,e);if(!a&&Z_(l))return t;if(!a&&t==null&&!J_(l,We()))return null;{const c=function(g){return(g.visible||a)&&(!i||!~i.indexOf(g.writeId))&&(pi(g.path,e)||pi(e,g.path))},f=hI(n.allWrites,c,e),m=t||be.EMPTY_NODE;return Ol(f,m)}}}function P4(n,e,t){let i=be.EMPTY_NODE;const a=mo(n.visibleWrites,e);if(a)return a.isLeafNode()||a.forEachChild(Ct,(l,c)=>{i=i.updateImmediateChild(l,c)}),i;if(t){const l=Jr(n.visibleWrites,e);return t.forEachChild(Ct,(c,f)=>{const m=Ol(Jr(l,new lt(c)),f);i=i.updateImmediateChild(c,m)}),I0(l).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}else{const l=Jr(n.visibleWrites,e);return I0(l).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}}function M4(n,e,t,i,a){ae(i||a,"Either existingEventSnap or existingServerSnap must exist");const l=wt(e,t);if(J_(n.visibleWrites,l))return null;{const c=Jr(n.visibleWrites,l);return Z_(c)?a.getChild(t):Ol(c,a.getChild(t))}}function L4(n,e,t,i){const a=wt(e,t),l=mo(n.visibleWrites,a);if(l!=null)return l;if(i.isCompleteForChild(t)){const c=Jr(n.visibleWrites,a);return Ol(c,i.getNode().getImmediateChild(t))}else return null}function V4(n,e){return mo(n.visibleWrites,e)}function U4(n,e,t,i,a,l,c){let f;const m=Jr(n.visibleWrites,e),g=mo(m,We());if(g!=null)f=g;else if(t!=null)f=Ol(m,t);else return[];if(f=f.withIndex(c),!f.isEmpty()&&!f.isLeafNode()){const y=[],v=c.getCompare(),b=l?f.getReverseIteratorFrom(i,c):f.getIteratorFrom(i,c);let A=b.getNext();for(;A&&y.length<a;)v(A,i)!==0&&y.push(A),A=b.getNext();return y}else return[]}function j4(){return{visibleWrites:Vi.empty(),allWrites:[],lastWriteId:-1}}function Kd(n,e,t,i){return fI(n.writeTree,n.treePath,e,t,i)}function Av(n,e){return P4(n.writeTree,n.treePath,e)}function N0(n,e,t,i){return M4(n.writeTree,n.treePath,e,t,i)}function Qd(n,e){return V4(n.writeTree,wt(n.treePath,e))}function z4(n,e,t,i,a,l){return U4(n.writeTree,n.treePath,e,t,i,a,l)}function Rv(n,e,t){return L4(n.writeTree,n.treePath,e,t)}function dI(n,e){return mI(wt(n.treePath,e),n.writeTree)}function mI(n,e){return{treePath:n,writeTree:e}}class B4{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;ae(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ae(i!==".priority","Only non-priority child changes can be tracked.");const a=this.changeMap.get(i);if(a){const l=a.type;if(t==="child_added"&&l==="child_removed")this.changeMap.set(i,zc(i,e.snapshotNode,a.snapshotNode));else if(t==="child_removed"&&l==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&l==="child_changed")this.changeMap.set(i,jc(i,a.oldSnap));else if(t==="child_changed"&&l==="child_added")this.changeMap.set(i,Nl(i,e.snapshotNode));else if(t==="child_changed"&&l==="child_changed")this.changeMap.set(i,zc(i,e.snapshotNode,a.oldSnap));else throw Vl("Illegal combination of changes: "+e+" occurred after "+a)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}class F4{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const pI=new F4;class Iv{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new ua(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Rv(this.writes_,e,i)}}getChildAfterChild(e,t,i){const a=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:io(this.viewCache_),l=z4(this.writes_,a,t,1,i,e);return l.length===0?null:l[0]}}function H4(n){return{filter:n}}function q4(n,e){ae(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ae(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function G4(n,e,t,i,a){const l=new B4;let c,f;if(t.type===Li.OVERWRITE){const g=t;g.source.fromUser?c=ey(n,e,g.path,g.snap,i,a,l):(ae(g.source.fromServer,"Unknown source."),f=g.source.tagged||e.serverCache.isFiltered()&&!ze(g.path),c=Wd(n,e,g.path,g.snap,i,a,f,l))}else if(t.type===Li.MERGE){const g=t;g.source.fromUser?c=K4(n,e,g.path,g.children,i,a,l):(ae(g.source.fromServer,"Unknown source."),f=g.source.tagged||e.serverCache.isFiltered(),c=ty(n,e,g.path,g.children,i,a,f,l))}else if(t.type===Li.ACK_USER_WRITE){const g=t;g.revert?c=X4(n,e,g.path,i,a,l):c=Q4(n,e,g.path,g.affectedTree,i,a,l)}else if(t.type===Li.LISTEN_COMPLETE)c=W4(n,e,t.path,i,l);else throw Vl("Unknown operation type: "+t.type);const m=l.getChanges();return Y4(e,c,m),{viewCache:c,changes:m}}function Y4(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const a=i.getNode().isLeafNode()||i.getNode().isEmpty(),l=Yd(n);(t.length>0||!n.eventCache.isFullyInitialized()||a&&!i.getNode().equals(l)||!i.getNode().getPriority().equals(l.getPriority()))&&t.push(oI(Yd(e)))}}function gI(n,e,t,i,a,l){const c=e.eventCache;if(Qd(i,t)!=null)return e;{let f,m;if(ze(t))if(ae(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const g=io(e),y=g instanceof be?g:be.EMPTY_NODE,v=Av(i,y);f=n.filter.updateFullNode(e.eventCache.getNode(),v,l)}else{const g=Kd(i,io(e));f=n.filter.updateFullNode(e.eventCache.getNode(),g,l)}else{const g=Me(t);if(g===".priority"){ae(la(t)===1,"Can't have a priority with additional path components");const y=c.getNode();m=e.serverCache.getNode();const v=N0(i,t,y,m);v!=null?f=n.filter.updatePriority(y,v):f=c.getNode()}else{const y=ft(t);let v;if(c.isCompleteForChild(g)){m=e.serverCache.getNode();const b=N0(i,t,c.getNode(),m);b!=null?v=c.getNode().getImmediateChild(g).updateChild(y,b):v=c.getNode().getImmediateChild(g)}else v=Rv(i,g,e.serverCache);v!=null?f=n.filter.updateChild(c.getNode(),g,v,y,a,l):f=c.getNode()}}return Tc(e,f,c.isFullyInitialized()||ze(t),n.filter.filtersNodes())}}function Wd(n,e,t,i,a,l,c,f){const m=e.serverCache;let g;const y=c?n.filter:n.filter.getIndexedFilter();if(ze(t))g=y.updateFullNode(m.getNode(),i,null);else if(y.filtersNodes()&&!m.isFiltered()){const A=m.getNode().updateChild(t,i);g=y.updateFullNode(m.getNode(),A,null)}else{const A=Me(t);if(!m.isCompleteForPath(t)&&la(t)>1)return e;const I=ft(t),V=m.getNode().getImmediateChild(A).updateChild(I,i);A===".priority"?g=y.updatePriority(m.getNode(),V):g=y.updateChild(m.getNode(),A,V,I,pI,null)}const v=uI(e,g,m.isFullyInitialized()||ze(t),y.filtersNodes()),b=new Iv(a,v,l);return gI(n,v,t,a,b,f)}function ey(n,e,t,i,a,l,c){const f=e.eventCache;let m,g;const y=new Iv(a,e,l);if(ze(t))g=n.filter.updateFullNode(e.eventCache.getNode(),i,c),m=Tc(e,g,!0,n.filter.filtersNodes());else{const v=Me(t);if(v===".priority")g=n.filter.updatePriority(e.eventCache.getNode(),i),m=Tc(e,g,f.isFullyInitialized(),f.isFiltered());else{const b=ft(t),A=f.getNode().getImmediateChild(v);let I;if(ze(b))I=i;else{const j=y.getCompleteChild(v);j!=null?_v(b)===".priority"&&j.getChild(eI(b)).isEmpty()?I=j:I=j.updateChild(b,i):I=be.EMPTY_NODE}if(A.equals(I))m=e;else{const j=n.filter.updateChild(f.getNode(),v,I,b,y,c);m=Tc(e,j,f.isFullyInitialized(),n.filter.filtersNodes())}}}return m}function x0(n,e){return n.eventCache.isCompleteForChild(e)}function K4(n,e,t,i,a,l,c){let f=e;return i.foreach((m,g)=>{const y=wt(t,m);x0(e,Me(y))&&(f=ey(n,f,y,g,a,l,c))}),i.foreach((m,g)=>{const y=wt(t,m);x0(e,Me(y))||(f=ey(n,f,y,g,a,l,c))}),f}function O0(n,e,t){return t.foreach((i,a)=>{e=e.updateChild(i,a)}),e}function ty(n,e,t,i,a,l,c,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let m=e,g;ze(t)?g=i:g=new ht(null).setTree(t,i);const y=e.serverCache.getNode();return g.children.inorderTraversal((v,b)=>{if(y.hasChild(v)){const A=e.serverCache.getNode().getImmediateChild(v),I=O0(n,A,b);m=Wd(n,m,new lt(v),I,a,l,c,f)}}),g.children.inorderTraversal((v,b)=>{const A=!e.serverCache.isCompleteForChild(v)&&b.value===null;if(!y.hasChild(v)&&!A){const I=e.serverCache.getNode().getImmediateChild(v),j=O0(n,I,b);m=Wd(n,m,new lt(v),j,a,l,c,f)}}),m}function Q4(n,e,t,i,a,l,c){if(Qd(a,t)!=null)return e;const f=e.serverCache.isFiltered(),m=e.serverCache;if(i.value!=null){if(ze(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return Wd(n,e,t,m.getNode().getChild(t),a,l,f,c);if(ze(t)){let g=new ht(null);return m.getNode().forEachChild(yl,(y,v)=>{g=g.set(new lt(y),v)}),ty(n,e,t,g,a,l,f,c)}else return e}else{let g=new ht(null);return i.foreach((y,v)=>{const b=wt(t,y);m.isCompleteForPath(b)&&(g=g.set(y,m.getNode().getChild(b)))}),ty(n,e,t,g,a,l,f,c)}}function W4(n,e,t,i,a){const l=e.serverCache,c=uI(e,l.getNode(),l.isFullyInitialized()||ze(t),l.isFiltered());return gI(n,c,t,i,pI,a)}function X4(n,e,t,i,a,l){let c;if(Qd(i,t)!=null)return e;{const f=new Iv(i,e,a),m=e.eventCache.getNode();let g;if(ze(t)||Me(t)===".priority"){let y;if(e.serverCache.isFullyInitialized())y=Kd(i,io(e));else{const v=e.serverCache.getNode();ae(v instanceof be,"serverChildren would be complete if leaf node"),y=Av(i,v)}y=y,g=n.filter.updateFullNode(m,y,l)}else{const y=Me(t);let v=Rv(i,y,e.serverCache);v==null&&e.serverCache.isCompleteForChild(y)&&(v=m.getImmediateChild(y)),v!=null?g=n.filter.updateChild(m,y,v,ft(t),f,l):e.eventCache.getNode().hasChild(y)?g=n.filter.updateChild(m,y,be.EMPTY_NODE,ft(t),f,l):g=m,g.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=Kd(i,io(e)),c.isLeafNode()&&(g=n.filter.updateFullNode(g,c,l)))}return c=e.serverCache.isFullyInitialized()||Qd(i,We())!=null,Tc(e,g,c,n.filter.filtersNodes())}}class $4{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,a=new Tv(i.getIndex()),l=p4(i);this.processor_=H4(l);const c=t.serverCache,f=t.eventCache,m=a.updateFullNode(be.EMPTY_NODE,c.getNode(),null),g=l.updateFullNode(be.EMPTY_NODE,f.getNode(),null),y=new ua(m,c.isFullyInitialized(),a.filtersNodes()),v=new ua(g,f.isFullyInitialized(),l.filtersNodes());this.viewCache_=Cm(v,y),this.eventGenerator_=new S4(this.query_)}get query(){return this.query_}}function J4(n){return n.viewCache_.serverCache.getNode()}function Z4(n){return Yd(n.viewCache_)}function e6(n,e){const t=io(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!ze(e)&&!t.getImmediateChild(Me(e)).isEmpty())?t.getChild(e):null}function D0(n){return n.eventRegistrations_.length===0}function t6(n,e){n.eventRegistrations_.push(e)}function k0(n,e,t){const i=[];if(t){ae(e==null,"A cancel should cancel all event registrations.");const a=n.query._path;n.eventRegistrations_.forEach(l=>{const c=l.createCancelEvent(t,a);c&&i.push(c)})}if(e){let a=[];for(let l=0;l<n.eventRegistrations_.length;++l){const c=n.eventRegistrations_[l];if(!c.matches(e))a.push(c);else if(e.hasAnyCallback()){a=a.concat(n.eventRegistrations_.slice(l+1));break}}n.eventRegistrations_=a}else n.eventRegistrations_=[];return i}function P0(n,e,t,i){e.type===Li.MERGE&&e.source.queryId!==null&&(ae(io(n.viewCache_),"We should always have a full cache before handling merges"),ae(Yd(n.viewCache_),"Missing event cache, even though we have a server cache"));const a=n.viewCache_,l=G4(n.processor_,a,e,t,i);return q4(n.processor_,l.viewCache),ae(l.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,_I(n,l.changes,l.viewCache.eventCache.getNode(),null)}function n6(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Ct,(l,c)=>{i.push(Nl(l,c))}),t.isFullyInitialized()&&i.push(oI(t.getNode())),_I(n,i,t.getNode(),e)}function _I(n,e,t,i){const a=i?[i]:n.eventRegistrations_;return b4(n.eventGenerator_,e,t,a)}let Xd;class yI{constructor(){this.views=new Map}}function i6(n){ae(!Xd,"__referenceConstructor has already been defined"),Xd=n}function s6(){return ae(Xd,"Reference.ts has not been loaded"),Xd}function r6(n){return n.views.size===0}function Nv(n,e,t,i){const a=e.source.queryId;if(a!==null){const l=n.views.get(a);return ae(l!=null,"SyncTree gave us an op for an invalid query."),P0(l,e,t,i)}else{let l=[];for(const c of n.views.values())l=l.concat(P0(c,e,t,i));return l}}function vI(n,e,t,i,a){const l=e._queryIdentifier,c=n.views.get(l);if(!c){let f=Kd(t,a?i:null),m=!1;f?m=!0:i instanceof be?(f=Av(t,i),m=!1):(f=be.EMPTY_NODE,m=!1);const g=Cm(new ua(f,m,!1),new ua(i,a,!1));return new $4(e,g)}return c}function a6(n,e,t,i,a,l){const c=vI(n,e,i,a,l);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),t6(c,t),n6(c,t)}function o6(n,e,t,i){const a=e._queryIdentifier,l=[];let c=[];const f=ca(n);if(a==="default")for(const[m,g]of n.views.entries())c=c.concat(k0(g,t,i)),D0(g)&&(n.views.delete(m),g.query._queryParams.loadsAllData()||l.push(g.query));else{const m=n.views.get(a);m&&(c=c.concat(k0(m,t,i)),D0(m)&&(n.views.delete(a),m.query._queryParams.loadsAllData()||l.push(m.query)))}return f&&!ca(n)&&l.push(new(s6())(e._repo,e._path)),{removed:l,events:c}}function EI(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Zr(n,e){let t=null;for(const i of n.views.values())t=t||e6(i,e);return t}function TI(n,e){if(e._queryParams.loadsAllData())return Rm(n);{const i=e._queryIdentifier;return n.views.get(i)}}function SI(n,e){return TI(n,e)!=null}function ca(n){return Rm(n)!=null}function Rm(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let $d;function l6(n){ae(!$d,"__referenceConstructor has already been defined"),$d=n}function u6(){return ae($d,"Reference.ts has not been loaded"),$d}let c6=1;class M0{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ht(null),this.pendingWriteTree_=j4(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function bI(n,e,t,i,a){return R4(n.pendingWriteTree_,e,t,i,a),a?Hl(n,new no(bv(),e,t)):[]}function h6(n,e,t,i){I4(n.pendingWriteTree_,e,t,i);const a=ht.fromObject(t);return Hl(n,new xl(bv(),e,a))}function Gr(n,e,t=!1){const i=N4(n.pendingWriteTree_,e);if(x4(n.pendingWriteTree_,e)){let l=new ht(null);return i.snap!=null?l=l.set(We(),!0):_n(i.children,c=>{l=l.set(new lt(c),!0)}),Hl(n,new Gd(i.path,l,t))}else return[]}function uh(n,e,t){return Hl(n,new no(wv(),e,t))}function f6(n,e,t){const i=ht.fromObject(t);return Hl(n,new xl(wv(),e,i))}function d6(n,e){return Hl(n,new Fc(wv(),e))}function m6(n,e,t){const i=Ov(n,t);if(i){const a=Dv(i),l=a.path,c=a.queryId,f=Rn(l,e),m=new Fc(Cv(c),f);return kv(n,l,m)}else return[]}function Jd(n,e,t,i,a=!1){const l=e._path,c=n.syncPointTree_.get(l);let f=[];if(c&&(e._queryIdentifier==="default"||SI(c,e))){const m=o6(c,e,t,i);r6(c)&&(n.syncPointTree_=n.syncPointTree_.remove(l));const g=m.removed;if(f=m.events,!a){const y=g.findIndex(b=>b._queryParams.loadsAllData())!==-1,v=n.syncPointTree_.findOnPath(l,(b,A)=>ca(A));if(y&&!v){const b=n.syncPointTree_.subtree(l);if(!b.isEmpty()){const A=_6(b);for(let I=0;I<A.length;++I){const j=A[I],V=j.query,$=RI(n,j);n.listenProvider_.startListening(bc(V),Hc(n,V),$.hashFn,$.onComplete)}}}!v&&g.length>0&&!i&&(y?n.listenProvider_.stopListening(bc(e),null):g.forEach(b=>{const A=n.queryToTagMap.get(Im(b));n.listenProvider_.stopListening(bc(b),A)}))}y6(n,g)}return f}function wI(n,e,t,i){const a=Ov(n,i);if(a!=null){const l=Dv(a),c=l.path,f=l.queryId,m=Rn(c,e),g=new no(Cv(f),m,t);return kv(n,c,g)}else return[]}function p6(n,e,t,i){const a=Ov(n,i);if(a){const l=Dv(a),c=l.path,f=l.queryId,m=Rn(c,e),g=ht.fromObject(t),y=new xl(Cv(f),m,g);return kv(n,c,y)}else return[]}function ny(n,e,t,i=!1){const a=e._path;let l=null,c=!1;n.syncPointTree_.foreachOnPath(a,(b,A)=>{const I=Rn(b,a);l=l||Zr(A,I),c=c||ca(A)});let f=n.syncPointTree_.get(a);f?(c=c||ca(f),l=l||Zr(f,We())):(f=new yI,n.syncPointTree_=n.syncPointTree_.set(a,f));let m;l!=null?m=!0:(m=!1,l=be.EMPTY_NODE,n.syncPointTree_.subtree(a).foreachChild((A,I)=>{const j=Zr(I,We());j&&(l=l.updateImmediateChild(A,j))}));const g=SI(f,e);if(!g&&!e._queryParams.loadsAllData()){const b=Im(e);ae(!n.queryToTagMap.has(b),"View does not exist, but we have a tag");const A=v6();n.queryToTagMap.set(b,A),n.tagToQueryMap.set(A,b)}const y=Am(n.pendingWriteTree_,a);let v=a6(f,e,t,y,l,m);if(!g&&!c&&!i){const b=TI(f,e);v=v.concat(E6(n,e,b))}return v}function xv(n,e,t){const a=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(e,(c,f)=>{const m=Rn(c,e),g=Zr(f,m);if(g)return g});return fI(a,e,l,t,!0)}function g6(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(g,y)=>{const v=Rn(g,t);i=i||Zr(y,v)});let a=n.syncPointTree_.get(t);a?i=i||Zr(a,We()):(a=new yI,n.syncPointTree_=n.syncPointTree_.set(t,a));const l=i!=null,c=l?new ua(i,!0,!1):null,f=Am(n.pendingWriteTree_,e._path),m=vI(a,e,f,l?c.getNode():be.EMPTY_NODE,l);return Z4(m)}function Hl(n,e){return CI(e,n.syncPointTree_,null,Am(n.pendingWriteTree_,We()))}function CI(n,e,t,i){if(ze(n.path))return AI(n,e,t,i);{const a=e.get(We());t==null&&a!=null&&(t=Zr(a,We()));let l=[];const c=Me(n.path),f=n.operationForChild(c),m=e.children.get(c);if(m&&f){const g=t?t.getImmediateChild(c):null,y=dI(i,c);l=l.concat(CI(f,m,g,y))}return a&&(l=l.concat(Nv(a,n,i,t))),l}}function AI(n,e,t,i){const a=e.get(We());t==null&&a!=null&&(t=Zr(a,We()));let l=[];return e.children.inorderTraversal((c,f)=>{const m=t?t.getImmediateChild(c):null,g=dI(i,c),y=n.operationForChild(c);y&&(l=l.concat(AI(y,f,m,g)))}),a&&(l=l.concat(Nv(a,n,i,t))),l}function RI(n,e){const t=e.query,i=Hc(n,t);return{hashFn:()=>(J4(e)||be.EMPTY_NODE).hash(),onComplete:a=>{if(a==="ok")return i?m6(n,t._path,i):d6(n,t._path);{const l=dU(a,t);return Jd(n,t,null,l)}}}}function Hc(n,e){const t=Im(e);return n.queryToTagMap.get(t)}function Im(n){return n._path.toString()+"$"+n._queryIdentifier}function Ov(n,e){return n.tagToQueryMap.get(e)}function Dv(n){const e=n.indexOf("$");return ae(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new lt(n.substr(0,e))}}function kv(n,e,t){const i=n.syncPointTree_.get(e);ae(i,"Missing sync point for query tag that we're tracking");const a=Am(n.pendingWriteTree_,e);return Nv(i,t,a,null)}function _6(n){return n.fold((e,t,i)=>{if(t&&ca(t))return[Rm(t)];{let a=[];return t&&(a=EI(t)),_n(i,(l,c)=>{a=a.concat(c)}),a}})}function bc(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(u6())(n._repo,n._path):n}function y6(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const a=Im(i),l=n.queryToTagMap.get(a);n.queryToTagMap.delete(a),n.tagToQueryMap.delete(l)}}}function v6(){return c6++}function E6(n,e,t){const i=e._path,a=Hc(n,e),l=RI(n,t),c=n.listenProvider_.startListening(bc(e),a,l.hashFn,l.onComplete),f=n.syncPointTree_.subtree(i);if(a)ae(!ca(f.value),"If we're adding a query, it shouldn't be shadowed");else{const m=f.fold((g,y,v)=>{if(!ze(g)&&y&&ca(y))return[Rm(y).query];{let b=[];return y&&(b=b.concat(EI(y).map(A=>A.query))),_n(v,(A,I)=>{b=b.concat(I)}),b}});for(let g=0;g<m.length;++g){const y=m[g];n.listenProvider_.stopListening(bc(y),Hc(n,y))}}return c}class Pv{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Pv(t)}node(){return this.node_}}class Mv{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=wt(this.path_,e);return new Mv(this.syncTree_,t)}node(){return xv(this.syncTree_,this.path_)}}const T6=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},L0=function(n,e,t){if(!n||typeof n!="object")return n;if(ae(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return S6(n[".sv"],e,t);if(typeof n[".sv"]=="object")return b6(n[".sv"],e);ae(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},S6=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:ae(!1,"Unexpected server value: "+n)}},b6=function(n,e,t){n.hasOwnProperty("increment")||ae(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&ae(!1,"Unexpected increment value: "+i);const a=e.node();if(ae(a!==null&&typeof a<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return i;const c=a.getValue();return typeof c!="number"?i:c+i},II=function(n,e,t,i){return Lv(e,new Mv(t,n),i)},NI=function(n,e,t){return Lv(n,new Pv(e),t)};function Lv(n,e,t){const i=n.getPriority().val(),a=L0(i,e.getImmediateChild(".priority"),t);let l;if(n.isLeafNode()){const c=n,f=L0(c.getValue(),e,t);return f!==c.getValue()||a!==c.getPriority().val()?new nn(f,Wt(a)):n}else{const c=n;return l=c,a!==c.getPriority().val()&&(l=l.updatePriority(new nn(a))),c.forEachChild(Ct,(f,m)=>{const g=Lv(m,e.getImmediateChild(f),t);g!==m&&(l=l.updateImmediateChild(f,g))}),l}}class Vv{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function Uv(n,e){let t=e instanceof lt?e:new lt(e),i=n,a=Me(t);for(;a!==null;){const l=vl(i.node.children,a)||{children:{},childCount:0};i=new Vv(a,i,l),t=ft(t),a=Me(t)}return i}function ql(n){return n.node.value}function xI(n,e){n.node.value=e,iy(n)}function OI(n){return n.node.childCount>0}function w6(n){return ql(n)===void 0&&!OI(n)}function Nm(n,e){_n(n.node.children,(t,i)=>{e(new Vv(t,n,i))})}function DI(n,e,t,i){t&&e(n),Nm(n,a=>{DI(a,e,!0)})}function C6(n,e,t){let i=n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function ch(n){return new lt(n.parent===null?n.name:ch(n.parent)+"/"+n.name)}function iy(n){n.parent!==null&&A6(n.parent,n.name,n)}function A6(n,e,t){const i=w6(t),a=vs(n.node.children,e);i&&a?(delete n.node.children[e],n.node.childCount--,iy(n)):!i&&!a&&(n.node.children[e]=t.node,n.node.childCount++,iy(n))}const R6=/[\[\].#$\/\u0000-\u001F\u007F]/,I6=/[\[\].#$\u0000-\u001F\u007F]/,m_=10*1024*1024,jv=function(n){return typeof n=="string"&&n.length!==0&&!R6.test(n)},kI=function(n){return typeof n=="string"&&n.length!==0&&!I6.test(n)},N6=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),kI(n)},x6=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!fv(n)||n&&typeof n=="object"&&vs(n,".sv")},PI=function(n,e,t,i){i&&e===void 0||xm(rm(n,"value"),e,t)},xm=function(n,e,t){const i=t instanceof lt?new KU(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Ka(i));if(typeof e=="function")throw new Error(n+"contains a function "+Ka(i)+" with contents = "+e.toString());if(fv(e))throw new Error(n+"contains "+e.toString()+" "+Ka(i));if(typeof e=="string"&&e.length>m_/3&&am(e)>m_)throw new Error(n+"contains a string greater than "+m_+" utf8 bytes "+Ka(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let a=!1,l=!1;if(_n(e,(c,f)=>{if(c===".value")a=!0;else if(c!==".priority"&&c!==".sv"&&(l=!0,!jv(c)))throw new Error(n+" contains an invalid key ("+c+") "+Ka(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);QU(i,c),xm(n,f,i),WU(i)}),a&&l)throw new Error(n+' contains ".value" child '+Ka(i)+" in addition to actual children.")}},O6=function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const l=Uc(i);for(let c=0;c<l.length;c++)if(!(l[c]===".priority"&&c===l.length-1)){if(!jv(l[c]))throw new Error(n+"contains an invalid key ("+l[c]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(YU);let a=null;for(t=0;t<e.length;t++){if(i=e[t],a!==null&&pi(a,i))throw new Error(n+"contains a path "+a.toString()+" that is ancestor of another path "+i.toString());a=i}},D6=function(n,e,t,i){const a=rm(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(a+" must be an object containing the children to replace.");const l=[];_n(e,(c,f)=>{const m=new lt(c);if(xm(a,f,wt(t,m)),_v(m)===".priority"&&!x6(f))throw new Error(a+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(m)}),O6(a,l)},MI=function(n,e,t,i){if(!kI(t))throw new Error(rm(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},k6=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),MI(n,e,t)},LI=function(n,e){if(Me(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},P6=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!jv(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!N6(t))throw new Error(rm(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class M6{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Om(n,e){let t=null;for(let i=0;i<e.length;i++){const a=e[i],l=a.getPath();t!==null&&!yv(l,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:l}),t.events.push(a)}t&&n.eventLists_.push(t)}function VI(n,e,t){Om(n,t),UI(n,i=>yv(i,e))}function _i(n,e,t){Om(n,t),UI(n,i=>pi(i,e)||pi(e,i))}function UI(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const a=n.eventLists_[i];if(a){const l=a.path;e(l)?(L6(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function L6(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const i=t.getEventRunner();vc&&dn("event: "+t.toString()),Fl(i)}}}const V6="repo_interrupt",U6=25;class j6{constructor(e,t,i,a){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new M6,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=qd(),this.transactionQueueTree_=new Vv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function z6(n,e,t){if(n.stats_=pv(n.repoInfo_),n.forceRestClient_||_U())n.server_=new Hd(n.repoInfo_,(i,a,l,c)=>{V0(n,i,a,l,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>U0(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Xt(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Ys(n.repoInfo_,e,(i,a,l,c)=>{V0(n,i,a,l,c)},i=>{U0(n,i)},i=>{B6(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=SU(n.repoInfo_,()=>new T4(n.stats_,n.server_)),n.infoData_=new g4,n.infoSyncTree_=new M0({startListening:(i,a,l,c)=>{let f=[];const m=n.infoData_.getNode(i._path);return m.isEmpty()||(f=uh(n.infoSyncTree_,i._path,m),setTimeout(()=>{c("ok")},0)),f},stopListening:()=>{}}),zv(n,"connected",!1),n.serverSyncTree_=new M0({startListening:(i,a,l,c)=>(n.server_.listen(i,l,a,(f,m)=>{const g=c(f,m);_i(n.eventQueue_,i._path,g)}),[]),stopListening:(i,a)=>{n.server_.unlisten(i,a)}})}function jI(n){const t=n.infoData_.getNode(new lt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function Dm(n){return T6({timestamp:jI(n)})}function V0(n,e,t,i,a){n.dataUpdateCount++;const l=new lt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(a)if(i){const m=Ed(t,g=>Wt(g));c=p6(n.serverSyncTree_,l,m,a)}else{const m=Wt(t);c=wI(n.serverSyncTree_,l,m,a)}else if(i){const m=Ed(t,g=>Wt(g));c=f6(n.serverSyncTree_,l,m)}else{const m=Wt(t);c=uh(n.serverSyncTree_,l,m)}let f=l;c.length>0&&(f=Dl(n,l)),_i(n.eventQueue_,f,c)}function U0(n,e){zv(n,"connected",e),e===!1&&G6(n)}function B6(n,e){_n(e,(t,i)=>{zv(n,t,i)})}function zv(n,e,t){const i=new lt("/.info/"+e),a=Wt(t);n.infoData_.updateSnapshot(i,a);const l=uh(n.infoSyncTree_,i,a);_i(n.eventQueue_,i,l)}function Bv(n){return n.nextWriteId_++}function F6(n,e,t){const i=g6(n.serverSyncTree_,e);return i!=null?Promise.resolve(i):n.server_.get(e).then(a=>{const l=Wt(a).withIndex(e._queryParams.getIndex());ny(n.serverSyncTree_,e,t,!0);let c;if(e._queryParams.loadsAllData())c=uh(n.serverSyncTree_,e._path,l);else{const f=Hc(n.serverSyncTree_,e);c=wI(n.serverSyncTree_,e._path,l,f)}return _i(n.eventQueue_,e._path,c),Jd(n.serverSyncTree_,e,t,null,!0),l},a=>(hh(n,"get for query "+Xt(e)+" failed: "+a),Promise.reject(new Error(a))))}function H6(n,e,t,i,a){hh(n,"set",{path:e.toString(),value:t,priority:i});const l=Dm(n),c=Wt(t,i),f=xv(n.serverSyncTree_,e),m=NI(c,f,l),g=Bv(n),y=bI(n.serverSyncTree_,e,m,g,!0);Om(n.eventQueue_,y),n.server_.put(e.toString(),c.val(!0),(b,A)=>{const I=b==="ok";I||In("set at "+e+" failed: "+b);const j=Gr(n.serverSyncTree_,g,!I);_i(n.eventQueue_,e,j),sy(n,a,b,A)});const v=Hv(n,e);Dl(n,v),_i(n.eventQueue_,v,[])}function q6(n,e,t,i){hh(n,"update",{path:e.toString(),value:t});let a=!0;const l=Dm(n),c={};if(_n(t,(f,m)=>{a=!1,c[f]=II(wt(e,f),Wt(m),n.serverSyncTree_,l)}),a)dn("update() called with empty data.  Don't do anything."),sy(n,i,"ok",void 0);else{const f=Bv(n),m=h6(n.serverSyncTree_,e,c,f);Om(n.eventQueue_,m),n.server_.merge(e.toString(),t,(g,y)=>{const v=g==="ok";v||In("update at "+e+" failed: "+g);const b=Gr(n.serverSyncTree_,f,!v),A=b.length>0?Dl(n,e):e;_i(n.eventQueue_,A,b),sy(n,i,g,y)}),_n(t,g=>{const y=Hv(n,wt(e,g));Dl(n,y)}),_i(n.eventQueue_,e,[])}}function G6(n){hh(n,"onDisconnectEvents");const e=Dm(n),t=qd();X_(n.onDisconnect_,We(),(a,l)=>{const c=II(a,l,n.serverSyncTree_,e);lI(t,a,c)});let i=[];X_(t,We(),(a,l)=>{i=i.concat(uh(n.serverSyncTree_,a,l));const c=Hv(n,a);Dl(n,c)}),n.onDisconnect_=qd(),_i(n.eventQueue_,We(),i)}function Y6(n,e,t){let i;Me(e._path)===".info"?i=ny(n.infoSyncTree_,e,t):i=ny(n.serverSyncTree_,e,t),VI(n.eventQueue_,e._path,i)}function K6(n,e,t){let i;Me(e._path)===".info"?i=Jd(n.infoSyncTree_,e,t):i=Jd(n.serverSyncTree_,e,t),VI(n.eventQueue_,e._path,i)}function Q6(n){n.persistentConnection_&&n.persistentConnection_.interrupt(V6)}function hh(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),dn(t,...e)}function sy(n,e,t,i){e&&Fl(()=>{if(t==="ok")e(null);else{const a=(t||"error").toUpperCase();let l=a;i&&(l+=": "+i);const c=new Error(l);c.code=a,e(c)}})}function zI(n,e,t){return xv(n.serverSyncTree_,e,t)||be.EMPTY_NODE}function Fv(n,e=n.transactionQueueTree_){if(e||km(n,e),ql(e)){const t=FI(n,e);ae(t.length>0,"Sending zero length transaction queue"),t.every(a=>a.status===0)&&W6(n,ch(e),t)}else OI(e)&&Nm(e,t=>{Fv(n,t)})}function W6(n,e,t){const i=t.map(g=>g.currentWriteId),a=zI(n,e,i);let l=a;const c=a.hash();for(let g=0;g<t.length;g++){const y=t[g];ae(y.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),y.status=1,y.retryCount++;const v=Rn(e,y.path);l=l.updateChild(v,y.currentOutputSnapshotRaw)}const f=l.val(!0),m=e;n.server_.put(m.toString(),f,g=>{hh(n,"transaction put response",{path:m.toString(),status:g});let y=[];if(g==="ok"){const v=[];for(let b=0;b<t.length;b++)t[b].status=2,y=y.concat(Gr(n.serverSyncTree_,t[b].currentWriteId)),t[b].onComplete&&v.push(()=>t[b].onComplete(null,!0,t[b].currentOutputSnapshotResolved)),t[b].unwatcher();km(n,Uv(n.transactionQueueTree_,e)),Fv(n,n.transactionQueueTree_),_i(n.eventQueue_,e,y);for(let b=0;b<v.length;b++)Fl(v[b])}else{if(g==="datastale")for(let v=0;v<t.length;v++)t[v].status===3?t[v].status=4:t[v].status=0;else{In("transaction at "+m.toString()+" failed: "+g);for(let v=0;v<t.length;v++)t[v].status=4,t[v].abortReason=g}Dl(n,e)}},c)}function Dl(n,e){const t=BI(n,e),i=ch(t),a=FI(n,t);return X6(n,a,i),i}function X6(n,e,t){if(e.length===0)return;const i=[];let a=[];const c=e.filter(f=>f.status===0).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const m=e[f],g=Rn(t,m.path);let y=!1,v;if(ae(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),m.status===4)y=!0,v=m.abortReason,a=a.concat(Gr(n.serverSyncTree_,m.currentWriteId,!0));else if(m.status===0)if(m.retryCount>=U6)y=!0,v="maxretry",a=a.concat(Gr(n.serverSyncTree_,m.currentWriteId,!0));else{const b=zI(n,m.path,c);m.currentInputSnapshot=b;const A=e[f].update(b.val());if(A!==void 0){xm("transaction failed: Data returned ",A,m.path);let I=Wt(A);typeof A=="object"&&A!=null&&vs(A,".priority")||(I=I.updatePriority(b.getPriority()));const V=m.currentWriteId,$=Dm(n),K=NI(I,b,$);m.currentOutputSnapshotRaw=I,m.currentOutputSnapshotResolved=K,m.currentWriteId=Bv(n),c.splice(c.indexOf(V),1),a=a.concat(bI(n.serverSyncTree_,m.path,K,m.currentWriteId,m.applyLocally)),a=a.concat(Gr(n.serverSyncTree_,V,!0))}else y=!0,v="nodata",a=a.concat(Gr(n.serverSyncTree_,m.currentWriteId,!0))}_i(n.eventQueue_,t,a),a=[],y&&(e[f].status=2,(function(b){setTimeout(b,Math.floor(0))})(e[f].unwatcher),e[f].onComplete&&(v==="nodata"?i.push(()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot)):i.push(()=>e[f].onComplete(new Error(v),!1,null))))}km(n,n.transactionQueueTree_);for(let f=0;f<i.length;f++)Fl(i[f]);Fv(n,n.transactionQueueTree_)}function BI(n,e){let t,i=n.transactionQueueTree_;for(t=Me(e);t!==null&&ql(i)===void 0;)i=Uv(i,t),e=ft(e),t=Me(e);return i}function FI(n,e){const t=[];return HI(n,e,t),t.sort((i,a)=>i.order-a.order),t}function HI(n,e,t){const i=ql(e);if(i)for(let a=0;a<i.length;a++)t.push(i[a]);Nm(e,a=>{HI(n,a,t)})}function km(n,e){const t=ql(e);if(t){let i=0;for(let a=0;a<t.length;a++)t[a].status!==2&&(t[i]=t[a],i++);t.length=i,xI(e,t.length>0?t:void 0)}Nm(e,i=>{km(n,i)})}function Hv(n,e){const t=ch(BI(n,e)),i=Uv(n.transactionQueueTree_,e);return C6(i,a=>{p_(n,a)}),p_(n,i),DI(i,a=>{p_(n,a)}),t}function p_(n,e){const t=ql(e);if(t){const i=[];let a=[],l=-1;for(let c=0;c<t.length;c++)t[c].status===3||(t[c].status===1?(ae(l===c-1,"All SENT items should be at beginning of queue."),l=c,t[c].status=3,t[c].abortReason="set"):(ae(t[c].status===0,"Unexpected transaction status in abort"),t[c].unwatcher(),a=a.concat(Gr(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&i.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));l===-1?xI(e,void 0):t.length=l+1,_i(n.eventQueue_,ch(e),a);for(let c=0;c<i.length;c++)Fl(i[c])}}function $6(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let a=t[i];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch{}e+="/"+a}return e}function J6(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):In(`Invalid query segment '${t}' in query '${n}'`)}return e}const j0=function(n,e){const t=Z6(n),i=t.namespace;t.domain==="firebase.com"&&ir(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&ir("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||lU();const a=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new GR(t.host,t.secure,i,a,e,"",i!==t.subdomain),path:new lt(t.pathString)}},Z6=function(n){let e="",t="",i="",a="",l="",c=!0,f="https",m=443;if(typeof n=="string"){let g=n.indexOf("//");g>=0&&(f=n.substring(0,g-1),n=n.substring(g+2));let y=n.indexOf("/");y===-1&&(y=n.length);let v=n.indexOf("?");v===-1&&(v=n.length),e=n.substring(0,Math.min(y,v)),y<v&&(a=$6(n.substring(y,v)));const b=J6(n.substring(Math.min(n.length,v)));g=e.indexOf(":"),g>=0?(c=f==="https"||f==="wss",m=parseInt(e.substring(g+1),10)):g=e.length;const A=e.slice(0,g);if(A.toLowerCase()==="localhost")t="localhost";else if(A.split(".").length<=2)t=A;else{const I=e.indexOf(".");i=e.substring(0,I).toLowerCase(),t=e.substring(I+1),l=i}"ns"in b&&(l=b.ns)}return{host:e,port:m,domain:t,subdomain:i,secure:c,scheme:f,pathString:a,namespace:l}};const z0="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ej=(function(){let n=0;const e=[];return function(t){const i=t===n;n=t;let a;const l=new Array(8);for(a=7;a>=0;a--)l[a]=z0.charAt(t%64),t=Math.floor(t/64);ae(t===0,"Cannot push at time == 0");let c=l.join("");if(i){for(a=11;a>=0&&e[a]===63;a--)e[a]=0;e[a]++}else for(a=0;a<12;a++)e[a]=Math.floor(Math.random()*64);for(a=0;a<12;a++)c+=z0.charAt(e[a]);return ae(c.length===20,"nextPushId: Length should be 20."),c}})();class tj{constructor(e,t,i,a){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=a}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Xt(this.snapshot.exportVal())}}class nj{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class qI{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return ae(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class qv{constructor(e,t,i,a){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=a}get key(){return ze(this._path)?null:_v(this._path)}get ref(){return new sr(this._repo,this._path)}get _queryIdentifier(){const e=C0(this._queryParams),t=dv(e);return t==="{}"?"default":t}get _queryObject(){return C0(this._queryParams)}isEqual(e){if(e=At(e),!(e instanceof qv))return!1;const t=this._repo===e._repo,i=yv(this._path,e._path),a=this._queryIdentifier===e._queryIdentifier;return t&&i&&a}toJSON(){return this.toString()}toString(){return this._repo.toString()+GU(this._path)}}class sr extends qv{constructor(e,t){super(e,t,new Sv,!1)}get parent(){const e=eI(this._path);return e===null?null:new sr(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class qc{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new lt(e),i=Gc(this.ref,e);return new qc(this._node.getChild(t),i,Ct)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,a)=>e(new qc(a,Gc(this.ref,i),Ct)))}hasChild(e){const t=new lt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function qt(n,e){return n=At(n),n._checkNotDeleted("ref"),e!==void 0?Gc(n._root,e):n._root}function Gc(n,e){return n=At(n),Me(n._path)===null?k6("child","path",e):MI("child","path",e),new sr(n._repo,wt(n._path,e))}function Pm(n,e){n=At(n),LI("push",n._path),PI("push",e,n._path,!0);const t=jI(n._repo),i=ej(t),a=Gc(n,i),l=Gc(n,i);let c;return c=Promise.resolve(l),a.then=c.then.bind(c),a.catch=c.then.bind(c,void 0),a}function po(n,e){n=At(n),LI("set",n._path),PI("set",e,n._path,!1);const t=new Qc;return H6(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function ry(n,e){D6("update",e,n._path);const t=new Qc;return q6(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function Ks(n){n=At(n);const e=new qI(()=>{}),t=new Mm(e);return F6(n._repo,n,t).then(i=>new qc(i,new sr(n._repo,n._path),n._queryParams.getIndex()))}class Mm{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const i=t._queryParams.getIndex();return new tj("value",this,new qc(e.snapshotNode,new sr(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new nj(this,e,t):null}matches(e){return e instanceof Mm?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function ij(n,e,t,i,a){const l=new qI(t,void 0),c=new Mm(l);return Y6(n._repo,n,c),()=>K6(n._repo,n,c)}function sj(n,e,t,i){return ij(n,"value",e)}i6(sr);l6(sr);const rj="FIREBASE_DATABASE_EMULATOR_HOST",ay={};let aj=!1;function oj(n,e,t,i){const a=e.lastIndexOf(":"),l=e.substring(0,a),c=_s(l);n.repoInfo_=new GR(e,c,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),i&&(n.authTokenProvider_=i)}function lj(n,e,t,i,a){let l=i||n.options.databaseURL;l===void 0&&(n.options.projectId||ir("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),dn("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let c=j0(l,a),f=c.repoInfo,m;typeof process<"u"&&o0&&(m=o0[rj]),m?(l=`http://${m}?ns=${f.namespace}`,c=j0(l,a),f=c.repoInfo):c.repoInfo.secure;const g=new vU(n.name,n.options,e);P6("Invalid Firebase Database URL",c),ze(c.path)||ir("Database URL must point to the root of a Firebase Database (not including a child path).");const y=cj(f,n,g,new yU(n,t));return new hj(y,n)}function uj(n,e){const t=ay[e];(!t||t[n.key]!==n)&&ir(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Q6(n),delete t[n.key]}function cj(n,e,t,i){let a=ay[e.name];a||(a={},ay[e.name]=a);let l=a[n.toURLString()];return l&&ir("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new j6(n,aj,t,i),a[n.toURLString()]=l,l}class hj{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(z6(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new sr(this._repo,We())),this._rootInternal}_delete(){return this._rootInternal!==null&&(uj(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ir("Cannot call "+e+" on a deleted database.")}}function fj(n=lm(),e){const t=Xc(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=yy("database");i&&dj(t,...i)}return t}function dj(n,e,t,i={}){n=At(n),n._checkNotDeleted("useEmulator");const a=`${e}:${t}`,l=n._repoInternal;if(n._instanceStarted){if(a===n._repoInternal.repoInfo_.host&&ea(i,l.repoInfo_.emulatorOptions))return;ir("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let c;if(l.repoInfo_.nodeAdmin)i.mockUserToken&&ir('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new gd(gd.OWNER);else if(i.mockUserToken){const f=typeof i.mockUserToken=="string"?i.mockUserToken:vy(i.mockUserToken,n.app.options.projectId);c=new gd(f)}_s(e)&&(im(e),sm("Database",!0)),oj(l,a,i,c)}function mj(n){nU(da),ta(new $s("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),l=e.getProvider("app-check-internal");return lj(i,a,l,t)},"PUBLIC").setMultipleInstances(!0)),gi(l0,u0,n),gi(l0,u0,"esm2020")}Ys.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Ys.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};mj();const GI="firebasestorage.googleapis.com",YI="storageBucket",pj=120*1e3,gj=600*1e3,_j=1e3;class Tt extends ys{constructor(e,t,i=0){super(g_(e),`Firebase Storage: ${t} (${g_(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Tt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return g_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var gt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(gt||(gt={}));function g_(n){return"storage/"+n}function Gv(){const n="An unknown error occurred, please check the error payload for server response.";return new Tt(gt.UNKNOWN,n)}function yj(n){return new Tt(gt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function vj(n){return new Tt(gt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Ej(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Tt(gt.UNAUTHENTICATED,n)}function Tj(){return new Tt(gt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Sj(n){return new Tt(gt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function KI(){return new Tt(gt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function QI(){return new Tt(gt.CANCELED,"User canceled the upload/download.")}function bj(n){return new Tt(gt.INVALID_URL,"Invalid URL '"+n+"'.")}function wj(n){return new Tt(gt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Cj(){return new Tt(gt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+YI+"' property when initializing the app?")}function WI(){return new Tt(gt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Aj(){return new Tt(gt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function Rj(){return new Tt(gt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Ij(n){return new Tt(gt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function oy(n){return new Tt(gt.INVALID_ARGUMENT,n)}function XI(){return new Tt(gt.APP_DELETED,"The Firebase app was deleted.")}function Nj(n){return new Tt(gt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function wc(n,e){return new Tt(gt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function ic(n){throw new Tt(gt.INTERNAL_ERROR,"Internal error: "+n)}class Xn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Xn.makeFromUrl(e,t)}catch{return new Xn(e,"")}if(i.path==="")return i;throw wj(e)}static makeFromUrl(e,t){let i=null;const a="([A-Za-z0-9.\\-_]+)";function l(ue){ue.path.charAt(ue.path.length-1)==="/"&&(ue.path_=ue.path_.slice(0,-1))}const c="(/(.*))?$",f=new RegExp("^gs://"+a+c,"i"),m={bucket:1,path:3};function g(ue){ue.path_=decodeURIComponent(ue.path)}const y="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",A=new RegExp(`^https?://${v}/${y}/b/${a}/o${b}`,"i"),I={bucket:1,path:3},j=t===GI?"(?:storage.googleapis.com|storage.cloud.google.com)":t,V="([^?#]*)",$=new RegExp(`^https?://${j}/${a}/${V}`,"i"),ee=[{regex:f,indices:m,postModify:l},{regex:A,indices:I,postModify:g},{regex:$,indices:{bucket:1,path:2},postModify:g}];for(let ue=0;ue<ee.length;ue++){const _e=ee[ue],Se=_e.regex.exec(e);if(Se){const x=Se[_e.indices.bucket];let R=Se[_e.indices.path];R||(R=""),i=new Xn(x,R),_e.postModify(i);break}}if(i==null)throw bj(e);return i}}class xj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Oj(n,e,t){let i=1,a=null,l=null,c=!1,f=0;function m(){return f===2}let g=!1;function y(...V){g||(g=!0,e.apply(null,V))}function v(V){a=setTimeout(()=>{a=null,n(A,m())},V)}function b(){l&&clearTimeout(l)}function A(V,...$){if(g){b();return}if(V){b(),y.call(null,V,...$);return}if(m()||c){b(),y.call(null,V,...$);return}i<64&&(i*=2);let ee;f===1?(f=2,ee=0):ee=(i+Math.random())*1e3,v(ee)}let I=!1;function j(V){I||(I=!0,b(),!g&&(a!==null?(V||(f=2),clearTimeout(a),v(0)):V||(f=1)))}return v(0),l=setTimeout(()=>{c=!0,j(!0)},t),j}function Dj(n){n(!1)}function kj(n){return n!==void 0}function Pj(n){return typeof n=="function"}function Mj(n){return typeof n=="object"&&!Array.isArray(n)}function Lm(n){return typeof n=="string"||n instanceof String}function B0(n){return Yv()&&n instanceof Blob}function Yv(){return typeof Blob<"u"}function F0(n,e,t,i){if(i<e)throw oy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw oy(`Invalid value for '${n}'. Expected ${t} or less.`)}function fh(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function $I(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const a=e(i)+"="+e(n[i]);t=t+a+"&"}return t=t.slice(0,-1),t}var $a;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})($a||($a={}));function JI(n,e){const t=n>=500&&n<600,a=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||a||l}class Lj{constructor(e,t,i,a,l,c,f,m,g,y,v,b=!0,A=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=m,this.timeout_=g,this.progressCallback_=y,this.connectionFactory_=v,this.retry=b,this.isUsingEmulator=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,j)=>{this.resolve_=I,this.reject_=j,this.start_()})}start_(){const e=(i,a)=>{if(a){i(!1,new nd(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=f=>{const m=f.loaded,g=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,g)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const f=l.getErrorCode()===$a.NO_ERROR,m=l.getStatus();if(!f||JI(m,this.additionalRetryCodes_)&&this.retry){const y=l.getErrorCode()===$a.ABORT;i(!1,new nd(!1,null,y));return}const g=this.successCodes_.indexOf(m)!==-1;i(!0,new nd(g,l))})},t=(i,a)=>{const l=this.resolve_,c=this.reject_,f=a.connection;if(a.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());kj(m)?l(m):l()}catch(m){c(m)}else if(f!==null){const m=Gv();m.serverResponse=f.getErrorText(),this.errorCallback_?c(this.errorCallback_(f,m)):c(m)}else if(a.canceled){const m=this.appDelete_?XI():QI();c(m)}else{const m=KI();c(m)}};this.canceled_?t(!1,new nd(!1,null,!0)):this.backoffId_=Oj(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Dj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class nd{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function Vj(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Uj(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function jj(n,e){e&&(n["X-Firebase-GMPID"]=e)}function zj(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Bj(n,e,t,i,a,l,c=!0,f=!1){const m=$I(n.urlParams),g=n.url+m,y=Object.assign({},n.headers);return jj(y,e),Vj(y,t),Uj(y,l),zj(y,i),new Lj(g,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,c,f)}function Fj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Hj(...n){const e=Fj();if(e!==void 0){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(Yv())return new Blob(n);throw new Tt(gt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function qj(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function Gj(n){if(typeof atob>"u")throw Ij("base-64");return atob(n)}const cs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class __{constructor(e,t){this.data=e,this.contentType=t||null}}function Yj(n,e){switch(n){case cs.RAW:return new __(ZI(e));case cs.BASE64:case cs.BASE64URL:return new __(e1(n,e));case cs.DATA_URL:return new __(Qj(e),Wj(e))}throw Gv()}function ZI(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=i,c=n.charCodeAt(++t);i=65536|(l&1023)<<10|c&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function Kj(n){let e;try{e=decodeURIComponent(n)}catch{throw wc(cs.DATA_URL,"Malformed data URL.")}return ZI(e)}function e1(n,e){switch(n){case cs.BASE64:{const a=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(a||l)throw wc(n,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case cs.BASE64URL:{const a=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(a||l)throw wc(n,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Gj(e)}catch(a){throw a.message.includes("polyfill")?a:wc(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i}class t1{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw wc(cs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=Xj(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function Qj(n){const e=new t1(n);return e.base64?e1(cs.BASE64,e.rest):Kj(e.rest)}function Wj(n){return new t1(n).contentType}function Xj(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}class Hr{constructor(e,t){let i=0,a="";B0(e)?(this.data_=e,i=e.size,a=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,t){if(B0(this.data_)){const i=this.data_,a=qj(i,e,t);return a===null?null:new Hr(a)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Hr(i,!0)}}static getBlob(...e){if(Yv()){const t=e.map(i=>i instanceof Hr?i.data_:i);return new Hr(Hj.apply(null,t))}else{const t=e.map(c=>Lm(c)?Yj(cs.RAW,c).data:c.data_);let i=0;t.forEach(c=>{i+=c.byteLength});const a=new Uint8Array(i);let l=0;return t.forEach(c=>{for(let f=0;f<c.length;f++)a[l++]=c[f]}),new Hr(a,!0)}}uploadData(){return this.data_}}function n1(n){let e;try{e=JSON.parse(n)}catch{return null}return Mj(e)?e:null}function $j(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Jj(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function i1(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function Zj(n,e){return e}class An{constructor(e,t,i,a){this.server=e,this.local=t||e,this.writable=!!i,this.xform=a||Zj}}let id=null;function e3(n){return!Lm(n)||n.length<2?n:i1(n)}function s1(){if(id)return id;const n=[];n.push(new An("bucket")),n.push(new An("generation")),n.push(new An("metageneration")),n.push(new An("name","fullPath",!0));function e(l,c){return e3(c)}const t=new An("name");t.xform=e,n.push(t);function i(l,c){return c!==void 0?Number(c):c}const a=new An("size");return a.xform=i,n.push(a),n.push(new An("timeCreated")),n.push(new An("updated")),n.push(new An("md5Hash",null,!0)),n.push(new An("cacheControl",null,!0)),n.push(new An("contentDisposition",null,!0)),n.push(new An("contentEncoding",null,!0)),n.push(new An("contentLanguage",null,!0)),n.push(new An("contentType",null,!0)),n.push(new An("metadata","customMetadata",!0)),id=n,id}function t3(n,e){function t(){const i=n.bucket,a=n.fullPath,l=new Xn(i,a);return e._makeStorageReference(l)}Object.defineProperty(n,"ref",{get:t})}function n3(n,e,t){const i={};i.type="file";const a=t.length;for(let l=0;l<a;l++){const c=t[l];i[c.local]=c.xform(i,e[c.server])}return t3(i,n),i}function r1(n,e,t){const i=n1(e);return i===null?null:n3(n,i,t)}function i3(n,e,t,i){const a=n1(e);if(a===null||!Lm(a.downloadTokens))return null;const l=a.downloadTokens;if(l.length===0)return null;const c=encodeURIComponent;return l.split(",").map(g=>{const y=n.bucket,v=n.fullPath,b="/b/"+c(y)+"/o/"+c(v),A=fh(b,t,i),I=$I({alt:"media",token:g});return A+I})[0]}function a1(n,e){const t={},i=e.length;for(let a=0;a<i;a++){const l=e[a];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}class Gl{constructor(e,t,i,a){this.url=e,this.method=t,this.handler=i,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Qs(n){if(!n)throw Gv()}function Kv(n,e){function t(i,a){const l=r1(n,a,e);return Qs(l!==null),l}return t}function s3(n,e){function t(i,a){const l=r1(n,a,e);return Qs(l!==null),i3(l,a,n.host,n._protocol)}return t}function dh(n){function e(t,i){let a;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?a=Tj():a=Ej():t.getStatus()===402?a=vj(n.bucket):t.getStatus()===403?a=Sj(n.path):a=i,a.status=t.getStatus(),a.serverResponse=i.serverResponse,a}return e}function o1(n){const e=dh(n);function t(i,a){let l=e(i,a);return i.getStatus()===404&&(l=yj(n.path)),l.serverResponse=a.serverResponse,l}return t}function r3(n,e,t){const i=e.fullServerUrl(),a=fh(i,n.host,n._protocol),l="GET",c=n.maxOperationRetryTime,f=new Gl(a,l,Kv(n,t),c);return f.errorHandler=o1(e),f}function a3(n,e,t){const i=e.fullServerUrl(),a=fh(i,n.host,n._protocol),l="GET",c=n.maxOperationRetryTime,f=new Gl(a,l,s3(n,t),c);return f.errorHandler=o1(e),f}function o3(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function l1(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=o3(null,e)),i}function l3(n,e,t,i,a){const l=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function f(){let ee="";for(let ue=0;ue<2;ue++)ee=ee+Math.random().toString().slice(2);return ee}const m=f();c["Content-Type"]="multipart/related; boundary="+m;const g=l1(e,i,a),y=a1(g,t),v="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+m+`\r
Content-Type: `+g.contentType+`\r
\r
`,b=`\r
--`+m+"--",A=Hr.getBlob(v,i,b);if(A===null)throw WI();const I={name:g.fullPath},j=fh(l,n.host,n._protocol),V="POST",$=n.maxUploadRetryTime,K=new Gl(j,V,Kv(n,t),$);return K.urlParams=I,K.headers=c,K.body=A.uploadData(),K.errorHandler=dh(e),K}class Zd{constructor(e,t,i,a){this.current=e,this.total=t,this.finalized=!!i,this.metadata=a||null}}function Qv(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Qs(!1)}return Qs(!!t&&(e||["active"]).indexOf(t)!==-1),t}function u3(n,e,t,i,a){const l=e.bucketOnlyServerUrl(),c=l1(e,i,a),f={name:c.fullPath},m=fh(l,n.host,n._protocol),g="POST",y={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},v=a1(c,t),b=n.maxUploadRetryTime;function A(j){Qv(j);let V;try{V=j.getResponseHeader("X-Goog-Upload-URL")}catch{Qs(!1)}return Qs(Lm(V)),V}const I=new Gl(m,g,A,b);return I.urlParams=f,I.headers=y,I.body=v,I.errorHandler=dh(e),I}function c3(n,e,t,i){const a={"X-Goog-Upload-Command":"query"};function l(g){const y=Qv(g,["active","final"]);let v=null;try{v=g.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Qs(!1)}v||Qs(!1);const b=Number(v);return Qs(!isNaN(b)),new Zd(b,i.size(),y==="final")}const c="POST",f=n.maxUploadRetryTime,m=new Gl(t,c,l,f);return m.headers=a,m.errorHandler=dh(e),m}const H0=256*1024;function h3(n,e,t,i,a,l,c,f){const m=new Zd(0,0);if(c?(m.current=c.current,m.total=c.total):(m.current=0,m.total=i.size()),i.size()!==m.total)throw Aj();const g=m.total-m.current;let y=g;a>0&&(y=Math.min(y,a));const v=m.current,b=v+y;let A="";y===0?A="finalize":g===y?A="upload, finalize":A="upload";const I={"X-Goog-Upload-Command":A,"X-Goog-Upload-Offset":`${m.current}`},j=i.slice(v,b);if(j===null)throw WI();function V(ue,_e){const Se=Qv(ue,["active","final"]),x=m.current+y,R=i.size();let N;return Se==="final"?N=Kv(e,l)(ue,_e):N=null,new Zd(x,R,Se==="final",N)}const $="POST",K=e.maxUploadRetryTime,ee=new Gl(t,$,V,K);return ee.headers=I,ee.body=j.uploadData(),ee.progressCallback=f||null,ee.errorHandler=dh(n),ee}const Vn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function y_(n){switch(n){case"running":case"pausing":case"canceling":return Vn.RUNNING;case"paused":return Vn.PAUSED;case"success":return Vn.SUCCESS;case"canceled":return Vn.CANCELED;case"error":return Vn.ERROR;default:return Vn.ERROR}}class f3{constructor(e,t,i){if(Pj(e)||t!=null||i!=null)this.next=e,this.error=t??void 0,this.complete=i??void 0;else{const l=e;this.next=l.next,this.error=l.error,this.complete=l.complete}}}function rl(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class d3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=$a.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=$a.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=$a.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,a,l){if(this.sent_)throw ic("cannot .send() more than once");if(_s(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const c in l)l.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,l[c].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ic("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ic("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ic("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ic("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class m3 extends d3{initXhr(){this.xhr_.responseType="text"}}function cl(){return new m3}class p3{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=s1(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals(gt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const l=this.isExponentialBackoffExpired();if(JI(a.status,[]))if(l)a=KI();else{this.sleepTime=Math.max(this.sleepTime*2,_j),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals(gt.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,l)=>{this._resolve=a,this._reject=l,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const i=u3(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(i,cl,e,t);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const a=c3(this._ref.storage,this._ref._location,e,this._blob),l=this._ref.storage._makeRequest(a,cl,t,i);this._request=l,l.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=H0*this._chunkMultiplier,t=new Zd(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((a,l)=>{let c;try{c=h3(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){this._error=m,this._transition("error");return}const f=this._ref.storage._makeRequest(c,cl,a,l,!1);this._request=f,f.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){H0*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=r3(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(i,cl,e,t);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=l3(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(i,cl,e,t);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=QI(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=y_(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,a){const l=new f3(t||void 0,i||void 0,a||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(y_(this._state)){case Vn.SUCCESS:rl(this._resolve.bind(null,this.snapshot))();break;case Vn.CANCELED:case Vn.ERROR:const t=this._reject;rl(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(y_(this._state)){case Vn.RUNNING:case Vn.PAUSED:e.next&&rl(e.next.bind(e,this.snapshot))();break;case Vn.SUCCESS:e.complete&&rl(e.complete.bind(e))();break;case Vn.CANCELED:case Vn.ERROR:e.error&&rl(e.error.bind(e,this._error))();break;default:e.error&&rl(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}class so{constructor(e,t){this._service=e,t instanceof Xn?this._location=t:this._location=Xn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new so(e,t)}get root(){const e=new Xn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return i1(this._location.path)}get storage(){return this._service}get parent(){const e=$j(this._location.path);if(e===null)return null;const t=new Xn(this._location.bucket,e);return new so(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Nj(e)}}function g3(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new p3(n,new Hr(e),t)}function _3(n){n._throwIfRoot("getDownloadURL");const e=a3(n.storage,n._location,s1());return n.storage.makeRequestWithTokens(e,cl).then(t=>{if(t===null)throw Rj();return t})}function y3(n,e){const t=Jj(n._location.path,e),i=new Xn(n._location.bucket,t);return new so(n.storage,i)}function v3(n){return/^[A-Za-z]+:\/\//.test(n)}function E3(n,e){return new so(n,e)}function u1(n,e){if(n instanceof Wv){const t=n;if(t._bucket==null)throw Cj();const i=new so(t,t._bucket);return e!=null?u1(i,e):i}else return e!==void 0?y3(n,e):n}function T3(n,e){if(e&&v3(e)){if(n instanceof Wv)return E3(n,e);throw oy("To use ref(service, url), the first argument must be a Storage instance.")}else return u1(n,e)}function q0(n,e){const t=e?.[YI];return t==null?null:Xn.makeFromBucketSpec(t,n)}function S3(n,e,t,i={}){n.host=`${e}:${t}`;const a=_s(e);a&&(im(`https://${n.host}/b`),sm("Storage",!0)),n._isUsingEmulator=!0,n._protocol=a?"https":"http";const{mockUserToken:l}=i;l&&(n._overrideAuthToken=typeof l=="string"?l:vy(l,n.app.options.projectId))}class Wv{constructor(e,t,i,a,l,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=GI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=pj,this._maxUploadRetryTime=gj,this._requests=new Set,a!=null?this._bucket=Xn.makeFromBucketSpec(a,this._host):this._bucket=q0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Xn.makeFromBucketSpec(this._url,e):this._bucket=q0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){F0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){F0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new so(this,e)}_makeRequest(e,t,i,a,l=!0){if(this._deleted)return new xj(XI());{const c=Bj(e,this._appId,i,a,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[i,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,a).getPromise()}}const G0="@firebase/storage",Y0="0.14.0";const c1="storage";function Vm(n,e,t){return n=At(n),g3(n,e,t)}function Um(n){return n=At(n),_3(n)}function jm(n,e){return n=At(n),T3(n,e)}function mh(n=lm(),e){n=At(n);const i=Xc(n,c1).getImmediate({identifier:e}),a=yy("storage");return a&&b3(i,...a),i}function b3(n,e,t,i={}){S3(n,e,t,i)}function w3(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new Wv(t,i,a,e,da)}function C3(){ta(new $s(c1,w3,"PUBLIC").setMultipleInstances(!0)),gi(G0,Y0,""),gi(G0,Y0,"esm2020")}C3();const A3={apiKey:"AIzaSyDlpnsAM7VzcUVUB5Dfln9iOdWIGQtmGso",authDomain:"skillx-7b55c.firebaseapp.com",projectId:"skillx-7b55c",storageBucket:"skillx-7b55c.firebasestorage.app",messagingSenderId:"805907988145",appId:"1:805907988145:web:4c5c06e3ce8027a118ac90",measurementId:"G-4JP775V103"},zm=EC(A3),kl=MM(zm),Pl=jV(zm),Gt=fj(zm);mh(zm);const h1=k.createContext(),R3=({children:n})=>{const[e,t]=k.useState([]),[i,a]=k.useState([]),[l,c]=k.useState([]),f=async()=>{try{const v=(await Ks(qt(Gt,"Students"))).val();if(!v){t([]);return}const b=Object.keys(v).map(A=>({id:A,...v[A]}));t(b)}catch(y){console.log(y),alert("Services currently unavailable, please try again later")}},m=async()=>{try{const v=(await Ks(qt(Gt,"Organizations"))).val();if(!v){a([]);return}const b=Object.keys(v).map(A=>({id:A,...v[A]}));a(b)}catch(y){console.log(y),alert("Services currently unavailable, please try again later")}},g=async()=>{try{const v=(await Ks(qt(Gt,"Mentors"))).val();if(!v){c([]);return}const b=Object.keys(v).map(A=>({id:A,...v[A]}));c(b)}catch(y){console.log(y),alert("Services currently unavailable, please try again later")}};return k.useEffect(()=>{f(),m(),g()},[]),T.jsx(h1.Provider,{value:{studentData:e,OrganizationData:i,MentorData:l},children:n})},f1=()=>{const[n,e]=k.useState(""),[t,i]=k.useState(""),{studentData:a,OrganizationData:l,MentorData:c}=k.useContext(h1);function f(y){y.preventDefault(),console.log(a,l,c);try{const v=a?.find(I=>I.id==n.trim()&&I.passwordId==t),b=l?.find(I=>I.id==n.trim()&&I.passwordId==t.trim()),A=c?.find(I=>I.id==n.trim()&&I.passwordId==t.trim());if(v){localStorage.setItem("loggedInUserSkillExchange",JSON.stringify({...v,role:"student"})),alert("Logging in as student..."),window.location.reload();return}else if(b){localStorage.setItem("loggedInUserSkillExchange",JSON.stringify({...b,role:"organization"})),alert("Logging in as organization..."),window.location.reload();return}else if(A){console.log("mentor"),localStorage.setItem("loggedInUserSkillExchange",JSON.stringify({...A,role:"mentor"})),alert("Logging in as mentor..."),window.location.reload();return}else alert("User not found")}catch(v){alert(v)}}function m(y){e(y.target.value)}function g(y){i(y.target.value)}return T.jsx(T.Fragment,{children:T.jsxs("div",{className:"login-page",children:[T.jsx("h1",{children:"Skill Exchange Login"}),T.jsxs("form",{className:"login-page-content",autoComplete:"off",onSubmit:y=>{f(y)},children:[T.jsx("img",{src:ao,alt:"skillx logo"}),T.jsx("input",{type:"text",placeholder:"Enter user id",autoComplete:"off",required:!0,onChange:y=>{m(y)},value:n}),T.jsx("input",{type:"text",placeholder:"Enter your password",autoComplete:"off",required:!0,onChange:y=>{g(y)},value:t}),T.jsxs("h3",{children:["Don't have any account? ",T.jsx(Di,{to:"/register",children:"RegisterNow"})]}),T.jsx("button",{type:"submit",children:"Login"})]}),T.jsx("h3",{children:T.jsx(Di,{children:"Forgotten Password"})})]})})},I3=()=>{function n(){return T.jsx(f1,{})}return T.jsx(T.Fragment,{children:T.jsxs("nav",{className:"navLanding",children:[T.jsx("div",{className:"logo",children:T.jsx("img",{src:ao,alt:""})}),T.jsx("div",{className:"cta-nav",children:T.jsxs(Di,{to:"/login",children:[" ",T.jsxs("button",{className:"login-cta",onClick:n,children:[T.jsx("i",{className:"fa-solid fa-arrow-right-to-bracket"}),"Login"]})]})})]})})},N3="/skill-exchange/assets/hero_sec_img-xu7NUY8L.png",x3="/skill-exchange/assets/hero_background-DbhdSA7v.png",O3=()=>T.jsx(T.Fragment,{children:T.jsxs("section",{class:"hero-sec",children:[T.jsx("img",{src:x3,alt:"bg-hero",class:"hero-bg"}),T.jsxs("div",{class:"hero-left",children:[T.jsx("h1",{children:"Connect, Learn, Collaborate, Grow with SkillX"}),T.jsx("p",{children:"Empowering students to showcase their skills, connect with mentors, and work on real Organization projects  all in one smart AI-driven ecosystem."}),T.jsxs("div",{class:"btn-hero-left",children:[T.jsxs("button",{class:"login-cta",onclick:"window.location.href='roleReg.html'",children:[T.jsx("i",{class:"fa-solid fa-arrow-right-to-bracket"}),"Login"]}),T.jsx("button",{class:"learn-btn-hero",children:"Learn More"})]})]}),T.jsx("div",{class:"hero-right",children:T.jsx("img",{src:N3,alt:"SkillX related image"})})]})}),D3=()=>T.jsxs("div",{children:[T.jsx(I3,{}),T.jsx(O3,{})]});class ph{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const k3=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},mn={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:k3()},Xv=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},P3=(n,e="https://api.emailjs.com")=>{if(!n)return;const t=Xv(n);mn.publicKey=t.publicKey,mn.blockHeadless=t.blockHeadless,mn.storageProvider=t.storageProvider,mn.blockList=t.blockList,mn.limitRate=t.limitRate,mn.origin=t.origin||e},d1=async(n,e,t={})=>{const i=await fetch(mn.origin+n,{method:"POST",headers:t,body:e}),a=await i.text(),l=new ph(i.status,a);if(i.ok)return l;throw l},m1=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},M3=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},p1=n=>n.webdriver||!n.languages||n.languages.length===0,g1=()=>new ph(451,"Unavailable For Headless Browser"),L3=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},V3=n=>!n.list?.length||!n.watchVariable,U3=(n,e)=>n instanceof FormData?n.get(e):n[e],_1=(n,e)=>{if(V3(n))return!1;L3(n.list,n.watchVariable);const t=U3(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},y1=()=>new ph(403,"Forbidden"),j3=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},z3=async(n,e,t)=>{const i=Number(await t.get(n)||0);return e-Date.now()+i},v1=async(n,e,t)=>{if(!e.throttle||!t)return!1;j3(e.throttle,e.id);const i=e.id||n;return await z3(i,e.throttle,t)>0?!0:(await t.set(i,Date.now().toString()),!1)},E1=()=>new ph(429,"Too Many Requests"),B3=async(n,e,t,i)=>{const a=Xv(i),l=a.publicKey||mn.publicKey,c=a.blockHeadless||mn.blockHeadless,f=a.storageProvider||mn.storageProvider,m={...mn.blockList,...a.blockList},g={...mn.limitRate,...a.limitRate};return c&&p1(navigator)?Promise.reject(g1()):(m1(l,n,e),M3(t),t&&_1(m,t)?Promise.reject(y1()):await v1(location.pathname,g,f)?Promise.reject(E1()):d1("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:l,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},F3=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},H3=n=>typeof n=="string"?document.querySelector(n):n,q3=async(n,e,t,i)=>{const a=Xv(i),l=a.publicKey||mn.publicKey,c=a.blockHeadless||mn.blockHeadless,f=mn.storageProvider||a.storageProvider,m={...mn.blockList,...a.blockList},g={...mn.limitRate,...a.limitRate};if(c&&p1(navigator))return Promise.reject(g1());const y=H3(t);m1(l,n,e),F3(y);const v=new FormData(y);return _1(m,v)?Promise.reject(y1()):await v1(location.pathname,g,f)?Promise.reject(E1()):(v.append("lib_version","4.4.1"),v.append("service_id",n),v.append("template_id",e),v.append("user_id",l),d1("/api/v1.0/email/send-form",v))},Ws={init:P3,send:B3,sendForm:q3,EmailJSResponseStatus:ph},gh=()=>T.jsx(T.Fragment,{children:T.jsxs("div",{className:"loader-main",children:[T.jsx("div",{className:"bg-main-loader"}),T.jsx("div",{className:"loader"})]})}),G3=({role:n})=>{const[e,t]=k.useState(""),[i,a]=k.useState(""),[l,c]=k.useState(""),[f,m]=k.useState(""),[g,y]=k.useState(""),[v,b]=k.useState(""),[A,I]=k.useState(!1),[j,V]=k.useState(null),[$,K]=k.useState(!1),[ee,ue]=k.useState(""),[_e,Se]=k.useState(!1),[x,R]=k.useState(!1),[N,U]=k.useState();k.useEffect(()=>{Ws.init("O1eqMF__l75Le_ffM")},[]);const P=()=>{window.recaptchaVerifier||(window.recaptchaVerifier=new xy(kl,"recaptcha-container",{size:"invisible",callback:()=>console.log("reCAPTCHA solved")}),window.recaptchaVerifier.render())};async function B(){if(!i)return alert("Enter email");I(!0);const se=Math.floor(1e5+Math.random()*9e5).toString();ue(se),await hv(Rl(Pl,"emailOtps",i),{otp:se,timestamp:Date.now()}),Ws.send("service_rjgtrdr","template_vru0qpj",{to_email:i,name:e,otp:se}).then(()=>{K(!0),alert("Email OTP sent!")}).catch(he=>alert("Email send error: "+he.text)),I(!1)}async function O(){if(!g)return alert("Enter OTP");I(!0);const se=await cv(Rl(Pl,"emailOtps",i));if(!se.exists())return alert("No OTP found for this email");se.data().otp===g?(Se(!0),alert("Email verified!")):alert("Incorrect OTP"),I(!1)}function Ze(){if(!l)return alert("Enter mobile number");I(!0),P();const se=window.recaptchaVerifier;Oy(kl,l,se).then(he=>{V(he),alert("OTP sent successfully!")}).catch(he=>{console.error(he),alert("Error sending OTP: "+he.message)}),I(!1)}function Oe(){if(!j)return alert("Please send OTP first");I(!0),j.confirm(v).then(se=>{R(!0),alert("Phone verified successfully!"),console.log(se.user),window.recaptchaVerifier&&window.recaptchaVerifier.clear()}).catch(se=>{console.error(se),alert("Invalid OTP")}),I(!1)}async function J(se){if(se.preventDefault(),I(!0),!_e||!x)return I(!1),alert("Verify both email & mobile first");const he={name:e.trim(),email:i.trim(),mobileNum:l.trim(),passwordId:f.trim()},Pe=(await Ks(qt(Gt,"Students"))).val();if(Pe){const X=Object.values(Pe),le=X.some(ve=>ve.email===i),ye=X.some(ve=>ve.mobileNum===l);if(le)return I(!1),alert("Email already exists. Try another one.");if(ye)return I(!1),alert("Mobile number already exists. Try another one.")}const M=Pe?Object.keys(Pe).length:0,G="STU"+Math.floor(1e3+Math.random()*9e3)+(M+1);await po(qt(Gt,`Students/${G}`),he).then(()=>{alert("Registered Successfully "),Ws.send("service_rjgtrdr","template_l3c853f",{to_email:i.trim(),userId:G.trim(),password:f.trim(),name:e.trim()}).then(()=>alert("Credentials sent to email"))}).catch(X=>console.log(X)),t(""),a(""),c(""),m(""),y(""),b(""),I(!1)}return T.jsxs("form",{className:"registerForm",onSubmit:J,children:[T.jsxs("h3",{children:["Registering as ",n]}),T.jsx("input",{type:"text",placeholder:"Enter Your Name",value:e,onChange:se=>t(se.target.value),required:!0}),T.jsxs("div",{className:"send-otp",children:[T.jsx("input",{type:"email",placeholder:"Enter Your Email",value:i,onChange:se=>a(se.target.value),required:!0}),T.jsx("button",{type:"button",onClick:B,children:"Send OTP"})]}),T.jsxs("div",{className:"verify-otp",children:[T.jsx("input",{type:"text",placeholder:"Enter Email OTP",value:g,onChange:se=>y(se.target.value),required:!0}),T.jsx("button",{type:"button",onClick:O,children:"Verify OTP"})]}),T.jsxs("div",{className:"send-otp",children:[T.jsx("input",{type:"text",placeholder:"Enter Mobile",value:l,onChange:se=>c(se.target.value),required:!0}),T.jsx("button",{id:"sendMobileOtpBtn",type:"button",onClick:Ze,children:"Send OTP"})]}),T.jsx("div",{id:"recaptcha-container"}),T.jsxs("div",{className:"verify-otp",children:[T.jsx("input",{type:"text",placeholder:"Enter Mobile OTP",value:v,onChange:se=>b(se.target.value),required:!0}),T.jsx("button",{type:"button",onClick:Oe,children:"Verify OTP"})]}),T.jsx("input",{type:"password",placeholder:"Enter Password",value:f,onChange:se=>m(se.target.value),required:!0}),T.jsx("button",{type:"submit",children:"Submit"}),A==!0&&T.jsx(gh,{})]})},Y3=({role:n})=>{const[e,t]=k.useState(""),[i,a]=k.useState(""),[l,c]=k.useState(""),[f,m]=k.useState(""),[g,y]=k.useState(""),[v,b]=k.useState(""),[A,I]=k.useState(""),[j,V]=k.useState(""),[$,K]=k.useState(!1);function ee(X){t(X.target.value)}function ue(X){a(X.target.value)}function _e(X){b(X.target.value)}function Se(X){c(X.target.value)}const[x,R]=k.useState(null),[N,U]=k.useState(!1),[P,B]=k.useState(""),[O,Ze]=k.useState(!1),[Oe,J]=k.useState(!1);k.useEffect(()=>{Ws.init("O1eqMF__l75Le_ffM")},[]);const se=()=>{window.recaptchaVerifier||(window.recaptchaVerifier=new xy(kl,"recaptcha-container",{size:"invisible",callback:()=>console.log("reCAPTCHA solved")}),window.recaptchaVerifier.render())};async function he(){if(!f)return alert("Enter email");K(!0);const X=Math.floor(1e5+Math.random()*9e5).toString();B(X),await hv(Rl(Pl,"emailOtps",f),{otp:X,timestamp:Date.now()}),Ws.send("service_rjgtrdr","template_vru0qpj",{to_email:f,name:e,otp:X}).then(()=>{U(!0),alert("Email OTP sent!")}).catch(le=>alert("Email send error: "+le.text)),K(!1)}async function ke(){if(!A)return alert("Enter OTP");K(!0);const X=await cv(Rl(Pl,"emailOtps",f));if(!X.exists())return alert("No OTP found for this email");X.data().otp===A?(Ze(!0),alert("Email verified!")):alert("Incorrect OTP"),K(!1)}function Pe(){if(!g)return alert("Enter mobile number");K(!0),se();const X=window.recaptchaVerifier;Oy(kl,g,X).then(le=>{R(le),alert("OTP sent successfully!")}).catch(le=>{console.error(le),alert("Error sending OTP: "+le.message)}),K(!1)}function M(){if(!x)return alert("Please send OTP first");K(!0),x.confirm(j).then(X=>{J(!0),alert("Phone verified successfully!"),console.log(X.user),window.recaptchaVerifier&&window.recaptchaVerifier.clear()}).catch(X=>{console.error(X),alert("Invalid OTP")}),K(!1)}async function G(X){if(X.preventDefault(),K(!0),!O||!Oe)return K(!1),alert("Verify both email & mobile first");const le={name:e.trim(),RegisterationNum:i.trim(),Address:l.trim(),email:f.trim(),mobileNum:g.trim(),passwordId:v.trim()},ve=(await Ks(qt(Gt,"Organizations"))).val();if(ve){const Xe=Object.values(ve),vi=Xe.some(zi=>zi.email===f),Zn=Xe.some(zi=>zi.mobileNum===g);if(vi)return K(!1),alert("Email already exists. Try another one.");if(Zn)return K(!1),alert("Mobile number already exists. Try another one.")}const De=ve?Object.keys(ve).length:0,ut="ORG"+Math.floor(1e3+Math.random()*9e3)+(De+1);await po(qt(Gt,`Organizations/${ut}`),le).then(()=>{alert("Registered Successfully "),Ws.send("service_rjgtrdr","template_l3c853f",{to_email:f.trim(),userId:ut.trim(),password:v.trim(),name:e.trim()}).then(()=>alert("Credentials sent to email"))}).catch(Xe=>console.log(Xe)),t(""),setEmailOrganization(""),setMobileOrganization(""),setPasswordOrganization(""),I(""),V(""),K(!1)}return T.jsx(T.Fragment,{children:T.jsxs("form",{className:"registerForm",onSubmit:X=>{G(X)},children:[T.jsxs("h3",{children:["Registering as ",n]}),T.jsx("input",{type:"text",placeholder:"Enter Your Name",onChange:X=>{ee(X)},value:e,required:!0}),T.jsx("input",{type:"text",placeholder:"Enter Registration Number",onChange:X=>{ue(X)},value:i,required:!0}),T.jsx("input",{type:"text",placeholder:"Address of Organization",onChange:X=>{Se(X)},value:l,required:!0}),T.jsxs("div",{className:"send-otp",children:[T.jsx("input",{type:"email",placeholder:"Enter Your Email",value:f,onChange:X=>m(X.target.value),required:!0}),T.jsx("button",{type:"button",onClick:he,children:"Send OTP"})]}),T.jsxs("div",{className:"verify-otp",children:[T.jsx("input",{type:"text",placeholder:"Enter Email OTP",value:A,onChange:X=>I(X.target.value),required:!0}),T.jsx("button",{type:"button",onClick:ke,children:"Verify OTP"})]}),T.jsxs("div",{className:"send-otp",children:[T.jsx("input",{type:"text",placeholder:"Enter Mobile",value:g,onChange:X=>y(X.target.value),required:!0}),T.jsx("button",{id:"sendMobileOtpBtn",type:"button",onClick:Pe,children:"Send OTP"})]}),T.jsx("div",{id:"recaptcha-container"}),T.jsxs("div",{className:"verify-otp",children:[T.jsx("input",{type:"text",placeholder:"Enter Mobile OTP",value:j,onChange:X=>V(X.target.value),required:!0}),T.jsx("button",{type:"button",onClick:M,children:"Verify OTP"})]}),T.jsx("input",{type:"text",placeholder:"Enter Password",onChange:X=>{_e(X)},value:v,required:!0}),T.jsx("button",{type:"submit",children:" Submit"}),$==!0&&T.jsx(gh,{})]})})},K3=({role:n})=>{const[e,t]=k.useState(""),[i,a]=k.useState(""),[l,c]=k.useState(""),[f,m]=k.useState(""),[g,y]=k.useState(""),[v,b]=k.useState(""),[A,I]=k.useState(""),[j,V]=k.useState("");function $(G){t(G.target.value)}function K(G){a(G.target.value)}function ee(G){b(G.target.value)}const[ue,_e]=k.useState(null),[Se,x]=k.useState(!1),[R,N]=k.useState(""),[U,P]=k.useState(!1),[B,O]=k.useState(!1),[Ze,Oe]=k.useState(!1);k.useEffect(()=>{Ws.init("O1eqMF__l75Le_ffM")},[]);const J=()=>{window.recaptchaVerifier||(window.recaptchaVerifier=new xy(kl,"recaptcha-container",{size:"invisible",callback:()=>console.log("reCAPTCHA solved")}),window.recaptchaVerifier.render())};async function se(){if(Oe(!0),!f)return alert("Enter email");const G=Math.floor(1e5+Math.random()*9e5).toString();N(G),await hv(Rl(Pl,"emailOtps",f),{otp:G,timestamp:Date.now()}),Ws.send("service_rjgtrdr","template_vru0qpj",{to_email:f,name:e,otp:G}).then(()=>{x(!0),alert("Email OTP sent!")}).catch(X=>alert("Email send error: "+X.text)),Oe(!1)}async function he(){if(Oe(!0),!A)return alert("Enter OTP");const G=await cv(Rl(Pl,"emailOtps",f));if(!G.exists())return alert("No OTP found for this email");G.data().otp===A?(P(!0),alert("Email verified!")):alert("Incorrect OTP"),Oe(!1)}function ke(){if(Oe(!0),!g)return alert("Enter mobile number");J();const G=window.recaptchaVerifier;Oy(kl,g,G).then(X=>{_e(X),alert("OTP sent successfully!")}).catch(X=>{console.error(X),alert("Error sending OTP: "+X.message)}),Oe(!1)}function Pe(){if(Oe(!0),!ue)return alert("Please send OTP first");ue.confirm(j).then(G=>{O(!0),alert("Phone verified successfully!"),console.log(G.user),window.recaptchaVerifier&&window.recaptchaVerifier.clear()}).catch(G=>{console.error(G),alert("Invalid OTP")}),Oe(!1)}async function M(G){if(G.preventDefault(),Oe(!0),!U||!B)return Oe(!1),alert("Verify both email & mobile first");const X={name:e.trim(),Education:i.trim(),Address:l.trim(),email:f.trim(),mobileNum:g.trim(),passwordId:v.trim()},ye=(await Ks(qt(Gt,"Mentors"))).val();if(ye){const ut=Object.values(ye),Xe=ut.some(Zn=>Zn.email===f),vi=ut.some(Zn=>Zn.mobileNum===g);if(Xe)return Oe(!1),alert("Email already exists. Try another one.");if(vi)return Oe(!1),alert("Mobile number already exists. Try another one.")}const ve=ye?Object.keys(ye).length:0,De="MENT"+Math.floor(1e3+Math.random()*9e3)+(ve+1);await po(qt(Gt,`Mentors/${De}`),X).then(()=>{alert("Registered Successfully  sending cerentials...wait..."),Oe(!0),Ws.send("service_rjgtrdr","template_l3c853f",{to_email:f.trim(),userId:De.trim(),password:v.trim(),name:e.trim()}).then(()=>{alert("Credentials sent to email"),Oe(!1)})}).catch(ut=>console.log(ut)),t(""),m(""),y(""),b(""),I(""),V(""),Oe(!1)}return T.jsxs(T.Fragment,{children:[T.jsxs("form",{className:"registerForm",onSubmit:G=>{M(G)},children:[T.jsxs("h3",{children:["Registering as ",n]}),T.jsx("input",{type:"text",placeholder:"Enter Your Name",onChange:G=>{$(G)},value:e,required:!0}),T.jsx("input",{type:"text",placeholder:"Enter Education Details",onChange:G=>{K(G)},value:i,required:!0}),T.jsxs("div",{className:"send-otp",children:[T.jsx("input",{type:"email",placeholder:"Enter Your Email",value:f,onChange:G=>m(G.target.value),required:!0}),T.jsx("button",{type:"button",onClick:se,children:"Send OTP"})]}),T.jsxs("div",{className:"verify-otp",children:[T.jsx("input",{type:"text",placeholder:"Enter Email OTP",value:A,onChange:G=>I(G.target.value),required:!0}),T.jsx("button",{type:"button",onClick:he,children:"Verify OTP"})]}),T.jsxs("div",{className:"send-otp",children:[T.jsx("input",{type:"text",placeholder:"Enter Mobile",value:g,onChange:G=>y(G.target.value),required:!0}),T.jsx("button",{id:"sendMobileOtpBtn",type:"button",onClick:ke,children:"Send OTP"})]}),T.jsx("div",{id:"recaptcha-container"}),T.jsxs("div",{className:"verify-otp",children:[T.jsx("input",{type:"text",placeholder:"Enter Mobile OTP",value:j,onChange:G=>V(G.target.value),required:!0}),T.jsx("button",{type:"button",onClick:Pe,children:"Verify OTP"})]}),T.jsx("input",{type:"text",placeholder:"Enter Password",onChange:G=>{ee(G)},value:v,required:!0}),T.jsx("button",{type:"submit",children:" Submit"})]}),Ze==!0&&T.jsx(gh,{})]})},Q3=()=>{const[n,e]=k.useState("");function t(i){e(i.target.value),console.log(n)}return T.jsx(T.Fragment,{children:T.jsxs("div",{className:"register-main",children:[T.jsx("h1",{children:"Register In SKill Exchange"}),T.jsxs("div",{className:"register-content",children:[T.jsx("img",{src:ao,alt:"skillx logo"}),T.jsxs("select",{name:"",id:"",placeholder:"select role",onChange:i=>{t(i)},children:[T.jsx("option",{value:"role_select",children:"Select Your Role"}),T.jsx("option",{value:"student",children:"Student"}),T.jsx("option",{value:"organization",children:"Organization"}),T.jsx("option",{value:"mentor",children:"Mentor"})]}),n==""&&T.jsx("h4",{children:T.jsx("b",{children:"Select Your Role First"})}),n=="role_select"&&T.jsx("h4",{children:T.jsx("b",{children:"Select Your Role First"})}),n=="student"&&T.jsx(G3,{role:n}),n=="organization"&&T.jsx(Y3,{role:n}),n=="mentor"&&T.jsx(K3,{role:n})]})]})})},pa=k.createContext(),W3=({children:n})=>{const[e,t]=k.useState(!0),i=fa(),[a,l]=k.useState(null);return k.useEffect(()=>{const c=qt(Gt,`Students/${i.id}`),f=sj(c,m=>{m.exists()?l(m.val()):console.log("No Data Found"),t(!1)});return()=>f()},[i.id]),e?T.jsx(gh,{}):T.jsx(pa.Provider,{value:a,children:n})},X3=()=>{const{id:n}=fa();return T.jsx("div",{className:"navigation-dash-main",children:T.jsxs("div",{className:"main-left",children:[T.jsxs("ul",{children:[T.jsx(Di,{to:`/student-dashboard/${n}/dashboard`,children:T.jsxs("li",{children:[T.jsx("i",{className:"fa-regular fa-house"}),"Dashboard"]})}),T.jsxs(Di,{to:`/student-dashboard/${n}/`,children:["   ",T.jsxs("li",{children:[T.jsx("i",{className:"fa-regular fa-user"}),"My Profile"]})]}),T.jsxs(Di,{to:`/student-dashboard/${n}/skill-exchange`,children:["  ",T.jsxs("li",{children:[T.jsx("i",{className:"fa-solid fa-rotate"}),"Skill-Exchange"]})]}),T.jsxs(Di,{to:`/student-dashboard/${n}/projects`,children:["   ",T.jsxs("li",{children:[T.jsx("i",{className:"fa-regular fa-building"}),"Projects"]})]}),T.jsxs(Di,{to:`/student-dashboard/${n}/mentorship`,children:["   ",T.jsxs("li",{children:[T.jsx("i",{className:"fa-regular fa-id-badge"}),"Mentorship"]})]}),T.jsxs(Di,{to:`/student-dashboard/${n}/events`,children:["  ",T.jsxs("li",{children:[T.jsx("i",{className:"fa-regular fa-calendar-days"}),"Events"]})]})]}),T.jsx("button",{className:"logout-btn",onClick:()=>(localStorage.removeItem("loggedInUserSkillExchange"),window.location.reload(),T.jsx(iC,{to:"/login",replace:!0})),children:"Logout"})]})})},$3=()=>T.jsxs("nav",{className:"navStudentDashboard",children:[T.jsx("div",{className:"logo",children:T.jsx("img",{src:ao,alt:"Logo"})}),T.jsxs("div",{className:"nav-right",children:[T.jsx("input",{type:"search",placeholder:"Search projects, skills, mentors",className:"searchBarStud"}),T.jsx("i",{className:"fa-regular fa-bell"})]}),T.jsx("label",{htmlFor:"menu-toggle",children:T.jsxs("div",{className:"hamburger",id:"menu-toggle",children:[T.jsx("div",{}),T.jsx("div",{}),T.jsx("div",{})]})})]}),J3=({close:n})=>{const[e,t]=k.useState(!1),[i,a]=k.useState(""),[l,c]=k.useState(""),[f,m]=k.useState(null),[g,y]=k.useState(0),{id:v}=fa();console.log("Editing Student ID:",v);const b=j=>{m(j.target.files[0])},A=async(j,V)=>{await ry(qt(Gt,`Students/${j}`),V)},I=async j=>{j.preventDefault();const V={};if(i.trim()!==""&&(V.name=i.trim()),l.trim()!==""&&(V.description=l.trim()),!f&&Object.keys(V).length===0){alert("No changes to update");return}t(!0);try{if(f){const $=mh(),K=jm($,`ProfilePictures/${f.name}`),ee=Vm(K,f);ee.on("state_changed",ue=>{const _e=ue.bytesTransferred/ue.totalBytes*100;y(Math.round(_e))},ue=>{console.error("Upload error:",ue),t(!1)},async()=>{const ue=await Um(ee.snapshot.ref);console.log("File available at:",ue);const _e=Pm(qt(Gt,"images"));po(_e,{name:f.name,url:ue}),V.profileImage=ue,await A(v,V),alert("All changes made!"),t(!1),y(0)})}else await A(v,V),alert("All changes made!"),t(!1)}catch($){console.error("Error updating profile:",$),t(!1)}};return T.jsxs("div",{className:"edit-profile-Student",children:[T.jsx("h3",{children:"Edit Your Profile:"}),T.jsxs("form",{onSubmit:I,children:[T.jsx("h6",{children:"Upload your profile picture"}),T.jsx("input",{type:"file",onChange:b}),f&&T.jsxs("p",{children:["Upload Progress: ",g,"%"]}),T.jsx("input",{type:"text",placeholder:"Edit your name",value:i,onChange:j=>a(j.target.value)}),T.jsx("textarea",{placeholder:"Write About Yourself",value:l,onChange:j=>c(j.target.value)}),T.jsx("h5",{children:"You can edit Your Skills by uploading skills from your profile or skill exchange"}),T.jsx("button",{type:"button",className:"close-btn",onClick:n,children:T.jsx("i",{className:"fa-solid fa-x"})}),T.jsx("button",{type:"submit",children:"Save Changes"})]}),e&&T.jsx(gh,{})]})},Z3=()=>{const[n,e]=k.useState(!1),t=k.useContext(pa),i=t?.skills||{},a=Object.entries(i).map(([l,c])=>({id:l,...c}));return T.jsx(T.Fragment,{children:T.jsxs("div",{className:"profile-intro-stu-outer",children:[T.jsxs("div",{className:"profile-intro-stu",children:[T.jsx("div",{className:"profile-img-stu",children:T.jsx("img",{src:t?.profileImage||ao,alt:"profile-image"})}),T.jsxs("div",{className:"pr-int-stu",children:[T.jsx("h2",{id:"name",children:t?.name||"Student Name"}),T.jsx("p",{id:"about",children:t?.description||"Add about yourself"})]}),T.jsx("br",{}),T.jsx("br",{})]}),T.jsxs("div",{className:"skill-tags-stu",children:[a.length==0&&T.jsx("h6",{children:"no skills yet"}),T.jsx("button",{children:"Skill Exchange Member"}),a.map(l=>T.jsx("button",{children:l.title},l.id))]}),T.jsxs("div",{className:"impact-score",children:[T.jsx("div",{children:T.jsx("p",{children:"Organization Impact Score:"})}),T.jsx("div",{className:"progress-bar",children:T.jsx("div",{className:"progress-fill"})}),T.jsx("div",{children:T.jsx("p",{children:"75/100"})})]}),T.jsxs("div",{className:"profile-intro-buttons",children:[T.jsx("button",{children:T.jsx("a",{href:`tel:${t?.mobileNum||""}`,children:"Contact"})}),T.jsx("button",{children:T.jsx("a",{href:`mailto:${t?.email||""}`,children:"Email"})}),T.jsx("button",{onClick:()=>e(!0),children:"Edit Profile"}),n&&T.jsx(J3,{close:()=>e(!1)})]})]})})},e9=({close:n})=>{const[e,t]=k.useState(""),[i,a]=k.useState(""),[l,c]=k.useState(null),[f,m]=k.useState(0),[g,y]=k.useState(!1),{id:v}=fa(),b=async I=>{const j=qt(Gt,`Students/${v}/skills`),V=Pm(j);await po(V,I)},A=async I=>{if(I.preventDefault(),!l){alert("Please upload a certificate");return}y(!0);try{const j=mh(),V=jm(j,`Certificates/${Date.now()}_${l.name}`),$=Vm(V,l);$.on("state_changed",K=>{const ee=K.bytesTransferred/K.totalBytes*100;m(Math.round(ee))},K=>{console.error("Upload error:",K),y(!1)},async()=>{const K=await Um($.snapshot.ref),ee={title:e,description:i,certificateURL:K,certificateName:l.name,addedAt:new Date().toISOString()};await b(ee),alert("Skill Added Successfully!"),y(!1),t(""),a(""),c(null),m(0)})}catch(j){console.error("Error adding skill:",j),y(!1)}};return T.jsxs("div",{className:"edit-profile-Student",children:[T.jsx("h3",{children:"Add New Skill"}),T.jsxs("form",{onSubmit:A,children:[T.jsx("input",{type:"text",placeholder:"Enter Skill Title",value:e,onChange:I=>t(I.target.value),required:!0}),T.jsx("h6",{children:"Upload your certificate"}),T.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",onChange:I=>c(I.target.files[0]),required:!0}),l&&T.jsxs("p",{children:["Upload Progress: ",f,"%"]}),T.jsx("textarea",{placeholder:"Write about this skill",value:i,onChange:I=>a(I.target.value),required:!0}),T.jsx("button",{type:"button",className:"close-btn",onClick:n,children:T.jsx("i",{className:"fa-solid fa-x"})}),T.jsx("button",{type:"submit",children:"Save Skill"})]}),g&&T.jsx("p",{children:"Uploading... Please wait."})]})},t9=()=>{const[n,e]=k.useState(!1),i=k.useContext(pa)?.skills||{},a=Object.entries(i).map(([l,c])=>({id:l,...c}));return T.jsxs("div",{className:"skills-stu",children:[T.jsxs("div",{className:"skills-head",children:[T.jsx("h2",{children:"My Skills :"}),T.jsx("button",{onClick:()=>e(!0),children:"Add New"})]}),T.jsxs("div",{className:"skills-collection",children:[a.length===0&&T.jsxs("h6",{children:[T.jsx("br",{}),T.jsx("br",{}),"No skills added yet"]}),a.map(l=>T.jsxs("div",{className:"skills-card",children:[T.jsxs("h2",{children:[T.jsx("i",{className:"fa-solid fa-trophy"})," ",l.title]}),T.jsx("img",{src:l.certificateURL?l.certificateURL:ao,alt:"certificate"}),T.jsx("h3",{children:"Description:"}),T.jsx("p",{children:l.description})]},l.id))]}),n&&T.jsx(e9,{close:()=>e(!1)})]})},n9=({close:n})=>{const[e,t]=k.useState(""),[i,a]=k.useState(""),[l,c]=k.useState(null),[f,m]=k.useState(0),[g,y]=k.useState(!1),{id:v}=fa(),b=async I=>{const j=qt(Gt,`Students/${v}/Achievements`),V=Pm(j);await po(V,I)},A=async I=>{if(I.preventDefault(),!l){alert("Please upload a certificate");return}y(!0);try{const j=mh(),V=jm(j,`Certificates/${Date.now()}_${l.name}`),$=Vm(V,l);$.on("state_changed",K=>{const ee=K.bytesTransferred/K.totalBytes*100;m(Math.round(ee))},K=>{console.error("Upload error:",K),y(!1)},async()=>{const K=await Um($.snapshot.ref),ee={title:e,description:i,certificateURL:K,certificateName:l.name,addedAt:new Date().toISOString()};await b(ee),alert("Achievement Added Successfully!"),y(!1),t(""),a(""),c(null),m(0)})}catch(j){console.error("Error adding Achievement:",j),y(!1)}};return T.jsxs("div",{className:"edit-profile-Student",children:[T.jsx("h3",{children:"Add New Achievement"}),T.jsxs("form",{onSubmit:A,children:[T.jsx("input",{type:"text",placeholder:"Enter Achievement Title",value:e,onChange:I=>t(I.target.value),required:!0}),T.jsx("h6",{children:"Upload your certificate"}),T.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",onChange:I=>c(I.target.files[0]),required:!0}),l&&T.jsxs("p",{children:["Upload Progress: ",f,"%"]}),T.jsx("textarea",{placeholder:"Write about this Achievement",value:i,onChange:I=>a(I.target.value),required:!0}),T.jsx("button",{type:"button",className:"close-btn",onClick:n,children:T.jsx("i",{className:"fa-solid fa-x"})}),T.jsx("button",{type:"submit",children:"Save Achievement"})]}),g&&T.jsx("p",{children:"Uploading... Please wait."})]})},i9=()=>{const[n,e]=k.useState(!1),i=k.useContext(pa)?.Achievements||{},a=Object.entries(i).map(([l,c])=>({id:l,...c}));return T.jsxs("div",{children:[T.jsxs("div",{className:"certificates-stu",children:[T.jsxs("div",{className:"cert-head",children:[T.jsx("h2",{children:"Photos & Achievements :"}),T.jsx("button",{onClick:()=>e(!0),children:"Upload Achievements"})]}),a.length===0&&T.jsxs("h6",{children:[" ",T.jsx("br",{})," ",T.jsx("br",{}),"No skill Added yet"]}),T.jsx("div",{className:"certificates-collection",children:a.map(l=>T.jsxs("div",{className:"cert-card",id:l.id,children:[T.jsxs("h2",{children:[T.jsx("i",{className:"fa-solid fa-trophy"}),l.title]}),T.jsx("img",{src:l.certificateURL,alt:""}),T.jsx("h3",{children:"About journey:-"}),T.jsx("p",{children:l.description})]}))})]}),n&&T.jsx(n9,{close:()=>e(!1)})]})},s9=({close:n})=>{const[e,t]=k.useState(""),[i,a]=k.useState(""),[l,c]=k.useState(null),[f,m]=k.useState(0),[g,y]=k.useState(!1),{id:v}=fa(),b=async I=>{const j=qt(Gt,`Students/${v}/Projects`),V=Pm(j);await po(V,I)},A=async I=>{if(I.preventDefault(),!l){alert("Please upload a certificate");return}y(!0);try{const j=mh(),V=jm(j,`Certificates/${Date.now()}_${l.name}`),$=Vm(V,l);$.on("state_changed",K=>{const ee=K.bytesTransferred/K.totalBytes*100;m(Math.round(ee))},K=>{console.error("Upload error:",K),y(!1)},async()=>{const K=await Um($.snapshot.ref),ee={title:e,description:i,certificateURL:K,certificateName:l.name,addedAt:new Date().toISOString()};await b(ee),alert("Project Added Successfully!"),y(!1),t(""),a(""),c(null),m(0)})}catch(j){console.error("Error adding Project:",j),y(!1)}};return T.jsxs("div",{className:"edit-profile-Student",children:[T.jsx("h3",{children:"Add New Project"}),T.jsxs("form",{onSubmit:A,children:[T.jsx("input",{type:"text",placeholder:"Enter Project Title",value:e,onChange:I=>t(I.target.value),required:!0}),T.jsx("h6",{children:"Upload your certificate"}),T.jsx("input",{type:"file",accept:"image/png, image/jpeg, image/jpg",onChange:I=>c(I.target.files[0]),required:!0}),l&&T.jsxs("p",{children:["Upload Progress: ",f,"%"]}),T.jsx("textarea",{placeholder:"Write about this Project",value:i,onChange:I=>a(I.target.value),required:!0}),T.jsx("button",{type:"button",className:"close-btn",onClick:n,children:T.jsx("i",{className:"fa-solid fa-x"})}),T.jsx("button",{type:"submit",children:"Save Project"})]}),g&&T.jsx("h6",{children:"Uploading... Please wait."})]})},r9=()=>{const[n,e]=k.useState(!1),i=k.useContext(pa)?.Projects||{},a=Object.entries(i).map(([l,c])=>({id:l,...c}));return T.jsxs("div",{children:[T.jsxs("div",{className:"projects-stu",children:[T.jsxs("div",{className:"projects-head",children:[T.jsx("h2",{children:"Projects :"}),T.jsx("button",{onClick:()=>e(!0),children:"Upload Projects"})]}),T.jsx("div",{className:"projects-collection",children:a.map(l=>T.jsxs("div",{className:"projects-card",children:[T.jsxs("h2",{children:[T.jsx("i",{className:"fa-solid fa-trophy"}),l.title]}),T.jsx("img",{src:l.certificateURL,alt:""}),T.jsx("h3",{children:"About Project:-"}),T.jsx("p",{children:l.description})]},l.id))})]}),n&&T.jsx(s9,{close:()=>e(!1)})]})},a9=()=>T.jsxs("div",{children:[T.jsx(Z3,{}),T.jsx(t9,{}),T.jsx(i9,{}),T.jsx(r9,{})]}),o9=()=>(k.useContext(pa),fa(),T.jsxs("div",{children:[T.jsx("input",{type:"checkbox",id:"menu-toggle",className:"menu-toggle",hidden:!0}),T.jsx($3,{}),T.jsx(X3,{}),T.jsx("div",{className:"main-right",children:T.jsx(Jx,{})})]})),l9=()=>T.jsx("div",{children:"Mentor Dashboard"}),u9=()=>T.jsx("div",{children:"Organization"}),K0=({children:n})=>localStorage.getItem("loggedInUserSkillExchange")?n:T.jsx(iC,{to:"/login",replace:!0}),c9=()=>T.jsx("div",{children:"Dashboard"}),h9=()=>T.jsx("div",{children:"Events stu"}),f9=()=>T.jsx("div",{children:"Mentorship"}),d9=()=>T.jsx("div",{children:"Projects"}),m9=()=>{const e=k.useContext(pa)?.skills||{},t=Object.entries(e).map(([i,a])=>({id:i,...a}));return T.jsx("div",{children:T.jsxs("div",{class:"my-skill-flow",children:[T.jsx("h3",{children:"My Skills:-"}),T.jsx("div",{class:"skill-list-flow",children:T.jsxs("ul",{children:[t.length===0&&T.jsx("h6",{children:"No skills yet"}),t.map(i=>T.jsxs("li",{children:[T.jsx("p",{children:i.title},i.id),T.jsx("button",{children:T.jsx("i",{class:"fa-solid fa-xmark"})})]}))]})}),T.jsxs("div",{class:"add-new-skill-flow",children:[T.jsx("input",{type:"text",placeholder:"Add Skills..."}),T.jsxs("button",{onClick:()=>alert("functionality under development"),children:["Add",T.jsx("i",{class:"fa-solid fa-plus"})]})]})]})})},p9=()=>{const[n,e]=k.useState(""),{id:t}=fa(),i=k.useContext(pa);async function a(){if(!n)return;const f=qt(Gt,`Students/${t}/desiredSkills`);try{const y=[...(await Ks(f)).val()||[],n];await ry(qt(Gt,`Students/${t}`),{desiredSkills:y}),alert("Skill Added!"),e("")}catch(m){console.log("Error:",m)}}async function l(f){const m=qt(Gt,`Students/${t}/desiredSkills`),v=((await Ks(m)).val()||[]).filter((b,A)=>A!==f);await ry(qt(Gt,`Students/${t}`),{desiredSkills:v})}const c=i?.desiredSkills||[];return T.jsx("div",{children:T.jsxs("div",{className:"desired-skill-flow",children:[T.jsx("h3",{children:"Desired Skills:-"}),T.jsx("div",{className:"desired-skill-list-flow",children:T.jsxs("ul",{children:[c.length===0&&T.jsx("h6",{children:"Add desired skills"}),c.map((f,m)=>T.jsxs("li",{children:[T.jsx("p",{children:f}),T.jsx("button",{onClick:()=>l(m),children:T.jsx("i",{className:"fa-solid fa-xmark"})})]},m))]})}),T.jsxs("div",{className:"add-new-desired-skill-flow",children:[T.jsx("input",{type:"text",placeholder:"Add Desired Skills...",value:n,onChange:f=>e(f.target.value)}),T.jsxs("button",{onClick:a,children:["Add ",T.jsx("i",{className:"fa-solid fa-plus"})]})]})]})})},g9=()=>{const[n,e]=k.useState([]),[t,i]=k.useState();async function a(){const c=(await Ks(qt(Gt,"Students")))?.val(),f=Object.entries(c).map(([m,g])=>({id:m,...g}));e(f)}return k.useEffect(()=>{a()},[]),console.log(n[0]?.desiredSkills),T.jsxs("div",{children:[T.jsx("h3",{className:"skill-matches",children:"AI Skill Matches:"}),T.jsx("div",{className:"skill-profiles",children:T.jsx("div",{className:"profile-cards",children:n.map(l=>T.jsxs("div",{className:"skill-profile-card",children:[T.jsx("img",{src:l.profileImage||ao,alt:"Profile"}),T.jsx("h3",{children:l?.name||"SkillX user"}),T.jsx("p",{children:l.description}),T.jsx("hr",{}),T.jsxs("div",{className:"user-skills",children:[T.jsx("h2",{children:"Current skills:-"}),T.jsx("ul",{children:l.skills?Object.values(l.skills).map((c,f)=>T.jsx("li",{children:c.title},f)):T.jsx("li",{children:"No skills added"})})]}),T.jsxs("div",{className:"user-desired-skills",children:[T.jsx("h2",{children:"Desired skills:-"}),T.jsxs("ul",{children:[l.desiredSkills?.map(c=>T.jsx("li",{children:c})),l.desiredSkills==null&&T.jsx("li",{children:"No desired skills yet"})]})]}),T.jsxs("div",{className:"buttons-cont-skills",children:[T.jsxs("button",{className:"view-pro-skill-card-stu",onClick:()=>{alert("Functionality uner development")},children:[T.jsx("i",{className:"fa-solid fa-eye"})," View Profile"]}),T.jsxs("button",{className:"chat-skill-card",style:{backgroundColor:"black"},children:[T.jsx("i",{className:"fa-solid fa-comment"})," Chat"]})]})]},l.id))})})]})},_9=()=>T.jsx("div",{children:T.jsxs("div",{class:"skill-flow-top",children:[T.jsx(m9,{}),T.jsx(p9,{})]})}),y9=()=>T.jsx("div",{children:T.jsxs("div",{class:"recent-notifications",children:[T.jsx("h4",{children:"Recent Notifications"}),T.jsxs("div",{class:"notification-box",children:[T.jsxs("div",{class:"not-title",children:[T.jsx("i",{class:"fa-solid fa-bolt"}),"",T.jsx("p",{children:"New Skill Match Found with Alice Johnson "})," "]}),T.jsx("p",{class:"time-not",children:"2 hours ago"})]}),T.jsxs("div",{class:"notification-box",children:[T.jsxs("div",{class:"not-title",children:[T.jsx("i",{class:"fa-regular fa-comments"}),"",T.jsx("p",{children:"Bob Willaiams sent you a message "})," "]}),T.jsx("p",{class:"time-not",children:"1 day ago"})]}),T.jsxs("div",{class:"notification-box",children:[T.jsxs("div",{class:"not-title",children:[T.jsx("i",{class:"fa-solid fa-bolt"}),"",T.jsx("p",{children:"Your recent skills #react is in trending! "})," "]}),T.jsx("p",{class:"time-not",children:"5 hours ago"})]}),T.jsxs("div",{class:"notification-box",children:[T.jsxs("div",{class:"not-title",children:[T.jsx("i",{class:"fa-solid fa-bolt"}),"",T.jsx("p",{children:"New Skill Match Found with Alice Johnson "})," "]}),T.jsx("p",{class:"time-not",children:"2 hours ago"})]}),T.jsxs("div",{class:"notification-box",children:[T.jsxs("div",{class:"not-title",children:[T.jsx("i",{class:"fa-regular fa-comments"}),"",T.jsx("p",{children:"Bob Willaiams sent you a message "})," "]}),T.jsx("p",{class:"time-not",children:"1 day ago"})]}),T.jsxs("div",{class:"notification-box",children:[T.jsxs("div",{class:"not-title",children:[T.jsx("i",{class:"fa-solid fa-bolt"}),"",T.jsx("p",{children:"Your recent skills #react is in trending! "})," "]}),T.jsx("p",{class:"time-not",children:"5 hours ago"})]}),T.jsxs("div",{class:"notification-box",children:[T.jsxs("div",{class:"not-title",children:[T.jsx("i",{class:"fa-solid fa-bolt"}),"",T.jsx("p",{children:"New Skill Match Found with Alice Johnson "})," "]}),T.jsx("p",{class:"time-not",children:"2 hours ago"})]}),T.jsxs("div",{class:"notification-box",children:[T.jsxs("div",{class:"not-title",children:[T.jsx("i",{class:"fa-regular fa-comments"}),"",T.jsx("p",{children:"Bob Willaiams sent you a message "})," "]}),T.jsx("p",{class:"time-not",children:"1 day ago"})]}),T.jsxs("div",{class:"notification-box",children:[T.jsxs("div",{class:"not-title",children:[T.jsx("i",{class:"fa-solid fa-bolt"}),"",T.jsx("p",{children:"Your recent skills #react is in trending! "})," "]}),T.jsx("p",{class:"time-not",children:"5 hours ago"})]}),T.jsxs("div",{class:"notification-box",children:[T.jsxs("div",{class:"not-title",children:[T.jsx("i",{class:"fa-solid fa-bolt"}),"",T.jsx("p",{children:"New Skill Match Found with Alice Johnson "})," "]}),T.jsx("p",{class:"time-not",children:"2 hours ago"})]}),T.jsxs("div",{class:"notification-box",children:[T.jsxs("div",{class:"not-title",children:[T.jsx("i",{class:"fa-regular fa-comments"}),"",T.jsx("p",{children:"Bob Willaiams sent you a message "})," "]}),T.jsx("p",{class:"time-not",children:"1 day ago"})]}),T.jsxs("div",{class:"notification-box",children:[T.jsxs("div",{class:"not-title",children:[T.jsx("i",{class:"fa-solid fa-bolt"}),"",T.jsx("p",{children:"Your recent skills #react is in trending! "})," "]}),T.jsx("p",{class:"time-not",children:"5 hours ago"})]})]})}),v9=()=>T.jsxs(T.Fragment,{children:[T.jsx("h3",{children:"Skill Exchange Flow"}),T.jsx(_9,{}),T.jsxs("div",{className:"skill-ex-bottom",children:[T.jsx(g9,{}),T.jsx(y9,{})]})]}),E9=()=>{const[n,e]=k.useState(null),t=fy();return k.useEffect(()=>{const i=JSON.parse(localStorage.getItem("loggedInUserSkillExchange"));i&&(e(i.role),i.role==="student"?t(`/student-dashboard/${i.id}`):i.role==="mentor"?t(`/mentor-dashboard/${i.id}`):i.role==="organization"?t(`/organization-dashboard/${i.id}`):alert("user not exist"))},[]),T.jsx(T.Fragment,{children:T.jsxs(eO,{children:[T.jsx(Qn,{path:"/",element:T.jsx(D3,{})}),T.jsx(Qn,{path:"/login",element:T.jsx(f1,{})}),T.jsx(Qn,{path:"/register",element:T.jsx(Q3,{})}),T.jsxs(Qn,{path:"/student-dashboard/:id/*",element:T.jsxs(K0,{children:[" ",T.jsxs(W3,{children:[" ",T.jsx(o9,{})," "]})," "]}),children:[T.jsx(Qn,{path:"",element:T.jsx(a9,{})}),T.jsx(Qn,{path:"dashboard",element:T.jsx(c9,{})}),T.jsx(Qn,{path:"skill-exchange",element:T.jsx(v9,{})}),T.jsx(Qn,{path:"projects",element:T.jsx(d9,{})}),T.jsx(Qn,{path:"mentorship",element:T.jsx(f9,{})}),T.jsx(Qn,{path:"events",element:T.jsx(h9,{})})]}),T.jsx(Qn,{path:"/mentor-dashboard/:id/*",element:T.jsx(K0,{children:T.jsx(l9,{})})}),T.jsx(Qn,{path:"/organization-dashboard/:id/*",element:T.jsx(u9,{})})]})})};ax.createRoot(document.getElementById("root")).render(T.jsx(R3,{children:T.jsx(bO,{children:T.jsx(E9,{})})}));
